var requirejs, require, define;
! function(e) {
    function t(e, t) {
        return y.call(e, t)
    }

    function n(e, t) {
        var n, r, i, o, a, s, l, c, u, p, d = t && t.split("/"),
            h = m.map,
            f = h && h["*"] || {};
        if (e && "." === e.charAt(0))
            if (t) {
                for (d = d.slice(0, d.length - 1), e = d.concat(e.split("/")), c = 0; c < e.length; c += 1)
                    if ("." === (p = e[c])) e.splice(c, 1), c -= 1;
                    else if (".." === p) {
                    if (1 === c && (".." === e[2] || ".." === e[0])) break;
                    c > 0 && (e.splice(c - 1, 2), c -= 2)
                }
                e = e.join("/")
            } else 0 === e.indexOf("./") && (e = e.substring(2));
        if ((d || f) && h) {
            for (n = e.split("/"), c = n.length; c > 0; c -= 1) {
                if (r = n.slice(0, c).join("/"), d)
                    for (u = d.length; u > 0; u -= 1)
                        if ((i = h[d.slice(0, u).join("/")]) && (i = i[r])) {
                            o = i, a = c;
                            break
                        } if (o) break;
                !s && f && f[r] && (s = f[r], l = c)
            }!o && s && (o = s, a = l), o && (n.splice(0, a, o), e = n.join("/"))
        }
        return e
    }

    function r(t, n) {
        return function() {
            return u.apply(e, v.call(arguments, 0).concat([t, n]))
        }
    }

    function i(e) {
        return function(t) {
            return n(t, e)
        }
    }

    function o(e) {
        return function(t) {
            h[e] = t
        }
    }

    function a(n) {
        if (t(f, n)) {
            var r = f[n];
            delete f[n], g[n] = !0, c.apply(e, r)
        }
        if (!t(h, n) && !t(g, n)) throw new Error("No " + n);
        return h[n]
    }

    function s(e) {
        var t, n = e ? e.indexOf("!") : -1;
        return n > -1 && (t = e.substring(0, n), e = e.substring(n + 1, e.length)), [t, e]
    }

    function l(e) {
        return function() {
            return m && m.config && m.config[e] || {}
        }
    }
    var c, u, p, d, h = {},
        f = {},
        m = {},
        g = {},
        y = Object.prototype.hasOwnProperty,
        v = [].slice;
    p = function(e, t) {
        var r, o = s(e),
            l = o[0];
        return e = o[1], l && (l = n(l, t), r = a(l)), l ? e = r && r.normalize ? r.normalize(e, i(t)) : n(e, t) : (e = n(e, t), o = s(e), l = o[0], e = o[1], l && (r = a(l))), {
            f: l ? l + "!" + e : e,
            n: e,
            pr: l,
            p: r
        }
    }, d = {
        require: function(e) {
            return r(e)
        },
        exports: function(e) {
            var t = h[e];
            return void 0 !== t ? t : h[e] = {}
        },
        module: function(e) {
            return {
                id: e,
                uri: "",
                exports: h[e],
                config: l(e)
            }
        }
    }, c = function(n, i, s, l) {
        var c, u, m, y, v, b, x = [];
        if (l = l || n, "function" == typeof s) {
            for (i = !i.length && s.length ? ["require", "exports", "module"] : i, v = 0; v < i.length; v += 1)
                if (y = p(i[v], l), "require" === (u = y.f)) x[v] = d.require(n);
                else if ("exports" === u) x[v] = d.exports(n), b = !0;
            else if ("module" === u) c = x[v] = d.module(n);
            else if (t(h, u) || t(f, u) || t(g, u)) x[v] = a(u);
            else {
                if (!y.p) throw new Error(n + " missing " + u);
                y.p.load(y.n, r(l, !0), o(u), {}), x[v] = h[u]
            }
            m = s.apply(h[n], x), n && (c && c.exports !== e && c.exports !== h[n] ? h[n] = c.exports : m === e && b || (h[n] = m))
        } else n && (h[n] = s)
    }, requirejs = require = u = function(t, n, r, i, o) {
        return "string" == typeof t ? d[t] ? d[t](n) : a(p(t, n).f) : (t.splice || (m = t, n.splice ? (t = n, n = r, r = null) : t = e), n = n || function() {}, "function" == typeof r && (r = i, i = o), i ? c(e, t, n, r) : setTimeout(function() {
            c(e, t, n, r)
        }, 4), u)
    }, u.config = function(e) {
        return m = e, m.deps && u(m.deps, m.callback), u
    }, define = function(e, n, r) {
        n.splice || (r = n, n = []), t(h, e) || t(f, e) || (f[e] = [e, n, r])
    }, define.amd = {
        jQuery: !0
    }
}(), "undefined" != typeof ALMOND_OVERRIDES && ALMOND_OVERRIDES && (define = ALMOND_OVERRIDES.define || define, require = ALMOND_OVERRIDES.require || require, requirejs = ALMOND_OVERRIDES.requirejs || requirejs), define("vendor/almond", function() {}), define("testbridge", ["require"], function(e) {
        function t() {
            window.consoleOverride = !0;
            var e = window.console.log;
            window.console.log = function() {
                for (var t = [], n = 0; n < arguments.length; n++) t.push(arguments[n]);
                e.apply(window.console, [].concat([t.join(" ")], t))
            }
        }
        var n = {
            ready: function() {
                try {
                    window.TestBridge = n, parent.USING_SELENIUM && t()
                } catch (e) {}
            }
        };
        return n
    }), define("ipad.ghostevents", ["require"], function(e) {
        function t(e) {
            r && o.evtInScope(e) && (e.stopPropagation(), e.stopImmediatePropagation())
        }

        function n(e) {
            r && o.evtInScope(e) && (e.preventDefault(), e.stopPropagation(), e.stopImmediatePropagation())
        }
        var r = !1,
            i = null,
            o = {
                isGhostEvent: function(e) {
                    return !1
                },
                evtInScope: function(e) {
                    return !1
                }
            };
        return document.addEventListener("mousedown", function(e) {
            o.evtInScope(e) && (i = document.activeElement, r = o.isGhostEvent(e), t(e))
        }, !0), document.addEventListener("mouseup", t, !0), document.addEventListener("click", function(e) {
            n(e), r && document.activeElement !== i && (document.activeElement && document.activeElement.blur(), i && i.focus()), r = !1
        }, !0), document.addEventListener("focus", n, !0), document.addEventListener("blur", n, !0), o
    }),
    function(e, t) {
        "object" == typeof module && "object" == typeof module.exports ? module.exports = e.document ? t(e, !0) : function(e) {
            if (!e.document) throw new Error("jQuery requires a window with a document");
            return t(e)
        } : t(e)
    }("undefined" != typeof window ? window : this, function(e, t) {
        function n(e) {
            var t = !!e && "length" in e && e.length,
                n = ie.type(e);
            return "function" !== n && !ie.isWindow(e) && ("array" === n || 0 === t || "number" == typeof t && t > 0 && t - 1 in e)
        }

        function r(e, t, n) {
            if (ie.isFunction(t)) return ie.grep(e, function(e, r) {
                return !!t.call(e, r, e) !== n
            });
            if (t.nodeType) return ie.grep(e, function(e) {
                return e === t !== n
            });
            if ("string" == typeof t) {
                if (fe.test(t)) return ie.filter(t, e, n);
                t = ie.filter(t, e)
            }
            return ie.grep(e, function(e) {
                return J.call(t, e) > -1 !== n
            })
        }

        function i(e, t) {
            for (;
                (e = e[t]) && 1 !== e.nodeType;);
            return e
        }

        function o(e) {
            var t = {};
            return ie.each(e.match(be) || [], function(e, n) {
                t[n] = !0
            }), t
        }

        function a() {
            X.removeEventListener("DOMContentLoaded", a), e.removeEventListener("load", a), ie.ready()
        }

        function s() {
            this.expando = ie.expando + s.uid++
        }

        function l(e, t, n) {
            var r;
            if (void 0 === n && 1 === e.nodeType)
                if (r = "data-" + t.replace(Ie, "-$&").toLowerCase(), "string" == typeof(n = e.getAttribute(r))) {
                    try {
                        n = "true" === n || "false" !== n && ("null" === n ? null : +n + "" === n ? +n : Me.test(n) ? ie.parseJSON(n) : n)
                    } catch (e) {}
                    Ee.set(e, t, n)
                } else n = void 0;
            return n
        }

        function c(e, t, n, r) {
            var i, o = 1,
                a = 20,
                s = r ? function() {
                    return r.cur()
                } : function() {
                    return ie.css(e, t, "")
                },
                l = s(),
                c = n && n[3] || (ie.cssNumber[t] ? "" : "px"),
                u = (ie.cssNumber[t] || "px" !== c && +l) && Ce.exec(ie.css(e, t));
            if (u && u[3] !== c) {
                c = c || u[3], n = n || [], u = +l || 1;
                do {
                    o = o || ".5", u /= o, ie.style(e, t, u + c)
                } while (o !== (o = s() / l) && 1 !== o && --a)
            }
            return n && (u = +u || +l || 0, i = n[1] ? u + (n[1] + 1) * n[2] : +n[2], r && (r.unit = c, r.start = u, r.end = i)), i
        }

        function u(e, t) {
            var n = void 0 !== e.getElementsByTagName ? e.getElementsByTagName(t || "*") : void 0 !== e.querySelectorAll ? e.querySelectorAll(t || "*") : [];
            return void 0 === t || t && ie.nodeName(e, t) ? ie.merge([e], n) : n
        }

        function p(e, t) {
            for (var n = 0, r = e.length; n < r; n++) Se.set(e[n], "globalEval", !t || Se.get(t[n], "globalEval"))
        }

        function d(e, t, n, r, i) {
            for (var o, a, s, l, c, d, h = t.createDocumentFragment(), f = [], m = 0, g = e.length; m < g; m++)
                if ((o = e[m]) || 0 === o)
                    if ("object" === ie.type(o)) ie.merge(f, o.nodeType ? [o] : o);
                    else if (Fe.test(o)) {
                for (a = a || h.appendChild(t.createElement("div")), s = (Le.exec(o) || ["", ""])[1].toLowerCase(), l = Oe[s] || Oe._default, a.innerHTML = l[1] + ie.htmlPrefilter(o) + l[2], d = l[0]; d--;) a = a.lastChild;
                ie.merge(f, a.childNodes), a = h.firstChild, a.textContent = ""
            } else f.push(t.createTextNode(o));
            for (h.textContent = "", m = 0; o = f[m++];)
                if (r && ie.inArray(o, r) > -1) i && i.push(o);
                else if (c = ie.contains(o.ownerDocument, o), a = u(h.appendChild(o), "script"), c && p(a), n)
                for (d = 0; o = a[d++];) Ae.test(o.type || "") && n.push(o);
            return h
        }

        function h() {
            return !0
        }

        function f() {
            return !1
        }

        function m() {
            try {
                return X.activeElement
            } catch (e) {}
        }

        function g(e, t, n, r, i, o) {
            var a, s;
            if ("object" == typeof t) {
                "string" != typeof n && (r = r || n, n = void 0);
                for (s in t) g(e, s, n, r, t[s], o);
                return e
            }
            if (null == r && null == i ? (i = n, r = n = void 0) : null == i && ("string" == typeof n ? (i = r, r = void 0) : (i = r, r = n, n = void 0)), !1 === i) i = f;
            else if (!i) return e;
            return 1 === o && (a = i, i = function(e) {
                return ie().off(e), a.apply(this, arguments)
            }, i.guid = a.guid || (a.guid = ie.guid++)), e.each(function() {
                ie.event.add(this, t, i, r, n)
            })
        }

        function y(e, t) {
            return ie.nodeName(e, "table") && ie.nodeName(11 !== t.nodeType ? t : t.firstChild, "tr") ? e.getElementsByTagName("tbody")[0] || e.appendChild(e.ownerDocument.createElement("tbody")) : e
        }

        function v(e) {
            return e.type = (null !== e.getAttribute("type")) + "/" + e.type, e
        }

        function b(e) {
            var t = ze.exec(e.type);
            return t ? e.type = t[1] : e.removeAttribute("type"), e
        }

        function x(e, t) {
            var n, r, i, o, a, s, l, c;
            if (1 === t.nodeType) {
                if (Se.hasData(e) && (o = Se.access(e), a = Se.set(t, o), c = o.events)) {
                    delete a.handle, a.events = {};
                    for (i in c)
                        for (n = 0, r = c[i].length; n < r; n++) ie.event.add(t, i, c[i][n])
                }
                Ee.hasData(e) && (s = Ee.access(e), l = ie.extend({}, s), Ee.set(t, l))
            }
        }

        function w(e, t) {
            var n = t.nodeName.toLowerCase();
            "input" === n && Pe.test(e.type) ? t.checked = e.checked : "input" !== n && "textarea" !== n || (t.defaultValue = e.defaultValue)
        }

        function _(e, t, n, r) {
            t = Q.apply([], t);
            var i, o, a, s, l, c, p = 0,
                h = e.length,
                f = h - 1,
                m = t[0],
                g = ie.isFunction(m);
            if (g || h > 1 && "string" == typeof m && !re.checkClone && Ve.test(m)) return e.each(function(i) {
                var o = e.eq(i);
                g && (t[0] = m.call(this, i, o.html())), _(o, t, n, r)
            });
            if (h && (i = d(t, e[0].ownerDocument, !1, e, r), o = i.firstChild, 1 === i.childNodes.length && (i = o), o || r)) {
                for (a = ie.map(u(i, "script"), v), s = a.length; p < h; p++) l = i, p !== f && (l = ie.clone(l, !0, !0), s && ie.merge(a, u(l, "script"))), n.call(e[p], l, p);
                if (s)
                    for (c = a[a.length - 1].ownerDocument, ie.map(a, b), p = 0; p < s; p++) l = a[p], Ae.test(l.type || "") && !Se.access(l, "globalEval") && ie.contains(c, l) && (l.src ? ie._evalUrl && ie._evalUrl(l.src) : ie.globalEval(l.textContent.replace(Ue, "")))
            }
            return e
        }

        function S(e, t, n) {
            for (var r, i = t ? ie.filter(t, e) : e, o = 0; null != (r = i[o]); o++) n || 1 !== r.nodeType || ie.cleanData(u(r)), r.parentNode && (n && ie.contains(r.ownerDocument, r) && p(u(r, "script")), r.parentNode.removeChild(r));
            return e
        }

        function E(e, t) {
            var n = ie(t.createElement(e)).appendTo(t.body),
                r = ie.css(n[0], "display");
            return n.detach(), r
        }

        function M(e) {
            var t = X,
                n = He[e];
            return n || (n = E(e, t), "none" !== n && n || (Ge = (Ge || ie("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement), t = Ge[0].contentDocument, t.write(), t.close(), n = E(e, t), Ge.detach()), He[e] = n), n
        }

        function I(e, t, n) {
            var r, i, o, a, s = e.style;
            return n = n || Ye(e), a = n ? n.getPropertyValue(t) || n[t] : void 0, "" !== a && void 0 !== a || ie.contains(e.ownerDocument, e) || (a = ie.style(e, t)), n && !re.pixelMarginRight() && We.test(a) && Ke.test(t) && (r = s.width, i = s.minWidth, o = s.maxWidth, s.minWidth = s.maxWidth = s.width = a, a = n.width, s.width = r, s.minWidth = i, s.maxWidth = o), void 0 !== a ? a + "" : a
        }

        function T(e, t) {
            return {
                get: function() {
                    return e() ? void delete this.get : (this.get = t).apply(this, arguments)
                }
            }
        }

        function C(e) {
            if (e in tt) return e;
            for (var t = e[0].toUpperCase() + e.slice(1), n = et.length; n--;)
                if ((e = et[n] + t) in tt) return e
        }

        function k(e, t, n) {
            var r = Ce.exec(t);
            return r ? Math.max(0, r[2] - (n || 0)) + (r[3] || "px") : t
        }

        function D(e, t, n, r, i) {
            for (var o = n === (r ? "border" : "content") ? 4 : "width" === t ? 1 : 0, a = 0; o < 4; o += 2) "margin" === n && (a += ie.css(e, n + ke[o], !0, i)), r ? ("content" === n && (a -= ie.css(e, "padding" + ke[o], !0, i)), "margin" !== n && (a -= ie.css(e, "border" + ke[o] + "Width", !0, i))) : (a += ie.css(e, "padding" + ke[o], !0, i), "padding" !== n && (a += ie.css(e, "border" + ke[o] + "Width", !0, i)));
            return a
        }

        function P(e, t, n) {
            var r = !0,
                i = "width" === t ? e.offsetWidth : e.offsetHeight,
                o = Ye(e),
                a = "border-box" === ie.css(e, "boxSizing", !1, o);
            if (i <= 0 || null == i) {
                if (i = I(e, t, o), (i < 0 || null == i) && (i = e.style[t]), We.test(i)) return i;
                r = a && (re.boxSizingReliable() || i === e.style[t]), i = parseFloat(i) || 0
            }
            return i + D(e, t, n || (a ? "border" : "content"), r, o) + "px"
        }

        function L(e, t) {
            for (var n, r, i, o = [], a = 0, s = e.length; a < s; a++) r = e[a], r.style && (o[a] = Se.get(r, "olddisplay"), n = r.style.display, t ? (o[a] || "none" !== n || (r.style.display = ""), "" === r.style.display && De(r) && (o[a] = Se.access(r, "olddisplay", M(r.nodeName)))) : (i = De(r), "none" === n && i || Se.set(r, "olddisplay", i ? n : ie.css(r, "display"))));
            for (a = 0; a < s; a++) r = e[a], r.style && (t && "none" !== r.style.display && "" !== r.style.display || (r.style.display = t ? o[a] || "" : "none"));
            return e
        }

        function A(e, t, n, r, i) {
            return new A.prototype.init(e, t, n, r, i)
        }

        function O() {
            return e.setTimeout(function() {
                nt = void 0
            }), nt = ie.now()
        }

        function F(e, t) {
            var n, r = 0,
                i = {
                    height: e
                };
            for (t = t ? 1 : 0; r < 4; r += 2 - t) n = ke[r], i["margin" + n] = i["padding" + n] = e;
            return t && (i.opacity = i.width = e), i
        }

        function q(e, t, n) {
            for (var r, i = (B.tweeners[t] || []).concat(B.tweeners["*"]), o = 0, a = i.length; o < a; o++)
                if (r = i[o].call(n, t, e)) return r
        }

        function N(e, t, n) {
            var r, i, o, a, s, l, c, u = this,
                p = {},
                d = e.style,
                h = e.nodeType && De(e),
                f = Se.get(e, "fxshow");
            n.queue || (s = ie._queueHooks(e, "fx"), null == s.unqueued && (s.unqueued = 0, l = s.empty.fire, s.empty.fire = function() {
                s.unqueued || l()
            }), s.unqueued++, u.always(function() {
                u.always(function() {
                    s.unqueued--, ie.queue(e, "fx").length || s.empty.fire()
                })
            })), 1 === e.nodeType && ("height" in t || "width" in t) && (n.overflow = [d.overflow, d.overflowX, d.overflowY], c = ie.css(e, "display"), "inline" === ("none" === c ? Se.get(e, "olddisplay") || M(e.nodeName) : c) && "none" === ie.css(e, "float") && (d.display = "inline-block")), n.overflow && (d.overflow = "hidden", u.always(function() {
                d.overflow = n.overflow[0], d.overflowX = n.overflow[1], d.overflowY = n.overflow[2]
            }));
            for (r in t)
                if (i = t[r], it.exec(i)) {
                    if (delete t[r], o = o || "toggle" === i, i === (h ? "hide" : "show")) {
                        if ("show" !== i || !f || void 0 === f[r]) continue;
                        h = !0
                    }
                    p[r] = f && f[r] || ie.style(e, r)
                } else c = void 0;
            if (ie.isEmptyObject(p)) "inline" === ("none" === c ? M(e.nodeName) : c) && (d.display = c);
            else {
                f ? "hidden" in f && (h = f.hidden) : f = Se.access(e, "fxshow", {}), o && (f.hidden = !h), h ? ie(e).show() : u.done(function() {
                    ie(e).hide()
                }), u.done(function() {
                    var t;
                    Se.remove(e, "fxshow");
                    for (t in p) ie.style(e, t, p[t])
                });
                for (r in p) a = q(h ? f[r] : 0, r, u), r in f || (f[r] = a.start, h && (a.end = a.start, a.start = "width" === r || "height" === r ? 1 : 0))
            }
        }

        function R(e, t) {
            var n, r, i, o, a;
            for (n in e)
                if (r = ie.camelCase(n), i = t[r], o = e[n], ie.isArray(o) && (i = o[1], o = e[n] = o[0]), n !== r && (e[r] = o, delete e[n]), (a = ie.cssHooks[r]) && "expand" in a) {
                    o = a.expand(o), delete e[r];
                    for (n in o) n in e || (e[n] = o[n], t[n] = i)
                } else t[r] = i
        }

        function B(e, t, n) {
            var r, i, o = 0,
                a = B.prefilters.length,
                s = ie.Deferred().always(function() {
                    delete l.elem
                }),
                l = function() {
                    if (i) return !1;
                    for (var t = nt || O(), n = Math.max(0, c.startTime + c.duration - t), r = n / c.duration || 0, o = 1 - r, a = 0, l = c.tweens.length; a < l; a++) c.tweens[a].run(o);
                    return s.notifyWith(e, [c, o, n]), o < 1 && l ? n : (s.resolveWith(e, [c]), !1)
                },
                c = s.promise({
                    elem: e,
                    props: ie.extend({}, t),
                    opts: ie.extend(!0, {
                        specialEasing: {},
                        easing: ie.easing._default
                    }, n),
                    originalProperties: t,
                    originalOptions: n,
                    startTime: nt || O(),
                    duration: n.duration,
                    tweens: [],
                    createTween: function(t, n) {
                        var r = ie.Tween(e, c.opts, t, n, c.opts.specialEasing[t] || c.opts.easing);
                        return c.tweens.push(r), r
                    },
                    stop: function(t) {
                        var n = 0,
                            r = t ? c.tweens.length : 0;
                        if (i) return this;
                        for (i = !0; n < r; n++) c.tweens[n].run(1);
                        return t ? (s.notifyWith(e, [c, 1, 0]), s.resolveWith(e, [c, t])) : s.rejectWith(e, [c, t]), this
                    }
                }),
                u = c.props;
            for (R(u, c.opts.specialEasing); o < a; o++)
                if (r = B.prefilters[o].call(c, e, u, c.opts)) return ie.isFunction(r.stop) && (ie._queueHooks(c.elem, c.opts.queue).stop = ie.proxy(r.stop, r)), r;
            return ie.map(u, q, c), ie.isFunction(c.opts.start) && c.opts.start.call(e, c), ie.fx.timer(ie.extend(l, {
                elem: e,
                anim: c,
                queue: c.opts.queue
            })), c.progress(c.opts.progress).done(c.opts.done, c.opts.complete).fail(c.opts.fail).always(c.opts.always)
        }

        function j(e) {
            return e.getAttribute && e.getAttribute("class") || ""
        }

        function V(e) {
            return function(t, n) {
                "string" != typeof t && (n = t, t = "*");
                var r, i = 0,
                    o = t.toLowerCase().match(be) || [];
                if (ie.isFunction(n))
                    for (; r = o[i++];) "+" === r[0] ? (r = r.slice(1) || "*", (e[r] = e[r] || []).unshift(n)) : (e[r] = e[r] || []).push(n)
            }
        }

        function z(e, t, n, r) {
            function i(s) {
                var l;
                return o[s] = !0, ie.each(e[s] || [], function(e, s) {
                    var c = s(t, n, r);
                    return "string" != typeof c || a || o[c] ? a ? !(l = c) : void 0 : (t.dataTypes.unshift(c), i(c), !1)
                }), l
            }
            var o = {},
                a = e === Et;
            return i(t.dataTypes[0]) || !o["*"] && i("*")
        }

        function U(e, t) {
            var n, r, i = ie.ajaxSettings.flatOptions || {};
            for (n in t) void 0 !== t[n] && ((i[n] ? e : r || (r = {}))[n] = t[n]);
            return r && ie.extend(!0, e, r), e
        }

        function G(e, t, n) {
            for (var r, i, o, a, s = e.contents, l = e.dataTypes;
                "*" === l[0];) l.shift(), void 0 === r && (r = e.mimeType || t.getResponseHeader("Content-Type"));
            if (r)
                for (i in s)
                    if (s[i] && s[i].test(r)) {
                        l.unshift(i);
                        break
                    } if (l[0] in n) o = l[0];
            else {
                for (i in n) {
                    if (!l[0] || e.converters[i + " " + l[0]]) {
                        o = i;
                        break
                    }
                    a || (a = i)
                }
                o = o || a
            }
            if (o) return o !== l[0] && l.unshift(o), n[o]
        }

        function H(e, t, n, r) {
            var i, o, a, s, l, c = {},
                u = e.dataTypes.slice();
            if (u[1])
                for (a in e.converters) c[a.toLowerCase()] = e.converters[a];
            for (o = u.shift(); o;)
                if (e.responseFields[o] && (n[e.responseFields[o]] = t), !l && r && e.dataFilter && (t = e.dataFilter(t, e.dataType)), l = o, o = u.shift())
                    if ("*" === o) o = l;
                    else if ("*" !== l && l !== o) {
                if (!(a = c[l + " " + o] || c["* " + o]))
                    for (i in c)
                        if (s = i.split(" "), s[1] === o && (a = c[l + " " + s[0]] || c["* " + s[0]])) {
                            !0 === a ? a = c[i] : !0 !== c[i] && (o = s[0], u.unshift(s[1]));
                            break
                        } if (!0 !== a)
                    if (a && e.throws) t = a(t);
                    else try {
                        t = a(t)
                    } catch (e) {
                        return {
                            state: "parsererror",
                            error: a ? e : "No conversion from " + l + " to " + o
                        }
                    }
            }
            return {
                state: "success",
                data: t
            }
        }

        function K(e, t, n, r) {
            var i;
            if (ie.isArray(t)) ie.each(t, function(t, i) {
                n || Ct.test(e) ? r(e, i) : K(e + "[" + ("object" == typeof i && null != i ? t : "") + "]", i, n, r)
            });
            else if (n || "object" !== ie.type(t)) r(e, t);
            else
                for (i in t) K(e + "[" + i + "]", t[i], n, r)
        }

        function W(e) {
            return ie.isWindow(e) ? e : 9 === e.nodeType && e.defaultView
        }
        var Y = [],
            X = e.document,
            $ = Y.slice,
            Q = Y.concat,
            Z = Y.push,
            J = Y.indexOf,
            ee = {},
            te = ee.toString,
            ne = ee.hasOwnProperty,
            re = {},
            ie = function(e, t) {
                return new ie.fn.init(e, t)
            },
            oe = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,
            ae = /^-ms-/,
            se = /-([\da-z])/gi,
            le = function(e, t) {
                return t.toUpperCase()
            };
        ie.fn = ie.prototype = {
            jquery: "2.2.4",
            constructor: ie,
            selector: "",
            length: 0,
            toArray: function() {
                return $.call(this)
            },
            get: function(e) {
                return null != e ? e < 0 ? this[e + this.length] : this[e] : $.call(this)
            },
            pushStack: function(e) {
                var t = ie.merge(this.constructor(), e);
                return t.prevObject = this, t.context = this.context, t
            },
            each: function(e) {
                return ie.each(this, e)
            },
            map: function(e) {
                return this.pushStack(ie.map(this, function(t, n) {
                    return e.call(t, n, t)
                }))
            },
            slice: function() {
                return this.pushStack($.apply(this, arguments))
            },
            first: function() {
                return this.eq(0)
            },
            last: function() {
                return this.eq(-1)
            },
            eq: function(e) {
                var t = this.length,
                    n = +e + (e < 0 ? t : 0);
                return this.pushStack(n >= 0 && n < t ? [this[n]] : [])
            },
            end: function() {
                return this.prevObject || this.constructor()
            },
            push: Z,
            sort: Y.sort,
            splice: Y.splice
        }, ie.extend = ie.fn.extend = function() {
            var e, t, n, r, i, o, a = arguments[0] || {},
                s = 1,
                l = arguments.length,
                c = !1;
            for ("boolean" == typeof a && (c = a, a = arguments[s] || {}, s++), "object" == typeof a || ie.isFunction(a) || (a = {}), s === l && (a = this, s--); s < l; s++)
                if (null != (e = arguments[s]))
                    for (t in e) n = a[t], r = e[t], a !== r && (c && r && (ie.isPlainObject(r) || (i = ie.isArray(r))) ? (i ? (i = !1, o = n && ie.isArray(n) ? n : []) : o = n && ie.isPlainObject(n) ? n : {}, a[t] = ie.extend(c, o, r)) : void 0 !== r && (a[t] = r));
            return a
        }, ie.extend({
            expando: "jQuery" + ("2.2.4" + Math.random()).replace(/\D/g, ""),
            isReady: !0,
            error: function(e) {
                throw new Error(e)
            },
            noop: function() {},
            isFunction: function(e) {
                return "function" === ie.type(e)
            },
            isArray: Array.isArray,
            isWindow: function(e) {
                return null != e && e === e.window
            },
            isNumeric: function(e) {
                var t = e && e.toString();
                return !ie.isArray(e) && t - parseFloat(t) + 1 >= 0
            },
            isPlainObject: function(e) {
                var t;
                if ("object" !== ie.type(e) || e.nodeType || ie.isWindow(e)) return !1;
                if (e.constructor && !ne.call(e, "constructor") && !ne.call(e.constructor.prototype || {}, "isPrototypeOf")) return !1;
                for (t in e);
                return void 0 === t || ne.call(e, t)
            },
            isEmptyObject: function(e) {
                var t;
                for (t in e) return !1;
                return !0
            },
            type: function(e) {
                return null == e ? e + "" : "object" == typeof e || "function" == typeof e ? ee[te.call(e)] || "object" : typeof e
            },
            globalEval: function(e) {
                var t, n = eval;
                (e = ie.trim(e)) && (1 === e.indexOf("use strict") ? (t = X.createElement("script"), t.text = e, X.head.appendChild(t).parentNode.removeChild(t)) : n(e))
            },
            camelCase: function(e) {
                return e.replace(ae, "ms-").replace(se, le)
            },
            nodeName: function(e, t) {
                return e.nodeName && e.nodeName.toLowerCase() === t.toLowerCase()
            },
            each: function(e, t) {
                var r, i = 0;
                if (n(e))
                    for (r = e.length; i < r && !1 !== t.call(e[i], i, e[i]); i++);
                else
                    for (i in e)
                        if (!1 === t.call(e[i], i, e[i])) break;
                return e
            },
            trim: function(e) {
                return null == e ? "" : (e + "").replace(oe, "")
            },
            makeArray: function(e, t) {
                var r = t || [];
                return null != e && (n(Object(e)) ? ie.merge(r, "string" == typeof e ? [e] : e) : Z.call(r, e)), r
            },
            inArray: function(e, t, n) {
                return null == t ? -1 : J.call(t, e, n)
            },
            merge: function(e, t) {
                for (var n = +t.length, r = 0, i = e.length; r < n; r++) e[i++] = t[r];
                return e.length = i, e
            },
            grep: function(e, t, n) {
                for (var r = [], i = 0, o = e.length, a = !n; i < o; i++) !t(e[i], i) !== a && r.push(e[i]);
                return r
            },
            map: function(e, t, r) {
                var i, o, a = 0,
                    s = [];
                if (n(e))
                    for (i = e.length; a < i; a++) null != (o = t(e[a], a, r)) && s.push(o);
                else
                    for (a in e) null != (o = t(e[a], a, r)) && s.push(o);
                return Q.apply([], s)
            },
            guid: 1,
            proxy: function(e, t) {
                var n, r, i;
                if ("string" == typeof t && (n = e[t], t = e, e = n), ie.isFunction(e)) return r = $.call(arguments, 2), i = function() {
                    return e.apply(t || this, r.concat($.call(arguments)))
                }, i.guid = e.guid = e.guid || ie.guid++, i
            },
            now: Date.now,
            support: re
        }), "function" == typeof Symbol && (ie.fn[Symbol.iterator] = Y[Symbol.iterator]), ie.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "), function(e, t) {
            ee["[object " + t + "]"] = t.toLowerCase()
        });
        var ce = function(e) {
            function t(e, t, n, r) {
                var i, o, a, s, c, p, d, h, f = t && t.ownerDocument,
                    m = t ? t.nodeType : 9;
                if (n = n || [], "string" != typeof e || !e || 1 !== m && 9 !== m && 11 !== m) return n;
                if (!r && ((t ? t.ownerDocument || t : R) !== D && k(t), t = t || D, L)) {
                    if (11 !== m && (p = me.exec(e)))
                        if (i = p[1]) {
                            if (9 === m) {
                                if (!(a = t.getElementById(i))) return n;
                                if (a.id === i) return n.push(a), n
                            } else if (f && (a = f.getElementById(i)) && q(t, a) && a.id === i) return n.push(a), n
                        } else {
                            if (p[2]) return $.apply(n, t.getElementsByTagName(e)), n;
                            if ((i = p[3]) && b.getElementsByClassName && t.getElementsByClassName) return $.apply(n, t.getElementsByClassName(i)), n
                        } if (b.qsa && !U[e + " "] && (!A || !A.test(e))) {
                        if (1 !== m) f = t, h = e;
                        else if ("object" !== t.nodeName.toLowerCase()) {
                            for ((s = t.getAttribute("id")) ? s = s.replace(ye, "\\$&") : t.setAttribute("id", s = N), d = S(e), o = d.length, c = ue.test(s) ? "#" + s : "[id='" + s + "']"; o--;) d[o] = c + " " + u(d[o]);
                            h = d.join(","), f = ge.test(e) && l(t.parentNode) || t
                        }
                        if (h) try {
                            return $.apply(n, f.querySelectorAll(h)), n
                        } catch (e) {} finally {
                            s === N && t.removeAttribute("id")
                        }
                    }
                }
                return M(e.replace(oe, "$1"), t, n, r)
            }

            function n() {
                function e(n, r) {
                    return t.push(n + " ") > x.cacheLength && delete e[t.shift()], e[n + " "] = r
                }
                var t = [];
                return e
            }

            function r(e) {
                return e[N] = !0, e
            }

            function i(e) {
                var t = D.createElement("div");
                try {
                    return !!e(t)
                } catch (e) {
                    return !1
                } finally {
                    t.parentNode && t.parentNode.removeChild(t), t = null
                }
            }

            function o(e, t) {
                for (var n = e.split("|"), r = n.length; r--;) x.attrHandle[n[r]] = t
            }

            function a(e, t) {
                var n = t && e,
                    r = n && 1 === e.nodeType && 1 === t.nodeType && (~t.sourceIndex || H) - (~e.sourceIndex || H);
                if (r) return r;
                if (n)
                    for (; n = n.nextSibling;)
                        if (n === t) return -1;
                return e ? 1 : -1
            }

            function s(e) {
                return r(function(t) {
                    return t = +t, r(function(n, r) {
                        for (var i, o = e([], n.length, t), a = o.length; a--;) n[i = o[a]] && (n[i] = !(r[i] = n[i]))
                    })
                })
            }

            function l(e) {
                return e && void 0 !== e.getElementsByTagName && e
            }

            function c() {}

            function u(e) {
                for (var t = 0, n = e.length, r = ""; t < n; t++) r += e[t].value;
                return r
            }

            function p(e, t, n) {
                var r = t.dir,
                    i = n && "parentNode" === r,
                    o = j++;
                return t.first ? function(t, n, o) {
                    for (; t = t[r];)
                        if (1 === t.nodeType || i) return e(t, n, o)
                } : function(t, n, a) {
                    var s, l, c, u = [B, o];
                    if (a) {
                        for (; t = t[r];)
                            if ((1 === t.nodeType || i) && e(t, n, a)) return !0
                    } else
                        for (; t = t[r];)
                            if (1 === t.nodeType || i) {
                                if (c = t[N] || (t[N] = {}), l = c[t.uniqueID] || (c[t.uniqueID] = {}), (s = l[r]) && s[0] === B && s[1] === o) return u[2] = s[2];
                                if (l[r] = u, u[2] = e(t, n, a)) return !0
                            }
                }
            }

            function d(e) {
                return e.length > 1 ? function(t, n, r) {
                    for (var i = e.length; i--;)
                        if (!e[i](t, n, r)) return !1;
                    return !0
                } : e[0]
            }

            function h(e, n, r) {
                for (var i = 0, o = n.length; i < o; i++) t(e, n[i], r);
                return r
            }

            function f(e, t, n, r, i) {
                for (var o, a = [], s = 0, l = e.length, c = null != t; s < l; s++)(o = e[s]) && (n && !n(o, r, i) || (a.push(o), c && t.push(s)));
                return a
            }

            function m(e, t, n, i, o, a) {
                return i && !i[N] && (i = m(i)), o && !o[N] && (o = m(o, a)), r(function(r, a, s, l) {
                    var c, u, p, d = [],
                        m = [],
                        g = a.length,
                        y = r || h(t || "*", s.nodeType ? [s] : s, []),
                        v = !e || !r && t ? y : f(y, d, e, s, l),
                        b = n ? o || (r ? e : g || i) ? [] : a : v;
                    if (n && n(v, b, s, l), i)
                        for (c = f(b, m), i(c, [], s, l), u = c.length; u--;)(p = c[u]) && (b[m[u]] = !(v[m[u]] = p));
                    if (r) {
                        if (o || e) {
                            if (o) {
                                for (c = [], u = b.length; u--;)(p = b[u]) && c.push(v[u] = p);
                                o(null, b = [], c, l)
                            }
                            for (u = b.length; u--;)(p = b[u]) && (c = o ? Z(r, p) : d[u]) > -1 && (r[c] = !(a[c] = p))
                        }
                    } else b = f(b === a ? b.splice(g, b.length) : b), o ? o(null, a, b, l) : $.apply(a, b)
                })
            }

            function g(e) {
                for (var t, n, r, i = e.length, o = x.relative[e[0].type], a = o || x.relative[" "], s = o ? 1 : 0, l = p(function(e) {
                        return e === t
                    }, a, !0), c = p(function(e) {
                        return Z(t, e) > -1
                    }, a, !0), h = [function(e, n, r) {
                        var i = !o && (r || n !== I) || ((t = n).nodeType ? l(e, n, r) : c(e, n, r));
                        return t = null, i
                    }]; s < i; s++)
                    if (n = x.relative[e[s].type]) h = [p(d(h), n)];
                    else {
                        if (n = x.filter[e[s].type].apply(null, e[s].matches), n[N]) {
                            for (r = ++s; r < i && !x.relative[e[r].type]; r++);
                            return m(s > 1 && d(h), s > 1 && u(e.slice(0, s - 1).concat({
                                value: " " === e[s - 2].type ? "*" : ""
                            })).replace(oe, "$1"), n, s < r && g(e.slice(s, r)), r < i && g(e = e.slice(r)), r < i && u(e))
                        }
                        h.push(n)
                    } return d(h)
            }

            function y(e, n) {
                var i = n.length > 0,
                    o = e.length > 0,
                    a = function(r, a, s, l, c) {
                        var u, p, d, h = 0,
                            m = "0",
                            g = r && [],
                            y = [],
                            v = I,
                            b = r || o && x.find.TAG("*", c),
                            w = B += null == v ? 1 : Math.random() || .1,
                            _ = b.length;
                        for (c && (I = a === D || a || c); m !== _ && null != (u = b[m]); m++) {
                            if (o && u) {
                                for (p = 0, a || u.ownerDocument === D || (k(u), s = !L); d = e[p++];)
                                    if (d(u, a || D, s)) {
                                        l.push(u);
                                        break
                                    } c && (B = w)
                            }
                            i && ((u = !d && u) && h--, r && g.push(u))
                        }
                        if (h += m, i && m !== h) {
                            for (p = 0; d = n[p++];) d(g, y, a, s);
                            if (r) {
                                if (h > 0)
                                    for (; m--;) g[m] || y[m] || (y[m] = Y.call(l));
                                y = f(y)
                            }
                            $.apply(l, y), c && !r && y.length > 0 && h + n.length > 1 && t.uniqueSort(l)
                        }
                        return c && (B = w, I = v), g
                    };
                return i ? r(a) : a
            }
            var v, b, x, w, _, S, E, M, I, T, C, k, D, P, L, A, O, F, q, N = "sizzle" + 1 * new Date,
                R = e.document,
                B = 0,
                j = 0,
                V = n(),
                z = n(),
                U = n(),
                G = function(e, t) {
                    return e === t && (C = !0), 0
                },
                H = 1 << 31,
                K = {}.hasOwnProperty,
                W = [],
                Y = W.pop,
                X = W.push,
                $ = W.push,
                Q = W.slice,
                Z = function(e, t) {
                    for (var n = 0, r = e.length; n < r; n++)
                        if (e[n] === t) return n;
                    return -1
                },
                J = "checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",
                ee = "[\\x20\\t\\r\\n\\f]",
                te = "(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",
                ne = "\\[" + ee + "*(" + te + ")(?:" + ee + "*([*^$|!~]?=)" + ee + "*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|(" + te + "))|)" + ee + "*\\]",
                re = ":(" + te + ")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|" + ne + ")*)|.*)\\)|)",
                ie = new RegExp(ee + "+", "g"),
                oe = new RegExp("^" + ee + "+|((?:^|[^\\\\])(?:\\\\.)*)" + ee + "+$", "g"),
                ae = new RegExp("^" + ee + "*," + ee + "*"),
                se = new RegExp("^" + ee + "*([>+~]|" + ee + ")" + ee + "*"),
                le = new RegExp("=" + ee + "*([^\\]'\"]*?)" + ee + "*\\]", "g"),
                ce = new RegExp(re),
                ue = new RegExp("^" + te + "$"),
                pe = {
                    ID: new RegExp("^#(" + te + ")"),
                    CLASS: new RegExp("^\\.(" + te + ")"),
                    TAG: new RegExp("^(" + te + "|[*])"),
                    ATTR: new RegExp("^" + ne),
                    PSEUDO: new RegExp("^" + re),
                    CHILD: new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(" + ee + "*(even|odd|(([+-]|)(\\d*)n|)" + ee + "*(?:([+-]|)" + ee + "*(\\d+)|))" + ee + "*\\)|)", "i"),
                    bool: new RegExp("^(?:" + J + ")$", "i"),
                    needsContext: new RegExp("^" + ee + "*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(" + ee + "*((?:-\\d)?\\d*)" + ee + "*\\)|)(?=[^-]|$)", "i")
                },
                de = /^(?:input|select|textarea|button)$/i,
                he = /^h\d$/i,
                fe = /^[^{]+\{\s*\[native \w/,
                me = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,
                ge = /[+~]/,
                ye = /'|\\/g,
                ve = new RegExp("\\\\([\\da-f]{1,6}" + ee + "?|(" + ee + ")|.)", "ig"),
                be = function(e, t, n) {
                    var r = "0x" + t - 65536;
                    return r !== r || n ? t : r < 0 ? String.fromCharCode(r + 65536) : String.fromCharCode(r >> 10 | 55296, 1023 & r | 56320)
                },
                xe = function() {
                    k()
                };
            try {
                $.apply(W = Q.call(R.childNodes), R.childNodes), W[R.childNodes.length].nodeType
            } catch (e) {
                $ = {
                    apply: W.length ? function(e, t) {
                        X.apply(e, Q.call(t))
                    } : function(e, t) {
                        for (var n = e.length, r = 0; e[n++] = t[r++];);
                        e.length = n - 1
                    }
                }
            }
            b = t.support = {}, _ = t.isXML = function(e) {
                var t = e && (e.ownerDocument || e).documentElement;
                return !!t && "HTML" !== t.nodeName
            }, k = t.setDocument = function(e) {
                var t, n, r = e ? e.ownerDocument || e : R;
                return r !== D && 9 === r.nodeType && r.documentElement ? (D = r, P = D.documentElement, L = !_(D), (n = D.defaultView) && n.top !== n && (n.addEventListener ? n.addEventListener("unload", xe, !1) : n.attachEvent && n.attachEvent("onunload", xe)), b.attributes = i(function(e) {
                    return e.className = "i", !e.getAttribute("className")
                }), b.getElementsByTagName = i(function(e) {
                    return e.appendChild(D.createComment("")), !e.getElementsByTagName("*").length
                }), b.getElementsByClassName = fe.test(D.getElementsByClassName), b.getById = i(function(e) {
                    return P.appendChild(e).id = N, !D.getElementsByName || !D.getElementsByName(N).length
                }), b.getById ? (x.find.ID = function(e, t) {
                    if (void 0 !== t.getElementById && L) {
                        var n = t.getElementById(e);
                        return n ? [n] : []
                    }
                }, x.filter.ID = function(e) {
                    var t = e.replace(ve, be);
                    return function(e) {
                        return e.getAttribute("id") === t
                    }
                }) : (delete x.find.ID, x.filter.ID = function(e) {
                    var t = e.replace(ve, be);
                    return function(e) {
                        var n = void 0 !== e.getAttributeNode && e.getAttributeNode("id");
                        return n && n.value === t
                    }
                }), x.find.TAG = b.getElementsByTagName ? function(e, t) {
                    return void 0 !== t.getElementsByTagName ? t.getElementsByTagName(e) : b.qsa ? t.querySelectorAll(e) : void 0
                } : function(e, t) {
                    var n, r = [],
                        i = 0,
                        o = t.getElementsByTagName(e);
                    if ("*" === e) {
                        for (; n = o[i++];) 1 === n.nodeType && r.push(n);
                        return r
                    }
                    return o
                }, x.find.CLASS = b.getElementsByClassName && function(e, t) {
                    if (void 0 !== t.getElementsByClassName && L) return t.getElementsByClassName(e)
                }, O = [], A = [], (b.qsa = fe.test(D.querySelectorAll)) && (i(function(e) {
                    P.appendChild(e).innerHTML = "<a id='" + N + "'></a><select id='" + N + "-\r\\' msallowcapture=''><option selected=''></option></select>", e.querySelectorAll("[msallowcapture^='']").length && A.push("[*^$]=" + ee + "*(?:''|\"\")"), e.querySelectorAll("[selected]").length || A.push("\\[" + ee + "*(?:value|" + J + ")"), e.querySelectorAll("[id~=" + N + "-]").length || A.push("~="), e.querySelectorAll(":checked").length || A.push(":checked"), e.querySelectorAll("a#" + N + "+*").length || A.push(".#.+[+~]")
                }), i(function(e) {
                    var t = D.createElement("input");
                    t.setAttribute("type", "hidden"), e.appendChild(t).setAttribute("name", "D"), e.querySelectorAll("[name=d]").length && A.push("name" + ee + "*[*^$|!~]?="), e.querySelectorAll(":enabled").length || A.push(":enabled", ":disabled"), e.querySelectorAll("*,:x"), A.push(",.*:")
                })), (b.matchesSelector = fe.test(F = P.matches || P.webkitMatchesSelector || P.mozMatchesSelector || P.oMatchesSelector || P.msMatchesSelector)) && i(function(e) {
                    b.disconnectedMatch = F.call(e, "div"), F.call(e, "[s!='']:x"), O.push("!=", re)
                }), A = A.length && new RegExp(A.join("|")), O = O.length && new RegExp(O.join("|")), t = fe.test(P.compareDocumentPosition), q = t || fe.test(P.contains) ? function(e, t) {
                    var n = 9 === e.nodeType ? e.documentElement : e,
                        r = t && t.parentNode;
                    return e === r || !(!r || 1 !== r.nodeType || !(n.contains ? n.contains(r) : e.compareDocumentPosition && 16 & e.compareDocumentPosition(r)))
                } : function(e, t) {
                    if (t)
                        for (; t = t.parentNode;)
                            if (t === e) return !0;
                    return !1
                }, G = t ? function(e, t) {
                    if (e === t) return C = !0, 0;
                    var n = !e.compareDocumentPosition - !t.compareDocumentPosition;
                    return n || (n = (e.ownerDocument || e) === (t.ownerDocument || t) ? e.compareDocumentPosition(t) : 1, 1 & n || !b.sortDetached && t.compareDocumentPosition(e) === n ? e === D || e.ownerDocument === R && q(R, e) ? -1 : t === D || t.ownerDocument === R && q(R, t) ? 1 : T ? Z(T, e) - Z(T, t) : 0 : 4 & n ? -1 : 1)
                } : function(e, t) {
                    if (e === t) return C = !0, 0;
                    var n, r = 0,
                        i = e.parentNode,
                        o = t.parentNode,
                        s = [e],
                        l = [t];
                    if (!i || !o) return e === D ? -1 : t === D ? 1 : i ? -1 : o ? 1 : T ? Z(T, e) - Z(T, t) : 0;
                    if (i === o) return a(e, t);
                    for (n = e; n = n.parentNode;) s.unshift(n);
                    for (n = t; n = n.parentNode;) l.unshift(n);
                    for (; s[r] === l[r];) r++;
                    return r ? a(s[r], l[r]) : s[r] === R ? -1 : l[r] === R ? 1 : 0
                }, D) : D
            }, t.matches = function(e, n) {
                return t(e, null, null, n)
            }, t.matchesSelector = function(e, n) {
                if ((e.ownerDocument || e) !== D && k(e), n = n.replace(le, "='$1']"), b.matchesSelector && L && !U[n + " "] && (!O || !O.test(n)) && (!A || !A.test(n))) try {
                    var r = F.call(e, n);
                    if (r || b.disconnectedMatch || e.document && 11 !== e.document.nodeType) return r
                } catch (e) {}
                return t(n, D, null, [e]).length > 0
            }, t.contains = function(e, t) {
                return (e.ownerDocument || e) !== D && k(e), q(e, t)
            }, t.attr = function(e, t) {
                (e.ownerDocument || e) !== D && k(e);
                var n = x.attrHandle[t.toLowerCase()],
                    r = n && K.call(x.attrHandle, t.toLowerCase()) ? n(e, t, !L) : void 0;
                return void 0 !== r ? r : b.attributes || !L ? e.getAttribute(t) : (r = e.getAttributeNode(t)) && r.specified ? r.value : null
            }, t.error = function(e) {
                throw new Error("Syntax error, unrecognized expression: " + e)
            }, t.uniqueSort = function(e) {
                var t, n = [],
                    r = 0,
                    i = 0;
                if (C = !b.detectDuplicates, T = !b.sortStable && e.slice(0), e.sort(G), C) {
                    for (; t = e[i++];) t === e[i] && (r = n.push(i));
                    for (; r--;) e.splice(n[r], 1)
                }
                return T = null, e
            }, w = t.getText = function(e) {
                var t, n = "",
                    r = 0,
                    i = e.nodeType;
                if (i) {
                    if (1 === i || 9 === i || 11 === i) {
                        if ("string" == typeof e.textContent) return e.textContent;
                        for (e = e.firstChild; e; e = e.nextSibling) n += w(e)
                    } else if (3 === i || 4 === i) return e.nodeValue
                } else
                    for (; t = e[r++];) n += w(t);
                return n
            }, x = t.selectors = {
                cacheLength: 50,
                createPseudo: r,
                match: pe,
                attrHandle: {},
                find: {},
                relative: {
                    ">": {
                        dir: "parentNode",
                        first: !0
                    },
                    " ": {
                        dir: "parentNode"
                    },
                    "+": {
                        dir: "previousSibling",
                        first: !0
                    },
                    "~": {
                        dir: "previousSibling"
                    }
                },
                preFilter: {
                    ATTR: function(e) {
                        return e[1] = e[1].replace(ve, be), e[3] = (e[3] || e[4] || e[5] || "").replace(ve, be), "~=" === e[2] && (e[3] = " " + e[3] + " "), e.slice(0, 4)
                    },
                    CHILD: function(e) {
                        return e[1] = e[1].toLowerCase(), "nth" === e[1].slice(0, 3) ? (e[3] || t.error(e[0]), e[4] = +(e[4] ? e[5] + (e[6] || 1) : 2 * ("even" === e[3] || "odd" === e[3])), e[5] = +(e[7] + e[8] || "odd" === e[3])) : e[3] && t.error(e[0]), e
                    },
                    PSEUDO: function(e) {
                        var t, n = !e[6] && e[2];
                        return pe.CHILD.test(e[0]) ? null : (e[3] ? e[2] = e[4] || e[5] || "" : n && ce.test(n) && (t = S(n, !0)) && (t = n.indexOf(")", n.length - t) - n.length) && (e[0] = e[0].slice(0, t), e[2] = n.slice(0, t)), e.slice(0, 3))
                    }
                },
                filter: {
                    TAG: function(e) {
                        var t = e.replace(ve, be).toLowerCase();
                        return "*" === e ? function() {
                            return !0
                        } : function(e) {
                            return e.nodeName && e.nodeName.toLowerCase() === t
                        }
                    },
                    CLASS: function(e) {
                        var t = V[e + " "];
                        return t || (t = new RegExp("(^|" + ee + ")" + e + "(" + ee + "|$)")) && V(e, function(e) {
                            return t.test("string" == typeof e.className && e.className || void 0 !== e.getAttribute && e.getAttribute("class") || "")
                        })
                    },
                    ATTR: function(e, n, r) {
                        return function(i) {
                            var o = t.attr(i, e);
                            return null == o ? "!=" === n : !n || (o += "", "=" === n ? o === r : "!=" === n ? o !== r : "^=" === n ? r && 0 === o.indexOf(r) : "*=" === n ? r && o.indexOf(r) > -1 : "$=" === n ? r && o.slice(-r.length) === r : "~=" === n ? (" " + o.replace(ie, " ") + " ").indexOf(r) > -1 : "|=" === n && (o === r || o.slice(0, r.length + 1) === r + "-"))
                        }
                    },
                    CHILD: function(e, t, n, r, i) {
                        var o = "nth" !== e.slice(0, 3),
                            a = "last" !== e.slice(-4),
                            s = "of-type" === t;
                        return 1 === r && 0 === i ? function(e) {
                            return !!e.parentNode
                        } : function(t, n, l) {
                            var c, u, p, d, h, f, m = o !== a ? "nextSibling" : "previousSibling",
                                g = t.parentNode,
                                y = s && t.nodeName.toLowerCase(),
                                v = !l && !s,
                                b = !1;
                            if (g) {
                                if (o) {
                                    for (; m;) {
                                        for (d = t; d = d[m];)
                                            if (s ? d.nodeName.toLowerCase() === y : 1 === d.nodeType) return !1;
                                        f = m = "only" === e && !f && "nextSibling"
                                    }
                                    return !0
                                }
                                if (f = [a ? g.firstChild : g.lastChild], a && v) {
                                    for (d = g, p = d[N] || (d[N] = {}), u = p[d.uniqueID] || (p[d.uniqueID] = {}), c = u[e] || [], h = c[0] === B && c[1], b = h && c[2], d = h && g.childNodes[h]; d = ++h && d && d[m] || (b = h = 0) || f.pop();)
                                        if (1 === d.nodeType && ++b && d === t) {
                                            u[e] = [B, h, b];
                                            break
                                        }
                                } else if (v && (d = t, p = d[N] || (d[N] = {}), u = p[d.uniqueID] || (p[d.uniqueID] = {}), c = u[e] || [], h = c[0] === B && c[1], b = h), !1 === b)
                                    for (;
                                        (d = ++h && d && d[m] || (b = h = 0) || f.pop()) && ((s ? d.nodeName.toLowerCase() !== y : 1 !== d.nodeType) || !++b || (v && (p = d[N] || (d[N] = {}), u = p[d.uniqueID] || (p[d.uniqueID] = {}), u[e] = [B, b]), d !== t)););
                                return (b -= i) === r || b % r == 0 && b / r >= 0
                            }
                        }
                    },
                    PSEUDO: function(e, n) {
                        var i, o = x.pseudos[e] || x.setFilters[e.toLowerCase()] || t.error("unsupported pseudo: " + e);
                        return o[N] ? o(n) : o.length > 1 ? (i = [e, e, "", n], x.setFilters.hasOwnProperty(e.toLowerCase()) ? r(function(e, t) {
                            for (var r, i = o(e, n), a = i.length; a--;) r = Z(e, i[a]), e[r] = !(t[r] = i[a])
                        }) : function(e) {
                            return o(e, 0, i)
                        }) : o
                    }
                },
                pseudos: {
                    not: r(function(e) {
                        var t = [],
                            n = [],
                            i = E(e.replace(oe, "$1"));
                        return i[N] ? r(function(e, t, n, r) {
                            for (var o, a = i(e, null, r, []), s = e.length; s--;)(o = a[s]) && (e[s] = !(t[s] = o))
                        }) : function(e, r, o) {
                            return t[0] = e, i(t, null, o, n), t[0] = null, !n.pop()
                        }
                    }),
                    has: r(function(e) {
                        return function(n) {
                            return t(e, n).length > 0
                        }
                    }),
                    contains: r(function(e) {
                        return e = e.replace(ve, be),
                            function(t) {
                                return (t.textContent || t.innerText || w(t)).indexOf(e) > -1
                            }
                    }),
                    lang: r(function(e) {
                        return ue.test(e || "") || t.error("unsupported lang: " + e), e = e.replace(ve, be).toLowerCase(),
                            function(t) {
                                var n;
                                do {
                                    if (n = L ? t.lang : t.getAttribute("xml:lang") || t.getAttribute("lang")) return (n = n.toLowerCase()) === e || 0 === n.indexOf(e + "-")
                                } while ((t = t.parentNode) && 1 === t.nodeType);
                                return !1
                            }
                    }),
                    target: function(t) {
                        var n = e.location && e.location.hash;
                        return n && n.slice(1) === t.id
                    },
                    root: function(e) {
                        return e === P
                    },
                    focus: function(e) {
                        return e === D.activeElement && (!D.hasFocus || D.hasFocus()) && !!(e.type || e.href || ~e.tabIndex)
                    },
                    enabled: function(e) {
                        return !1 === e.disabled
                    },
                    disabled: function(e) {
                        return !0 === e.disabled
                    },
                    checked: function(e) {
                        var t = e.nodeName.toLowerCase();
                        return "input" === t && !!e.checked || "option" === t && !!e.selected
                    },
                    selected: function(e) {
                        return e.parentNode && e.parentNode.selectedIndex, !0 === e.selected
                    },
                    empty: function(e) {
                        for (e = e.firstChild; e; e = e.nextSibling)
                            if (e.nodeType < 6) return !1;
                        return !0
                    },
                    parent: function(e) {
                        return !x.pseudos.empty(e)
                    },
                    header: function(e) {
                        return he.test(e.nodeName)
                    },
                    input: function(e) {
                        return de.test(e.nodeName)
                    },
                    button: function(e) {
                        var t = e.nodeName.toLowerCase();
                        return "input" === t && "button" === e.type || "button" === t
                    },
                    text: function(e) {
                        var t;
                        return "input" === e.nodeName.toLowerCase() && "text" === e.type && (null == (t = e.getAttribute("type")) || "text" === t.toLowerCase())
                    },
                    first: s(function() {
                        return [0]
                    }),
                    last: s(function(e, t) {
                        return [t - 1]
                    }),
                    eq: s(function(e, t, n) {
                        return [n < 0 ? n + t : n]
                    }),
                    even: s(function(e, t) {
                        for (var n = 0; n < t; n += 2) e.push(n);
                        return e
                    }),
                    odd: s(function(e, t) {
                        for (var n = 1; n < t; n += 2) e.push(n);
                        return e
                    }),
                    lt: s(function(e, t, n) {
                        for (var r = n < 0 ? n + t : n; --r >= 0;) e.push(r);
                        return e
                    }),
                    gt: s(function(e, t, n) {
                        for (var r = n < 0 ? n + t : n; ++r < t;) e.push(r);
                        return e
                    })
                }
            }, x.pseudos.nth = x.pseudos.eq;
            for (v in {
                    radio: !0,
                    checkbox: !0,
                    file: !0,
                    password: !0,
                    image: !0
                }) x.pseudos[v] = function(e) {
                return function(t) {
                    return "input" === t.nodeName.toLowerCase() && t.type === e
                }
            }(v);
            for (v in {
                    submit: !0,
                    reset: !0
                }) x.pseudos[v] = function(e) {
                return function(t) {
                    var n = t.nodeName.toLowerCase();
                    return ("input" === n || "button" === n) && t.type === e
                }
            }(v);
            return c.prototype = x.filters = x.pseudos, x.setFilters = new c, S = t.tokenize = function(e, n) {
                var r, i, o, a, s, l, c, u = z[e + " "];
                if (u) return n ? 0 : u.slice(0);
                for (s = e, l = [], c = x.preFilter; s;) {
                    r && !(i = ae.exec(s)) || (i && (s = s.slice(i[0].length) || s), l.push(o = [])), r = !1, (i = se.exec(s)) && (r = i.shift(), o.push({
                        value: r,
                        type: i[0].replace(oe, " ")
                    }), s = s.slice(r.length));
                    for (a in x.filter) !(i = pe[a].exec(s)) || c[a] && !(i = c[a](i)) || (r = i.shift(), o.push({
                        value: r,
                        type: a,
                        matches: i
                    }), s = s.slice(r.length));
                    if (!r) break
                }
                return n ? s.length : s ? t.error(e) : z(e, l).slice(0)
            }, E = t.compile = function(e, t) {
                var n, r = [],
                    i = [],
                    o = U[e + " "];
                if (!o) {
                    for (t || (t = S(e)), n = t.length; n--;) o = g(t[n]), o[N] ? r.push(o) : i.push(o);
                    o = U(e, y(i, r)), o.selector = e
                }
                return o
            }, M = t.select = function(e, t, n, r) {
                var i, o, a, s, c, p = "function" == typeof e && e,
                    d = !r && S(e = p.selector || e);
                if (n = n || [], 1 === d.length) {
                    if (o = d[0] = d[0].slice(0), o.length > 2 && "ID" === (a = o[0]).type && b.getById && 9 === t.nodeType && L && x.relative[o[1].type]) {
                        if (!(t = (x.find.ID(a.matches[0].replace(ve, be), t) || [])[0])) return n;
                        p && (t = t.parentNode), e = e.slice(o.shift().value.length)
                    }
                    for (i = pe.needsContext.test(e) ? 0 : o.length; i-- && (a = o[i], !x.relative[s = a.type]);)
                        if ((c = x.find[s]) && (r = c(a.matches[0].replace(ve, be), ge.test(o[0].type) && l(t.parentNode) || t))) {
                            if (o.splice(i, 1), !(e = r.length && u(o))) return $.apply(n, r), n;
                            break
                        }
                }
                return (p || E(e, d))(r, t, !L, n, !t || ge.test(e) && l(t.parentNode) || t), n
            }, b.sortStable = N.split("").sort(G).join("") === N, b.detectDuplicates = !!C, k(), b.sortDetached = i(function(e) {
                return 1 & e.compareDocumentPosition(D.createElement("div"))
            }), i(function(e) {
                return e.innerHTML = "<a href='#'></a>", "#" === e.firstChild.getAttribute("href")
            }) || o("type|href|height|width", function(e, t, n) {
                if (!n) return e.getAttribute(t, "type" === t.toLowerCase() ? 1 : 2)
            }), b.attributes && i(function(e) {
                return e.innerHTML = "<input/>", e.firstChild.setAttribute("value", ""), "" === e.firstChild.getAttribute("value")
            }) || o("value", function(e, t, n) {
                if (!n && "input" === e.nodeName.toLowerCase()) return e.defaultValue
            }), i(function(e) {
                return null == e.getAttribute("disabled")
            }) || o(J, function(e, t, n) {
                var r;
                if (!n) return !0 === e[t] ? t.toLowerCase() : (r = e.getAttributeNode(t)) && r.specified ? r.value : null
            }), t
        }(e);
        ie.find = ce, ie.expr = ce.selectors, ie.expr[":"] = ie.expr.pseudos, ie.uniqueSort = ie.unique = ce.uniqueSort, ie.text = ce.getText, ie.isXMLDoc = ce.isXML, ie.contains = ce.contains;
        var ue = function(e, t, n) {
                for (var r = [], i = void 0 !== n;
                    (e = e[t]) && 9 !== e.nodeType;)
                    if (1 === e.nodeType) {
                        if (i && ie(e).is(n)) break;
                        r.push(e)
                    } return r
            },
            pe = function(e, t) {
                for (var n = []; e; e = e.nextSibling) 1 === e.nodeType && e !== t && n.push(e);
                return n
            },
            de = ie.expr.match.needsContext,
            he = /^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,
            fe = /^.[^:#\[\.,]*$/;
        ie.filter = function(e, t, n) {
            var r = t[0];
            return n && (e = ":not(" + e + ")"), 1 === t.length && 1 === r.nodeType ? ie.find.matchesSelector(r, e) ? [r] : [] : ie.find.matches(e, ie.grep(t, function(e) {
                return 1 === e.nodeType
            }))
        }, ie.fn.extend({
            find: function(e) {
                var t, n = this.length,
                    r = [],
                    i = this;
                if ("string" != typeof e) return this.pushStack(ie(e).filter(function() {
                    for (t = 0; t < n; t++)
                        if (ie.contains(i[t], this)) return !0
                }));
                for (t = 0; t < n; t++) ie.find(e, i[t], r);
                return r = this.pushStack(n > 1 ? ie.unique(r) : r), r.selector = this.selector ? this.selector + " " + e : e, r
            },
            filter: function(e) {
                return this.pushStack(r(this, e || [], !1))
            },
            not: function(e) {
                return this.pushStack(r(this, e || [], !0))
            },
            is: function(e) {
                return !!r(this, "string" == typeof e && de.test(e) ? ie(e) : e || [], !1).length
            }
        });
        var me, ge = /^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;
        (ie.fn.init = function(e, t, n) {
            var r, i;
            if (!e) return this;
            if (n = n || me, "string" == typeof e) {
                if (!(r = "<" === e[0] && ">" === e[e.length - 1] && e.length >= 3 ? [null, e, null] : ge.exec(e)) || !r[1] && t) return !t || t.jquery ? (t || n).find(e) : this.constructor(t).find(e);
                if (r[1]) {
                    if (t = t instanceof ie ? t[0] : t, ie.merge(this, ie.parseHTML(r[1], t && t.nodeType ? t.ownerDocument || t : X, !0)), he.test(r[1]) && ie.isPlainObject(t))
                        for (r in t) ie.isFunction(this[r]) ? this[r](t[r]) : this.attr(r, t[r]);
                    return this
                }
                return i = X.getElementById(r[2]), i && i.parentNode && (this.length = 1, this[0] = i), this.context = X, this.selector = e, this
            }
            return e.nodeType ? (this.context = this[0] = e, this.length = 1, this) : ie.isFunction(e) ? void 0 !== n.ready ? n.ready(e) : e(ie) : (void 0 !== e.selector && (this.selector = e.selector, this.context = e.context), ie.makeArray(e, this))
        }).prototype = ie.fn, me = ie(X);
        var ye = /^(?:parents|prev(?:Until|All))/,
            ve = {
                children: !0,
                contents: !0,
                next: !0,
                prev: !0
            };
        ie.fn.extend({
            has: function(e) {
                var t = ie(e, this),
                    n = t.length;
                return this.filter(function() {
                    for (var e = 0; e < n; e++)
                        if (ie.contains(this, t[e])) return !0
                })
            },
            closest: function(e, t) {
                for (var n, r = 0, i = this.length, o = [], a = de.test(e) || "string" != typeof e ? ie(e, t || this.context) : 0; r < i; r++)
                    for (n = this[r]; n && n !== t; n = n.parentNode)
                        if (n.nodeType < 11 && (a ? a.index(n) > -1 : 1 === n.nodeType && ie.find.matchesSelector(n, e))) {
                            o.push(n);
                            break
                        } return this.pushStack(o.length > 1 ? ie.uniqueSort(o) : o)
            },
            index: function(e) {
                return e ? "string" == typeof e ? J.call(ie(e), this[0]) : J.call(this, e.jquery ? e[0] : e) : this[0] && this[0].parentNode ? this.first().prevAll().length : -1
            },
            add: function(e, t) {
                return this.pushStack(ie.uniqueSort(ie.merge(this.get(), ie(e, t))))
            },
            addBack: function(e) {
                return this.add(null == e ? this.prevObject : this.prevObject.filter(e))
            }
        }), ie.each({
            parent: function(e) {
                var t = e.parentNode;
                return t && 11 !== t.nodeType ? t : null
            },
            parents: function(e) {
                return ue(e, "parentNode")
            },
            parentsUntil: function(e, t, n) {
                return ue(e, "parentNode", n)
            },
            next: function(e) {
                return i(e, "nextSibling")
            },
            prev: function(e) {
                return i(e, "previousSibling")
            },
            nextAll: function(e) {
                return ue(e, "nextSibling")
            },
            prevAll: function(e) {
                return ue(e, "previousSibling")
            },
            nextUntil: function(e, t, n) {
                return ue(e, "nextSibling", n)
            },
            prevUntil: function(e, t, n) {
                return ue(e, "previousSibling", n)
            },
            siblings: function(e) {
                return pe((e.parentNode || {}).firstChild, e)
            },
            children: function(e) {
                return pe(e.firstChild)
            },
            contents: function(e) {
                return e.contentDocument || ie.merge([], e.childNodes)
            }
        }, function(e, t) {
            ie.fn[e] = function(n, r) {
                var i = ie.map(this, t, n);
                return "Until" !== e.slice(-5) && (r = n), r && "string" == typeof r && (i = ie.filter(r, i)), this.length > 1 && (ve[e] || ie.uniqueSort(i), ye.test(e) && i.reverse()), this.pushStack(i)
            }
        });
        var be = /\S+/g;
        ie.Callbacks = function(e) {
            e = "string" == typeof e ? o(e) : ie.extend({}, e);
            var t, n, r, i, a = [],
                s = [],
                l = -1,
                c = function() {
                    for (i = e.once, r = t = !0; s.length; l = -1)
                        for (n = s.shift(); ++l < a.length;) !1 === a[l].apply(n[0], n[1]) && e.stopOnFalse && (l = a.length, n = !1);
                    e.memory || (n = !1), t = !1, i && (a = n ? [] : "")
                },
                u = {
                    add: function() {
                        return a && (n && !t && (l = a.length - 1, s.push(n)), function t(n) {
                            ie.each(n, function(n, r) {
                                ie.isFunction(r) ? e.unique && u.has(r) || a.push(r) : r && r.length && "string" !== ie.type(r) && t(r)
                            })
                        }(arguments), n && !t && c()), this
                    },
                    remove: function() {
                        return ie.each(arguments, function(e, t) {
                            for (var n;
                                (n = ie.inArray(t, a, n)) > -1;) a.splice(n, 1), n <= l && l--
                        }), this
                    },
                    has: function(e) {
                        return e ? ie.inArray(e, a) > -1 : a.length > 0
                    },
                    empty: function() {
                        return a && (a = []), this
                    },
                    disable: function() {
                        return i = s = [], a = n = "", this
                    },
                    disabled: function() {
                        return !a
                    },
                    lock: function() {
                        return i = s = [], n || (a = n = ""), this
                    },
                    locked: function() {
                        return !!i
                    },
                    fireWith: function(e, n) {
                        return i || (n = n || [], n = [e, n.slice ? n.slice() : n], s.push(n), t || c()), this
                    },
                    fire: function() {
                        return u.fireWith(this, arguments), this
                    },
                    fired: function() {
                        return !!r
                    }
                };
            return u
        }, ie.extend({
            Deferred: function(e) {
                var t = [
                        ["resolve", "done", ie.Callbacks("once memory"), "resolved"],
                        ["reject", "fail", ie.Callbacks("once memory"), "rejected"],
                        ["notify", "progress", ie.Callbacks("memory")]
                    ],
                    n = "pending",
                    r = {
                        state: function() {
                            return n
                        },
                        always: function() {
                            return i.done(arguments).fail(arguments), this
                        },
                        then: function() {
                            var e = arguments;
                            return ie.Deferred(function(n) {
                                ie.each(t, function(t, o) {
                                    var a = ie.isFunction(e[t]) && e[t];
                                    i[o[1]](function() {
                                        var e = a && a.apply(this, arguments);
                                        e && ie.isFunction(e.promise) ? e.promise().progress(n.notify).done(n.resolve).fail(n.reject) : n[o[0] + "With"](this === r ? n.promise() : this, a ? [e] : arguments)
                                    })
                                }), e = null
                            }).promise()
                        },
                        promise: function(e) {
                            return null != e ? ie.extend(e, r) : r
                        }
                    },
                    i = {};
                return r.pipe = r.then, ie.each(t, function(e, o) {
                    var a = o[2],
                        s = o[3];
                    r[o[1]] = a.add, s && a.add(function() {
                        n = s
                    }, t[1 ^ e][2].disable, t[2][2].lock), i[o[0]] = function() {
                        return i[o[0] + "With"](this === i ? r : this, arguments), this
                    }, i[o[0] + "With"] = a.fireWith
                }), r.promise(i), e && e.call(i, i), i
            },
            when: function(e) {
                var t, n, r, i = 0,
                    o = $.call(arguments),
                    a = o.length,
                    s = 1 !== a || e && ie.isFunction(e.promise) ? a : 0,
                    l = 1 === s ? e : ie.Deferred(),
                    c = function(e, n, r) {
                        return function(i) {
                            n[e] = this, r[e] = arguments.length > 1 ? $.call(arguments) : i, r === t ? l.notifyWith(n, r) : --s || l.resolveWith(n, r)
                        }
                    };
                if (a > 1)
                    for (t = new Array(a), n = new Array(a), r = new Array(a); i < a; i++) o[i] && ie.isFunction(o[i].promise) ? o[i].promise().progress(c(i, n, t)).done(c(i, r, o)).fail(l.reject) : --s;
                return s || l.resolveWith(r, o), l.promise()
            }
        });
        var xe;
        ie.fn.ready = function(e) {
            return ie.ready.promise().done(e), this
        }, ie.extend({
            isReady: !1,
            readyWait: 1,
            holdReady: function(e) {
                e ? ie.readyWait++ : ie.ready(!0)
            },
            ready: function(e) {
                (!0 === e ? --ie.readyWait : ie.isReady) || (ie.isReady = !0, !0 !== e && --ie.readyWait > 0 || (xe.resolveWith(X, [ie]), ie.fn.triggerHandler && (ie(X).triggerHandler("ready"), ie(X).off("ready"))))
            }
        }), ie.ready.promise = function(t) {
            return xe || (xe = ie.Deferred(), "complete" === X.readyState || "loading" !== X.readyState && !X.documentElement.doScroll ? e.setTimeout(ie.ready) : (X.addEventListener("DOMContentLoaded", a), e.addEventListener("load", a))), xe.promise(t)
        }, ie.ready.promise();
        var we = function(e, t, n, r, i, o, a) {
                var s = 0,
                    l = e.length,
                    c = null == n;
                if ("object" === ie.type(n)) {
                    i = !0;
                    for (s in n) we(e, t, s, n[s], !0, o, a)
                } else if (void 0 !== r && (i = !0, ie.isFunction(r) || (a = !0), c && (a ? (t.call(e, r), t = null) : (c = t, t = function(e, t, n) {
                        return c.call(ie(e), n)
                    })), t))
                    for (; s < l; s++) t(e[s], n, a ? r : r.call(e[s], s, t(e[s], n)));
                return i ? e : c ? t.call(e) : l ? t(e[0], n) : o
            },
            _e = function(e) {
                return 1 === e.nodeType || 9 === e.nodeType || !+e.nodeType
            };
        s.uid = 1, s.prototype = {
            register: function(e, t) {
                var n = t || {};
                return e.nodeType ? e[this.expando] = n : Object.defineProperty(e, this.expando, {
                    value: n,
                    writable: !0,
                    configurable: !0
                }), e[this.expando]
            },
            cache: function(e) {
                if (!_e(e)) return {};
                var t = e[this.expando];
                return t || (t = {}, _e(e) && (e.nodeType ? e[this.expando] = t : Object.defineProperty(e, this.expando, {
                    value: t,
                    configurable: !0
                }))), t
            },
            set: function(e, t, n) {
                var r, i = this.cache(e);
                if ("string" == typeof t) i[t] = n;
                else
                    for (r in t) i[r] = t[r];
                return i
            },
            get: function(e, t) {
                return void 0 === t ? this.cache(e) : e[this.expando] && e[this.expando][t]
            },
            access: function(e, t, n) {
                var r;
                return void 0 === t || t && "string" == typeof t && void 0 === n ? (r = this.get(e, t), void 0 !== r ? r : this.get(e, ie.camelCase(t))) : (this.set(e, t, n), void 0 !== n ? n : t)
            },
            remove: function(e, t) {
                var n, r, i, o = e[this.expando];
                if (void 0 !== o) {
                    if (void 0 === t) this.register(e);
                    else {
                        ie.isArray(t) ? r = t.concat(t.map(ie.camelCase)) : (i = ie.camelCase(t), t in o ? r = [t, i] : (r = i, r = r in o ? [r] : r.match(be) || [])), n = r.length;
                        for (; n--;) delete o[r[n]]
                    }(void 0 === t || ie.isEmptyObject(o)) && (e.nodeType ? e[this.expando] = void 0 : delete e[this.expando])
                }
            },
            hasData: function(e) {
                var t = e[this.expando];
                return void 0 !== t && !ie.isEmptyObject(t)
            }
        };
        var Se = new s,
            Ee = new s,
            Me = /^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,
            Ie = /[A-Z]/g;
        ie.extend({
            hasData: function(e) {
                return Ee.hasData(e) || Se.hasData(e)
            },
            data: function(e, t, n) {
                return Ee.access(e, t, n)
            },
            removeData: function(e, t) {
                Ee.remove(e, t)
            },
            _data: function(e, t, n) {
                return Se.access(e, t, n)
            },
            _removeData: function(e, t) {
                Se.remove(e, t)
            }
        }), ie.fn.extend({
            data: function(e, t) {
                var n, r, i, o = this[0],
                    a = o && o.attributes;
                if (void 0 === e) {
                    if (this.length && (i = Ee.get(o), 1 === o.nodeType && !Se.get(o, "hasDataAttrs"))) {
                        for (n = a.length; n--;) a[n] && (r = a[n].name, 0 === r.indexOf("data-") && (r = ie.camelCase(r.slice(5)), l(o, r, i[r])));
                        Se.set(o, "hasDataAttrs", !0)
                    }
                    return i
                }
                return "object" == typeof e ? this.each(function() {
                    Ee.set(this, e)
                }) : we(this, function(t) {
                    var n, r;
                    if (o && void 0 === t) {
                        if (void 0 !== (n = Ee.get(o, e) || Ee.get(o, e.replace(Ie, "-$&").toLowerCase()))) return n;
                        if (r = ie.camelCase(e), void 0 !== (n = Ee.get(o, r))) return n;
                        if (void 0 !== (n = l(o, r, void 0))) return n
                    } else r = ie.camelCase(e), this.each(function() {
                        var n = Ee.get(this, r);
                        Ee.set(this, r, t), e.indexOf("-") > -1 && void 0 !== n && Ee.set(this, e, t)
                    })
                }, null, t, arguments.length > 1, null, !0)
            },
            removeData: function(e) {
                return this.each(function() {
                    Ee.remove(this, e)
                })
            }
        }), ie.extend({
            queue: function(e, t, n) {
                var r;
                if (e) return t = (t || "fx") + "queue", r = Se.get(e, t), n && (!r || ie.isArray(n) ? r = Se.access(e, t, ie.makeArray(n)) : r.push(n)), r || []
            },
            dequeue: function(e, t) {
                t = t || "fx";
                var n = ie.queue(e, t),
                    r = n.length,
                    i = n.shift(),
                    o = ie._queueHooks(e, t),
                    a = function() {
                        ie.dequeue(e, t)
                    };
                "inprogress" === i && (i = n.shift(), r--), i && ("fx" === t && n.unshift("inprogress"), delete o.stop, i.call(e, a, o)), !r && o && o.empty.fire()
            },
            _queueHooks: function(e, t) {
                var n = t + "queueHooks";
                return Se.get(e, n) || Se.access(e, n, {
                    empty: ie.Callbacks("once memory").add(function() {
                        Se.remove(e, [t + "queue", n])
                    })
                })
            }
        }), ie.fn.extend({
            queue: function(e, t) {
                var n = 2;
                return "string" != typeof e && (t = e, e = "fx", n--), arguments.length < n ? ie.queue(this[0], e) : void 0 === t ? this : this.each(function() {
                    var n = ie.queue(this, e, t);
                    ie._queueHooks(this, e), "fx" === e && "inprogress" !== n[0] && ie.dequeue(this, e)
                })
            },
            dequeue: function(e) {
                return this.each(function() {
                    ie.dequeue(this, e)
                })
            },
            clearQueue: function(e) {
                return this.queue(e || "fx", [])
            },
            promise: function(e, t) {
                var n, r = 1,
                    i = ie.Deferred(),
                    o = this,
                    a = this.length,
                    s = function() {
                        --r || i.resolveWith(o, [o])
                    };
                for ("string" != typeof e && (t = e, e = void 0), e = e || "fx"; a--;)(n = Se.get(o[a], e + "queueHooks")) && n.empty && (r++, n.empty.add(s));
                return s(), i.promise(t)
            }
        });
        var Te = /[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,
            Ce = new RegExp("^(?:([+-])=|)(" + Te + ")([a-z%]*)$", "i"),
            ke = ["Top", "Right", "Bottom", "Left"],
            De = function(e, t) {
                return e = t || e, "none" === ie.css(e, "display") || !ie.contains(e.ownerDocument, e)
            },
            Pe = /^(?:checkbox|radio)$/i,
            Le = /<([\w:-]+)/,
            Ae = /^$|\/(?:java|ecma)script/i,
            Oe = {
                option: [1, "<select multiple='multiple'>", "</select>"],
                thead: [1, "<table>", "</table>"],
                col: [2, "<table><colgroup>", "</colgroup></table>"],
                tr: [2, "<table><tbody>", "</tbody></table>"],
                td: [3, "<table><tbody><tr>", "</tr></tbody></table>"],
                _default: [0, "", ""]
            };
        Oe.optgroup = Oe.option, Oe.tbody = Oe.tfoot = Oe.colgroup = Oe.caption = Oe.thead, Oe.th = Oe.td;
        var Fe = /<|&#?\w+;/;
        ! function() {
            var e = X.createDocumentFragment(),
                t = e.appendChild(X.createElement("div")),
                n = X.createElement("input");
            n.setAttribute("type", "radio"), n.setAttribute("checked", "checked"), n.setAttribute("name", "t"), t.appendChild(n), re.checkClone = t.cloneNode(!0).cloneNode(!0).lastChild.checked, t.innerHTML = "<textarea>x</textarea>", re.noCloneChecked = !!t.cloneNode(!0).lastChild.defaultValue
        }();
        var qe = /^key/,
            Ne = /^(?:mouse|pointer|contextmenu|drag|drop)|click/,
            Re = /^([^.]*)(?:\.(.+)|)/;
        ie.event = {
            global: {},
            add: function(e, t, n, r, i) {
                var o, a, s, l, c, u, p, d, h, f, m, g = Se.get(e);
                if (g)
                    for (n.handler && (o = n, n = o.handler, i = o.selector), n.guid || (n.guid = ie.guid++), (l = g.events) || (l = g.events = {}), (a = g.handle) || (a = g.handle = function(t) {
                            return void 0 !== ie && ie.event.triggered !== t.type ? ie.event.dispatch.apply(e, arguments) : void 0
                        }), t = (t || "").match(be) || [""], c = t.length; c--;) s = Re.exec(t[c]) || [], h = m = s[1], f = (s[2] || "").split(".").sort(), h && (p = ie.event.special[h] || {}, h = (i ? p.delegateType : p.bindType) || h, p = ie.event.special[h] || {}, u = ie.extend({
                        type: h,
                        origType: m,
                        data: r,
                        handler: n,
                        guid: n.guid,
                        selector: i,
                        needsContext: i && ie.expr.match.needsContext.test(i),
                        namespace: f.join(".")
                    }, o), (d = l[h]) || (d = l[h] = [], d.delegateCount = 0, p.setup && !1 !== p.setup.call(e, r, f, a) || e.addEventListener && e.addEventListener(h, a)), p.add && (p.add.call(e, u), u.handler.guid || (u.handler.guid = n.guid)), i ? d.splice(d.delegateCount++, 0, u) : d.push(u), ie.event.global[h] = !0)
            },
            remove: function(e, t, n, r, i) {
                var o, a, s, l, c, u, p, d, h, f, m, g = Se.hasData(e) && Se.get(e);
                if (g && (l = g.events)) {
                    for (t = (t || "").match(be) || [""], c = t.length; c--;)
                        if (s = Re.exec(t[c]) || [], h = m = s[1], f = (s[2] || "").split(".").sort(), h) {
                            for (p = ie.event.special[h] || {}, h = (r ? p.delegateType : p.bindType) || h, d = l[h] || [], s = s[2] && new RegExp("(^|\\.)" + f.join("\\.(?:.*\\.|)") + "(\\.|$)"), a = o = d.length; o--;) u = d[o], !i && m !== u.origType || n && n.guid !== u.guid || s && !s.test(u.namespace) || r && r !== u.selector && ("**" !== r || !u.selector) || (d.splice(o, 1), u.selector && d.delegateCount--, p.remove && p.remove.call(e, u));
                            a && !d.length && (p.teardown && !1 !== p.teardown.call(e, f, g.handle) || ie.removeEvent(e, h, g.handle), delete l[h])
                        } else
                            for (h in l) ie.event.remove(e, h + t[c], n, r, !0);
                    ie.isEmptyObject(l) && Se.remove(e, "handle events")
                }
            },
            dispatch: function(e) {
                e = ie.event.fix(e);
                var t, n, r, i, o, a = [],
                    s = $.call(arguments),
                    l = (Se.get(this, "events") || {})[e.type] || [],
                    c = ie.event.special[e.type] || {};
                if (s[0] = e, e.delegateTarget = this, !c.preDispatch || !1 !== c.preDispatch.call(this, e)) {
                    for (a = ie.event.handlers.call(this, e, l), t = 0;
                        (i = a[t++]) && !e.isPropagationStopped();)
                        for (e.currentTarget = i.elem, n = 0;
                            (o = i.handlers[n++]) && !e.isImmediatePropagationStopped();) e.rnamespace && !e.rnamespace.test(o.namespace) || (e.handleObj = o, e.data = o.data, void 0 !== (r = ((ie.event.special[o.origType] || {}).handle || o.handler).apply(i.elem, s)) && !1 === (e.result = r) && (e.preventDefault(), e.stopPropagation()));
                    return c.postDispatch && c.postDispatch.call(this, e), e.result
                }
            },
            handlers: function(e, t) {
                var n, r, i, o, a = [],
                    s = t.delegateCount,
                    l = e.target;
                if (s && l.nodeType && ("click" !== e.type || isNaN(e.button) || e.button < 1))
                    for (; l !== this; l = l.parentNode || this)
                        if (1 === l.nodeType && (!0 !== l.disabled || "click" !== e.type)) {
                            for (r = [], n = 0; n < s; n++) o = t[n], i = o.selector + " ", void 0 === r[i] && (r[i] = o.needsContext ? ie(i, this).index(l) > -1 : ie.find(i, this, null, [l]).length), r[i] && r.push(o);
                            r.length && a.push({
                                elem: l,
                                handlers: r
                            })
                        } return s < t.length && a.push({
                    elem: this,
                    handlers: t.slice(s)
                }), a
            },
            props: "altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),
            fixHooks: {},
            keyHooks: {
                props: "char charCode key keyCode".split(" "),
                filter: function(e, t) {
                    return null == e.which && (e.which = null != t.charCode ? t.charCode : t.keyCode), e
                }
            },
            mouseHooks: {
                props: "button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),
                filter: function(e, t) {
                    var n, r, i, o = t.button;
                    return null == e.pageX && null != t.clientX && (n = e.target.ownerDocument || X, r = n.documentElement, i = n.body, e.pageX = t.clientX + (r && r.scrollLeft || i && i.scrollLeft || 0) - (r && r.clientLeft || i && i.clientLeft || 0), e.pageY = t.clientY + (r && r.scrollTop || i && i.scrollTop || 0) - (r && r.clientTop || i && i.clientTop || 0)), e.which || void 0 === o || (e.which = 1 & o ? 1 : 2 & o ? 3 : 4 & o ? 2 : 0), e
                }
            },
            fix: function(e) {
                if (e[ie.expando]) return e;
                var t, n, r, i = e.type,
                    o = e,
                    a = this.fixHooks[i];
                for (a || (this.fixHooks[i] = a = Ne.test(i) ? this.mouseHooks : qe.test(i) ? this.keyHooks : {}), r = a.props ? this.props.concat(a.props) : this.props, e = new ie.Event(o), t = r.length; t--;) n = r[t], e[n] = o[n];
                return e.target || (e.target = X), 3 === e.target.nodeType && (e.target = e.target.parentNode), a.filter ? a.filter(e, o) : e
            },
            special: {
                load: {
                    noBubble: !0
                },
                focus: {
                    trigger: function() {
                        if (this !== m() && this.focus) return this.focus(), !1
                    },
                    delegateType: "focusin"
                },
                blur: {
                    trigger: function() {
                        if (this === m() && this.blur) return this.blur(), !1
                    },
                    delegateType: "focusout"
                },
                click: {
                    trigger: function() {
                        if ("checkbox" === this.type && this.click && ie.nodeName(this, "input")) return this.click(), !1
                    },
                    _default: function(e) {
                        return ie.nodeName(e.target, "a")
                    }
                },
                beforeunload: {
                    postDispatch: function(e) {
                        void 0 !== e.result && e.originalEvent && (e.originalEvent.returnValue = e.result)
                    }
                }
            }
        }, ie.removeEvent = function(e, t, n) {
            e.removeEventListener && e.removeEventListener(t, n)
        }, ie.Event = function(e, t) {
            if (!(this instanceof ie.Event)) return new ie.Event(e, t);
            e && e.type ? (this.originalEvent = e, this.type = e.type, this.isDefaultPrevented = e.defaultPrevented || void 0 === e.defaultPrevented && !1 === e.returnValue ? h : f) : this.type = e, t && ie.extend(this, t), this.timeStamp = e && e.timeStamp || ie.now(), this[ie.expando] = !0
        }, ie.Event.prototype = {
            constructor: ie.Event,
            isDefaultPrevented: f,
            isPropagationStopped: f,
            isImmediatePropagationStopped: f,
            isSimulated: !1,
            preventDefault: function() {
                var e = this.originalEvent;
                this.isDefaultPrevented = h, e && !this.isSimulated && e.preventDefault()
            },
            stopPropagation: function() {
                var e = this.originalEvent;
                this.isPropagationStopped = h, e && !this.isSimulated && e.stopPropagation()
            },
            stopImmediatePropagation: function() {
                var e = this.originalEvent;
                this.isImmediatePropagationStopped = h, e && !this.isSimulated && e.stopImmediatePropagation(), this.stopPropagation()
            }
        }, ie.each({
            mouseenter: "mouseover",
            mouseleave: "mouseout",
            pointerenter: "pointerover",
            pointerleave: "pointerout"
        }, function(e, t) {
            ie.event.special[e] = {
                delegateType: t,
                bindType: t,
                handle: function(e) {
                    var n, r = this,
                        i = e.relatedTarget,
                        o = e.handleObj;
                    return i && (i === r || ie.contains(r, i)) || (e.type = o.origType, n = o.handler.apply(this, arguments), e.type = t), n
                }
            }
        }), ie.fn.extend({
            on: function(e, t, n, r) {
                return g(this, e, t, n, r)
            },
            one: function(e, t, n, r) {
                return g(this, e, t, n, r, 1)
            },
            off: function(e, t, n) {
                var r, i;
                if (e && e.preventDefault && e.handleObj) return r = e.handleObj, ie(e.delegateTarget).off(r.namespace ? r.origType + "." + r.namespace : r.origType, r.selector, r.handler), this;
                if ("object" == typeof e) {
                    for (i in e) this.off(i, t, e[i]);
                    return this
                }
                return !1 !== t && "function" != typeof t || (n = t, t = void 0), !1 === n && (n = f), this.each(function() {
                    ie.event.remove(this, e, n, t)
                })
            }
        });
        var Be = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,
            je = /<script|<style|<link/i,
            Ve = /checked\s*(?:[^=]|=\s*.checked.)/i,
            ze = /^true\/(.*)/,
            Ue = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;
        ie.extend({
            htmlPrefilter: function(e) {
                return e.replace(Be, "<$1></$2>")
            },
            clone: function(e, t, n) {
                var r, i, o, a, s = e.cloneNode(!0),
                    l = ie.contains(e.ownerDocument, e);
                if (!(re.noCloneChecked || 1 !== e.nodeType && 11 !== e.nodeType || ie.isXMLDoc(e)))
                    for (a = u(s), o = u(e), r = 0, i = o.length; r < i; r++) w(o[r], a[r]);
                if (t)
                    if (n)
                        for (o = o || u(e), a = a || u(s), r = 0, i = o.length; r < i; r++) x(o[r], a[r]);
                    else x(e, s);
                return a = u(s, "script"), a.length > 0 && p(a, !l && u(e, "script")), s
            },
            cleanData: function(e) {
                for (var t, n, r, i = ie.event.special, o = 0; void 0 !== (n = e[o]); o++)
                    if (_e(n)) {
                        if (t = n[Se.expando]) {
                            if (t.events)
                                for (r in t.events) i[r] ? ie.event.remove(n, r) : ie.removeEvent(n, r, t.handle);
                            n[Se.expando] = void 0
                        }
                        n[Ee.expando] && (n[Ee.expando] = void 0)
                    }
            }
        }), ie.fn.extend({
            domManip: _,
            detach: function(e) {
                return S(this, e, !0)
            },
            remove: function(e) {
                return S(this, e)
            },
            text: function(e) {
                return we(this, function(e) {
                    return void 0 === e ? ie.text(this) : this.empty().each(function() {
                        1 !== this.nodeType && 11 !== this.nodeType && 9 !== this.nodeType || (this.textContent = e)
                    })
                }, null, e, arguments.length)
            },
            append: function() {
                return _(this, arguments, function(e) {
                    if (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) {
                        y(this, e).appendChild(e)
                    }
                })
            },
            prepend: function() {
                return _(this, arguments, function(e) {
                    if (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) {
                        var t = y(this, e);
                        t.insertBefore(e, t.firstChild)
                    }
                })
            },
            before: function() {
                return _(this, arguments, function(e) {
                    this.parentNode && this.parentNode.insertBefore(e, this)
                })
            },
            after: function() {
                return _(this, arguments, function(e) {
                    this.parentNode && this.parentNode.insertBefore(e, this.nextSibling)
                })
            },
            empty: function() {
                for (var e, t = 0; null != (e = this[t]); t++) 1 === e.nodeType && (ie.cleanData(u(e, !1)), e.textContent = "");
                return this
            },
            clone: function(e, t) {
                return e = null != e && e, t = null == t ? e : t, this.map(function() {
                    return ie.clone(this, e, t)
                })
            },
            html: function(e) {
                return we(this, function(e) {
                    var t = this[0] || {},
                        n = 0,
                        r = this.length;
                    if (void 0 === e && 1 === t.nodeType) return t.innerHTML;
                    if ("string" == typeof e && !je.test(e) && !Oe[(Le.exec(e) || ["", ""])[1].toLowerCase()]) {
                        e = ie.htmlPrefilter(e);
                        try {
                            for (; n < r; n++) t = this[n] || {}, 1 === t.nodeType && (ie.cleanData(u(t, !1)), t.innerHTML = e);
                            t = 0
                        } catch (e) {}
                    }
                    t && this.empty().append(e)
                }, null, e, arguments.length)
            },
            replaceWith: function() {
                var e = [];
                return _(this, arguments, function(t) {
                    var n = this.parentNode;
                    ie.inArray(this, e) < 0 && (ie.cleanData(u(this)), n && n.replaceChild(t, this))
                }, e)
            }
        }), ie.each({
            appendTo: "append",
            prependTo: "prepend",
            insertBefore: "before",
            insertAfter: "after",
            replaceAll: "replaceWith"
        }, function(e, t) {
            ie.fn[e] = function(e) {
                for (var n, r = [], i = ie(e), o = i.length - 1, a = 0; a <= o; a++) n = a === o ? this : this.clone(!0), ie(i[a])[t](n), Z.apply(r, n.get());
                return this.pushStack(r)
            }
        });
        var Ge, He = {
                HTML: "block",
                BODY: "block"
            },
            Ke = /^margin/,
            We = new RegExp("^(" + Te + ")(?!px)[a-z%]+$", "i"),
            Ye = function(t) {
                var n = t.ownerDocument.defaultView;
                return n && n.opener || (n = e), n.getComputedStyle(t)
            },
            Xe = function(e, t, n, r) {
                var i, o, a = {};
                for (o in t) a[o] = e.style[o], e.style[o] = t[o];
                i = n.apply(e, r || []);
                for (o in t) e.style[o] = a[o];
                return i
            },
            $e = X.documentElement;
        ! function() {
            function t() {
                s.style.cssText = "-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%", s.innerHTML = "", $e.appendChild(a);
                var t = e.getComputedStyle(s);
                n = "1%" !== t.top, o = "2px" === t.marginLeft, r = "4px" === t.width, s.style.marginRight = "50%", i = "4px" === t.marginRight, $e.removeChild(a)
            }
            var n, r, i, o, a = X.createElement("div"),
                s = X.createElement("div");
            s.style && (s.style.backgroundClip = "content-box", s.cloneNode(!0).style.backgroundClip = "", re.clearCloneStyle = "content-box" === s.style.backgroundClip, a.style.cssText = "border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute", a.appendChild(s), ie.extend(re, {
                pixelPosition: function() {
                    return t(), n
                },
                boxSizingReliable: function() {
                    return null == r && t(), r
                },
                pixelMarginRight: function() {
                    return null == r && t(), i
                },
                reliableMarginLeft: function() {
                    return null == r && t(), o
                },
                reliableMarginRight: function() {
                    var t, n = s.appendChild(X.createElement("div"));
                    return n.style.cssText = s.style.cssText = "-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0", n.style.marginRight = n.style.width = "0", s.style.width = "1px", $e.appendChild(a), t = !parseFloat(e.getComputedStyle(n).marginRight), $e.removeChild(a), s.removeChild(n), t
                }
            }))
        }();
        var Qe = /^(none|table(?!-c[ea]).+)/,
            Ze = {
                position: "absolute",
                visibility: "hidden",
                display: "block"
            },
            Je = {
                letterSpacing: "0",
                fontWeight: "400"
            },
            et = ["Webkit", "O", "Moz", "ms"],
            tt = X.createElement("div").style;
        ie.extend({
            cssHooks: {
                opacity: {
                    get: function(e, t) {
                        if (t) {
                            var n = I(e, "opacity");
                            return "" === n ? "1" : n
                        }
                    }
                }
            },
            cssNumber: {
                animationIterationCount: !0,
                columnCount: !0,
                fillOpacity: !0,
                flexGrow: !0,
                flexShrink: !0,
                fontWeight: !0,
                lineHeight: !0,
                opacity: !0,
                order: !0,
                orphans: !0,
                widows: !0,
                zIndex: !0,
                zoom: !0
            },
            cssProps: {
                float: "cssFloat"
            },
            style: function(e, t, n, r) {
                if (e && 3 !== e.nodeType && 8 !== e.nodeType && e.style) {
                    var i, o, a, s = ie.camelCase(t),
                        l = e.style;
                    if (t = ie.cssProps[s] || (ie.cssProps[s] = C(s) || s), a = ie.cssHooks[t] || ie.cssHooks[s], void 0 === n) return a && "get" in a && void 0 !== (i = a.get(e, !1, r)) ? i : l[t];
                    o = typeof n, "string" === o && (i = Ce.exec(n)) && i[1] && (n = c(e, t, i), o = "number"), null != n && n === n && ("number" === o && (n += i && i[3] || (ie.cssNumber[s] ? "" : "px")), re.clearCloneStyle || "" !== n || 0 !== t.indexOf("background") || (l[t] = "inherit"), a && "set" in a && void 0 === (n = a.set(e, n, r)) || (l[t] = n))
                }
            },
            css: function(e, t, n, r) {
                var i, o, a, s = ie.camelCase(t);
                return t = ie.cssProps[s] || (ie.cssProps[s] = C(s) || s), a = ie.cssHooks[t] || ie.cssHooks[s], a && "get" in a && (i = a.get(e, !0, n)), void 0 === i && (i = I(e, t, r)), "normal" === i && t in Je && (i = Je[t]), "" === n || n ? (o = parseFloat(i), !0 === n || isFinite(o) ? o || 0 : i) : i
            }
        }), ie.each(["height", "width"], function(e, t) {
            ie.cssHooks[t] = {
                get: function(e, n, r) {
                    if (n) return Qe.test(ie.css(e, "display")) && 0 === e.offsetWidth ? Xe(e, Ze, function() {
                        return P(e, t, r)
                    }) : P(e, t, r)
                },
                set: function(e, n, r) {
                    var i, o = r && Ye(e),
                        a = r && D(e, t, r, "border-box" === ie.css(e, "boxSizing", !1, o), o);
                    return a && (i = Ce.exec(n)) && "px" !== (i[3] || "px") && (e.style[t] = n, n = ie.css(e, t)), k(e, n, a)
                }
            }
        }), ie.cssHooks.marginLeft = T(re.reliableMarginLeft, function(e, t) {
            if (t) return (parseFloat(I(e, "marginLeft")) || e.getBoundingClientRect().left - Xe(e, {
                marginLeft: 0
            }, function() {
                return e.getBoundingClientRect().left
            })) + "px"
        }), ie.cssHooks.marginRight = T(re.reliableMarginRight, function(e, t) {
            if (t) return Xe(e, {
                display: "inline-block"
            }, I, [e, "marginRight"])
        }), ie.each({
            margin: "",
            padding: "",
            border: "Width"
        }, function(e, t) {
            ie.cssHooks[e + t] = {
                expand: function(n) {
                    for (var r = 0, i = {}, o = "string" == typeof n ? n.split(" ") : [n]; r < 4; r++) i[e + ke[r] + t] = o[r] || o[r - 2] || o[0];
                    return i
                }
            }, Ke.test(e) || (ie.cssHooks[e + t].set = k)
        }), ie.fn.extend({
            css: function(e, t) {
                return we(this, function(e, t, n) {
                    var r, i, o = {},
                        a = 0;
                    if (ie.isArray(t)) {
                        for (r = Ye(e), i = t.length; a < i; a++) o[t[a]] = ie.css(e, t[a], !1, r);
                        return o
                    }
                    return void 0 !== n ? ie.style(e, t, n) : ie.css(e, t)
                }, e, t, arguments.length > 1)
            },
            show: function() {
                return L(this, !0)
            },
            hide: function() {
                return L(this)
            },
            toggle: function(e) {
                return "boolean" == typeof e ? e ? this.show() : this.hide() : this.each(function() {
                    De(this) ? ie(this).show() : ie(this).hide()
                })
            }
        }), ie.Tween = A, A.prototype = {
            constructor: A,
            init: function(e, t, n, r, i, o) {
                this.elem = e, this.prop = n, this.easing = i || ie.easing._default, this.options = t, this.start = this.now = this.cur(), this.end = r,
                    this.unit = o || (ie.cssNumber[n] ? "" : "px")
            },
            cur: function() {
                var e = A.propHooks[this.prop];
                return e && e.get ? e.get(this) : A.propHooks._default.get(this)
            },
            run: function(e) {
                var t, n = A.propHooks[this.prop];
                return this.options.duration ? this.pos = t = ie.easing[this.easing](e, this.options.duration * e, 0, 1, this.options.duration) : this.pos = t = e, this.now = (this.end - this.start) * t + this.start, this.options.step && this.options.step.call(this.elem, this.now, this), n && n.set ? n.set(this) : A.propHooks._default.set(this), this
            }
        }, A.prototype.init.prototype = A.prototype, A.propHooks = {
            _default: {
                get: function(e) {
                    var t;
                    return 1 !== e.elem.nodeType || null != e.elem[e.prop] && null == e.elem.style[e.prop] ? e.elem[e.prop] : (t = ie.css(e.elem, e.prop, ""), t && "auto" !== t ? t : 0)
                },
                set: function(e) {
                    ie.fx.step[e.prop] ? ie.fx.step[e.prop](e) : 1 !== e.elem.nodeType || null == e.elem.style[ie.cssProps[e.prop]] && !ie.cssHooks[e.prop] ? e.elem[e.prop] = e.now : ie.style(e.elem, e.prop, e.now + e.unit)
                }
            }
        }, A.propHooks.scrollTop = A.propHooks.scrollLeft = {
            set: function(e) {
                e.elem.nodeType && e.elem.parentNode && (e.elem[e.prop] = e.now)
            }
        }, ie.easing = {
            linear: function(e) {
                return e
            },
            swing: function(e) {
                return .5 - Math.cos(e * Math.PI) / 2
            },
            _default: "swing"
        }, ie.fx = A.prototype.init, ie.fx.step = {};
        var nt, rt, it = /^(?:toggle|show|hide)$/,
            ot = /queueHooks$/;
        ie.Animation = ie.extend(B, {
                tweeners: {
                    "*": [function(e, t) {
                        var n = this.createTween(e, t);
                        return c(n.elem, e, Ce.exec(t), n), n
                    }]
                },
                tweener: function(e, t) {
                    ie.isFunction(e) ? (t = e, e = ["*"]) : e = e.match(be);
                    for (var n, r = 0, i = e.length; r < i; r++) n = e[r], B.tweeners[n] = B.tweeners[n] || [], B.tweeners[n].unshift(t)
                },
                prefilters: [N],
                prefilter: function(e, t) {
                    t ? B.prefilters.unshift(e) : B.prefilters.push(e)
                }
            }), ie.speed = function(e, t, n) {
                var r = e && "object" == typeof e ? ie.extend({}, e) : {
                    complete: n || !n && t || ie.isFunction(e) && e,
                    duration: e,
                    easing: n && t || t && !ie.isFunction(t) && t
                };
                return r.duration = ie.fx.off ? 0 : "number" == typeof r.duration ? r.duration : r.duration in ie.fx.speeds ? ie.fx.speeds[r.duration] : ie.fx.speeds._default, null != r.queue && !0 !== r.queue || (r.queue = "fx"), r.old = r.complete, r.complete = function() {
                    ie.isFunction(r.old) && r.old.call(this), r.queue && ie.dequeue(this, r.queue)
                }, r
            }, ie.fn.extend({
                fadeTo: function(e, t, n, r) {
                    return this.filter(De).css("opacity", 0).show().end().animate({
                        opacity: t
                    }, e, n, r)
                },
                animate: function(e, t, n, r) {
                    var i = ie.isEmptyObject(e),
                        o = ie.speed(t, n, r),
                        a = function() {
                            var t = B(this, ie.extend({}, e), o);
                            (i || Se.get(this, "finish")) && t.stop(!0)
                        };
                    return a.finish = a, i || !1 === o.queue ? this.each(a) : this.queue(o.queue, a)
                },
                stop: function(e, t, n) {
                    var r = function(e) {
                        var t = e.stop;
                        delete e.stop, t(n)
                    };
                    return "string" != typeof e && (n = t, t = e, e = void 0), t && !1 !== e && this.queue(e || "fx", []), this.each(function() {
                        var t = !0,
                            i = null != e && e + "queueHooks",
                            o = ie.timers,
                            a = Se.get(this);
                        if (i) a[i] && a[i].stop && r(a[i]);
                        else
                            for (i in a) a[i] && a[i].stop && ot.test(i) && r(a[i]);
                        for (i = o.length; i--;) o[i].elem !== this || null != e && o[i].queue !== e || (o[i].anim.stop(n), t = !1, o.splice(i, 1));
                        !t && n || ie.dequeue(this, e)
                    })
                },
                finish: function(e) {
                    return !1 !== e && (e = e || "fx"), this.each(function() {
                        var t, n = Se.get(this),
                            r = n[e + "queue"],
                            i = n[e + "queueHooks"],
                            o = ie.timers,
                            a = r ? r.length : 0;
                        for (n.finish = !0, ie.queue(this, e, []), i && i.stop && i.stop.call(this, !0), t = o.length; t--;) o[t].elem === this && o[t].queue === e && (o[t].anim.stop(!0), o.splice(t, 1));
                        for (t = 0; t < a; t++) r[t] && r[t].finish && r[t].finish.call(this);
                        delete n.finish
                    })
                }
            }), ie.each(["toggle", "show", "hide"], function(e, t) {
                var n = ie.fn[t];
                ie.fn[t] = function(e, r, i) {
                    return null == e || "boolean" == typeof e ? n.apply(this, arguments) : this.animate(F(t, !0), e, r, i)
                }
            }), ie.each({
                slideDown: F("show"),
                slideUp: F("hide"),
                slideToggle: F("toggle"),
                fadeIn: {
                    opacity: "show"
                },
                fadeOut: {
                    opacity: "hide"
                },
                fadeToggle: {
                    opacity: "toggle"
                }
            }, function(e, t) {
                ie.fn[e] = function(e, n, r) {
                    return this.animate(t, e, n, r)
                }
            }), ie.timers = [], ie.fx.tick = function() {
                var e, t = 0,
                    n = ie.timers;
                for (nt = ie.now(); t < n.length; t++)(e = n[t])() || n[t] !== e || n.splice(t--, 1);
                n.length || ie.fx.stop(), nt = void 0
            }, ie.fx.timer = function(e) {
                ie.timers.push(e), e() ? ie.fx.start() : ie.timers.pop()
            }, ie.fx.interval = 13, ie.fx.start = function() {
                rt || (rt = e.setInterval(ie.fx.tick, ie.fx.interval))
            }, ie.fx.stop = function() {
                e.clearInterval(rt), rt = null
            }, ie.fx.speeds = {
                slow: 600,
                fast: 200,
                _default: 400
            }, ie.fn.delay = function(t, n) {
                return t = ie.fx ? ie.fx.speeds[t] || t : t, n = n || "fx", this.queue(n, function(n, r) {
                    var i = e.setTimeout(n, t);
                    r.stop = function() {
                        e.clearTimeout(i)
                    }
                })
            },
            function() {
                var e = X.createElement("input"),
                    t = X.createElement("select"),
                    n = t.appendChild(X.createElement("option"));
                e.type = "checkbox", re.checkOn = "" !== e.value, re.optSelected = n.selected, t.disabled = !0, re.optDisabled = !n.disabled, e = X.createElement("input"), e.value = "t", e.type = "radio", re.radioValue = "t" === e.value
            }();
        var at, st = ie.expr.attrHandle;
        ie.fn.extend({
            attr: function(e, t) {
                return we(this, ie.attr, e, t, arguments.length > 1)
            },
            removeAttr: function(e) {
                return this.each(function() {
                    ie.removeAttr(this, e)
                })
            }
        }), ie.extend({
            attr: function(e, t, n) {
                var r, i, o = e.nodeType;
                if (3 !== o && 8 !== o && 2 !== o) return void 0 === e.getAttribute ? ie.prop(e, t, n) : (1 === o && ie.isXMLDoc(e) || (t = t.toLowerCase(), i = ie.attrHooks[t] || (ie.expr.match.bool.test(t) ? at : void 0)), void 0 !== n ? null === n ? void ie.removeAttr(e, t) : i && "set" in i && void 0 !== (r = i.set(e, n, t)) ? r : (e.setAttribute(t, n + ""), n) : i && "get" in i && null !== (r = i.get(e, t)) ? r : (r = ie.find.attr(e, t), null == r ? void 0 : r))
            },
            attrHooks: {
                type: {
                    set: function(e, t) {
                        if (!re.radioValue && "radio" === t && ie.nodeName(e, "input")) {
                            var n = e.value;
                            return e.setAttribute("type", t), n && (e.value = n), t
                        }
                    }
                }
            },
            removeAttr: function(e, t) {
                var n, r, i = 0,
                    o = t && t.match(be);
                if (o && 1 === e.nodeType)
                    for (; n = o[i++];) r = ie.propFix[n] || n, ie.expr.match.bool.test(n) && (e[r] = !1), e.removeAttribute(n)
            }
        }), at = {
            set: function(e, t, n) {
                return !1 === t ? ie.removeAttr(e, n) : e.setAttribute(n, n), n
            }
        }, ie.each(ie.expr.match.bool.source.match(/\w+/g), function(e, t) {
            var n = st[t] || ie.find.attr;
            st[t] = function(e, t, r) {
                var i, o;
                return r || (o = st[t], st[t] = i, i = null != n(e, t, r) ? t.toLowerCase() : null, st[t] = o), i
            }
        });
        var lt = /^(?:input|select|textarea|button)$/i,
            ct = /^(?:a|area)$/i;
        ie.fn.extend({
            prop: function(e, t) {
                return we(this, ie.prop, e, t, arguments.length > 1)
            },
            removeProp: function(e) {
                return this.each(function() {
                    delete this[ie.propFix[e] || e]
                })
            }
        }), ie.extend({
            prop: function(e, t, n) {
                var r, i, o = e.nodeType;
                if (3 !== o && 8 !== o && 2 !== o) return 1 === o && ie.isXMLDoc(e) || (t = ie.propFix[t] || t, i = ie.propHooks[t]), void 0 !== n ? i && "set" in i && void 0 !== (r = i.set(e, n, t)) ? r : e[t] = n : i && "get" in i && null !== (r = i.get(e, t)) ? r : e[t]
            },
            propHooks: {
                tabIndex: {
                    get: function(e) {
                        var t = ie.find.attr(e, "tabindex");
                        return t ? parseInt(t, 10) : lt.test(e.nodeName) || ct.test(e.nodeName) && e.href ? 0 : -1
                    }
                }
            },
            propFix: {
                for: "htmlFor",
                class: "className"
            }
        }), re.optSelected || (ie.propHooks.selected = {
            get: function(e) {
                var t = e.parentNode;
                return t && t.parentNode && t.parentNode.selectedIndex, null
            },
            set: function(e) {
                var t = e.parentNode;
                t && (t.selectedIndex, t.parentNode && t.parentNode.selectedIndex)
            }
        }), ie.each(["tabIndex", "readOnly", "maxLength", "cellSpacing", "cellPadding", "rowSpan", "colSpan", "useMap", "frameBorder", "contentEditable"], function() {
            ie.propFix[this.toLowerCase()] = this
        });
        var ut = /[\t\r\n\f]/g;
        ie.fn.extend({
            addClass: function(e) {
                var t, n, r, i, o, a, s, l = 0;
                if (ie.isFunction(e)) return this.each(function(t) {
                    ie(this).addClass(e.call(this, t, j(this)))
                });
                if ("string" == typeof e && e)
                    for (t = e.match(be) || []; n = this[l++];)
                        if (i = j(n), r = 1 === n.nodeType && (" " + i + " ").replace(ut, " ")) {
                            for (a = 0; o = t[a++];) r.indexOf(" " + o + " ") < 0 && (r += o + " ");
                            s = ie.trim(r), i !== s && n.setAttribute("class", s)
                        } return this
            },
            removeClass: function(e) {
                var t, n, r, i, o, a, s, l = 0;
                if (ie.isFunction(e)) return this.each(function(t) {
                    ie(this).removeClass(e.call(this, t, j(this)))
                });
                if (!arguments.length) return this.attr("class", "");
                if ("string" == typeof e && e)
                    for (t = e.match(be) || []; n = this[l++];)
                        if (i = j(n), r = 1 === n.nodeType && (" " + i + " ").replace(ut, " ")) {
                            for (a = 0; o = t[a++];)
                                for (; r.indexOf(" " + o + " ") > -1;) r = r.replace(" " + o + " ", " ");
                            s = ie.trim(r), i !== s && n.setAttribute("class", s)
                        } return this
            },
            toggleClass: function(e, t) {
                var n = typeof e;
                return "boolean" == typeof t && "string" === n ? t ? this.addClass(e) : this.removeClass(e) : ie.isFunction(e) ? this.each(function(n) {
                    ie(this).toggleClass(e.call(this, n, j(this), t), t)
                }) : this.each(function() {
                    var t, r, i, o;
                    if ("string" === n)
                        for (r = 0, i = ie(this), o = e.match(be) || []; t = o[r++];) i.hasClass(t) ? i.removeClass(t) : i.addClass(t);
                    else void 0 !== e && "boolean" !== n || (t = j(this), t && Se.set(this, "__className__", t), this.setAttribute && this.setAttribute("class", t || !1 === e ? "" : Se.get(this, "__className__") || ""))
                })
            },
            hasClass: function(e) {
                var t, n, r = 0;
                for (t = " " + e + " "; n = this[r++];)
                    if (1 === n.nodeType && (" " + j(n) + " ").replace(ut, " ").indexOf(t) > -1) return !0;
                return !1
            }
        });
        var pt = /\r/g,
            dt = /[\x20\t\r\n\f]+/g;
        ie.fn.extend({
            val: function(e) {
                var t, n, r, i = this[0]; {
                    if (arguments.length) return r = ie.isFunction(e), this.each(function(n) {
                        var i;
                        1 === this.nodeType && (i = r ? e.call(this, n, ie(this).val()) : e, null == i ? i = "" : "number" == typeof i ? i += "" : ie.isArray(i) && (i = ie.map(i, function(e) {
                            return null == e ? "" : e + ""
                        })), (t = ie.valHooks[this.type] || ie.valHooks[this.nodeName.toLowerCase()]) && "set" in t && void 0 !== t.set(this, i, "value") || (this.value = i))
                    });
                    if (i) return (t = ie.valHooks[i.type] || ie.valHooks[i.nodeName.toLowerCase()]) && "get" in t && void 0 !== (n = t.get(i, "value")) ? n : (n = i.value, "string" == typeof n ? n.replace(pt, "") : null == n ? "" : n)
                }
            }
        }), ie.extend({
            valHooks: {
                option: {
                    get: function(e) {
                        var t = ie.find.attr(e, "value");
                        return null != t ? t : ie.trim(ie.text(e)).replace(dt, " ")
                    }
                },
                select: {
                    get: function(e) {
                        for (var t, n, r = e.options, i = e.selectedIndex, o = "select-one" === e.type || i < 0, a = o ? null : [], s = o ? i + 1 : r.length, l = i < 0 ? s : o ? i : 0; l < s; l++)
                            if (n = r[l], (n.selected || l === i) && (re.optDisabled ? !n.disabled : null === n.getAttribute("disabled")) && (!n.parentNode.disabled || !ie.nodeName(n.parentNode, "optgroup"))) {
                                if (t = ie(n).val(), o) return t;
                                a.push(t)
                            } return a
                    },
                    set: function(e, t) {
                        for (var n, r, i = e.options, o = ie.makeArray(t), a = i.length; a--;) r = i[a], (r.selected = ie.inArray(ie.valHooks.option.get(r), o) > -1) && (n = !0);
                        return n || (e.selectedIndex = -1), o
                    }
                }
            }
        }), ie.each(["radio", "checkbox"], function() {
            ie.valHooks[this] = {
                set: function(e, t) {
                    if (ie.isArray(t)) return e.checked = ie.inArray(ie(e).val(), t) > -1
                }
            }, re.checkOn || (ie.valHooks[this].get = function(e) {
                return null === e.getAttribute("value") ? "on" : e.value
            })
        });
        var ht = /^(?:focusinfocus|focusoutblur)$/;
        ie.extend(ie.event, {
            trigger: function(t, n, r, i) {
                var o, a, s, l, c, u, p, d = [r || X],
                    h = ne.call(t, "type") ? t.type : t,
                    f = ne.call(t, "namespace") ? t.namespace.split(".") : [];
                if (a = s = r = r || X, 3 !== r.nodeType && 8 !== r.nodeType && !ht.test(h + ie.event.triggered) && (h.indexOf(".") > -1 && (f = h.split("."), h = f.shift(), f.sort()), c = h.indexOf(":") < 0 && "on" + h, t = t[ie.expando] ? t : new ie.Event(h, "object" == typeof t && t), t.isTrigger = i ? 2 : 3, t.namespace = f.join("."), t.rnamespace = t.namespace ? new RegExp("(^|\\.)" + f.join("\\.(?:.*\\.|)") + "(\\.|$)") : null, t.result = void 0, t.target || (t.target = r), n = null == n ? [t] : ie.makeArray(n, [t]), p = ie.event.special[h] || {}, i || !p.trigger || !1 !== p.trigger.apply(r, n))) {
                    if (!i && !p.noBubble && !ie.isWindow(r)) {
                        for (l = p.delegateType || h, ht.test(l + h) || (a = a.parentNode); a; a = a.parentNode) d.push(a), s = a;
                        s === (r.ownerDocument || X) && d.push(s.defaultView || s.parentWindow || e)
                    }
                    for (o = 0;
                        (a = d[o++]) && !t.isPropagationStopped();) t.type = o > 1 ? l : p.bindType || h, u = (Se.get(a, "events") || {})[t.type] && Se.get(a, "handle"), u && u.apply(a, n), (u = c && a[c]) && u.apply && _e(a) && (t.result = u.apply(a, n), !1 === t.result && t.preventDefault());
                    return t.type = h, i || t.isDefaultPrevented() || p._default && !1 !== p._default.apply(d.pop(), n) || !_e(r) || c && ie.isFunction(r[h]) && !ie.isWindow(r) && (s = r[c], s && (r[c] = null), ie.event.triggered = h, r[h](), ie.event.triggered = void 0, s && (r[c] = s)), t.result
                }
            },
            simulate: function(e, t, n) {
                var r = ie.extend(new ie.Event, n, {
                    type: e,
                    isSimulated: !0
                });
                ie.event.trigger(r, null, t)
            }
        }), ie.fn.extend({
            trigger: function(e, t) {
                return this.each(function() {
                    ie.event.trigger(e, t, this)
                })
            },
            triggerHandler: function(e, t) {
                var n = this[0];
                if (n) return ie.event.trigger(e, t, n, !0)
            }
        }), ie.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "), function(e, t) {
            ie.fn[t] = function(e, n) {
                return arguments.length > 0 ? this.on(t, null, e, n) : this.trigger(t)
            }
        }), ie.fn.extend({
            hover: function(e, t) {
                return this.mouseenter(e).mouseleave(t || e)
            }
        }), re.focusin = "onfocusin" in e, re.focusin || ie.each({
            focus: "focusin",
            blur: "focusout"
        }, function(e, t) {
            var n = function(e) {
                ie.event.simulate(t, e.target, ie.event.fix(e))
            };
            ie.event.special[t] = {
                setup: function() {
                    var r = this.ownerDocument || this,
                        i = Se.access(r, t);
                    i || r.addEventListener(e, n, !0), Se.access(r, t, (i || 0) + 1)
                },
                teardown: function() {
                    var r = this.ownerDocument || this,
                        i = Se.access(r, t) - 1;
                    i ? Se.access(r, t, i) : (r.removeEventListener(e, n, !0), Se.remove(r, t))
                }
            }
        });
        var ft = e.location,
            mt = ie.now(),
            gt = /\?/;
        ie.parseJSON = function(e) {
            return JSON.parse(e + "")
        }, ie.parseXML = function(t) {
            var n;
            if (!t || "string" != typeof t) return null;
            try {
                n = (new e.DOMParser).parseFromString(t, "text/xml")
            } catch (e) {
                n = void 0
            }
            return n && !n.getElementsByTagName("parsererror").length || ie.error("Invalid XML: " + t), n
        };
        var yt = /#.*$/,
            vt = /([?&])_=[^&]*/,
            bt = /^(.*?):[ \t]*([^\r\n]*)$/gm,
            xt = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/,
            wt = /^(?:GET|HEAD)$/,
            _t = /^\/\//,
            St = {},
            Et = {},
            Mt = "*/".concat("*"),
            It = X.createElement("a");
        It.href = ft.href, ie.extend({
            active: 0,
            lastModified: {},
            etag: {},
            ajaxSettings: {
                url: ft.href,
                type: "GET",
                isLocal: xt.test(ft.protocol),
                global: !0,
                processData: !0,
                async: !0,
                contentType: "application/x-www-form-urlencoded; charset=UTF-8",
                accepts: {
                    "*": Mt,
                    text: "text/plain",
                    html: "text/html",
                    xml: "application/xml, text/xml",
                    json: "application/json, text/javascript"
                },
                contents: {
                    xml: /\bxml\b/,
                    html: /\bhtml/,
                    json: /\bjson\b/
                },
                responseFields: {
                    xml: "responseXML",
                    text: "responseText",
                    json: "responseJSON"
                },
                converters: {
                    "* text": String,
                    "text html": !0,
                    "text json": ie.parseJSON,
                    "text xml": ie.parseXML
                },
                flatOptions: {
                    url: !0,
                    context: !0
                }
            },
            ajaxSetup: function(e, t) {
                return t ? U(U(e, ie.ajaxSettings), t) : U(ie.ajaxSettings, e)
            },
            ajaxPrefilter: V(St),
            ajaxTransport: V(Et),
            ajax: function(t, n) {
                function r(t, n, r, s) {
                    var c, p, v, b, w, S = n;
                    2 !== x && (x = 2, l && e.clearTimeout(l), i = void 0, a = s || "", _.readyState = t > 0 ? 4 : 0, c = t >= 200 && t < 300 || 304 === t, r && (b = G(d, _, r)), b = H(d, b, _, c), c ? (d.ifModified && (w = _.getResponseHeader("Last-Modified"), w && (ie.lastModified[o] = w), (w = _.getResponseHeader("etag")) && (ie.etag[o] = w)), 204 === t || "HEAD" === d.type ? S = "nocontent" : 304 === t ? S = "notmodified" : (S = b.state, p = b.data, v = b.error, c = !v)) : (v = S, !t && S || (S = "error", t < 0 && (t = 0))), _.status = t, _.statusText = (n || S) + "", c ? m.resolveWith(h, [p, S, _]) : m.rejectWith(h, [_, S, v]), _.statusCode(y), y = void 0, u && f.trigger(c ? "ajaxSuccess" : "ajaxError", [_, d, c ? p : v]), g.fireWith(h, [_, S]), u && (f.trigger("ajaxComplete", [_, d]), --ie.active || ie.event.trigger("ajaxStop")))
                }
                "object" == typeof t && (n = t, t = void 0), n = n || {};
                var i, o, a, s, l, c, u, p, d = ie.ajaxSetup({}, n),
                    h = d.context || d,
                    f = d.context && (h.nodeType || h.jquery) ? ie(h) : ie.event,
                    m = ie.Deferred(),
                    g = ie.Callbacks("once memory"),
                    y = d.statusCode || {},
                    v = {},
                    b = {},
                    x = 0,
                    w = "canceled",
                    _ = {
                        readyState: 0,
                        getResponseHeader: function(e) {
                            var t;
                            if (2 === x) {
                                if (!s)
                                    for (s = {}; t = bt.exec(a);) s[t[1].toLowerCase()] = t[2];
                                t = s[e.toLowerCase()]
                            }
                            return null == t ? null : t
                        },
                        getAllResponseHeaders: function() {
                            return 2 === x ? a : null
                        },
                        setRequestHeader: function(e, t) {
                            var n = e.toLowerCase();
                            return x || (e = b[n] = b[n] || e, v[e] = t), this
                        },
                        overrideMimeType: function(e) {
                            return x || (d.mimeType = e), this
                        },
                        statusCode: function(e) {
                            var t;
                            if (e)
                                if (x < 2)
                                    for (t in e) y[t] = [y[t], e[t]];
                                else _.always(e[_.status]);
                            return this
                        },
                        abort: function(e) {
                            var t = e || w;
                            return i && i.abort(t), r(0, t), this
                        }
                    };
                if (m.promise(_).complete = g.add, _.success = _.done, _.error = _.fail, d.url = ((t || d.url || ft.href) + "").replace(yt, "").replace(_t, ft.protocol + "//"), d.type = n.method || n.type || d.method || d.type, d.dataTypes = ie.trim(d.dataType || "*").toLowerCase().match(be) || [""], null == d.crossDomain) {
                    c = X.createElement("a");
                    try {
                        c.href = d.url, c.href = c.href, d.crossDomain = It.protocol + "//" + It.host != c.protocol + "//" + c.host
                    } catch (e) {
                        d.crossDomain = !0
                    }
                }
                if (d.data && d.processData && "string" != typeof d.data && (d.data = ie.param(d.data, d.traditional)), z(St, d, n, _), 2 === x) return _;
                u = ie.event && d.global, u && 0 == ie.active++ && ie.event.trigger("ajaxStart"), d.type = d.type.toUpperCase(), d.hasContent = !wt.test(d.type), o = d.url, d.hasContent || (d.data && (o = d.url += (gt.test(o) ? "&" : "?") + d.data, delete d.data), !1 === d.cache && (d.url = vt.test(o) ? o.replace(vt, "$1_=" + mt++) : o + (gt.test(o) ? "&" : "?") + "_=" + mt++)), d.ifModified && (ie.lastModified[o] && _.setRequestHeader("If-Modified-Since", ie.lastModified[o]), ie.etag[o] && _.setRequestHeader("If-None-Match", ie.etag[o])), (d.data && d.hasContent && !1 !== d.contentType || n.contentType) && _.setRequestHeader("Content-Type", d.contentType), _.setRequestHeader("Accept", d.dataTypes[0] && d.accepts[d.dataTypes[0]] ? d.accepts[d.dataTypes[0]] + ("*" !== d.dataTypes[0] ? ", " + Mt + "; q=0.01" : "") : d.accepts["*"]);
                for (p in d.headers) _.setRequestHeader(p, d.headers[p]);
                if (d.beforeSend && (!1 === d.beforeSend.call(h, _, d) || 2 === x)) return _.abort();
                w = "abort";
                for (p in {
                        success: 1,
                        error: 1,
                        complete: 1
                    }) _[p](d[p]);
                if (i = z(Et, d, n, _)) {
                    if (_.readyState = 1, u && f.trigger("ajaxSend", [_, d]), 2 === x) return _;
                    d.async && d.timeout > 0 && (l = e.setTimeout(function() {
                        _.abort("timeout")
                    }, d.timeout));
                    try {
                        x = 1, i.send(v, r)
                    } catch (e) {
                        if (!(x < 2)) throw e;
                        r(-1, e)
                    }
                } else r(-1, "No Transport");
                return _
            },
            getJSON: function(e, t, n) {
                return ie.get(e, t, n, "json")
            },
            getScript: function(e, t) {
                return ie.get(e, void 0, t, "script")
            }
        }), ie.each(["get", "post"], function(e, t) {
            ie[t] = function(e, n, r, i) {
                return ie.isFunction(n) && (i = i || r, r = n, n = void 0), ie.ajax(ie.extend({
                    url: e,
                    type: t,
                    dataType: i,
                    data: n,
                    success: r
                }, ie.isPlainObject(e) && e))
            }
        }), ie._evalUrl = function(e) {
            return ie.ajax({
                url: e,
                type: "GET",
                dataType: "script",
                async: !1,
                global: !1,
                throws: !0
            })
        }, ie.fn.extend({
            wrapAll: function(e) {
                var t;
                return ie.isFunction(e) ? this.each(function(t) {
                    ie(this).wrapAll(e.call(this, t))
                }) : (this[0] && (t = ie(e, this[0].ownerDocument).eq(0).clone(!0), this[0].parentNode && t.insertBefore(this[0]), t.map(function() {
                    for (var e = this; e.firstElementChild;) e = e.firstElementChild;
                    return e
                }).append(this)), this)
            },
            wrapInner: function(e) {
                return ie.isFunction(e) ? this.each(function(t) {
                    ie(this).wrapInner(e.call(this, t))
                }) : this.each(function() {
                    var t = ie(this),
                        n = t.contents();
                    n.length ? n.wrapAll(e) : t.append(e)
                })
            },
            wrap: function(e) {
                var t = ie.isFunction(e);
                return this.each(function(n) {
                    ie(this).wrapAll(t ? e.call(this, n) : e)
                })
            },
            unwrap: function() {
                return this.parent().each(function() {
                    ie.nodeName(this, "body") || ie(this).replaceWith(this.childNodes)
                }).end()
            }
        }), ie.expr.filters.hidden = function(e) {
            return !ie.expr.filters.visible(e)
        }, ie.expr.filters.visible = function(e) {
            return e.offsetWidth > 0 || e.offsetHeight > 0 || e.getClientRects().length > 0
        };
        var Tt = /%20/g,
            Ct = /\[\]$/,
            kt = /\r?\n/g,
            Dt = /^(?:submit|button|image|reset|file)$/i,
            Pt = /^(?:input|select|textarea|keygen)/i;
        ie.param = function(e, t) {
            var n, r = [],
                i = function(e, t) {
                    t = ie.isFunction(t) ? t() : null == t ? "" : t, r[r.length] = encodeURIComponent(e) + "=" + encodeURIComponent(t)
                };
            if (void 0 === t && (t = ie.ajaxSettings && ie.ajaxSettings.traditional), ie.isArray(e) || e.jquery && !ie.isPlainObject(e)) ie.each(e, function() {
                i(this.name, this.value)
            });
            else
                for (n in e) K(n, e[n], t, i);
            return r.join("&").replace(Tt, "+")
        }, ie.fn.extend({
            serialize: function() {
                return ie.param(this.serializeArray())
            },
            serializeArray: function() {
                return this.map(function() {
                    var e = ie.prop(this, "elements");
                    return e ? ie.makeArray(e) : this
                }).filter(function() {
                    var e = this.type;
                    return this.name && !ie(this).is(":disabled") && Pt.test(this.nodeName) && !Dt.test(e) && (this.checked || !Pe.test(e))
                }).map(function(e, t) {
                    var n = ie(this).val();
                    return null == n ? null : ie.isArray(n) ? ie.map(n, function(e) {
                        return {
                            name: t.name,
                            value: e.replace(kt, "\r\n")
                        }
                    }) : {
                        name: t.name,
                        value: n.replace(kt, "\r\n")
                    }
                }).get()
            }
        }), ie.ajaxSettings.xhr = function() {
            try {
                return new e.XMLHttpRequest
            } catch (e) {}
        };
        var Lt = {
                0: 200,
                1223: 204
            },
            At = ie.ajaxSettings.xhr();
        re.cors = !!At && "withCredentials" in At, re.ajax = At = !!At, ie.ajaxTransport(function(t) {
            var n, r;
            if (re.cors || At && !t.crossDomain) return {
                send: function(i, o) {
                    var a, s = t.xhr();
                    if (s.open(t.type, t.url, t.async, t.username, t.password), t.xhrFields)
                        for (a in t.xhrFields) s[a] = t.xhrFields[a];
                    t.mimeType && s.overrideMimeType && s.overrideMimeType(t.mimeType), t.crossDomain || i["X-Requested-With"] || (i["X-Requested-With"] = "XMLHttpRequest");
                    for (a in i) s.setRequestHeader(a, i[a]);
                    n = function(e) {
                        return function() {
                            n && (n = r = s.onload = s.onerror = s.onabort = s.onreadystatechange = null, "abort" === e ? s.abort() : "error" === e ? "number" != typeof s.status ? o(0, "error") : o(s.status, s.statusText) : o(Lt[s.status] || s.status, s.statusText, "text" !== (s.responseType || "text") || "string" != typeof s.responseText ? {
                                binary: s.response
                            } : {
                                text: s.responseText
                            }, s.getAllResponseHeaders()))
                        }
                    }, s.onload = n(), r = s.onerror = n("error"), void 0 !== s.onabort ? s.onabort = r : s.onreadystatechange = function() {
                        4 === s.readyState && e.setTimeout(function() {
                            n && r()
                        })
                    }, n = n("abort");
                    try {
                        s.send(t.hasContent && t.data || null)
                    } catch (e) {
                        if (n) throw e
                    }
                },
                abort: function() {
                    n && n()
                }
            }
        }), ie.ajaxSetup({
            accepts: {
                script: "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"
            },
            contents: {
                script: /\b(?:java|ecma)script\b/
            },
            converters: {
                "text script": function(e) {
                    return ie.globalEval(e), e
                }
            }
        }), ie.ajaxPrefilter("script", function(e) {
            void 0 === e.cache && (e.cache = !1), e.crossDomain && (e.type = "GET")
        }), ie.ajaxTransport("script", function(e) {
            if (e.crossDomain) {
                var t, n;
                return {
                    send: function(r, i) {
                        t = ie("<script>").prop({
                            charset: e.scriptCharset,
                            src: e.url
                        }).on("load error", n = function(e) {
                            t.remove(), n = null, e && i("error" === e.type ? 404 : 200, e.type)
                        }), X.head.appendChild(t[0])
                    },
                    abort: function() {
                        n && n()
                    }
                }
            }
        });
        var Ot = [],
            Ft = /(=)\?(?=&|$)|\?\?/;
        ie.ajaxSetup({
            jsonp: "callback",
            jsonpCallback: function() {
                var e = Ot.pop() || ie.expando + "_" + mt++;
                return this[e] = !0, e
            }
        }), ie.ajaxPrefilter("json jsonp", function(t, n, r) {
            var i, o, a, s = !1 !== t.jsonp && (Ft.test(t.url) ? "url" : "string" == typeof t.data && 0 === (t.contentType || "").indexOf("application/x-www-form-urlencoded") && Ft.test(t.data) && "data");
            if (s || "jsonp" === t.dataTypes[0]) return i = t.jsonpCallback = ie.isFunction(t.jsonpCallback) ? t.jsonpCallback() : t.jsonpCallback, s ? t[s] = t[s].replace(Ft, "$1" + i) : !1 !== t.jsonp && (t.url += (gt.test(t.url) ? "&" : "?") + t.jsonp + "=" + i), t.converters["script json"] = function() {
                return a || ie.error(i + " was not called"), a[0]
            }, t.dataTypes[0] = "json", o = e[i], e[i] = function() {
                a = arguments
            }, r.always(function() {
                void 0 === o ? ie(e).removeProp(i) : e[i] = o, t[i] && (t.jsonpCallback = n.jsonpCallback, Ot.push(i)), a && ie.isFunction(o) && o(a[0]), a = o = void 0
            }), "script"
        }), ie.parseHTML = function(e, t, n) {
            if (!e || "string" != typeof e) return null;
            "boolean" == typeof t && (n = t, t = !1), t = t || X;
            var r = he.exec(e),
                i = !n && [];
            return r ? [t.createElement(r[1])] : (r = d([e], t, i), i && i.length && ie(i).remove(), ie.merge([], r.childNodes))
        };
        var qt = ie.fn.load;
        ie.fn.load = function(e, t, n) {
            if ("string" != typeof e && qt) return qt.apply(this, arguments);
            var r, i, o, a = this,
                s = e.indexOf(" ");
            return s > -1 && (r = ie.trim(e.slice(s)), e = e.slice(0, s)), ie.isFunction(t) ? (n = t, t = void 0) : t && "object" == typeof t && (i = "POST"), a.length > 0 && ie.ajax({
                url: e,
                type: i || "GET",
                dataType: "html",
                data: t
            }).done(function(e) {
                o = arguments, a.html(r ? ie("<div>").append(ie.parseHTML(e)).find(r) : e)
            }).always(n && function(e, t) {
                a.each(function() {
                    n.apply(this, o || [e.responseText, t, e])
                })
            }), this
        }, ie.each(["ajaxStart", "ajaxStop", "ajaxComplete", "ajaxError", "ajaxSuccess", "ajaxSend"], function(e, t) {
            ie.fn[t] = function(e) {
                return this.on(t, e)
            }
        }), ie.expr.filters.animated = function(e) {
            return ie.grep(ie.timers, function(t) {
                return e === t.elem
            }).length
        }, ie.offset = {
            setOffset: function(e, t, n) {
                var r, i, o, a, s, l, c, u = ie.css(e, "position"),
                    p = ie(e),
                    d = {};
                "static" === u && (e.style.position = "relative"), s = p.offset(), o = ie.css(e, "top"), l = ie.css(e, "left"), c = ("absolute" === u || "fixed" === u) && (o + l).indexOf("auto") > -1, c ? (r = p.position(), a = r.top, i = r.left) : (a = parseFloat(o) || 0, i = parseFloat(l) || 0), ie.isFunction(t) && (t = t.call(e, n, ie.extend({}, s))), null != t.top && (d.top = t.top - s.top + a), null != t.left && (d.left = t.left - s.left + i), "using" in t ? t.using.call(e, d) : p.css(d)
            }
        }, ie.fn.extend({
            offset: function(e) {
                if (arguments.length) return void 0 === e ? this : this.each(function(t) {
                    ie.offset.setOffset(this, e, t)
                });
                var t, n, r = this[0],
                    i = {
                        top: 0,
                        left: 0
                    },
                    o = r && r.ownerDocument;
                if (o) return t = o.documentElement, ie.contains(t, r) ? (i = r.getBoundingClientRect(), n = W(o), {
                    top: i.top + n.pageYOffset - t.clientTop,
                    left: i.left + n.pageXOffset - t.clientLeft
                }) : i
            },
            position: function() {
                if (this[0]) {
                    var e, t, n = this[0],
                        r = {
                            top: 0,
                            left: 0
                        };
                    return "fixed" === ie.css(n, "position") ? t = n.getBoundingClientRect() : (e = this.offsetParent(), t = this.offset(), ie.nodeName(e[0], "html") || (r = e.offset()), r.top += ie.css(e[0], "borderTopWidth", !0), r.left += ie.css(e[0], "borderLeftWidth", !0)), {
                        top: t.top - r.top - ie.css(n, "marginTop", !0),
                        left: t.left - r.left - ie.css(n, "marginLeft", !0)
                    }
                }
            },
            offsetParent: function() {
                return this.map(function() {
                    for (var e = this.offsetParent; e && "static" === ie.css(e, "position");) e = e.offsetParent;
                    return e || $e
                })
            }
        }), ie.each({
            scrollLeft: "pageXOffset",
            scrollTop: "pageYOffset"
        }, function(e, t) {
            var n = "pageYOffset" === t;
            ie.fn[e] = function(r) {
                return we(this, function(e, r, i) {
                    var o = W(e);
                    if (void 0 === i) return o ? o[t] : e[r];
                    o ? o.scrollTo(n ? o.pageXOffset : i, n ? i : o.pageYOffset) : e[r] = i
                }, e, r, arguments.length)
            }
        }), ie.each(["top", "left"], function(e, t) {
            ie.cssHooks[t] = T(re.pixelPosition, function(e, n) {
                if (n) return n = I(e, t), We.test(n) ? ie(e).position()[t] + "px" : n
            })
        }), ie.each({
            Height: "height",
            Width: "width"
        }, function(e, t) {
            ie.each({
                padding: "inner" + e,
                content: t,
                "": "outer" + e
            }, function(n, r) {
                ie.fn[r] = function(r, i) {
                    var o = arguments.length && (n || "boolean" != typeof r),
                        a = n || (!0 === r || !0 === i ? "margin" : "border");
                    return we(this, function(t, n, r) {
                        var i;
                        return ie.isWindow(t) ? t.document.documentElement["client" + e] : 9 === t.nodeType ? (i = t.documentElement, Math.max(t.body["scroll" + e], i["scroll" + e], t.body["offset" + e], i["offset" + e], i["client" + e])) : void 0 === r ? ie.css(t, n, a) : ie.style(t, n, r, a)
                    }, t, o ? r : void 0, o, null)
                }
            })
        }), ie.fn.extend({
            bind: function(e, t, n) {
                return this.on(e, null, t, n)
            },
            unbind: function(e, t) {
                return this.off(e, null, t)
            },
            delegate: function(e, t, n, r) {
                return this.on(t, e, n, r)
            },
            undelegate: function(e, t, n) {
                return 1 === arguments.length ? this.off(e, "**") : this.off(t, e || "**", n)
            },
            size: function() {
                return this.length
            }
        }), ie.fn.andSelf = ie.fn.addBack, "function" == typeof define && define.amd && define("jquery", [], function() {
            return ie
        });
        var Nt = e.jQuery,
            Rt = e.$;
        return ie.noConflict = function(t) {
            return e.$ === ie && (e.$ = Rt), t && e.jQuery === ie && (e.jQuery = Nt), ie
        }, t || (e.jQuery = e.$ = ie), ie
    }), define("keys", ["require"], function(e) {
        return new function() {
            var e = {
                    8: this.BACKSPACE = "Backspace",
                    9: this.TAB = "Tab",
                    13: this.ENTER = "Enter",
                    16: this.SHIFT = "Shift",
                    17: this.CONTROL = "Control",
                    18: this.ALT = "Alt",
                    20: this.CAPSLOCK = "CapsLock",
                    27: this.ESCAPE = "Esc",
                    32: this.SPACEBAR = "Space",
                    33: this.PAGEUP = "PageUp",
                    34: this.PAGEDOWN = "PageDown",
                    35: this.END = "End",
                    36: this.HOME = "Home",
                    37: this.LEFT = "Left",
                    38: this.UP = "Up",
                    39: this.RIGHT = "Right",
                    40: this.DOWN = "Down",
                    46: this.DELETE = "Del"
                },
                t = {
                    UIKeyInputUpArrow: this.UP,
                    UIKeyInputDownArrow: this.DOWN,
                    UIKeyInputLeftArrow: this.LEFT,
                    UIKeyInputRightArrow: this.RIGHT,
                    UIKeyInputEscape: this.ESCAPE,
                    UIKeyInputPageUp: this.PAGEUP,
                    UIKeyInputPageDown: this.PAGEDOWN
                };
            this.isUndo = function(e) {
                return !e.altKey && (e.ctrlKey || e.metaKey) && 90 == e.which && !e.shiftKey
            }, this.isRedo = function(e) {
                return !e.altKey && (e.ctrlKey || e.metaKey) && (89 == e.which || 90 == e.which && e.shiftKey)
            }, this.isSelectAll = function(e) {
                return !e.altKey && (e.ctrlKey || e.metaKey) && 65 == e.which
            }, this.isBacktick = function(e) {
                return !(e.altKey || e.ctrlKey || e.metaKey || e.shiftKey || 192 != e.which)
            }, this.isHelp = function(e) {
                return !e.altKey && (e.ctrlKey || e.metaKey) && 191 == e.which
            }, this.lookup = function(n) {
                return e[n.which] || t[n.key]
            }, this.lookupChar = function(e) {
                return String.fromCharCode(e.which)
            }
        }
    }), define("text", {
        load: function(e) {
            throw new Error("Dynamic load not allowed: " + e)
        }
    }),
    function() {
        function e(e) {
            function t(t, n, r, i, o, a) {
                for (; o >= 0 && o < a; o += e) {
                    var s = i ? i[o] : o;
                    r = n(r, t[s], s, t)
                }
                return r
            }
            return function(n, r, i, o) {
                r = b(r, o, 4);
                var a = !I(n) && v.keys(n),
                    s = (a || n).length,
                    l = e > 0 ? 0 : s - 1;
                return arguments.length < 3 && (i = n[a ? a[l] : l], l += e), t(n, r, i, a, l, s)
            }
        }

        function t(e) {
            return function(t, n, r) {
                n = x(n, r);
                for (var i = M(t), o = e > 0 ? 0 : i - 1; o >= 0 && o < i; o += e)
                    if (n(t[o], o, t)) return o;
                return -1
            }
        }

        function n(e, t, n) {
            return function(r, i, o) {
                var a = 0,
                    s = M(r);
                if ("number" == typeof o) e > 0 ? a = o >= 0 ? o : Math.max(o + s, a) : s = o >= 0 ? Math.min(o + 1, s) : o + s + 1;
                else if (n && o && s) return o = n(r, i), r[o] === i ? o : -1;
                if (i !== i) return o = t(u.call(r, a, s), v.isNaN), o >= 0 ? o + a : -1;
                for (o = e > 0 ? a : s - 1; o >= 0 && o < s; o += e)
                    if (r[o] === i) return o;
                return -1
            }
        }

        function r(e, t) {
            var n = P.length,
                r = e.constructor,
                i = v.isFunction(r) && r.prototype || s,
                o = "constructor";
            for (v.has(e, o) && !v.contains(t, o) && t.push(o); n--;)(o = P[n]) in e && e[o] !== i[o] && !v.contains(t, o) && t.push(o)
        }
        var i = this,
            o = i._,
            a = Array.prototype,
            s = Object.prototype,
            l = Function.prototype,
            c = a.push,
            u = a.slice,
            p = s.toString,
            d = s.hasOwnProperty,
            h = Array.isArray,
            f = Object.keys,
            m = l.bind,
            g = Object.create,
            y = function() {},
            v = function(e) {
                return e instanceof v ? e : this instanceof v ? void(this._wrapped = e) : new v(e)
            };
        "undefined" != typeof exports ? ("undefined" != typeof module && module.exports && (exports = module.exports = v), exports._ = v) : i._ = v, v.VERSION = "1.8.3";
        var b = function(e, t, n) {
                if (void 0 === t) return e;
                switch (null == n ? 3 : n) {
                    case 1:
                        return function(n) {
                            return e.call(t, n)
                        };
                    case 2:
                        return function(n, r) {
                            return e.call(t, n, r)
                        };
                    case 3:
                        return function(n, r, i) {
                            return e.call(t, n, r, i)
                        };
                    case 4:
                        return function(n, r, i, o) {
                            return e.call(t, n, r, i, o)
                        }
                }
                return function() {
                    return e.apply(t, arguments)
                }
            },
            x = function(e, t, n) {
                return null == e ? v.identity : v.isFunction(e) ? b(e, t, n) : v.isObject(e) ? v.matcher(e) : v.property(e)
            };
        v.iteratee = function(e, t) {
            return x(e, t, 1 / 0)
        };
        var w = function(e, t) {
                return function(n) {
                    var r = arguments.length;
                    if (r < 2 || null == n) return n;
                    for (var i = 1; i < r; i++)
                        for (var o = arguments[i], a = e(o), s = a.length, l = 0; l < s; l++) {
                            var c = a[l];
                            t && void 0 !== n[c] || (n[c] = o[c])
                        }
                    return n
                }
            },
            _ = function(e) {
                if (!v.isObject(e)) return {};
                if (g) return g(e);
                y.prototype = e;
                var t = new y;
                return y.prototype = null, t
            },
            S = function(e) {
                return function(t) {
                    return null == t ? void 0 : t[e]
                }
            },
            E = Math.pow(2, 53) - 1,
            M = S("length"),
            I = function(e) {
                var t = M(e);
                return "number" == typeof t && t >= 0 && t <= E
            };
        v.each = v.forEach = function(e, t, n) {
            t = b(t, n);
            var r, i;
            if (I(e))
                for (r = 0, i = e.length; r < i; r++) t(e[r], r, e);
            else {
                var o = v.keys(e);
                for (r = 0, i = o.length; r < i; r++) t(e[o[r]], o[r], e)
            }
            return e
        }, v.map = v.collect = function(e, t, n) {
            t = x(t, n);
            for (var r = !I(e) && v.keys(e), i = (r || e).length, o = Array(i), a = 0; a < i; a++) {
                var s = r ? r[a] : a;
                o[a] = t(e[s], s, e)
            }
            return o
        }, v.reduce = v.foldl = v.inject = e(1), v.reduceRight = v.foldr = e(-1), v.find = v.detect = function(e, t, n) {
            var r;
            if (void 0 !== (r = I(e) ? v.findIndex(e, t, n) : v.findKey(e, t, n)) && -1 !== r) return e[r]
        }, v.filter = v.select = function(e, t, n) {
            var r = [];
            return t = x(t, n), v.each(e, function(e, n, i) {
                t(e, n, i) && r.push(e)
            }), r
        }, v.reject = function(e, t, n) {
            return v.filter(e, v.negate(x(t)), n)
        }, v.every = v.all = function(e, t, n) {
            t = x(t, n);
            for (var r = !I(e) && v.keys(e), i = (r || e).length, o = 0; o < i; o++) {
                var a = r ? r[o] : o;
                if (!t(e[a], a, e)) return !1
            }
            return !0
        }, v.some = v.any = function(e, t, n) {
            t = x(t, n);
            for (var r = !I(e) && v.keys(e), i = (r || e).length, o = 0; o < i; o++) {
                var a = r ? r[o] : o;
                if (t(e[a], a, e)) return !0
            }
            return !1
        }, v.contains = v.includes = v.include = function(e, t, n, r) {
            return I(e) || (e = v.values(e)), ("number" != typeof n || r) && (n = 0), v.indexOf(e, t, n) >= 0
        }, v.invoke = function(e, t) {
            var n = u.call(arguments, 2),
                r = v.isFunction(t);
            return v.map(e, function(e) {
                var i = r ? t : e[t];
                return null == i ? i : i.apply(e, n)
            })
        }, v.pluck = function(e, t) {
            return v.map(e, v.property(t))
        }, v.where = function(e, t) {
            return v.filter(e, v.matcher(t))
        }, v.findWhere = function(e, t) {
            return v.find(e, v.matcher(t))
        }, v.max = function(e, t, n) {
            var r, i, o = -1 / 0,
                a = -1 / 0;
            if (null == t && null != e) {
                e = I(e) ? e : v.values(e);
                for (var s = 0, l = e.length; s < l; s++)(r = e[s]) > o && (o = r)
            } else t = x(t, n), v.each(e, function(e, n, r) {
                ((i = t(e, n, r)) > a || i === -1 / 0 && o === -1 / 0) && (o = e, a = i)
            });
            return o
        }, v.min = function(e, t, n) {
            var r, i, o = 1 / 0,
                a = 1 / 0;
            if (null == t && null != e) {
                e = I(e) ? e : v.values(e);
                for (var s = 0, l = e.length; s < l; s++)(r = e[s]) < o && (o = r)
            } else t = x(t, n), v.each(e, function(e, n, r) {
                ((i = t(e, n, r)) < a || i === 1 / 0 && o === 1 / 0) && (o = e, a = i)
            });
            return o
        }, v.shuffle = function(e) {
            for (var t, n = I(e) ? e : v.values(e), r = n.length, i = Array(r), o = 0; o < r; o++) t = v.random(0, o), t !== o && (i[o] = i[t]), i[t] = n[o];
            return i
        }, v.sample = function(e, t, n) {
            return null == t || n ? (I(e) || (e = v.values(e)), e[v.random(e.length - 1)]) : v.shuffle(e).slice(0, Math.max(0, t))
        }, v.sortBy = function(e, t, n) {
            return t = x(t, n), v.pluck(v.map(e, function(e, n, r) {
                return {
                    value: e,
                    index: n,
                    criteria: t(e, n, r)
                }
            }).sort(function(e, t) {
                var n = e.criteria,
                    r = t.criteria;
                if (n !== r) {
                    if (n > r || void 0 === n) return 1;
                    if (n < r || void 0 === r) return -1
                }
                return e.index - t.index
            }), "value")
        };
        var T = function(e) {
            return function(t, n, r) {
                var i = {};
                return n = x(n, r), v.each(t, function(r, o) {
                    var a = n(r, o, t);
                    e(i, r, a)
                }), i
            }
        };
        v.groupBy = T(function(e, t, n) {
                v.has(e, n) ? e[n].push(t) : e[n] = [t]
            }), v.indexBy = T(function(e, t, n) {
                e[n] = t
            }),
            v.countBy = T(function(e, t, n) {
                v.has(e, n) ? e[n]++ : e[n] = 1
            }), v.toArray = function(e) {
                return e ? v.isArray(e) ? u.call(e) : I(e) ? v.map(e, v.identity) : v.values(e) : []
            }, v.size = function(e) {
                return null == e ? 0 : I(e) ? e.length : v.keys(e).length
            }, v.partition = function(e, t, n) {
                t = x(t, n);
                var r = [],
                    i = [];
                return v.each(e, function(e, n, o) {
                    (t(e, n, o) ? r : i).push(e)
                }), [r, i]
            }, v.first = v.head = v.take = function(e, t, n) {
                if (null != e) return null == t || n ? e[0] : v.initial(e, e.length - t)
            }, v.initial = function(e, t, n) {
                return u.call(e, 0, Math.max(0, e.length - (null == t || n ? 1 : t)))
            }, v.last = function(e, t, n) {
                if (null != e) return null == t || n ? e[e.length - 1] : v.rest(e, Math.max(0, e.length - t))
            }, v.rest = v.tail = v.drop = function(e, t, n) {
                return u.call(e, null == t || n ? 1 : t)
            }, v.compact = function(e) {
                return v.filter(e, v.identity)
            };
        var C = function(e, t, n, r) {
            for (var i = [], o = 0, a = r || 0, s = M(e); a < s; a++) {
                var l = e[a];
                if (I(l) && (v.isArray(l) || v.isArguments(l))) {
                    t || (l = C(l, t, n));
                    var c = 0,
                        u = l.length;
                    for (i.length += u; c < u;) i[o++] = l[c++]
                } else n || (i[o++] = l)
            }
            return i
        };
        v.flatten = function(e, t) {
            return C(e, t, !1)
        }, v.without = function(e) {
            return v.difference(e, u.call(arguments, 1))
        }, v.uniq = v.unique = function(e, t, n, r) {
            v.isBoolean(t) || (r = n, n = t, t = !1), null != n && (n = x(n, r));
            for (var i = [], o = [], a = 0, s = M(e); a < s; a++) {
                var l = e[a],
                    c = n ? n(l, a, e) : l;
                t ? (a && o === c || i.push(l), o = c) : n ? v.contains(o, c) || (o.push(c), i.push(l)) : v.contains(i, l) || i.push(l)
            }
            return i
        }, v.union = function() {
            return v.uniq(C(arguments, !0, !0))
        }, v.intersection = function(e) {
            for (var t = [], n = arguments.length, r = 0, i = M(e); r < i; r++) {
                var o = e[r];
                if (!v.contains(t, o)) {
                    for (var a = 1; a < n && v.contains(arguments[a], o); a++);
                    a === n && t.push(o)
                }
            }
            return t
        }, v.difference = function(e) {
            var t = C(arguments, !0, !0, 1);
            return v.filter(e, function(e) {
                return !v.contains(t, e)
            })
        }, v.zip = function() {
            return v.unzip(arguments)
        }, v.unzip = function(e) {
            for (var t = e && v.max(e, M).length || 0, n = Array(t), r = 0; r < t; r++) n[r] = v.pluck(e, r);
            return n
        }, v.object = function(e, t) {
            for (var n = {}, r = 0, i = M(e); r < i; r++) t ? n[e[r]] = t[r] : n[e[r][0]] = e[r][1];
            return n
        }, v.findIndex = t(1), v.findLastIndex = t(-1), v.sortedIndex = function(e, t, n, r) {
            n = x(n, r, 1);
            for (var i = n(t), o = 0, a = M(e); o < a;) {
                var s = Math.floor((o + a) / 2);
                n(e[s]) < i ? o = s + 1 : a = s
            }
            return o
        }, v.indexOf = n(1, v.findIndex, v.sortedIndex), v.lastIndexOf = n(-1, v.findLastIndex), v.range = function(e, t, n) {
            null == t && (t = e || 0, e = 0), n = n || 1;
            for (var r = Math.max(Math.ceil((t - e) / n), 0), i = Array(r), o = 0; o < r; o++, e += n) i[o] = e;
            return i
        };
        var k = function(e, t, n, r, i) {
            if (!(r instanceof t)) return e.apply(n, i);
            var o = _(e.prototype),
                a = e.apply(o, i);
            return v.isObject(a) ? a : o
        };
        v.bind = function(e, t) {
            if (m && e.bind === m) return m.apply(e, u.call(arguments, 1));
            if (!v.isFunction(e)) throw new TypeError("Bind must be called on a function");
            var n = u.call(arguments, 2),
                r = function() {
                    return k(e, r, t, this, n.concat(u.call(arguments)))
                };
            return r
        }, v.partial = function(e) {
            var t = u.call(arguments, 1),
                n = function() {
                    for (var r = 0, i = t.length, o = Array(i), a = 0; a < i; a++) o[a] = t[a] === v ? arguments[r++] : t[a];
                    for (; r < arguments.length;) o.push(arguments[r++]);
                    return k(e, n, this, this, o)
                };
            return n
        }, v.bindAll = function(e) {
            var t, n, r = arguments.length;
            if (r <= 1) throw new Error("bindAll must be passed function names");
            for (t = 1; t < r; t++) n = arguments[t], e[n] = v.bind(e[n], e);
            return e
        }, v.memoize = function(e, t) {
            var n = function(r) {
                var i = n.cache,
                    o = "" + (t ? t.apply(this, arguments) : r);
                return v.has(i, o) || (i[o] = e.apply(this, arguments)), i[o]
            };
            return n.cache = {}, n
        }, v.delay = function(e, t) {
            var n = u.call(arguments, 2);
            return setTimeout(function() {
                return e.apply(null, n)
            }, t)
        }, v.defer = v.partial(v.delay, v, 1), v.throttle = function(e, t, n) {
            var r, i, o, a = null,
                s = 0;
            n || (n = {});
            var l = function() {
                s = !1 === n.leading ? 0 : v.now(), a = null, o = e.apply(r, i), a || (r = i = null)
            };
            return function() {
                var c = v.now();
                s || !1 !== n.leading || (s = c);
                var u = t - (c - s);
                return r = this, i = arguments, u <= 0 || u > t ? (a && (clearTimeout(a), a = null), s = c, o = e.apply(r, i), a || (r = i = null)) : a || !1 === n.trailing || (a = setTimeout(l, u)), o
            }
        }, v.debounce = function(e, t, n) {
            var r, i, o, a, s, l = function() {
                var c = v.now() - a;
                c < t && c >= 0 ? r = setTimeout(l, t - c) : (r = null, n || (s = e.apply(o, i), r || (o = i = null)))
            };
            return function() {
                o = this, i = arguments, a = v.now();
                var c = n && !r;
                return r || (r = setTimeout(l, t)), c && (s = e.apply(o, i), o = i = null), s
            }
        }, v.wrap = function(e, t) {
            return v.partial(t, e)
        }, v.negate = function(e) {
            return function() {
                return !e.apply(this, arguments)
            }
        }, v.compose = function() {
            var e = arguments,
                t = e.length - 1;
            return function() {
                for (var n = t, r = e[t].apply(this, arguments); n--;) r = e[n].call(this, r);
                return r
            }
        }, v.after = function(e, t) {
            return function() {
                if (--e < 1) return t.apply(this, arguments)
            }
        }, v.before = function(e, t) {
            var n;
            return function() {
                return --e > 0 && (n = t.apply(this, arguments)), e <= 1 && (t = null), n
            }
        }, v.once = v.partial(v.before, 2);
        var D = !{
                toString: null
            }.propertyIsEnumerable("toString"),
            P = ["valueOf", "isPrototypeOf", "toString", "propertyIsEnumerable", "hasOwnProperty", "toLocaleString"];
        v.keys = function(e) {
            if (!v.isObject(e)) return [];
            if (f) return f(e);
            var t = [];
            for (var n in e) v.has(e, n) && t.push(n);
            return D && r(e, t), t
        }, v.allKeys = function(e) {
            if (!v.isObject(e)) return [];
            var t = [];
            for (var n in e) t.push(n);
            return D && r(e, t), t
        }, v.values = function(e) {
            for (var t = v.keys(e), n = t.length, r = Array(n), i = 0; i < n; i++) r[i] = e[t[i]];
            return r
        }, v.mapObject = function(e, t, n) {
            t = x(t, n);
            for (var r, i = v.keys(e), o = i.length, a = {}, s = 0; s < o; s++) r = i[s], a[r] = t(e[r], r, e);
            return a
        }, v.pairs = function(e) {
            for (var t = v.keys(e), n = t.length, r = Array(n), i = 0; i < n; i++) r[i] = [t[i], e[t[i]]];
            return r
        }, v.invert = function(e) {
            for (var t = {}, n = v.keys(e), r = 0, i = n.length; r < i; r++) t[e[n[r]]] = n[r];
            return t
        }, v.functions = v.methods = function(e) {
            var t = [];
            for (var n in e) v.isFunction(e[n]) && t.push(n);
            return t.sort()
        }, v.extend = w(v.allKeys), v.extendOwn = v.assign = w(v.keys), v.findKey = function(e, t, n) {
            t = x(t, n);
            for (var r, i = v.keys(e), o = 0, a = i.length; o < a; o++)
                if (r = i[o], t(e[r], r, e)) return r
        }, v.pick = function(e, t, n) {
            var r, i, o = {},
                a = e;
            if (null == a) return o;
            v.isFunction(t) ? (i = v.allKeys(a), r = b(t, n)) : (i = C(arguments, !1, !1, 1), r = function(e, t, n) {
                return t in n
            }, a = Object(a));
            for (var s = 0, l = i.length; s < l; s++) {
                var c = i[s],
                    u = a[c];
                r(u, c, a) && (o[c] = u)
            }
            return o
        }, v.omit = function(e, t, n) {
            if (v.isFunction(t)) t = v.negate(t);
            else {
                var r = v.map(C(arguments, !1, !1, 1), String);
                t = function(e, t) {
                    return !v.contains(r, t)
                }
            }
            return v.pick(e, t, n)
        }, v.defaults = w(v.allKeys, !0), v.create = function(e, t) {
            var n = _(e);
            return t && v.extendOwn(n, t), n
        }, v.clone = function(e) {
            return v.isObject(e) ? v.isArray(e) ? e.slice() : v.extend({}, e) : e
        }, v.tap = function(e, t) {
            return t(e), e
        }, v.isMatch = function(e, t) {
            var n = v.keys(t),
                r = n.length;
            if (null == e) return !r;
            for (var i = Object(e), o = 0; o < r; o++) {
                var a = n[o];
                if (t[a] !== i[a] || !(a in i)) return !1
            }
            return !0
        };
        var L = function(e, t, n, r) {
            if (e === t) return 0 !== e || 1 / e == 1 / t;
            if (null == e || null == t) return e === t;
            e instanceof v && (e = e._wrapped), t instanceof v && (t = t._wrapped);
            var i = p.call(e);
            if (i !== p.call(t)) return !1;
            switch (i) {
                case "[object RegExp]":
                case "[object String]":
                    return "" + e == "" + t;
                case "[object Number]":
                    return +e != +e ? +t != +t : 0 == +e ? 1 / +e == 1 / t : +e == +t;
                case "[object Date]":
                case "[object Boolean]":
                    return +e == +t
            }
            var o = "[object Array]" === i;
            if (!o) {
                if ("object" != typeof e || "object" != typeof t) return !1;
                var a = e.constructor,
                    s = t.constructor;
                if (a !== s && !(v.isFunction(a) && a instanceof a && v.isFunction(s) && s instanceof s) && "constructor" in e && "constructor" in t) return !1
            }
            n = n || [], r = r || [];
            for (var l = n.length; l--;)
                if (n[l] === e) return r[l] === t;
            if (n.push(e), r.push(t), o) {
                if ((l = e.length) !== t.length) return !1;
                for (; l--;)
                    if (!L(e[l], t[l], n, r)) return !1
            } else {
                var c, u = v.keys(e);
                if (l = u.length, v.keys(t).length !== l) return !1;
                for (; l--;)
                    if (c = u[l], !v.has(t, c) || !L(e[c], t[c], n, r)) return !1
            }
            return n.pop(), r.pop(), !0
        };
        v.isEqual = function(e, t) {
            return L(e, t)
        }, v.isEmpty = function(e) {
            return null == e || (I(e) && (v.isArray(e) || v.isString(e) || v.isArguments(e)) ? 0 === e.length : 0 === v.keys(e).length)
        }, v.isElement = function(e) {
            return !(!e || 1 !== e.nodeType)
        }, v.isArray = h || function(e) {
            return "[object Array]" === p.call(e)
        }, v.isObject = function(e) {
            var t = typeof e;
            return "function" === t || "object" === t && !!e
        }, v.each(["Arguments", "Function", "String", "Number", "Date", "RegExp", "Error"], function(e) {
            v["is" + e] = function(t) {
                return p.call(t) === "[object " + e + "]"
            }
        }), v.isArguments(arguments) || (v.isArguments = function(e) {
            return v.has(e, "callee")
        }), "function" != typeof /./ && "object" != typeof Int8Array && (v.isFunction = function(e) {
            return "function" == typeof e || !1
        }), v.isFinite = function(e) {
            return isFinite(e) && !isNaN(parseFloat(e))
        }, v.isNaN = function(e) {
            return v.isNumber(e) && e !== +e
        }, v.isBoolean = function(e) {
            return !0 === e || !1 === e || "[object Boolean]" === p.call(e)
        }, v.isNull = function(e) {
            return null === e
        }, v.isUndefined = function(e) {
            return void 0 === e
        }, v.has = function(e, t) {
            return null != e && d.call(e, t)
        }, v.noConflict = function() {
            return i._ = o, this
        }, v.identity = function(e) {
            return e
        }, v.constant = function(e) {
            return function() {
                return e
            }
        }, v.noop = function() {}, v.property = S, v.propertyOf = function(e) {
            return null == e ? function() {} : function(t) {
                return e[t]
            }
        }, v.matcher = v.matches = function(e) {
            return e = v.extendOwn({}, e),
                function(t) {
                    return v.isMatch(t, e)
                }
        }, v.times = function(e, t, n) {
            var r = Array(Math.max(0, e));
            t = b(t, n, 1);
            for (var i = 0; i < e; i++) r[i] = t(i);
            return r
        }, v.random = function(e, t) {
            return null == t && (t = e, e = 0), e + Math.floor(Math.random() * (t - e + 1))
        }, v.now = Date.now || function() {
            return (new Date).getTime()
        };
        var A = {
                "&": "&amp;",
                "<": "&lt;",
                ">": "&gt;",
                '"': "&quot;",
                "'": "&#x27;",
                "`": "&#x60;"
            },
            O = v.invert(A),
            F = function(e) {
                var t = function(t) {
                        return e[t]
                    },
                    n = "(?:" + v.keys(e).join("|") + ")",
                    r = RegExp(n),
                    i = RegExp(n, "g");
                return function(e) {
                    return e = null == e ? "" : "" + e, r.test(e) ? e.replace(i, t) : e
                }
            };
        v.escape = F(A), v.unescape = F(O), v.result = function(e, t, n) {
            var r = null == e ? void 0 : e[t];
            return void 0 === r && (r = n), v.isFunction(r) ? r.call(e) : r
        };
        var q = 0;
        v.uniqueId = function(e) {
            var t = ++q + "";
            return e ? e + t : t
        }, v.templateSettings = {
            evaluate: /<%([\s\S]+?)%>/g,
            interpolate: /<%=([\s\S]+?)%>/g,
            escape: /<%-([\s\S]+?)%>/g
        };
        var N = /(.)^/,
            R = {
                "'": "'",
                "\\": "\\",
                "\r": "r",
                "\n": "n",
                "\u2028": "u2028",
                "\u2029": "u2029"
            },
            B = /\\|'|\r|\n|\u2028|\u2029/g,
            j = function(e) {
                return "\\" + R[e]
            };
        v.template = function(e, t, n) {
            !t && n && (t = n), t = v.defaults({}, t, v.templateSettings);
            var r = RegExp([(t.escape || N).source, (t.interpolate || N).source, (t.evaluate || N).source].join("|") + "|$", "g"),
                i = 0,
                o = "__p+='";
            e.replace(r, function(t, n, r, a, s) {
                return o += e.slice(i, s).replace(B, j), i = s + t.length, n ? o += "'+\n((__t=(" + n + "))==null?'':_.escape(__t))+\n'" : r ? o += "'+\n((__t=(" + r + "))==null?'':__t)+\n'" : a && (o += "';\n" + a + "\n__p+='"), t
            }), o += "';\n", t.variable || (o = "with(obj||{}){\n" + o + "}\n"), o = "var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n" + o + "return __p;\n";
            try {
                var a = new Function(t.variable || "obj", "_", o)
            } catch (e) {
                throw e.source = o, e
            }
            var s = function(e) {
                return a.call(this, e, v)
            };
            return s.source = "function(" + (t.variable || "obj") + "){\n" + o + "}", s
        }, v.chain = function(e) {
            var t = v(e);
            return t._chain = !0, t
        };
        var V = function(e, t) {
            return e._chain ? v(t).chain() : t
        };
        v.mixin = function(e) {
            v.each(v.functions(e), function(t) {
                var n = v[t] = e[t];
                v.prototype[t] = function() {
                    var e = [this._wrapped];
                    return c.apply(e, arguments), V(this, n.apply(v, e))
                }
            })
        }, v.mixin(v), v.each(["pop", "push", "reverse", "shift", "sort", "splice", "unshift"], function(e) {
            var t = a[e];
            v.prototype[e] = function() {
                var n = this._wrapped;
                return t.apply(n, arguments), "shift" !== e && "splice" !== e || 0 !== n.length || delete n[0], V(this, n)
            }
        }), v.each(["concat", "join", "slice"], function(e) {
            var t = a[e];
            v.prototype[e] = function() {
                return V(this, t.apply(this._wrapped, arguments))
            }
        }), v.prototype.value = function() {
            return this._wrapped
        }, v.prototype.valueOf = v.prototype.toJSON = v.prototype.value, v.prototype.toString = function() {
            return "" + this._wrapped
        }, "function" == typeof define && define.amd && define("underscore", [], function() {
            return v
        })
    }.call(this), define("lib/inject-css", ["require", "underscore"], function(e) {
        function t(e, t) {
            var o = r[e];
            if (!o) {
                o = document.createElement("style"), r[e] = o;
                var a = n.sortedIndex(i, e),
                    s = r[i[a]];
                s ? document.head.insertBefore(o, s) : document.head.appendChild(o), i.splice(a, 0, e)
            }
            o.textContent = t
        }
        var n = e("underscore"),
            r = {},
            i = [];
        return t
    }), define("vendor/css", {}), define("lib/prefix-css", ["require", "vendor/css"], function(e) {
        function t(e, t) {
            if (t) {
                var i = "." + t;
                return n(i), r(e, i)
            }
            return e
        }

        function n(e) {
            if (!/\.-?[_a-zA-Z]+[_a-zA-Z0-9-]*/.test(e)) throw new Error("Illegal css selector prefix " + e)
        }

        function r(e, t) {
            var n = s.parse(e),
                r = Object.assign({}, n, {
                    stylesheet: i(n.stylesheet, t)
                });
            return s.stringify(r)
        }

        function i(e, t) {
            return Object.assign({}, e, {
                rules: o(e.rules, t)
            })
        }

        function o(e, t) {
            return e.map(function(e) {
                return e.rules ? Object.assign({}, e, {
                    rules: o(e.rules, t)
                }) : e.selectors ? Object.assign({}, e, {
                    selectors: a(e.selectors, t)
                }) : e
            })
        }

        function a(e, t) {
            for (var n = [], r = 0; r < e.length; r++) {
                var i = e[r];
                if ("html" === i) n.push(i);
                else if (/dcg(-mq)?-aria-alert/.test(i)) n.push(i);
                else if (/^html body( |$)/.test(i)) n.push("html" + t + " body" + i.slice("html body".length)), n.push("html body " + t + i.slice("html body".length));
                else {
                    if (/^html/.test(i)) throw new Error("Cannot correctly prefix selector " + i);
                    n.push(t + " " + i)
                }
            }
            return n
        }
        var s = e("vendor/css");
        return t
    }), define("loadcss", {
        load: function(e) {
            throw new Error("Dynamic load not allowed: " + e)
        }
    }), define("loadcss!touchtracking", function() {}), define("touchtracking", ["require", "jquery", "ipad.ghostevents", "keys", "loadcss!./touchtracking"], function(e) {
        function t(e, t) {
            var r = q ? {
                passive: !1
            } : void 0;
            document.addEventListener(e, function(e) {
                t(n.event.fix(e))
            }, r)
        }
        var n = e("jquery"),
            r = e("ipad.ghostevents"),
            i = e("keys");
        e("loadcss!./touchtracking"), void 0 == window._touchtracking_id_counter && (window._touchtracking_id_counter = 0), window._touchtracking_id_counter += 1;
        var o = "touchtracking_id_" + window._touchtracking_id_counter,
            a = function(e) {
                n(e).addClass("dcg-tap-container"), n(e).addClass(o)
            },
            s = function(e) {
                n(e).addClass("dcg-no-touchtracking")
            };
        r.evtInScope = function(e) {
            return S(e.target)
        }, r.isGhostEvent = function(e) {
            return !window.PointerEvent && (!(u !== l && u !== c && !I()) && (e.target !== g && ((!e.target || !n.contains(e.target, g)) && (!g || !n.contains(g, e.target)))))
        };
        var l = 1,
            c = 4,
            u = 0,
            p = {},
            d = {},
            h = [],
            f = 0,
            m = null,
            g = null,
            y = null,
            v = [],
            b = function(e) {
                for (var t = []; e;) t.push(e), e = e.parentNode;
                return t
            },
            x = function(e) {
                for (var t = [], r = 0; r < e.length; r++) {
                    var i = e[r];
                    if (t.push(i), n(i).is(".dcg-tap-container, .dcg-no-touchtracking")) return n(i).is(".dcg-tap-container." + o) ? t : []
                }
                return []
            },
            w = function(e, t) {
                g = null, u = e, h = b(u === l ? t.originalEvent.touches[0].target : t.target), n(x(h)).addClass("dcg-depressed").each(function() {
                    var e = n(this);
                    E(e) && e.addClass("dcg-focus-by-tap")
                }), n(h).each(function() {
                    var e = n(this);
                    e.data({
                        originalScrollTop: e.scrollTop(),
                        originalScrollLeft: e.scrollLeft()
                    })
                }), d = {}
            },
            _ = function(e) {
                return e.is("input, textarea, select") || e.hasClass("dcg-mathquill-input-span")
            },
            S = function(e) {
                return !!n(e).closest(".dcg-tap-container, .dcg-no-touchtracking").is(".dcg-tap-container." + o)
            },
            E = function(e) {
                return 3 !== u && !_(e) && S(e)
            },
            M = function(e) {
                g = null, n(".dcg-depressed").removeClass("dcg-depressed");
                var t = n(document.activeElement);
                if (E(t)) try {
                    t.blur()
                } catch (e) {}
                if (n(".dcg-focus-by-tap").removeClass("dcg-focus-by-tap"), n(h).each(function() {
                        var e = n(this),
                            t = e.data("originalScrollTop") - e.scrollTop(),
                            r = e.data("originalScrollLeft") - e.scrollLeft();
                        (t || r) && (d.scroll = !0)
                    }), 1 === d["dcg-tapstart"] && 1 === d["dcg-tapend"] && !d["dcg-tapcancel"] && !d.scroll) {
                    var r = "mouse" === e.device ? e.clientX : e.originalEvent.changedTouches[0].clientX,
                        i = "mouse" === e.device ? e.clientY : e.originalEvent.changedTouches[0].clientY;
                    if (e && !e.device && 0 === r && 0 === i) {
                        var o = e.target.getBoundingClientRect();
                        r = (o.left + o.right) / 2, i = (o.top + o.bottom) / 2, e.device = "keyboard"
                    }
                    for (var a = !1, s = 0; s < h.length && !a; s++) {
                        var p, y = n(h[s]);
                        if ("function" == typeof y[0].getBoundingClientRect && (p = y[0].getBoundingClientRect()), "true" === y.attr("tapboundary") && (a = !0), p) {
                            if (r < p.left || i < p.top) continue;
                            if (r > p.right) continue;
                            if (i > p.bottom) continue
                        }
                        g = y[0], C("dcg-tap", e, g);
                        break
                    }
                }
                u !== l && u !== c || (m = setTimeout(function() {
                    m = null, f = (new Date).getTime()
                }, 1e3)), h = [], u = 0
            },
            I = function() {
                return m || (new Date).getTime() - f < 500
            },
            T = function(e) {
                for (var t = [], n = 0; n < e.length; n++) {
                    var r = e[n];
                    t.push({
                        identifier: r.identifier,
                        x: r.pageX,
                        y: r.pageY,
                        screenX: r.screenX,
                        screenY: r.screenY,
                        pageX: r.pageX,
                        pageY: r.pageY,
                        clientX: r.clientX,
                        clientY: r.clientY
                    })
                }
                return t
            },
            C = function(e, t, r) {
                if ("dcg-tapstart" === e) p[t.identifier] = {
                    type: e,
                    pageX: t.originalEvent.changedTouches[0].pageX,
                    pageY: t.originalEvent.changedTouches[0].pageY
                };
                else if ("dcg-tapmove" === e) {
                    var i = t.originalEvent.changedTouches[0],
                        o = p[t.identifier];
                    if (o && i.pageX === o.pageX && i.pageY === o.pageY) return;
                    if ((u === l || u === c) && o && "dcg-tapstart" === o.type && Math.abs(o.pageX - i.pageX) + Math.abs(o.pageY - i.pageY) < 2) return;
                    p[t.identifier] = {
                        type: e,
                        pageX: t.originalEvent.changedTouches[0].pageX,
                        pageY: t.originalEvent.changedTouches[0].pageY
                    }
                }
                void 0 === d[e.toLowerCase()] ? d[e.toLowerCase()] = 1 : d[e.toLowerCase()]++;
                var a = n.event.fix(t.originalEvent);
                a.type = e, a.device = u === l || u === c ? "touch" : 3 === u ? "keyboard" : "mouse", a.touches = T(t.originalEvent.touches), a.changedTouches = T(t.originalEvent.changedTouches), a.target = r || t.target;
                var s = "keyboard" !== a.device && d["dcg-longhold"] > 0;
                a.wasLongheld = function() {
                    return s
                }, a.preventTap = function() {
                    d["dcg-tapcancel"] = 1
                }, clearTimeout(y), "dcg-tapstart" === a.type && "keyboard" !== a.device && 1 === a.touches.length && (y = setTimeout(function() {
                    C("dcg-longhold", t, r)
                }, 500)), n(a.target).trigger(a)
            },
            k = function(e) {
                var t = h,
                    r = !!h.length,
                    i = n(".dcg-tap-container." + o + " .dcg-hovered"),
                    a = n.makeArray(i.filter(function() {
                        return S(this)
                    })),
                    s = [],
                    l = [],
                    c = [];
                x(b(e)).forEach(function(e) {
                    r && -1 === t.indexOf(e) || (-1 === a.indexOf(e) && c.push(e), s.push(e))
                });
                for (var u = 0; u < a.length; u++) e = a[u], -1 === s.indexOf(e) && l.push(e);
                n(l).removeClass("dcg-hovered").trigger("tipsyhide"), n(c).addClass("dcg-hovered").trigger("tipsyshow")
            },
            D = function(e) {
                for (var t = 0; t < v.length; t++)
                    if (v[t].pointerId === e) return !0;
                return !1
            },
            P = function(e) {
                for (var t = 0; t < v.length; t++)
                    if (v[t].pointerId === e) return v.splice(t, 1)[0]
            },
            L = function(e) {
                0 === u && w(c, e), k(null), v.push(e.originalEvent), e.originalEvent.identifier = e.originalEvent.pointerId, e.originalEvent.touches = v, e.originalEvent.changedTouches = [e.originalEvent], C("dcg-tapstart", e)
            },
            A = function(e) {
                P(e.originalEvent.pointerId), e.originalEvent.identifier = e.originalEvent.pointerId, e.originalEvent.touches = v, e.originalEvent.changedTouches = [e.originalEvent], C("dcg-tapcancel", e), 0 === v.length && M(e)
            },
            O = function(e) {
                P(e.originalEvent.pointerId), e.originalEvent.identifier = e.originalEvent.pointerId, e.originalEvent.touches = v, e.originalEvent.changedTouches = [e.originalEvent], C("dcg-tapend", e), 0 === v.length && M(e)
            },
            F = function(e) {
                return "touch" === e.originalEvent.pointerType || 2 === e.originalEvent.pointerType
            };
        n(document).on("pointerdown MSPointerDown", function(e) {
            2 !== u && u !== l && F(e) && (D(e.originalEvent.pointerId) || L(e))
        }), n(document).on("pointermove MSPointerMove", function(e) {
            2 !== u && u !== l && F(e) && (D(e.originalEvent.pointerId) || L(e), P(e.originalEvent.pointerId), v.push(e.originalEvent), e.originalEvent.identifier = e.originalEvent.pointerId, e.originalEvent.touches = v, e.originalEvent.changedTouches = [e.originalEvent], C("dcg-tapmove", e))
        }), n(document).on("pointercancel MSPointerCancel", function(e) {
            if (u === c && F(e) && D(e.originalEvent.pointerId)) {
                A(e);
                for (var t; t = v.pop();) {
                    var e = n.Event(t, {
                        originalEvent: t
                    });
                    A(e)
                }
            }
        }), n(document).on("pointerup MSPointerUp", function(e) {
            if (u === c && F(e) && D(e.originalEvent.pointerId)) {
                O(e);
                for (var t; t = v.pop();) {
                    var e = n.Event(t, {
                        originalEvent: t
                    });
                    O(e)
                }
            }
        });
        var q = function() {
            var e = !1;
            try {
                var t = Object.defineProperty({}, "passive", {
                    get: function() {
                        e = !0
                    }
                });
                window.addEventListener("test", function() {}, t), window.removeEventListener("test", function() {}, t)
            } catch (e) {}
            return e
        }();
        return t("touchstart", function(e) {
            2 !== u && u !== c && (0 === u && w(l, e), k(null), C("dcg-tapstart", e))
        }), t("touchmove", function(e) {
            u === l && C("dcg-tapmove", e)
        }), t("touchcancel", function(e) {
            u === l && (C("dcg-tapcancel", e), 0 === e.originalEvent.touches.length && M(e))
        }), t("touchend", function(e) {
            u === l && (C("dcg-tapend", e), 0 === e.originalEvent.touches.length && M(e))
        }), n(document).on("mousedown", function(e) {
            if (1 !== e.button && 2 !== e.button) {
                if (u === l || u === c || I()) return void(!n(e.target).is("input, textarea, select") && S(e.target) && e.preventDefault());
                w(2, e), e.originalEvent.touches = [e], e.originalEvent.changedTouches = [e], C("dcg-tapstart", e)
            }
        }), n(document).ready(function() {
            n(document).on("mousedown", function(e) {
                var t = !!n(e.target).closest(".dcg-do-not-blur").length,
                    r = !!n(e.target).closest(".dcg-do-blur").length;
                if (t && !r && S(e.target)) {
                    e.preventDefault();
                    try {
                        var i = window.getSelection();
                        if (1 === i.rangeCount) {
                            var o = i.getRangeAt(0);
                            o.startContainer === o.endContainer && n(o.startContainer).closest(".dcg-text-selectable").length && i.removeAllRanges()
                        }
                    } catch (e) {}
                }
            })
        }), n(document).on("mouseleave", function(e) {
            0 === u && (I() || k(null))
        }), n(document).on("mousemove", function(e) {
            1 !== e.button && 2 !== e.button && u !== l && u !== c && (I() || (k(e.target), e.originalEvent.touches = [e], e.originalEvent.changedTouches = [e], C("dcg-tapmove", e)))
        }), n(document).on("mouseup", function(e) {
            1 !== e.button && 2 !== e.button && 2 === u && (e.originalEvent.touches = [], e.originalEvent.changedTouches = [e], C("dcg-tapend", e), M(e))
        }), n(document).on("keydown", function(e) {
            if ((i.lookup(e) === i.ENTER || i.lookup(e) === i.SPACEBAR) && S(e.target) && 3 !== u) {
                if (n(e.target).is('a:not([ontap]), button, input, textarea, select, [contenteditable="true"]')) return;
                e.preventDefault(), w(3, e), e.originalEvent.touches = [e], e.originalEvent.changedTouches = [e], C("dcg-tapstart", e)
            }
        }), n(document).on("keyup", function(e) {
            i.lookup(e) !== i.ENTER && i.lookup(e) !== i.SPACEBAR || !S(e.target) || 3 === u && (e.originalEvent.touches = [], e.originalEvent.changedTouches = [e], C("dcg-tapend", e), M(e))
        }), {
            monitor: a,
            ignore: s,
            isTapActive: function() {
                return 0 !== u
            },
            elIsFocusable: _
        }
    }), define("browser", ["require", "jquery"], function(e) {
        var t = e("jquery"),
            n = {
                IS_IE8: null !== navigator.userAgent.match(/MSIE 8.0/i),
                IS_IE9: null !== navigator.userAgent.match(/MSIE 9.0/i),
                IS_IE: null !== navigator.userAgent.match(/MSIE/i),
                IS_EDGE: null !== navigator.userAgent.match(/Edge/i),
                IS_IPAD: null !== navigator.userAgent.match(/iPad/i),
                IS_MOBILE: null !== navigator.userAgent.match(/Mobile|Android/i),
                IS_ANDROID: null !== navigator.userAgent.match(/Android/i),
                IS_IOS: null !== navigator.userAgent.match(/(iPad|iPhone|iPod)/i),
                IS_CHROME: null !== navigator.userAgent.match(/Chrome/i),
                IS_FIREFOX: null !== navigator.userAgent.match(/Firefox/i),
                IS_SAFARI: null !== navigator.userAgent.match(/^((?!chrome|android).)*safari/i),
                IS_APPLE: null !== navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i),
                IS_WINDOWS: null !== navigator.platform.match(/(Win32)/i),
                IS_TOUCH: null !== navigator.userAgent.match(/Touch/i),
                IS_KINDLE: null !== navigator.userAgent.match(/Kindle/i) || null !== navigator.userAgent.match(/Silk/i),
                IS_BRAILLENOTE: null !== navigator.userAgent.match(/KeyWeb/i),
                IS_IN_IFRAME: window.parent !== window
            };
        return n.IS_TABLET = n.IS_IPAD || n.IS_ANDROID || n.IS_KINDLE, n.IS_TOUCH_DEVICE = n.SHOULD_NOT_AUTOFOCUS = n.IS_IOS || n.IS_ANDROID || navigator.userAgent.match(/webOS/i) || navigator.userAgent.match(/BlackBerry/i) || navigator.userAgent.match(/Windows Phone/i), n.IOS_VERSION = function() {
            var e = navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);
            return e ? [parseInt(e[1], 10), parseInt(e[2], 10), parseInt(e[3] || 0, 10)] : null
        }(), n.SUPPORTS_TRANSLATE3D = !1, t(document).ready(function() {
            var e, t, r = document.createElement("p"),
                i = {
                    webkitTransform: "-webkit-transform",
                    OTransform: "-o-transform",
                    msTransform: "-ms-transform",
                    MozTransform: "-moz-transform",
                    transform: "transform"
                };
            document.body.insertBefore(r, null);
            for (var o in i)
                if (void 0 !== r.style[o]) {
                    if (r.style[o] = "translate3d(1px,1px,1px)", !(t = window.getComputedStyle(r))) return;
                    e = t.getPropertyValue(i[o])
                } document.body.removeChild(r), n.SUPPORTS_TRANSLATE3D = void 0 !== e && e.length > 0 && "none" !== e
        }), n.translateRule = function(e, t) {
            return n.SUPPORTS_TRANSLATE3D ? "translate3d(" + e + (e ? "px" : "") + "," + t + (t ? "px" : "") + ",0)" : "translate(" + e + (e ? "px" : "") + "," + t + (t ? "px" : "") + ")"
        }, n.SUPPORTS_CANVAS = function() {
            var e = document.createElement("canvas");
            return !(!e.getContext || !e.getContext("2d"))
        }(), n
    }),
    function() {
        function e() {}

        function t(e) {
            var t = x.call(arguments, 1);
            return function() {
                return e.apply(this, t)
            }
        }

        function n(e, t) {
            if (!t) throw new Error("prayer failed: " + e)
        }

        function r(e) {
            n("a direction was passed", e === _ || e === S)
        }

        function i() {
            T || (T = !0, setTimeout(o))
        }

        function o() {
            T = !1, I = {}
        }

        function a(e, t) {
            var n = e[_];
            if (n)
                for (; n !== e[S][S]; n = n[S]) {
                    var r = t(n);
                    if (!1 === r) break
                }
        }

        function s(e, t, n) {
            var r = e[_];
            if (!r) return t;
            for (; r !== e[S][S]; r = r[S]) t = n(t, r);
            return t
        }

        function l(e, t, r) {
            n("a parent is always present", e), n("leftward is properly set up", function() {
                return t ? t[S] === r && t.parent === e : e.ends[_] === r
            }()), n("rightward is properly set up", function() {
                return r ? r[_] === t && r.parent === e : e.ends[S] === t
            }())
        }

        function c() {
            window.console && console.warn('You are using the MathQuill API without specifying an interface version, which will fail in v1.0.0. Easiest fix is to do the following before doing anything else:\n\n    MathQuill = MathQuill.getInterface(1);\n    // now MathQuill.MathField() works like it used to\n\nSee also the "`dev` branch (2014–2015) → v0.10.0 Migration Guide" at\n  https://github.com/mathquill/mathquill/wiki/%60dev%60-branch-(2014%E2%80%932015)-%E2%86%92-v0.10.0-Migration-Guide')
        }

        function u(e) {
            return c(), Ae(e)
        }

        function p(t) {
            function n(e) {
                if (!e || !e.nodeType) return null;
                var t = C.getNodeOfElement(E(e).children(".dcg-mq-root-block")[0]),
                    n = t && t.controller;
                return n ? i[n.KIND_OF_MQ](n) : null
            }

            function r(e, t) {
                t && t.handlers && (t.handlers = {
                    fns: t.handlers,
                    APIClasses: i
                });
                for (var n in t)
                    if (t.hasOwnProperty(n)) {
                        var r = t[n],
                            o = N[n];
                        e[n] = o ? o(r) : r
                    }
            }
            if (!(j <= t && t <= V)) throw "Only interface versions between " + j + " and " + V + " supported. You specified: " + t;
            var i = {};
            n.L = _, n.R = S, n.saneKeyboardEvents = U, n.config = function(e) {
                return r(q.p, e), this
            }, n.registerEmbed = function(e, t) {
                if (!/^[a-z][a-z0-9]*$/i.test(e)) throw "Embed name must start with letter and be only letters and digits";
                B[e] = t
            };
            var o = i.AbstractMathQuill = w(R, function(e) {
                e.init = function(e) {
                    this.__controller = e, this.__options = e.options, this.id = e.id, this.data = e.data
                }, e.__mathquillify = function(e) {
                    var t = this.__controller,
                        n = t.root,
                        r = t.container;
                    t.createTextarea();
                    var i = r.addClass(e).contents().detach();
                    n.jQ = E('<span class="dcg-mq-root-block"/>').appendTo(r), C.linkElementByBlockId(n.jQ[0], n.id), this.latex(i.text()), this.revert = function() {
                        return r.empty().unbind(".mathquill").removeClass("dcg-mq-editable-field dcg-mq-math-mode dcg-mq-text-mode").append(i)
                    }
                }, e.config = function(e) {
                    return r(this.__options, e), this
                }, e.el = function() {
                    return this.__controller.container[0]
                }, e.text = function() {
                    return this.__controller.exportText()
                }, e.mathspeak = function() {
                    return this.__controller.exportMathSpeak()
                }, e.latex = function(e) {
                    return arguments.length > 0 ? (this.__controller.renderLatexMath(e), this.__controller.blurred && this.__controller.cursor.hide().parent.blur(), this) : this.__controller.exportLatex()
                }, e.html = function() {
                    return this.__controller.root.jQ.html().replace(/ mathquill-(?:command|block)-id="?\d+"?/g, "").replace(/<span class="?dcg-mq-cursor( dcg-mq-blink)?"?>.?<\/span>/i, "").replace(/ dcg-mq-hasCursor|dcg-mq-hasCursor ?/, "").replace(/ class=(""|(?= |>))/g, "")
                }, e.reflow = function() {
                    return this.__controller.root.postOrder(function(e) {
                        e.reflow()
                    }), this
                }
            });
            n.prototype = o.prototype, i.EditableField = w(o, function(t, n) {
                t.__mathquillify = function() {
                    return n.__mathquillify.apply(this, arguments), this.__controller.editable = !0, this.__controller.delegateMouseEvents(), this.__controller.editablesTextareaEvents(), this
                }, t.focus = function() {
                    return this.__controller.textarea.focus(), this.__controller.scrollHoriz(), this
                }, t.blur = function() {
                    return this.__controller.textarea.blur(), this
                }, t.write = function(e) {
                    return this.__controller.writeLatex(e), this.__controller.scrollHoriz(), this.__controller.blurred && this.__controller.cursor.hide().parent.blur(), this
                }, t.cmd = function(e) {
                    var t = this.__controller.notify(),
                        n = t.cursor;
                    if (/^\\[a-z]+$/i.test(e)) {
                        e = e.slice(1);
                        var r = D[e];
                        r && (e = r(e), n.selection && e.replaces(n.replaceSelection()), e.createLeftOf(n.show()))
                    } else n.parent.write(n, e);
                    return t.scrollHoriz(), t.blurred && n.hide().parent.blur(), this
                }, t.select = function() {
                    var e = this.__controller;
                    for (e.notify("move").cursor.insAtRightEnd(e.root); e.cursor[_];) e.selectLeft();
                    return this
                }, t.clearSelection = function() {
                    return this.__controller.cursor.clearSelection(), this
                }, t.moveToDirEnd = function(e) {
                    return this.__controller.notify("move").cursor.insAtDirEnd(e, this.__controller.root), this
                }, t.moveToLeftEnd = function() {
                    return this.moveToDirEnd(_)
                }, t.moveToRightEnd = function() {
                    return this.moveToDirEnd(S)
                }, t.keystroke = function(t, n) {
                    for (var t = t.replace(/^\s+|\s+$/g, "").split(/\s+/), r = 0; r < t.length; r += 1) this.__controller.keystroke(t[r], n || {
                        preventDefault: e
                    });
                    return this
                }, t.typedText = function(e) {
                    for (var t = 0; t < e.length; t += 1) this.__controller.typedText(e.charAt(t));
                    return this
                }, t.dropEmbedded = function(e, t, n) {
                    var r = e - E(window).scrollLeft(),
                        i = t - E(window).scrollTop(),
                        o = document.elementFromPoint(r, i);
                    this.__controller.seek(E(o), e, t), Le().setOptions(n).createLeftOf(this.__controller.cursor)
                }, t.setAriaLabel = function(e) {
                    return this.__controller.ariaLabel = e && "string" == typeof e && "" != e ? e : "Math Input", this
                }, t.getAriaLabel = function() {
                    return this.__controller.ariaLabel || "Math Input"
                }, t.setAriaPostLabel = function(e, t) {
                    var n = this.__controller;
                    return e && "string" == typeof e && "" != e ? (e !== n.ariaPostLabel && "number" == typeof t && (this.ariaAlertTimeout && clearTimeout(this.ariaAlertTimeout), this.ariaAlertTimeout = setTimeout(function() {
                        E(document.activeElement).closest(E(n.container)).length && W.alert(this.mathspeak().trim() + " " + e.trim())
                    }.bind(this), t)), n.ariaPostLabel = e) : (this.ariaAlertTimeout && clearTimeout(this.ariaAlertTimeout), n.ariaPostLabel = ""), this
                }, t.getAriaPostLabel = function() {
                    return this.__controller.ariaPostLabel || ""
                }, t.clickAt = function(e, t, n) {
                    n = n || document.elementFromPoint(e, t);
                    var r = this.__controller,
                        i = r.root;
                    return y.contains(i.jQ[0], n) || (n = i.jQ[0]), r.seek(E(n), e + pageXOffset, t + pageYOffset), r.blurred && this.focus(), this
                }, t.ignoreNextMousedown = function(e) {
                    return this.__controller.cursor.options.ignoreNextMousedown = e, this
                }
            }), n.EditableField = function() {
                throw "wtf don't call me, I'm 'abstract'"
            }, n.EditableField.prototype = i.EditableField.prototype;
            for (var a in F) ! function(e, r) {
                var o = i[e] = r(i);
                n[e] = function(r, i) {
                    var a = n(r);
                    if (a instanceof o || !r || !r.nodeType) return a;
                    var s = O(o.RootBlock(), E(r), q());
                    return s.KIND_OF_MQ = e, o(s).__mathquillify(i, t)
                }, n[e].prototype = o.prototype
            }(a, F[a]);
            return n
        }

        function d(e) {
            for (var t = "moveOutOf deleteOutOf selectOutOf upOutOf downOutOf".split(" "), n = 0; n < t.length; n += 1) ! function(t) {
                e[t] = function(e) {
                    this.controller.handle(t, e)
                }
            }(t[n]);
            e.reflow = function() {
                this.controller.handle("reflow"), this.controller.handle("edited"), this.controller.handle("edit")
            }
        }

        function h(e) {
            var t = this.parent,
                n = e;
            do {
                if (n[S]) return e.insLeftOf(t);
                n = n.parent.parent
            } while (n !== t);
            e.insRightOf(t)
        }

        function f(e, t) {
            e.jQadd = function() {
                t.jQadd.apply(this, arguments), this.delimjQs = this.jQ.children(":first").add(this.jQ.children(":last")), this.contentjQ = this.jQ.children(":eq(1)")
            }
        }

        function m(e, n, r) {
            var n = n || e,
                i = ke[e],
                o = ke[n];
            P[e] = t(Ce, _, e, i, n, o), P[i] = t(Ce, S, e, i, n, o), De[e] = De[i] = r
        }
        var g, y = window.jQuery,
            v = Math.min,
            b = Math.max;
        if (!y) throw "MathQuill requires jQuery 1.5.2+ to be loaded first";
        var x = [].slice,
            w = function(e, t, n) {
                function r(e) {
                    return "object" == typeof e
                }

                function i(e) {
                    return "function" == typeof e
                }

                function o() {}
                return function e(n, a) {
                    function s() {
                        var e = new l;
                        return i(e.init) && e.init.apply(e, arguments), e
                    }

                    function l() {}
                    void 0 === a && (a = n, n = Object), s.Bare = l;
                    var c, u = o.prototype = n.prototype,
                        p = l.prototype = s.prototype = s.p = new o;
                    return p.constructor = s, s.extend = function(t) {
                        return e(s, t)
                    }, (s.open = function(e) {
                        if (c = {}, i(e) ? c = e.call(s, p, u, s, n) : r(e) && (c = e), r(c))
                            for (var o in c) t.call(c, o) && (p[o] = c[o]);
                        return i(p.init) || (p.init = n), s
                    })(a)
                }
            }(0, {}.hasOwnProperty),
            _ = -1,
            S = 1,
            E = w(y, function(e) {
                e.insDirOf = function(e, t) {
                    return e === _ ? this.insertBefore(t.first()) : this.insertAfter(t.last())
                }, e.insAtDirEnd = function(e, t) {
                    return e === _ ? this.prependTo(t) : this.appendTo(t)
                }
            }),
            M = w(function(e) {
                e.parent = 0, e[_] = 0, e[S] = 0, e.init = function(e, t, n) {
                    this.parent = e, this[_] = t, this[S] = n
                }, this.copy = function(e) {
                    return M(e.parent, e[_], e[S])
                }
            }),
            I = {},
            T = !1,
            C = w(function(e) {
                function t() {
                    return n += 1
                }
                e[_] = 0, e[S] = 0, e.parent = 0;
                var n = 0;
                this.getNodeOfElement = function(e) {
                    if (e) {
                        if (!e.nodeType) throw new Error("must pass an HTMLElement to Node.getNodeOfElement");
                        return e.mqBlockNode || e.mqCmdNode
                    }
                }, this.linkElementByBlockId = function(e, t) {
                    C.linkElementByBlockNode(e, I[t])
                }, this.linkElementByBlockNode = function(e, t) {
                    e.mqBlockNode = t
                }, this.linkElementByCmdNode = function(e, t) {
                    e.mqCmdNode = t
                }, e.init = function() {
                    this.id = t(), I[n] = this, i(),
                        this.ends = {}, this.ends[_] = 0, this.ends[S] = 0
                }, e.toString = function() {
                    return "{{ MathQuill Node #" + this.id + " }}"
                }, e.jQ = E(), e.jQadd = function(e) {
                    return this.jQ = this.jQ.add(e)
                }, e.jQize = function(e) {
                    function t(e) {
                        if (e.getAttribute) {
                            var n = e.getAttribute("mathquill-command-id");
                            if (n) {
                                e.removeAttribute("mathquill-command-id");
                                var r = I[n];
                                r.jQadd(e), C.linkElementByCmdNode(e, r)
                            }
                            var i = e.getAttribute("mathquill-block-id");
                            if (i) {
                                e.removeAttribute("mathquill-block-id");
                                var o = I[i];
                                o.jQadd(e), C.linkElementByBlockNode(e, o)
                            }
                        }
                        for (e = e.firstChild; e; e = e.nextSibling) t(e)
                    }
                    for (var e = E(e || this.html()), n = 0; n < e.length; n += 1) t(e[n]);
                    return e
                }, e.createDir = function(e, t) {
                    r(e);
                    var n = this;
                    return n.jQize(), n.jQ.insDirOf(e, t.jQ), t[e] = n.adopt(t.parent, t[_], t[S]), n
                }, e.createLeftOf = function(e) {
                    return this.createDir(_, e)
                }, e.selectChildren = function(e, t) {
                    return A(e, t)
                }, e.bubble = function(e) {
                    for (var t = this; t; t = t.parent) {
                        if (!1 === e(t)) break
                    }
                    return this
                }, e.postOrder = function(e) {
                    return function t(n) {
                        n.eachChild(t), e(n)
                    }(this), this
                }, e.isEmpty = function() {
                    return 0 === this.ends[_] && 0 === this.ends[S]
                }, e.isEmptyParens = function() {
                    return !!this.isEmpty() && (!!this.parent && "\\left(" === this.parent.ctrlSeq)
                }, e.isStyleBlock = function() {
                    return !1
                }, e.children = function() {
                    return k(this.ends[_], this.ends[S])
                }, e.eachChild = function(e) {
                    return a(this.ends, e), this
                }, e.foldChildren = function(e, t) {
                    return s(this.ends, e, t)
                }, e.withDirAdopt = function(e, t, n, r) {
                    return k(this, this).withDirAdopt(e, t, n, r), this
                }, e.adopt = function(e, t, n) {
                    return k(this, this).adopt(e, t, n), this
                }, e.disown = function() {
                    return k(this, this).disown(), this
                }, e.remove = function() {
                    return this.jQ.remove(), this.disown()
                }, e.isParentSimpleSubscript = function() {
                    return !!this.parent && (this.parent.parent instanceof we && !!this.parent.jQ.hasClass("dcg-mq-sub"))
                }, e.finalizeTree = function() {}, e.contactWeld = function() {}, e.blur = function() {}, e.intentionalBlur = function() {}, e.reflow = function() {}, e.registerInnerField = function() {}
            }),
            k = w(function(e) {
                e.init = function(e, t, i) {
                    if (i === g && (i = _), r(i), n("no half-empty fragments", !e == !t), this.ends = {}, e) {
                        n("withDir is passed to Fragment", e instanceof C), n("oppDir is passed to Fragment", t instanceof C), n("withDir and oppDir have the same parent", e.parent === t.parent), this.ends[i] = e, this.ends[-i] = t;
                        var o = this.fold([], function(e, t) {
                            return e.push.apply(e, t.jQ.get()), e
                        });
                        this.jQ = this.jQ.add(o)
                    }
                }, e.jQ = E(), e.withDirAdopt = function(e, t, n, r) {
                    return e === _ ? this.adopt(t, n, r) : this.adopt(t, r, n)
                }, e.adopt = function(e, t, n) {
                    l(e, t, n);
                    var r = this;
                    r.disowned = !1;
                    var i = r.ends[_];
                    if (!i) return this;
                    var o = r.ends[S];
                    return t || (e.ends[_] = i), n ? n[_] = o : e.ends[S] = o, r.ends[S][S] = n, r.each(function(n) {
                        n[_] = t, n.parent = e, t && (t[S] = n), t = n
                    }), r
                }, e.disown = function() {
                    var e = this,
                        t = e.ends[_];
                    if (!t || e.disowned) return e;
                    e.disowned = !0;
                    var n = e.ends[S],
                        r = t.parent;
                    return l(r, t[_], t), l(r, n, n[S]), t[_] ? t[_][S] = n[S] : r.ends[_] = n[S], n[S] ? n[S][_] = t[_] : r.ends[S] = t[_], e
                }, e.remove = function() {
                    return this.jQ.remove(), this.disown()
                }, e.each = function(e) {
                    return a(this.ends, e), this
                }, e.fold = function(e, t) {
                    return s(this.ends, e, t)
                }
            }),
            D = {},
            P = {},
            L = w(M, function(e) {
                e.init = function(e, t, n) {
                    this.controller = n, this.parent = e, this.options = t;
                    var r = this.jQ = this._jQ = E('<span class="dcg-mq-cursor">&#8203;</span>');
                    this.blink = function() {
                        r.toggleClass("dcg-mq-blink")
                    }, this.upDownCache = {}
                }, e.show = function() {
                    return this.jQ = this._jQ.removeClass("dcg-mq-blink"), "intervalId" in this ? clearInterval(this.intervalId) : (this[S] ? this.selection && this.selection.ends[_][_] === this[_] ? this.jQ.insertBefore(this.selection.jQ) : this.jQ.insertBefore(this[S].jQ.first()) : this.jQ.appendTo(this.parent.jQ), this.parent.focus()), this.intervalId = setInterval(this.blink, 500), this
                }, e.hide = function() {
                    return "intervalId" in this && clearInterval(this.intervalId), delete this.intervalId, this.jQ.detach(), this.jQ = E(), this
                }, e.withDirInsertAt = function(e, t, n, r) {
                    var i = this.parent;
                    this.parent = t, this[e] = n, this[-e] = r, i !== t && i.blur && i.blur(this)
                }, e.insDirOf = function(e, t) {
                    return r(e), this.jQ.insDirOf(e, t.jQ), this.withDirInsertAt(e, t.parent, t[e], t), this.parent.jQ.addClass("dcg-mq-hasCursor"), this
                }, e.insLeftOf = function(e) {
                    return this.insDirOf(_, e)
                }, e.insRightOf = function(e) {
                    return this.insDirOf(S, e)
                }, e.insAtDirEnd = function(e, t) {
                    return r(e), this.jQ.insAtDirEnd(e, t.jQ), this.withDirInsertAt(e, t, 0, t.ends[e]), t.focus(), this
                }, e.insAtLeftEnd = function(e) {
                    return this.insAtDirEnd(_, e)
                }, e.insAtRightEnd = function(e) {
                    return this.insAtDirEnd(S, e)
                }, e.jumpUpDown = function(e, t) {
                    var n = this;
                    n.upDownCache[e.id] = M.copy(n);
                    var r = n.upDownCache[t.id];
                    if (r) r[S] ? n.insLeftOf(r[S]) : n.insAtRightEnd(r.parent);
                    else {
                        var i = n.offset().left;
                        t.seek(i, n)
                    }
                    W.queue(t, !0)
                }, e.offset = function() {
                    var e = this,
                        t = e.jQ.removeClass("dcg-mq-cursor").offset();
                    return e.jQ.addClass("dcg-mq-cursor"), t
                }, e.unwrapGramp = function() {
                    var e = this.parent.parent,
                        t = e.parent,
                        n = e[S],
                        r = this,
                        i = e[_];
                    if (e.disown().eachChild(function(r) {
                            r.isEmpty() || (r.children().adopt(t, i, n).each(function(t) {
                                t.jQ.insertBefore(e.jQ.first())
                            }), i = r.ends[S])
                        }), !this[S])
                        if (this[_]) this[S] = this[_][S];
                        else
                            for (; !this[S];) {
                                if (this.parent = this.parent[S], !this.parent) {
                                    this[S] = e[S], this.parent = t;
                                    break
                                }
                                this[S] = this.parent.ends[_]
                            }
                    this[S] ? this.insLeftOf(this[S]) : this.insAtRightEnd(t), e.jQ.remove(), e[_].siblingDeleted && e[_].siblingDeleted(r.options, S), e[S].siblingDeleted && e[S].siblingDeleted(r.options, _)
                }, e.startSelection = function() {
                    for (var e = this.anticursor = M.copy(this), t = e.ancestors = {}, n = e; n.parent; n = n.parent) t[n.parent.id] = n
                }, e.endSelection = function() {
                    delete this.anticursor
                }, e.select = function() {
                    var e = this.anticursor;
                    if (this[_] === e[_] && this.parent === e.parent) return !1;
                    for (var t = this; t.parent; t = t.parent)
                        if (t.parent.id in e.ancestors) {
                            var r = t.parent;
                            break
                        } n("cursor and anticursor in the same tree", r);
                    var i, o, a = e.ancestors[r.id],
                        s = S;
                    if (t[_] !== a)
                        for (var l = t; l; l = l[S])
                            if (l[S] === a[S]) {
                                s = _, i = t, o = a;
                                break
                            } return s === S && (i = a, o = t), i instanceof M && (i = i[S]), o instanceof M && (o = o[_]), this.hide().selection = r.selectChildren(i, o), this.insDirOf(s, this.selection.ends[s]), this.selectionChanged(), !0
                }, e.resetToEnd = function(e) {
                    this.clearSelection();
                    var t = e.root;
                    this[S] = 0, this[_] = t.ends[S], this.parent = t
                }, e.clearSelection = function() {
                    return this.selection && (this.selection.clear(), delete this.selection, this.selectionChanged()), this
                }, e.deleteSelection = function() {
                    this.selection && (this[_] = this.selection.ends[_][_], this[S] = this.selection.ends[S][S], this.selection.remove(), this.selectionChanged(), delete this.selection)
                }, e.replaceSelection = function() {
                    var e = this.selection;
                    return e && (this[_] = e.ends[_][_], this[S] = e.ends[S][S], delete this.selection), e
                }
            }),
            A = w(k, function(e, t) {
                e.init = function() {
                    t.init.apply(this, arguments), this.jQ = this.jQ.wrapAll('<span class="dcg-mq-selection"></span>').parent()
                }, e.adopt = function() {
                    return this.jQ.replaceWith(this.jQ = this.jQ.children()), t.adopt.apply(this, arguments)
                }, e.clear = function() {
                    return this.jQ.replaceWith(this.jQ[0].childNodes), this
                }, e.join = function(e, t) {
                    var n = t || "";
                    return this.fold("", function(t, r) {
                        return t + n + r[e]()
                    })
                }
            }),
            O = w(function(e) {
                e.init = function(e, t, n) {
                    this.id = e.id, this.data = {}, this.root = e, this.container = t, this.options = n, this.ariaLabel = "Math Input", this.ariaPostLabel = "", e.controller = this, this.cursor = e.cursor = L(e, n, this)
                }, e.handle = function(e, t) {
                    var n = this.options.handlers;
                    if (n && n.fns[e]) {
                        var r = n.APIClasses[this.KIND_OF_MQ](this);
                        t === _ || t === S ? n.fns[e](t, r) : n.fns[e](r)
                    }
                };
                var t = [];
                this.onNotify = function(e) {
                    t.push(e)
                }, e.notify = function() {
                    for (var e = 0; e < t.length; e += 1) t[e].apply(this.cursor, arguments);
                    return this
                }
            }),
            F = {},
            q = w(),
            N = {},
            R = w(),
            B = {};
        u.prototype = R.p, u.VERSION = "v0.10.1", u.interfaceVersion = function(e) {
            if (1 !== e) throw "Only interface version 1 supported. You specified: " + e;
            return c = function() {
                window.console && console.warn('You called MathQuill.interfaceVersion(1); to specify the interface version, which will fail in v1.0.0. You can fix this easily by doing this before doing anything else:\n\n    MathQuill = MathQuill.getInterface(1);\n    // now MathQuill.MathField() works like it used to\n\nSee also the "`dev` branch (2014–2015) → v0.10.0 Migration Guide" at\n  https://github.com/mathquill/mathquill/wiki/%60dev%60-branch-(2014%E2%80%932015)-%E2%86%92-v0.10.0-Migration-Guide')
            }, c(), u
        }, u.getInterface = p;
        var j = p.MIN = 1,
            V = p.MAX = 2;
        u.noConflict = function() {
            return window.MathQuill = z, u
        };
        var z = window.MathQuill;
        window.MathQuill = u;
        var U = function() {
                function t(e) {
                    var t, r = e.which || e.keyCode,
                        i = n[r],
                        o = [];
                    return e.ctrlKey && o.push("Ctrl"), e.originalEvent && e.originalEvent.metaKey && o.push("Meta"), e.altKey && o.push("Alt"), e.shiftKey && o.push("Shift"), t = i || String.fromCharCode(r), o.length || i ? (o.push(t), o.join("-")) : t
                }
                var n = {
                    8: "Backspace",
                    9: "Tab",
                    10: "Enter",
                    13: "Enter",
                    16: "Shift",
                    17: "Control",
                    18: "Alt",
                    20: "CapsLock",
                    27: "Esc",
                    32: "Spacebar",
                    33: "PageUp",
                    34: "PageDown",
                    35: "End",
                    36: "Home",
                    37: "Left",
                    38: "Up",
                    39: "Right",
                    40: "Down",
                    45: "Insert",
                    46: "Del",
                    144: "NumLock"
                };
                return function(n, r) {
                    function i(e) {
                        E = e, clearTimeout(b), b = setTimeout(e)
                    }

                    function o(t) {
                        i(function(n) {
                            E = e, clearTimeout(b), t(n)
                        })
                    }

                    function a() {
                        try {
                            _[0].select()
                        } catch (e) {}
                    }

                    function s(t) {
                        E(), E = e, clearTimeout(b), _.val(t), t && a(), M = !!t
                    }

                    function l() {
                        var e = _[0];
                        return "selectionStart" in e && e.selectionStart !== e.selectionEnd
                    }

                    function c() {
                        r.options && r.options.overrideKeystroke ? r.options.overrideKeystroke(t(x), x) : r.keystroke(t(x), x)
                    }

                    function u(e) {
                        x = e, w = null, M && o(function(e) {
                            e && "focusout" === e.type || a()
                        }), c()
                    }

                    function p(e) {
                        if (!e || !e.originalEvent) return !1;
                        switch (e.originalEvent.key) {
                            case "ArrowRight":
                            case "ArrowLeft":
                            case "ArrowDown":
                            case "ArrowUp":
                                return !0
                        }
                        return !1
                    }

                    function d(e) {
                        x && w && c(), w = e, p(e) || i(f)
                    }

                    function h(e) {
                        x && !w && (p(e) || i(f))
                    }

                    function f() {
                        if (!l()) {
                            var e = _.val();
                            1 === e.length ? (_.val(""), r.options && r.options.overrideTypedText ? r.options.overrideTypedText(e) : r.typedText(e)) : e && a()
                        }
                    }

                    function m() {
                        x = null, w = null, E = e, clearTimeout(b), _.val("")
                    }

                    function g(e) {
                        _.focus(), i(v)
                    }

                    function v() {
                        var e = _.val();
                        _.val(""), e && r.paste(e)
                    }
                    var b, x = null,
                        w = null,
                        _ = y(n),
                        S = y(r.container || _),
                        E = e;
                    S.bind("keydown keypress input keyup paste", function(e) {
                        E(e)
                    });
                    var M = !1;
                    return r.options && r.options.disableCopyPaste ? S.bind({
                        keydown: u,
                        keypress: d,
                        keyup: h,
                        focusout: m,
                        copy: function(e) {
                            e.preventDefault()
                        },
                        cut: function(e) {
                            e.preventDefault()
                        },
                        paste: function(e) {
                            e.preventDefault()
                        }
                    }) : S.bind({
                        keydown: u,
                        keypress: d,
                        keyup: h,
                        focusout: m,
                        cut: function() {
                            o(function() {
                                r.cut()
                            })
                        },
                        copy: function() {
                            o(function() {
                                r.copy()
                            })
                        },
                        paste: g
                    }), {
                        select: s
                    }
                }
            }(),
            G = w(function(e, t, r) {
                function i(e, t) {
                    throw e = e ? "'" + e + "'" : "EOF", "Parse Error: " + t + " at " + e
                }
                e.init = function(e) {
                    this._ = e
                }, e.parse = function(e) {
                    function t(e, t) {
                        return t
                    }
                    return this.skip(s)._("" + e, t, i)
                }, e.or = function(e) {
                    n("or is passed a parser", e instanceof r);
                    var t = this;
                    return r(function(n, r, i) {
                        function o(t) {
                            return e._(n, r, i)
                        }
                        return t._(n, r, o)
                    })
                }, e.then = function(e) {
                    var t = this;
                    return r(function(i, o, a) {
                        function s(t, i) {
                            var s = e instanceof r ? e : e(i);
                            return n("a parser is returned", s instanceof r), s._(t, o, a)
                        }
                        return t._(i, s, a)
                    })
                }, e.many = function() {
                    var e = this;
                    return r(function(t, n, r) {
                        function i(e, n) {
                            return t = e, a.push(n), !0
                        }

                        function o() {
                            return !1
                        }
                        for (var a = []; e._(t, i, o););
                        return n(t, a)
                    })
                }, e.times = function(e, t) {
                    arguments.length < 2 && (t = e);
                    var n = this;
                    return r(function(r, i, o) {
                        function a(e, t) {
                            return u.push(t), r = e, !0
                        }

                        function s(e, t) {
                            return c = t, r = e, !1
                        }

                        function l(e, t) {
                            return !1
                        }
                        for (var c, u = [], p = !0, d = 0; d < e; d += 1)
                            if (!(p = n._(r, a, s))) return o(r, c);
                        for (; d < t && p; d += 1) p = n._(r, a, l);
                        return i(r, u)
                    })
                }, e.result = function(e) {
                    return this.then(a(e))
                }, e.atMost = function(e) {
                    return this.times(0, e)
                }, e.atLeast = function(e) {
                    var t = this;
                    return t.times(e).then(function(e) {
                        return t.many().map(function(t) {
                            return e.concat(t)
                        })
                    })
                }, e.map = function(e) {
                    return this.then(function(t) {
                        return a(e(t))
                    })
                }, e.skip = function(e) {
                    return this.then(function(t) {
                        return e.result(t)
                    })
                };
                var o = (this.string = function(e) {
                        var t = e.length,
                            n = "expected '" + e + "'";
                        return r(function(r, i, o) {
                            var a = r.slice(0, t);
                            return a === e ? i(r.slice(t), a) : o(r, n)
                        })
                    }, this.regex = function(e) {
                        n("regexp parser is anchored", "^" === e.toString().charAt(1));
                        var t = "expected " + e;
                        return r(function(n, r, i) {
                            var o = e.exec(n);
                            if (o) {
                                var a = o[0];
                                return r(n.slice(a.length), a)
                            }
                            return i(n, t)
                        })
                    }),
                    a = r.succeed = function(e) {
                        return r(function(t, n) {
                            return n(t, e)
                        })
                    },
                    s = (r.fail = function(e) {
                        return r(function(t, n, r) {
                            return r(t, e)
                        })
                    }, r.letter = o(/^[a-z]/i), r.letters = o(/^[a-z]*/i), r.digit = o(/^[0-9]/), r.digits = o(/^[0-9]*/), r.whitespace = o(/^\s+/), r.optWhitespace = o(/^\s*/), r.any = r(function(e, t, n) {
                        return e ? t(e.slice(1), e.charAt(0)) : n(e, "expected any character")
                    }), r.all = r(function(e, t, n) {
                        return t("", e)
                    }), r.eof = r(function(e, t, n) {
                        return e ? n(e, "expected EOF") : t(e, e)
                    }))
            });
        O.open(function(e) {
            this.onNotify(function(e) {
                if ("edit" === e || "replace" === e || e === g) {
                    var t = this.controller;
                    if (!t) return;
                    if (!t.options.enableDigitGrouping) return;
                    if (!1 !== t.blurred) return;
                    t.disableGroupingForSeconds(1)
                }
            }), e.disableGroupingForSeconds = function(e) {
                clearTimeout(this.__disableGroupingTimeout);
                var t = this.root.jQ;
                0 === e ? t.removeClass("dcg-mq-suppress-grouping") : (t.addClass("dcg-mq-suppress-grouping"), this.__disableGroupingTimeout = setTimeout(function() {
                    t.removeClass("dcg-mq-suppress-grouping")
                }, 1e3 * e))
            }, e.focusBlurEvents = function() {
                function e() {
                    clearTimeout(r), a.selection && a.selection.jQ.addClass("dcg-mq-blur"), t(), n()
                }

                function t() {
                    a.hide().parent.blur(), i.container.removeClass("dcg-mq-focused"), E(window).unbind("blur", e), i.options && i.options.resetCursorOnBlur && a.resetToEnd(i)
                }

                function n() {
                    var e = (i.ariaLabel + ": " + o.mathspeak() + " " + i.ariaPostLabel).trim();
                    W.jQ.empty(), i.textarea.attr("aria-label", e), i.container.attr("aria-label", e)
                }
                var r, i = this,
                    o = i.root,
                    a = i.cursor;
                i.textarea.focus(function() {
                    n(), i.blurred = !1, clearTimeout(r), i.container.addClass("dcg-mq-focused"), a.parent || a.insAtRightEnd(o), a.selection ? (a.selection.jQ.removeClass("dcg-mq-blur"), i.selectionChanged()) : a.show(), i.setOverflowClasses()
                }).blur(function() {
                    i.textareaSelectionTimeout && (clearTimeout(i.textareaSelectionTimeout), i.textareaSelectionTimeout = g), i.disableGroupingForSeconds(0), i.blurred = !0, r = setTimeout(function() {
                        o.postOrder(function(e) {
                            e.intentionalBlur()
                        }), a.clearSelection().endSelection(), t(), n(), i.scrollHoriz()
                    }), E(window).bind("blur", e)
                }), n(), i.blurred = !0, a.hide().parent.blur()
            }
        }), O.open(function(e, t) {
            e.exportText = function() {
                return this.root.foldChildren("", function(e, t) {
                    return e + t.text()
                })
            }
        }), O.open(function(t) {
            q.p.ignoreNextMousedown = e;
            var n;
            this.onNotify(function(e) {
                "edit" !== e && "replace" !== e || n && n.cursor === this && n.cb()
            }), t.delegateMouseEvents = function() {
                var t = this.root.jQ;
                this.container.bind("mousedown.mathquill", function(r) {
                    function i(e) {
                        y = E(e.target)
                    }

                    function o(e) {
                        d.anticursor || d.startSelection(), p.seek(y, e.pageX, e.pageY).cursor.select(), d.selection && W.clear().queue(d.selection.join("mathspeak") + " selected").alert(), y = g
                    }

                    function a(e) {
                        c.unbind("mousemove", i), E(e.target.ownerDocument).unbind("mousemove", o).unbind("mouseup", l), n = g
                    }

                    function s() {
                        p.editable ? (d.show(), W.queue(d.parent).alert()) : f.detach()
                    }

                    function l(e) {
                        d.blink = h, d.selection || s(), a(e)
                    }
                    var c = E(r.target).closest(".dcg-mq-root-block"),
                        u = C.getNodeOfElement(c[0]) || C.getNodeOfElement(t[0]),
                        p = u.controller,
                        d = p.cursor,
                        h = d.blink,
                        f = p.textareaSpan,
                        m = p.textarea;
                    if (r.preventDefault(), r.target.unselectable = !0, !d.options.ignoreNextMousedown(r)) {
                        d.options.ignoreNextMousedown = e;
                        var y, v;
                        n = {
                            cursor: d,
                            cb: function() {
                                v = !0, d.blink = h, d.clearSelection(), s(), a(r)
                            }
                        }, p.blurred && (p.editable || c.prepend(f), m.focus(), v) || (d.blink = e, p.seek(E(r.target), r.pageX, r.pageY).cursor.startSelection(), c.mousemove(i), E(r.target.ownerDocument).mousemove(o).mouseup(l))
                    }
                })
            }
        }), O.open(function(e) {
            e.seek = function(e, t, n) {
                for (var r, i = this.notify("select").cursor, o = e && e[0]; o && !(r = C.getNodeOfElement(o));) o = o.parentElement;
                return r || (r = this.root), i.clearSelection().show(), r.seek(t, i), this.scrollHoriz(), this
            }
        }), O.open(function(e) {
            e.keystroke = function(e, t) {
                this.cursor.parent.keystroke(e, t, this)
            }
        }), C.open(function(e) {
            e.keystroke = function(e, t, n) {
                var r = n.cursor;
                switch (e) {
                    case "Ctrl-Shift-Backspace":
                    case "Ctrl-Backspace":
                        n.ctrlDeleteDir(_);
                        break;
                    case "Shift-Backspace":
                    case "Backspace":
                        n.backspace();
                        break;
                    case "Esc":
                    case "Tab":
                        return void n.escapeDir(S, e, t);
                    case "Shift-Tab":
                    case "Shift-Esc":
                        return void n.escapeDir(_, e, t);
                    case "End":
                        n.notify("move").cursor.insAtRightEnd(r.parent), W.queue("end of").queue(r.parent, !0);
                        break;
                    case "Ctrl-End":
                        n.notify("move").cursor.insAtRightEnd(n.root), W.queue("end of").queue(n.ariaLabel).queue(n.root).queue(n.ariaPostLabel);
                        break;
                    case "Shift-End":
                        for (; r[S];) n.selectRight();
                        break;
                    case "Ctrl-Shift-End":
                        for (; r[S] || r.parent !== n.root;) n.selectRight();
                        break;
                    case "Home":
                        n.notify("move").cursor.insAtLeftEnd(r.parent), W.queue("beginning of").queue(r.parent, !0);
                        break;
                    case "Ctrl-Home":
                        n.notify("move").cursor.insAtLeftEnd(n.root), W.queue("beginning of").queue(n.ariaLabel).queue(n.root).queue(n.ariaPostLabel);
                        break;
                    case "Shift-Home":
                        for (; r[_];) n.selectLeft();
                        break;
                    case "Ctrl-Shift-Home":
                        for (; r[_] || r.parent !== n.root;) n.selectLeft();
                        break;
                    case "Left":
                        n.moveLeft();
                        break;
                    case "Shift-Left":
                        n.selectLeft();
                        break;
                    case "Ctrl-Left":
                        break;
                    case "Right":
                        n.moveRight();
                        break;
                    case "Shift-Right":
                        n.selectRight();
                        break;
                    case "Ctrl-Right":
                        break;
                    case "Up":
                        n.moveUp();
                        break;
                    case "Down":
                        n.moveDown();
                        break;
                    case "Shift-Up":
                        if (r[_])
                            for (; r[_];) n.selectLeft();
                        else n.selectLeft();
                    case "Shift-Down":
                        if (r[S])
                            for (; r[S];) n.selectRight();
                        else n.selectRight();
                    case "Ctrl-Up":
                    case "Ctrl-Down":
                        break;
                    case "Ctrl-Shift-Del":
                    case "Ctrl-Del":
                        n.ctrlDeleteDir(S);
                        break;
                    case "Shift-Del":
                    case "Del":
                        n.deleteForward();
                        break;
                    case "Meta-A":
                    case "Ctrl-A":
                        for (n.notify("move").cursor.insAtRightEnd(n.root); r[_];) n.selectLeft();
                        break;
                    case "Ctrl-Alt-Up":
                        r.parent.parent && r.parent.parent instanceof C ? W.queue(r.parent.parent) : W.queue("nothing above");
                        break;
                    case "Ctrl-Alt-Down":
                        r.parent && r.parent instanceof C ? W.queue(r.parent) : W.queue("block is empty");
                        break;
                    case "Ctrl-Alt-Left":
                        r.parent.parent && r.parent.parent.ends && r.parent.parent.ends[_] && r.parent.parent.ends[_] instanceof C ? W.queue(r.parent.parent.ends[_]) : W.queue("nothing to the left");
                        break;
                    case "Ctrl-Alt-Right":
                        r.parent.parent && r.parent.parent.ends && r.parent.parent.ends[S] && r.parent.parent.ends[S] instanceof C ? W.queue(r.parent.parent.ends[S]) : W.queue("nothing to the right");
                        break;
                    case "Ctrl-Alt-Shift-Down":
                        r.selection ? W.queue(r.selection.join("mathspeak", " ").trim() + " selected") : W.queue("nothing selected");
                        break;
                    case "Ctrl-Alt-=":
                    case "Ctrl-Alt-Shift-Right":
                        n.ariaPostLabel.length ? W.queue(n.ariaPostLabel) : W.queue("no answer");
                        break;
                    default:
                        return
                }
                W.alert(), t.preventDefault(), n.scrollHoriz()
            }, e.moveOutOf = e.moveTowards = e.deleteOutOf = e.deleteTowards = e.unselectInto = e.selectOutOf = e.selectTowards = function() {
                n("overridden or never called on this node")
            }
        }), O.open(function(e) {
            function t(e, t) {
                var n = e.notify("upDown").cursor,
                    r = t + "Into",
                    i = t + "OutOf";
                return n[S][r] ? n.insAtLeftEnd(n[S][r]) : n[_][r] ? n.insAtRightEnd(n[_][r]) : n.parent.bubble(function(e) {
                    var t = e[i];
                    if (t && ("function" == typeof t && (t = e[i](n)), t instanceof C && n.jumpUpDown(e, t), !0 !== t)) return !1
                }), e
            }
            this.onNotify(function(e) {
                "move" !== e && "upDown" !== e || this.show().clearSelection()
            }), e.escapeDir = function(e, t, n) {
                r(e);
                var i = this.cursor;
                if (i.parent !== this.root && n.preventDefault(), i.parent !== this.root) return i.parent.moveOutOf(e, i), W.alert(), this.notify("move")
            }, N.leftRightIntoCmdGoes = function(e) {
                if (e && "up" !== e && "down" !== e) throw '"up" or "down" required for leftRightIntoCmdGoes option, got "' + e + '"';
                return e
            }, e.moveDir = function(e) {
                r(e);
                var t = this.cursor,
                    n = t.options.leftRightIntoCmdGoes;
                return t.selection ? t.insDirOf(e, t.selection.ends[e]) : t[e] ? t[e].moveTowards(e, t, n) : t.parent.moveOutOf(e, t, n), this.notify("move")
            }, e.moveLeft = function() {
                return this.moveDir(_)
            }, e.moveRight = function() {
                return this.moveDir(S)
            }, e.moveUp = function() {
                return t(this, "up")
            }, e.moveDown = function() {
                return t(this, "down")
            }, this.onNotify(function(e) {
                "upDown" !== e && (this.upDownCache = {})
            }), this.onNotify(function(e) {
                "edit" === e && this.show().deleteSelection()
            }), e.deleteDir = function(e) {
                r(e);
                var t = this.cursor,
                    n = t[e],
                    i = t.parent.parent;
                if (n && n instanceof C) n.sides ? W.queue(n.parent.chToCmd(n.sides[-e].ch).mathspeak({
                    createdLeftOf: t
                })) : n.blocks || "\\text" === n.parent.ctrlSeq || W.queue(n);
                else if (i && i instanceof C)
                    if (i.sides) W.queue(i.parent.chToCmd(i.sides[e].ch).mathspeak({
                        createdLeftOf: t
                    }));
                    else if (i.blocks && i.mathspeakTemplate)
                    if (i.upInto && i.downInto) W.queue(i.mathspeakTemplate[1]);
                    else {
                        var o = i.mathspeakTemplate,
                            a = e === _ ? o[0] : o[o.length - 1];
                        W.queue(a)
                    }
                else W.queue(i);
                var s = t.selection;
                return this.notify("edit"), s || (t[e] ? t[e].deleteTowards(e, t) : t.parent.deleteOutOf(e, t)), t[_].siblingDeleted && t[_].siblingDeleted(t.options, S), t[S].siblingDeleted && t[S].siblingDeleted(t.options, _), t.parent.bubble(function(e) {
                    e.reflow()
                }), this
            }, e.ctrlDeleteDir = function(e) {
                r(e);
                var t = this.cursor;
                if (!t[e] || t.selection) return this.deleteDir(e);
                this.notify("edit");
                var n;
                return n = e === _ ? k(t.parent.ends[_], t[_]) : k(t[S], t.parent.ends[S]), W.queue(n), n.remove(), t.insAtDirEnd(e, t.parent), t[_].siblingDeleted && t[_].siblingDeleted(t.options, S), t[S].siblingDeleted && t[S].siblingDeleted(t.options, _), t.parent.bubble(function(e) {
                    e.reflow()
                }), this
            }, e.backspace = function() {
                return this.deleteDir(_)
            }, e.deleteForward = function() {
                return this.deleteDir(S)
            }, this.onNotify(function(e) {
                "select" !== e && this.endSelection()
            }), e.selectDir = function(e) {
                var t = this.notify("select").cursor,
                    n = t.selection;
                r(e), t.anticursor || t.startSelection();
                var i = t[e];
                i ? n && n.ends[e] === i && t.anticursor[-e] !== i ? i.unselectInto(e, t) : i.selectTowards(e, t) : t.parent.selectOutOf(e, t), t.clearSelection(), t.select() || t.show(), t.selection && W.clear().queue(t.selection.join("mathspeak", " ").trim() + " selected")
            }, e.selectLeft = function() {
                return this.selectDir(_)
            }, e.selectRight = function() {
                return this.selectDir(S)
            }
        }), O.open(function(e) {
            q.p.substituteTextarea = function() {
                return E("<textarea autocapitalize=off autocomplete=off autocorrect=off spellcheck=false x-palm-disable-ste-all=true/>")[0]
            }, e.createTextarea = function() {
                var e = this.textareaSpan = E('<span class="dcg-mq-textarea"></span>'),
                    t = this.options.substituteTextarea();
                if (!t.nodeType) throw "substituteTextarea() must return a DOM element, got " + t;
                t = this.textarea = E(t).appendTo(e);
                var n = this;
                n.cursor.selectionChanged = function() {
                    n.selectionChanged()
                }
            }, e.selectionChanged = function() {
                var e = this;
                e.textareaSelectionTimeout === g && (e.textareaSelectionTimeout = setTimeout(function() {
                    e.setTextareaSelection()
                }))
            }, e.setTextareaSelection = function() {
                this.textareaSelectionTimeout = g;
                var e = "";
                this.cursor.selection && (e = this.cleanLatex(this.cursor.selection.join("latex")), this.options.statelessClipboard && (e = "$" + e + "$")), this.selectFn(e)
            }, e.staticMathTextareaEvents = function() {
                function e() {
                    o.detach(), t.blurred = !0
                }
                var t = this,
                    n = t.root,
                    r = t.cursor,
                    i = t.textarea,
                    o = t.textareaSpan;
                this.container.prepend('<span aria-hidden="true" class="dcg-mq-selectable">$' + t.exportLatex() + "$</span>"), t.blurred = !0, i.bind("cut paste", !1), t.options.disableCopyPaste ? i.bind("copy", !1) : i.bind("copy", function() {
                    t.setTextareaSelection()
                }), i.focus(function() {
                    t.blurred = !1
                }).blur(function() {
                    r.selection && r.selection.clear(), setTimeout(e)
                }), t.selectFn = function(e) {
                    i.val(e), e && i.select()
                };
                var a = t && "Math Input" !== t.ariaLabel ? t.ariaLabel + ": " : "";
                t.container.attr("role", "math").attr("aria-label", a + n.mathspeak().trim())
            }, q.p.substituteKeyboardEvents = U, e.editablesTextareaEvents = function() {
                var e = this,
                    t = e.textarea,
                    n = e.textareaSpan,
                    r = this.options.substituteKeyboardEvents(t, this);
                this.selectFn = function(e) {
                    r.select(e)
                }, this.container.prepend(n), this.focusBlurEvents()
            }, e.typedText = function(e) {
                if ("\n" === e) return this.handle("enter");
                var t = this.notify().cursor;
                t.parent.write(t, e), this.scrollHoriz()
            }, e.cut = function() {
                var e = this,
                    t = e.cursor;
                t.selection && setTimeout(function() {
                    e.notify("edit"), t.parent.bubble(function(e) {
                        e.reflow()
                    }), e.options && e.options.onCut && e.options.onCut()
                })
            }, e.copy = function() {
                this.setTextareaSelection()
            }, e.paste = function(e) {
                this.options.statelessClipboard && (e = "$" === e.slice(0, 1) && "$" === e.slice(-1) ? e.slice(1, -1) : "\\text{" + e + "}"), this.writeLatex(e).cursor.show(), this.scrollHoriz(), this.options && this.options.onPaste && this.options.onPaste()
            }
        });
        var H = function() {
            function e(e) {
                var t = J();
                return e.adopt(t, 0, 0), t
            }

            function t(e) {
                for (var t = e[0] || J(), n = 1; n < e.length; n += 1) e[n].children().adopt(t, t.ends[S], 0);
                return t
            }
            var n = G.string,
                r = G.regex,
                i = G.letter,
                o = G.digit,
                a = G.any,
                s = G.optWhitespace,
                l = G.succeed,
                c = G.fail,
                u = i.map(function(e) {
                    return ie(e)
                }),
                p = o.map(function(e) {
                    return ne(e)
                }),
                d = r(/^[^${}\\_^]/).map(function(e) {
                    return Q(e)
                }),
                h = r(/^[^\\a-eg-zA-Z]/).or(n("\\").then(r(/^[a-z]+/i).or(r(/^\s+/).result(" ")).or(a))).then(function(e) {
                    var t = D[e];
                    return t ? t(e).parser() : c("unknown command: \\" + e)
                }),
                f = h.or(u).or(p).or(d),
                m = n("{").then(function() {
                    return y
                }).skip(n("}")),
                g = s.then(m.or(f.map(e))),
                y = g.many().map(t).skip(s),
                v = n("[").then(g.then(function(e) {
                    return "]" !== e.join("latex") ? l(e) : c()
                }).many().map(t).skip(s)).skip(n("]")),
                b = y;
            return b.block = g, b.optBlock = v, b
        }();
        O.open(function(e, t) {
            e.cleanLatex = function(e) {
                return e.replace(/(\\[a-z]+) (?![a-z])/gi, "$1")
            }, e.exportLatex = function() {
                return this.cleanLatex(this.root.latex())
            }, e.writeLatex = function(e) {
                var t = this.notify("edit").cursor,
                    n = G.all,
                    r = G.eof,
                    i = H.skip(r).or(n.result(!1)).parse(e);
                if (i && !i.isEmpty()) {
                    i.children().adopt(t.parent, t[_], t[S]);
                    i.jQize().insertBefore(t.jQ), t[_] = i.ends[S], i.finalizeInsert(t.options, t), i.ends[S][S].siblingCreated && i.ends[S][S].siblingCreated(t.options, _), i.ends[_][_].siblingCreated && i.ends[_][_].siblingCreated(t.options, S), t.parent.bubble(function(e) {
                        e.reflow()
                    })
                }
                return this
            }, e.classifyLatexForEfficientUpdate = function(e) {
                if ("string" == typeof e) {
                    var t = e.match(/-?[0-9.]+$/g);
                    return t && 1 === t.length ? {
                        latex: e,
                        prefix: e.substr(0, e.length - t[0].length),
                        digits: t[0]
                    } : void 0
                }
            }, e.renderLatexMathEfficiently = function(e) {
                var t, n, r = this.classifyLatexForEfficientUpdate(e);
                if (!r) return !1;
                if (t = this.exportLatex(), !(n = this.classifyLatexForEfficientUpdate(t)) || n.prefix !== r.prefix) return !1;
                var i = this.root,
                    o = n.digits,
                    a = r.digits,
                    s = !1,
                    l = !1;
                "-" === o[0] && (s = !0, o = o.substr(1)), "-" === a[0] && (l = !0, a = a.substr(1));
                for (var c = this.root.ends[S], u = [], p = o.length - 1; p >= 0; p--) {
                    if (c.ctrlSeq !== o[p]) return !1;
                    if (c.parent !== i) return !1;
                    u.unshift(c), c = c[_]
                }
                if (s && !l) {
                    var d = c;
                    if ("-" !== d.ctrlSeq) return !1;
                    if (d[S] !== u[0]) return !1;
                    if (d.parent !== i) return !1;
                    if (d[_] && d[_].parent !== i) return !1;
                    u[0][_] = d[_], i.ends[_] === d && (i.ends[_] = u[0]), d[_] && (d[_][S] = u[0]), d.jQ.remove()
                }
                if (!s && l) {
                    var h = de("-"),
                        f = document.createElement("span");
                    f.textContent = "-", h.jQ = E(f), u[0][_] && (u[0][_][S] = h), i.ends[_] === u[0] && (i.ends[_] = h), h.parent = i, h[_] = u[0][_], h[S] = u[0], u[0][_] = h, h.contactWeld(), h.jQ.insertBefore(u[0].jQ)
                }
                var m = Math.min(o.length, a.length);
                for (p = 0; p < m; p++) {
                    var g = a[p];
                    c = u[p], c.ctrlSeq !== g && (c.ctrlSeq = g, c.jQ[0].textContent = g, c.mathspeakName = g)
                }
                if (o.length > a.length)
                    for (c = u[a.length - 1], i.ends[S] = c, c[S] = 0, p = o.length - 1; p >= m; p--) u[p].jQ.remove();
                if (a.length > o.length) {
                    var y = document.createDocumentFragment();
                    for (p = m; p < a.length; p++) {
                        var v = document.createElement("span");
                        v.className = "dcg-mq-digit", v.textContent = a[p];
                        var b = ne(a[p]);
                        b.parent = i, b.jQ = E(v), y.appendChild(v), b[_] = i.ends[S], b[S] = 0, b[_][S] = b, i.ends[S] = b
                    }
                    i.jQ[0].appendChild(y)
                }
                var x = this.exportLatex();
                if (x !== e) return console.warn("tried updating latex efficiently but did not work. Attempted: " + e + " but wrote: " + x), !1;
                this.cursor.resetToEnd(this);
                var w = i.ends[S];
                return w.fixDigitGrouping && w.fixDigitGrouping(this.cursor.options), !0
            }, e.renderLatexMathFromScratch = function(e) {
                var t = this.root,
                    n = this.cursor,
                    r = G.all,
                    i = G.eof,
                    o = H.skip(i).or(r.result(!1)).parse(e);
                t.ends[_] = t.ends[S] = 0, o && o.children().adopt(t, 0, 0);
                var a = t.jQ;
                if (o) {
                    var s = o.join("html");
                    a.html(s), t.jQize(a.children()), t.finalizeInsert(n.options)
                } else a.empty();
                var l = this.ariaLabel && "Math Input" !== this.ariaLabel ? this.ariaLabel + ": " : "";
                this.container.attr("aria-label", l + t.mathspeak().trim()), delete n.selection, n.insAtRightEnd(t)
            }, e.renderLatexMath = function(e) {
                this.notify("replace"), this.renderLatexMathEfficiently(e) || this.renderLatexMathFromScratch(e)
            }, e.renderLatexText = function(e) {
                var t = this.root,
                    n = this.cursor;
                t.jQ.children().slice(1).remove(), t.ends[_] = t.ends[S] = 0, delete n.selection, n.show().insAtRightEnd(t);
                var r = G.regex,
                    i = G.string,
                    o = G.eof,
                    a = G.all,
                    s = i("$").then(H).skip(i("$").or(o)).map(function(e) {
                        var t = RootMathCommand(n);
                        t.createBlocks();
                        var r = t.ends[_];
                        return e.children().adopt(r, 0, 0), t
                    }),
                    l = i("\\$").result("$"),
                    c = l.or(r(/^[^$]/)).map(Q),
                    u = s.or(c).many(),
                    p = u.skip(o).or(a.result(!1)).parse(e);
                if (p) {
                    for (var d = 0; d < p.length; d += 1) p[d].adopt(t, t.ends[S], 0);
                    t.jQize().appendTo(t.jQ), t.finalizeInsert(n.options)
                }
            }
        }), O.open(function(e) {
            e.setOverflowClasses = function() {
                var e = this.root.jQ[0],
                    t = !1,
                    n = !1;
                if (!this.blurred) {
                    var r = e.getBoundingClientRect().width,
                        i = e.scrollWidth,
                        o = e.scrollLeft;
                    t = i > r + o, n = o > 0
                }
                e.classList.contains("dcg-mq-editing-overflow-right") !== t && e.classList.toggle("dcg-mq-editing-overflow-right"), e.classList.contains("dcg-mq-editing-overflow-left") !== n && e.classList.toggle("dcg-mq-editing-overflow-left")
            }, e.scrollHoriz = function() {
                var e = this.cursor,
                    t = e.selection,
                    n = this.root.jQ[0].getBoundingClientRect();
                if (!e.jQ[0] && !t) return void this.root.jQ.stop().animate({
                    scrollLeft: 0
                }, 100, function() {
                    this.setOverflowClasses()
                }.bind(this));
                if (t) {
                    var r = t.jQ[0].getBoundingClientRect(),
                        i = r.left - (n.left + 20),
                        o = r.right - (n.right - 20);
                    if (t.ends[_] === e[S])
                        if (i < 0) var a = i;
                        else {
                            if (!(o > 0)) return;
                            if (r.left - o < n.left + 20) var a = i;
                            else var a = o
                        }
                    else if (o > 0) var a = o;
                    else {
                        if (!(i < 0)) return;
                        if (r.right - i > n.right - 20) var a = o;
                        else var a = i
                    }
                } else {
                    var s = e.jQ[0].getBoundingClientRect().left;
                    if (s > n.right - 20) var a = s - (n.right - 20);
                    else {
                        if (!(s < n.left + 20)) return;
                        var a = s - (n.left + 20)
                    }
                }
                var l = this.root.jQ[0];
                a < 0 && 0 === l.scrollLeft || a > 0 && l.scrollWidth <= l.scrollLeft + n.width || this.root.jQ.stop().animate({
                    scrollLeft: "+=" + a
                }, 100, function() {
                    this.setOverflowClasses()
                }.bind(this))
            }
        });
        var K = w(function(e) {
                e.init = function() {
                    this.jQ = y([]), y(document).ready(function() {
                        var e = ".dcg-mq-aria-alert";
                        y(e).length || y("body").append("<p aria-live='assertive' aria-atomic='true' class='dcg-mq-aria-alert'></p>"), this.jQ = y(e)
                    }.bind(this)), this.items = [], this.msg = ""
                }, e.queue = function(e, t) {
                    return e instanceof C && (e = t ? e.parent && e.parent.ariaLabel && "block" === e.ariaLabel ? e.parent.ariaLabel + " " + e.mathspeak() : e.ariaLabel ? e.ariaLabel + " " + e.mathspeak() : e.mathspeak() : e.mathspeak()), this.items.push(e), this
                }, e.queueDirOf = function(e) {
                    return r(e), this.queue(e === _ ? "before" : "after")
                }, e.queueDirEndOf = function(e) {
                    return r(e), this.queue(e === _ ? "beginning of" : "end of")
                }, e.alert = function(e) {
                    return e && this.queue(e), this.items.length && (this.msg = this.items.join(" ").replace(/ +(?= )/g, "").trim(), this.jQ.empty().text(this.msg)), this.clear()
                }, e.clear = function() {
                    return this.items.length = 0, this
                }
            }),
            W = K();
        O.open(function(e) {
            e.aria = W, e.exportMathSpeak = function() {
                return this.root.mathspeak()
            }
        });
        var Y = w(C, function(e, t) {
                e.finalizeInsert = function(e, t) {
                    var n = this;
                    n.postOrder(function(t) {
                        t.finalizeTree(e)
                    }), n.postOrder(function(e) {
                        e.contactWeld(t)
                    }), n.postOrder(function(e) {
                        e.blur()
                    }), n.postOrder(function(e) {
                        e.reflow()
                    }), n[S].siblingCreated && n[S].siblingCreated(e, _), n[_].siblingCreated && n[_].siblingCreated(e, S), n.bubble(function(e) {
                        e.reflow()
                    })
                }
            }),
            X = w(Y, function(e, t) {
                e.init = function(e, n, r) {
                    var i = this;
                    t.init.call(i), i.ctrlSeq || (i.ctrlSeq = e), n && (i.htmlTemplate = n), r && (i.textTemplate = r)
                }, e.replaces = function(e) {
                    e.disown(), this.replacedFragment = e
                }, e.isEmpty = function() {
                    return this.foldChildren(!0, function(e, t) {
                        return e && t.isEmpty()
                    })
                }, e.parser = function() {
                    var e = H.block,
                        t = this;
                    return e.times(t.numBlocks()).map(function(e) {
                        t.blocks = e;
                        for (var n = 0; n < e.length; n += 1) e[n].adopt(t, t.ends[S], 0);
                        return t
                    })
                }, e.createLeftOf = function(e) {
                    var n = this,
                        r = n.replacedFragment;
                    n.createBlocks(), t.createLeftOf.call(n, e), r && (r.adopt(n.ends[_], 0, 0), r.jQ.appendTo(n.ends[_].jQ)), n.finalizeInsert(e.options), n.placeCursor(e)
                }, e.createBlocks = function() {
                    for (var e = this, t = e.numBlocks(), n = e.blocks = Array(t), r = 0; r < t; r += 1) {
                        (n[r] = J()).adopt(e, e.ends[S], 0)
                    }
                }, e.placeCursor = function(e) {
                    e.insAtRightEnd(this.foldChildren(this.ends[_], function(e, t) {
                        return e.isEmpty() ? e : t
                    }))
                }, e.moveTowards = function(e, t, n) {
                    var r = n && this[n + "Into"];
                    t.insAtDirEnd(-e, r || this.ends[-e]), W.queueDirEndOf(-e).queue(t.parent, !0)
                }, e.deleteTowards = function(e, t) {
                    this.isEmpty() ? t[e] = this.remove()[e] : this.moveTowards(e, t, null)
                }, e.selectTowards = function(e, t) {
                    t[-e] = this, t[e] = this[e]
                }, e.selectChildren = function() {
                    return A(this, this)
                }, e.unselectInto = function(e, t) {
                    t.insAtDirEnd(-e, t.anticursor.ancestors[this.id])
                }, e.seek = function(e, t) {
                    function n(e) {
                        var t = {};
                        return t[_] = e.jQ.offset().left, t[S] = t[_] + e.jQ.outerWidth(), t
                    }
                    var r = this,
                        i = n(r);
                    if (e < i[_]) return t.insLeftOf(r);
                    if (e > i[S]) return t.insRightOf(r);
                    var o = i[_];
                    r.eachChild(function(a) {
                        var s = n(a);
                        return e < s[_] ? (e - o < s[_] - e ? a[_] ? t.insAtRightEnd(a[_]) : t.insLeftOf(r) : t.insAtLeftEnd(a), !1) : e > s[S] ? void(a[S] ? o = s[S] : i[S] - e < e - s[S] ? t.insRightOf(r) : t.insAtRightEnd(a)) : (a.seek(e, t), !1)
                    })
                }, e.numBlocks = function() {
                    var e = this.htmlTemplate.match(/&\d+/g);
                    return e ? e.length : 0
                }, e.html = function() {
                    var e = this,
                        t = e.blocks,
                        r = " mathquill-command-id=" + e.id,
                        i = e.htmlTemplate.match(/<[^<>]+>|[^<>]+/g);
                    n("no unmatched angle brackets", i.join("") === this.htmlTemplate);
                    for (var o = 0, a = i[0]; a; o += 1, a = i[o])
                        if ("/>" === a.slice(-2)) i[o] = a.slice(0, -2) + r + ' aria-hidden="true"/>';
                        else if ("<" === a.charAt(0)) {
                        n("not an unmatched top-level close tag", "/" !== a.charAt(1)), i[o] = a.slice(0, -1) + r + ' aria-hidden="true">';
                        var s = 1;
                        do {
                            o += 1, a = i[o], n("no missing close tags", a), "</" === a.slice(0, 2) ? s -= 1 : "<" === a.charAt(0) && "/>" !== a.slice(-2) && (s += 1)
                        } while (s > 0)
                    }
                    return i.join("").replace(/>&(\d+)/g, function(e, n) {
                        return " mathquill-block-id=" + t[n].id + ' aria-hidden="true">' + t[n].join("html")
                    })
                }, e.latex = function() {
                    return this.foldChildren(this.ctrlSeq, function(e, t) {
                        return e + "{" + (t.latex() || " ") + "}"
                    })
                }, e.textTemplate = [""], e.text = function() {
                    var e = this,
                        t = 0;
                    return e.foldChildren(e.textTemplate[t], function(n, r) {
                        t += 1;
                        var i = r.text();
                        return n && "(" === e.textTemplate[t] && "(" === i[0] && ")" === i.slice(-1) ? n + i.slice(1, -1) + e.textTemplate[t] : n + i + (e.textTemplate[t] || "")
                    })
                }, e.mathspeakTemplate = [], e.mathspeak = function() {
                    var e = this,
                        t = 0;
                    return e.foldChildren(e.mathspeakTemplate[t] || "Start" + e.ctrlSeq + " ", function(n, r) {
                        return t += 1, n + " " + r.mathspeak() + " " + (e.mathspeakTemplate[t] + " " || "End" + e.ctrlSeq + " ")
                    })
                }
            }),
            $ = w(X, function(t, n) {
                t.init = function(e, t, r, i) {
                    r || (r = e && e.length > 1 ? e.slice(1) : e), this.mathspeakName = i || r, n.init.call(this, e, t, [r])
                }, t.parser = function() {
                    return G.succeed(this)
                }, t.numBlocks = function() {
                    return 0
                }, t.replaces = function(e) {
                    e.remove()
                }, t.createBlocks = e, t.moveTowards = function(e, t) {
                    t.jQ.insDirOf(e, this.jQ), t[-e] = this, t[e] = this[e], W.queue(this)
                }, t.deleteTowards = function(e, t) {
                    t[e] = this.remove()[e]
                }, t.seek = function(e, t) {
                    e - this.jQ.offset().left < this.jQ.outerWidth() / 2 ? t.insLeftOf(this) : t.insRightOf(this)
                }, t.latex = function() {
                    return this.ctrlSeq
                }, t.text = function() {
                    return this.textTemplate.join("")
                }, t.mathspeak = function() {
                    return this.mathspeakName
                }, t.placeCursor = e, t.isEmpty = function() {
                    return !0
                }
            }),
            Q = w($, function(e, t) {
                e.init = function(e, n, r) {
                    t.init.call(this, e, "<span>" + (n || e) + "</span>", g, r)
                }
            }),
            Z = w($, function(e, t) {
                e.init = function(e, n, r, i) {
                    t.init.call(this, e, '<span class="dcg-mq-binary-operator">' + n + "</span>", r, i)
                }
            }),
            J = w(Y, function(e, t) {
                e.join = function(e) {
                    return this.foldChildren("", function(t, n) {
                        return t + n[e]()
                    })
                }, e.html = function() {
                    return this.join("html")
                }, e.latex = function() {
                    return this.join("latex")
                }, e.text = function() {
                    return this.ends[_] === this.ends[S] && 0 !== this.ends[_] ? this.ends[_].text() : this.join("text")
                }, e.mathspeak = function() {
                    var e = "",
                        t = {};
                    return this.controller && (t = this.controller.options.autoOperatorNames), this.foldChildren([], function(n, r) {
                        if (r.isPartOfOperator) e += r.mathspeak();
                        else {
                            if ("" !== e) {
                                if (t !== {} && t._maxLength > 0) {
                                    var i = t[e.toLowerCase()];
                                    "string" == typeof i && (e = i)
                                }
                                n.push(e + " "), e = ""
                            }
                            var o = r.mathspeak(),
                                a = r.ctrlSeq;
                            isNaN(a) && (o = " " + o, "." !== a && (o += " ")), n.push(o)
                        }
                        return n
                    }).join("").replace(/ +(?= )/g, "")
                }, e.ariaLabel = "block", e.keystroke = function(e, n, r) {
                    return !r.options.spaceBehavesLikeTab || "Spacebar" !== e && "Shift-Spacebar" !== e ? t.keystroke.apply(this, arguments) : (n.preventDefault(), void r.escapeDir("Shift-Spacebar" === e ? _ : S, e, n))
                }, e.moveOutOf = function(e, t, n) {
                    n && this.parent[n + "Into"] || !this[e] ? (t.insDirOf(e, this.parent), W.queueDirOf(e).queue(this.parent)) : (t.insAtDirEnd(-e, this[e]), W.queueDirEndOf(-e).queue(t.parent, !0))
                }, e.selectOutOf = function(e, t) {
                    t.insDirOf(e, this.parent)
                }, e.deleteOutOf = function(e, t) {
                    t.unwrapGramp()
                }, e.seek = function(e, t) {
                    var n = this.ends[S];
                    if (!n || n.jQ.offset().left + n.jQ.outerWidth() < e) return t.insAtRightEnd(this);
                    if (e < this.ends[_].jQ.offset().left) return t.insAtLeftEnd(this);
                    for (; e < n.jQ.offset().left;) n = n[_];
                    return n.seek(e, t)
                }, e.chToCmd = function(e, t) {
                    var n;
                    return e.match(/^[a-eg-zA-Z]$/) ? ie(e) : /^\d$/.test(e) ? ne(e) : t && t.typingSlashWritesDivisionSymbol && "/" === e ? D["÷"](e) : t && t.typingAsteriskWritesTimesSymbol && "*" === e ? D["×"](e) : t && t.typingPercentWritesPercentOf && "%" === e ? D.percentof(e) : (n = P[e] || D[e]) ? n(e) : Q(e)
                }, e.write = function(e, t) {
                    var n = this.chToCmd(t, e.options);
                    e.selection && n.replaces(e.replaceSelection()), n.createLeftOf(e.show()), "/" === t ? W.alert("over") : W.alert(n.mathspeak({
                        createdLeftOf: e
                    }))
                }, e.focus = function() {
                    return this.jQ.addClass("dcg-mq-hasCursor"), this.jQ.removeClass("dcg-mq-empty"), this
                }, e.blur = function() {
                    return this.jQ.removeClass("dcg-mq-hasCursor"), this.isEmpty() && (this.jQ.addClass("dcg-mq-empty"), this.isEmptyParens() && this.jQ.addClass("dcg-mq-empty-parens")), this
                }
            });
        F.StaticMath = function(e) {
            return w(e.AbstractMathQuill, function(t, n) {
                this.RootBlock = J, t.__mathquillify = function(e, t) {
                    return this.config(e), n.__mathquillify.call(this, "dcg-mq-math-mode"), this.__controller.delegateMouseEvents(), this.__controller.staticMathTextareaEvents(), this
                }, t.init = function() {
                    n.init.apply(this, arguments);
                    var t = this.innerFields = [];
                    this.__controller.root.postOrder(function(n) {
                        n.registerInnerField(t, e.MathField)
                    })
                }, t.latex = function() {
                    var t = n.latex.apply(this, arguments);
                    if (arguments.length > 0) {
                        var r = this.innerFields = [];
                        this.__controller.root.postOrder(function(t) {
                            t.registerInnerField(r, e.MathField)
                        })
                    }
                    return t
                }, t.setAriaLabel = function(e) {
                    this.__controller.ariaLabel = "string" == typeof e ? e : "";
                    var t = "Math Input" !== this.__controller.ariaLabel ? this.__controller.ariaLabel + ": " : "";
                    return this.__controller.container.attr("aria-label", t + this.__controller.root.mathspeak().trim()), this
                }, t.getAriaLabel = function() {
                    return this.__controller.ariaLabel || ""
                }
            })
        };
        var ee = w(J, d);
        F.MathField = function(t) {
            return w(t.EditableField, function(t, n) {
                this.RootBlock = ee, t.__mathquillify = function(t, r) {
                    return this.config(t), r > 1 && (this.__controller.root.reflow = e), n.__mathquillify.call(this, "dcg-mq-editable-field dcg-mq-math-mode"), delete this.__controller.root.reflow, this
                }
            })
        };
        var te = w($, function(e, t) {
                e.finalizeTree = e.siblingDeleted = e.siblingCreated = function(e, t) {
                    t !== _ && this[S] instanceof te || this.fixDigitGrouping(e)
                }, e.fixDigitGrouping = function(e) {
                    if (e.enableDigitGrouping) {
                        var t = this,
                            n = this,
                            r = 0,
                            i = [],
                            o = t;
                        do {
                            if (/^[0-9]$/.test(o.ctrlSeq)) t = o;
                            else if ("\\ " === o.ctrlSeq) t = o, r += 1;
                            else {
                                if ("." !== o.ctrlSeq) break;
                                t = o, i.push(o)
                            }
                        } while (o = t[_]);
                        for (; o = n[S];)
                            if (/^[0-9]$/.test(o.ctrlSeq)) n = o;
                            else if ("\\ " === o.ctrlSeq) n = o, r += 1;
                        else {
                            if ("." !== o.ctrlSeq) break;
                            n = o, i.push(o)
                        }
                        for (; n !== t && "\\ " === t.ctrlSeq;) t = t[S], r -= 1;
                        for (; n !== t && "\\ " === n.ctrlSeq;) n = n[_], r -= 1;
                        if (t !== n || "\\ " !== t.ctrlSeq) {
                            r > 0 || i.length > 1 ? this.removeGroupingBetween(t, n) : i[0] ? (i[0] !== t && this.addGroupingBetween(i[0][_], t), i[0] !== n && this.removeGroupingBetween(i[0][S], n)) : this.addGroupingBetween(n, t)
                        }
                    }
                }, e.removeGroupingBetween = function(e, t) {
                    var n = e;
                    do {
                        if (n.setGroupingClass(g), n === t) break
                    } while (n = n[S])
                }, e.addGroupingBetween = function(e, t) {
                    for (var n = e, r = 0, i = 0, n = e; n && (i += 1, n !== t);) n = n[_];
                    var o = i % 3;
                    0 === o && (o = 3);
                    for (var n = e; n && (r += 1, cls = g, i >= 4 && (r === i ? cls = "dcg-mq-group-leading-" + o : r % 3 == 0 && r !== i && (cls = "dcg-mq-group-start"), cls || (cls = "dcg-mq-group-other")), n.setGroupingClass(cls), n !== t);) n = n[_]
                }, e.setGroupingClass = function(e) {
                    this._groupingClass !== e && (this._groupingClass && this.jQ.removeClass(this._groupingClass), e && this.jQ.addClass(e), this._groupingClass = e)
                }
            }),
            ne = w(te, function(e, t) {
                e.init = function(e, n, r) {
                    t.init.call(this, e, '<span class="dcg-mq-digit">' + (n || e) + "</span>", g, r)
                }, e.createLeftOf = function(e) {
                    e.options.autoSubscriptNumerals && e.parent !== e.parent.parent.sub && (e[_] instanceof re && !1 !== e[_].isItalic || e[_] instanceof we && e[_][_] instanceof re && !1 !== e[_][_].isItalic) ? (D._().createLeftOf(e), t.createLeftOf.call(this, e), e.insRightOf(e.parent.parent)) : t.createLeftOf.call(this, e)
                }, e.mathspeak = function(e) {
                    if (e && e.createdLeftOf) {
                        var n = e.createdLeftOf;
                        if (n.options.autoSubscriptNumerals && n.parent !== n.parent.parent.sub && (n[_] instanceof re && !1 !== n[_].isItalic || n[_] instanceof we && n[_][_] instanceof re && !1 !== n[_][_].isItalic)) return "Subscript " + t.mathspeak.call(this) + " Baseline"
                    }
                    return t.mathspeak.apply(this, arguments)
                }
            }),
            re = w($, function(e, t) {
                e.init = function(e, n) {
                    t.init.call(this, e, "<var>" + (n || e) + "</var>")
                }, e.text = function() {
                    var e = this.ctrlSeq;
                    return this.isPartOfOperator ? "\\" == e[0] ? e = e.slice(1, e.length) : " " == e[e.length - 1] && (e = e.slice(0, -1)) : (!this[_] || this[_] instanceof re || this[_] instanceof Z || "\\ " === this[_].ctrlSeq || (e = "*" + e), !this[S] || this[S] instanceof Z || this[S] instanceof we || (e += "*")), e
                }, e.mathspeak = function() {
                    var e = this.ctrlSeq;
                    return this.isPartOfOperator || 1 !== e.length ? t.mathspeak.call(this) : '"' + e + '"'
                }
            });
        q.p.autoCommands = {
            _maxLength: 0
        }, N.autoCommands = function(e) {
            if (!/^[a-z]+(?: [a-z]+)*$/i.test(e)) throw '"' + e + '" not a space-delimited list of only letters';
            for (var t = e.split(" "), n = {}, r = 0, i = 0; i < t.length; i += 1) {
                var o = t[i];
                if (o.length < 2) throw 'autocommand "' + o + '" not minimum length of 2';
                if (D[o] === le) throw '"' + o + '" is a built-in operator name';
                n[o] = 1, r = b(r, o.length)
            }
            return n._maxLength = r, n
        }, q.p.autoParenthesizedFunctions = {
            _maxLength: 0
        }, N.autoParenthesizedFunctions = function(e) {
            if (!/^[a-z]+(?: [a-z]+)*$/i.test(e)) throw '"' + e + '" not a space-delimited list of only letters';
            for (var t = e.split(" "), n = {}, r = 0, i = 0; i < t.length; i += 1) {
                var o = t[i];
                if (o.length < 2) throw 'autocommand "' + o + '" not minimum length of 2';
                n[o] = 1, r = b(r, o.length)
            }
            return n._maxLength = r, n
        };
        var ie = w(re, function(e, t) {
                function n(e) {
                    return !e || ("." === e.ctrlSeq || (e instanceof Z || e instanceof _e))
                }
                e.init = function(e) {
                    return t.init.call(this, this.letter = e)
                }, e.checkAutoCmds = function(e) {
                    var t = e.options.autoCommands,
                        n = t._maxLength;
                    if (n > 0) {
                        for (var r = "", i = this, o = 0; i instanceof ie && i.ctrlSeq === i.letter && o < n;) r = i.letter + r, i = i[_], o += 1;
                        for (; r.length;) {
                            if (t.hasOwnProperty(r)) {
                                for (var o = 1, i = this; o < r.length; o += 1, i = i[_]);
                                return k(i, this).remove(), e[_] = i[_], D[r](r).createLeftOf(e)
                            }
                            r = r.slice(1)
                        }
                    }
                }, e.autoParenthesize = function(e) {
                    var t = e.parent.ends[S];
                    if (!(t && t instanceof Ce && "\\left(" === t.ctrlSeq || this.isParentSimpleSubscript())) {
                        for (var n = "", r = this, i = 0, o = e.options.autoParenthesizedFunctions, a = o._maxLength, s = e.options.autoOperatorNames; r instanceof ie && i < a;) n = r.letter + n, r = r[_], i += 1;
                        for (; n.length;) {
                            if (o.hasOwnProperty(n) && s.hasOwnProperty(n)) return e.parent.write(e, "(");
                            n = n.slice(1)
                        }
                    }
                }, e.createLeftOf = function(e) {
                    t.createLeftOf.apply(this, arguments), this.checkAutoCmds(e), this.autoParenthesize(e)
                }, e.italicize = function(e) {
                    return this.isItalic = e, this.isPartOfOperator = !e, this.jQ.toggleClass("dcg-mq-operator-name", !e), this
                }, e.finalizeTree = e.siblingDeleted = e.siblingCreated = function(e, t) {
                    t !== _ && this[S] instanceof ie || this.autoUnItalicize(e)
                }, e.autoUnItalicize = function(e) {
                    var t = e.autoOperatorNames;
                    if (0 !== t._maxLength && !this.isParentSimpleSubscript()) {
                        for (var r = this.letter, i = this[_]; i instanceof ie; i = i[_]) r = i.letter + r;
                        for (var o = this[S]; o instanceof ie; o = o[S]) r += o.letter;
                        k(i[S] || this.parent.ends[_], o[_] || this.parent.ends[S]).each(function(e) {
                            e.italicize(!0).jQ.removeClass("dcg-mq-first dcg-mq-last dcg-mq-followed-by-supsub"), e.ctrlSeq = e.letter
                        });
                        e: for (var a = 0, s = i[S] || this.parent.ends[_]; a < r.length; a += 1, s = s[S])
                            for (var l = v(t._maxLength, r.length - a); l > 0; l -= 1) {
                                var c = r.slice(a, a + l);
                                if (t.hasOwnProperty(c)) {
                                    for (var u = 0, p = s; u < l; u += 1, p = p[S]) {
                                        p.italicize(!1);
                                        var d = p
                                    }
                                    var h = oe.hasOwnProperty(c);
                                    if (s.ctrlSeq = (h ? "\\" : "\\operatorname{") + s.ctrlSeq, d.ctrlSeq += h ? " " : "}", se.hasOwnProperty(c) && d[_][_][_].jQ.addClass("dcg-mq-last"), n(s[_]) || s.jQ.addClass("dcg-mq-first"), !n(d[S]))
                                        if (d[S] instanceof we) {
                                            var f = d[S],
                                                m = f.siblingCreated = f.siblingDeleted = function() {
                                                    f.jQ.toggleClass("dcg-mq-after-operator-name", !(f[S] instanceof Ce))
                                                };
                                            m()
                                        } else d.jQ.toggleClass("dcg-mq-last", !(d[S] instanceof Ce));
                                    a += l - 1, s = d;
                                    continue e
                                }
                            }
                    }
                }
            }),
            oe = {},
            ae = q.p.autoOperatorNames = {
                _maxLength: 9
            },
            se = {
                limsup: 1,
                liminf: 1,
                projlim: 1,
                injlim: 1
            };
        ! function() {
            for (var e = "arg deg det dim exp gcd hom inf ker lg lim ln log max min sup limsup liminf injlim projlim Pr".split(" "), t = 0; t < e.length; t += 1) oe[e[t]] = ae[e[t]] = 1;
            for (var n = "sin cos tan arcsin arccos arctan sinh cosh tanh sec csc cot coth".split(" "), t = 0; t < n.length; t += 1) oe[n[t]] = 1;
            for (var r = "sin cos tan sec cosec csc cotan cot ctg".split(" "), t = 0; t < r.length; t += 1) ae[r[t]] = ae["arc" + r[t]] = ae[r[t] + "h"] = ae["ar" + r[t] + "h"] = ae["arc" + r[t] + "h"] = 1;
            for (var i = "gcf hcf lcm proj span".split(" "), t = 0; t < i.length; t += 1) ae[i[t]] = 1
        }(), N.autoOperatorNames = function(e) {
            if ("string" != typeof e) throw '"' + e + '" not a space-delimited list';
            if (!/^[a-z\|\-]+(?: [a-z\|\-]+)*$/i.test(e)) throw '"' + e + '" not a space-delimited list of letters or "|"';
            for (var t = e.split(" "), n = {}, r = 0, i = 0; i < t.length; i += 1) {
                var o = t[i];
                if (o.length < 2) throw '"' + o + '" not minimum length of 2';
                if (o.indexOf("|") < 0) n[o] = o, r = b(r, o.length);
                else {
                    var a = o.split("|");
                    if (a.length > 2) throw '"' + o + '" has more than 1 mathspeak delimiter';
                    if (a[0].length < 2) throw '"' + o[0] + '" not minimum length of 2';
                    n[a[0]] = a[1].replace(/-/g, " "), r = b(r, a[0].length)
                }
            }
            return n._maxLength = r, n
        };
        var le = w($, function(e, t) {
            e.init = function(e) {
                this.ctrlSeq = e
            }, e.createLeftOf = function(e) {
                for (var t = this.ctrlSeq, n = 0; n < t.length; n += 1) ie(t.charAt(n)).createLeftOf(e)
            }, e.parser = function() {
                for (var e = this.ctrlSeq, t = J(), n = 0; n < e.length; n += 1) ie(e.charAt(n)).adopt(t, t.ends[S], 0);
                return G.succeed(t.children())
            }
        });
        for (var ce in ae) ae.hasOwnProperty(ce) && (D[ce] = le);
        D.operatorname = w(X, function(t) {
            t.createLeftOf = e, t.numBlocks = function() {
                return 1
            }, t.parser = function() {
                return H.block.map(function(e) {
                    var t = !0,
                        n = "",
                        r = e.children();
                    return r.each(function(e) {
                        e instanceof ie ? n += e.letter : t = !1
                    }), t && "ans" === n ? D[n](n) : r
                })
            }
        }), D.f = w(ie, function(e, t) {
            e.init = function() {
                $.p.init.call(this, this.letter = "f", '<var class="dcg-mq-f">f</var>')
            }, e.italicize = function(e) {
                return this.jQ.html("f").toggleClass("dcg-mq-f", e), t.italicize.apply(this, arguments)
            }
        }), D[" "] = D.space = w(te, function(e, t) {
            e.init = function() {
                t.init.call(this, "\\ ", "<span>&nbsp;</span>", " ")
            }
        }), D["."] = w(te, function(e, t) {
            e.init = function() {
                t.init.call(this, ".", '<span class="dcg-mq-digit">.</span>', ".")
            }
        }), D["'"] = D.prime = t(Q, "'", "&prime;", "prime"), D["″"] = D.dprime = t(Q, "″", "&Prime;", "double prime"), D.backslash = t(Q, "\\backslash ", "\\", "backslash"), P["\\"] || (P["\\"] = D.backslash), D.$ = t(Q, "\\$", "$", "dollar"), D.square = t(Q, "\\square ", "□", "square"), D.mid = t(Q, "\\mid ", "∣", "mid");
        var ue = w($, function(e, t) {
            e.init = function(e, n) {
                t.init.call(this, e, '<span class="dcg-mq-nonSymbola">' + (n || e) + "</span>")
            }
        });
        D["@"] = ue, D["&"] = t(ue, "\\&", "&amp;", "and"), D["%"] = w(ue, function(e, t) {
            e.init = function() {
                t.init.call(this, "\\%", "%", "percent")
            }, e.parser = function() {
                var e = G.optWhitespace,
                    n = G.string;
                return e.then(n("\\operatorname{of}").map(function() {
                    return D.percentof()
                })).or(t.parser.call(this))
            }
        }), D["∥"] = D.parallel = t(Q, "\\parallel ", "&#x2225;", "parallel"), D["∦"] = D.nparallel = t(Q, "\\nparallel ", "&#x2226;", "not parallel"), D["⟂"] = D.perp = t(Q, "\\perp ", "&#x27C2;", "perpendicular"), D.alpha = D.beta = D.gamma = D.delta = D.zeta = D.eta = D.theta = D.iota = D.kappa = D.mu = D.nu = D.xi = D.rho = D.sigma = D.tau = D.chi = D.psi = D.omega = w(re, function(e, t) {
            e.init = function(e) {
                t.init.call(this, "\\" + e + " ", "&" + e + ";")
            }
        }), D.phi = t(re, "\\phi ", "&#981;", "phi"), D.phiv = D.varphi = t(re, "\\varphi ", "&phi;", "phi"), D.epsilon = t(re, "\\epsilon ", "&#1013;", "epsilon"), D.epsiv = D.varepsilon = t(re, "\\varepsilon ", "&epsilon;", "epsilon"), D.piv = D.varpi = t(re, "\\varpi ", "&piv;", "piv"), D.sigmaf = D.sigmav = D.varsigma = t(re, "\\varsigma ", "&sigmaf;", "sigma"), D.thetav = D.vartheta = D.thetasym = t(re, "\\vartheta ", "&thetasym;", "theta"), D.upsilon = D.upsi = t(re, "\\upsilon ", "&upsilon;", "upsilon"), D.gammad = D.Gammad = D.digamma = t(re, "\\digamma ", "&#989;", "gamma"), D.kappav = D.varkappa = t(re, "\\varkappa ", "&#1008;", "kappa"), D.rhov = D.varrho = t(re, "\\varrho ", "&#1009;", "rho"), D.pi = D["π"] = t(ue, "\\pi ", "&pi;", "pi"), D.lambda = t(ue, "\\lambda ", "&lambda;", "lambda"), D.Upsilon = D.Upsi = D.upsih = D.Upsih = t($, "\\Upsilon ", '<var style="font-family: serif">&upsih;</var>', "capital upsilon"), D.Gamma = D.Delta = D.Theta = D.Lambda = D.Xi = D.Pi = D.Sigma = D.Phi = D.Psi = D.Omega = D.forall = w(Q, function(e, t) {
            e.init = function(e) {
                t.init.call(this, "\\" + e + " ", "&" + e + ";")
            }
        });
        var pe = w(X, function(e) {
            e.init = function(e) {
                this.latex = e
            }, e.createLeftOf = function(e) {
                var t = H.parse(this.latex);
                t.children().adopt(e.parent, e[_], e[S]), e[_] = t.ends[S], t.jQize().insertBefore(e.jQ), t.finalizeInsert(e.options, e), t.ends[S][S].siblingCreated && t.ends[S][S].siblingCreated(e.options, _), t.ends[_][_].siblingCreated && t.ends[_][_].siblingCreated(e.options, S), e.parent.bubble(function(e) {
                    e.reflow()
                })
            }, e.mathspeak = function() {
                return H.parse(this.latex).mathspeak()
            }, e.parser = function() {
                var e = H.parse(this.latex).children();
                return G.succeed(e)
            }
        });
        D["⁰"] = t(pe, "^0"), D["¹"] = t(pe, "^1"), D["²"] = t(pe, "^2"), D["³"] = t(pe, "^3"), D["⁴"] = t(pe, "^4"), D["⁵"] = t(pe, "^5"), D["⁶"] = t(pe, "^6"), D["⁷"] = t(pe, "^7"), D["⁸"] = t(pe, "^8"), D["⁹"] = t(pe, "^9"), D["¼"] = t(pe, "\\frac14"), D["½"] = t(pe, "\\frac12"), D["¾"] = t(pe, "\\frac34");
        var de = w(Z, function(e) {
            e.init = Q.prototype.init, e.contactWeld = e.siblingCreated = e.siblingDeleted = function(e, t) {
                function n(e) {
                    return e[_] ? e[_] instanceof Z || /^(\\ )|[,;:\(\[]$/.test(e[_].ctrlSeq) ? "" : "dcg-mq-binary-operator" : e.parent && e.parent.parent && e.parent.parent.isStyleBlock() ? n(e.parent.parent) : ""
                }
                if (t !== S) return this.jQ[0].className = n(this), this
            }
        });
        D["+"] = t(de, "+", "+", "plus"), D["−"] = D["—"] = D["–"] = D["-"] = t(de, "-", "&minus;", "minus"), D["±"] = D.pm = D.plusmn = D.plusminus = t(de, "\\pm ", "&plusmn;", "plus-or-minus"), D.mp = D.mnplus = D.minusplus = t(de, "\\mp ", "&#8723;", "minus-or-plus"), P["*"] = D.sdot = D.cdot = t(Z, "\\cdot ", "&middot;", "*", "times");
        var he = w(Z, function(e, t) {
                e.init = function(e, n) {
                    this.data = e, this.strict = n;
                    var r = n ? "Strict" : "";
                    t.init.call(this, e["ctrlSeq" + r], e["html" + r], e["text" + r], e["mathspeak" + r])
                }, e.swap = function(e) {
                    this.strict = e;
                    var t = e ? "Strict" : "";
                    this.ctrlSeq = this.data["ctrlSeq" + t], this.jQ.html(this.data["html" + t]), this.textTemplate = [this.data["text" + t]], this.mathspeakName = this.data["mathspeak" + t]
                }, e.deleteTowards = function(e, n) {
                    if (e === _ && !this.strict) return this.swap(!0), void this.bubble(function(e) {
                        e.reflow()
                    });
                    t.deleteTowards.apply(this, arguments)
                }
            }),
            fe = {
                ctrlSeq: "\\le ",
                html: "&le;",
                text: "≤",
                mathspeak: "less than or equal to",
                ctrlSeqStrict: "<",
                htmlStrict: "&lt;",
                textStrict: "<",
                mathspeakStrict: "less than"
            },
            me = {
                ctrlSeq: "\\ge ",
                html: "&ge;",
                text: "≥",
                mathspeak: "greater than or equal to",
                ctrlSeqStrict: ">",
                htmlStrict: "&gt;",
                textStrict: ">",
                mathspeakStrict: "greater than"
            };
        D["<"] = D.lt = t(he, fe, !0), D[">"] = D.gt = t(he, me, !0), D["≤"] = D.le = D.leq = t(he, fe, !1), D["≥"] = D.ge = D.geq = t(he, me, !1), D.infty = D.infin = D.infinity = t(Q, "\\infty ", "&infin;", "infinity"), D["≠"] = D.ne = D.neq = t(Z, "\\ne ", "&ne;", "not equal");
        var ge = w(Z, function(e, t) {
            e.init = function() {
                t.init.call(this, "=", "=", "=", "equals")
            }, e.createLeftOf = function(e) {
                if (e[_] instanceof he && e[_].strict) return e[_].swap(!1), void e[_].bubble(function(e) {
                    e.reflow()
                });
                t.createLeftOf.apply(this, arguments)
            }
        });
        D["="] = ge, D["×"] = D.times = t(Z, "\\times ", "&times;", "[x]", "times"), D["÷"] = D.div = D.divide = D.divides = t(Z, "\\div ", "&divide;", "[/]", "over");
        var ye = w(Z, function(e, t) {
                e.init = function() {
                    t.init.call(this, "\\sim ", "~", "~", "tilde")
                }, e.createLeftOf = function(e) {
                    if (e[_] instanceof ye) {
                        var n = e[_];
                        return e[_] = n[_], n.remove(), ve().createLeftOf(e), void e[_].bubble(function(e) {
                            e.reflow()
                        })
                    }
                    t.createLeftOf.apply(this, arguments)
                }
            }),
            ve = w(Z, function(e, t) {
                e.init = function() {
                    t.init.call(this, "\\approx ", "&approx;", "≈", "approximately equal")
                }, e.deleteTowards = function(e, n) {
                    if (e === _) {
                        var r = n[_];
                        return k(r, this).remove(), n[_] = r[_], ye().createLeftOf(n), void n[_].bubble(function(e) {
                            e.reflow()
                        })
                    }
                    t.deleteTowards.apply(this, arguments)
                }
            });
        P["~"] = D.sim = ye, D["≈"] = D.approx = ve;
        var be = {
                sqrt: {
                    html: '<svg preserveAspectRatio="none" viewBox="0 0 32 54"><path d="M0 33 L7 27 L12.5 47 L13 47 L30 0 L32 0 L13 54 L11 54 L4.5 31 L0 33" /></svg>'
                },
                "|": {
                    width: ".4em",
                    html: '<svg preserveAspectRatio="none" viewBox="0 0 10 54"><path d="M4.4 0 L4.4 54 L5.6 54 L5.6 0" /></svg>'
                },
                "[": {
                    width: ".55em",
                    html: '<svg preserveAspectRatio="none" viewBox="0 0 11 24"><path d="M8 0 L3 0 L3 24 L8 24 L8 23 L4 23 L4 1 L8 1" /></svg>'
                },
                "]": {
                    width: ".55em",
                    html: '<svg preserveAspectRatio="none" viewBox="0 0 11 24"><path d="M3 0 L8 0 L8 24 L3 24 L3 23 L7 23 L7 1 L3 1" /></svg>'
                },
                "(": {
                    width: ".55em",
                    html: '<svg preserveAspectRatio="none" viewBox="3 0 106 186"><path d="M85 0 A61 101 0 0 0 85 186 L75 186 A75 101 0 0 1 75 0" /></svg>'
                },
                ")": {
                    width: ".55em",
                    html: '<svg preserveAspectRatio="none" viewBox="3 0 106 186"><path d="M24 0 A61 101 0 0 1 24 186 L34 186 A75 101 0 0 0 34 0" /></svg>'
                },
                "{": {
                    width: ".7em",
                    html: '<svg preserveAspectRatio="none" viewBox="10 0 210 350"><path d="M170 0 L170 6 A47 52 0 0 0 123 60 L123 127 A35 48 0 0 1 88 175 A35 48 0 0 1 123 223 L123 290 A47 52 0 0 0 170 344 L170 350 L160 350 A58 49 0 0 1 102 301 L103 220 A45 40 0 0 0 58 180 L58 170 A45 40 0 0 0 103 130 L103 49 A58 49 0 0 1 161 0" /></svg>'
                },
                "}": {
                    width: ".7em",
                    html: '<svg preserveAspectRatio="none" viewBox="10 0 210 350"><path d="M60 0 L60 6 A47 52 0 0 1 107 60 L107 127 A35 48 0 0 0 142 175 A35 48 0 0 0 107 223 L107 290 A47 52 0 0 1 60 344 L60 350 L70 350 A58 49 0 0 0 128 301 L127 220 A45 40 0 0 1 172 180 L172 170 A45 40 0 0 1 127 130 L127 49 A58 49 0 0 0 70 0" /></svg>'
                },
                "&#8741;": {
                    width: ".7em",
                    html: '<svg preserveAspectRatio="none" viewBox="0 0 10 54"><path d="M3.2 0 L3.2 54 L4 54 L4 0 M6.8 0 L6.8 54 L6 54 L6 0" /></svg>'
                },
                "&lang;": {
                    width: ".55em",
                    html: '<svg preserveAspectRatio="none" viewBox="0 0 10 54"><path d="M6.8 0 L3.2 27 L6.8 54 L7.8 54 L4.2 27 L7.8 0" /></svg>'
                },
                "&rang;": {
                    width: ".55em",
                    html: '<svg preserveAspectRatio="none" viewBox="0 0 10 54"><path d="M3.2 0 L6.8 27 L3.2 54 L2.2 54 L5.8 27 L2.2 0" /></svg>'
                }
            },
            xe = w(X, function(e, t) {
                e.init = function(e, n, r) {
                    t.init.call(this, e, "<" + n + " " + r + ">&0</" + n + ">")
                }
            });
        D.mathrm = t(xe, "\\mathrm", "span", 'class="dcg-mq-roman dcg-mq-font"'), D.mathit = t(xe, "\\mathit", "i", 'class="dcg-mq-font"'), D.mathbf = t(xe, "\\mathbf", "b", 'class="dcg-mq-font"'), D.mathsf = t(xe, "\\mathsf", "span", 'class="dcg-mq-sans-serif dcg-mq-font"'), D.mathtt = t(xe, "\\mathtt", "span", 'class="dcg-mq-monospace dcg-mq-font"'), D.underline = t(xe, "\\underline", "span", 'class="dcg-mq-non-leaf dcg-mq-underline"'), D.overline = D.bar = t(xe, "\\overline", "span", 'class="dcg-mq-non-leaf dcg-mq-overline"'), D.overrightarrow = t(xe, "\\overrightarrow", "span", 'class="dcg-mq-non-leaf dcg-mq-overarrow dcg-mq-arrow-right"'), D.overleftarrow = t(xe, "\\overleftarrow", "span", 'class="dcg-mq-non-leaf dcg-mq-overarrow dcg-mq-arrow-left"'), D.overleftrightarrow = t(xe, "\\overleftrightarrow ", "span", 'class="dcg-mq-non-leaf dcg-mq-overarrow dcg-mq-arrow-leftright"'), D.overarc = t(xe, "\\overarc", "span", 'class="dcg-mq-non-leaf dcg-mq-overarc"');
        var we = (D.textcolor = w(X, function(e, t) {
            e.setColor = function(e) {
                this.color = e, this.htmlTemplate = '<span class="dcg-mq-textcolor" style="color:' + e + '">&0</span>'
            }, e.latex = function() {
                return "\\textcolor{" + this.color + "}{" + this.blocks[0].latex() + "}"
            }, e.parser = function() {
                var e = this,
                    n = G.optWhitespace,
                    r = G.string,
                    i = G.regex;
                return n.then(r("{")).then(i(/^[#\w\s.,()%-]*/)).skip(r("}")).then(function(n) {
                    return e.setColor(n), t.parser.call(e)
                })
            }, e.isStyleBlock = function() {
                return !0
            }
        }), D.class = w(X, function(e, t) {
            e.parser = function() {
                var e = this,
                    n = G.string,
                    r = G.regex;
                return G.optWhitespace.then(n("{")).then(r(/^[-\w\s\\\xA0-\xFF]*/)).skip(n("}")).then(function(n) {
                    return e.cls = n || "", e.htmlTemplate = '<span class="dcg-mq-class ' + n + '">&0</span>', t.parser.call(e)
                })
            }, e.latex = function() {
                return "\\class{" + this.cls + "}{" + this.blocks[0].latex() + "}"
            }, e.isStyleBlock = function() {
                return !0
            }
        }), w(X, function(e, t) {
            e.ctrlSeq = "_{...}^{...}", e.createLeftOf = function(e) {
                if (this.replacedFragment || e[_] || !e.options.supSubsRequireOperand) return t.createLeftOf.apply(this, arguments)
            }, e.contactWeld = function(e) {
                for (var t = _; t; t = t === _ && S)
                    if (this[t] instanceof we) {
                        for (var n = "sub"; n; n = "sub" === n && "sup") {
                            var r = this[n],
                                i = this[t][n];
                            if (r) {
                                if (i)
                                    if (r.isEmpty()) var o = M(i, 0, i.ends[_]);
                                    else {
                                        r.jQ.children().insAtDirEnd(-t, i.jQ);
                                        var a = r.children().disown(),
                                            o = M(i, a.ends[S], i.ends[_]);
                                        t === _ ? a.adopt(i, i.ends[S], 0) : a.adopt(i, 0, i.ends[_])
                                    }
                                else this[t].addBlock(r.disown());
                                this.placeCursor = function(e, n) {
                                    return function(r) {
                                        r.insAtDirEnd(-t, e || n)
                                    }
                                }(i, r)
                            }
                        }
                        this.remove(), e && e[_] === this && (t === S && o ? o[_] ? e.insRightOf(o[_]) : e.insAtLeftEnd(o.parent) : e.insRightOf(this[t]));
                        break
                    }
            }, q.p.charsThatBreakOutOfSupSub = "", e.finalizeTree = function() {
                this.ends[_].write = function(e, t) {
                    if (e.options.autoSubscriptNumerals && this === this.parent.sub) {
                        if ("_" === t) return;
                        var n = this.chToCmd(t, e.options);
                        return n instanceof $ ? e.deleteSelection() : e.clearSelection().insRightOf(this.parent), n.createLeftOf(e.show()), void W.queue("Baseline").alert(n.mathspeak({
                            createdLeftOf: e
                        }))
                    }
                    e[_] && !e[S] && !e.selection && e.options.charsThatBreakOutOfSupSub.indexOf(t) > -1 && (e.insRightOf(this.parent), W.queue("Baseline")), J.p.write.apply(this, arguments)
                }
            }, e.moveTowards = function(e, n, r) {
                n.options.autoSubscriptNumerals && !this.sup ? n.insDirOf(e, this) : t.moveTowards.apply(this, arguments)
            }, e.deleteTowards = function(e, n) {
                if (n.options.autoSubscriptNumerals && this.sub) {
                    var r = this.sub.ends[-e];
                    r instanceof $ ? r.remove() : r && r.deleteTowards(e, n.insAtDirEnd(-e, this.sub)), this.sub.isEmpty() && (this.sub.deleteOutOf(_, n.insAtLeftEnd(this.sub)), this.sup && n.insDirOf(-e, this))
                } else t.deleteTowards.apply(this, arguments)
            }, e.latex = function() {
                function e(e, t) {
                    var n = t && t.latex();
                    return t ? e + (1 === n.length ? n : "{" + (n || " ") + "}") : ""
                }
                return e("_", this.sub) + e("^", this.sup)
            }, e.addBlock = function(e) {
                "sub" === this.supsub ? (this.sup = this.upInto = this.sub.upOutOf = e, e.adopt(this, this.sub, 0).downOutOf = this.sub, e.jQ = E('<span class="dcg-mq-sup"/>').append(e.jQ.children()).prependTo(this.jQ), C.linkElementByBlockNode(e.jQ[0], e)) : (this.sub = this.downInto = this.sup.downOutOf = e, e.adopt(this, 0, this.sup).upOutOf = this.sup, e.jQ = E('<span class="dcg-mq-sub"></span>').append(e.jQ.children()).appendTo(this.jQ.removeClass("dcg-mq-sup-only")), C.linkElementByBlockNode(e.jQ[0], e), this.jQ.append('<span style="display:inline-block;width:0">&#8203;</span>'));
                for (var t = 0; t < 2; t += 1) ! function(e, t, n, r) {
                    e[t].deleteOutOf = function(i, o) {
                        if (o.insDirOf(this[i] ? -i : i, this.parent), !this.isEmpty()) {
                            var a = this.ends[i];
                            this.children().disown().withDirAdopt(i, o.parent, o[i], o[-i]).jQ.insDirOf(-i, o.jQ), o[-i] = a
                        }
                        e.supsub = n, delete e[t], delete e[r + "Into"], e[n][r + "OutOf"] = h, delete e[n].deleteOutOf, "sub" === t && E(e.jQ.addClass("dcg-mq-sup-only")[0].lastChild).remove(), this.remove()
                    }
                }(this, "sub sup".split(" ")[t], "sup sub".split(" ")[t], "down up".split(" ")[t])
            }
        }));
        D.subscript = D._ = w(we, function(e, t) {
            e.supsub = "sub", e.htmlTemplate = '<span class="dcg-mq-supsub dcg-mq-non-leaf"><span class="dcg-mq-sub">&0</span><span style="display:inline-block;width:0">&#8203;</span></span>', e.textTemplate = ["_"], e.mathspeakTemplate = ["Subscript,", ", Baseline"], e.ariaLabel = "subscript", e.finalizeTree = function() {
                this.downInto = this.sub = this.ends[_], this.sub.upOutOf = h, t.finalizeTree.call(this)
            }
        }), D.superscript = D.supscript = D["^"] = w(we, function(e, t) {
            e.supsub = "sup", e.htmlTemplate = '<span class="dcg-mq-supsub dcg-mq-non-leaf dcg-mq-sup-only"><span class="dcg-mq-sup">&0</span></span>', e.textTemplate = ["^"], e.mathspeakTemplate = ["Superscript,", ", Baseline"], e.ariaLabel = "superscript", e.finalizeTree = function() {
                this.upInto = this.sup = this.ends[S], this.sup.downOutOf = h, t.finalizeTree.call(this)
            }
        });
        var _e = w(X, function(e, t) {
            e.init = function(t, n, r) {
                e.ariaLabel = r || ctrlSeq;
                var i = '<span class="dcg-mq-large-operator dcg-mq-non-leaf"><span class="dcg-mq-to"><span>&1</span></span><big>' + n + '</big><span class="dcg-mq-from"><span>&0</span></span></span>';
                $.prototype.init.call(this, t, i)
            }, e.createLeftOf = function(e) {
                t.createLeftOf.apply(this, arguments), e.options.sumStartsWithNEquals && (ie("n").createLeftOf(e), ge().createLeftOf(e))
            }, e.latex = function() {
                function e(e) {
                    return 1 === e.length ? e : "{" + (e || " ") + "}"
                }
                return this.ctrlSeq + "_" + e(this.ends[_].latex()) + "^" + e(this.ends[S].latex())
            }, e.mathspeak = function() {
                return "Start " + this.ariaLabel + " from " + this.ends[_].mathspeak() + " to " + this.ends[S].mathspeak() + ", end " + this.ariaLabel + ", "
            }, e.parser = function() {
                for (var e = G.string, t = G.optWhitespace, n = G.succeed, r = H.block, i = this, o = i.blocks = [J(), J()], a = 0; a < o.length; a += 1) o[a].adopt(i, i.ends[S], 0);
                return t.then(e("_").or(e("^"))).then(function(e) {
                    var t = o["_" === e ? 0 : 1];
                    return r.then(function(e) {
                        return e.children().adopt(t, t.ends[S], 0), n(i)
                    })
                }).many().result(i)
            }, e.finalizeTree = function() {
                this.ends[_].ariaLabel = "lower bound", this.ends[S].ariaLabel = "upper bound", this.downInto = this.ends[_], this.upInto = this.ends[S], this.ends[_].upOutOf = this.ends[S], this.ends[S].downOutOf = this.ends[_]
            }
        });
        D["∑"] = D.sum = D.summation = t(_e, "\\sum ", "&sum;", "sum"), D["∏"] = D.prod = D.product = t(_e, "\\prod ", "&prod;", "product"), D.coprod = D.coproduct = t(_e, "\\coprod ", "&#8720;", "co product"), D["∫"] = D.int = D.integral = w(_e, function(e, t) {
            e.init = function() {
                e.ariaLabel = "integral";
                $.prototype.init.call(this, "\\int ", '<span class="dcg-mq-int dcg-mq-non-leaf"><big>&int;</big><span class="dcg-mq-supsub dcg-mq-non-leaf"><span class="dcg-mq-sup"><span class="dcg-mq-sup-inner">&1</span></span><span class="dcg-mq-sub">&0</span><span style="display:inline-block;width:0">&#8203</span></span></span>', "integral")
            }, e.createLeftOf = X.p.createLeftOf
        });
        var Se = D.frac = D.dfrac = D.cfrac = D.fraction = w(X, function(e, t) {
                e.ctrlSeq = "\\frac", e.htmlTemplate = '<span class="dcg-mq-fraction dcg-mq-non-leaf"><span class="dcg-mq-numerator">&0</span><span class="dcg-mq-denominator">&1</span><span style="display:inline-block;width:0">&#8203;</span></span>', e.textTemplate = ["(", ")/(", ")"], e.finalizeTree = function() {
                    this.upInto = this.ends[S].upOutOf = this.ends[_], this.downInto = this.ends[_].downOutOf = this.ends[S], this.ends[_].ariaLabel = "numerator", this.ends[S].ariaLabel = "denominator", this.getFracDepth() > 1 ? this.mathspeakTemplate = ["StartNestedFraction,", "NestedOver", ", EndNestedFraction"] : this.mathspeakTemplate = ["StartFraction,", "Over", ", EndFraction"]
                }, e.mathspeak = function(e) {
                    if (e && e.createdLeftOf) {
                        return e.createdLeftOf.parent.mathspeak()
                    }
                    return t.mathspeak.apply(this, arguments)
                }, e.getFracDepth = function() {
                    var e = function(t, n) {
                        return t instanceof C && t.ctrlSeq && t.ctrlSeq.toLowerCase().search("frac") >= 0 && (n += 1), t.parent ? e(t.parent, n) : n
                    };
                    return e(this, 0)
                }
            }),
            Ee = D.over = P["/"] = w(Se, function(t, n) {
                t.createLeftOf = function(t) {
                    if (!this.replacedFragment) {
                        var r = t[_];
                        if (!t.options.typingSlashCreatesNewFraction)
                            for (; r && !(r instanceof Z || r instanceof(D.text || e) || r instanceof _e || "\\ " === r.ctrlSeq || /^[,;:]$/.test(r.ctrlSeq));) r = r[_];
                        r instanceof _e && r[S] instanceof we && (r = r[S], r[S] instanceof we && r[S].ctrlSeq != r.ctrlSeq && (r = r[S])), r !== t[_] && (this.replaces(k(r[S] || t.parent.ends[_], t[_])), t[_] = r)
                    }
                    n.createLeftOf.call(this, t)
                }
            });
        D.ans = w($, function(e, t) {
            e.init = function(e) {
                t.init.call(this, "\\operatorname{ans}", '<span class="dcg-mq-ans">ans</span>', "ans")
            }
        }), D.percent = D.percentof = w($, function(e, t) {
            e.init = function() {
                t.init.call(this, "\\%\\operatorname{of}", '<span class="dcg-mq-nonSymbola dcg-mq-operator-name">% of </span>', "percent of")
            }
        });
        var Me = D.sqrt = D["√"] = w(X, function(e, t) {
                e.ctrlSeq = "\\sqrt", e.htmlTemplate = '<span class="dcg-mq-non-leaf dcg-mq-sqrt-container"><span class="dcg-mq-scaled dcg-mq-sqrt-prefix">' + be.sqrt.html + '</span><span class="dcg-mq-non-leaf dcg-mq-sqrt-stem">&0</span></span>', e.textTemplate = ["sqrt(", ")"], e.mathspeakTemplate = ["StartRoot,", ", EndRoot"], e.ariaLabel = "root", e.parser = function() {
                    return H.optBlock.then(function(e) {
                        return H.block.map(function(t) {
                            var n = Ie();
                            return n.blocks = [e, t], e.adopt(n, 0, 0), t.adopt(n, e, 0), n
                        })
                    }).or(t.parser.call(this))
                }
            }),
            Ie = (D.hat = w(X, function(e, t) {
                e.ctrlSeq = "\\hat", e.htmlTemplate = '<span class="dcg-mq-non-leaf"><span class="dcg-mq-hat-prefix">^</span><span class="dcg-mq-hat-stem">&0</span></span>', e.textTemplate = ["hat(", ")"]
            }), D.nthroot = w(Me, function(e, t) {
                e.htmlTemplate = '<span class="dcg-mq-nthroot-container dcg-mq-non-leaf"><sup class="dcg-mq-nthroot dcg-mq-non-leaf">&0</sup><span class="dcg-mq-scaled dcg-mq-sqrt-container"><span class="dcg-mq-sqrt-prefix dcg-mq-scaled">' + be.sqrt.html + '</span><span class="dcg-mq-sqrt-stem dcg-mq-non-leaf">&1</span></span></span>', e.textTemplate = ["sqrt[", "](", ")"], e.latex = function() {
                    return "\\sqrt[" + this.ends[_].latex() + "]{" + this.ends[S].latex() + "}"
                }, e.mathspeak = function() {
                    var e = this.ends[_].mathspeak(),
                        t = this.ends[S].mathspeak();
                    return this.ends[_].ariaLabel = "Index", this.ends[S].ariaLabel = "Radicand", "3" === e ? "Start Cube Root, " + t + ", End Cube Root" : "Root Index " + e + ", Start Root, " + t + ", End Root"
                }
            })),
            Te = (D.cbrt = w(Ie, function(e, t) {
                e.createLeftOf = function(e) {
                    t.createLeftOf.apply(this, arguments), ne("3").createLeftOf(e), e.controller.moveRight()
                }
            }), w(X, function(e, t) {
                e.init = function(e, n, r) {
                    var i = '<span class="dcg-mq-non-leaf"><span class="dcg-mq-diacritic-above">' + n + '</span><span class="dcg-mq-diacritic-stem">&0</span></span>';
                    t.init.call(this, e, i, r)
                }
            }));
        D.vec = t(Te, "\\vec", "&rarr;", ["vec(", ")"]), D.tilde = t(Te, "\\tilde", "~", ["tilde(", ")"]);
        var Ce = w(w(X, f), function(t, n) {
                t.init = function(e, t, r, i, o) {
                    n.init.call(this, "\\left" + i, g, [t, r]), this.side = e, this.sides = {}, this.sides[_] = {
                        ch: t,
                        ctrlSeq: i
                    }, this.sides[S] = {
                        ch: r,
                        ctrlSeq: o
                    }
                }, t.numBlocks = function() {
                    return 1
                }, t.html = function() {
                    var e = this.getSymbol(_),
                        t = this.getSymbol(S);
                    return this.htmlTemplate = '<span class="dcg-mq-non-leaf dcg-mq-bracket-container"><span style="width:' + e.width + '" class="dcg-mq-scaled dcg-mq-bracket-l dcg-mq-paren' + (this.side === S ? " dcg-mq-ghost" : "") + '">' + e.html + '</span><span style="margin-left:' + e.width + ";margin-right:" + t.width + '" class="dcg-mq-bracket-middle dcg-mq-non-leaf">&0</span><span style="width:' + t.width + '" class="dcg-mq-scaled dcg-mq-bracket-r dcg-mq-paren' + (this.side === _ ? " dcg-mq-ghost" : "") + '">' + t.html + "</span></span>", n.html.call(this)
                }, t.getSymbol = function(e) {
                    return be[this.sides[e || S].ch] || {
                        width: "0",
                        html: ""
                    }
                }, t.latex = function() {
                    return "\\left" + this.sides[_].ctrlSeq + this.ends[_].latex() + "\\right" + this.sides[S].ctrlSeq
                }, t.mathspeak = function(e) {
                    var t = this.sides[_].ch,
                        r = this.sides[S].ch;
                    if ("|" === t && "|" === r) this.mathspeakTemplate = ["StartAbsoluteValue,", ", EndAbsoluteValue"], this.ariaLabel = "absolute value";
                    else {
                        if (e && e.createdLeftOf && this.side) {
                            var i = "";
                            return this.side === _ ? i = this.textTemplate[0] : this.side === S && (i = this.textTemplate[1]), (this.side === _ ? "left " : "right ") + De[i]
                        }
                        this.mathspeakTemplate = ["left " + De[t] + ",", ", right " + De[r]], this.ariaLabel = De[t] + " block"
                    }
                    return n.mathspeak.call(this)
                }, t.matchBrack = function(e, t, n) {
                    return n instanceof Ce && n.side && n.side !== -t && (!e.restrictMismatchedBrackets || ke[this.sides[this.side].ch] === n.sides[n.side].ch || {
                        "(": "]",
                        "[": ")"
                    } [this.sides[_].ch] === n.sides[S].ch) && n
                }, t.closeOpposing = function(e) {
                    e.side = 0, e.sides[this.side] = this.sides[this.side];
                    var t = e.delimjQs.eq(this.side === _ ? 0 : 1).removeClass("dcg-mq-ghost");
                    this.replaceBracket(t, this.side)
                }, t.createLeftOf = function(e) {
                    if (!this.replacedFragment) {
                        var t = e.options;
                        if ("|" === this.sides[_].ch) var r = this.matchBrack(t, S, e[S]) || this.matchBrack(t, _, e[_]) || this.matchBrack(t, 0, e.parent.parent);
                        else var r = this.matchBrack(t, -this.side, e[-this.side]) || this.matchBrack(t, -this.side, e.parent.parent)
                    }
                    if (r) {
                        var i = this.side = -r.side;
                        this.closeOpposing(r), r === e.parent.parent && e[i] && k(e[i], e.parent.ends[i], -i).disown().withDirAdopt(-i, r.parent, r, r[i]).jQ.insDirOf(i, r.jQ), r.bubble(function(e) {
                            e.reflow()
                        })
                    } else r = this, i = r.side, r.replacedFragment ? r.side = 0 : e[-i] && (r.replaces(k(e[-i], e.parent.ends[-i], i)), e[-i] = 0), n.createLeftOf.call(r, e);
                    i === _ ? e.insAtLeftEnd(r.ends[_]) : e.insRightOf(r)
                }, t.placeCursor = e, t.unwrap = function() {
                    this.ends[_].children().disown().adopt(this.parent, this, this[S]).jQ.insertAfter(this.jQ), this.remove()
                }, t.deleteSide = function(e, t, n) {
                    var r = this.parent,
                        i = this[e],
                        o = r.ends[e];
                    if (e === this.side) return this.unwrap(), void(i ? n.insDirOf(-e, i) : n.insAtDirEnd(e, r));
                    var a = n.options,
                        s = !this.side;
                    if (this.side = -e, this.matchBrack(a, e, this.ends[_].ends[this.side])) {
                        this.closeOpposing(this.ends[_].ends[this.side]);
                        var l = this.ends[_].ends[e];
                        this.unwrap(), l.siblingCreated && l.siblingCreated(n.options, e), i ? n.insDirOf(-e, i) : n.insAtDirEnd(e, r)
                    } else {
                        if (this.matchBrack(a, e, this.parent.parent)) this.parent.parent.closeOpposing(this), this.parent.parent.unwrap();
                        else {
                            if (t && s) return this.unwrap(), void(i ? n.insDirOf(-e, i) : n.insAtDirEnd(e, r));
                            this.sides[e] = {
                                ch: ke[this.sides[this.side].ch],
                                ctrlSeq: ke[this.sides[this.side].ctrlSeq]
                            };
                            var c = this.delimjQs.removeClass("dcg-mq-ghost").eq(e === _ ? 0 : 1).addClass("dcg-mq-ghost");
                            this.replaceBracket(c, e)
                        }
                        if (i) {
                            var l = this.ends[_].ends[e];
                            k(i, o, -e).disown().withDirAdopt(-e, this.ends[_], l, 0).jQ.insAtDirEnd(e, this.ends[_].jQ.removeClass("dcg-mq-empty")), l.siblingCreated && l.siblingCreated(n.options, e), n.insDirOf(-e, i)
                        } else t ? n.insDirOf(e, this) : n.insAtDirEnd(e, this.ends[_])
                    }
                }, t.replaceBracket = function(e, t) {
                    var n = this.getSymbol(t);
                    e.html(n.html).css("width", n.width), t === _ ? e.next().css("margin-left", n.width) : e.prev().css("margin-right", n.width)
                }, t.deleteTowards = function(e, t) {
                    this.deleteSide(-e, !1, t)
                }, t.finalizeTree = function() {
                    this.ends[_].deleteOutOf = function(e, t) {
                        this.parent.deleteSide(e, !0, t)
                    }, this.finalizeTree = this.intentionalBlur = function() {
                        this.delimjQs.eq(this.side === _ ? 1 : 0).removeClass("dcg-mq-ghost"), this.side = 0
                    }
                }, t.siblingCreated = function(e, t) {
                    t === -this.side && this.finalizeTree()
                }
            }),
            ke = {
                "(": ")",
                ")": "(",
                "[": "]",
                "]": "[",
                "{": "}",
                "}": "{",
                "\\{": "\\}",
                "\\}": "\\{",
                "&lang;": "&rang;",
                "&rang;": "&lang;",
                "\\langle ": "\\rangle ",
                "\\rangle ": "\\langle ",
                "|": "|",
                "\\lVert ": "\\rVert ",
                "\\rVert ": "\\lVert "
            },
            De = {
                "&lang;": "angle-bracket",
                "&rang;": "angle-bracket",
                "|": "pipe"
            };
        m("(", null, "parenthesis"), m("[", null, "bracket"), m("{", "\\{", "brace"), D.langle = t(Ce, _, "&lang;", "&rang;", "\\langle ", "\\rangle "), D.rangle = t(Ce, S, "&lang;", "&rang;", "\\langle ", "\\rangle "), P["|"] = t(Ce, _, "|", "|", "|", "|"), D.lVert = t(Ce, _, "&#8741;", "&#8741;", "\\lVert ", "\\rVert "), D.rVert = t(Ce, S, "&#8741;", "&#8741;", "\\lVert ", "\\rVert "), D.left = w(X, function(e) {
            e.parser = function() {
                var e = G.regex,
                    t = G.string,
                    n = (G.succeed, G.optWhitespace);
                return n.then(e(/^(?:[([|]|\\\{|\\langle\b|\\lVert\b)/)).then(function(r) {
                    var i = "\\" === r.charAt(0) ? r.slice(1) : r;
                    return "\\langle" == r && (i = "&lang;", r += " "), "\\lVert" == r && (i = "&#8741;", r += " "), H.then(function(o) {
                        return t("\\right").skip(n).then(e(/^(?:[\])|]|\\\}|\\rangle\b|\\rVert\b)/)).map(function(e) {
                            var t = "\\" === e.charAt(0) ? e.slice(1) : e;
                            "\\rangle" == e && (t = "&rang;", e += " "), "\\rVert" == e && (t = "&#8741;", e += " ");
                            var n = Ce(0, i, t, r, e);
                            return n.blocks = [o], o.adopt(n, 0, 0), n
                        })
                    })
                })
            }
        }), D.right = w(X, function(e) {
            e.parser = function() {
                return G.fail("unmatched \\right")
            }
        });
        var Pe = D.binom = D.binomial = w(w(X, f), function(e, t) {
            var n = be["("],
                r = be[")"];
            e.ctrlSeq = "\\binom", e.htmlTemplate = '<span class="dcg-mq-non-leaf dcg-mq-bracket-container"><span style="width:' + n.width + '" class="dcg-mq-paren dcg-mq-bracket-l dcg-mq-scaled">' + n.html + '</span><span style="margin-left:' + n.width + "; margin-right:" + r.width + ';" class="dcg-mq-non-leaf dcg-mq-bracket-middle"><span class="dcg-mq-array dcg-mq-non-leaf"><span>&0</span><span>&1</span></span></span><span style="width:' + r.width + '" class="dcg-mq-paren dcg-mq-bracket-r dcg-mq-scaled">' + r.html + "</span></span>", e.textTemplate = ["choose(", ",", ")"], e.mathspeakTemplate = ["StartBinomial,", "Choose", ", EndBinomial"], e.ariaLabel = "binomial"
        });
        D.choose = w(Pe, function(e) {
            e.createLeftOf = Ee.prototype.createLeftOf
        });
        D.editable = D.MathQuillMathField = w(X, function(e, t) {
            e.ctrlSeq = "\\MathQuillMathField", e.htmlTemplate = '<span class="dcg-mq-editable-field"><span class="dcg-mq-root-block">&0</span></span>', e.parser = function() {
                var e = this,
                    n = G.string,
                    r = G.regex,
                    i = G.succeed;
                return n("[").then(r(/^[a-z][a-z0-9]*/i)).skip(n("]")).map(function(t) {
                    e.name = t
                }).or(i()).then(t.parser.call(e))
            }, e.finalizeTree = function(e) {
                var t = O(this.ends[_], this.jQ, e);
                t.KIND_OF_MQ = "MathField", t.editable = !0, t.createTextarea(), t.editablesTextareaEvents(), t.cursor.insAtRightEnd(t.root), d(t.root)
            }, e.registerInnerField = function(e, t) {
                e.push(e[this.name] = t(this.ends[_].controller))
            }, e.latex = function() {
                return this.ends[_].latex()
            }, e.text = function() {
                return this.ends[_].text()
            }
        });
        var Le = D.embed = w($, function(e, t) {
                e.setOptions = function(e) {
                    function t() {
                        return ""
                    }
                    return this.text = e.text || t, this.htmlTemplate = e.htmlString || "", this.latex = e.latex || t, this
                }, e.parser = function() {
                    var e = this,
                        t = G.string,
                        n = G.regex,
                        r = G.succeed;
                    return t("{").then(n(/^[a-z][a-z0-9]*/i)).skip(t("}")).then(function(i) {
                        return t("[").then(n(/^[-\w\s]*/)).skip(t("]")).or(r()).map(function(t) {
                            return e.setOptions(B[i](t))
                        })
                    })
                }
            }),
            Ae = p(1);
        for (var Oe in Ae) ! function(e, t) {
            "function" == typeof t ? (u[e] = function() {
                return c(), t.apply(this, arguments)
            }, u[e].prototype = t.prototype) : u[e] = t
        }(Oe, Ae[Oe])
    }(), define("mathquill_src", ["jquery"], function() {}), define("loadcss!Symbola-basic", function() {}), define("loadcss!vendor_css/mathquill/mathquill-basic", function() {}), define("toplevel/mathquill", ["require", "mathquill_src", "loadcss!Symbola-basic", "loadcss!vendor_css/mathquill/mathquill-basic"], function(e) {
        return e("mathquill_src"), e("loadcss!Symbola-basic"), e("loadcss!vendor_css/mathquill/mathquill-basic"), window.MathQuill.noConflict()
    }), define("mathquill", ["require", "browser", "jquery", "toplevel/mathquill"], function(e) {
        var t = e("browser"),
            n = e("jquery"),
            r = e("toplevel/mathquill").getInterface(1),
            i = ["erf|error-function", "TTest|t-test ttest|t-test TScore|t-score tscore|t-score", "iTTest|independent-t-test ittest|independent-t-test IndependentTTest", "TScore|t-score Tscore|t-score tscore|t-score", "normaldist|normal-distribution tdist|t-distribution poissondist|poisson-distribution", "binomialdist|binomial-distribution", "uniformdist|uniform-distribution", "pdf cdf random inverseCdf inversecdf", "histogram dotplot boxplot"].join(" ");
        return r.config({
            leftRightIntoCmdGoes: "up",
            sumStartsWithNEquals: !0,
            supSubsRequireOperand: !0,
            charsThatBreakOutOfSupSub: "+-=<>*",
            autoCommands: "alpha beta sqrt theta phi pi tau nthroot cbrt sum prod int ans percent infinity infty",
            autoSubscriptNumerals: !0,
            restrictMismatchedBrackets: !0,
            typingPercentWritesPercentOf: !0,
            substituteTextarea: function() {
                return t.IS_IOS || t.IS_ANDROID ? n('<span class="dcg-mathquill-input-span" tabindex=0 role="textbox" style="display:inline-block;height:1px;width:1px">')[0] : t.IS_WINDOWS && t.IS_TOUCH ? n("<textarea readonly>").on("keydown", function() {
                    this.readOnly = !1, this.select()
                }).on("blur", function() {
                    this.readOnly = !0
                })[0] : n("<textarea>")[0]
            },
            autoOperatorNames: ["exp|exponent ln|natural-log log", "total length mean median quantile quartile nCr nPr stats", "stdev|standard-deviation stddev|standard-deviation", "stdDev|standard-deviation stdevp|standard-deviation-population", "stddevp|standard-deviation-population stdDevP|standard-deviation-population mad var|variance", "varp|variance-population variance cov|co-variance corr|correlation", "lcm mcm gcd mcd gcf mod ceil|ceiling floor round abs|absolute-value min max sign|signum signum", "sin|sine cos|cosine tan|tangent csc|co-secant sec|secant cot|co-tangent", "sinh|hyperbolic-sine cosh|hyperbolic-cosine tanh|hyperbolic-tangent csch|hyperbolic-co-secant", "sech|hyperbolic-secant coth|hyperbolic-co-tangent", "arcsin|arc-sine arccos|arc-cosine arctan|arc-tangent arccsc|arc-co-secant arcsec|arc-secant", "arccot|arc-co-tangent", "arcsinh|hyperbolic-arc-sine arccosh|hyperbolic-arc-cosine arctanh|hyperbolic-arc-co-tangent", "arccsch|hyperbolic-arc-co-secant arcsech|hyperbolic-arc-secant", "arccoth|hyperbolic-arc-co-tangent", "polygon", "distance midpoint", i].join(" "),
            resetCursorOnBlur: !0,
            enableDigitGrouping: !0
        })
    }),
    function() {
        var e, t, n, r, i, o, a, s, l, c, u, p, d, h, f, m, g = {};
        ! function(e) {
            function t(e, t) {
                return function(n, r) {
                    return e[n] = t ? t(n, r) : r
                }
            }
            var n = "object" == typeof g ? g : "object" == typeof self ? self : "object" == typeof this ? this : {};
            "function" == typeof define && define.amd ? define("tslib", ["exports"], function(r) {
                e(t(n, t(r)))
            }) : e("object" == typeof module && "object" == typeof module.exports ? t(n, t(module.exports)) : t(n))
        }(function(g) {
            var y = Object.setPrototypeOf || {
                __proto__: []
            }
            instanceof Array && function(e, t) {
                e.__proto__ = t
            } || function(e, t) {
                for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n])
            };
            e = function(e, t) {
                function n() {
                    this.constructor = e
                }
                y(e, t), e.prototype = null === t ? Object.create(t) : (n.prototype = t.prototype, new n)
            }, t = Object.assign || function(e) {
                for (var t, n = 1, r = arguments.length; n < r; n++) {
                    t = arguments[n];
                    for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
                }
                return e
            }, n = function(e, t) {
                var n = {};
                for (var r in e) Object.prototype.hasOwnProperty.call(e, r) && t.indexOf(r) < 0 && (n[r] = e[r]);
                if (null != e && "function" == typeof Object.getOwnPropertySymbols)
                    for (var i = 0, r = Object.getOwnPropertySymbols(e); i < r.length; i++) t.indexOf(r[i]) < 0 && (n[r[i]] = e[r[i]]);
                return n
            }, r = function(e, t, n, r) {
                var i, o = arguments.length,
                    a = o < 3 ? t : null === r ? r = Object.getOwnPropertyDescriptor(t, n) : r;
                if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, n, r);
                else
                    for (var s = e.length - 1; s >= 0; s--)(i = e[s]) && (a = (o < 3 ? i(a) : o > 3 ? i(t, n, a) : i(t, n)) || a);
                return o > 3 && a && Object.defineProperty(t, n, a), a
            }, i = function(e, t) {
                return function(n, r) {
                    t(n, r, e)
                }
            }, o = function(e, t) {
                if ("object" == typeof Reflect && "function" == typeof Reflect.metadata) return Reflect.metadata(e, t)
            }, a = function(e, t, n, r) {
                return new(n || (n = Promise))(function(i, o) {
                    function a(e) {
                        try {
                            l(r.next(e))
                        } catch (e) {
                            o(e)
                        }
                    }

                    function s(e) {
                        try {
                            l(r.throw(e))
                        } catch (e) {
                            o(e)
                        }
                    }

                    function l(e) {
                        e.done ? i(e.value) : new n(function(t) {
                            t(e.value)
                        }).then(a, s)
                    }
                    l((r = r.apply(e, t || [])).next())
                })
            }, s = function(e, t) {
                function n(e) {
                    return function(t) {
                        return r([e, t])
                    }
                }

                function r(n) {
                    if (i) throw new TypeError("Generator is already executing.");
                    for (; l;) try {
                        if (i = 1, o && (a = o[2 & n[0] ? "return" : n[0] ? "throw" : "next"]) && !(a = a.call(o, n[1])).done) return a;
                        switch (o = 0, a && (n = [0, a.value]), n[0]) {
                            case 0:
                            case 1:
                                a = n;
                                break;
                            case 4:
                                return l.label++, {
                                    value: n[1],
                                    done: !1
                                };
                            case 5:
                                l.label++, o = n[1], n = [0];
                                continue;
                            case 7:
                                n = l.ops.pop(), l.trys.pop();
                                continue;
                            default:
                                if (a = l.trys, !(a = a.length > 0 && a[a.length - 1]) && (6 === n[0] || 2 === n[0])) {
                                    l = 0;
                                    continue
                                }
                                if (3 === n[0] && (!a || n[1] > a[0] && n[1] < a[3])) {
                                    l.label = n[1];
                                    break
                                }
                                if (6 === n[0] && l.label < a[1]) {
                                    l.label = a[1], a = n;
                                    break
                                }
                                if (a && l.label < a[2]) {
                                    l.label = a[2], l.ops.push(n);
                                    break
                                }
                                a[2] && l.ops.pop(), l.trys.pop();
                                continue
                        }
                        n = t.call(e, l)
                    } catch (e) {
                        n = [6, e], o = 0
                    } finally {
                        i = a = 0
                    }
                    if (5 & n[0]) throw n[1];
                    return {
                        value: n[0] ? n[1] : void 0,
                        done: !0
                    }
                }
                var i, o, a, s, l = {
                    label: 0,
                    sent: function() {
                        if (1 & a[0]) throw a[1];
                        return a[1]
                    },
                    trys: [],
                    ops: []
                };
                return s = {
                    next: n(0),
                    throw: n(1),
                    return: n(2)
                }, "function" == typeof Symbol && (s[Symbol.iterator] = function() {
                    return this
                }), s
            }, l = function(e, t) {
                for (var n in e) t.hasOwnProperty(n) || (t[n] = e[n])
            }, c = function(e) {
                var t = "function" == typeof Symbol && e[Symbol.iterator],
                    n = 0;
                return t ? t.call(e) : {
                    next: function() {
                        return e && n >= e.length && (e = void 0), {
                            value: e && e[n++],
                            done: !e
                        }
                    }
                }
            }, u = function(e, t) {
                var n = "function" == typeof Symbol && e[Symbol.iterator];
                if (!n) return e;
                var r, i, o = n.call(e),
                    a = [];
                try {
                    for (;
                        (void 0 === t || t-- > 0) && !(r = o.next()).done;) a.push(r.value)
                } catch (e) {
                    i = {
                        error: e
                    }
                } finally {
                    try {
                        r && !r.done && (n = o.return) && n.call(o)
                    } finally {
                        if (i) throw i.error
                    }
                }
                return a
            }, p = function() {
                for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(u(arguments[t]));
                return e
            }, d = function(e) {
                return this instanceof d ? (this.v = e, this) : new d(e)
            }, h = function(e, t, n) {
                function r(e) {
                    u[e] && (c[e] = function(t) {
                        return new Promise(function(n, r) {
                            p.push([e, t, n, r]) > 1 || i(e, t)
                        })
                    })
                }

                function i(e, t) {
                    try {
                        o(u[e](t))
                    } catch (e) {
                        l(p[0][3], e)
                    }
                }

                function o(e) {
                    e.value instanceof d ? Promise.resolve(e.value.v).then(a, s) : l(p[0][2], e)
                }

                function a(e) {
                    i("next", e)
                }

                function s(e) {
                    i("throw", e)
                }

                function l(e, t) {
                    e(t), p.shift(), p.length && i(p[0][0], p[0][1])
                }
                if (!Symbol.asyncIterator) throw new TypeError("Symbol.asyncIterator is not defined.");
                var c, u = n.apply(e, t || []),
                    p = [];
                return c = {}, r("next"), r("throw"), r("return"), c[Symbol.asyncIterator] = function() {
                    return this
                }, c
            }, f = function(e) {
                function t(t, i) {
                    e[t] && (n[t] = function(n) {
                        return (r = !r) ? {
                            value: d(e[t](n)),
                            done: "return" === t
                        } : i ? i(n) : n
                    })
                }
                var n, r;
                return n = {}, t("next"), t("throw", function(e) {
                    throw e
                }), t("return"), n[Symbol.iterator] = function() {
                    return this
                }, n
            }, m = function(e) {
                if (!Symbol.asyncIterator) throw new TypeError("Symbol.asyncIterator is not defined.");
                var t = e[Symbol.asyncIterator];
                return t ? t.call(e) : "function" == typeof c ? c(e) : e[Symbol.iterator]()
            }, g("__extends", e), g("__assign", t), g("__rest", n), g("__decorate", r), g("__param", i), g("__metadata", o), g("__awaiter", a), g("__generator", s), g("__exportStar", l), g("__values", c), g("__read", u), g("__spread", p), g("__await", d), g("__asyncGenerator", h), g("__asyncDelegator", f), g("__asyncValues", m)
        })
    }(), define("lib/color-helpers", ["require", "exports"], function(e, t) {
        "use strict";

        function n(e) {
            return r(e) ? (e.match(/^#([A-Fa-f0-9]{3})$/g) && (e = "#" + e[1] + e[1] + e[2] + e[2] + e[3] + e[3]), e.toLowerCase()) : e
        }

        function r(e) {
            return "string" == typeof e && (e.match(/^#([A-Fa-f0-9]{3})$/g) || e.match(/^#([A-Fa-f0-9]{6})$/g))
        }

        function i(e, t) {
            if (e = n(e), !r(e)) return e;
            t > 1 && (t = 1), t < -1 && (t = -1);
            var i = parseInt(e.slice(1), 16),
                o = t < 0 ? 0 : 255,
                a = t < 0 ? -1 * t : t,
                s = i >> 16,
                l = i >> 8 & 255,
                c = 255 & i;
            return "#" + (16777216 + 65536 * (Math.round((o - s) * a) + s) + 256 * (Math.round((o - l) * a) + l) + (Math.round((o - c) * a) + c)).toString(16).slice(1)
        }

        function o(e) {
            if (e = n(e), !r(e)) return e;
            var t = "0123456789abcdef";
            return "#" + e.slice(1).split("").map(function(e) {
                return t[15 - t.indexOf(e)]
            }).join("")
        }

        function a(e) {
            if (e = e.replace(/#/, ""), 3 === e.length) var t = parseInt(e.slice(0, 1) + e.slice(0, 1), 16),
                n = parseInt(e.slice(1, 2) + e.slice(1, 2), 16),
                r = parseInt(e.slice(2, 3) + e.slice(2, 3), 16);
            else if (6 === e.length) var t = parseInt(e.slice(0, 2), 16),
                n = parseInt(e.slice(2, 4), 16),
                r = parseInt(e.slice(4, 6), 16);
            else var t = 0,
                n = 0,
                r = 0;
            return {
                r: t,
                g: n,
                b: r
            }
        }

        function s(e, t) {
            var n = /(rgba\([\d]+\,\ ?[\d]+\,\ ?[\d]+\,\ ?)[\d.]+(\))/;
            return e.match(n) ? e.replace(n, "$1" + t + "$2") : e
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.normalizeColor = n, t.isValidHexColor = r, t.shadeColor = i, t.invertColor = o, t.parseHex = a, t.mutateOpacity = s, t.colors = {
            RED: "#c74440",
            BLUE: "#2d70b3",
            GREEN: "#388c46",
            PURPLE: "#6042a6",
            ORANGE: "#fa7e19",
            BLACK: "#000000",
            GRAY: "#aaaaaa"
        }
    }), define("expressions/colors", ["require", "exports", "lib/color-helpers"], function(e, t, n) {
        "use strict";

        function r(e, t) {
            switch (t) {
                case n.colors.RED:
                    return e.t("red");
                case n.colors.BLUE:
                    return e.t("blue");
                case n.colors.GREEN:
                    return e.t("green");
                case n.colors.PURPLE:
                    return e.t("purple");
                case n.colors.ORANGE:
                    return e.t("orange");
                case n.colors.BLACK:
                    return e.t("black");
                case n.colors.GRAY:
                    return e.t("gray");
                default:
                    return e.t("color unknown")
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.RED = n.colors.RED, t.BLUE = n.colors.BLUE, t.GREEN = n.colors.GREEN, t.PURPLE = n.colors.PURPLE, t.ORANGE = n.colors.ORANGE, t.BLACK = n.colors.BLACK, t.all = [t.RED, t.BLUE, t.GREEN, t.PURPLE, t.ORANGE, t.BLACK], t.getColorName = r
    }), define("expressions/opacity", ["require", "exports"], function(e, t) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.LOW = .2, t.DEFAULT = .4, t.HIGH = .8
    }), define("expressions/styles", ["require", "exports"], function(e, t) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        ! function(e) {
            e.POINT = "POINT", e.OPEN = "OPEN", e.CROSS = "CROSS"
        }(t.PointStyle || (t.PointStyle = {}));
        ! function(e) {
            e.SOLID = "SOLID", e.DASHED = "DASHED", e.DOTTED = "DOTTED", e.SINGLE_PIXEL = "SINGLE_PIXEL"
        }(t.LineStyle || (t.LineStyle = {}))
    }), define("graphing/dragmode", ["require", "exports"], function(e, t) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        ! function(e) {
            e.NONE = "NONE", e.X = "X", e.Y = "Y", e.XY = "XY", e.AUTO = "AUTO"
        }(t.DragMode || (t.DragMode = {}))
    }), define("main/label-sizes", ["require", "exports"], function(e, t) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        ! function(e) {
            e.SMALL = "small", e.MEDIUM = "medium", e.LARGE = "large"
        }(t.LabelSize || (t.LabelSize = {}))
    }), define("main/label-orientations", ["require", "exports"], function(e, t) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        ! function(e) {
            e.DEFAULT = "default", e.LEFT = "left", e.RIGHT = "right", e.ABOVE = "above", e.BELOW = "below"
        }(t.LabelOrientation || (t.LabelOrientation = {}))
    }), define("lib/number-to-latex", ["require", "exports"], function(e, t) {
        "use strict";

        function n(e) {
            if ("string" == typeof e) return e;
            if (void 0 === e) return "";
            var t = e + "";
            return t = t.replace(/1e\+?([-\d]+)/, "10^{$1}"), t = t.replace(/([-\d\.]+)e\+?([-\d]+)/, "$1\\cdot 10^{$2}")
        }

        function r(e) {
            var t = e + "";
            if (/\d+\.?\d*e[\+\-]*\d+/i.test(t)) {
                var n = String(t).toLowerCase().split("e"),
                    r = parseFloat(n[0]),
                    i = parseInt(n[1], 10),
                    o = Math.abs(i),
                    a = Math.abs(r).toString().split(".");
                if (i < 0) t = "0." + new Array(o).join("0") + a.join("");
                else {
                    var s = a[1];
                    s && (o -= s.length), t = a.join("") + new Array(o + 1).join("0")
                }
                r < 0 && (t = "-" + t)
            }
            return t
        }

        function i(e, t) {
            void 0 === t && (t = 2);
            var n = r(e),
                i = n.indexOf(".");
            if (-1 === i) return n;
            for (var o, a = i + 1; a < n.length; a++)
                if (o) {
                    if (n[a] !== o) break
                } else {
                    if ("0" !== n[a] && "9" !== n[a]) break;
                    o = n[a]
                } return n.substr(0, Math.max(i + 5, a + t))
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = n, t.numberToDecimalString = r, t.numberToStatsConfidenceLatex = i
    }), define("console", ["require"], function(e) {
        var t = function() {},
            n = ["log", "info", "warn", "error", "assert", "dir", "clear", "profile", "profileEnd", "time", "timeEnd", "group", "groupCollapsed", "groupEnd", "trace"],
            r = {},
            i = function(e) {
                "undefined" != typeof window && window.console && window.console[e] ? r[e] = function() {
                    Function.prototype.apply.call(window.console[e], window.console, arguments)
                } : r[e] = t
            };
        return n.forEach(i), r
    }), define("lib/console", ["require", "exports", "console"], function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.log = n.log, t.warn = n.warn
    }), define("graphing-calc/api/sanitize-expression", ["require", "exports", "expressions/opacity", "expressions/styles", "graphing/dragmode", "main/label-sizes", "main/label-orientations", "lib/number-to-latex", "lib/console"], function(e, t, n, r, i, o, a, s, l) {
        "use strict";

        function c(e, t) {
            for (var n in t)
                if (t.hasOwnProperty(n) && t[n] === e) return !0;
            return !1
        }

        function u(e) {
            return c(e, t.SanitizedPointStyle)
        }

        function p(e) {
            return c(e, t.SanitizedLineStyle)
        }

        function d(e) {
            return c(e, t.SanitizedDragMode)
        }

        function h(e) {
            return c(e, t.SanitizedColumnMode)
        }

        function f(e) {
            return c(e, t.SanitizedLabelSize)
        }

        function m(e) {
            return c(e, t.SanitizedLabelOrientation)
        }

        function g(e) {
            return {
                id: e.id,
                type: e.type,
                columns: e.columns.map(y)
            }
        }

        function y(e) {
            return {
                id: e.id,
                latex: e.latex,
                color: e.color,
                hidden: e.hidden,
                pointStyle: e.pointStyle,
                lineStyle: e.lineStyle,
                points: e.points,
                lines: e.lines,
                dragMode: e.dragMode,
                values: e.values.slice()
            }
        }

        function v(e) {
            var t = ["latex", "color", "lineStyle", "pointStyle", "fillOpacity", "points", "lines", "fill", "hidden", "secret", "dragMode", "label", "showLabel", "labelSize", "labelOrientation", "verticalLabel", "interactiveLabel"],
                n = {
                    id: e.id,
                    type: e.type
                };
            return t.forEach(function(t) {
                e.hasOwnProperty(t) && (n[t] = e[t])
            }), e.hasOwnProperty("parametricDomain") && (n.parametricDomain = {
                min: e.parametricDomain.min,
                max: e.parametricDomain.max
            }), e.hasOwnProperty("polarDomain") && (n.polarDomain = {
                min: e.polarDomain.min,
                max: e.polarDomain.max
            }), e.hasOwnProperty("domain") && (n.domain = {
                min: e.domain.min,
                max: e.domain.max
            }), e.slider && (e.slider.hardMin && (n.sliderBounds = n.sliderBounds || {}, n.sliderBounds.min = e.slider.min), e.slider.hardMax && (n.sliderBounds = n.sliderBounds || {}, n.sliderBounds.max = e.slider.max), e.slider.step && (n.sliderBounds = n.sliderBounds || {}, n.sliderBounds.step = e.slider.step)), n
        }

        function b(e) {
            return {
                id: e.id,
                type: e.type,
                hidden: e.hidden,
                secret: e.secret
            }
        }

        function x(e) {
            return {
                id: e.id,
                type: e.type,
                hidden: e.hidden,
                secret: e.secret
            }
        }

        function w(e) {
            return {
                id: e.id,
                type: e.type,
                secret: e.secret
            }
        }

        function _(e) {
            switch (e.type) {
                case "expression":
                    return v(e);
                case "table":
                    return g(e);
                case "folder":
                    return x(e);
                case "image":
                    return b(e);
                case "text":
                    return w(e);
                default:
                    return e
            }
        }

        function S(e, t) {
            return e.hasOwnProperty("id") ? e.id + "" : t.generateId()
        }

        function E(e, t) {
            var r = {
                type: "expression",
                id: S(e, t)
            };
            if (r.type = "expression", r.id = S(e, t), e.hasOwnProperty("latex") && (r.latex = e.latex + ""), e.hasOwnProperty("color") && (r.color = e.color + ""), e.hasOwnProperty("points") && (r.points = !!e.points), e.hasOwnProperty("lines") && (r.lines = !!e.lines), e.hasOwnProperty("style") && (l.warn("As of API v1.1 the 'style' property is deprecated and has been split into 'pointStyle' and 'lineStyle'."), u(e.style) ? r.pointStyle = e.style : p(e.style) ? r.lineStyle = e.style : l.warn("Invalid style: '" + e.style + "'.")), e.hasOwnProperty("pointStyle") && (u(e.pointStyle) ? r.pointStyle = e.pointStyle : l.warn("Invalid pointStyle: '" + e.pointStyle + "'.")), e.hasOwnProperty("lineStyle") && (p(e.lineStyle) ? r.lineStyle = e.lineStyle : l.warn("Invalid lineStyle: '" + e.lineStyle + "'.")), e.hasOwnProperty("hidden") && (r.hidden = !!e.hidden), e.hasOwnProperty("secret") && (r.secret = !!e.secret), e.hasOwnProperty("sliderBounds") && e.sliderBounds && (r.slider = {
                    min: s.default(e.sliderBounds.min),
                    max: s.default(e.sliderBounds.max),
                    step: s.default(e.sliderBounds.step)
                }, r.slider.min && (r.slider.hardMin = !0), r.slider.max && (r.slider.hardMax = !0)), e.hasOwnProperty("parametricDomain") && e.parametricDomain ? (r.parametricDomain = {
                    min: s.default(e.parametricDomain.min),
                    max: s.default(e.parametricDomain.max)
                }, e.hasOwnProperty("domain") && l.warn("Both 'parametricDomain' and the deprecated 'domain' property were specified. Using 'parametricDomain'.")) : e.hasOwnProperty("domain") && (l.warn("The 'domain' property is deprecated.Use 'parametricDomain' to specify the domain for parametric functions"), r.parametricDomain = {
                    min: s.default(e.domain.min),
                    max: s.default(e.domain.max)
                }), e.hasOwnProperty("polarDomain") && e.polarDomain && (r.polarDomain = {
                    min: s.default(e.polarDomain.min),
                    max: s.default(e.polarDomain.max)
                }), e.hasOwnProperty("dragMode") && (d(e.dragMode) ? r.dragMode = e.dragMode : l.warn("Invalid dragMode: '" + e.dragMode + "'.")), e.hasOwnProperty("label") && (r.label = e.label + ""), e.hasOwnProperty("showLabel") && (r.showLabel = !!e.showLabel), e.hasOwnProperty("labelSize") && (f(e.labelSize) ? r.labelSize = e.labelSize : l.warn("Invalid labelSize: " + e.labelSize)), e.hasOwnProperty("labelOrientation") && (m(e.labelOrientation) ? r.labelOrientation = e.labelOrientation : l.warn("Invalid labelOrientation: " + e.labelOrientation)), e.hasOwnProperty("fill") && (r.fill = !!e.fill), e.hasOwnProperty("fillOpacity")) {
                var i = parseFloat(e.fillOpacity + "");
                isNaN(i) || !isFinite(i) || i < 0 || i > 1 ? (l.warn("Invalid fillOpacity: " + i + ". Continuing with default."), r.fillOpacity = n.DEFAULT) : r.fillOpacity = i
            }
            return r
        }

        function M(e, n) {
            var r = {
                id: S(e, n)
            };
            return e.hasOwnProperty("latex") && (r.latex = e.latex + ""), e.hasOwnProperty("color") && (r.color = e.color + ""), e.hasOwnProperty("hidden") && (r.hidden = !!e.hidden), e.hasOwnProperty("points") && (r.points = !!e.points), e.hasOwnProperty("lines") && (r.lines = !!e.lines), e.hasOwnProperty("values") && e.values && (r.values = e.values.map(function(e) {
                return e + ""
            })), e.hasOwnProperty("columnMode") && (l.warn("As of API v1.1 the 'columnMode' property is deprecated and has been split into individual 'points' and 'lines' properties."), e.columnMode === t.SanitizedColumnMode.POINTS_AND_LINES ? (r.points = !0, r.lines = !0) : e.columnMode === t.SanitizedColumnMode.LINES ? (r.points = !1, r.lines = !0) : (r.points = !0, r.lines = !1), r.lines && !r.points && e.hasOwnProperty("dragMode") && e.dragMode !== i.DragMode.NONE && (l.warn("A 'lines' value of true and 'points' value of false is only compatible with a dragMode of 'NONE'. Proceeding by setting 'points' to true."), r.points = !0), h(e.columnMode) && l.warn("Invalid columnMode: '" + e.columnMode + "'.")), e.hasOwnProperty("dragMode") && (d(e.dragMode) ? r.dragMode = e.dragMode === i.DragMode.AUTO ? i.DragMode.NONE : e.dragMode : l.warn("Invalid dragMode: '" + e.dragMode + "'.")), r
        }

        function I(e, t) {
            var n = {
                type: "table",
                id: S(e, t)
            };
            return e.hasOwnProperty("columns") && e.columns && (n.columns = e.columns.map(function(e) {
                return M(e, t)
            })), n
        }

        function T(e, t) {
            var n = {
                type: "folder",
                id: S(e, t)
            };
            return e.hasOwnProperty("hidden") && (n.hidden = !!e.hidden), n
        }

        function C(e, t) {
            var n = {
                type: "image",
                id: S(e, t)
            };
            return e.hasOwnProperty("hidden") && (n.hidden = !!e.hidden), n
        }

        function k(e, t, n) {
            var r = e.type;
            if (t && r && r !== t) return void l.warn("Cannot change type of expression from '" + t + "' to '" + r + "'.");
            switch (r) {
                case void 0:
                case "expression":
                    return E(e, n);
                case "image":
                    return C(e, n);
                case "table":
                    return I(e, n);
                case "folder":
                    return T(e, n);
                default:
                    return t ? void l.warn("Cannot modify expressions of type: '" + t + "' through the API.") : void l.warn("Invalid expression type: '" + r + "'.")
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.SanitizedPointStyle = {
            OPEN: r.PointStyle.OPEN,
            CROSS: r.PointStyle.CROSS,
            POINT: r.PointStyle.POINT
        }, t.SanitizedLineStyle = {
            SOLID: r.LineStyle.SOLID,
            DASHED: r.LineStyle.DASHED,
            DOTTED: r.LineStyle.DOTTED
        }, t.SanitizedDragMode = {
            NONE: i.DragMode.NONE,
            AUTO: i.DragMode.AUTO,
            X: i.DragMode.X,
            Y: i.DragMode.Y,
            XY: i.DragMode.XY
        }, t.SanitizedColumnMode = {
            POINTS: "POINTS",
            LINES: "LINES",
            POINTS_AND_LINES: "POINTS_AND_LINES"
        }, t.SanitizedLabelSize = {
            SMALL: o.LabelSize.SMALL,
            MEDIUM: o.LabelSize.MEDIUM,
            LARGE: o.LabelSize.LARGE
        }, t.SanitizedLabelOrientation = {
            ABOVE: a.LabelOrientation.ABOVE,
            BELOW: a.LabelOrientation.BELOW,
            DEFAULT: a.LabelOrientation.DEFAULT,
            LEFT: a.LabelOrientation.LEFT,
            RIGHT: a.LabelOrientation.RIGHT
        }, t.sanitizeItem = _, t.validateItem = k
    }), define("graphing-calc/json/graph-settings", ["require", "exports", "tslib"], function(e, t, n) {
        "use strict";

        function r(e) {
            return e in o
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var i;
        ! function(e) {
            e.NONE = "NONE", e.POSITIVE = "POSITIVE", e.BOTH = "BOTH"
        }(i = t.AxisArrowModes || (t.AxisArrowModes = {}));
        var o = {
                showGrid: !0,
                showXAxis: !0,
                showYAxis: !0,
                xAxisStep: 0,
                yAxisStep: 0,
                xAxisMinorSubdivisions: 0,
                yAxisMinorSubdivisions: 0,
                xAxisArrowMode: i.NONE,
                yAxisArrowMode: i.NONE,
                xAxisLabel: "",
                yAxisLabel: "",
                xAxisNumbers: !0,
                yAxisNumbers: !0,
                polarMode: !1,
                polarNumbers: !0,
                degreeMode: !1,
                randomSeed: "",
                restrictGridToFirstQuadrant: !1
            },
            a = {
                squareAxes: !0
            };
        t.DefaultGraphSettings = n.__assign({}, o, a), t.publicGraphSettings = Object.keys(o), t.isGraphSetting = r
    }), define("main/font_sizes", ["require", "exports"], function(e, t) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.VERY_SMALL = 9, t.SMALL = 12, t.MEDIUM = 16, t.LARGE = 20, t.VERY_LARGE = 24
    }),
    function(e) {
        "use strict";
        var t = function(e, n, r) {
                var i, o, a = document.createElement("img");
                if (a.onerror = n, a.onload = function() {
                        !o || r && r.noRevoke || t.revokeObjectURL(o), n && n(t.scale(a, r))
                    }, t.isInstanceOf("Blob", e) || t.isInstanceOf("File", e)) i = o = t.createObjectURL(e), a._type = e.type;
                else {
                    if ("string" != typeof e) return !1;
                    i = e, r && r.crossOrigin && (a.crossOrigin = r.crossOrigin)
                }
                return i ? (a.src = i, a) : t.readFile(e, function(e) {
                    var t = e.target;
                    t && t.result ? a.src = t.result : n && n(e)
                })
            },
            n = window.createObjectURL && window || window.URL && URL.revokeObjectURL && URL || window.webkitURL && webkitURL;
        t.isInstanceOf = function(e, t) {
            return Object.prototype.toString.call(t) === "[object " + e + "]"
        }, t.transformCoordinates = function() {}, t.getTransformedOptions = function(e) {
            return e
        }, t.renderImageToCanvas = function(e, t, n, r, i, o, a, s, l, c) {
            return e.getContext("2d").drawImage(t, n, r, i, o, a, s, l, c), e
        }, t.hasCanvasOption = function(e) {
            return e.canvas || e.crop
        }, t.scale = function(e, n) {
            n = n || {};
            var r, i, o, a, s, l, c, u, p, d = document.createElement("canvas"),
                h = e.getContext || t.hasCanvasOption(n) && d.getContext,
                f = e.naturalWidth || e.width,
                m = e.naturalHeight || e.height,
                g = f,
                y = m,
                v = function() {
                    var e = Math.max((o || g) / g, (a || y) / y);
                    e > 1 && (g = Math.ceil(g * e), y = Math.ceil(y * e))
                },
                b = function() {
                    var e = Math.min((r || g) / g, (i || y) / y);
                    e < 1 && (g = Math.ceil(g * e), y = Math.ceil(y * e))
                };
            return h && (n = t.getTransformedOptions(n), c = n.left || 0, u = n.top || 0, n.sourceWidth ? (s = n.sourceWidth, void 0 !== n.right && void 0 === n.left && (c = f - s - n.right)) : s = f - c - (n.right || 0), n.sourceHeight ? (l = n.sourceHeight, void 0 !== n.bottom && void 0 === n.top && (u = m - l - n.bottom)) : l = m - u - (n.bottom || 0), g = s, y = l), r = n.maxWidth, i = n.maxHeight, o = n.minWidth, a = n.minHeight, h && r && i && n.crop ? (g = r, y = i, p = s / l - r / i, p < 0 ? (l = i * s / r, void 0 === n.top && void 0 === n.bottom && (u = (m - l) / 2)) : p > 0 && (s = r * l / i, void 0 === n.left && void 0 === n.right && (c = (f - s) / 2))) : ((n.contain || n.cover) && (o = r = r || o, a = i = i || a), n.cover ? (b(), v()) : (v(), b())), h ? (d.width = g, d.height = y, t.transformCoordinates(d, n), t.renderImageToCanvas(d, e, c, u, s, l, 0, 0, g, y)) : (e.width = g, e.height = y, e)
        }, t.createObjectURL = function(e) {
            return !!n && n.createObjectURL(e)
        }, t.revokeObjectURL = function(e) {
            return !!n && n.revokeObjectURL(e)
        }, t.readFile = function(e, t, n) {
            if (window.FileReader) {
                var r = new FileReader;
                if (r.onload = r.onerror = t, n = n || "readAsDataURL", r[n]) return r[n](e), r
            }
            return !1
        }, "function" == typeof define && define.amd ? define("vendor/load-image/load-image", [], function() {
            return t
        }) : e.loadImage = t
    }(this),
    function(e) {
        "use strict";
        "function" == typeof define && define.amd ? define("vendor/load-image/load-image-orientation", ["./load-image"], e) : e(window.loadImage)
    }(function(e) {
        "use strict";
        var t = e.hasCanvasOption;
        e.hasCanvasOption = function(e) {
            return t(e) || e.orientation
        }, e.transformCoordinates = function(e, t) {
            var n = e.getContext("2d"),
                r = e.width,
                i = e.height,
                o = t.orientation;
            if (o) switch (o > 4 && (e.width = i, e.height = r), o) {
                case 2:
                    n.translate(r, 0), n.scale(-1, 1);
                    break;
                case 3:
                    n.translate(r, i), n.rotate(Math.PI);
                    break;
                case 4:
                    n.translate(0, i), n.scale(1, -1);
                    break;
                case 5:
                    n.rotate(.5 * Math.PI), n.scale(1, -1);
                    break;
                case 6:
                    n.rotate(.5 * Math.PI), n.translate(0, -i);
                    break;
                case 7:
                    n.rotate(.5 * Math.PI), n.translate(r, -i), n.scale(-1, 1);
                    break;
                case 8:
                    n.rotate(-.5 * Math.PI), n.translate(-r, 0)
            }
        }, e.getTransformedOptions = function(e) {
            if (!e.orientation || 1 === e.orientation) return e;
            var t, n = {};
            for (t in e) e.hasOwnProperty(t) && (n[t] = e[t]);
            switch (e.orientation) {
                case 2:
                    n.left = e.right, n.right = e.left;
                    break;
                case 3:
                    n.left = e.right, n.top = e.bottom, n.right = e.left, n.bottom = e.top;
                    break;
                case 4:
                    n.top = e.bottom, n.bottom = e.top;
                    break;
                case 5:
                    n.left = e.top, n.top = e.left, n.right = e.bottom, n.bottom = e.right;
                    break;
                case 6:
                    n.left = e.top, n.top = e.right, n.right = e.bottom, n.bottom = e.left;
                    break;
                case 7:
                    n.left = e.bottom, n.top = e.right, n.right = e.top, n.bottom = e.left;
                    break;
                case 8:
                    n.left = e.bottom, n.top = e.left, n.right = e.top, n.bottom = e.right
            }
            return e.orientation > 4 && (n.maxWidth = e.maxHeight, n.maxHeight = e.maxWidth, n.minWidth = e.minHeight, n.minHeight = e.minWidth, n.sourceWidth = e.sourceHeight, n.sourceHeight = e.sourceWidth), n
        }
    }),
    function(e) {
        "use strict";
        "function" == typeof define && define.amd ? define("vendor/load-image/load-image-meta", ["./load-image"], e) : e(window.loadImage)
    }(function(e) {
        "use strict";
        var t = window.Blob && (Blob.prototype.slice || Blob.prototype.webkitSlice || Blob.prototype.mozSlice);
        e.blobSlice = t && function() {
            return (this.slice || this.webkitSlice || this.mozSlice).apply(this, arguments)
        }, e.metaDataParsers = {
            jpeg: {
                65505: []
            }
        }, e.parseMetaData = function(t, n, r) {
            r = r || {};
            var i = this,
                o = r.maxMetaDataSize || 262144,
                a = {};
            !!(window.DataView && t && t.size >= 12 && "image/jpeg" === t.type && e.blobSlice) && e.readFile(e.blobSlice.call(t, 0, o), function(t) {
                var o, s, l, c, u = t.target.result,
                    p = new DataView(u),
                    d = 2,
                    h = p.byteLength - 4,
                    f = d;
                if (65496 === p.getUint16(0)) {
                    for (; d < h && ((o = p.getUint16(d)) >= 65504 && o <= 65519 || 65534 === o);) {
                        if (s = p.getUint16(d + 2) + 2, d + s > p.byteLength) {
                            console.log("Invalid meta data: Invalid segment size.");
                            break
                        }
                        if (l = e.metaDataParsers.jpeg[o])
                            for (c = 0; c < l.length; c += 1) l[c].call(i, p, d, s, a, r);
                        d += s, f = d
                    }!r.disableImageHead && f > 6 && (u.slice ? a.imageHead = u.slice(0, f) : a.imageHead = new Uint8Array(u).subarray(0, f))
                } else console.log("Invalid JPEG file: Missing JPEG marker.");
                n(a)
            }, "readAsArrayBuffer") || n(a)
        }
    }),
    function(e) {
        "use strict";
        "function" == typeof define && define.amd ? define("vendor/load-image/load-image-ios", ["./load-image"], e) : e(window.loadImage)
    }(function(e) {
        "use strict";
        if (window.navigator && window.navigator.platform && /iP(hone|od|ad)/.test(window.navigator.platform)) {
            var t = e.renderImageToCanvas;
            e.detectSubsampling = function(e) {
                var t, n;
                return e.width * e.height > 1048576 && (t = document.createElement("canvas"), t.width = t.height = 1, n = t.getContext("2d"), n.drawImage(e, 1 - e.width, 0), 0 === n.getImageData(0, 0, 1, 1).data[3])
            }, e.detectVerticalSquash = function(e, t) {
                var n, r, i, o, a, s = e.naturalHeight || e.height,
                    l = document.createElement("canvas"),
                    c = l.getContext("2d");
                for (t && (s /= 2), l.width = 1, l.height = s, c.drawImage(e, 0, 0), n = c.getImageData(0, 0, 1, s).data, r = 0, i = s, o = s; o > r;) a = n[4 * (o - 1) + 3], 0 === a ? i = o : r = o, o = i + r >> 1;
                return o / s || 1
            }, e.renderImageToCanvas = function(n, r, i, o, a, s, l, c, u, p) {
                if ("image/jpeg" === r._type) {
                    var d, h, f, m, g = n.getContext("2d"),
                        y = document.createElement("canvas"),
                        v = y.getContext("2d");
                    if (y.width = 1024, y.height = 1024, g.save(), d = e.detectSubsampling(r), d && (i /= 2, o /= 2, a /= 2, s /= 2), h = e.detectVerticalSquash(r, d), d || 1 !== h) {
                        for (o *= h, u = Math.ceil(1024 * u / a), p = Math.ceil(1024 * p / s / h), c = 0, m = 0; m < s;) {
                            for (l = 0, f = 0; f < a;) v.clearRect(0, 0, 1024, 1024), v.drawImage(r, i, o, a, s, -f, -m, a, s), g.drawImage(y, 0, 0, 1024, 1024, l, c, u, p), f += 1024, l += u;
                            m += 1024, c += p
                        }
                        return g.restore(), n
                    }
                }
                return t(n, r, i, o, a, s, l, c, u, p)
            }
        }
    }),
    function(e) {
        "use strict";
        "function" == typeof define && define.amd ? define("vendor/load-image/load-image-exif", ["./load-image", "./load-image-meta"], e) : e(window.loadImage)
    }(function(e) {
        "use strict";
        e.ExifMap = function() {
            return this
        }, e.ExifMap.prototype.map = {
            Orientation: 274
        }, e.ExifMap.prototype.get = function(e) {
            return this[e] || this[this.map[e]]
        }, e.getExifThumbnail = function(e, t, n) {
            var r, i, o;
            if (!n || t + n > e.byteLength) return void console.log("Invalid Exif data: Invalid thumbnail data.");
            for (r = [], i = 0; i < n; i += 1) o = e.getUint8(t + i), r.push((o < 16 ? "0" : "") + o.toString(16));
            return "data:image/jpeg,%" + r.join("%")
        }, e.exifTagTypes = {
            1: {
                getValue: function(e, t) {
                    return e.getUint8(t)
                },
                size: 1
            },
            2: {
                getValue: function(e, t) {
                    return String.fromCharCode(e.getUint8(t))
                },
                size: 1,
                ascii: !0
            },
            3: {
                getValue: function(e, t, n) {
                    return e.getUint16(t, n)
                },
                size: 2
            },
            4: {
                getValue: function(e, t, n) {
                    return e.getUint32(t, n)
                },
                size: 4
            },
            5: {
                getValue: function(e, t, n) {
                    return e.getUint32(t, n) / e.getUint32(t + 4, n)
                },
                size: 8
            },
            9: {
                getValue: function(e, t, n) {
                    return e.getInt32(t, n)
                },
                size: 4
            },
            10: {
                getValue: function(e, t, n) {
                    return e.getInt32(t, n) / e.getInt32(t + 4, n)
                },
                size: 8
            }
        }, e.exifTagTypes[7] = e.exifTagTypes[1], e.getExifValue = function(t, n, r, i, o, a) {
            var s, l, c, u, p, d, h = e.exifTagTypes[i];
            if (!h) return void console.log("Invalid Exif data: Invalid tag type.");
            if (s = h.size * o, (l = s > 4 ? n + t.getUint32(r + 8, a) : r + 8) + s > t.byteLength) return void console.log("Invalid Exif data: Invalid data offset.");
            if (1 === o) return h.getValue(t, l, a);
            for (c = [], u = 0; u < o; u += 1) c[u] = h.getValue(t, l + u * h.size, a);
            if (h.ascii) {
                for (p = "", u = 0; u < c.length && "\0" !== (d = c[u]); u += 1) p += d;
                return p
            }
            return c
        }, e.parseExifTag = function(t, n, r, i, o) {
            var a = t.getUint16(r, i);
            o.exif[a] = e.getExifValue(t, n, r, t.getUint16(r + 2, i), t.getUint32(r + 4, i), i)
        }, e.parseExifTags = function(e, t, n, r, i) {
            var o, a, s;
            if (n + 6 > e.byteLength) return void console.log("Invalid Exif data: Invalid directory offset.");
            if (o = e.getUint16(n, r), (a = n + 2 + 12 * o) + 4 > e.byteLength) return void console.log("Invalid Exif data: Invalid directory size.");
            for (s = 0; s < o; s += 1) this.parseExifTag(e, t, n + 2 + 12 * s, r, i);
            return e.getUint32(a, r)
        }, e.parseExifData = function(t, n, r, i, o) {
            if (!o.disableExif) {
                var a, s, l, c = n + 10;
                if (1165519206 === t.getUint32(n + 4)) {
                    if (c + 8 > t.byteLength) return void console.log("Invalid Exif data: Invalid segment size.");
                    if (0 !== t.getUint16(n + 8)) return void console.log("Invalid Exif data: Missing byte alignment offset.");
                    switch (t.getUint16(c)) {
                        case 18761:
                            a = !0;
                            break;
                        case 19789:
                            a = !1;
                            break;
                        default:
                            return void console.log("Invalid Exif data: Invalid byte alignment marker.")
                    }
                    if (42 !== t.getUint16(c + 2, a)) return void console.log("Invalid Exif data: Missing TIFF marker.");
                    s = t.getUint32(c + 4, a), i.exif = new e.ExifMap, s = e.parseExifTags(t, c, c + s, a, i), s && !o.disableExifThumbnail && (l = {
                        exif: {}
                    }, s = e.parseExifTags(t, c, c + s, a, l), l.exif[513] && (i.exif.Thumbnail = e.getExifThumbnail(t, c + l.exif[513], l.exif[514]))), i.exif[34665] && !o.disableExifSub && e.parseExifTags(t, c, c + i.exif[34665], a, i), i.exif[34853] && !o.disableExifGps && e.parseExifTags(t, c, c + i.exif[34853], a, i)
                }
            }
        }, e.metaDataParsers.jpeg[65505].push(e.parseExifData)
    }),
    function(e) {
        "use strict";
        "function" == typeof define && define.amd ? define("vendor/load-image/load-image-exif-map", ["./load-image", "./load-image-exif"], e) : e(window.loadImage)
    }(function(e) {
        "use strict";
        e.ExifMap.prototype.tags = {
                256: "ImageWidth",
                257: "ImageHeight",
                34665: "ExifIFDPointer",
                34853: "GPSInfoIFDPointer",
                40965: "InteroperabilityIFDPointer",
                258: "BitsPerSample",
                259: "Compression",
                262: "PhotometricInterpretation",
                274: "Orientation",
                277: "SamplesPerPixel",
                284: "PlanarConfiguration",
                530: "YCbCrSubSampling",
                531: "YCbCrPositioning",
                282: "XResolution",
                283: "YResolution",
                296: "ResolutionUnit",
                273: "StripOffsets",
                278: "RowsPerStrip",
                279: "StripByteCounts",
                513: "JPEGInterchangeFormat",
                514: "JPEGInterchangeFormatLength",
                301: "TransferFunction",
                318: "WhitePoint",
                319: "PrimaryChromaticities",
                529: "YCbCrCoefficients",
                532: "ReferenceBlackWhite",
                306: "DateTime",
                270: "ImageDescription",
                271: "Make",
                272: "Model",
                305: "Software",
                315: "Artist",
                33432: "Copyright",
                36864: "ExifVersion",
                40960: "FlashpixVersion",
                40961: "ColorSpace",
                40962: "PixelXDimension",
                40963: "PixelYDimension",
                42240: "Gamma",
                37121: "ComponentsConfiguration",
                37122: "CompressedBitsPerPixel",
                37500: "MakerNote",
                37510: "UserComment",
                40964: "RelatedSoundFile",
                36867: "DateTimeOriginal",
                36868: "DateTimeDigitized",
                37520: "SubSecTime",
                37521: "SubSecTimeOriginal",
                37522: "SubSecTimeDigitized",
                33434: "ExposureTime",
                33437: "FNumber",
                34850: "ExposureProgram",
                34852: "SpectralSensitivity",
                34855: "PhotographicSensitivity",
                34856: "OECF",
                34864: "SensitivityType",
                34865: "StandardOutputSensitivity",
                34866: "RecommendedExposureIndex",
                34867: "ISOSpeed",
                34868: "ISOSpeedLatitudeyyy",
                34869: "ISOSpeedLatitudezzz",
                37377: "ShutterSpeedValue",
                37378: "ApertureValue",
                37379: "BrightnessValue",
                37380: "ExposureBias",
                37381: "MaxApertureValue",
                37382: "SubjectDistance",
                37383: "MeteringMode",
                37384: "LightSource",
                37385: "Flash",
                37396: "SubjectArea",
                37386: "FocalLength",
                41483: "FlashEnergy",
                41484: "SpatialFrequencyResponse",
                41486: "FocalPlaneXResolution",
                41487: "FocalPlaneYResolution",
                41488: "FocalPlaneResolutionUnit",
                41492: "SubjectLocation",
                41493: "ExposureIndex",
                41495: "SensingMethod",
                41728: "FileSource",
                41729: "SceneType",
                41730: "CFAPattern",
                41985: "CustomRendered",
                41986: "ExposureMode",
                41987: "WhiteBalance",
                41988: "DigitalZoomRatio",
                41989: "FocalLengthIn35mmFilm",
                41990: "SceneCaptureType",
                41991: "GainControl",
                41992: "Contrast",
                41993: "Saturation",
                41994: "Sharpness",
                41995: "DeviceSettingDescription",
                41996: "SubjectDistanceRange",
                42016: "ImageUniqueID",
                42032: "CameraOwnerName",
                42033: "BodySerialNumber",
                42034: "LensSpecification",
                42035: "LensMake",
                42036: "LensModel",
                42037: "LensSerialNumber",
                0: "GPSVersionID",
                1: "GPSLatitudeRef",
                2: "GPSLatitude",
                3: "GPSLongitudeRef",
                4: "GPSLongitude",
                5: "GPSAltitudeRef",
                6: "GPSAltitude",
                7: "GPSTimeStamp",
                8: "GPSSatellites",
                9: "GPSStatus",
                10: "GPSMeasureMode",
                11: "GPSDOP",
                12: "GPSSpeedRef",
                13: "GPSSpeed",
                14: "GPSTrackRef",
                15: "GPSTrack",
                16: "GPSImgDirectionRef",
                17: "GPSImgDirection",
                18: "GPSMapDatum",
                19: "GPSDestLatitudeRef",
                20: "GPSDestLatitude",
                21: "GPSDestLongitudeRef",
                22: "GPSDestLongitude",
                23: "GPSDestBearingRef",
                24: "GPSDestBearing",
                25: "GPSDestDistanceRef",
                26: "GPSDestDistance",
                27: "GPSProcessingMethod",
                28: "GPSAreaInformation",
                29: "GPSDateStamp",
                30: "GPSDifferential",
                31: "GPSHPositioningError"
            }, e.ExifMap.prototype.stringValues = {
                ExposureProgram: {
                    0: "Undefined",
                    1: "Manual",
                    2: "Normal program",
                    3: "Aperture priority",
                    4: "Shutter priority",
                    5: "Creative program",
                    6: "Action program",
                    7: "Portrait mode",
                    8: "Landscape mode"
                },
                MeteringMode: {
                    0: "Unknown",
                    1: "Average",
                    2: "CenterWeightedAverage",
                    3: "Spot",
                    4: "MultiSpot",
                    5: "Pattern",
                    6: "Partial",
                    255: "Other"
                },
                LightSource: {
                    0: "Unknown",
                    1: "Daylight",
                    2: "Fluorescent",
                    3: "Tungsten (incandescent light)",
                    4: "Flash",
                    9: "Fine weather",
                    10: "Cloudy weather",
                    11: "Shade",
                    12: "Daylight fluorescent (D 5700 - 7100K)",
                    13: "Day white fluorescent (N 4600 - 5400K)",
                    14: "Cool white fluorescent (W 3900 - 4500K)",
                    15: "White fluorescent (WW 3200 - 3700K)",
                    17: "Standard light A",
                    18: "Standard light B",
                    19: "Standard light C",
                    20: "D55",
                    21: "D65",
                    22: "D75",
                    23: "D50",
                    24: "ISO studio tungsten",
                    255: "Other"
                },
                Flash: {
                    0: "Flash did not fire",
                    1: "Flash fired",
                    5: "Strobe return light not detected",
                    7: "Strobe return light detected",
                    9: "Flash fired, compulsory flash mode",
                    13: "Flash fired, compulsory flash mode, return light not detected",
                    15: "Flash fired, compulsory flash mode, return light detected",
                    16: "Flash did not fire, compulsory flash mode",
                    24: "Flash did not fire, auto mode",
                    25: "Flash fired, auto mode",
                    29: "Flash fired, auto mode, return light not detected",
                    31: "Flash fired, auto mode, return light detected",
                    32: "No flash function",
                    65: "Flash fired, red-eye reduction mode",
                    69: "Flash fired, red-eye reduction mode, return light not detected",
                    71: "Flash fired, red-eye reduction mode, return light detected",
                    73: "Flash fired, compulsory flash mode, red-eye reduction mode",
                    77: "Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",
                    79: "Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",
                    89: "Flash fired, auto mode, red-eye reduction mode",
                    93: "Flash fired, auto mode, return light not detected, red-eye reduction mode",
                    95: "Flash fired, auto mode, return light detected, red-eye reduction mode"
                },
                SensingMethod: {
                    1: "Undefined",
                    2: "One-chip color area sensor",
                    3: "Two-chip color area sensor",
                    4: "Three-chip color area sensor",
                    5: "Color sequential area sensor",
                    7: "Trilinear sensor",
                    8: "Color sequential linear sensor"
                },
                SceneCaptureType: {
                    0: "Standard",
                    1: "Landscape",
                    2: "Portrait",
                    3: "Night scene"
                },
                SceneType: {
                    1: "Directly photographed"
                },
                CustomRendered: {
                    0: "Normal process",
                    1: "Custom process"
                },
                WhiteBalance: {
                    0: "Auto white balance",
                    1: "Manual white balance"
                },
                GainControl: {
                    0: "None",
                    1: "Low gain up",
                    2: "High gain up",
                    3: "Low gain down",
                    4: "High gain down"
                },
                Contrast: {
                    0: "Normal",
                    1: "Soft",
                    2: "Hard"
                },
                Saturation: {
                    0: "Normal",
                    1: "Low saturation",
                    2: "High saturation"
                },
                Sharpness: {
                    0: "Normal",
                    1: "Soft",
                    2: "Hard"
                },
                SubjectDistanceRange: {
                    0: "Unknown",
                    1: "Macro",
                    2: "Close view",
                    3: "Distant view"
                },
                FileSource: {
                    3: "DSC"
                },
                ComponentsConfiguration: {
                    0: "",
                    1: "Y",
                    2: "Cb",
                    3: "Cr",
                    4: "R",
                    5: "G",
                    6: "B"
                },
                Orientation: {
                    1: "top-left",
                    2: "top-right",
                    3: "bottom-right",
                    4: "bottom-left",
                    5: "left-top",
                    6: "right-top",
                    7: "right-bottom",
                    8: "left-bottom"
                }
            }, e.ExifMap.prototype.getText = function(e) {
                var t = this.get(e);
                switch (e) {
                    case "LightSource":
                    case "Flash":
                    case "MeteringMode":
                    case "ExposureProgram":
                    case "SensingMethod":
                    case "SceneCaptureType":
                    case "SceneType":
                    case "CustomRendered":
                    case "WhiteBalance":
                    case "GainControl":
                    case "Contrast":
                    case "Saturation":
                    case "Sharpness":
                    case "SubjectDistanceRange":
                    case "FileSource":
                    case "Orientation":
                        return this.stringValues[e][t];
                    case "ExifVersion":
                    case "FlashpixVersion":
                        return String.fromCharCode(t[0], t[1], t[2], t[3]);
                    case "ComponentsConfiguration":
                        return this.stringValues[e][t[0]] + this.stringValues[e][t[1]] + this.stringValues[e][t[2]] + this.stringValues[e][t[3]];
                    case "GPSVersionID":
                        return t[0] + "." + t[1] + "." + t[2] + "." + t[3]
                }
                return String(t)
            },
            function(e) {
                var t, n = e.tags,
                    r = e.map;
                for (t in n) n.hasOwnProperty(t) && (r[n[t]] = t)
            }(e.ExifMap.prototype), e.ExifMap.prototype.getAll = function() {
                var e, t, n = {};
                for (e in this) this.hasOwnProperty(e) && (t = this.tags[e]) && (n[t] = this.getText(t));
                return n
            }
    }), define("loadImage", ["require", "vendor/load-image/load-image-orientation", "vendor/load-image/load-image-meta", "vendor/load-image/load-image-ios", "vendor/load-image/load-image-exif", "vendor/load-image/load-image-exif-map", "vendor/load-image/load-image"], function(e) {
        return e("vendor/load-image/load-image-orientation"), e("vendor/load-image/load-image-meta"), e("vendor/load-image/load-image-ios"), e("vendor/load-image/load-image-exif"), e("vendor/load-image/load-image-exif-map"), e("vendor/load-image/load-image")
    }), define("expressions/image_file_to_data_url", ["require", "exports", "loadImage"], function(e, t, n) {
        "use strict";

        function r(e, t) {
            for (var n, r = [.92, .86, .8, .7, .6, .5, .4, .3, .2, .1], i = 0; i < r.length; i++)
                if (n = e.toDataURL("image/jpeg", r[i]), n.length < t) return n;
            return n
        }

        function i(e, t) {
            for (var n, r = e.toDataURL().length, i = e.width, o = e.height, a = document.createElement("canvas"), s = 0; s < 2; s++) {
                var l = Math.sqrt(t / r);
                i = Math.round(l * i), o = Math.round(l * o), a.height = o, a.width = i;
                if (a.getContext("2d").drawImage(e, 0, 0, i, o), n = a.toDataURL(), (r = n.length) < t) return n
            }
            return n
        }

        function o(e) {
            for (var t = e.getContext("2d"), n = t.getImageData(0, 0, e.width, e.height).data, r = 3; r < n.length; r += 4)
                if (255 !== n[r]) return !0;
            return !1
        }

        function a(e, t) {
            var a = {
                orientation: !0,
                canvas: !0,
                maxWidth: 1600,
                maxHeight: 1600
            };
            n(e, function(n) {
                if (!n.toDataURL) return void t(!0);
                var a;
                if ("image/jpeg" === e.type) a = r(n, 2e5);
                else if (a = n.toDataURL(), a.length > 2e5) {
                    var s = a.length > .75 * n.width * n.height,
                        l = s && !o(n);
                    a = l ? r(n, 2e5) : i(n, 2e5)
                }
                t(null, a)
            }, a)
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.imageFileToDataURL = a
    }), define("lib/deepCopy", ["require", "exports"], function(e, t) {
        "use strict";

        function n(e) {
            var t = e;
            if (t && "function" == typeof t.toJSON && (t = t.toJSON()), !t) return t;
            if ("object" != typeof t) return t;
            if (Array.isArray(t)) return t.map(n);
            var r = {};
            for (var i in t) t.hasOwnProperty(i) && (r[i] = n(t[i]));
            return r
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = n
    }), define("config", ["require", "exports", "lib/deepCopy"], function(e, t, n) {
        "use strict";

        function r(e) {
            return o[e]
        }

        function i() {
            return n.default(o)
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var o = {},
            a = location.search;
        "?" === a[0] && (a = a.slice(1));
        for (var s = a.split("&"), l = {}, c = 0; c < s.length; c++) {
            var u = s[c].split("=");
            l[u[0]] = 2 !== u.length || u[1]
        }
        if ("undefined" != typeof Desmos && Desmos.config)
            for (var p in Desmos.config) Desmos.config.hasOwnProperty(p) && (l[p] = Desmos.config[p]);
        var d = function(e) {
                return l.hasOwnProperty(e)
            },
            h = function(e) {
                o[e] = d(e)
            },
            f = function(e) {
                o[e] = !d("no" + e)
            };
        h("testing"), h("maintenance"), h("disableScrollFix"), h("nativeOnscreenKeypad"), h("hidden"), h("disableMouseInteractions"), h("advancedStyling"), h("clickableObjects"), h("outofdom"), l.lang && (o.lang = l.lang), l.fontSize && (o.fontSize = l.fontSize), l.backgroundColor && (o.backgroundColor = "#" + l.backgroundColor), l.textColor && (o.textColor = "#" + l.textColor), o.no_navigation_warning = d("noconcat") || d("testing"), o.previewMessage = "You're previewing some new accessibility features.", o.previewFeedbackUrl = "mailto:feedback@desmos.com";
        var m = location && "preview.desmos.com" === location.hostname;
        o.previewMode = d("previewMode") || m, h("lockViewport"), h("administerSecretFolders"), h("advancedStyling"), h("clickableObjects"), h("degreeMode"), h("clearIntoDegreeMode"), h("plaidMode"), h("editOnWeb"), h("crossOriginSaveTest"), h("showResetButtonOnGraphpaper"), h("transparentBackground"), f("links"), f("trace"), h("expressionsCollapsed"), h("invertedColors"), h("projectorMode"), f("images"), f("folders"), f("settingsMenu"), f("expressionsTopbar"), f("zoomButtons"), f("keypad"), f("graphpaper"), f("expressions"), f("expressionsTopbar"), f("settingsMenu"), f("branding"), f("pointsOfInterest"), f("plotSingleVariableImplicitEquations"), f("notes"), h("sciKeypad"), h("4fnKeypad"), h("ans"), d("braille") && (o.braille = !0), f("qwertyKeyboard"), h("restrictedFunctions"), f("functionDefinition"), h("singleExpression"), h("restrictedEditing"), f("labels"), h("bare-i18n"), f("distributions"), o["4fnKeypad"] ? h("decimalToFraction") : f("decimalToFraction"), l.additionalFunctions && "string" == typeof l.additionalFunctions && (o.additionalFunctions = l.additionalFunctions.split(",")), t.get = r, t.all = i
    }), define("lib/i18n", ["require", "exports", "config", "jquery", "underscore", "lib/console"], function(e, t, n, r, i, o) {
        "use strict";

        function a(e, t) {
            f = e || "", m = t || {}
        }

        function s(e) {
            for (var t, n = /(__[^_]+__)/g, r = []; null !== (t = n.exec(e));) r.push({
                index: t.index,
                text: t[0]
            });
            e = e.replace(/[a-z]/gi, "♦");
            for (var i = e.split(""), o = 0; o < r.length; o++)
                for (var a = r[o].index, s = r[o].text, l = 0; l < s.length; l++) i[a + l] = s[l];
            return i.join("")
        }

        function l(e, t, r) {
            var i = void 0 !== r ? r : f,
                o = m[i] && m[i][e] || e || "";
            if (n.get("bare-i18n") && (o = s(o)), t)
                for (var a in t) t.hasOwnProperty(a) && (o = o.split("__" + a + "__").join(t[a]));
            return o
        }

        function c(e) {
            var n = [];
            return i.each(e, function(e) {
                if (e) {
                    var r = e.split("-")[0];
                    n.push(e), n.push(r), i.each(t.enabled_languages, function(e, t) {
                        t.split("-")[0] === r && e.useAsRoot && n.push(t)
                    })
                }
            }), n
        }

        function u() {
            for (var e = c([n.get("lang"), navigator.userLanguage, navigator.language]), r = 0; r < e.length; r++) {
                var o = e[r];
                if (t.enabled_languages.hasOwnProperty(o)) return o;
                if (i.contains(g, o)) return o
            }
            return "en"
        }

        function p() {
            return f
        }

        function d(e) {
            var t = r.Deferred();
            return "undefined" == typeof Desmos ? (t.reject(), t.promise()) : Desmos.supportedLanguages.indexOf(e) >= 0 || "en" === e ? (a(e, Desmos.locales), t.resolve(!0), t.promise()) : (r.get("/api/v1/calculator/language/" + e, function(n) {
                Desmos.locales || (Desmos.locales = {}), Desmos.supportedLanguages || (Desmos.supportedLanguages = []), Desmos.locales[e] = n[e], Desmos.supportedLanguages.push(e), a(e, Desmos.locales), t.resolve(!0)
            }).fail(function(n) {
                404 === n.status && o.warn(e + " is not an available language."), t.reject()
            }), t.promise())
        }

        function h(e, t) {
            if (null === e || void 0 === e) return "";
            if ("string" == typeof e) return e;
            if ("number" == typeof e) return "" + e;
            var n, r = e.vars;
            if (r) {
                n = {};
                for (var i in r) r.hasOwnProperty(i) && (n[i] = h(r[i], t))
            }
            return l(e.msg, n, t)
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.locales = function() {
            return "undefined" != typeof Desmos && Desmos.locales ? Desmos.locales : {}
        }();
        var f = "",
            m = {};
        t.enabled_languages = {
            en: {
                displayName: "English (US)",
                userGuideURL: "https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",
                useAsRoot: !1
            },
            "en-GB": {
                displayName: "English (GB)",
                userGuideURL: "https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",
                useAsRoot: !1
            },
            "es-ES": {
                displayName: "Español (España)",
                userGuideURL: "https://desmos.s3.amazonaws.com/Desmos_User_Guide_ES-ES.pdf",
                useAsRoot: !0
            },
            ru: {
                displayName: "Русский",
                userGuideURL: "https://desmos.s3.amazonaws.com/Desmos_User_Guide_RU.pdf",
                useAsRoot: !1
            },
            da: {
                displayName: "Dansk",
                userGuideURL: "https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",
                useAsRoot: !1
            },
            de: {
                displayName: "Deutsch",
                userGuideURL: "https://desmos.s3.amazonaws.com/Desmos_User_Guide_DE.pdf",
                useAsRoot: !1
            },
            "pt-BR": {
                displayName: "Português (Brasil)",
                userGuideURL: "https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",
                useAsRoot: !1
            },
            "pt-PT": {
                displayName: "Português (Portugal)",
                userGuideURL: "https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",
                useAsRoot: !1
            },
            ca: {
                displayName: "Català",
                userGuideURL: "https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",
                useAsRoot: !1
            },
            fr: {
                displayName: "Français",
                userGuideURL: "https://desmos.s3.amazonaws.com/Desmos_User_Guide_FR.pdf",
                useAsRoot: !1
            },
            it: {
                displayName: "Italiano",
                userGuideURL: "https://desmos.s3.amazonaws.com/Desmos_User_Guide_IT.pdf",
                useAsRoot: !1
            },
            is: {
                displayName: "Íslenska",
                userGuideURL: "https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",
                useAsRoot: !1
            },
            nl: {
                displayName: "Nederlands",
                userGuideURL: "https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",
                useAsRoot: !1
            },
            no: {
                displayName: "Norsk",
                userGuideURL: "https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",
                useAsRoot: !1
            },
            "sv-SE": {
                displayName: "Svenska",
                userGuideURL: "https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",
                useAsRoot: !1
            },
            hr: {
                displayName: "Hrvatski",
                userGuideURL: "https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",
                useAsRoot: !1
            },
            hu: {
                displayName: "Magyar",
                userGuideURL: "https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",
                useAsRoot: !1
            },
            cs: {
                displayName: "Čeština",
                userGuideURL: "https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",
                useAsRoot: !1
            },
            tr: {
                displayName: "Türkçe",
                userGuideURL: "https://desmos.s3.amazonaws.com/Desmos_User_Guide_TR.pdf",
                useAsRoot: !1
            },
            sl: {
                displayName: "Slovenščina",
                userGuideURL: "https://desmos.s3.amazonaws.com/Desmos_User_Guide_SL.pdf",
                useAsRoot: !1
            },
            lt: {
                displayName: "Lietuvių",
                userGuideURL: "https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",
                useAsRoot: !1
            },
            pl: {
                displayName: "Polski",
                userGuideURL: "https://desmos.s3.amazonaws.com/Desmos_User_Guide_PL.pdf",
                useAsRoot: !1
            },
            ro: {
                displayName: "Română",
                userGuideURL: "https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",
                useAsRoot: !1
            },
            id: {
                displayName: "Bahasa Indonesia",
                userGuideURL: "https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",
                useAsRoot: !1
            },
            vi: {
                displayName: "Tiếng Việt",
                userGuideURL: "https://desmos.s3.amazonaws.com/Desmos_User_Guide_VI.pdf",
                useAsRoot: !1
            },
            el: {
                displayName: "Ελληνικά",
                userGuideURL: "https://desmos.s3.amazonaws.com/Desmos_User_Guide_EL.pdf",
                useAsRoot: !1
            },
            "sr-CS": {
                displayName: "SRPSKI",
                userGuideURL: "https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",
                useAsRoot: !1
            },
            bg: {
                displayName: "Български",
                userGuideURL: "https://desmos.s3.amazonaws.com/Desmos_User_Guide_BG.pdf",
                useAsRoot: !1
            },
            mk: {
                displayName: "Македонски",
                userGuideURL: "https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",
                useAsRoot: !1
            },
            uk: {
                displayName: "Українська",
                userGuideURL: "https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",
                useAsRoot: !1
            },
            ka: {
                displayName: "ქართული",
                userGuideURL: "https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",
                useAsRoot: !1
            },
            th: {
                displayName: "ภาษาไทย",
                userGuideURL: "https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",
                useAsRoot: !1
            },
            "zh-CN": {
                displayName: "简体中文",
                useAsRoot: !0,
                userGuideURL: "https://desmos.s3.amazonaws.com/Desmos_User_Guide_ZH-CN.pdf"
            },
            "zh-TW": {
                displayName: "繁體中文",
                userGuideURL: "https://desmos.s3.amazonaws.com/Desmos_User_Guide_ZH-TW.pdf",
                useAsRoot: !1
            },
            ko: {
                displayName: "한국어",
                userGuideURL: "https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",
                useAsRoot: !1
            },
            ja: {
                displayName: "日本語",
                userGuideURL: "https://desmos.s3.amazonaws.com/Desmos_User_Guide_JA.pdf",
                useAsRoot: !1
            }
        };
        var g = ["sr", "bn", "eu", "he", "hi", "ar", "fi", "kk", "ml-IN", "tr", "fa"];
        t.init = a, t.t = l, t.detectLanguage = u, t.currentLanguage = p, t.fetchLanguage = d, t.unpack = h, a(u(), t.locales)
    }), define("pjs", [], function() {
        return function(e, t, n) {
            function r(e) {
                return "object" == typeof e
            }

            function i(e) {
                return "function" == typeof e
            }

            function o() {}

            function a(s, l) {
                function c() {
                    var e = new u;
                    return i(e.init) && e.init.apply(e, arguments), e
                }

                function u() {}
                l === n && (l = s, s = Object), c.Bare = u;
                var p, d = o[e] = s[e],
                    h = u[e] = c[e] = new o;
                return h.constructor = c, c.mixin = function(t) {
                    return u[e] = c[e] = a(c, t)[e], c
                }, (c.open = function(e) {
                    if (p = {}, i(e) ? p = e.call(c, h, d, c, s) : r(e) && (p = e), r(p))
                        for (var n in p) t.call(p, n) && (h[n] = p[n]);
                    return i(h.init) || (h.init = s), c
                })(l)
            }
            return a
        }("prototype", {}.hasOwnProperty)
    }), define("underscore_model", ["require", "underscore", "pjs"], function(e) {
        var t = e("underscore");
        return {
            UnderscoreModel: e("pjs")(function(e) {
                var n = 0,
                    r = "guid_" + Math.round(1e6 * Math.random()) + "_" + (new Date).getTime() + "_";
                e.init = function() {
                    this.__observers = {}, this.__eventObservers = {}, this.__oldProperties = {}, this.__propertyComparators = {}, this.guid = r + ++n
                }, e.unobserveAll = function() {
                    this.__observers = {}, this.__eventObservers = {}
                }, e.getProperty = function(e) {
                    return this[e]
                }, e.getOldProperty = function(e) {
                    return this.__oldProperties[e]
                }, e.setProperty = function(e, n) {
                    var r = this[e];
                    this[e] = n;
                    var i = this.__propertyComparators[e];
                    if (i) {
                        if (i(r, n)) return
                    } else if (t.isEqual(r, n)) return;
                    this.__oldProperties[e] = r, this.notifyPropertyChange(e)
                }, e.setProperties = function(e) {
                    for (var t in e) e.hasOwnProperty(t) && this.setProperty(t, e[t])
                }, e.setPropertyComparator = function(e, t) {
                    this.__propertyComparators[e] = t
                }, e.notifyPropertyChange = function(e) {
                    this.__callObservers(this.__observers, e, this)
                }, e.observe = function(e, t) {
                    this.__addObservers(this.__observers, e, t)
                }, e.unobserve = function(e) {
                    this.__removeObservers(this.__observers, e)
                }, e.observeAndSync = function(e, t) {
                    this.observe(e, t);
                    for (var n = e.split(" "), r = 0; r < n.length; r++) {
                        var i = n[r].split("."),
                            o = i[0];
                        this.hasOwnProperty(o) && t(o, this)
                    }
                }, e.triggerEvent = function(e, t) {
                    this.__callObservers(this.__eventObservers, e, t)
                }, e.observeEvent = function(e, t) {
                    this.__addObservers(this.__eventObservers, e, t)
                }, e.unobserveEvent = function(e) {
                    this.__removeObservers(this.__eventObservers, e)
                }, e.__callObservers = function(e, t, n) {
                    var r = e[t];
                    if (r)
                        for (var i = 0; i < r.length; i++) r[i].callback(t, n)
                }, e.__removeObservers = function(e, t) {
                    for (var n = t.split(" "), r = 0; r < n.length; r++) {
                        var i = n[r].split("."),
                            o = i[0],
                            a = i[1];
                        if (o && a) {
                            var s = e[o],
                                l = [];
                            if (!s) continue;
                            for (var c = 0; c < s.length; c++) {
                                var u = s[c];
                                u.namespace !== a && l.push(u)
                            }
                            e[o] = l
                        } else if (o) delete e[o];
                        else if (a)
                            for (o in e) e.hasOwnProperty(o) && this.__removeObservers(e, o + "." + a)
                    }
                }, e.__addObservers = function(e, t, n) {
                    for (var r = t.split(" "), i = 0; i < r.length; i++) {
                        var o = r[i].split("."),
                            a = o[0];
                        if (!a) throw "Must supply a property to observe";
                        var s = o[1],
                            l = {
                                namespace: s,
                                callback: n
                            },
                            c = e[a];
                        c ? c.push(l) : e[a] = [l]
                    }
                }
            })
        }
    }), define("main/graph_settings", ["require", "pjs", "underscore", "underscore_model", "graphing-calc/json/graph-settings", "console", "graphing-calc/json/graph-settings", "lib/color-helpers"], function(e) {
        var t = e("pjs"),
            n = e("underscore"),
            r = e("underscore_model").UnderscoreModel,
            i = e("graphing-calc/json/graph-settings").AxisArrowModes,
            o = e("console"),
            a = e("graphing-calc/json/graph-settings").DefaultGraphSettings,
            s = e("lib/color-helpers"),
            l = t(r, function(e, t, c) {
                e.init = function() {
                    function e(e, t, n) {
                        function r() {
                            o.setProperty(e, o.config.projectorMode ? n : t)
                        }
                        o.cloneProperties.push(e), o.config.observe("projectorMode", r), r()
                    }

                    function n(e, t, n, r, i) {
                        function a() {
                            var a;
                            a = o.config.projectorMode ? o.highlight ? i : r : o.highlight ? n : t, o.setProperty(e, a)
                        }
                        o.cloneProperties.push(e), o.observe("highlight", a), o.config.observe("projectorMode", a), a()
                    }
                    t.init.call(this), this.stateProperties = [], this.cloneProperties = [], this.config = new r;
                    for (var i in a) a.hasOwnProperty(i) && this.addStateProperty(i, a[i]);
                    this.labelHangingColor = "rgba(150,150,150,1)", this.lastChangedAxis = "x";
                    var o = this;
                    e("labelSize", 14, 19), e("majorAxisOpacity", .4, 1), e("minorAxisOpacity", .12, .25), e("axisOpacity", .9, .9), e("axisLineWidth", 1.5, 2), e("axisLineOffset", .25, 0), e("pixelsPerLabel", 80, 120), n("curveOpacity", .7, 1, .7, 1), e("globalCurveColor", void 0, void 0), e("disableFill", !1, !1), n("graphLineWidth", 2.5, 3.5, 5, 7), n("pointLineWidth", 9, 11, 15, 17)
                }, e.addStateProperty = function(e, t) {
                    this[e] = t, this.stateProperties.push(e), this.cloneProperties.push(e)
                }, c.fromObject = function(e) {
                    var t = l();
                    return t.cloneProperties.forEach(function(n) {
                        e.hasOwnProperty(n) && t.setProperty(n, e[n])
                    }), t
                }, e.registerCallbacks = function(e, t) {
                    var n = this,
                        r = function() {
                            e.redrawAllLayers()
                        };
                    this.stateProperties.forEach(function(e) {
                        n.observe(e, r)
                    }), this.config.observe("backgroundColor", r), this.config.observe("textColor", r), this.config.observe("invertedColors", r), this.observe("squareAxes", function() {
                        e.viewportController.enforceSquareAxes()
                    }), this.observe("degreeMode", function() {
                        t.setDegreeMode(n.degreeMode)
                    }), this.observe("backgroundColor", function() {
                        e.redrawAllLayers()
                    }), this.observe("textColor", function() {
                        e.redrawAllLayers()
                    }), this.config.observe("enableTabindex", function() {
                        e.redrawAllLayers()
                    }), this.config.observeAndSync("restrictedFunctions", function() {
                        t.setRestrictedFunctions(n.config.restrictedFunctions)
                    }), this.config.observeAndSync("distributions", function() {
                        t.setDistributions(n.config.distributions)
                    }), this.config.observeAndSync("pointsOfInterest", function() {
                        t.setPointsOfInterest(n.config.pointsOfInterest)
                    }), this.config.observeAndSync("projectorMode", function() {
                        e.redrawAllLayers()
                    }), this.config.observeAndSync("plotSingleVariableImplicitEquations", function() {
                        t.setPlotSingleVariableImplicitEquations(n.config.plotSingleVariableImplicitEquations)
                    })
                };
                var u = function(e, t) {
                    var r;
                    switch (e) {
                        case "xAxisMinorSubdivisions":
                        case "yAxisMinorSubdivisions":
                            r = Math.round(Math.min(Math.max(0, t), 5)), t !== r && o.warn("minorSubdivisions must be an integer between 0 and 5. You provided " + t + ", which we changed to " + r + ".");
                            break;
                        case "degreeMode":
                        case "projectorMode":
                        case "showGrid":
                        case "showXAxis":
                        case "showYAxis":
                        case "xAxisNumbers":
                        case "yAxisNumbers":
                        case "polarNumbers":
                        case "enableTabindex":
                        case "invertedColors":
                            r = "false" !== t && !!t, t !== r && o.warn(e + " must be a Boolean. You provided " + t + " (" + typeof t + "), which we changed to " + r + " (" + typeof r + ").");
                            break;
                        case "xAxisStep":
                        case "yAxisStep":
                            r = parseFloat(t), isFinite(t) || (r = 0, o.warn(e + " must be a number. You provided " + t + ", which we changed to " + r + "."));
                            break;
                        case "yAxisMinorSubdivisions":
                            r = Math.round(Math.min(Math.max(0, t), 5)), t !== r && o.warn("minorSubdivisions must be an integer between 0 and 5. You provided " + t + ", which we changed to " + r + ".");
                            break;
                        case "xAxisArrowMode":
                        case "yAxisArrowMode":
                            r = i[t], r !== t && (r = i.NONE, o.warn("unknown AxisArrowMode. Allowed values are: \n" + n.keys(i).join("\n")));
                            break;
                        case "xAxisLabel":
                        case "yAxisLabel":
                            r = t, "string" != typeof t && (r = "", o.warn(e + " must be a string. you provided a " + typeof t + "."));
                            break;
                        case "randomSeed":
                            r = t, "string" != typeof t && (r = "" + t, o.warn("randomSeed must be a string. you provided a " + typeof t + "."));
                            break;
                        case "backgroundColor":
                            r = t, "string" != typeof t && (r = "", o.warn(e + " must be a string. you provided a " + typeof t + ".")), r || (r = "#fff"), "#" !== r[0] && (r = "#" + r);
                            break;
                        case "textColor":
                            r = t, "string" != typeof t && (r = "", o.warn(e + " must be a string. you provided a " + typeof t + ".")), r || (r = "#000"), "#" !== r[0] && (r = "#" + r);
                            break;
                        case "fontSize":
                            r = t, "number" != typeof t && (r = parseInt(r, 10), o.warn("fontSize must be a number. Attempted to convert " + t + " to " + r + "."));
                            break;
                        case "language":
                            r = t, "string" != typeof t && (r = "", o.warn(e + " must be a string. you provided a " + typeof t + ".")), "undefined" != typeof Desmos && Desmos.supportedLanguages.indexOf(t) < 0 && "en" !== t && (r = "en", o.warn(t + " is not currently an available language."));
                            break;
                        default:
                            r = t
                    }
                    return r
                };
                e._validateSettings = function(e) {
                    var t = {},
                        n = !1;
                    for (var r in e) this.stateProperties.indexOf(r) >= 0 ? t[r] = u(r, e[r]) : (o.warn('Invalid graph setting "' + r + '".'), n = !0);
                    return n && o.warn("Available graph settings are: \n" + this.stateProperties.join("\n")), t
                }, e.getBackgroundColor = function() {
                    var e = s.normalizeColor(this.config.backgroundColor || "#fff");
                    return this.config.invertedColors && "#ffffff" !== e ? s.invertColor(e) : e
                }, e.getTextColor = function() {
                    var e = s.normalizeColor(this.config.textColor || "#000");
                    return this.config.invertedColors && "#000000" !== e ? s.invertColor(e) : e
                }, e.setGraphSettings = function(e) {
                    var t = this._validateSettings(e);
                    for (var n in t) t.hasOwnProperty(n) && ("projectorMode" === n || "invertedColors" === n || "fontSize" === n || "language" === n || "backgroundColor" === n || "textColor" === n ? this.config.setProperty(n, t[n]) : this.setProperty(n, t[n]))
                }
            });
        return l
    }), define("scroll_helpers", ["require"], function(e) {
        return {
            scrollVisible: function(e, t, n) {
                var r, i = t.height(),
                    o = e.height(),
                    a = t[0].scrollTop,
                    s = e.offset().top + a - t.offset().top,
                    l = s - n,
                    c = o + s + n - i;
                return (r = l >= c ? Math.min(Math.max(a, c), l) : .5 * (l + c)) !== a && (t[0].scrollTop = r, t[0].scrollTop != a)
            }
        }
    }), define("bugsnag", ["require", "exports", "tslib"], function(e, t, n) {
        "use strict";

        function r() {
            return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, function(e) {
                var t = 16 * Math.random() | 0;
                return ("x" == e ? t : 3 & t | 8).toString(16)
            })
        }

        function i() {
            return window.Desmos && window.Desmos.commit
        }

        function o() {
            var e = "production";
            if (location && location.hostname) {
                var t = location.hostname,
                    n = t.split("."),
                    r = n.slice(0, n.length - 2).join(".");
                "desmos.com" === n.slice(n.length - 2).join(".") && (e = r && "www" !== r ? r : "production")
            }
            return e
        }

        function a(e) {
            if (!u) {
                var t = 0,
                    n = r();
                u = e({
                    apiKey: "7f7807097671acbc4557e64bbf5eb529",
                    maxBreadcrumbs: 40,
                    appVersion: i(),
                    releaseStage: o(),
                    consoleBreadcrumbsEnabled: !1,
                    beforeSend: function(e) {
                        if (e.errorClass)
                            for (var r = 0, i = d; r < i.length; r++) {
                                var o = i[r];
                                if (-1 !== e.errorClass.indexOf(o)) return void e.ignore()
                            }
                        if (e.errorMessage)
                            for (var a = 0, s = d; a < s.length; a++) {
                                var o = s[a];
                                if (-1 !== e.errorMessage.indexOf(o)) return void e.ignore()
                            }
                        p && p(e), e.isIgnored() || (t += 1, e.metaData.errorNumber = t, e.metaData.pageLoadId = n)
                    }
                })
            }
        }

        function s(e, t) {
            u && u.notify(e, t)
        }

        function l(e, t, r, i) {
            if (t) {
                t = n.__assign({}, t);
                for (var o in t) try {
                    t[o] = JSON.stringify(t[o], null, 2)
                } catch (e) {
                    t[o] = "[[could not stringify]]"
                }
            }
            u && u.leaveBreadcrumb(e, t, r, i)
        }

        function c(e) {
            p = e
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var u, p, d = ["UnhandledRejection", "lnrAppboy", "socratic", "MyAppGet", "SymBrowser_", "mobincube_", "_avast_submit", "Cannot redefine property: googletag", "jcarousel", "SyntaxError: Unexpected identifier 'script'", "__gCrWeb.autofill.extractForms", "BrowseITEXT", "Can't find variable: removeAllHighlights", "aAttribruteValue.parentNode.getAttribute", "vid_mate_check", "GetImageTagSrcFromPoint", "Can't find variable: didEnterViewPort", "tinyMCE is not defined"];
        t.init = a, t.notify = s, t.leaveBreadcrumb = l, t.setBeforeSendCB = c
    }), define("tours/trip", ["require", "jquery", "pjs", "mathquill", "scroll_helpers", "bugsnag"], function(e) {
        var t = e("jquery"),
            n = e("pjs"),
            r = e("mathquill"),
            i = e("scroll_helpers"),
            o = e("bugsnag");
        return n({
            init: function(e) {
                this.settings = e, this.__cachedStepName = null
            },
            ensureTripBlock: function() {
                if (!this.$tripBlock) {
                    var e = ['<div class="trip-block">', '<div class="trip-interior">', '<a class="trip-close">&times;</a>', '<div class="trip-content"></div>', "</div>", '<div class="trip-arrow"></div>', "</div>"].join(""),
                        n = this,
                        r = this.$tripBlock = t(e);
                    r.css({
                        top: "-100px"
                    }), t("body").append(r), r.find(".trip-close").on("dcg-tap", function(e) {
                        e.preventDefault(), n.stop()
                    }), this.bindKeyEvents()
                }
            },
            cleanup: function() {
                return this.unbindKeyEvents(), this.hideTripBlock(), !1
            },
            bindKeyEvents: function() {
                var e = this;
                t(document).on({
                    "keydown.Trip": function(t) {
                        e.keyEvent.call(e, t)
                    }
                })
            },
            unbindKeyEvents: function() {
                t(document).off("keydown.Trip")
            },
            keyEvent: function(e) {
                27 === e.which && this.stop()
            },
            stop: function() {
                this.hideTripBlock(), this.settings.onTripStop()
            },
            exitTourBecauseOfError: function(e, t) {
                var n = "",
                    r = t;
                do {
                    n = r.selector + n
                } while (r = r.prevObject);
                this.stop(), o.notify("TourError: could not find $sel.offset()", {
                    metaData: {
                        message: e,
                        selector: n
                    }
                })
            },
            showTripBlock: function(e) {
                this.ensureTripBlock(), "string" == typeof e.sel && (e.sel = t(e.sel)), e.sel = e.sel.filter(":visible"), e.scrollContainer && i.scrollVisible(e.sel, e.scrollContainer, 0);
                var n = this.$tripBlock;
                n.find(".trip-content").html(e.content), n.toggleClass("trip-hidden", !!e.hidden);
                var o = e.sel,
                    a = o.outerWidth(),
                    s = o.outerHeight(),
                    l = n.outerWidth(),
                    c = n.outerHeight();
                if (!o.offset()) return void(this.__cachedMissingSelTime ? Date.now() - this.__cachedMissingSelTime > 1e3 && (e.final ? this.stop() : this.exitTourBecauseOfError(e.content, o)) : this.__cachedMissingSelTime = Date.now());
                this.__cachedMissingSelTime = void 0, n.removeClass("trip-e trip-s trip-w trip-n");
                var u = 0;
                switch (e.position) {
                    case "e":
                        n.addClass("trip-e"), n.css({
                            left: o.offset().left + a + 10,
                            top: o.offset().top - (c - s) / 2
                        });
                        break;
                    case "s":
                        n.addClass("trip-s");
                        var p = o.offset().left + (a - l) / 2;
                        n.css({
                            left: p,
                            top: o.offset().top + s + 10
                        }), p + l > t(window).width() - 1 && (u = t(window).width() - 1 - p - l), p < 1 && (u = 1 - p);
                        break;
                    case "w":
                        n.addClass("trip-w"), n.css({
                            left: o.offset().left - (10 + l),
                            top: o.offset().top - (c - s) / 2
                        });
                        break;
                    default:
                        n.addClass("trip-n"), n.css({
                            left: o.offset().left + (a - l) / 2,
                            top: o.offset().top - 10 - c
                        })
                }
                n.find(".trip-interior").css("transform", "translate(" + u + "px, 0)"), n.css({
                    display: "inline-block"
                }), n.find(".trip-math:not(.dcg-mq-math-mode)").each(function() {
                    r.StaticMath(this)
                })
            },
            fadeInTripBlock: function() {
                this.ensureTripBlock();
                var e = this.$tripBlock;
                setTimeout(function() {
                    e.addClass("trip-is-loaded")
                }, 0)
            },
            hideTripBlock: function() {
                this.$tripBlock && this.$tripBlock.removeClass("trip-is-loaded")
            }
        })
    }), define("tours/tour_manager", ["require", "pjs", "./trip"], function(e) {
        var t = e("pjs"),
            n = e("./trip");
        return t(function(e, t) {
            e.init = function() {
                this.tripManager = new n({
                    onTripStop: this.stopTour.bind(this)
                }), this.currentStep = void 0, this.currentTour = void 0
            }, e._tripLoop = function() {
                if (clearTimeout(this.__tripLoopTimeout), this.running) {
                    var e = this;
                    e._advanceTrip(), e.__tripLoopTimeout = setTimeout(e._tripLoop.bind(e), 200)
                }
            }, e._advanceTrip = function() {
                var e = this.currentTour.update(),
                    t = (new Date).getTime();
                if (e && this.currentStep && e.content !== this.currentStep.content) {
                    if (this.currentStep.delayBeforeExit) {
                        if (this.throttleTimer && t - this.throttleTimer < this.currentStep.delayBeforeExit) return;
                        if (!this.throttleTimer) return void(this.throttleTimer = t)
                    }
                    e.delayBeforeEnter && (this.currentStep = e, this.throttleTimer = t)
                }
                if (!(e && this.currentStep && e.content === this.currentStep.content && this.throttleTimer && t - this.throttleTimer < this.currentStep.delayBeforeEnter) && (this.throttleTimer = null, e && !e.doNotUpdate)) {
                    if (this.currentStep = e, e.final) return void this.finishTour(e, 5);
                    this.tripManager.showTripBlock(e)
                }
            }, e.updateNow = e._advanceTrip, e.startTour = function(e) {
                this.running || (this.currentTour = e, this.running = !0, this._tripLoop(), this.tripManager.fadeInTripBlock())
            }, e.closingMsg = "<b>__endingMessage__</b><br>This message will self-destruct in __seconds__...", e.finishTour = function(e, t) {
                clearTimeout(this.__tripLoopTimeout), this.running = !1;
                var n = this;
                if (t < 0) return void n.tripManager.stop();
                e.endingMsg && (e.content = n.closingMsg.replace("__endingMessage__", e.endingMsg).replace("__seconds__", t)), n.tripManager.showTripBlock(e), setTimeout(function() {
                    n.finishTour(e, t - 1)
                }, 1e3)
            }, e.stopTour = function() {
                this.running = !1, this.currentStep = void 0, this.currentTour = void 0
            }
        })
    }), define("math/distance", ["require", "exports"], function(e, t) {
        "use strict";

        function n(e, t) {
            return e > 0 == t > 0 ? e + .5 * (t - e) : .5 * (e + t)
        }

        function r(e, t, n, r) {
            return e * n + t * r
        }

        function i(e, n, i, o, a, s) {
            var l = t.hypot(a - i, s - o);
            return 0 === l ? 0 : r((e - i) / l, (n - o) / l, (a - i) / l, (s - o) / l)
        }

        function o(e, t, n, r, o, a) {
            var s = i(e, t, n, r, o, a);
            return s <= 0 ? [n, r] : s >= 1 ? [o, a] : [n + s * (o - n), r + s * (a - r)]
        }

        function a(e, n, r, i, a, s) {
            var l = o(e, n, r, i, a, s);
            return t.hypot(e - l[0], n - l[1])
        }

        function s(e, t, n) {
            if (void 0 === n && (n = 1), n > 50) throw new Error("Within " + (52 - n) + " bits isn't really approximate any more");
            var r = Math.max(Math.max(Math.abs(e), Math.abs(t)), 1);
            return r === r + (1 === n ? .5 : Math.pow(.5, n)) * Math.abs(t - e)
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.hypot = Math.hypot || function(e, t) {
            if (0 === e && 0 === t) return 0;
            if (Math.abs(e) > Math.abs(t)) {
                var n = t / e;
                return Math.abs(e) * Math.sqrt(n * n + 1)
            }
            var n = e / t;
            return Math.abs(t) * Math.sqrt(n * n + 1)
        }, t.mean = n, t.pointToSegmentParameter = i, t.closestPointOnSegment = o, t.pointToSegment = a, t.approx = s
    }), define("math/mathshim", ["require"], function(e) {
        var t = {};
        return t.cosh = Math.cosh || function(e) {
            return .5 * (Math.exp(e) + Math.exp(-e))
        }, t.sinh = Math.sinh && 0 !== Math.sinh(1e-20) ? Math.sinh : function(e) {
            var n = e > 0 ? 1 : -1;
            return e = e > 0 ? e : -e, .5 * -n * Math.exp(e) * t.expm1(-2 * e)
        }, t.tanh = Math.tanh && 0 !== Math.tanh(1e-20) ? Math.tanh : function(e) {
            var n = e > 0 ? 1 : -1;
            e = e > 0 ? e : -e;
            var r = t.expm1(-2 * e);
            return -n * r / (2 + r)
        }, t.acosh = Math.acosh || function(e) {
            return e < 1 ? NaN : Math.log(e + t.sqrtxsqm1(e))
        }, t.asinh = Math.asinh && 0 !== Math.asinh(1e-20) ? Math.asinh : function(e) {
            var n = e > 0 ? 1 : -1;
            return e = e > 0 ? e : -e, 1 + e * e == 1 ? n * t.log1p(e) : n * Math.log(e + t.sqrtxsqp1(e))
        }, t.atanh = Math.atanh && 0 !== Math.atanh(1e-20) ? Math.atanh : function(e) {
            return .5 * (t.log1p(e) - t.log1p(-e))
        }, t.expm1 = Math.expm1 || function(e) {
            return e + .5 * e * e === e ? e : Math.exp(e) - 1
        }, t.log1p = Math.log1p || function(e) {
            return e - .5 * e * e === e ? e : Math.log(1 + e)
        }, t.sqrtxsqp1 = function(e) {
            var t = e * e;
            return 1 + t === 1 ? 1 : 1 + t === t ? Math.abs(e) : Math.sqrt(t + 1)
        }, t.sqrtxsqm1 = function(e) {
            var t = e * e;
            return t < 1 ? NaN : t - 1 === t ? Math.abs(e) : Math.sqrt(t - 1)
        }, t
    }), define("math/poi-type", ["require", "exports"], function(e, t) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.INTERSECTION = 1001, t.ZERO = 1002, t.INTERCEPT = 1003, t.EXTREMUM = 1004, t.EDGE = 1005, t.DEFINITION = 1006, t.TRACE = 1007, t.LABEL = 1008
    }), define("math/poi", ["require", "exports", "./distance", "lib/console", "./poi-type"], function(e, t, n, r, i) {
        "use strict";

        function o(e, t) {
            var r;
            e > t && (r = e, e = t, t = r);
            var i = e > 0,
                o = t > 0,
                a = Math.abs(e) > .01,
                s = Math.abs(t) > .01;
            if (a || s) return n.mean(e, t);
            if (0 === e) return t * Math.abs(t);
            if (0 === t) return e * Math.abs(e);
            if (i !== o) return 0;
            var l = i ? Math.sqrt(e * t) : -Math.sqrt(e * t);
            return l >= e && t >= l ? l : n.mean(e, t)
        }

        function a(e, t, n, i, a) {
            if (isNaN(t) || isNaN(i) || t < 0 == i < 0) return void r.log("bisectZero called with bad y values", [t, i]);
            for (;;) {
                var l = o(e, n),
                    c = a(l);
                if (!isFinite(c)) return;
                if (l === e || l === n) return Math.abs(t) <= Math.abs(i) ? [e, t] : [n, i];
                if (0 === c) return s(e, t, l, c, n, i, a);
                t < 0 != c < 0 ? (n = l, i = c) : (e = l, t = c)
            }
        }

        function s(e, t, n, r, i, a, s) {
            var u;
            if (isFinite(r)) {
                isFinite(t) || (u = l(e, t, n, r, s)) && (e = u[0], t = u[1]), isFinite(a) || (u = l(n, r, i, a, s)) && (i = u[0], a = u[1]);
                var p, d;
                p = t === r ? [e, t] : c(e, t, n, r, s, r), d = a === r ? [i, a] : c(n, r, i, a, s, r);
                var h;
                return p && d && (h = o(p[0], d[0])), void 0 !== h ? [h, s(h)] : void 0
            }
        }

        function l(e, t, n, i, a) {
            if (isFinite(t) === isFinite(i)) return void r.log("bisectFinite called with bad y values", [t, i]);
            for (;;) {
                var s = o(e, n),
                    l = a(s);
                if (s === e || s === n) return isFinite(t) ? [e, t] : [n, i];
                isFinite(l) !== isFinite(t) ? (n = s, i = l) : (e = s, t = l)
            }
        }

        function c(e, t, n, i, a, s) {
            if (t === s == (i === s)) return void r.log("bisectConstant called with bad y values", [t, i, s]);
            for (;;) {
                var l = o(e, n),
                    c = a(l);
                if (l === e || l === n) return t === s ? [e, t] : [n, i];
                c === s != (t === s) ? (n = l, i = c) : (e = l, t = c)
            }
        }

        function u(e, t, n, i, a, l, c) {
            if (!(e < n && n < a)) return void r.log("bisectExtremum called with bad x values", [e, n, a]);
            if (!(isFinite(t) && isFinite(i) && isFinite(l) && t !== i && i !== l && i > t == i > l)) return void r.log("bisectExtremum called with bad y values", [t, i, l]);
            for (;;) {
                var u = o(e, n),
                    p = c(u),
                    d = o(n, a),
                    h = c(d);
                if (!isFinite(p) || !isFinite(h)) return;
                if (u === e || u === n || d === n || d === a) return p > i == i > t ? [u, p] : h > i == i > t ? [d, h] : [n, i];
                if (p === i || h === i) return s(e, t, n, i, a, l, c);
                p > t == i > t && p > t == p > i ? (a = n, l = i, n = u, i = p) : h > l == i > l && h > i == h > l ? (e = n, t = i, n = d, i = h) : (e = u, t = p, a = d, l = h)
            }
        }

        function p(e, t, n, r, i, o, a, s) {
            var l = Math.abs(r - t),
                c = Math.abs(o - r),
                u = Math.abs(s - o);
            return l > c && l > u ? [
                [e, t],
                [n, r]
            ] : u > c && u > l ? [
                [i, o],
                [a, s]
            ] : [
                [n, r],
                [i, o]
            ]
        }

        function d(e, t, r, i, a, s, c, u) {
            if (u || (u = 0), !((r - e) * (a - r) <= 0) && isFinite(e) && isFinite(r) && isFinite(a) && isFinite(t) && isFinite(s)) {
                if (!isFinite(i)) {
                    var d = l(e, t, r, i, c),
                        h = l(r, i, a, s, c);
                    if (!d || !h) return;
                    return [d, h]
                }
                if (!(Math.abs(i - ((a - r) * t + (r - e) * s) / (a - e)) < u))
                    for (;;) {
                        var f = o(e, r),
                            m = c(f),
                            g = o(r, a),
                            y = c(g),
                            v = Math.abs(m - n.mean(t, i)),
                            b = Math.abs(i - n.mean(m, y)),
                            x = Math.abs(y - n.mean(i, s));
                        if (v <= u && b <= u && x <= u) return;
                        if (!isFinite(m)) {
                            var d = l(e, t, f, m, c),
                                h = l(f, m, a, s, c);
                            if (!d || !h) return;
                            return [d, h]
                        }
                        if (!isFinite(y)) {
                            var d = l(e, t, g, y, c),
                                h = l(g, y, a, s, c);
                            if (!d || !h) return;
                            return [d, h]
                        }
                        if (!(f !== e && f !== r || g !== r && g !== a)) return Math.abs(i - t) > Math.abs(s - i) ? [
                            [e, t],
                            [r, i]
                        ] : [
                            [r, i],
                            [a, s]
                        ];
                        if (f === e || f === r) return p(e, t, r, i, g, y, a, s);
                        if (g === r || g === a) return p(e, t, f, m, r, i, a, s);
                        v > x && v >= b ? (a = r, s = i, r = f, i = m) : x > v && x >= b ? (e = r, t = i, r = g, i = y) : (e = f, t = m, a = g, s = y)
                    }
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.floatMiddle = o, t.default = {
            bisectJump: d,
            bisectExtremum: u,
            bisectFinite: l,
            bisectZero: a,
            flatCenter: s,
            INTERSECTION: i.INTERSECTION,
            ZERO: i.ZERO,
            INTERCEPT: i.INTERCEPT,
            EXTREMUM: i.EXTREMUM,
            EDGE: i.EDGE,
            DEFINITION: i.DEFINITION,
            TRACE: i.TRACE,
            LABEL: i.LABEL
        }
    }), define("math/quadrature", ["require", "math/mathshim", "math/poi"], function(e) {
        "use strict";

        function t(e, t, n) {
            return .5 * (t * (2 - n) + e * n)
        }

        function n(e, t, n) {
            var r = .5 * (t + n),
                i = u(t, e(t), r, e(r), n, e(n), e, 0);
            return i ? .5 * (i[0][0] + i[1][0]) : r
        }

        function r(e, t, n, r, i) {
            return {
                x1: e,
                x2: t,
                value: n,
                error: r,
                minerror: i
            }
        }

        function i(e, n, r) {
            var i = Math.abs(e(t(n, r, f))),
                o = Math.abs(e(t(n, r, 2 * f)));
            return !(i < f || o < f) && i > 1.95 * o
        }

        function o(e, n, o) {
            var a, s, l = t(o, n, v[0]),
                c = t(n, o, v[0]),
                u = e(l),
                d = e(c),
                h = t(n, o, 1),
                f = e(h);
            if (isFinite(f) && !isFinite(u)) {
                if (a = p(l, u, h, f, e), Math.abs((a[0] - n) / (o - n)) > g) return r(n, o, NaN, NaN, NaN);
                n = a[0], u = a[1]
            }
            if (isFinite(f) && !isFinite(d)) {
                if (s = p(h, f, c, d, e), Math.abs((s[0] - o) / (o - n)) > g) return r(n, o, NaN, NaN, NaN);
                o = s[0], d = s[1]
            }
            if (isFinite(u) && isFinite(d) && !isFinite(f)) {
                if (a = p(l, u, h, f, e), s = p(h, f, c, d, e), Math.abs((s[0] - a[0]) / (o - n)) > g) return r(n, o, NaN, NaN, NaN);
                f = .5 * (a[1] + s[1])
            }
            if (i(e, n, o) || i(e, o, n)) return r(n, o, NaN, NaN, NaN);
            for (var m = f, x = 0, w = 0, S = 0, E = 0, M = 0, I = 0, T = 0; T < y; T += 4) M = e(t(n, o, v[T])), I = e(t(o, n, v[T])), E = Math.max(E, Math.abs(M), Math.abs(I)), x += b[T] * (M + I), M = e(t(n, o, v[T + 1])), I = e(t(o, n, v[T + 1])), E = Math.max(E, Math.abs(M), Math.abs(I)), S += b[T + 1] * (M + I), M = e(t(n, o, v[T + 2])), I = e(t(o, n, v[T + 2])), E = Math.max(E, Math.abs(M), Math.abs(I)), w += b[T + 2] * (M + I), M = e(t(n, o, v[T + 3])), I = e(t(o, n, v[T + 3])), E = Math.max(E, Math.abs(M), Math.abs(I)), S += b[T + 3] * (M + I);
            var C, k = m + x,
                D = k + w,
                P = D + S,
                L = Math.abs(w - k),
                A = Math.abs(S - D),
                O = _ * (o - n) * P,
                F = _ * Math.abs(o - n) * E * b[0];
            return C = 0 === L ? _ * Math.abs(o - n) * A : _ * Math.abs(o - n) * A * (A / L) * (A / L), C = Math.max(C, F), r(n, o, O, C, F)
        }

        function a(e) {
            for (var t = -1 / 0, n = -1 / 0, r = -1, i = 0, o = 0; o < e.length; o++) {
                var a = e[o];
                i += a.value, a.error > t && (t = a.error, r = o), a.minerror > n && (n = a.minerror)
            }
            return {
                maxerror: t,
                maxminerror: n,
                maxindex: r,
                totalvalue: i
            }
        }

        function s(e, r, i, s) {
            if (void 0 === s && (s = 32), !isFinite(r) || !isFinite(i)) return NaN;
            for (var l = [o(e, r, i)], c = a(l), u = 1; u < s && !(Math.abs(c.maxerror / c.totalvalue) <= 32 * m || c.maxerror <= 32 * m || c.maxerror <= 32 * c.maxminerror); u++) {
                var p = l[l.length - 1];
                l[l.length - 1] = l[c.maxindex], l[c.maxindex] = p;
                var d = l.pop(),
                    h = n(e, t(d.x2, d.x1, .125), t(d.x1, d.x2, .125));
                l.push(o(e, d.x1, h)), l.push(o(e, h, d.x2)), c = a(l)
            }
            return Math.abs(c.totalvalue) <= 10 * c.maxminerror ? 0 : c.totalvalue
        }
        var l = e("math/mathshim"),
            c = e("math/poi").default,
            u = c.bisectJump,
            p = c.bisectFinite,
            d = 3.154019550531224,
            h = Math.pow(2, -13),
            f = h * h,
            m = f * f,
            g = f,
            y = 32,
            v = [],
            b = [];
        ! function(e, t) {
            for (var n = y; n > 0; n--) {
                var r = d / y * n,
                    i = l.sinh(r),
                    o = l.cosh(Math.PI / 2 * i),
                    a = 1 / (Math.exp(Math.PI / 2 * i) * o),
                    s = l.cosh(r) / (o * o);
                e.push(a), t.push(s)
            }
        }(v, b);
        for (var x = 0, w = 0; w < b.length; w++) x += b[w];
        var _ = 1 / (1 + 2 * x);
        return {
            quad: s
        }
    }), define("math/tofraction", ["require", "exports"], function(e, t) {
        "use strict";

        function n(e, t) {
            if (void 0 === t && (t = 1e6), e === 1 / 0) return {
                n: 1 / 0,
                d: 1
            };
            if (e === -1 / 0) return {
                n: -1 / 0,
                d: 1
            };
            if (!isFinite(e)) return {
                n: NaN,
                d: 1
            };
            for (var n, r, i, o = 0, a = 1, s = 1, l = 0;;) {
                if (n = Math.floor(e), r = n * a + o, (i = n * l + s) > t) break;
                if (o = a, s = l, a = r, l = i, e === n) break;
                e = 1 / (e - n)
            }
            return {
                n: a,
                d: l
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = n
    }),
    function(e) {
        "use strict";

        function t(e, t) {
            var n = (65535 & e) + (65535 & t);
            return (e >> 16) + (t >> 16) + (n >> 16) << 16 | 65535 & n
        }

        function n(e, t) {
            return e << t | e >>> 32 - t
        }

        function r(e, r, i, o, a, s) {
            return t(n(t(t(r, e), t(o, s)), a), i)
        }

        function i(e, t, n, i, o, a, s) {
            return r(t & n | ~t & i, e, t, o, a, s)
        }

        function o(e, t, n, i, o, a, s) {
            return r(t & i | n & ~i, e, t, o, a, s)
        }

        function a(e, t, n, i, o, a, s) {
            return r(t ^ n ^ i, e, t, o, a, s)
        }

        function s(e, t, n, i, o, a, s) {
            return r(n ^ (t | ~i), e, t, o, a, s)
        }

        function l(e, n) {
            e[n >> 5] |= 128 << n % 32, e[14 + (n + 64 >>> 9 << 4)] = n;
            var r, l, c, u, p, d = 1732584193,
                h = -271733879,
                f = -1732584194,
                m = 271733878;
            for (r = 0; r < e.length; r += 16) l = d, c = h, u = f, p = m, d = i(d, h, f, m, e[r], 7, -680876936), m = i(m, d, h, f, e[r + 1], 12, -389564586), f = i(f, m, d, h, e[r + 2], 17, 606105819), h = i(h, f, m, d, e[r + 3], 22, -1044525330), d = i(d, h, f, m, e[r + 4], 7, -176418897), m = i(m, d, h, f, e[r + 5], 12, 1200080426), f = i(f, m, d, h, e[r + 6], 17, -1473231341), h = i(h, f, m, d, e[r + 7], 22, -45705983), d = i(d, h, f, m, e[r + 8], 7, 1770035416), m = i(m, d, h, f, e[r + 9], 12, -1958414417), f = i(f, m, d, h, e[r + 10], 17, -42063), h = i(h, f, m, d, e[r + 11], 22, -1990404162), d = i(d, h, f, m, e[r + 12], 7, 1804603682), m = i(m, d, h, f, e[r + 13], 12, -40341101), f = i(f, m, d, h, e[r + 14], 17, -1502002290), h = i(h, f, m, d, e[r + 15], 22, 1236535329), d = o(d, h, f, m, e[r + 1], 5, -165796510), m = o(m, d, h, f, e[r + 6], 9, -1069501632), f = o(f, m, d, h, e[r + 11], 14, 643717713), h = o(h, f, m, d, e[r], 20, -373897302), d = o(d, h, f, m, e[r + 5], 5, -701558691), m = o(m, d, h, f, e[r + 10], 9, 38016083), f = o(f, m, d, h, e[r + 15], 14, -660478335), h = o(h, f, m, d, e[r + 4], 20, -405537848), d = o(d, h, f, m, e[r + 9], 5, 568446438), m = o(m, d, h, f, e[r + 14], 9, -1019803690), f = o(f, m, d, h, e[r + 3], 14, -187363961), h = o(h, f, m, d, e[r + 8], 20, 1163531501), d = o(d, h, f, m, e[r + 13], 5, -1444681467), m = o(m, d, h, f, e[r + 2], 9, -51403784), f = o(f, m, d, h, e[r + 7], 14, 1735328473), h = o(h, f, m, d, e[r + 12], 20, -1926607734), d = a(d, h, f, m, e[r + 5], 4, -378558), m = a(m, d, h, f, e[r + 8], 11, -2022574463), f = a(f, m, d, h, e[r + 11], 16, 1839030562), h = a(h, f, m, d, e[r + 14], 23, -35309556), d = a(d, h, f, m, e[r + 1], 4, -1530992060), m = a(m, d, h, f, e[r + 4], 11, 1272893353), f = a(f, m, d, h, e[r + 7], 16, -155497632), h = a(h, f, m, d, e[r + 10], 23, -1094730640), d = a(d, h, f, m, e[r + 13], 4, 681279174), m = a(m, d, h, f, e[r], 11, -358537222), f = a(f, m, d, h, e[r + 3], 16, -722521979), h = a(h, f, m, d, e[r + 6], 23, 76029189), d = a(d, h, f, m, e[r + 9], 4, -640364487), m = a(m, d, h, f, e[r + 12], 11, -421815835), f = a(f, m, d, h, e[r + 15], 16, 530742520), h = a(h, f, m, d, e[r + 2], 23, -995338651), d = s(d, h, f, m, e[r], 6, -198630844), m = s(m, d, h, f, e[r + 7], 10, 1126891415), f = s(f, m, d, h, e[r + 14], 15, -1416354905), h = s(h, f, m, d, e[r + 5], 21, -57434055), d = s(d, h, f, m, e[r + 12], 6, 1700485571), m = s(m, d, h, f, e[r + 3], 10, -1894986606), f = s(f, m, d, h, e[r + 10], 15, -1051523), h = s(h, f, m, d, e[r + 1], 21, -2054922799), d = s(d, h, f, m, e[r + 8], 6, 1873313359), m = s(m, d, h, f, e[r + 15], 10, -30611744), f = s(f, m, d, h, e[r + 6], 15, -1560198380), h = s(h, f, m, d, e[r + 13], 21, 1309151649), d = s(d, h, f, m, e[r + 4], 6, -145523070), m = s(m, d, h, f, e[r + 11], 10, -1120210379), f = s(f, m, d, h, e[r + 2], 15, 718787259), h = s(h, f, m, d, e[r + 9], 21, -343485551), d = t(d, l), h = t(h, c), f = t(f, u), m = t(m, p);
            return [d, h, f, m]
        }

        function c(e) {
            var t, n = "",
                r = 32 * e.length;
            for (t = 0; t < r; t += 8) n += String.fromCharCode(e[t >> 5] >>> t % 32 & 255);
            return n
        }

        function u(e) {
            var t, n = [];
            for (n[(e.length >> 2) - 1] = void 0, t = 0; t < n.length; t += 1) n[t] = 0;
            var r = 8 * e.length;
            for (t = 0; t < r; t += 8) n[t >> 5] |= (255 & e.charCodeAt(t / 8)) << t % 32;
            return n
        }

        function p(e) {
            return c(l(u(e), 8 * e.length))
        }

        function d(e, t) {
            var n, r, i = u(e),
                o = [],
                a = [];
            for (o[15] = a[15] = void 0, i.length > 16 && (i = l(i, 8 * e.length)), n = 0; n < 16; n += 1) o[n] = 909522486 ^ i[n], a[n] = 1549556828 ^ i[n];
            return r = l(o.concat(u(t)), 512 + 8 * t.length), c(l(a.concat(r), 640))
        }

        function h(e) {
            var t, n, r = "0123456789abcdef",
                i = "";
            for (n = 0; n < e.length; n += 1) t = e.charCodeAt(n), i += r.charAt(t >>> 4 & 15) + r.charAt(15 & t);
            return i
        }

        function f(e) {
            return unescape(encodeURIComponent(e))
        }

        function m(e) {
            return p(f(e))
        }

        function g(e) {
            return h(m(e))
        }

        function y(e, t) {
            return d(f(e), f(t))
        }

        function v(e, t) {
            return h(y(e, t))
        }

        function b(e, t, n) {
            return t ? n ? y(t, e) : v(t, e) : n ? m(e) : g(e)
        }
        "function" == typeof define && define.amd ? define("lib/md5", [], function() {
            return b
        }) : "object" == typeof module && module.exports ? module.exports = b : e.md5 = b
    }(this), define("math/builtin", ["require", "math/mathshim", "math/distance", "math/quadrature", "math/tofraction", "math/poi", "lib/md5"], function(e) {
        function t(e, t, n) {
            return Math.max(t, Math.min(n, e))
        }

        function n(e) {
            return !(e > 1e12) && Math.round(m * e) * Math.PI === e
        }

        function r(e) {
            if (e > 1e12) return !1;
            var t = Math.round(2 * m * e);
            return t % 2 == 1 && t * Math.PI == 2 * e
        }

        function i(e, t, n) {
            return n < 0 ? p.tcdf(-1 / 0, e, t) : n > 0 ? p.tcdf(-1 / 0, -e, t) : 2 * p.tcdf(-1 / 0, -Math.abs(e), t)
        }
        var o = e("math/mathshim"),
            a = e("math/distance"),
            s = e("math/quadrature"),
            l = e("math/tofraction").default,
            c = e("math/poi").floatMiddle,
            u = e("lib/md5"),
            p = {};
        p.cosh = o.cosh, p.sinh = o.sinh, p.tanh = o.tanh, p.acosh = o.acosh, p.asinh = o.asinh, p.atanh = o.atanh, p.expm1 = o.expm1, p.log1p = o.log1p, p.sqrtxsqp1 = o.sqrtxsqp1, p.sqrtxsqm1 = o.sqrtxsqm1, p.mod = function(e, t) {
            return e - t * Math.floor(e / t)
        }, p.round = function(e, t) {
            if (void 0 === t && (t = 0), 0 === (t = Math.round(t))) return Math.round(e);
            var n = Math.pow(10, t);
            return Math.round(e * n) / n
        }, p.sign = Math.sign || function(e) {
            return 0 === e ? 0 : e > 0 ? 1 : e < 0 ? -1 : NaN
        }, p.lcm = function(e, t) {
            e = Math.round(e), t = Math.round(t);
            var n = p.gcd(e, t);
            return Math.abs(e / n * t)
        }, p.gcd = function(e, t) {
            if (e = Math.round(e), t = Math.round(t), e < 0 && (e = -e), t < 0 && (t = -t), t > e) {
                var n = t;
                t = e, e = n
            }
            if (0 === t) return e;
            for (var r = e % t; r > 0;) e = t, t = r, r = e % t;
            return t
        }, p.listGCD = function(e) {
            if (0 === e.length) return NaN;
            for (var t = e[0], n = 1; n < e.length; n++) t = p.gcd(t, e[n]);
            return t
        }, p.listLCM = function(e) {
            if (0 === e.length) return NaN;
            for (var t = e[0], n = 1; n < e.length; n++) t = p.lcm(t, e[n]);
            return t
        }, p.nCr = function(e, t) {
            if (e = Math.round(e), (t = Math.round(t)) > e || e < 0 || t < 0) return 0;
            if (t === 1 / 0 || e === 1 / 0) return NaN;
            for (var n = 1, r = 0; r < t; r++) n *= (e - r) / (r + 1);
            return n
        }, p.nPr = function(e, t) {
            if (e = Math.round(e), (t = Math.round(t)) > e || e < 0 || t < 0) return 0;
            if (t === 1 / 0 || e === 1 / 0) return NaN;
            for (var n = 1, r = 0; r < t; r++) n *= e - r;
            return n
        }, p.factorial = function(e) {
            return p.gamma(e + 1)
        }, p.gamma = function(e) {
            if (e < 0) return Math.PI / (p.sin(Math.PI * e) * p.gamma(1 - e));
            if (e > 170) return 1 / 0;
            var t, n = Math.round(e) === e;
            return t = e < 15 ? d(e) : e < 120 ? h(e) : Math.exp(f(e)), n ? Math.round(t) : t
        };
        var d = function(e) {
                var t = 1 + e * (4.077131788261185 + e * (7.024675027156382 + e * (6.657107767450176 + e * (3.766266976716022 + e * (1.2792371666711133 + e * (.24304596436338005 + .020049769312165774 * e)))))),
                    n = 1 + e * (4.154347453162709 + e * (7.270007565107539 + e * (6.97805297331391 + e * (3.989651532924167 + e * (1.367176195613119 + e * (.26175627691546965 + .021742722739397567 * e))))));
                return Math.E * Math.pow((1 + e) / Math.E, 1 + e) / (e * Math.sqrt(1 + e)) * (t / n)
            },
            h = function(e) {
                var t = e - 1;
                return Math.pow(t, t) * Math.exp(y(t) - t) * Math.sqrt(2 * Math.PI * t)
            },
            f = function(e) {
                var t = e - 1;
                return t * (Math.log(t) - 1) + .5 * Math.log(2 * Math.PI * t) + y(t)
            };
        p.lnGamma = function(e) {
            return e < 0 ? NaN : e < 15 ? Math.log(d(e)) : f(e)
        }, p.bernoulliTable = [1 / 6, -1 / 30, 1 / 42, -1 / 30, 5 / 66, -691 / 2730, 7 / 6, -3617 / 510, 43867 / 798, -174611 / 330, 854513 / 138, -236364091 / 2730, 8553103 / 6, -23749461029 / 870], p.cotDerivative = function(e, t) {
            if (e !== Math.floor(e)) return NaN;
            if (e < 0) return NaN;
            if (0 === e) return 1 / p.tan(t);
            var n = p.sin(t);
            if (1 === e) return -1 / (n * n);
            var r = p.cos(t);
            if (2 === e) return 2 * r / (n * n * n);
            var i, o, a, s, l, c = [0, 2];
            for (o = 3; o <= e; o++) {
                for (i = [], a = 0; a < o; a++) s = 0, l = 0, a > 0 && (s = (o - a + 1) * c[a - 1]), a + 2 < o && (l = (a + 1) * c[a + 1]), i.push(-(s + l));
                c = i
            }
            var u = 0;
            for (a = e - 1; a >= 0; a--) u = i[a] + r * u;
            return u / Math.pow(n, e + 1)
        }, p.polyGamma = function(e, t) {
            if (e < 0) return NaN;
            if (e !== Math.floor(e)) return NaN;
            var n = e % 2 == 0 ? -1 : 1;
            if (t < 0) return -n * p.polyGamma(e, 1 - t) - Math.pow(Math.PI, e + 1) * p.cotDerivative(e, Math.PI * t);
            for (var r = p.factorial(e), i = 0, o = Math.pow(t, -(e + 1)); t < 10;) i += o, t++, o = Math.pow(t, -(e + 1));
            i += 0 === e ? -Math.log(t) : o * t / e, i += .5 * o;
            for (var a = p.bernoulliTable, s = e + 1, l = 2, c = o * t * s / l, u = 1 / (t * t), d = 1; d <= 14; d++) c *= u, i += c * a[d - 1], s++, l++, c *= s / l, s++, l++, c *= s / l;
            return r * n * i
        }, p.toFraction = l, p.log = function(e) {
            var t = Math.log(e);
            return Math.exp(Math.round(t)) === e ? Math.round(t) : t
        }, p.log_base = function(e, t) {
            if (0 === t) return NaN;
            var n = Math.log(e) / Math.log(t);
            return Math.pow(t, Math.round(n)) === e ? Math.round(n) : n
        }, p.common_log = function(e) {
            return p.log_base(e, 10)
        }, p.pow = function(e, t) {
            if (!isFinite(e) && 0 === t) return NaN;
            if (e >= 0 || t === Math.floor(t)) return Math.pow(e, t);
            var n = p.toFraction(t, 100);
            return a.approx(n.n / n.d, t, 2) && n.d % 2 == 1 ? (n.n % 2 == 0 ? 1 : -1) * Math.pow(-e, t) : NaN
        }, p.nthroot = function(e, t) {
            return p.pow(e, 1 / t)
        };
        var m = 1 / Math.PI;
        p.sin = function(e) {
            return n(Math.abs(e)) ? 0 : Math.sin(e)
        }, p.cos = function(e) {
            return r(Math.abs(e)) ? 0 : Math.cos(e)
        }, p.tan = function(e) {
            var t = Math.abs(e);
            return n(t) ? 0 : r(t) ? 1 / 0 : Math.tan(e)
        }, p.sec = function(e) {
            return r(Math.abs(e)) ? 1 / 0 : 1 / Math.cos(e)
        }, p.csc = function(e) {
            return n(Math.abs(e)) ? 1 / 0 : 1 / Math.sin(e)
        }, p.cot = function(e) {
            var t = Math.abs(e);
            return n(t) ? 1 / 0 : r(t) ? 0 : 1 / Math.tan(e)
        }, p.acot = function(e) {
            return Math.PI / 2 - Math.atan(e)
        }, p.acsc = function(e) {
            return Math.asin(1 / e)
        }, p.asec = function(e) {
            return Math.acos(1 / e)
        }, p.sech = function(e) {
            return 1 / p.cosh(e)
        }, p.csch = function(e) {
            return 1 / p.sinh(e)
        }, p.coth = function(e) {
            return 1 / p.tanh(e)
        }, p.asech = function(e) {
            return p.acosh(1 / e)
        }, p.acsch = function(e) {
            return p.asinh(1 / e)
        }, p.acoth = function(e) {
            return p.atanh(1 / e)
        }, p.mean = function(e) {
            for (var t = 0, n = 0; n < e.length; n++) t += e[n];
            return t / e.length
        }, p.total = function(e) {
            for (var t = 0, n = 0; n < e.length; n++) t += e[n];
            return t
        };
        var g = function(e) {
                return e > 50 ? Math.exp(.5 * ((1 - e) * o.log1p(-1 / (e - 1)) - 1) + y(.5 * (e - 1)) - y(.5 * (e - 2))) * Math.sqrt((1 - 1 / e) / (2 * Math.PI)) : p.gamma((e + 1) / 2) / (p.gamma(e / 2) * Math.sqrt(e * Math.PI))
            },
            y = function(e) {
                var t = e * e;
                return (.08333333333333333 - (.002777777777777778 - (.0007936507936507937 - (.0005952380952380953 - .0008417508417508417 / t) / t) / t) / t) / e
            };
        p.tpdf = function(e, t) {
            return t <= 0 ? NaN : g(t) * Math.pow(1 + e * e / t, -(t + 1) / 2)
        };
        var v = function(e, t) {
            if (t > 0) return 1 - v(e, -t);
            if (t === -1 / 0) return 0;
            var n = Math.sqrt(2 * e / (e + 1));
            if (Math.abs(t / n) < .001) return .5 * (1 + Math.sqrt(Math.PI) * g(e) * n * p.erf(t / n));
            if (t / e < -1e3) {
                var r = t * t;
                return g(e) * Math.pow(e, .5 * (e - 1)) * Math.pow(Math.abs(t), -e) * (1 - e * e * (e + 1) * (1 / (2 + e) + e * (e + 3) / (4 * (4 + e) * r)) / (2 * r))
            }
            var i = Math.sqrt(t * t + e);
            return b((t + i) / (2 * i), e / 2, e / 2)
        };
        p.tcdf = function(e, t, n) {
            return n <= 0 ? NaN : e === -1 / 0 ? v(n, t) : e > 0 && t > 0 ? v(n, -e) - v(n, -t) : v(n, t) - v(n, e)
        };
        var b = function(e, t, n) {
                if (e < 0 || e > 1) throw new RangeError("First argument must be between 0 and 1.");
                if (1 === t && 1 === n) return e;
                if (0 === e) return 0;
                if (1 === e) return 1;
                if (0 === t) return 1;
                if (0 === n) return 0;
                var r = Math.exp(p.lnGamma(t + n) - p.lnGamma(t) - p.lnGamma(n) + t * Math.log(e) + n * o.log1p(-e));
                return e < (t + 1) / (t + n + 2) ? r * x(e, t, n) / t : 1 - r * x(1 - e, n, t) / n
            },
            x = function(e, t, n) {
                var r, i, o, a, s, l, c, u, p, d = 1;
                for (c = t + n, p = t + 1, u = t - 1, o = 1, a = 1 - c * e / p, Math.abs(a) < 1e-30 && (a = 1e-30), a = 1 / a, l = a; d <= 100 && (r = 2 * d, i = d * (n - d) * e / ((u + r) * (t + r)), a = 1 + i * a, Math.abs(a) < 1e-30 && (a = 1e-30), o = 1 + i / o, Math.abs(o) < 1e-30 && (o = 1e-30), a = 1 / a, l *= a * o, i = -(t + d) * (c + d) * e / ((t + r) * (p + r)), a = 1 + i * a, Math.abs(a) < 1e-30 && (a = 1e-30), o = 1 + i / o, Math.abs(o) < 1e-30 && (o = 1e-30), a = 1 / a, s = a * o, l *= s, !(Math.abs(s - 1) < 3e-7)); d++);
                return l
            },
            w = function(e, t, n) {
                return (e - t) / (Math.SQRT2 * Math.abs(n))
            },
            _ = function(e) {
                return e < 0 ? .5 * Math.exp(-e * e) * p.erfcx(-e) : 1 - .5 * Math.exp(-e * e) * p.erfcx(e)
            };
        p.normalcdf = function(e, t, n, r) {
            var i = w(t, n, r);
            if (e === -1 / 0) return _(i);
            var o = w(e, n, r);
            return e > 0 && t > 0 ? _(-o) - _(-i) : _(i) - _(o)
        }, p.normalpdf = function(e, t, n) {
            return 1 / Math.sqrt(2 * Math.PI * n * n) * Math.exp(-(e - t) * (e - t) / (2 * n * n))
        }, p.random = function(e) {
            var t = u(e);
            return (4294967296 * (2097151 & parseInt(t.slice(0, 8), 16)) + parseInt(t.slice(8, 16), 16)) / 9007199254740992
        }, p.uniformSample = function(e, t, n) {
            return p.random(e) * (n - t) + t
        }, p.normalSample = function(e, t, n) {
            var r, i, o, a, s = 0;
            do {
                r = e + "::sc" + s, s += 1, i = 2 * p.uniformSample(r, 0, 1) - 1, r = e + "::sc" + s, s += 1, o = 2 * p.uniformSample(r, 0, 1) - 1, a = i * i + o * o
            } while (a >= 1 || 0 === a);
            return t + n * i * Math.sqrt(-2 * Math.log(a) / a)
        }, p.tSample = function(e, t) {
            if (t <= 0) return NaN;
            var n, r, i, o, a = 0;
            do {
                n = e + "::sc" + a, a += 1, r = 2 * p.uniformSample(n, 0, 1) - 1, n = e + "::sc" + a, a += 1, i = 2 * p.uniformSample(n, 0, 1) - 1, o = r * r + i * i
            } while (o > 1);
            var s = r * r / o,
                l = t * (Math.pow(o, -2 / t) - 1);
            return n = e + "::sc" + a, a += 1, (p.uniformSample(n, 0, 1) < .5 ? -1 : 1) * Math.sqrt(s * l)
        }, p.binomSample = function(e, n, r) {
            return (n = t(Math.round(n), 0, 1 / 0)) === 1 / 0 ? NaN : (r = t(r, 0, 1), p.invBinom(p.uniformSample(e, 0, 1), n, r))
        }, p.poissonSample = function(e, t) {
            return t <= 0 ? NaN : p.invPoisson(p.uniformSample(e, 0, 1), t)
        };
        var S = function(e, t, n) {
            if (e >= t) return 1;
            if (e < 0) return 0;
            for (var r = n / (1 - n), i = Math.pow(1 - n, t), o = i, a = 1; a <= Math.min(t, e); a++) i *= (t - a + 1) / a * r, o += i;
            return o
        };
        p.binomcdf = function(e, n, r, i) {
            return (r = t(Math.round(r), 0, 1 / 0)) === 1 / 0 ? NaN : (i = t(i, 0, 1), n < 0 ? 0 : (e = Math.ceil(e), n = Math.floor(n), e === -1 / 0 ? S(n, r, i) : S(n, r, i) - S(e - 1, r, i)))
        }, p.binompdf = function(e, n, r) {
            return e = Math.round(e), (n = t(Math.round(n), 0, 1 / 0)) === 1 / 0 ? NaN : (r = t(r, 0, 1), e < 0 || e > n ? 0 : p.nCr(n, e) * Math.pow(r, e) * Math.pow(1 - r, n - e))
        }, p.poissonpdf = function(e, t) {
            return t <= 0 ? NaN : (e = Math.round(e), e < 0 ? 0 : Math.exp(-t + e * Math.log(t) - p.lnGamma(e + 1)))
        };
        var E = function(e, t) {
            if (e === 1 / 0) return 1;
            if (e < 0) return 0;
            for (var n = 1, r = 1, i = 1; i <= e; i++) {
                n *= t / i;
                var o = r;
                if ((r += n) === o) break
            }
            return Math.exp(-t) * r
        };
        p.poissoncdf = function(e, t, n) {
            return n <= 0 ? NaN : (e = Math.ceil(e), t = Math.floor(t), t < 0 ? 0 : e === -1 / 0 ? E(t, n) : E(t, n) - E(e - 1, n))
        }, p.uniformpdf = function(e, t, n) {
            return n <= t ? NaN : e < t || e > n ? 0 : 1 / (n - t)
        };
        var M = function(e, t, n) {
            return n <= t ? NaN : e < t ? 0 : e > n ? 1 : (e - t) / (n - t)
        };
        p.uniformcdf = function(e, t, n, r) {
            return M(t, n, r) - M(e, n, r)
        }, p.erf = function(e) {
            var t = -e * e;
            if (t < -750) return e >= 0 ? 1 : -1;
            if (e >= .065) return 1 - Math.exp(t) * p.erfcx(e);
            if (e <= -.065) return Math.exp(t) * p.erfcx(-e) - 1;
            return e * (1.1283791670955126 + t * (.37612638903183754 + t * (.11283791670955126 + t * (.026866170645131252 + .005223977625442188 * t))))
        }, p.erfcx = function(e) {
            if (e < 0) return e < -6.1 ? 2 * Math.exp(e * e) : 2 * Math.exp(e * e) - p.erfcx(-e);
            if (e > 50) {
                var t = .5641895835477563,
                    n = e * e;
                return e > 5e7 ? t / e : t * (n * (n + 4.5) + 2) / (e * (n * (n + 5) + 3.75))
            }
            return (.9999999999999999 + e * (2.224574423459406 + e * (2.444115549920689 + e * (1.7057986861852539 + e * (.8257463703357973 + e * (.28647031042892007 + e * (.07124513844341643 + e * (.012296749268608364 + e * (.001347817214557592 + 7263959403471071e-20 * e))))))))) / (1 + e * (3.352953590554884 + e * (5.227518529742423 + e * (5.003720878235473 + e * (3.266590890998987 + e * (1.5255421920765353 + e * (.5185887413188858 + e * (.12747319185915415 + e * (.02185979575963238 + e * (.0023889438122503674 + .00012875032817508128 * e))))))))))
        }, p.invNorm = function(e) {
            var t, n, r;
            return e > .5 ? -p.invNorm(1 - e) : .5 === e ? 0 : e < 0 ? NaN : 0 === e ? -1 / 0 : (e < .02425 ? (t = Math.sqrt(-2 * Math.log(e)), r = (((((-.00778489400243029 * t - .322396458041136) * t - 2.40075827716184) * t - 2.54973253934373) * t + 4.37466414146497) * t + 2.93816398269878) / ((((.00778469570904146 * t + .32246712907004) * t + 2.445134137143) * t + 3.75440866190742) * t + 1)) : (t = e - .5, n = t * t, r = (((((-39.6968302866538 * n + 220.946098424521) * n - 275.928510446969) * n + 138.357751867269) * n - 30.6647980661472) * n + 2.50662827745924) * t / (((((-54.4760987982241 * n + 161.585836858041) * n - 155.698979859887) * n + 66.8013118877197) * n - 13.2806815528857) * n + 1)), r - Math.sqrt(2 * Math.PI) * (.5 * p.erfcx(-r / Math.SQRT2) - Math.exp(.5 * r * r) * e))
        }, p.invPoisson = function(e, t) {
            if (t <= 0 || e < 0 || e > 1) return NaN;
            if (0 === e) return 0;
            if (1 === e) return 1 / 0;
            for (var n = 1, r = 1, i = 1; Math.exp(-t) * r < e;) {
                if (n *= t / i, r + n === r) return 1 / 0;
                r += n, i += 1
            }
            return i - 1
        }, p.invBinom = function(e, t, n) {
            if (t !== Math.round(t)) return NaN;
            if (n < 0 || n > 1) return NaN;
            if (e < 0 || e > 1) return NaN;
            if (0 === e) return 0;
            if (1 === e) return t;
            if (0 === t) return 0;
            if (1 === n) return t;
            if (0 === n) return 0;
            for (var r = n / (1 - n), i = Math.pow(1 - n, t), o = i, a = 1; o < e;) {
                if (i *= (t - a + 1) / a * r, o + i === o) return t;
                if (a > t) return t;
                o += i, a += 1
            }
            return a - 1
        }, p.invT = function(e, t) {
            if (t <= 0 || e < 0 || e > 1) return NaN;
            if (0 === e) return -1 / 0;
            if (1 === e) return 1 / 0;
            if (1 === t || 2 === t || 4 === t) return I(t, e);
            var n, r;
            return .5 === e ? 0 : e > .5 ? (n = t > 1 ? p.invNorm(e) : I(1, e), r = t > 1 ? I(1, e) : Math.pow(p.tpdf(0, t) * Math.pow(t, (t - 1) / 2) / (1 - e), 1 / t), T(t, e, n, r)) : -p.invT(1 - e, t)
        };
        var I = function(e, t) {
                var n = 4 * t * (1 - t);
                switch (e) {
                    case 1:
                        return Math.tan(Math.PI * (t - .5));
                    case 2:
                        return 2 * (t - .5) * Math.sqrt(2 / n);
                    case 4:
                        var r = Math.cos(Math.acos(Math.sqrt(n)) / 3) / Math.sqrt(n);
                        return 2 * Math.sign(t - .5) * Math.sqrt(r - 1);
                    default:
                        throw new Error("_invTSimple() must be called with 1, 2, or 4 df.")
                }
            },
            T = function(e, t, n, r) {
                for (var i, o, a = n, s = r;;) {
                    if (i = c(a, s), o = v(e, i), i === a || i === s) return o > t ? a : s;
                    o < t ? a = i : s = i
                }
            };
        return p.invUniform = function(e, t, n) {
                return e < t || e > n || n <= t ? NaN : t + e * (n - t)
            }, p.tscore = function(e, t) {
                var n = p.stdev(e);
                return (p.mean(e) - t) * Math.sqrt(e.length) / n
            }, p.itscore = function(e, t) {
                var n = e.length,
                    r = p.mean(e),
                    i = p.stdev(e),
                    o = t.length,
                    a = p.mean(t),
                    s = p.stdev(t);
                return (r - a) / (Math.sqrt(((n - 1) * i * i + (o - 1) * s * s) / (n + o - 2)) * Math.sqrt(1 / n + 1 / o))
            }, p.ttest = function(e, t) {
                1 === arguments.length && (t = 0);
                var n = p.tscore(e, t),
                    r = e.length - 1;
                return {
                    lessThan: i(n, r, -1),
                    greaterThan: i(n, r, 1),
                    notEqual: i(n, r, 0)
                }
            }, p.ittest = function(e, t) {
                var n = p.itscore(e, t),
                    r = e.length + t.length - 2;
                return {
                    lessThan: i(n, r, -1),
                    greaterThan: i(n, r, 1),
                    notEqual: i(n, r, 0)
                }
            }, p.stats = function(e) {
                return {
                    min: p.listMin(e),
                    q1: p.quartile(e, 1),
                    median: p.median(e),
                    q3: p.quartile(e, 3),
                    max: p.listMax(e)
                }
            }, p.length = function(e) {
                return e.length
            },
            p.listMin = function(e) {
                if (e.length < 1) return NaN;
                var t = e[0];
                if (isNaN(t)) return NaN;
                for (var n = 1; n < e.length; n++) {
                    if (isNaN(e[n])) return NaN;
                    e[n] < t && (t = e[n])
                }
                return t
            }, p.listMax = function(e) {
                if (e.length < 1) return NaN;
                var t = e[0];
                if (isNaN(t)) return NaN;
                for (var n = 1; n < e.length; n++) {
                    if (isNaN(e[n])) return NaN;
                    e[n] >= t && (t = e[n])
                }
                return t
            }, p.quantile = function(e, t) {
                if (!isFinite(t) || t < 0 || t > 1) return NaN;
                var n = e.length,
                    r = p.sortPerm(e),
                    i = t * (n - 1);
                return Math.floor(i) === i ? e[r[i]] : (Math.ceil(i) - i) * e[r[Math.floor(i)]] + (i - Math.floor(i)) * e[r[Math.ceil(i)]]
            }, p.quartile = function(e, t) {
                if (!isFinite(t) || t < 0 || t > 4) return NaN;
                var n = p.sortPerm(e),
                    r = p.quartileIndex(e, t),
                    i = Math.floor(r),
                    o = Math.ceil(r);
                return (e[n[i]] + e[n[o]]) / 2
            }, p.sortPerm = function(e) {
                for (var t = e.length, n = [], r = 0; r < t; r++) n.push(r);
                return n.sort(function(t, n) {
                    return e[t] - e[n]
                }), n
            }, p.quartileIndex = function(e, t) {
                t = Math.round(t);
                var n, r = e.length,
                    i = r % 2 == 1;
                return 1 === r ? 0 : (0 === t && (n = 0), 2 === t && (n = (r - 1) / 2), 4 === t && (n = r - 1), 1 === t && (n = i ? (r + 1) / 4 - 1 : (r + 2) / 4 - 1), 3 === t && (n = i ? (3 * r + 3) / 4 - 1 : (3 * r + 2) / 4 - 1), n)
            }, p.upperQuantileIndex = function(e, t) {
                return p.sortPerm(e)[Math.ceil(t * (e.length - 1))] + 1
            }, p.lowerQuantileIndex = function(e, t) {
                return p.sortPerm(e)[Math.floor(t * (e.length - 1))] + 1
            }, p.upperQuartileIndex = function(e, t) {
                return p.sortPerm(e)[Math.ceil(p.quartileIndex(e, t))] + 1
            }, p.lowerQuartileIndex = function(e, t) {
                return p.sortPerm(e)[Math.floor(p.quartileIndex(e, t))] + 1
            }, p.median = function(e) {
                return p.quantile(e, .5)
            }, p.argMin = function(e) {
                if (e.length < 1) return 0;
                var t = e[0];
                if (isNaN(t)) return 0;
                for (var n = 0, r = 1; r < e.length; r++) {
                    if (isNaN(e[r])) return 0;
                    e[r] < t && (n = r, t = e[r])
                }
                return n + 1
            }, p.argMax = function(e) {
                if (e.length < 1) return 0;
                var t = e[0];
                if (isNaN(t)) return 0;
                for (var n = 0, r = 1; r < e.length; r++)
                    if (e[r] >= t) {
                        if (isNaN(e[r])) return 0;
                        n = r, t = e[r]
                    } return n + 1
            }, p.varp = function(e) {
                for (var t = p.mean(e), n = 0, r = 0; r < e.length; r++) {
                    var i = e[r] - t;
                    n += i * i
                }
                return n / e.length
            }, p.mad = function(e) {
                for (var t = p.mean(e), n = 0, r = 0; r < e.length; r++) n += Math.abs(e[r] - t);
                return n / e.length
            }, p.var = function(e) {
                var t = e.length;
                return p.varp(e) * t / (t - 1)
            }, p.covp = function(e, t) {
                if (e.length !== t.length) return NaN;
                for (var n = e.length, r = p.mean(e), i = p.mean(t), o = 0, a = 0; a < n; a++) o += (e[a] - r) * (t[a] - i);
                return o / n
            }, p.cov = function(e, t) {
                if (e.length !== t.length) return NaN;
                var n = e.length;
                return p.covp(e, t) * n / (n - 1)
            }, p.corr = function(e, t) {
                if (e.length !== t.length) return NaN;
                for (var n, r, i = e.length, o = p.mean(e), a = p.mean(t), s = 0, l = 0, c = 0, u = 0; u < i; u++) n = e[u] - o, r = t[u] - a, s += n * n, l += r * r, c += n * r;
                return c / Math.sqrt(s * l)
            }, p.stdev = function(e) {
                return Math.sqrt(p.var(e))
            }, p.stdevp = function(e) {
                return Math.sqrt(p.varp(e))
            }, p.quad = s.quad, p.distance = function(e, t) {
                return a.hypot(t[0] - e[0], t[1] - e[1])
            }, p.midpoint = function(e, t) {
                return [.5 * (e[0] + t[0]), .5 * (e[1] + t[1])]
            }, p
    }), define("math/rational-arithmetic-sequence", ["require", "math/distance", "math/builtin"], function(e) {
        function t(e, t) {
            var i = r.toFraction(e),
                o = r.toFraction(t);
            if (n.approx(i.n / i.d, e) && n.approx(o.n / o.d, t)) {
                var a = r.lcm(i.d, o.d),
                    s = i.n * (a / i.d);
                return {
                    nstart: s,
                    nstep: o.n * (a / o.d) - s,
                    lcm: a
                }
            }
        }
        var n = e("math/distance"),
            r = e("math/builtin");
        return t
    }), define("lib/named-colors", ["require"], function(e) {
        return {
            aliceblue: [240, 248, 255],
            antiquewhite: [250, 235, 215],
            aqua: [0, 255, 255],
            aquamarine: [127, 255, 212],
            azure: [240, 255, 255],
            beige: [245, 245, 220],
            bisque: [255, 228, 196],
            black: [0, 0, 0],
            blanchedalmond: [255, 235, 205],
            blue: [0, 0, 255],
            blueviolet: [138, 43, 226],
            brown: [165, 42, 42],
            burlywood: [222, 184, 135],
            cadetblue: [95, 158, 160],
            chartreuse: [127, 255, 0],
            chocolate: [210, 105, 30],
            coral: [255, 127, 80],
            cornflowerblue: [100, 149, 237],
            cornsilk: [255, 248, 220],
            crimson: [220, 20, 60],
            cyan: [0, 255, 255],
            darkblue: [0, 0, 139],
            darkcyan: [0, 139, 139],
            darkgoldenrod: [184, 134, 11],
            darkgray: [169, 169, 169],
            darkgreen: [0, 100, 0],
            darkgrey: [169, 169, 169],
            darkkhaki: [189, 183, 107],
            darkmagenta: [139, 0, 139],
            darkolivegreen: [85, 107, 47],
            darkorange: [255, 140, 0],
            darkorchid: [153, 50, 204],
            darkred: [139, 0, 0],
            darksalmon: [233, 150, 122],
            darkseagreen: [143, 188, 143],
            darkslateblue: [72, 61, 139],
            darkslategray: [47, 79, 79],
            darkslategrey: [47, 79, 79],
            darkturquoise: [0, 206, 209],
            darkviolet: [148, 0, 211],
            deeppink: [255, 20, 147],
            deepskyblue: [0, 191, 255],
            dimgray: [105, 105, 105],
            dimgrey: [105, 105, 105],
            dodgerblue: [30, 144, 255],
            firebrick: [178, 34, 34],
            floralwhite: [255, 250, 240],
            forestgreen: [34, 139, 34],
            fuchsia: [255, 0, 255],
            gainsboro: [220, 220, 220],
            ghostwhite: [248, 248, 255],
            gold: [255, 215, 0],
            goldenrod: [218, 165, 32],
            gray: [128, 128, 128],
            green: [0, 128, 0],
            greenyellow: [173, 255, 47],
            grey: [128, 128, 128],
            honeydew: [240, 255, 240],
            hotpink: [255, 105, 180],
            indianred: [205, 92, 92],
            indigo: [75, 0, 130],
            ivory: [255, 255, 240],
            khaki: [240, 230, 140],
            lavender: [230, 230, 250],
            lavenderblush: [255, 240, 245],
            lawngreen: [124, 252, 0],
            lemonchiffon: [255, 250, 205],
            lightblue: [173, 216, 230],
            lightcoral: [240, 128, 128],
            lightcyan: [224, 255, 255],
            lightgoldenrodyellow: [250, 250, 210],
            lightgray: [211, 211, 211],
            lightgreen: [144, 238, 144],
            lightgrey: [211, 211, 211],
            lightpink: [255, 182, 193],
            lightsalmon: [255, 160, 122],
            lightseagreen: [32, 178, 170],
            lightskyblue: [135, 206, 250],
            lightslategray: [119, 136, 153],
            lightslategrey: [119, 136, 153],
            lightsteelblue: [176, 196, 222],
            lightyellow: [255, 255, 224],
            lime: [0, 255, 0],
            limegreen: [50, 205, 50],
            linen: [250, 240, 230],
            magenta: [255, 0, 255],
            maroon: [128, 0, 0],
            mediumaquamarine: [102, 205, 170],
            mediumblue: [0, 0, 205],
            mediumorchid: [186, 85, 211],
            mediumpurple: [147, 112, 219],
            mediumseagreen: [60, 179, 113],
            mediumslateblue: [123, 104, 238],
            mediumspringgreen: [0, 250, 154],
            mediumturquoise: [72, 209, 204],
            mediumvioletred: [199, 21, 133],
            midnightblue: [25, 25, 112],
            mintcream: [245, 255, 250],
            mistyrose: [255, 228, 225],
            moccasin: [255, 228, 181],
            navajowhite: [255, 222, 173],
            navy: [0, 0, 128],
            oldlace: [253, 245, 230],
            olive: [128, 128, 0],
            olivedrab: [107, 142, 35],
            orange: [255, 165, 0],
            orangered: [255, 69, 0],
            orchid: [218, 112, 214],
            palegoldenrod: [238, 232, 170],
            palegreen: [152, 251, 152],
            paleturquoise: [175, 238, 238],
            palevioletred: [219, 112, 147],
            papayawhip: [255, 239, 213],
            peachpuff: [255, 218, 185],
            peru: [205, 133, 63],
            pink: [255, 192, 203],
            plum: [221, 160, 221],
            powderblue: [176, 224, 230],
            purple: [128, 0, 128],
            rebeccapurple: [102, 51, 153],
            red: [255, 0, 0],
            rosybrown: [188, 143, 143],
            royalblue: [65, 105, 225],
            saddlebrown: [139, 69, 19],
            salmon: [250, 128, 114],
            sandybrown: [244, 164, 96],
            seagreen: [46, 139, 87],
            seashell: [255, 245, 238],
            sienna: [160, 82, 45],
            silver: [192, 192, 192],
            skyblue: [135, 206, 235],
            slateblue: [106, 90, 205],
            slategray: [112, 128, 144],
            slategrey: [112, 128, 144],
            snow: [255, 250, 250],
            springgreen: [0, 255, 127],
            steelblue: [70, 130, 180],
            tan: [210, 180, 140],
            teal: [0, 128, 128],
            thistle: [216, 191, 216],
            tomato: [255, 99, 71],
            turquoise: [64, 224, 208],
            violet: [238, 130, 238],
            wheat: [245, 222, 179],
            white: [255, 255, 255],
            whitesmoke: [245, 245, 245],
            yellow: [255, 255, 0],
            yellowgreen: [154, 205, 50]
        }
    }), define("lib/color-distance", ["require", "underscore", "lib/named-colors"], function(e) {
        function t(e) {
            var t = [],
                i = e.toLowerCase();
            if ("rgb" === i.slice(0, 3)) try {
                t = i.replace(/[^\d,]/g, "").split(",").slice(0, 3), t = u.map(t, function(e) {
                    return parseInt(e, 10)
                })
            } catch (t) {
                r(e)
            } else if ("#" === i[0]) {
                var o = /^#?([a-f\d])([a-f\d])([a-f\d])$/;
                i = i.replace(o, function(e, t, n, r) {
                    return t + t + n + n + r + r
                });
                try {
                    t = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/.exec(i).slice(1), t = u.map(t, function(e) {
                        return parseInt(e, 16)
                    })
                } catch (t) {
                    r(e)
                }
            } else t = p[i];
            return n(t) || r(e), {
                R: t[0],
                G: t[1],
                B: t[2]
            }
        }

        function n(e) {
            return !!u.isArray(e) && (3 === e.length && u.every(e, function(e) {
                return Number.isInteger(e) && e >= 0 && e <= 255
            }))
        }

        function r(e) {
            throw new Error("Invalid color string: " + e)
        }

        function i(e) {
            var t = e.R,
                n = e.G,
                r = e.B,
                i = [];
            return i[0] = .49 * t + .31 * n + .2 * r, i[1] = .17697 * t + .8124 * n + .01063 * r, i[2] = .01 * n + .99 * r, i = u.map(i, function(e) {
                return e / .17697
            }), {
                X: i[0],
                Y: i[1],
                Z: i[2]
            }
        }

        function o(e) {
            var t = e.X,
                n = e.Y,
                r = e.Z,
                i = [];
            return i[0] = 116 * a(n / 100) - 16, i[1] = 500 * (a(t / 95.047) - a(n / 100)), i[2] = 200 * (a(n / 100) - a(r / 108.883)), {
                L: i[0],
                a: i[1],
                b: i[2]
            }
        }

        function a(e) {
            var t = 6 / 29;
            return e > Math.pow(t, 3) ? Math.pow(e, 1 / 3) : e / (3 * t * t) + 4 / 29
        }

        function s(e, t) {
            var n = e.L,
                r = e.a,
                i = e.b,
                o = t.L,
                a = t.a,
                s = t.b,
                l = n - o,
                c = Math.sqrt(r * r + i * i),
                u = Math.sqrt(a * a + s * s),
                p = c - u,
                d = r - a,
                h = i - s,
                f = Math.sqrt(d * d + h * h - p * p),
                m = 1 + .045 * c,
                g = 1 + .015 * c,
                y = l / 1,
                v = p / (1 * m),
                b = f / (1 * g);
            return Math.sqrt(y * y + v * v + b * b)
        }

        function l(e, n) {
            return s(o(i(t(e))), o(i(t(n))))
        }

        function c(e, t) {
            var n = u.map(t, function(t) {
                    return l(e, t)
                }),
                r = u.min(n);
            return t[n.indexOf(r)]
        }
        var u = e("underscore"),
            p = e("lib/named-colors");
        return {
            str2rgb: t,
            difference: l,
            closestColor: c
        }
    }), define("lib/worker-i18n", ["require", "exports"], function(e, t) {
        "use strict";

        function n(e, t) {
            return {
                msg: e,
                vars: t
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.t = n
    }), define("math/functions", ["require", "math/builtin"], function(e) {
        function t(e) {
            for (var t = 0; t < e.length; t++) e[t].compiled && delete e[t].compiled.fn
        }

        function n(e) {
            for (var t = 0; t < e.length; t++) {
                var n = e[t].compiled;
                n && (n.fn = i(n.args, n.source))
            }
        }

        function r(e, t) {
            for (var n = [], r = 0; r < t; r++) n.push("values[" + r + "]");
            return i(["values"], "return " + e(n))
        }

        function i(e, t) {
            var n = e.join(","),
                r = "return (function(" + n + "){" + t + "})";
            return new Function(["BuiltIn"], r)(o)
        }
        var o = e("math/builtin");
        return {
            dehydrateGraphData: t,
            rehydrateGraphData: n,
            closureFunctionWithBuiltIn: i,
            createEvaluateFunction: r
        }
    }), define("math/parser/input-span", ["require", "exports"], function(e, t) {
        "use strict";

        function n(e, t, n) {
            return {
                input: e,
                start: t,
                end: n
            }
        }

        function r(e, t) {
            return n(e, t, t)
        }

        function i(e, t) {
            if (e.input !== t.input) throw new Error("Programming Error: cannot form a span on different inputs");
            return n(e.input, e.start, t.end)
        }

        function o(e) {
            return e.input.slice(e.start, e.end)
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.Span = n, t.emptySpanAt = r, t.joinSpans = i, t.slice = o
    }), define("math/policy", ["require", "exports"], function(e, t) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var n = ["Sum", "Product", "Integral", "List", "Derivative", "Piecewise", "Exponent", "PercentOf"];
        t.defaultPolicy = {
            assignmentForbidden: function(e) {
                return !0
            },
            graphingEnabled: function() {
                return !1
            },
            isValidSlider: function(e) {
                return !1
            },
            sliderVariables: function(e) {
                return []
            },
            ansEnabled: function() {
                return !1
            },
            disabledFeatures: function() {
                return n
            }
        }
    }), define("math/parsenode/base", ["require", "pjs", "math/functions", "math/parser/input-span", "math/policy"], function(e) {
        var t = e("pjs"),
            n = e("math/functions"),
            r = e("math/parser/input-span"),
            i = e("math/policy").defaultPolicy;
        return t(function(e, t, o) {
            e.init = function() {
                this._dependencies = [], this._dummyDependencies = [], this._exports = []
            }, e.exportPenalty = 0;
            var a = 0;
            e.tmpVar = function() {
                return "tmp" + a++
            }, e.dependencies = function() {
                return this.getDependencies()
            }, e.evaluateOnce = function(e) {
                void 0 === e && (e = {});
                var t = this.getConcreteTree(i, e),
                    n = t.getEvaluationInfo();
                return n ? n[0].val : NaN
            }, e.setInputSpan = function(e) {
                this._inputSpan = e
            }, e.getInputString = function() {
                return void 0 === this._inputSpan ? "" : r.slice(this._inputSpan)
            }, e.getInputSpan = function() {
                return this._inputSpan
            }, e.shouldExportAns = function() {
                return !1
            }, e.getAnsVariable = function() {
                return this.shouldExportAns() && this.userData && this.userData.hasOwnProperty("index") ? ["ans_" + this.userData.index] : []
            }, e.addDependency = function(e) {
                this.dependsOn(e) || this._dependencies.push(e)
            }, e.addDependencies = function(e) {
                for (var t = 0; t < e.length; t++) this.addDependency(e[t])
            }, e.addDummyDependency = function(e) {
                -1 === this._dummyDependencies.indexOf(e) && this._dummyDependencies.push(e)
            }, e.addDummyDependencies = function(e) {
                for (var t = 0; t < e.length; t++) this.addDummyDependency(e[t])
            }, e.mergeDependencies = function() {
                for (var e = 0; e < arguments.length; e++) this.addDependencies(arguments[e].getDependencies()), this.addDummyDependencies(arguments[e].getDummyDependencies())
            }, e.getDependencies = function() {
                return this._dependencies
            }, e.getDummyDependencies = function() {
                return this._dummyDependencies
            }, e.removeDependency = function(e) {
                var t = this._dependencies.indexOf(e);
                t >= 0 && this._dependencies.splice(t, 1)
            }, e.dependsOn = function(e) {
                return this._dependencies.indexOf(e) > -1
            }, e.getExports = function() {
                return (this._exports || []).concat(this.getAnsVariable())
            }, e.getLegalExports = function(e) {
                return this.getExports().filter(function(t) {
                    return !e.assignmentForbidden(t)
                })
            }, e.exportsSymbol = function(e) {
                return this._exports.indexOf(e) > -1
            }, e.exportTo = function(e, t, n) {
                for (var r = this.getLegalExports(e), i = 0; i < r.length; i++) {
                    var o = r[i];
                    if (n[o]) return;
                    n[o] = t.blocksExport ? t : this
                }
            }, e.getOperator = function() {
                return this.operator || "="
            }, e.isInequality = function() {
                return !1
            }, e.isShadeBetween = function() {
                return !1
            }, e.getAllIds = function() {
                return this.userData ? [this.userData.id] : []
            }, e.getEvaluationInfo = function() {
                return !1
            }, e.shouldPromoteToSlider = function(e) {
                return !1
            }, e.getSliderVariables = function(e, t) {
                return e.sliderVariables(t.getDependencies())
            }, e.getCompiledFunction = function(e) {
                var t = this.getEvalStrings(),
                    r = t.statements.join(";") + ";return " + t.expression;
                if (void 0 === e) {
                    e = this.getDependencies();
                    var i = e.indexOf("x");
                    if (-1 !== i) {
                        var o = e[0];
                        e[0] = e[i], e[i] = o
                    }
                }
                return {
                    args: e,
                    source: r,
                    fn: n.closureFunctionWithBuiltIn(e, r)
                }
            }, e.getCompiledDerivative = function() {
                var e = this.getDependencies();
                return this.takeDerivative(e[0] || "x").getCompiledFunction()
            }, e.asValue = function() {}
        })
    }), define("math/parsenode/error", ["require", "pjs", "./base"], function(e) {
        return e("pjs")(e("./base"), function(e, t) {
            e.init = function(e) {
                t.init.call(this), this._msg = e, this._sliderVariables = [], this.blocksExport = !0
            }, e.evaluateOnce = function(e) {
                return this._msg
            }, e.isError = !0, e.getError = function() {
                return this._msg
            }, e.setDependencies = function(e) {
                return this._dependencies = e, this
            }, e.allowExport = function() {
                return this.blocksExport = !1, this
            }
        })
    }), define("graphing/label", ["require", "exports", "underscore", "math/distance", "math/tofraction", "bugsnag"], function(e, t, n, r, i, o) {
        "use strict";

        function a(e, t) {
            if (void 0 === t && (t = e), isNaN(e) || !isFinite(e)) return {
                ariaString: "undefined",
                string: "undefined",
                value: e
            };
            if (0 === e) return {
                ariaString: "0",
                string: "0",
                value: e
            };
            Math.abs(e) > Math.abs(t) && (t = e);
            var n, o, a, s = i.default(e / Math.PI, 24);
            if (f(t) && r.approx(s.n / s.d * Math.PI, e, 3)) return n = 0 === s.n ? "0" : 1 === s.n ? "π" : -1 === s.n ? "-π" : s.n.toString() + "π", o = 1 === s.d ? "" : "/" + s.d.toString(), a = n + o, {
                ariaString: c(a),
                string: a,
                value: s.n / s.d * Math.PI
            };
            if (f(t)) return a = h(p(e.toFixed(m(t)))), {
                ariaString: c(a),
                string: a,
                value: parseFloat(a)
            };
            var l = d(e.toExponential(m(t / e))).split("e"),
                u = l[0] + "×10",
                g = l[1].replace("+", "");
            return a = d(e.toExponential(m(t / e))).replace("+", ""), {
                ariaString: c(a),
                string: a,
                mantissa: u,
                superscript: g,
                value: parseFloat(a)
            }
        }

        function s(e) {
            return C["[" + e + "]"]
        }

        function l(e) {
            return e[0] + e.slice(1).split("").join(" ")
        }

        function c(e) {
            return e.replace(D, l).replace(k, s).replace(/ +/gi, " ").trim()
        }

        function u(e, t, n, r) {
            var i = a(e, t);
            return [i, a(r(i.value), n)]
        }

        function p(e) {
            return -1 === e.indexOf(".") ? e : e.replace(P, "")
        }

        function d(e) {
            var t = /\.?0+e/;
            return e.replace(t, "e")
        }

        function h(e) {
            return "-0" === e ? "0" : e
        }

        function f(e) {
            return 1e-4 < (e = Math.abs(e)) && e < 1e7
        }

        function m(e) {
            return e = Math.abs(e), e = Math.max(e, 1e-16), Math.max(3, Math.floor(4.5 - Math.log(e) / Math.LN10))
        }

        function g(e) {
            return 1e6 / Math.sqrt(Math.abs(e))
        }

        function y(e) {
            var t = g(e);
            if (t < 1) return !1;
            if (t > 1e12) return !1;
            var n = i.default(e, t),
                r = n.n,
                o = n.d;
            return 1 !== o && e === e + Math.pow(2, -3) * Math.abs(r / o - e)
        }

        function v(e, t) {
            if (t = t || {}, isNaN(e) || !isFinite(e)) return {
                type: "undefined"
            };
            if (0 === e || t.zeroCutoff && Math.abs(e) < t.zeroCutoff) return {
                type: "decimal",
                value: "0"
            };
            "number" != typeof e && (o.notify("non-number passed to numericLabel", {
                metaData: {
                    type: typeof e,
                    value: e
                }
            }), e = parseFloat(e));
            var n = t.smallCutoff || .001,
                r = t.bigCutoff || 1e6,
                a = t.digits || 10,
                s = d(e.toExponential(a - 2)),
                l = s.match(/([\d\.\-]+)e\+?([\d\-]+)/);
            if (!l) return {
                type: "undefined"
            };
            var c = parseInt(l[2], 10) >= a,
                u = y(e);
            if (Math.abs(e) > r || Math.abs(e) < n || c) return {
                type: "scientific",
                mantissa: l[1],
                exponent: l[2]
            };
            if (u && t.displayAsFraction) {
                var h = i.default(e, g(e));
                return {
                    type: "fraction",
                    numerator: h.n.toString(),
                    denominator: h.d.toString()
                }
            }
            var f = p(e.toPrecision(a));
            return e !== Number(f) && t.addEllipses && (f += "..."), {
                type: "decimal",
                value: f
            }
        }

        function b(e, t) {
            var n = v(e, t);
            switch (n.type) {
                case "undefined":
                    return "undefined";
                case "decimal":
                    return n.value;
                case "scientific":
                    return n.mantissa + "<span class='dcg-cross'>×</span>10<sup>" + n.exponent + "</sup>";
                case "fraction":
                    return "1" === n.denominator ? n.numerator : n.numerator + "/" + n.denominator;
                default:
                    return n
            }
        }

        function x(e, t) {
            var n = v(e, t);
            switch (n.type) {
                case "undefined":
                    return "undefined";
                case "decimal":
                    return n.value;
                case "scientific":
                    return n.mantissa + " * 10^" + n.exponent;
                case "fraction":
                    return "1" === n.denominator ? n.numerator : n.numerator + "/" + n.denominator;
                default:
                    return n
            }
        }

        function w(e, t) {
            var n = v(e, t);
            switch (n.type) {
                case "undefined":
                    return "undefined";
                case "decimal":
                    return n.value;
                case "scientific":
                    return n.mantissa + "\\times10^{" + n.exponent + "}";
                case "fraction":
                    return "1" === n.denominator ? n.numerator : "-" === n.numerator[0] ? "-\\frac{" + n.numerator.slice(1) + "}{" + n.denominator + "}" : "\\frac{" + n.numerator + "}{" + n.denominator + "}";
                default:
                    return n
            }
        }

        function _(e, t) {
            var n = v(e, t);
            switch (n.type) {
                case "undefined":
                    return "undefined";
                case "decimal":
                    return c(n.value);
                case "scientific":
                    return c(n.mantissa + "e" + n.exponent);
                case "fraction":
                    return c(n.numerator + "/" + n.denominator);
                default:
                    return n
            }
        }

        function S(e) {
            e = e.replace("\\", "");
            var t = {
                pi: "π",
                tau: "τ",
                theta: "θ",
                phi: "ϕ",
                div: "÷",
                cdot: "⋅",
                times: "×",
                lt: "<",
                gt: ">",
                le: "≤",
                ge: "≥",
                sim: "∼",
                ldots: "…",
                prime: "′",
                approx: "≈"
            };
            return t.hasOwnProperty(e) ? t[e] : e
        }

        function E(e) {
            var t = e.split("_"),
                n = "";
            return t[0].length > 1 && (n += "\\"), n += t[0], t[1] && (1 === t[1].length ? n += "_" + t[1] : n += "_{" + t[1] + "}"), n
        }

        function M(e) {
            if (!e) return "";
            var t = e.split("_").map(S).map(n.escape),
                r = t[0];
            return t[1] && (r += "<sub>" + t[1] + "</sub>"), r
        }

        function I(e) {
            return e = e.replace(/\\operatorname\{(.*)\}/, "$1"), e.replace(/[{}\\]/g, "")
        }

        function T(e) {
            return e.replace(/^(\\ | |\\space)+/, "").replace(/(\\ | |\\space)+$/, "")
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.value = a;
        var C = {
                "[e]": " times 10 to the ",
                "[+]": " plus ",
                "[-]": " minus ",
                "[*]": " times ",
                "[/]": " over ",
                "[π]": " pi ",
                "[τ]": " tau ",
                "[θ]": " theta ",
                "[ϕ]": " phi "
            },
            k = new RegExp(Object.keys(C).join("|"), "gi"),
            D = /\.\d+/g;
        t.point = u;
        var P = /\.?0+$/;
        t.canDisplayAsFraction = y, t.numericLabel = v, t.truncatedHTMLLabel = b, t.truncatedPlainmathLabel = x, t.truncatedLatexLabel = w, t.truncatedAriaLabel = _, t.formatSymbol = S, t.identifierToLatex = E, t.identifierToHTML = M, t.latexToIdentifier = I, t.trimLatex = T
    }), define("math/types", ["require", "lib/worker-i18n"], function(e) {
        function t(e) {
            switch (e) {
                case l:
                    return "Any";
                case c:
                    return "Number";
                case u:
                    return "Bool";
                case p:
                    return "Point";
                case d:
                    return "Distribution";
                case h:
                    return "ListOfAny";
                case f:
                    return "ListOfNumber";
                case m:
                    return "ListOfBool";
                case g:
                    return "ListOfPoint";
                case y:
                    return "ListOfDistribution";
                case v:
                    return "ErrorType";
                case b:
                    return "SeedType";
                default:
                    throw new Error("Invalid type")
            }
        }

        function n(e) {
            switch (e) {
                case l:
                    return s.t("an unknown object");
                case c:
                    return s.t("a number");
                case u:
                    return s.t("a true/false value");
                case p:
                    return s.t("a point");
                case d:
                    return s.t("a distribution");
                case h:
                    return s.t("a list of unknown objects");
                case f:
                    return s.t("a list of numbers");
                case m:
                    return s.t("a list of true/false values");
                case g:
                    return s.t("a list of points");
                case y:
                    return s.t("a list of distributions");
                case v:
                    return s.t("an error object");
                case b:
                    return s.t("a string");
                default:
                    throw new Error("Invalid type")
            }
        }

        function r(e) {
            switch (e) {
                case h:
                case f:
                case m:
                case g:
                case y:
                    return !0;
                default:
                    return !1
            }
        }

        function i(e) {
            switch (e) {
                case h:
                    return l;
                case f:
                    return c;
                case m:
                    return u;
                case g:
                    return p;
                case y:
                    return d;
                default:
                    return l
            }
        }

        function o(e) {
            switch (e) {
                case l:
                    return h;
                case c:
                    return f;
                case u:
                    return m;
                case p:
                    return g;
                case d:
                    return y;
                default:
                    throw new Error("Type " + t(e) + " does not implement listType.")
            }
        }

        function a(e) {
            switch (e) {
                case l:
                case c:
                case u:
                case p:
                case d:
                    return !0;
                default:
                    return !1
            }
        }
        var s = e("lib/worker-i18n"),
            l = 0,
            c = 1,
            u = 2,
            p = 3,
            d = 4,
            h = 5,
            f = 6,
            m = 7,
            g = 8,
            y = 9,
            v = 10,
            b = 11;
        return {
            Any: l,
            Number: c,
            Bool: u,
            Point: p,
            Distribution: d,
            ListOfAny: h,
            ListOfNumber: f,
            ListOfBool: m,
            ListOfPoint: g,
            ListOfDistribution: y,
            ErrorType: v,
            SeedType: b,
            repr: t,
            prettyPrint: n,
            isList: r,
            elementType: i,
            listType: o,
            hasListType: a
        }
    }), define("math/errormsg", ["require", "lib/worker-i18n", "math/parsenode/error", "graphing/label", "math/types"], function(e) {
        var t = e("lib/worker-i18n"),
            n = e("math/parsenode/error"),
            r = e("graphing/label"),
            i = e("math/types");
        return {
            parseError: function() {
                return n(t.t("Sorry, I don't understand this."))
            },
            unrecognizedSymbol: function(e) {
                return e = r.formatSymbol(e), n(t.t("Sorry, I don't understand the '__symbol__' symbol.", {
                    symbol: e
                }))
            },
            unexpectedInequality: function() {
                return n(t.t("Cannot use an inequality here."))
            },
            unexpectedSymbol: function(e) {
                return e = r.formatSymbol(e), n(t.t("Sorry, I don't understand the way that '__symbol__' is used here.", {
                    symbol: e
                }))
            },
            addTypeError: function(e) {
                return n(t.t("Cannot add __symbol1__ and __symbol2__.", {
                    symbol1: e[0],
                    symbol2: e[1]
                })).allowExport()
            },
            subtractTypeError: function(e) {
                return n(t.t("Cannot subtract __symbol2__ from __symbol1__.", {
                    symbol1: e[0],
                    symbol2: e[1]
                })).allowExport()
            },
            multiplyTypeError: function(e) {
                return n(t.t("Cannot multiply __symbol1__ by __symbol2__.", {
                    symbol1: e[0],
                    symbol2: e[1]
                })).allowExport()
            },
            divideTypeError: function(e) {
                return n(t.t("Cannot divide __symbol1__ by __symbol2__.", {
                    symbol1: e[0],
                    symbol2: e[1]
                })).allowExport()
            },
            exponentTypeError: function(e) {
                return n(t.t("Cannot raise __symbol1__ to __symbol2__.", {
                    symbol1: e[0],
                    symbol2: e[1]
                })).allowExport()
            },
            negativeTypeError: function(e) {
                return n(t.t("Cannot negate __symbol__.", {
                    symbol: e[0]
                })).allowExport()
            },
            comparatorTypeError: function(e) {
                return n(t.t("Cannot compare __symbol1__ to __symbol2__.", {
                    symbol1: e[0],
                    symbol2: e[1]
                })).allowExport()
            },
            andTypeError: function(e) {
                return n(t.t("Cannot apply __symbol__ to __symbol1__ and __symbol2__.", {
                    symbol: "and",
                    symbol1: e[0],
                    symbol2: e[1]
                })).allowExport()
            },
            listTypeError: function(e) {
                return n(t.t("Cannot store __symbol1__ in a list.", {
                    symbol1: e[0]
                })).allowExport()
            },
            pointTypeError: function(e) {
                return n(t.t("Cannot use __symbol1__ and __symbol2__ as the coordinates of __symbol3__.", {
                    symbol1: e[0],
                    symbol2: e[1],
                    symbol3: i.prettyPrint(i.Point)
                })).allowExport()
            },
            indexTypeError: function(e) {
                return n(t.t("Cannot index __symbol1__ with __symbol2__.", {
                    symbol1: e[0],
                    symbol2: e[1]
                })).allowExport()
            },
            orderedPairAccessTypeError: function(e) {
                return n(t.t("Cannot access a coordinate of __symbol__.", {
                    symbol: e[0]
                })).allowExport()
            },
            functionTypeError: function(e, i) {
                switch (i.length) {
                    case 1:
                        return n(t.t("Function '__fn__' cannot be applied to __arg__.", {
                            fn: r.formatSymbol(e),
                            arg: i[0]
                        })).allowExport();
                    case 2:
                        return n(t.t("Function '__fn__' cannot be applied to __arg1__ and __arg2__.", {
                            fn: r.formatSymbol(e),
                            arg1: i[0],
                            arg2: i[1]
                        })).allowExport();
                    default:
                        return n(t.t("Function '__fn__' cannot be applied to these arguments.", {
                            fn: r.formatSymbol(e)
                        })).allowExport()
                }
            },
            illegalDotCall: function(e) {
                return n(t.t("Function '__symbol__' cannot be called with dot notation.", {
                    symbol: r.formatSymbol(e)
                }))
            },
            dotLHSTypeError: function(e, i) {
                return n(t.t("Cannot call '__symbol__' on __type__.", {
                    symbol: r.formatSymbol(e),
                    type: i
                }))
            },
            sumLowerBoundTypeError: function(e) {
                return n(t.t("Lower bound of a sum cannot be __symbol__.", {
                    symbol: e[0]
                })).allowExport()
            },
            sumUpperBoundTypeError: function(e) {
                return n(t.t("Upper bound of a sum cannot be __symbol__.", {
                    symbol: e[0]
                })).allowExport()
            },
            sumArgumentTypeError: function(e) {
                return n(t.t("Cannot take the sum of __symbol__.", {
                    symbol: e[0]
                })).allowExport()
            },
            productLowerBoundTypeError: function(e) {
                return n(t.t("Lower bound of a product cannot be __symbol__.", {
                    symbol: e[0]
                })).allowExport()
            },
            productUpperBoundTypeError: function(e) {
                return n(t.t("Upper bound of a product cannot be __symbol__.", {
                    symbol: e[0]
                })).allowExport()
            },
            productArgumentTypeError: function(e) {
                return n(t.t("Cannot take the product of __symbol__.", {
                    symbol: e[0]
                })).allowExport()
            },
            integralLowerBoundTypeError: function(e) {
                return n(t.t("Lower bound of an integral cannot be __symbol__.", {
                    symbol: e[0]
                })).allowExport()
            },
            integralUpperBoundTypeError: function(e) {
                return n(t.t("Upper bound of an integral cannot be __symbol__.", {
                    symbol: e[0]
                })).allowExport()
            },
            integralArgumentTypeError: function(e) {
                return n(t.t("Cannot take the integral of __symbol__.", {
                    symbol: e[0]
                })).allowExport()
            },
            derivativeTypeError: function(e) {
                return n(t.t("Cannot take the derivative of __symbol__.", {
                    symbol: e[0]
                })).allowExport()
            },
            derivativeVariableTypeError: function(e, i) {
                return n(t.t("Cannot take derivative with respect to '__symbol1__' because it is __symbol2__.", {
                    symbol1: r.formatSymbol(e),
                    symbol2: i[0]
                }))
            },
            piecewiseConditionTypeError: function(e) {
                return n(t.t("The condition in a piecewise expression must be __symbol1__ but was __symbol2__.", {
                    symbol1: i.prettyPrint(i.Bool),
                    symbol2: e[0]
                })).allowExport()
            },
            piecewiseBranchTypeError: function(e) {
                return n(t.t("Cannot use __symbol__ as a branch of a piecewise expression.", {
                    symbol: e[0]
                })).allowExport()
            },
            tableHeaderTypeError: function(e) {
                return n(t.t("Table header cannot be __symbol__.", {
                    symbol: e[0]
                }))
            },
            tableEntryTypeError: function(e) {
                return n(t.t("Table entry cannot be __symbol__.", {
                    symbol: e[0]
                }))
            },
            regressionTypeError: function(e) {
                return n(t.t("Cannot regress __symbol1__ against __symbol2__.", {
                    symbol1: e[0],
                    symbol2: e[1]
                }))
            },
            heterogeneousList: function() {
                return n(t.t("All elements of a list must have the same type.")).allowExport()
            },
            deeplyNested: function() {
                return n(t.t("Definitions are nested too deeply.")).allowExport()
            },
            polygonListTypeError: function(e) {
                return n(t.t("A single argument to polygon should be a point list, not __type__.", {
                    type: e[0]
                }))
            },
            polygonPointArgsError: function() {
                return n(t.t("Some of your arguments are not points."))
            },
            polygonTwoNumbersError: function() {
                return n(t.t("Cannot make a polygon from two numbers."))
            },
            binCenterInvalid: function() {
                return n(t.t("Invalid bin center. Try using any number."))
            },
            boxplotOffsetInvalid: function() {
                return n(t.t("Invalid offset. Try using any number."))
            },
            boxplotBreadthInvalid: function() {
                return n(t.t("Invalid height. Try using any number."))
            },
            tooManyArguments: function(e, r) {
                return n(t.t("'__symbol__' accepts at most __max__ arguments.", {
                    symbol: e,
                    max: r
                }))
            },
            pdfWrongArity: function() {
                var e = t.t("For example, try typing: D.pdf(x) where D=normaldist()."),
                    r = t.t("'pdf' should be called on a distribution with a number. __recommendation__", {
                        recommendation: e
                    });
                return n(r)
            },
            cdfRequiresArguments: function() {
                var e = t.t("For example, try typing: D.cdf(x) where D=normaldist()."),
                    r = t.t("'cdf' should be called on a distribution with at least one number. __recommendation__", {
                        recommendation: e
                    });
                return n(r)
            },
            cdfTooManyArguments: function() {
                var e = t.t("For example, try typing: D.cdf(-1,1) where D=normaldist()."),
                    r = t.t("'cdf' should be called on a distribution with at most two numbers. __recommendation__", {
                        recommendation: e
                    });
                return n(r)
            },
            tdistWrongArity: function() {
                return n(t.t("'tdist' requires 1 argument. For example, try typing: tdist(1)."))
            },
            randomArity: function() {
                var e = t.t("'random' should be called with no arguments, or an optional number of samples. For example, try random() or random(10).");
                return n(e)
            },
            randomFromBroadcastDistribution: function() {
                return n(t.t("Cannot sample from a list of distributions"))
            },
            wrongArity: function(e, i, o) {
                e = r.formatSymbol(e);
                var a, s;
                if (1 === i) s = t.t("For example, try typing: __dependency__(x).", {
                    dependency: e
                }), a = o > 1 ? t.t("Function '__dependency__' requires only 1 argument. __supplement__", {
                    dependency: e,
                    supplement: s
                }) : t.t("Function '__dependency__' requires an argument. __supplement__", {
                    dependency: e,
                    supplement: s
                });
                else {
                    for (var l = [], c = 0; c < i; c++) l[c] = c + 1;
                    var u = r.formatSymbol(e) + "(" + l.join(", ") + ")";
                    s = t.t("For example, try typing: __recommendation__.", {
                        recommendation: u
                    }), a = t.t("Function '__dependency__' requires __assignment_arity__ arguments. __supplement__", {
                        dependency: e,
                        assignment_arity: i,
                        supplement: s
                    })
                }
                return n(a)
            },
            wrongParametrizedReducerArity: function(e) {
                return n(t.t("Function '__symbol__' requires 2 arguments. For example, try typing: __recommendation__.", {
                    symbol: r.formatSymbol(e),
                    recommendation: r.formatSymbol(e) + "([1,2,3], 1)"
                }))
            },
            wrongDoubleReducerArity: function(e) {
                return n(t.t("Function '__symbol__' requires 2 arguments. For example, try typing: __recommendation__.", {
                    symbol: r.formatSymbol(e),
                    recommendation: r.formatSymbol(e) + "([1,2,3], [3,2,1])"
                }))
            },
            primedFunctionArity: function() {
                return n(t.t("Prime notation can only be used for functions of a single argument."))
            },
            zeroArgReducer: function(e) {
                return n(t.t("Function '__symbol__' requires at least one argument. For example, try typing: __symbol__(1, 2).", {
                    symbol: r.formatSymbol(e)
                }))
            },
            missingRHS: function(e) {
                return e = r.formatSymbol(e), n(t.t("What do you want '__symbol__' to equal?", {
                    symbol: e
                }))
            },
            malformedPoint: function() {
                return n(t.t("Points are written like this: (1, 2)."))
            },
            nonPairTuple: function() {
                return n(t.t("Points may only have 2 coordinates."))
            },
            badImplicitCall: function(e) {
                return e = r.formatSymbol(e), n(t.t("Use parentheses around the argument of '__symbol__'.", {
                    symbol: e
                }))
            },
            adjacentNumbers: function(e, r) {
                return n(t.t("Sorry, I don't know what to do with adjacent numbers '__left__' and '__right__'. Try using parentheses or a '*' symbol.", {
                    left: e,
                    right: r
                }))
            },
            identifierAsFunction: function(e) {
                return e = r.formatSymbol(e), n(t.t("'__symbol__' is a function. Try using parentheses.", {
                    symbol: e
                }))
            },
            binaryOperatorMissingOperand: function(e) {
                return e = r.formatSymbol(e), "%" === e && (e = "% of"), n(t.t("You need something on both sides of the '__symbol__' symbol.", {
                    symbol: e
                }))
            },
            unaryOperatorMissingLeft: function(e) {
                return e = r.formatSymbol(e), n(t.t("You need something before the '__symbol__' symbol.", {
                    symbol: e
                }))
            },
            unaryOperatorMissingRight: function(e) {
                return e = r.formatSymbol(e), n(t.t("You need something after the '__symbol__' symbol.", {
                    symbol: e
                }))
            },
            fractionMissingNumerator: function() {
                return n(t.t("You need a numerator for the top of your fraction."))
            },
            fractionMissingDenominator: function() {
                return n(t.t("You need a denominator for the bottom of your fraction."))
            },
            fractionEmpty: function() {
                return n(t.t("You need a numerator and denominator for your fraction."))
            },
            emptySubscript: function() {
                return n(t.t("Subscripts cannot be empty."))
            },
            emptySuperscript: function() {
                return n(t.t("Superscripts cannot be empty."))
            },
            invalidSubscript: function(e) {
                return e = r.formatSymbol(e), n(t.t("Subscripts may only contain letters and digits. '__symbol__' is not allowed.", {
                    symbol: e
                }))
            },
            invalidOperatorName: function() {
                return n(t.t("Operator names may only contain letters."))
            },
            unexpectedSubscript: function() {
                return n(t.t("Only functions and variables may have subscripts."))
            },
            superscriptWithPrime: function() {
                return n(t.t("Superscripts and primes cannot be combined."))
            },
            unexpectedPrime: function() {
                return n(t.t("Sorry, I don't understand this use of prime notation."))
            },
            primeWithoutParen: function() {
                return n(t.t("Primed function calls must use parentheses."))
            },
            emptyRadical: function() {
                return n(t.t("Radical cannot be empty."))
            },
            emptyRadicand: function() {
                return n(t.t("Radicand cannot be empty."))
            },
            emptyParen: function() {
                return n(t.t("Parentheses cannot be empty."))
            },
            emptySquareBracket: function() {
                return n(t.t("Square brackets cannot be empty."))
            },
            emptyPipe: function() {
                return n(t.t("Absolute value symbol cannot be empty."))
            },
            badTrigExponent: function(e) {
                var r = e + "^2",
                    i = e + "^-1";
                return n(t.t("Only __form1__ and __form2__ are supported. Otherwise, use parens.", {
                    form1: r,
                    form2: i
                }))
            },
            badLogExponent: function(e) {
                var r = e + "^2";
                return n(t.t("Only __form__ is supported. Otherwise, use parens.", {
                    form: r
                }))
            },
            inequalityChainTooLong: function() {
                return n(t.t("Cannot chain more than 2 inequalities."))
            },
            piecewiseMissingCondition: function() {
                return n(t.t("A piecewise expression must have at least one condition."))
            },
            piecewisePartMissingCondition: function() {
                return n(t.t("Every part of a piecewise expression must have a condition except the last."))
            },
            colonMissingCondition: function() {
                return n(t.t("The left side of a ':' must be a condition, like 'x>1'."))
            },
            blankExpression: function() {
                return n(t.t("You haven't written anything yet."))
            },
            functionNotDefined: function(e) {
                return e = r.formatSymbol(e), n(t.t("Function '__dependency__' is not defined.", {
                    dependency: e
                }))
            },
            parameterAlreadyDefined: function(e) {
                return e = r.formatSymbol(e), n(t.t("You can't use '__dependency__' as a parameter of this function because '__dependency__' is already defined.", {
                    dependency: e
                }))
            },
            cannotRedefine: function(e, i) {
                return e = r.formatSymbol(e), n(void 0 === i ? t.t("You can't redefine '__symbol__' because it's already defined.", {
                    symbol: e
                }) : t.t("You can't define '__symbol__' because '__symbolRoot__' is already defined.", {
                    symbol: e,
                    symbolRoot: i
                }))
            },
            cannotSubscript: function(e) {
                return e = r.formatSymbol(e), n(t.t("'__symbol__' cannot have a subscript.", {
                    symbol: e
                }))
            },
            multiplyDefined: function(e) {
                return e = r.formatSymbol(e), n(t.t("You've defined '__dependency__' in more than one place. Try deleting some of the definitions of '__dependency__'.", {
                    dependency: e
                }))
            },
            shadowedIndex: function(e) {
                return e = r.formatSymbol(e), n(t.t("You can't use '__symbol__' as an index because it's already defined.", {
                    symbol: e
                }))
            },
            cycle: function(e) {
                e = e.map(r.formatSymbol);
                var i = e.pop();
                return n(t.t("'__symbols__' and '__lastSymbol__' can't be defined in terms of each other.", {
                    symbols: e.join("', '"),
                    lastSymbol: i
                }))
            },
            selfReferentialFunction: function(e) {
                return n(t.t("The definition of function '__symbol__' cannot depend on '__symbol__'.", {
                    symbol: r.formatSymbol(e)
                }))
            },
            sliderLimitReferencesExport: function(e) {
                return n(t.t("Slider limits cannot depend on the slider variable '__symbol__'.", {
                    symbol: r.formatSymbol(e)
                }))
            },
            sliderMinInvalid: function() {
                return n(t.t("Invalid slider min. Try using any number."))
            },
            sliderMaxInvalid: function() {
                return n(t.t("Invalid slider max. Try using any number."))
            },
            sliderMaxLessThanMin: function() {
                return n(t.t("Invalid slider limits. Min should be less than max."))
            },
            sliderStepInvalid: function() {
                return n(t.t("Invalid slider step. Try using any number."))
            },
            domainMinInvalid: function() {
                return n(t.t("Invalid domain min. Try using any number."))
            },
            domainMaxInvalid: function() {
                return n(t.t("Invalid domain max. Try using any number."))
            },
            domainMaxLessThanMin: function() {
                return n(t.t("Invalid domain limits. Min should be less than max."))
            },
            cdfMinInvalid: function() {
                return n(t.t("Invalid cdf min. Try using any number."))
            },
            cdfMaxInvalid: function() {
                return n(t.t("Invalid cdf max. Try using any number."))
            },
            cdfMaxLessThanMin: function() {
                return n(t.t("Invalid cdf limits. Min should be less than max."))
            },
            tooManyVariables: function(e) {
                if (e = e.map(r.formatSymbol), 0 === e.length) return n(t.t("Too many variables, I don't know what to do with this."));
                var i = e.pop();
                return n(t.t("Too many variables. Try defining '__variables__'.", {
                    variables: (e.length ? e.join("', '") + "' or '" : "") + i
                }))
            },
            addArgumentsToDefinition: function(e, i, o) {
                e = e.map(r.formatSymbol), i = r.formatSymbol(i), o = o.map(r.formatSymbol);
                var a = i + "(" + o.join(",") + "," + e.join(",") + ")",
                    s = e.pop(),
                    l = {
                        symbols: e.join("', '"),
                        lastSymbol: s,
                        newSignature: a
                    };
                return n(e.length ? t.t("Try including '__symbols__' and '__lastSymbol__' as arguments by defining the function as '__newSignature__'.", l) : t.t("Try including '__lastSymbol__' as an argument by defining the function as '__newSignature__'.", l))
            },
            invalidLHS: function(e) {
                return e = r.formatSymbol(e), n(t.t("Sorry, you can't graph __symbol__ as a function of anything yet.", {
                    symbol: e
                }))
            },
            unplottablePolarFunction: function() {
                return n(t.t("We can't plot θ as a function of r. Try plotting r(θ) instead."))
            },
            invalidInequalityVariables: function() {
                return n(t.t("We only plot inequalities of x and y, or r and θ."))
            },
            invalidImplicitVariables: function() {
                return n(t.t("We only support implicit equations of x and y."))
            },
            singleVariableImplicitEquationsDisabled: function() {
                return n(t.t("Plotting single-variable implicit equations is disabled."))
            },
            complicatedImplicitInequality: function() {
                return n(t.t("We can only plot inequalities when one variable is quadratic or linear."))
            },
            complicatedPolarImplicit: function() {
                return n(t.t("Polar equations must be linear in r."))
            },
            invalidDoubleInequalityVariables: function() {
                return n(t.t("We only plot double inequalities of x and y."))
            },
            mismatchedDoubleInequality: function() {
                return n(t.t("Double inequalities must both go the same way, e.g. 1 < y < 2."))
            },
            complicatedDoubleInequality: function() {
                return n(t.t("We only support solved double inequalities. Try deleting one side of the inequality."))
            },
            equationRequired: function(e) {
                return e ? (e = r.formatSymbol(e), n(t.t("Try adding '__lhs__' to the beginning of this equation.", {
                    lhs: e + "="
                }))) : n(t.t("Try adding an equals sign to turn this into an equation."))
            },
            variableAsFunction: function(e) {
                return e = r.formatSymbol(e), n(t.t("Variable '__dependency__' can't be used as a function.", {
                    dependency: e
                }))
            },
            distributionAsFunction: function(e) {
                return e = r.formatSymbol(e), n(t.t("Cannot call distribution '__symbol__' as a function. Try '__symbol__.pdf(x)'.", {
                    symbol: e
                }))
            },
            emptyList: function() {
                return n(t.t("Empty lists are not allowed."))
            },
            invalidTableHeader: function(e) {
                return n(t.t("Table headers must be simple expressions. __supplement__", {
                    supplement: e
                }))
            },
            invalidTableEntry: function(e) {
                return n(t.t("Table entries must be simple expressions. __supplement__", {
                    supplement: e
                }))
            },
            invalidFirstTableColumn: function() {
                return n(t.t("First column may not be __most__ or __last__.", {
                    most: "'y', 'r',",
                    last: "'θ'"
                }))
            },
            invalidDependentFirstTableColumn: function() {
                return n(t.t("This column header can't be defined elsewhere in the calculator."))
            },
            invalidRegressionParameter: function(e) {
                return n(t.t("'__symbol__' may not be used as a regression parameter.", {
                    symbol: r.formatSymbol(e)
                }))
            },
            optimizationError: function() {
                return n(t.t("We couldn't find any region where this model is defined."))
            },
            badListInReducer: function(e) {
                return n(t.t("When __symbol__ is called with more than two arguments, no argument can be a list.", {
                    symbol: r.formatSymbol(e)
                })).allowExport()
            },
            nonListDoubleReducer: function(e) {
                return n(t.t("Both arguments of '__symbol__' must be lists. For example, try typing: __recommendation__.", {
                    symbol: r.formatSymbol(e),
                    recommendation: r.formatSymbol(e) + "([1,2,3], [3,2,1])"
                })).allowExport()
            },
            nonListParametrizedReducer: function(e) {
                return n(t.t("The first argument of '__symbol__' must be a list. For example, try typing: __recommendation__.", {
                    symbol: r.formatSymbol(e),
                    recommendation: r.formatSymbol(e) + "([1,2,3], 1)"
                })).allowExport()
            },
            methodRequiresList: function(e) {
                return n(t.t("'__symbol__' requires a list. For example, try typing: __recommendation__.", {
                    symbol: r.formatSymbol(e),
                    recommendation: r.formatSymbol(e) + "([1,2,3])"
                })).allowExport()
            },
            variableRange: function(e) {
                return n(t.t("Range cannot depend on free variable '__symbol__'.", {
                    symbol: r.formatSymbol(e[0])
                })).setDependencies(e).allowExport()
            },
            nonArithmeticRange: function(e) {
                return n(t.t("Ranges must be arithmetic sequences.")).allowExport()
            },
            sumMissingBound: function() {
                return n(t.t("Sums must have upper and lower bounds."))
            },
            productMissingBound: function() {
                return n(t.t("Products must have upper and lower bounds."))
            },
            incorrectSumLowerBound: function() {
                return n(t.t("Lower bound of a sum must set a variable equal to a number. Try n=1."))
            },
            incorrectProductLowerBound: function() {
                return n(t.t("Lower bound of a product must set a variable equal to a number. Try n=1."))
            },
            integralMissingBound: function() {
                return n(t.t("Integrals must have upper and lower bounds."))
            },
            integralMissingDifferential: function() {
                return n(t.t("Integrand must end with an integration variable, like dx."))
            },
            differentialWithSuperscript: function() {
                return n(t.t("Integration variable cannot have a superscript."))
            },
            sumMissingBody: function() {
                return n(t.t("What do you want to take the sum of?"))
            },
            productMissingBody: function() {
                return n(t.t("What do you want to take the product of?"))
            },
            integralMissingBody: function() {
                return n(t.t("What do you want to take the integral of?"))
            },
            derivativeMissingBody: function() {
                return n(t.t("What do you want to take the derivative of?"))
            },
            mismatchedBraces: function(e, i) {
                return e = r.formatSymbol(e), i = r.formatSymbol(i), n(t.t("Expected '__symbol1__' to match '__symbol2__'.", {
                    symbol1: e,
                    symbol2: i
                }))
            },
            shadowedIntegrationVariable: function(e) {
                return n(t.t("You can't use '__symbol__' as an integration variable because it's already defined.", {
                    symbol: r.formatSymbol(e)
                }))
            },
            badIntegralBoundDependency: function(e) {
                return n(t.t("Integration bounds can't depend on integration variable '__symbol__'.", {
                    symbol: r.formatSymbol(e)
                }))
            },
            percentMissingOf: function() {
                return n(t.t("'%' must be used with 'of'. Try '25% of 12'."))
            },
            illegalBinWidth: function(e) {
                return e = r.formatSymbol(e), n(t.t("The second argument to '__symbol__' must be a positive number.", {
                    symbol: e
                }))
            },
            ttestListTooShort: function(e) {
                return e = r.formatSymbol(e), n(t.t("Lists for '__symbol__' must have at least 2 elements.", {
                    symbol: e
                }))
            },
            badSampleSize: function() {
                return n(t.t("Sample size must be at least 1."))
            },
            variableSampleSize: function(e) {
                return n(t.t("Sample size cannot depend on free variable '__symbol__'.", {
                    symbol: r.formatSymbol(e[0])
                })).setDependencies(e).allowExport()
            },
            variableSeed: function(e) {
                return n(t.t("Random seed cannot depend on free variable '__symbol__'.", {
                    symbol: r.formatSymbol(e[0])
                })).setDependencies(e).allowExport()
            },
            badAnsContext: function() {
                return n(t.t("You can't use 'ans' in this context."))
            },
            ansUndefined: function() {
                return n(t.t("The previous expression didn't define any value for ans."))
            },
            variablesUnsupported: function(e) {
                return n(t.t("This calculator does not support variables like '__variable__'.", {
                    variable: r.formatSymbol(e)
                }))
            },
            functionUnsupported: function(e) {
                return n(t.t("This calculator does not support the '__symbol__' function.", {
                    symbol: r.formatSymbol(e)
                }))
            },
            logbaseUnsupported: function() {
                return n(t.t("This calculator does not support specifying the base of a logarithm. Try 'log' or 'ln'."))
            },
            constantUnsupported: function(e) {
                return n(t.t("This calculator does not support the constant '__symbol__'.", {
                    symbol: r.formatSymbol(e)
                }))
            },
            assignmentsUnsupported: function() {
                return n(t.t("This calculator does not support defining variables."))
            },
            functionDefinitionsUnsupported: function() {
                return n(t.t("This calculator does not support function definitions."))
            },
            equationsUnsupported: function() {
                return n(t.t("This calculator does not support this type of equation."))
            },
            inequalitiesUnsupported: function() {
                return n(t.t("This calculator does not support inequalities."))
            },
            regressionsUnsupported: function() {
                return n(t.t("This calculator does not support regressions."))
            },
            pointsUnsupported: function() {
                return n(t.t("This calculator does not support points."))
            },
            featureUnavailable: function() {
                return n(t.t("This feature is not available in the current calculator."))
            },
            nonSquareDeterminant: function() {
                return n(t.t("Only square matrices have a determinant."))
            },
            nonSquareInverse: function() {
                return n(t.t("Only square matrices have an inverse."))
            },
            singularInverse: function() {
                return n(t.t("Singular matrices do not have an inverse."))
            },
            matrixAssignment: function() {
                return n(t.t("This calculator does not support this type of variable definition. Try using 'New Matrix'."))
            },
            matrixAddDimensions: function() {
                return n(t.t("Cannot add matrices with different dimensions."))
            },
            matrixSubtractDimensions: function() {
                return n(t.t("Cannot subtract matrices with different dimensions."))
            },
            matrixMultiplyDimensions: function() {
                return n(t.t("Cannot multiply matrices with incompatible dimensions."))
            },
            matrixFractionalPower: function() {
                return n(t.t("A matrix can only be raised to integer powers."))
            },
            matrixPowerDimensions: function() {
                return n(t.t("Only square matrices can be raised to a power."))
            },
            matrixElementTypeError: function(e) {
                return n(t.t("Cannot use __arg__ as an element of a matrix.", {
                    arg: e[0]
                }))
            },
            matrixInvalidVariable: function(e) {
                return n(t.t("Cannot use '__symbol__' as a variable.", {
                    symbol: r.formatSymbol(e)
                }))
            }
        }
    }), define("math/parsenode/expression", ["require", "pjs", "./base", "math/errormsg", "math/types"], function(e) {
        var t = e("pjs"),
            n = e("./base"),
            r = e("math/errormsg"),
            i = e("math/types");
        return t(n, function(e, t) {
            e.init = function(e) {
                if (!Array.isArray(e)) throw new TypeError("Argument to expression constructor must be an Array.");
                t.init.call(this), this.args = e, this.valueType = this._getValueType(e), this.registerDependencies(), this.computeTreeSize()
            }, e._getValueType = function(e) {
                return i.Any
            }, e.shouldExportAns = function() {
                return !0
            }, e.registerDependencies = function() {
                for (var e = 0; e < this.args.length; e++) this.mergeDependencies(this.args[e])
            }, e.computeTreeSize = function() {
                for (var e = 0, t = 0; t < this.args.length; t++) this.args[t].treeSize && (e += this.args[t].treeSize);
                if (this.treeSize = e + 1, e > 1e4) throw r.deeplyNested()
            }, e.copyWithArgs = function(e) {
                return new this.constructor(e)
            }
        })
    }), define("math/parsenode/scalarexpression", ["require", "pjs", "./expression"], function(e) {
        return e("pjs")(e("./expression"), function(e, t) {
            e.init = function(e) {
                t.init.call(this, e)
            }, e.getEvalStrings = function() {
                for (var e = [], t = [], n = 0; n < this.args.length; n++) {
                    var r = this.args[n].getEvalStrings();
                    e = e.concat(r.statements), t.push(r.expression)
                }
                return {
                    statements: e,
                    expression: this.scalarEvalExpression(t)
                }
            }
        })
    }), define("math/parsenode/expressionTypes", ["require", "pjs", "./scalarexpression"], function(e) {
        var t = e("pjs"),
            n = e("./scalarexpression"),
            r = {
                Add: t(n, {}),
                Subtract: t(n, {}),
                Multiply: t(n, {}),
                Divide: t(n, {}),
                Exponent: t(n, {}),
                Negative: t(n, {}),
                And: t(n, {
                    isInequality: function() {
                        return this.args[0].isInequality() && this.args[1].isInequality()
                    }
                }),
                PercentOf: t(n, {})
            };
        return r.RawExponent = t(r.Exponent, {}), r
    }), define("math/maybe-rational", ["require", "exports", "math/builtin"], function(e, t, n) {
        "use strict";

        function r(e, t) {
            return {
                n: e,
                d: t
            }
        }

        function i(e) {
            return "object" == typeof e && "number" == typeof e.n && "number" == typeof e.d
        }

        function o(e) {
            var t = e.match(/^(-)?(\d*)?(?:\.(\d*))?$/);
            if (!t) return NaN;
            var n = t[1],
                r = t[2],
                i = t[3];
            if (!r && !i) return NaN;
            var o = !!n;
            if (i) {
                var a = i.replace(/0+$/, ""),
                    l = a.length,
                    c = Math.pow(10, l),
                    u = parseInt(r || "0", 10) * c + parseInt(a || "0", 10);
                return u > w || c > w ? parseFloat(e) : s(o ? -u : u, c)
            }
            var u = parseInt(r, 10);
            return u > w ? parseFloat(e) : s(o ? -u : u, 1)
        }

        function a(e) {
            return i(e) ? e.n / e.d : e
        }

        function s(e, t) {
            if (!isFinite(e) || !isFinite(t) || 0 === t || Math.floor(e) !== e || Math.floor(t) !== t || Math.abs(e) > w || Math.abs(t) > w) return e / t;
            t < 0 && (e = -e, t = -t);
            var i = n.gcd(e, t);
            return r(e / i, t / i)
        }

        function l(e) {
            return i(e) ? r(-e.n, e.d) : -e
        }

        function c(e) {
            return i(e) ? r(Math.abs(e.n), Math.abs(e.d)) : Math.abs(e)
        }

        function u(e) {
            return i(e) ? 0 === e.n ? e.d / e.n : r(e.n < 0 ? -e.d : e.d, Math.abs(e.n)) : 1 / e
        }

        function p(e, t) {
            if (!i(e) || !i(t)) return a(e) + a(t);
            var r = n.gcd(e.d, t.d);
            return s(e.n * (t.d / r) + t.n * (e.d / r), e.d / r * t.d)
        }

        function d(e, t) {
            if (!i(e) || !i(t)) return a(e) * a(t);
            var r = n.gcd(e.n, t.d),
                o = n.gcd(t.n, e.d);
            return s(e.n / r * (t.n / o), e.d / o * (t.d / r))
        }

        function h(e, t) {
            return p(e, l(t))
        }

        function f(e, t) {
            return i(e) && i(t) ? d(e, u(t)) : a(e) / a(t)
        }

        function m(e, t) {
            var r = e,
                o = t;
            if (t.n < 0 && (o = l(t), r = u(e)), !i(r) || !i(o)) return n.pow(a(e), a(t));
            if (e = r, t = o, 1 === t.d) return s(Math.pow(e.n, t.n), Math.pow(e.d, t.n));
            var c = e.n < 0;
            if (c && t.d % 2 != 1) return NaN;
            var p = c ? -1 : 1,
                d = p * Math.round(Math.pow(Math.abs(e.n), 1 / t.d)),
                h = Math.round(Math.pow(Math.abs(e.d), 1 / t.d));
            return Math.pow(d, t.d) !== e.n || Math.pow(h, t.d) !== e.d ? n.pow(a(e), a(t)) : s(Math.pow(d, t.n), Math.pow(h, t.n))
        }

        function g(e, t) {
            if (!i(e) || !i(t)) return n.pow(a(e), a(t));
            var r = m(e, t);
            return i(r) ? r : n.pow(a(e), a(t))
        }

        function y(e) {
            if (!i(e)) return Math.sqrt(e);
            var t = Math.round(Math.sqrt(e.n)),
                n = Math.round(Math.sqrt(e.d));
            return t * t !== e.n || n * n !== e.d ? Math.sqrt(a(e)) : s(t, n)
        }

        function v(e, t) {
            return g(e, u(t))
        }

        function b(e, t) {
            if (!i(e) || !i(t)) {
                var n = a(e),
                    o = a(t);
                return n - o * Math.floor(n / o)
            }
            return h(e, d(t, r(Math.floor(a(f(e, t))), 1)))
        }

        function x(e) {
            for (var t = r(0, 1), n = 0, i = e; n < i.length; n++) {
                t = p(t, i[n])
            }
            return t
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.isRational = i;
        var w = Math.pow(2, 53) - 1;
        t.fromDecimalString = o, t.asFloat = a, t.maybeRational = s, t.neg = l, t.abs = c, t.reciprocal = u, t.add = p, t.mul = d, t.sub = h, t.div = f, t.pow = g, t.sqrt = y, t.nthroot = v, t.mod = b, t.total = x
    }), define("math/parsenode/constant", ["require", "pjs", "./scalarexpression", "math/maybe-rational", "math/types"], function(e) {
        var t = e("pjs"),
            n = e("./scalarexpression"),
            r = e("math/maybe-rational"),
            i = e("math/types");
        return t(n, function(e, t) {
            e.init = function(e) {
                "number" == typeof e && (e = r.maybeRational(e, 1)), this._constantValue = e, t.init.call(this, [])
            }, e.isConstant = !0, e.getEvalStrings = function() {
                return {
                    statements: [],
                    expression: this.scalarExprString()
                }
            }, e.asValue = function() {
                return "boolean" == typeof this._constantValue ? this._constantValue : r.asFloat(this._constantValue)
            }, e.asMaybeRationalValue = function() {
                return "boolean" == typeof this._constantValue ? NaN : this._constantValue
            }, e.scalarExprString = function() {
                return this.asValue() > 0 ? String(this.asValue()) : "(" + String(this.asValue()) + ")"
            }, e.getEvaluationInfo = function() {
                return [{
                    val: this.asValue()
                }]
            }, e.isNaN = function() {
                return "number" == typeof this.asValue() && isNaN(this.asValue())
            }, e._getValueType = function() {
                switch (typeof this.asValue()) {
                    case "number":
                        return i.Number;
                    case "boolean":
                        return i.Bool;
                    default:
                        throw new Error("Constant node expects value of type number or boolean, but saw " + typeof value)
                }
            }
        })
    }), define("math/parsenode/mixednumber", ["require", "pjs", "./constant"], function(e) {
        return e("pjs")(e("./constant"), function(e, t) {
            e.init = function(e) {
                t.init.call(this, e)
            }, e.is_mixed_number = !0
        })
    }), define("math/parsenode/identifier", ["require", "pjs", "./expression", "graphing/label", "math/parser/input-span"], function(e) {
        var t = e("pjs"),
            n = e("./expression"),
            r = e("graphing/label"),
            i = e("math/parser/input-span");
        return t(n, function(e, t, n) {
            e.init = function(e) {
                t.init.call(this, []), this._symbol = r.latexToIdentifier(e), this.setInputSpan(new i.Span(e, 0, e.length)), this.addDependency(this._symbol)
            }, e.evaluate = function() {
                throw "Cannot evaluate undefined variable " + this._symbol
            }
        })
    }), define("math/parsenode/ans", ["require", "pjs", "./identifier"], function(e) {
        return e("pjs")(e("./identifier"), function(e, t, n) {})
    }), define("math/parsenode/freevariable", ["require", "pjs", "./scalarexpression"], function(e) {
        return e("pjs")(e("./scalarexpression"), function(e, t) {
            e.init = function(e) {
                t.init.call(this, []), this.addDependency(e), this._symbol = e
            }, e.isFreeVariable = !0, e.scalarEvalExpression = function(e) {
                return this._symbol
            }, e.copyWithArgs = function(e) {
                return this
            }
        })
    }), define("math/parsenode/dummyindex", ["require", "pjs", "./freevariable"], function(e) {
        return e("pjs")(e("./freevariable"), function() {})
    }), define("math/parsenode/list", ["require", "pjs", "./expression", "math/errormsg", "math/types"], function(e) {
        var t = e("pjs"),
            n = e("./expression"),
            r = e("math/errormsg"),
            i = e("math/types");
        return t(n, function(e, t, n) {
            function o(e) {
                for (var t = 1 / 0, n = 0; n < e.length; n++)(e[n].isList || e[n].isBroadcast) && (t = Math.min(t, e[n].length));
                return t
            }
            e.init = function(e) {
                if (t.init.call(this, e), this.length = e.length, 0 === this.length) throw r.emptyList()
            }, e.isList = !0, e.getEvalStrings = function() {
                for (var e = [], t = [], n = 0; n < this.args.length; n++) {
                    var r = this.args[n].getEvalStrings();
                    Array.prototype.push.apply(e, r.statements), t.push(r.expression)
                }
                return {
                    statements: e,
                    expression: "[" + t.join(",") + "]"
                }
            }, e.asValue = function() {
                for (var e = [], t = 0; t < this.args.length; t++) e.push(this.args[t].asValue());
                return e
            }, e.asMaybeRationalValue = function() {
                for (var e = [], t = 0; t < this.args.length; t++) e.push(this.args[t].asMaybeRationalValue());
                return e
            }, e.getEvaluationInfo = function() {
                if (this.args.every(function(e) {
                        return e.isConstant
                    })) return [{
                    val: this.args.map(function(e) {
                        return e.asValue()
                    })
                }]
            }, n.eachArgs = function(e, t) {
                var n = o(e);
                if (!isFinite(n)) return void t(e);
                for (var r = 0; r < n; r++) {
                    for (var a = [], s = 0; s < e.length; s++) a.push(e[s].isList || i.isList(e[s].valueType) ? e[s].elementAt(r) : e[s]);
                    t(a)
                }
            }, n.mapArgs = function(e, t) {
                var r = [];
                return n.eachArgs(e, function(e) {
                    r.push(t(e))
                }), r
            }, n.wrap = function(e) {
                return e.isList || i.isList(e.valueType) ? e : n([e])
            }
        })
    }), define("math/parsenode/range", ["require", "pjs", "./expression"], function(e) {
        return e("pjs")(e("./expression"), function(e, t, n) {
            e.init = function(e) {
                t.init.call(this, e), this.beginning = e[0], this.end = e[1]
            }
        })
    }), define("math/parsenode/broadcast", ["require", "pjs", "./expression"], function(e) {
        return e("pjs")(e("./expression"), function(e, t, n) {
            e.init = function(e, n) {
                if (t.init.call(this, n), this._replacedSymbols = e, this._expression = n[0], this._lists = n.slice(1), !e.length) throw new Error("Cannot construct a broadcast node with no replaced symbols");
                for (var r = 0; r < e.length; r++) this.removeDependency(e[r]);
                for (var i = 1 / 0, o = 0; o < this._lists.length; o++) {
                    if (!this._lists[o].isList) throw new Error("List arguments of broadcast must be list literals");
                    i = Math.min(i, this._lists[o].length)
                }
                this.length = i
            }, e.isBroadcast = !0, e.copyWithArgs = function(e) {
                return new this.constructor(this._replacedSymbols, e)
            }, e.evaluate = function(e) {
                for (var t = this._expression.getCompiledFunction(this._replacedSymbols).fn, n = [], r = 0; r < this.length; r++) {
                    for (var i = [], o = 0; o < e.length; o++) i.push(e[o][r]);
                    n.push(t.apply(void 0, i))
                }
                return n
            }, e.getEvalStrings = function() {
                var e = [],
                    t = this._expression.getEvalStrings();
                Array.prototype.push.apply(e, t.statements);
                var n, r = [],
                    i = [];
                for (n = 0; n < this._lists.length; n++) {
                    var o = this._lists[n].getEvalStrings();
                    Array.prototype.push.apply(e, o.statements);
                    var a = this.tmpVar();
                    i.push(a), r.push("var " + a + " = " + o.expression)
                }
                var s = this.tmpVar(),
                    l = this.tmpVar();
                r.push("var " + s + " = []");
                var c = [];
                for (n = 0; n < i.length; n++) c.push("var " + this._replacedSymbols[n] + " = " + i[n] + "[" + l + "]");
                return r.push("for (var " + l + " = 0; " + l + " < " + this.length + "; " + l + "++) {\n  " + c.join(";\n  ") + ";\n  " + s + ".push(" + t.expression + ");\n}"), {
                    statements: e.concat(r),
                    expression: s
                }
            }
        })
    }), define("math/parsenode/listaccess", ["require", "pjs", "./expression"], function(e) {
        return e("pjs")(e("./expression"), function(e, t) {
            e.init = function(e) {
                t.init.call(this, e), this.list = e[0], this.index = e[1]
            }, e.getEvalStrings = function() {
                var e = this.index.getEvalStrings(),
                    t = this.list.getEvalStrings(),
                    n = e.statements.concat(t.statements),
                    r = this.tmpVar();
                n.push(r + " = " + t.expression);
                var i = this.tmpVar();
                return n.push(i + " = Math.floor(" + e.expression + ") - 1"), {
                    statements: n,
                    expression: "(" + i + " >= 0 && " + i + " < " + r + ".length ? " + r + "[" + i + "] : NaN)"
                }
            }
        })
    }), define("math/parsenode/dotaccess", ["require", "pjs", "./expression"], function(e) {
        return e("pjs")(e("./expression"), {})
    }), define("math/parsenode/dotaccessexponent", ["require", "pjs", "./expression"], function(e) {
        return e("pjs")(e("./expression"), {})
    }), define("math/parsenode/orderedpair", ["require", "pjs", "./scalarexpression"], function(e) {
        return e("pjs")(e("./scalarexpression"), function(e, t, n) {
            e.asArray = function() {
                return [+this.args[0].asValue(), +this.args[1].asValue()]
            }, e.asValue = e.asArray, e.getSliderVariables = function(e, t) {
                return e.sliderVariables(t.getDependencies()).filter(function(t) {
                    return !e.validParametricVariable(t)
                })
            }, e.getEvalStrings = function() {
                for (var e = [], t = [], n = 0; n < this.args.length; n++) {
                    var r = this.args[n].getEvalStrings();
                    e = e.concat(r.statements), t.push(r.expression)
                }
                return {
                    statements: e,
                    expression: "[" + t.join(",") + "]"
                }
            }
        })
    }), define("math/parsenode/movablepoint", ["require", "pjs", "./orderedpair"], function(e) {
        return e("pjs")(e("./orderedpair"), function(e, t) {
            e.init = function(e, n, r) {
                t.init.call(this, e), this.moveStrategy = n, this.defaultDragMode = r
            }, e.isMovablePoint = !0
        })
    }), define("math/parsenode/orderedpairaccess", ["require", "pjs", "./scalarexpression"], function(e) {
        return e("pjs")(e("./scalarexpression"), function(e, t) {
            e.init = function(e) {
                t.init.call(this, e), this.point = e[0], this.index = e[1]
            }, e.getEvalStrings = function() {
                var e = this.index.getEvalStrings(),
                    t = this.point.getEvalStrings(),
                    n = [];
                return Array.prototype.push.apply(n, e.statements), Array.prototype.push.apply(n, t.statements), {
                    statements: n,
                    expression: t.expression + "[" + e.expression + "-1]"
                }
            }
        })
    }), define("math/parsenode/polygon", ["require", "pjs", "./expression"], function(e) {
        return e("pjs")(e("./expression"), function(e, t) {
            e.init = function(e) {
                t.init.call(this, e), this._symbol = "polygon"
            }
        })
    }), define("math/comparators", ["require", "exports"], function(e, t) {
        "use strict";

        function n(e, t) {
            switch (t) {
                case -1:
                    return e ? "<=" : "<";
                case 0:
                    return e ? "=" : "!=";
                case 1:
                    return e ? ">=" : ">";
                default:
                    throw "Programming error.  Comparators must have a direction of -1, 0, or 1"
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.table = {
            "<": {
                inclusive: !1,
                direction: -1
            },
            "!=": {
                inclusive: !1,
                direction: 0
            },
            ">": {
                inclusive: !1,
                direction: 1
            },
            "<=": {
                inclusive: !0,
                direction: -1
            },
            "=": {
                inclusive: !0,
                direction: 0
            },
            ">=": {
                inclusive: !0,
                direction: 1
            }
        }, t.get = n
    }), define("math/parsenode/basecomparator", ["require", "pjs", "./scalarexpression", "./expressionTypes", "math/comparators", "math/functions"], function(e) {
        var t = e("pjs"),
            n = e("./scalarexpression"),
            r = e("./expressionTypes").Subtract,
            i = e("math/comparators").table,
            o = e("math/functions");
        return t(n, function(e, n, a) {
            a.create = function(e, n) {
                return n = n || e, t(a, function(t, r) {
                    t.operator = e, t.isInequality = function() {
                        return 0 !== i[e].direction
                    }, t.compiledOperator = n, t.scalarEvalExpression = function(e) {
                        return e.join(n)
                    }, t.evaluate = o.createEvaluateFunction(t.scalarEvalExpression, 2)
                })
            }, e.init = function(e) {
                n.init.call(this, e), this._difference = r(-1 === i[this.operator].direction ? [e[1], e[0]] : [e[0], e[1]])
            }
        })
    }), define("math/parsenode/comparator", ["require", "math/parsenode/basecomparator"], function(e) {
        var t = e("math/parsenode/basecomparator");
        return {
            "<": t.create("<"),
            ">": t.create(">"),
            "<=": t.create("<="),
            ">=": t.create(">="),
            "=": t.create("=", "===")
        }
    }), define("math/parsenode/doubleinequality", ["require", "pjs", "./base", "math/comparators", "./comparator"], function(e) {
        var t = e("pjs"),
            n = e("./base"),
            r = e("math/comparators"),
            i = e("./comparator");
        return t(n, function(e, t) {
            e.init = function(e) {
                t.init.call(this), this.args = e, this._symbol = e[2]._symbol, this._operators = [e[1], e[3]], this._expressions = [e[0], e[4]];
                var n = r.get(r.table[e[1]].inclusive && r.table[e[3]].inclusive, r.table[e[1]].direction);
                this._indicator = i[n]([e[0], e[4]]), this.addDependency(this._symbol), this.mergeDependencies(this._expressions[0], this._expressions[1])
            }, e.isInequality = function() {
                return !0
            }, e.isShadeBetween = function() {
                return !0
            }
        })
    }), define("math/parsenode/repeatedoperator", ["require", "pjs", "./scalarexpression", "./dummyindex"], function(e) {
        var t = e("pjs"),
            n = e("./scalarexpression"),
            r = e("./dummyindex");
        return t(n, function(e, t) {
            e.init = function(e) {
                t.init.call(this, e), this._index = e[0], this.addDummyDependency(this._index._symbol), this._index instanceof r && this.removeDependency(this._index._symbol)
            }, e.getEvalStrings = function() {
                var e = [],
                    t = this.tmpVar(),
                    n = this._index._symbol,
                    r = this.tmpVar(),
                    i = this.tmpVar(),
                    o = this.args[1].getEvalStrings(),
                    a = this.args[2].getEvalStrings(),
                    s = this.args[3].getEvalStrings();
                Array.prototype.push.apply(e, o.statements), e.push("var " + r + " = Math.round(" + o.expression + ")"), Array.prototype.push.apply(e, a.statements), e.push("var " + i + " = Math.round(" + a.expression + ")"), e.push("var " + t + "=" + this.starting_value);
                var l = "for (var " + n + "=" + r + ";" + n + "<=" + i + ";" + n + "++) {" + s.statements.join(";") + ";" + t + this.in_place_operator + s.expression + "};",
                    c = "if(!isFinite(" + i + "-" + r + ")) {" + t + "=(" + i + "<" + r + "?" + this.starting_value + ":NaN);}else{" + l + "}";
                return e.push(c), {
                    statements: e,
                    expression: t
                }
            }, e.evaluate = function(e, t, n) {
                var r = n.getCompiledFunction([this._index._symbol]).fn;
                if (t = Math.round(t), e = Math.round(e), !isFinite(t - e)) return t < e ? this.starting_value : NaN;
                for (var i = this.starting_value, o = e; o <= t; o++) i = this.update(i, r(o));
                return i
            }
        })
    }), define("math/parsenode/sum", ["require", "pjs", "./repeatedoperator"], function(e) {
        return e("pjs")(e("./repeatedoperator"), function(e, t) {
            e.in_place_operator = "+=", e.starting_value = 0, e.evaluateConstant = function(e) {
                var t = 1 + Math.round(e[1]) - Math.round(e[0]);
                return t <= 0 ? this.starting_value : t * e[2]
            }, e.update = function(e, t) {
                return e + t
            }
        })
    }), define("math/parsenode/product", ["require", "pjs", "./repeatedoperator"], function(e) {
        return e("pjs")(e("./repeatedoperator"), function(e, t) {
            e.in_place_operator = "*=", e.starting_value = 1, e.evaluateConstant = function(e) {
                var t = 1 + Math.round(e[1]) - Math.round(e[0]);
                return t <= 0 ? this.starting_value : Math.pow(e[2], t)
            }, e.update = function(e, t) {
                return e * t
            }
        })
    }), define("math/parsenode/integral", ["require", "pjs", "./scalarexpression", "./dummyindex", "math/builtin"], function(e) {
        var t = e("pjs"),
            n = e("./scalarexpression"),
            r = e("./dummyindex"),
            i = e("math/builtin");
        return t(n, function(e, t) {
            e.init = function(e) {
                t.init.call(this, e), this._differential = e[0], this.addDummyDependency(this._differential._symbol), this._differential instanceof r && this.removeDependency(this._differential._symbol)
            }, e.getEvalStrings = function() {
                var e = this.args[0],
                    t = this.args[1],
                    n = this.args[2],
                    r = this.args[3],
                    i = [],
                    o = this.tmpVar(),
                    a = e._symbol,
                    s = this.tmpVar(),
                    l = this.tmpVar(),
                    c = t.getEvalStrings(),
                    u = n.getEvalStrings(),
                    p = r.getEvalStrings();
                return Array.prototype.push.apply(i, c.statements), Array.prototype.push.apply(i, u.statements), i.push("var " + s + " = " + c.expression), i.push("var " + l + " = " + u.expression), i.push("var " + o + " = function (" + a + ") { " + p.statements.join("; ") + "; return " + p.expression + ";}"), {
                    statements: i,
                    expression: "BuiltIn.quad(" + [o, s, l].join(", ") + ")"
                }
            }, e.evaluate = function(e, t, n) {
                var r = this.args[0],
                    o = n.getCompiledFunction([r._symbol]).fn;
                return i.quad(o, e, t)
            }
        })
    }), define("math/parsenode/functioncall", ["require", "pjs", "./expression", "./identifier"], function(e) {
        var t = e("pjs"),
            n = e("./expression"),
            r = e("./identifier");
        return t(n, function(e, t) {
            e.init = function(e, n) {
                "string" == typeof e && (e = r(e)), this._identifier = e, this._symbol = e._symbol, t.init.call(this, n), this.addDependency(this._symbol)
            }, e.copyWithArgs = function(e) {
                return new this.constructor(r(this._symbol), e)
            }
        })
    }), define("math/parsenode/seededfunctioncall", ["require", "pjs", "./functioncall"], function(e) {
        return e("pjs")(e("./functioncall"), function(e, t) {
            e.init = function(e, n) {
                t.init.call(this, e, n), this.seed = n[0]
            }
        })
    }), define("math/parsenode/functionexponent", ["require", "pjs", "./expression"], function(e) {
        return e("pjs")(e("./expression"), function(e, t) {})
    }), define("math/parsenode/functionfactorial", ["require", "pjs", "./expression"], function(e) {
        return e("pjs")(e("./expression"), function(e, t) {})
    }), define("math/parsenode/prime", ["require", "pjs", "./expression"], function(e) {
        return e("pjs")(e("./expression"), function(e, t) {
            e.init = function(e, n) {
                t.init.call(this, n), this.order = e
            }, e.copyWithArgs = function(e) {
                return new this.constructor(this.order, e)
            }
        })
    }), define("math/parsenode/piecewise", ["require", "pjs", "./scalarexpression", "./constant", "math/maybe-rational"], function(e) {
        var t = e("pjs"),
            n = e("./scalarexpression"),
            r = e("./constant"),
            i = e("math/maybe-rational").maybeRational,
            o = t(n, {});
        return o.chain = function(e) {
            for (var t, n = r(NaN); e.length;) t = e.pop(), n = o([t.condition, t.if_expr, n]);
            return n
        }, o.empty = function() {
            return o([r(!0), r(i(1, 1)), r(NaN)])
        }, o
    }), define("math/parsenode/derivative", ["require", "pjs", "./scalarexpression", "./identifier"], function(e) {
        var t = e("pjs"),
            n = e("./scalarexpression"),
            r = e("./identifier");
        return t(n, function(e, t) {
            e.init = function(e, n) {
                this._symbol = e instanceof r ? e._symbol : r(e)._symbol, t.init.call(this, n)
            }
        })
    }), define("math/parsenode/nativefunction", ["require", "pjs", "./scalarexpression", "math/functions"], function(e) {
        var t = e("pjs"),
            n = e("./scalarexpression"),
            r = e("math/functions");
        return t(n, function(e, n, i) {
            e.init = function(e, t) {
                if (e.length >= this._requiredArity)
                    for (; e.length < this._maxArity;) e.push(this._optionalArguments[e.length - this._requiredArity]);
                this._errorSymbol = "logbase" === this._symbol ? "log" : t || this._symbol, n.init.call(this, e)
            }, e.copyWithArgs = function(e) {
                var t = n.copyWithArgs.call(this, e);
                return t._errorSymbol = this._errorSymbol, t
            }, e.scalarEvalExpression = function(e) {
                return this.head + "(" + e.join(",") + ")"
            }, i.create = function(e, n, i, o) {
                return t(this, function(t, a, s) {
                    s.isFunction = !0, t._symbol = e, t.head = n, t._requiredArity = i, t._optionalArguments = o || [], t._maxArity = t._requiredArity + t._optionalArguments.length, t.evaluate = r.createEvaluateFunction(t.scalarEvalExpression.bind(t), t._maxArity), s.getConcreteInvocationTree = function(e, t, n, r, i) {
                        return s(n, r).getConcreteTree(e, t, i)
                    }, s.getCacheKeys = function() {
                        return []
                    }
                })
            }
        })
    }), define("math/parsenode/typedfunction", ["require", "pjs", "./nativefunction"], function(e) {
        return e("pjs")(e("./nativefunction"), function(e, t, n, r) {
            n.create = function(e, t, n, i) {
                var o = n.length,
                    a = r.create.call(this, e, t, o);
                return a.prototype._inputTypes = n, a.prototype._outputType = i, a
            }
        })
    }), define("math/parsenode/trigfunction", ["require", "pjs", "./nativefunction", "./expressionTypes", "math/errormsg"], function(e) {
        var t = e("pjs"),
            n = e("./nativefunction"),
            r = e("./expressionTypes").Multiply,
            i = e("math/errormsg");
        return t(n, function(e, t, n, o) {
            n.create = function(e, t) {
                var n = o.create(e, t, 1);
                return n.getConcreteInvocationTree = function(e, t, o, a, s) {
                    if (o.length < 1) throw i.wrongArity(a, 1, o.length);
                    var l = t.trigAngleMultiplier ? [r([o[0], t.trigAngleMultiplier])].concat(o.slice(1)) : o;
                    return n(l, a).getConcreteTree(e, t, s)
                }, n.getCacheKeys = function() {
                    return ["trigAngleMultiplier"]
                }, n
            }
        })
    }), define("math/parsenode/inversetrigfunction", ["require", "pjs", "./nativefunction", "./expressionTypes"], function(e) {
        var t = e("pjs"),
            n = e("./nativefunction"),
            r = e("./expressionTypes").Divide;
        return t(n, function(e, t, n, i) {
            n.create = function(e, t, n) {
                var o = i.create(e, t, 1, n);
                return o.getConcreteInvocationTree = function(e, t, n, i, a) {
                    var s = o(n, i);
                    return (t.trigAngleMultiplier ? r([s, t.trigAngleMultiplier]) : s).getConcreteTree(e, t, a)
                }, o.getCacheKeys = function() {
                    return ["trigAngleMultiplier"]
                }, o
            }
        })
    }), define("math/parsenode/distribution", ["require", "pjs", "./scalarexpression", "math/errormsg"], function(e) {
        var t = e("pjs"),
            n = e("./scalarexpression"),
            r = e("math/errormsg");
        return t(n, function(e, n, i) {
            e.init = function(e, t) {
                var i = "tdist" === this._symbol;
                if (e.length < this._requiredArity) {
                    if (i) throw r.tdistWrongArity();
                    throw r.wrongArity(t, this._requiredArity, e.length)
                }
                if (e.length > this._maxArity) {
                    if (i) throw r.tdistWrongArity();
                    throw r.wrongArity(this._symbol, this._maxArity, e.length)
                }
                for (; e.length < this._maxArity;) e.push(this._optionalArguments[e.length - this._requiredArity]);
                n.init.call(this, e)
            }, e.scalarEvalExpression = function(e) {
                return this.head + "(" + e.join(",") + ")"
            }, i.create = function(e, n, r) {
                return t(this, function(t, i, o) {
                    o.isFunction = !0, t._symbol = e, t._requiredArity = n, t._optionalArguments = r || [], t._maxArity = t._requiredArity + t._optionalArguments.length, o.getConcreteInvocationTree = function(e, t, n, r, i) {
                        return o(n, r)
                    }, o.getCacheKeys = function() {
                        return []
                    }
                })
            }
        })
    }), define("math/parsenode/reducerfunction", ["require", "pjs", "./expression", "math/functions", "math/errormsg", "./distribution", "math/types"], function(e) {
        var t = e("pjs"),
            n = e("./expression"),
            r = e("math/functions"),
            i = e("math/errormsg"),
            o = e("./distribution"),
            a = e("math/types");
        return t(n, function(e, n, s) {
            e.init = function(e, t) {
                if (0 === e.length) throw i.zeroArgReducer(t);
                if (e[0] instanceof o && !e[0][this._symbol]) throw i.functionTypeError(this._symbol, [a.prettyPrint(this.args[0].valueType)]);
                n.init.call(this, e)
            }, e.evalExpression = function(e) {
                return this.head + "(" + e + ")"
            }, e.getEvalStrings = function() {
                var e = this.args[0].getEvalStrings();
                return {
                    statements: e.statements,
                    expression: this.evalExpression(e.expression)
                }
            }, s.create = function(e, n) {
                return t(s, function(t, i, o) {
                    t._symbol = e, t.head = n, t._arity = 1, o.isFunction = !0, o.allowDotCalls = !0, o.dotMinArity = 0, o.dotMaxArity = 0, t.evaluate = r.createEvaluateFunction(t.evalExpression.bind(t), t._arity), o.getConcreteInvocationTree = function(e, t, n, r, i) {
                        return o(n, r).getConcreteTree(e, t, i)
                    }, o.getCacheKeys = function() {
                        return []
                    }
                })
            }
        })
    }), define("math/parsenode/doublereducerfunction", ["require", "pjs", "./expression", "math/functions", "math/errormsg"], function(e) {
        var t = e("pjs"),
            n = e("./expression"),
            r = e("math/functions"),
            i = e("math/errormsg");
        return t(n, function(e, n, o) {
            e.init = function(e, t) {
                if (n.init.call(this, e), 2 !== this.args.length) throw i.wrongDoubleReducerArity(t)
            }, e.evalExpression = function(e) {
                return this.head + "(" + e.join(",") + ")"
            }, e.getEvalStrings = function() {
                for (var e = [], t = [], n = Math.min(this.args[0].length, this.args[1].length), r = 0; r < this.args.length; r++) {
                    var i = this.args[r],
                        o = i.getEvalStrings();
                    Array.prototype.push.apply(e, o.statements), t.push(i.length === n ? o.expression : o.expression + ".slice(0," + n + ")")
                }
                return {
                    statements: e,
                    expression: this.evalExpression(t)
                }
            }, o.create = function(e, n) {
                return t(o, function(t, i, o) {
                    t._symbol = e, t.head = n, t._arity = 2, o.isFunction = !0, t.evaluate = r.createEvaluateFunction(t.evalExpression.bind(t), t._arity), o.getConcreteInvocationTree = function(e, t, n, r, i) {
                        return o(n, r).getConcreteTree(e, t, i)
                    }, o.getCacheKeys = function() {
                        return []
                    }
                })
            }
        })
    }), define("math/parsenode/parametrizedreducerfunction", ["require", "pjs", "./expression", "math/functions", "math/errormsg", "./distribution", "math/types"], function(e) {
        var t = e("pjs"),
            n = e("./expression"),
            r = e("math/functions"),
            i = e("math/errormsg"),
            o = e("./distribution"),
            a = e("math/types");
        return t(n, function(e, n, s) {
            e.init = function(e, t) {
                if (e.length < 2 && void 0 !== this._optionalArgument && e.push(this._optionalArgument), 2 !== e.length) throw i.wrongParametrizedReducerArity(t);
                if (e[0] instanceof o && !e[0][this._symbol]) throw i.functionTypeError(t, [a.prettyPrint(this.args[0].valueType)]);
                n.init.call(this, e)
            }, e.evalExpression = function(e) {
                return this.head + "(" + e.join(",") + ")"
            }, e.getEvalStrings = function() {
                var e = [],
                    t = this.args[0].getEvalStrings(),
                    n = this.args[1].getEvalStrings();
                return Array.prototype.push.apply(e, t.statements), Array.prototype.push.apply(e, n.statements), {
                    statements: e,
                    expression: this.evalExpression([t.expression, n.expression])
                }
            }, s.create = function(e, n, i) {
                return t(s, function(t, o, a) {
                    t._symbol = e, t.head = n, t._optionalArgument = i, t._arity = 2, a.isFunction = !0, a.allowDotCalls = !0, a.dotMinArity = void 0 === i ? 1 : 0, a.dotMaxArity = 1, t.evaluate = r.createEvaluateFunction(t.evalExpression.bind(t), t._arity), a.getConcreteInvocationTree = function(e, t, n, r, i) {
                        return a(n, r).getConcreteTree(e, t, i)
                    }, a.getCacheKeys = function() {
                        return []
                    }
                })
            }
        })
    }), define("math/parsenode/toplevelfunction", ["require", "pjs", "./nativefunction", "math/errormsg"], function(e) {
        var t = e("pjs"),
            n = e("./nativefunction"),
            r = e("math/errormsg");
        return t(n, function(e, n, i, o) {
            i.create = function(e) {
                return t(i, function(e, t, n) {
                    n.isFunction = !0, n.getConcreteInvocationTree = function(e, t, n, i, o) {
                        throw r.unexpectedSymbol(i)
                    }, n.getCacheKeys = function() {
                        return []
                    }
                })
            }
        })
    }), define("math/parsenode/builtinfunction", ["require", "math/parsenode/nativefunction", "math/parsenode/typedfunction", "math/parsenode/trigfunction", "math/parsenode/inversetrigfunction", "math/parsenode/reducerfunction", "math/parsenode/doublereducerfunction", "math/parsenode/parametrizedreducerfunction", "math/parsenode/distribution", "math/parsenode/toplevelfunction", "math/types", "math/maybe-rational", "math/parsenode/constant"], function(e) {
        var t = e("math/parsenode/nativefunction"),
            n = e("math/parsenode/typedfunction"),
            r = e("math/parsenode/trigfunction"),
            i = e("math/parsenode/inversetrigfunction"),
            o = e("math/parsenode/reducerfunction"),
            a = e("math/parsenode/doublereducerfunction"),
            s = e("math/parsenode/parametrizedreducerfunction"),
            l = e("math/parsenode/distribution"),
            c = e("math/parsenode/toplevelfunction"),
            u = e("math/types"),
            p = e("math/maybe-rational").maybeRational,
            d = e("math/parsenode/constant"),
            h = d(p(1, 1)),
            f = d(p(0, 1)),
            m = d(p(1, 2));
        return {
            sin: r.create("sin", "BuiltIn.sin"),
            cos: r.create("cos", "BuiltIn.cos"),
            tan: r.create("tan", "BuiltIn.tan"),
            cot: r.create("cot", "BuiltIn.cot"),
            sec: r.create("sec", "BuiltIn.sec"),
            csc: r.create("csc", "BuiltIn.csc"),
            arcsin: i.create("arcsin", "Math.asin"),
            arccos: i.create("arccos", "Math.acos"),
            arctan: i.create("arctan", "Math.atan2", [h]),
            arccot: i.create("arccot", "BuiltIn.acot"),
            arcsec: i.create("arcsec", "BuiltIn.asec"),
            arccsc: i.create("arccsc", "BuiltIn.acsc"),
            sinh: t.create("sinh", "BuiltIn.sinh", 1),
            cosh: t.create("cosh", "BuiltIn.cosh", 1),
            tanh: t.create("tanh", "BuiltIn.tanh", 1),
            coth: t.create("coth", "BuiltIn.coth", 1),
            sech: t.create("sech", "BuiltIn.sech", 1),
            csch: t.create("csch", "BuiltIn.csch", 1),
            arcsinh: t.create("arcsinh", "BuiltIn.asinh", 1),
            arccosh: t.create("arccosh", "BuiltIn.acosh", 1),
            arctanh: t.create("arctanh", "BuiltIn.atanh", 1),
            arccoth: t.create("arccoth", "BuiltIn.acoth", 1),
            arcsech: t.create("arcsech", "BuiltIn.asech", 1),
            arccsch: t.create("arccsch", "BuiltIn.acsch", 1),
            sqrt: t.create("sqrt", "Math.sqrt", 1),
            rtxsqpone: t.create("rtxsqpone", "BuiltIn.sqrtxsqp1", 1),
            rtxsqmone: t.create("rtxsqmone", "BuiltIn.sqrtxsqm1", 1),
            nthroot: t.create("nthroot", "BuiltIn.nthroot", 2),
            log: t.create("log", "BuiltIn.common_log", 1),
            logbase: t.create("logbase", "BuiltIn.log_base", 2),
            ln: t.create("ln", "BuiltIn.log", 1),
            exp: t.create("exp", "Math.exp", 1),
            floor: t.create("floor", "Math.floor", 1),
            ceil: t.create("ceil", "Math.ceil", 1),
            round: t.create("round", "BuiltIn.round", 1, [f]),
            abs: t.create("abs", "Math.abs", 1),
            sign: t.create("sign", "BuiltIn.sign", 1),
            mod: t.create("mod", "BuiltIn.mod", 2),
            nCr: t.create("nCr", "BuiltIn.nCr", 2),
            nPr: t.create("nPr", "BuiltIn.nPr", 2),
            factorial: t.create("factorial", "BuiltIn.factorial", 1),
            polyGamma: t.create("polyGamma", "BuiltIn.polyGamma", 2),
            lcm: o.create("lcm", "BuiltIn.listLCM"),
            gcd: o.create("gcd", "BuiltIn.listGCD"),
            mean: o.create("mean", "BuiltIn.mean"),
            total: o.create("total", "BuiltIn.total"),
            stdev: o.create("stdev", "BuiltIn.stdev"),
            stdevp: o.create("stdevp", "BuiltIn.stdevp"),
            mad: o.create("mad", "BuiltIn.mad"),
            length: o.create("length", "BuiltIn.length"),
            min: o.create("min", "BuiltIn.listMin"),
            max: o.create("max", "BuiltIn.listMax"),
            argmin: o.create("argmin", "BuiltIn.argMin"),
            argmax: o.create("argmax", "BuiltIn.argMax"),
            median: o.create("median", "BuiltIn.median"),
            var: o.create("var", "BuiltIn.var"),
            varp: o.create("varp", "BuiltIn.varp"),
            cov: a.create("cov", "BuiltIn.cov"),
            covp: a.create("covp", "BuiltIn.covp"),
            corr: a.create("corr", "BuiltIn.corr"),
            quantile: s.create("quantile", "BuiltIn.quantile"),
            quartile: s.create("quartile", "BuiltIn.quartile"),
            upperQuantileIndex: s.create("upperQuantileIndex", "BuiltIn.upperQuantileIndex"),
            lowerQuantileIndex: s.create("lowerQuantileIndex", "BuiltIn.lowerQuantileIndex"),
            quartileIndex: s.create("quartileIndex", "BuiltIn.quartileIndex"),
            upperQuartileIndex: s.create("upperQuartileIndex", "BuiltIn.upperQuartileIndex"),
            lowerQuartileIndex: s.create("lowerQuartileIndex", "BuiltIn.lowerQuartileIndex"),
            normalcdf: t.create("normalcdf", "BuiltIn.normalcdf", 2, [f, h]),
            normalpdf: t.create("normalpdf", "BuiltIn.normalpdf", 1, [f, h]),
            normalSample: n.create("normalSample", "BuiltIn.normalSample", [u.SeedType, u.Number, u.Number], u.Number),
            uniformSample: n.create("uniformSample", "BuiltIn.uniformSample", [u.SeedType, u.Number, u.Number], u.Number),
            tSample: n.create("tSample", "BuiltIn.tSample", [u.SeedType, u.Number], u.Number),
            poissonSample: n.create("poissonSample", "BuiltIn.poissonSample", [u.SeedType, u.Number], u.Number),
            binomSample: n.create("binomSample", "BuiltIn.binomSample", [u.SeedType, u.Number, u.Number], u.Number),
            binomcdf: t.create("binomcdf", "BuiltIn.binomcdf", 3, [m]),
            binompdf: t.create("binompdf", "BuiltIn.binompdf", 2, [m]),
            poissoncdf: t.create("poissoncdf", "BuiltIn.poissoncdf", 3),
            poissonpdf: t.create("poissonpdf", "BuiltIn.poissonpdf", 2),
            uniformcdf: t.create("uniformcdf", "BuiltIn.uniformcdf", 2, [f, h]),
            uniformpdf: t.create("uniformpdf", "BuiltIn.uniformpdf", 1, [f, h]),
            invNorm: t.create("invNorm", "BuiltIn.invNorm", 1),
            invT: t.create("invT", "BuiltIn.invT", 2),
            invPoisson: t.create("invPoisson", "BuiltIn.invPoisson", 2),
            invBinom: t.create("invBinom", "BuiltIn.invBinom", 3),
            invUniform: t.create("invUniform", "BuiltIn.invUniform", 3),
            erf: t.create("erf", "BuiltIn.erf", 1),
            tpdf: t.create("tpdf", "BuiltIn.tpdf", 2),
            tcdf: t.create("tcdf", "BuiltIn.tcdf", 3),
            tscore: s.create("tscore", "BuiltIn.tscore", f),
            distance: n.create("distance", "BuiltIn.distance", [u.Point, u.Point], u.Number),
            midpoint: n.create("midpoint", "BuiltIn.midpoint", [u.Point, u.Point], u.Point),
            normaldist: l.create("normaldist", 0, [f, h]),
            tdist: l.create("tdist", 1),
            binomialdist: l.create("binomialdist", 1, [m]),
            poissondist: l.create("poissondist", 1),
            uniformdist: l.create("uniformdist", 0, [f, h]),
            pdf: n.create("pdf", "BuiltIn.normpdf", [u.Distribution, u.Number], u.Number).open(function(e, t, n) {
                n.allowDotCalls = !0, n.dotMinArity = 1, n.dotMaxArity = 1
            }),
            cdf: n.create("cdf", "BuiltIn.normcdf", [u.Distribution, u.Number, u.Number], u.Number).open(function(e, t, n) {
                n.allowDotCalls = !0, n.dotMinArity = 1, n.dotMaxArity = 2
            }),
            random: t.create("random", "BuiltIn.random", 2).open(function(e, t, n) {
                n.allowDotCalls = !0, n.dotMinArity = 1, n.dotMaxArity = 3
            }),
            polygon: c.create("polygon"),
            histogram: c.create("histogram"),
            dotplot: c.create("dotplot"),
            boxplot: c.create("boxplot"),
            ttest: c.create("ttest"),
            ittest: c.create("ittest"),
            stats: c.create("stats")
        }
    }), define("math/parsenode/histogram", ["require", "pjs", "./expression"], function(e) {
        return e("pjs")(e("./expression"), function(e, t) {
            e.init = function(e) {
                t.init.call(this, e), this._symbol = "histogram"
            }
        })
    }), define("math/parsenode/dotplot", ["require", "pjs", "./expression"], function(e) {
        return e("pjs")(e("./expression"), function(e, t) {
            e.init = function(e) {
                t.init.call(this, e), this._symbol = "dotplot"
            }
        })
    }), define("math/parsenode/boxplot", ["require", "pjs", "./expression"], function(e) {
        return e("pjs")(e("./expression"), function(e, t) {
            e.init = function(e) {
                t.init.call(this, e), this._symbol = "boxplot"
            }
        })
    }), define("math/parsenode/ttest", ["require", "pjs", "./expression"], function(e) {
        return e("pjs")(e("./expression"), function(e, t) {
            e.init = function() {
                t.init.apply(this, arguments), this._symbol = "ttest"
            }
        })
    }), define("math/parsenode/independent-ttest", ["require", "pjs", "./expression"], function(e) {
        return e("pjs")(e("./expression"), function(e, t) {
            e.init = function() {
                t.init.apply(this, arguments), this._symbol = "ittest"
            }
        })
    }), define("math/parsenode/stats", ["require", "pjs", "./expression"], function(e) {
        return e("pjs")(e("./expression"), function(e, t) {
            e.init = function() {
                t.init.apply(this, arguments), this._symbol = "stats"
            }
        })
    }), define("math/parsenode/equation", ["require", "./base", "pjs", "./expressionTypes", "math/parsenode/comparator"], function(e) {
        var t = e("./base"),
            n = e("pjs"),
            r = e("./expressionTypes").Subtract,
            i = e("math/parsenode/comparator");
        return n(t, function(e, t) {
            e.init = function(e, n) {
                t.init.call(this), this.mergeDependencies(e, n), this._lhs = e, this._rhs = n, this._difference = r([this._lhs, this._rhs])
            }, e.asComparator = function() {
                return i["="]([this._lhs, this._rhs])
            }
        })
    }), define("math/parsenode/assignment", ["require", "./base", "./equation", "./identifier", "pjs"], function(e) {
        var t = e("./base"),
            n = e("./equation"),
            r = e("./identifier");
        return e("pjs")(t, function(e, t) {
            e.init = function(e, n) {
                t.init.call(this), e = e._symbol, this.mergeDependencies(n), this._expression = n, this._symbol = e, this._exports = this.computeExports()
            }, e.shouldExportAns = function() {
                return !0
            }, e.computeExports = function() {
                for (var e = this._symbol, t = this.getDependencies(), n = 0; n < t.length; n++)
                    if (t[n] === e) return [];
                return [e]
            }, e.isEquation = function(e) {
                return -1 !== e.getDependencies().indexOf(this._symbol)
            }, e.asEquation = function() {
                var e = n(r(this._symbol), this._expression);
                return e.userData = this.userData, e.metaData = this.metaData, e
            }, e.shouldPromoteToSlider = function(e) {
                return !!this._expression.isConstant && !this._expression.is_mixed_number && "number" == typeof this._expression.asValue() && !!isFinite(this._expression.asValue()) && e.isValidSlider(this._symbol)
            }
        })
    }), define("math/parsenode/functiondefinition", ["require", "pjs", "./base", "math/errormsg", "./equation", "./identifier", "./functioncall"], function(e) {
        var t = e("pjs"),
            n = e("./base"),
            r = e("math/errormsg"),
            i = e("./equation"),
            o = e("./identifier"),
            a = e("./functioncall");
        return t(n, function(e, t) {
            e.init = function(e, n, r) {
                t.init.call(this), e = e._symbol, this._argSymbols = n.map(function(e) {
                    return e._symbol
                }), this._symbol = e, this._exports = [e], this._expression = r, this.addDependencies(this._argSymbols), this.addDummyDependencies(this._argSymbols), this.mergeDependencies(this._expression)
            }, e.isFunction = !0, e.getConcreteInvocationTree = function(e, t, n, i, o) {
                if (n.length !== this._argSymbols.length) throw r.wrongArity(i, this._argSymbols.length, n.length);
                for (var a = Object.create(t), s = 0; s < this._argSymbols.length; s++) a[this._argSymbols[s]] = n[s];
                return this._expression.getConcreteTree(e, a, o)
            }, e.getSliderVariables = function(e, t) {
                var n = this._argSymbols;
                return e.sliderVariables(t.getDependencies()).filter(function(e) {
                    return -1 === n.indexOf(e)
                })
            }, e.asEquation = function() {
                var e = this._argSymbols.map(function(e) {
                        return o(e)
                    }),
                    t = i(a(o(this._symbol), e), this._expression);
                return t.userData = this.userData, t.metaData = this.metaData, t
            }
        })
    }), define("numeric", [], function() {
        "use strict";
        var e = "undefined" == typeof exports ? function() {} : exports;
        return "undefined" != typeof global && (global.numeric = e), e.version = "1.2.6", e._myIndexOf = function(e) {
                var t, n = this.length;
                for (t = 0; t < n; ++t)
                    if (this[t] === e) return t;
                return -1
            }, e.myIndexOf = Array.prototype.indexOf ? Array.prototype.indexOf : e._myIndexOf, e.precision = 4, e.largeArray = 50, e.compile = function() {
                var t = Array.prototype.slice.call(arguments),
                    n = t.pop();
                return n = "return function (" + t.join(",") + ") {" + n + "}", new Function(["numeric"], n)(e)
            }, e._dim = function(e) {
                for (var t = [];
                    "object" == typeof e;) t.push(e.length), e = e[0];
                return t
            }, e.dim = function(t) {
                var n, r;
                return "object" == typeof t ? (n = t[0], "object" == typeof n ? (r = n[0], "object" == typeof r ? e._dim(t) : [t.length, n.length]) : [t.length]) : []
            }, e.mapreduce = function(t, n) {
                return e.compile("x", "accum", "_s", "_k", 'if(typeof accum === "undefined") accum = ' + n + ';\nif(typeof x === "number") { var xi = x; ' + t + '; return accum; }\nif(typeof _s === "undefined") _s = numeric.dim(x);\nif(typeof _k === "undefined") _k = 0;\nvar _n = _s[_k];\nvar i,xi;\nif(_k < _s.length-1) {\n    for(i=_n-1;i>=0;i--) {\n        accum = arguments.callee(x[i],accum,_s,_k+1);\n    }    return accum;\n}\nfor(i=_n-1;i>=1;i-=2) { \n    xi = x[i];\n    ' + t + ";\n    xi = x[i-1];\n    " + t + ";\n}\nif(i === 0) {\n    xi = x[i];\n    " + t + "\n}\nreturn accum;")
            }, e.mapreduce2 = function(t, n) {
                return e.compile("x", "var n = x.length;\nvar i,xi;\n" + n + "\nfor(i=n-1;i!==-1;--i) { \n    xi = x[i];\n    " + t + "\n}\nreturn accum;")
            }, e.rep = function(t, n, r) {
                void 0 === r && (r = 0);
                var i, o = t[r],
                    a = Array(o);
                if (r === t.length - 1) {
                    for (i = o - 2; i >= 0; i -= 2) a[i + 1] = n, a[i] = n;
                    return -1 === i && (a[0] = n), a
                }
                for (i = o - 1; i >= 0; i--) a[i] = e.rep(t, n, r + 1);
                return a
            }, e.dotMMsmall = function(e, t) {
                var n, r, i, o, a, s, l, c, u, p, d;
                for (o = e.length, a = t.length, s = t[0].length, l = Array(o), n = o - 1; n >= 0; n--) {
                    for (c = Array(s), u = e[n], i = s - 1; i >= 0; i--) {
                        for (p = u[a - 1] * t[a - 1][i], r = a - 2; r >= 1; r -= 2) d = r - 1, p += u[r] * t[r][i] + u[d] * t[d][i];
                        0 === r && (p += u[0] * t[0][i]), c[i] = p
                    }
                    l[n] = c
                }
                return l
            }, e._getCol = function(e, t, n) {
                var r, i = e.length;
                for (r = i - 1; r > 0; --r) n[r] = e[r][t], --r, n[r] = e[r][t];
                0 === r && (n[0] = e[0][t])
            }, e.dotMMbig = function(t, n) {
                var r, i, o, a = e._getCol,
                    s = n.length,
                    l = Array(s),
                    c = t.length,
                    u = n[0].length,
                    p = new Array(c),
                    d = e.dotVV;
                for (--s, --c, i = c; - 1 !== i; --i) p[i] = Array(u);
                for (--u, i = u; - 1 !== i; --i)
                    for (a(n, i, l), o = c; - 1 !== o; --o) 0, r = t[o], p[o][i] = d(r, l);
                return p
            }, e.dotMV = function(t, n) {
                var r, i = t.length,
                    o = (n.length, Array(i)),
                    a = e.dotVV;
                for (r = i - 1; r >= 0; r--) o[r] = a(t[r], n);
                return o
            }, e.dotVM = function(e, t) {
                var n, r, i, o, a, s, l;
                for (i = e.length, o = t[0].length, a = Array(o), r = o - 1; r >= 0; r--) {
                    for (s = e[i - 1] * t[i - 1][r], n = i - 2; n >= 1; n -= 2) l = n - 1, s += e[n] * t[n][r] + e[l] * t[l][r];
                    0 === n && (s += e[0] * t[0][r]), a[r] = s
                }
                return a
            }, e.dotVV = function(e, t) {
                var n, r, i = e.length,
                    o = e[i - 1] * t[i - 1];
                for (n = i - 2; n >= 1; n -= 2) r = n - 1, o += e[n] * t[n] + e[r] * t[r];
                return 0 === n && (o += e[0] * t[0]), o
            }, e.dot = function(t, n) {
                var r = e.dim;
                switch (1e3 * r(t).length + r(n).length) {
                    case 2002:
                        return n.length < 10 ? e.dotMMsmall(t, n) : e.dotMMbig(t, n);
                    case 2001:
                        return e.dotMV(t, n);
                    case 1002:
                        return e.dotVM(t, n);
                    case 1001:
                        return e.dotVV(t, n);
                    case 1e3:
                        return e.mulVS(t, n);
                    case 1:
                        return e.mulSV(t, n);
                    case 0:
                        return t * n;
                    default:
                        throw new Error("numeric.dot only works on vectors and matrices")
                }
            }, e.diag = function(e) {
                var t, n, r, i, o = e.length,
                    a = Array(o);
                for (t = o - 1; t >= 0; t--) {
                    for (i = Array(o), n = t + 2, r = o - 1; r >= n; r -= 2) i[r] = 0, i[r - 1] = 0;
                    for (r > t && (i[r] = 0), i[t] = e[t], r = t - 1; r >= 1; r -= 2) i[r] = 0, i[r - 1] = 0;
                    0 === r && (i[0] = 0), a[t] = i
                }
                return a
            }, e.getDiag = function(e) {
                var t, n = Math.min(e.length, e[0].length),
                    r = Array(n);
                for (t = n - 1; t >= 1; --t) r[t] = e[t][t], --t, r[t] = e[t][t];
                return 0 === t && (r[0] = e[0][0]), r
            }, e.identity = function(t) {
                return e.diag(e.rep([t], 1))
            }, e.pointwise = function(t, n, r) {
                void 0 === r && (r = "");
                var i, o, a = [],
                    s = /\[i\]$/,
                    l = "",
                    c = !1;
                for (i = 0; i < t.length; i++) s.test(t[i]) ? (o = t[i].substring(0, t[i].length - 3), l = o) : o = t[i], "ret" === o && (c = !0), a.push(o);
                return a[t.length] = "_s", a[t.length + 1] = "_k", a[t.length + 2] = 'if(typeof _s === "undefined") _s = numeric.dim(' + l + ');\nif(typeof _k === "undefined") _k = 0;\nvar _n = _s[_k];\nvar i' + (c ? "" : ", ret = Array(_n)") + ";\nif(_k < _s.length-1) {\n    for(i=_n-1;i>=0;i--) ret[i] = arguments.callee(" + t.join(",") + ",_s,_k+1);\n    return ret;\n}\n" + r + "\nfor(i=_n-1;i!==-1;--i) {\n    " + n + "\n}\nreturn ret;", e.compile.apply(null, a)
            }, e.pointwise2 = function(t, n, r) {
                void 0 === r && (r = "");
                var i, o, a = [],
                    s = /\[i\]$/,
                    l = "",
                    c = !1;
                for (i = 0; i < t.length; i++) s.test(t[i]) ? (o = t[i].substring(0, t[i].length - 3), l = o) : o = t[i], "ret" === o && (c = !0), a.push(o);
                return a[t.length] = "var _n = " + l + ".length;\nvar i" + (c ? "" : ", ret = Array(_n)") + ";\n" + r + "\nfor(i=_n-1;i!==-1;--i) {\n" + n + "\n}\nreturn ret;", e.compile.apply(null, a)
            }, e._biforeach = function e(t, n, r, i, o) {
                if (i === r.length - 1) return void o(t, n);
                var a, s = r[i];
                for (a = s - 1; a >= 0; a--) e("object" == typeof t ? t[a] : t, "object" == typeof n ? n[a] : n, r, i + 1, o)
            }, e._biforeach2 = function e(t, n, r, i, o) {
                if (i === r.length - 1) return o(t, n);
                var a, s = r[i],
                    l = Array(s);
                for (a = s - 1; a >= 0; --a) l[a] = e("object" == typeof t ? t[a] : t, "object" == typeof n ? n[a] : n, r, i + 1, o);
                return l
            }, e._foreach = function e(t, n, r, i) {
                if (r === n.length - 1) return void i(t);
                var o, a = n[r];
                for (o = a - 1; o >= 0; o--) e(t[o], n, r + 1, i)
            }, e._foreach2 = function e(t, n, r, i) {
                if (r === n.length - 1) return i(t);
                var o, a = n[r],
                    s = Array(a);
                for (o = a - 1; o >= 0; o--) s[o] = e(t[o], n, r + 1, i);
                return s
            }, e.ops2 = {
                add: "+",
                sub: "-",
                mul: "*",
                div: "/",
                mod: "%",
                and: "&&",
                or: "||",
                eq: "===",
                neq: "!==",
                lt: "<",
                gt: ">",
                leq: "<=",
                geq: ">=",
                band: "&",
                bor: "|",
                bxor: "^",
                lshift: "<<",
                rshift: ">>",
                rrshift: ">>>"
            }, e.opseq = {
                addeq: "+=",
                subeq: "-=",
                muleq: "*=",
                diveq: "/=",
                modeq: "%=",
                lshifteq: "<<=",
                rshifteq: ">>=",
                rrshifteq: ">>>=",
                bandeq: "&=",
                boreq: "|=",
                bxoreq: "^="
            }, e.mathfuns = ["abs", "acos", "asin", "atan", "ceil", "cos", "exp", "floor", "log", "round", "sin", "sqrt", "tan", "isNaN", "isFinite"], e.mathfuns2 = ["atan2", "pow", "max", "min"], e.ops1 = {
                neg: "-",
                not: "!",
                bnot: "~",
                clone: ""
            }, e.mapreducers = {
                any: ["if(xi) return true;", "var accum = false;"],
                all: ["if(!xi) return false;", "var accum = true;"],
                sum: ["accum += xi;", "var accum = 0;"],
                prod: ["accum *= xi;", "var accum = 1;"],
                norm2Squared: ["accum += xi*xi;", "var accum = 0;"],
                norminf: ["accum = max(accum,abs(xi));", "var accum = 0, max = Math.max, abs = Math.abs;"],
                norm1: ["accum += abs(xi);", "var accum = 0, abs = Math.abs;"],
                sup: ["accum = max(accum,xi);", "var accum = -Infinity, max = Math.max;"],
                inf: ["accum = min(accum,xi);", "var accum = Infinity, min = Math.min;"]
            },
            function() {
                var t, n;
                for (t = 0; t < e.mathfuns2.length; ++t) n = e.mathfuns2[t], e.ops2[n] = n;
                for (t in e.ops2)
                    if (e.ops2.hasOwnProperty(t)) {
                        n = e.ops2[t];
                        var r, i, o = ""; - 1 !== e.myIndexOf.call(e.mathfuns2, t) ? (o = "var " + n + " = Math." + n + ";\n", r = function(e, t, r) {
                            return e + " = " + n + "(" + t + "," + r + ")"
                        }, i = function(e, t) {
                            return e + " = " + n + "(" + e + "," + t + ")"
                        }) : (r = function(e, t, r) {
                            return e + " = " + t + " " + n + " " + r
                        }, i = e.opseq.hasOwnProperty(t + "eq") ? function(e, t) {
                            return e + " " + n + "= " + t
                        } : function(e, t) {
                            return e + " = " + e + " " + n + " " + t
                        }), e[t + "VV"] = e.pointwise2(["x[i]", "y[i]"], r("ret[i]", "x[i]", "y[i]"), o), e[t + "SV"] = e.pointwise2(["x", "y[i]"], r("ret[i]", "x", "y[i]"), o), e[t + "VS"] = e.pointwise2(["x[i]", "y"], r("ret[i]", "x[i]", "y"), o), e[t] = e.compile("var n = arguments.length, i, x = arguments[0], y;\nvar VV = numeric." + t + "VV, VS = numeric." + t + "VS, SV = numeric." + t + 'SV;\nvar dim = numeric.dim;\nfor(i=1;i!==n;++i) { \n  y = arguments[i];\n  if(typeof x === "object") {\n      if(typeof y === "object") x = numeric._biforeach2(x,y,dim(x),0,VV);\n      else x = numeric._biforeach2(x,y,dim(x),0,VS);\n  } else if(typeof y === "object") x = numeric._biforeach2(x,y,dim(y),0,SV);\n  else ' + i("x", "y") + "\n}\nreturn x;\n"), e[n] = e[t], e[t + "eqV"] = e.pointwise2(["ret[i]", "x[i]"], i("ret[i]", "x[i]"), o), e[t + "eqS"] = e.pointwise2(["ret[i]", "x"], i("ret[i]", "x"), o), e[t + "eq"] = e.compile("var n = arguments.length, i, x = arguments[0], y;\nvar V = numeric." + t + "eqV, S = numeric." + t + 'eqS\nvar s = numeric.dim(x);\nfor(i=1;i!==n;++i) { \n  y = arguments[i];\n  if(typeof y === "object") numeric._biforeach(x,y,s,0,V);\n  else numeric._biforeach(x,y,s,0,S);\n}\nreturn x;\n')
                    } for (t = 0; t < e.mathfuns2.length; ++t) n = e.mathfuns2[t], delete e.ops2[n];
                for (t = 0; t < e.mathfuns.length; ++t) n = e.mathfuns[t], e.ops1[n] = n;
                for (t in e.ops1) e.ops1.hasOwnProperty(t) && (o = "", n = e.ops1[t], -1 !== e.myIndexOf.call(e.mathfuns, t) && Math.hasOwnProperty(n) && (o = "var " + n + " = Math." + n + ";\n"), e[t + "eqV"] = e.pointwise2(["ret[i]"], "ret[i] = " + n + "(ret[i]);", o), e[t + "eq"] = e.compile("x", 'if(typeof x !== "object") return ' + n + "x\nvar i;\nvar V = numeric." + t + "eqV;\nvar s = numeric.dim(x);\nnumeric._foreach(x,s,0,V);\nreturn x;\n"), e[t + "V"] = e.pointwise2(["x[i]"], "ret[i] = " + n + "(x[i]);", o), e[t] = e.compile("x", 'if(typeof x !== "object") return ' + n + "(x)\nvar i;\nvar V = numeric." + t + "V;\nvar s = numeric.dim(x);\nreturn numeric._foreach2(x,s,0,V);\n"));
                for (t = 0; t < e.mathfuns.length; ++t) n = e.mathfuns[t], delete e.ops1[n];
                for (t in e.mapreducers) e.mapreducers.hasOwnProperty(t) && (n = e.mapreducers[t], e[t + "V"] = e.mapreduce2(n[0], n[1]), e[t] = e.compile("x", "s", "k", n[1] + 'if(typeof x !== "object") {    xi = x;\n' + n[0] + '\n    return accum;\n}if(typeof s === "undefined") s = numeric.dim(x);\nif(typeof k === "undefined") k = 0;\nif(k === s.length-1) return numeric.' + t + "V(x);\nvar xi;\nvar n = x.length, i;\nfor(i=n-1;i!==-1;--i) {\n   xi = arguments.callee(x[i]);\n" + n[0] + "\n}\nreturn accum;\n"))
            }(), e.inv = function(t) {
                var n, r, i, o, a, s, l, t, c = e.dim(t),
                    u = Math.abs,
                    p = c[0],
                    d = c[1],
                    h = e.clone(t),
                    f = e.identity(p);
                for (s = 0; s < d; ++s) {
                    var m = -1,
                        g = -1;
                    for (a = s; a !== p; ++a)(l = u(h[a][s])) > g && (m = a, g = l);
                    for (r = h[m], h[m] = h[s], h[s] = r, o = f[m], f[m] = f[s], f[s] = o, t = r[s], l = s; l !== d; ++l) r[l] /= t;
                    for (l = d - 1; - 1 !== l; --l) o[l] /= t;
                    for (a = p - 1; - 1 !== a; --a)
                        if (a !== s) {
                            for (n = h[a], i = f[a], t = n[s], l = s + 1; l !== d; ++l) n[l] -= r[l] * t;
                            for (l = d - 1; l > 0; --l) i[l] -= o[l] * t, --l, i[l] -= o[l] * t;
                            0 === l && (i[0] -= o[0] * t)
                        }
                }
                return f
            }, e.det = function(t) {
                var n = e.dim(t);
                if (2 !== n.length || n[0] !== n[1]) throw new Error("numeric: det() only works on square matrices");
                var r, i, o, a, s, l, c, u, p = n[0],
                    d = 1,
                    h = e.clone(t);
                for (i = 0; i < p - 1; i++) {
                    for (o = i, r = i + 1; r < p; r++) Math.abs(h[r][i]) > Math.abs(h[o][i]) && (o = r);
                    for (o !== i && (c = h[o], h[o] = h[i], h[i] = c, d *= -1), a = h[i], r = i + 1; r < p; r++) {
                        for (s = h[r], l = s[i] / a[i], o = i + 1; o < p - 1; o += 2) u = o + 1, s[o] -= a[o] * l, s[u] -= a[u] * l;
                        o !== p && (s[o] -= a[o] * l)
                    }
                    if (0 === a[i]) return 0;
                    d *= a[i]
                }
                return d * h[i][i]
            }, e.transpose = function(e) {
                var t, n, r, i, o, a = e.length,
                    s = e[0].length,
                    l = Array(s);
                for (n = 0; n < s; n++) l[n] = Array(a);
                for (t = a - 1; t >= 1; t -= 2) {
                    for (i = e[t], r = e[t - 1], n = s - 1; n >= 1; --n) o = l[n], o[t] = i[n], o[t - 1] = r[n], --n, o = l[n], o[t] = i[n], o[t - 1] = r[n];
                    0 === n && (o = l[0], o[t] = i[0], o[t - 1] = r[0])
                }
                if (0 === t) {
                    for (r = e[0], n = s - 1; n >= 1; --n) l[n][0] = r[n], --n, l[n][0] = r[n];
                    0 === n && (l[0][0] = r[0])
                }
                return l
            }, e.negtranspose = function(e) {
                var t, n, r, i, o, a = e.length,
                    s = e[0].length,
                    l = Array(s);
                for (n = 0; n < s; n++) l[n] = Array(a);
                for (t = a - 1; t >= 1; t -= 2) {
                    for (i = e[t], r = e[t - 1], n = s - 1; n >= 1; --n) o = l[n], o[t] = -i[n], o[t - 1] = -r[n], --n, o = l[n], o[t] = -i[n], o[t - 1] = -r[n];
                    0 === n && (o = l[0], o[t] = -i[0], o[t - 1] = -r[0])
                }
                if (0 === t) {
                    for (r = e[0], n = s - 1; n >= 1; --n) l[n][0] = -r[n], --n, l[n][0] = -r[n];
                    0 === n && (l[0][0] = -r[0])
                }
                return l
            }, e.norm2 = function(t) {
                return Math.sqrt(e.norm2Squared(t))
            }, e.linspace = function(e, t, n) {
                if (void 0 === n && (n = Math.max(Math.round(t - e) + 1, 1)), n < 2) return 1 === n ? [e] : [];
                var r, i = Array(n);
                for (n--, r = n; r >= 0; r--) i[r] = (r * t + (n - r) * e) / n;
                return i
            }, e.getBlock = function(t, n, r) {
                function i(e, t) {
                    var a, s = n[t],
                        l = r[t] - s,
                        c = Array(l);
                    if (t === o.length - 1) {
                        for (a = l; a >= 0; a--) c[a] = e[a + s];
                        return c
                    }
                    for (a = l; a >= 0; a--) c[a] = i(e[a + s], t + 1);
                    return c
                }
                var o = e.dim(t);
                return i(t, 0)
            }, e.setBlock = function(t, n, r, i) {
                function o(e, t, i) {
                    var s, l = n[i],
                        c = r[i] - l;
                    if (i === a.length - 1)
                        for (s = c; s >= 0; s--) e[s + l] = t[s];
                    for (s = c; s >= 0; s--) o(e[s + l], t[s], i + 1)
                }
                var a = e.dim(t);
                return o(t, i, 0), t
            }, e.getRange = function(e, t, n) {
                var r, i, o, a, s = t.length,
                    l = n.length,
                    c = Array(s);
                for (r = s - 1; - 1 !== r; --r)
                    for (c[r] = Array(l), o = c[r], a = e[t[r]], i = l - 1; - 1 !== i; --i) o[i] = a[n[i]];
                return c
            }, e.blockMatrix = function(t) {
                var n = e.dim(t);
                if (n.length < 4) return e.blockMatrix([t]);
                var r, i, o, a, s, l = n[0],
                    c = n[1];
                for (r = 0, i = 0, o = 0; o < l; ++o) r += t[o][0].length;
                for (a = 0; a < c; ++a) i += t[0][a][0].length;
                var u = Array(r);
                for (o = 0; o < r; ++o) u[o] = Array(i);
                var p, d, h, f, m, g = 0;
                for (o = 0; o < l; ++o) {
                    for (p = i, a = c - 1; - 1 !== a; --a)
                        for (s = t[o][a], p -= s[0].length, h = s.length - 1; - 1 !== h; --h)
                            for (m = s[h], d = u[g + h], f = m.length - 1; - 1 !== f; --f) d[p + f] = m[f];
                    g += t[o][0].length
                }
                return u
            }, e.tensor = function(t, n) {
                if ("number" == typeof t || "number" == typeof n) return e.mul(t, n);
                var r = e.dim(t),
                    i = e.dim(n);
                if (1 !== r.length || 1 !== i.length) throw new Error("numeric: tensor product is only defined for vectors");
                var o, a, s, l, c = r[0],
                    u = i[0],
                    p = Array(c);
                for (a = c - 1; a >= 0; a--) {
                    for (o = Array(u), l = t[a], s = u - 1; s >= 3; --s) o[s] = l * n[s], --s, o[s] = l * n[s], --s, o[s] = l * n[s], --s, o[s] = l * n[s];
                    for (; s >= 0;) o[s] = l * n[s], --s;
                    p[a] = o
                }
                return p
            }, e.epsilon = 2.220446049250313e-16, e.LU = function(t, n) {
                n = n || !1;
                var r, i, o, a, s, l, c, u, p, d = Math.abs,
                    h = t.length,
                    f = h - 1,
                    m = new Array(h);
                for (n || (t = e.clone(t)), o = 0; o < h; ++o) {
                    for (c = o, l = t[o], p = d(l[o]), i = o + 1; i < h; ++i) a = d(t[i][o]), p < a && (p = a, c = i);
                    for (m[o] = c, c != o && (t[o] = t[c], t[c] = l, l = t[o]), s = l[o], r = o + 1; r < h; ++r) t[r][o] /= s;
                    for (r = o + 1; r < h; ++r) {
                        for (u = t[r], i = o + 1; i < f; ++i) u[i] -= u[o] * l[i], ++i, u[i] -= u[o] * l[i];
                        i === f && (u[i] -= u[o] * l[i])
                    }
                }
                return {
                    LU: t,
                    P: m
                }
            }, e.LUsolve = function(t, n) {
                var r, i, o, a, s, l = t.LU,
                    c = l.length,
                    u = e.clone(n),
                    p = t.P;
                for (r = c - 1; - 1 !== r; --r) u[r] = n[r];
                for (r = 0; r < c; ++r)
                    for (o = p[r], p[r] !== r && (s = u[r], u[r] = u[o], u[o] = s), a = l[r], i = 0; i < r; ++i) u[r] -= u[i] * a[i];
                for (r = c - 1; r >= 0; --r) {
                    for (a = l[r], i = r + 1; i < c; ++i) u[r] -= u[i] * a[i];
                    u[r] /= a[r]
                }
                return u
            }, e.solve = function(t, n, r) {
                return e.LUsolve(e.LU(t, r), n)
            }, e.svd = function(t) {
                function n(e, t) {
                    return e = Math.abs(e), t = Math.abs(t), e > t ? e * Math.sqrt(1 + t * t / e / e) : 0 == t ? e : t * Math.sqrt(1 + e * e / t / t)
                }
                var r, i = e.epsilon,
                    o = 1e-64 / i,
                    a = 0,
                    s = 0,
                    l = 0,
                    c = 0,
                    u = 0,
                    p = e.clone(t),
                    d = p.length,
                    h = p[0].length;
                if (d < h) throw "Need more rows than columns";
                var f = new Array(h),
                    m = new Array(h);
                for (s = 0; s < h; s++) f[s] = m[s] = 0;
                var g = e.rep([h, h], 0),
                    y = 0,
                    v = 0,
                    b = 0,
                    x = 0,
                    w = 0,
                    _ = 0,
                    S = 0;
                for (s = 0; s < h; s++) {
                    for (f[s] = v, S = 0, u = s + 1, l = s; l < d; l++) S += p[l][s] * p[l][s];
                    if (S <= o) v = 0;
                    else
                        for (y = p[s][s], v = Math.sqrt(S), y >= 0 && (v = -v), b = y * v - S, p[s][s] = y - v, l = u; l < h; l++) {
                            for (S = 0, c = s; c < d; c++) S += p[c][s] * p[c][l];
                            for (y = S / b, c = s; c < d; c++) p[c][l] += y * p[c][s]
                        }
                    for (m[s] = v, S = 0, l = u; l < h; l++) S += p[s][l] * p[s][l];
                    if (S <= o) v = 0;
                    else {
                        for (y = p[s][s + 1], v = Math.sqrt(S), y >= 0 && (v = -v), b = y * v - S, p[s][s + 1] = y - v, l = u; l < h; l++) f[l] = p[s][l] / b;
                        for (l = u; l < d; l++) {
                            for (S = 0, c = u; c < h; c++) S += p[l][c] * p[s][c];
                            for (c = u; c < h; c++) p[l][c] += S * f[c]
                        }
                    }
                    w = Math.abs(m[s]) + Math.abs(f[s]), w > x && (x = w)
                }
                for (s = h - 1; - 1 != s; s += -1) {
                    if (0 != v) {
                        for (b = v * p[s][s + 1], l = u; l < h; l++) g[l][s] = p[s][l] / b;
                        for (l = u; l < h; l++) {
                            for (S = 0, c = u; c < h; c++) S += p[s][c] * g[c][l];
                            for (c = u; c < h; c++) g[c][l] += S * g[c][s]
                        }
                    }
                    for (l = u; l < h; l++) g[s][l] = 0, g[l][s] = 0;
                    g[s][s] = 1, v = f[s], u = s
                }
                for (s = h - 1; - 1 != s; s += -1) {
                    for (u = s + 1, v = m[s], l = u; l < h; l++) p[s][l] = 0;
                    if (0 != v) {
                        for (b = p[s][s] * v, l = u; l < h; l++) {
                            for (S = 0, c = u; c < d; c++) S += p[c][s] * p[c][l];
                            for (y = S / b, c = s; c < d; c++) p[c][l] += y * p[c][s]
                        }
                        for (l = s; l < d; l++) p[l][s] = p[l][s] / v
                    } else
                        for (l = s; l < d; l++) p[l][s] = 0;
                    p[s][s] += 1
                }
                for (i *= x, c = h - 1; - 1 != c; c += -1)
                    for (var E = 0; E < 50; E++) {
                        var M = !1;
                        for (u = c; - 1 != u; u += -1) {
                            if (Math.abs(f[u]) <= i) {
                                M = !0;
                                break
                            }
                            if (Math.abs(m[u - 1]) <= i) break
                        }
                        if (!M) {
                            a = 0, S = 1;
                            var I = u - 1;
                            for (s = u; s < c + 1 && (y = S * f[s], f[s] = a * f[s], !(Math.abs(y) <= i)); s++)
                                for (v = m[s], b = n(y, v), m[s] = b, a = v / b, S = -y / b, l = 0; l < d; l++) w = p[l][I], _ = p[l][s], p[l][I] = w * a + _ * S, p[l][s] = -w * S + _ * a
                        }
                        if (_ = m[c], u == c) {
                            if (_ < 0)
                                for (m[c] = -_, l = 0; l < h; l++) g[l][c] = -g[l][c];
                            break
                        }
                        if (E >= 49) throw "Error: no convergence.";
                        for (x = m[u], w = m[c - 1], v = f[c - 1], b = f[c], y = ((w - _) * (w + _) + (v - b) * (v + b)) / (2 * b * w), v = n(y, 1), y = y < 0 ? ((x - _) * (x + _) + b * (w / (y - v) - b)) / x : ((x - _) * (x + _) + b * (w / (y + v) - b)) / x, a = 1, S = 1, s = u + 1; s < c + 1; s++) {
                            for (v = f[s], w = m[s], b = S * v, v *= a, _ = n(y, b), f[s - 1] = _, a = y / _, S = b / _, y = x * a + v * S, v = -x * S + v * a, b = w * S, w *= a, l = 0; l < h; l++) x = g[l][s - 1], _ = g[l][s], g[l][s - 1] = x * a + _ * S, g[l][s] = -x * S + _ * a;
                            for (_ = n(y, b), m[s - 1] = _, a = y / _, S = b / _, y = a * v + S * w, x = -S * v + a * w, l = 0; l < d; l++) w = p[l][s - 1], _ = p[l][s], p[l][s - 1] = w * a + _ * S, p[l][s] = -w * S + _ * a
                        }
                        f[u] = 0, f[c] = y, m[c] = x
                    }
                for (s = 0; s < m.length; s++) m[s] < i && (m[s] = 0);
                for (s = 0; s < h; s++)
                    for (l = s - 1; l >= 0; l--)
                        if (m[l] < m[s]) {
                            for (a = m[l], m[l] = m[s], m[s] = a, c = 0; c < p.length; c++) r = p[c][s], p[c][s] = p[c][l], p[c][l] = r;
                            for (c = 0; c < g.length; c++) r = g[c][s], g[c][s] = g[c][l], g[c][l] = r;
                            s = l
                        } return {
                    U: p,
                    S: m,
                    V: g
                }
            }, e
    }), define("math/parsenode/optimizedregression", ["require", "pjs", "./base"], function(e) {
        return e("pjs")(e("./base"), function(e, t) {
            e.init = function(e, n, r, i, o) {
                t.init.call(this), this.parameters = e, this.residuals = n, this.statistics = r, this.model = i, this.isModelValid = o.isModelValid, this.residualVariable = o.residualVariable, this.residualSuggestionId = o.residualSuggestionId, this.shouldSuggestLogMode = o.shouldSuggestLogMode, this._exports = [this.residualVariable];
                for (var a in e) e.hasOwnProperty(a) && this._exports.push(a);
                this.mergeDependencies(i)
            }, e.getCompiledFunction = function() {
                return this.model.getCompiledFunction.apply(this.model, arguments)
            }, e.getCompiledDerivative = function() {
                return this.model.getCompiledDerivative.apply(this.model, arguments)
            }, e.evaluate = function() {
                return this.model.evaluate.apply(this.model, arguments)
            }
        })
    }), define("math/parsenode/regression", ["require", "pjs", "./base", "numeric", "math/distance", "math/builtin", "graphing/label", "math/errormsg", "./error", "./optimizedregression", "./list", "./functioncall", "./identifier", "./constant", "./freevariable", "./expressionTypes", "math/types"], function(e) {
        var t = e("pjs"),
            n = e("./base"),
            r = e("numeric"),
            i = e("math/distance"),
            o = e("math/builtin"),
            a = e("graphing/label"),
            s = e("math/errormsg"),
            l = e("./error"),
            c = e("./optimizedregression"),
            u = e("./list"),
            p = e("./functioncall"),
            d = e("./identifier"),
            h = e("./constant"),
            f = e("./freevariable"),
            m = e("./expressionTypes"),
            g = e("math/types"),
            y = m.Subtract;
        return t(n, function(e, t, n) {
            function m(e, t) {
                for (var n = 0, r = e.apply(void 0, t), i = 0; i < r.length; i++) {
                    var o = r[i];
                    n += o * o
                }
                return n / r.length
            }

            function v(e, t) {
                return e.apply(void 0, t)
            }

            function b(e, t) {
                for (var n = [], r = 0; r < e.length; r++) {
                    var i = e[r].apply(void 0, t);
                    n.push(i)
                }
                return n
            }

            function x(e) {
                for (var t = e.getDependencies(), n = {}, r = 0; r < t.length; r++) n[t[r]] = e.boundDomain(t[r]);
                return n
            }

            function w(e, t, n, i, o) {
                for (var a = [], s = 0; s < t.length; s++) a.push(0);
                for (var l = b(t, a), c = r.LU(r.dot(l, r.transpose(l)), !0), u = a, p = 0; p < 2; p++) {
                    var d = v(e, a),
                        h = r.neg(r.LUsolve(c, r.dot(l, d)));
                    if (!r.all(r.isFinite(h))) return M(e, t, n, {}, i, o);
                    a = r.add(u, h), u = a
                }
                return {
                    solution: a,
                    MSE: m(e, a)
                }
            }

            function _(e, t, n, i) {
                for (var o = n, a = m(e, o), s = .001, l = [], c = 0; c < t.length; c++) l.push(1);
                for (var u = 0, p = !1, d = b(t, o), h = o, f = a; u < i && !p;) {
                    var g = v(e, o),
                        y = r.transpose(d),
                        x = r.dot(d, y);
                    if (!r.all(r.isFinite(g))) break;
                    if (!r.all(r.isFinite(x))) break;
                    for (var w = !1; u < i && !p && !w;) {
                        u += 1;
                        var _ = r.LU(r.add(x, r.diag(r.mul(s, l))), !0),
                            S = r.neg(r.LUsolve(_, r.dot(d, g))),
                            E = S;
                        if (o = r.add(h, E), a = m(e, o), p = r.all(r.eq(o, h))) {
                            h = o, f = a;
                            break
                        }
                        var M;
                        if (isFinite(a) && a <= f && (M = b(t, o), w = r.all(r.isFinite(M))), w) {
                            d = M, h = o, f = a, s *= .1, s = Math.max(1e-64, s);
                            break
                        }
                        s *= 2
                    }
                }
                return {
                    solution: h,
                    MSE: m(e, h)
                }
            }

            function S(e, t) {
                if (!t) return e;
                if ("known" !== t.type) return e;
                var n = t.bounds;
                if (n[0] === -1 / 0 && n[1] === 1 / 0) return e;
                if (n[0] === -1 / 0) return n[1] - Math.exp(-e);
                if (n[1] === 1 / 0) return n[0] + Math.exp(e);
                var r = 2 * e / (1 + i.hypot(1, 2 * e));
                return .5 * (n[1] * (r + 1) - n[0] * (r - 1))
            }

            function E(e, t, n) {
                for (var r = [], i = 0; i < e.length; i++) {
                    for (var o = e[i], a = [], s = 0; s < o.length; s++) a.push(S(o[s], n[t[s]]));
                    r.push(a)
                }
                return r
            }

            function M(e, t, n, r, o, a) {
                var s, l = [];
                for (o || (o = {}), a || (a = {}), s = 0; s < n.length; s++) {
                    var c = n[s];
                    a[c] && isFinite(a[c].asValue()) ? l.push(+a[c].asValue()) : o.hasOwnProperty(c) && isFinite(o[c]) ? l.push(+o[c]) : l.push(1)
                }
                var u = E(L(30, n), n, r),
                    p = A(e, t, u, 3, 5),
                    d = A(e, t, p, 60, 1),
                    h = _(e, t, d[0], 250),
                    f = _(e, t, l, 100);
                return isFinite(f.MSE) ? f.MSE < h.MSE ? f : i.approx(f.MSE, h.MSE, 8) ? f : h : h
            }

            function I(e, t, n, r) {
                var i, o, a = t.getDependencies();
                for (o = 0; o < a.length; o++)
                    if (!e.validRegressionParameter(a[o])) throw s.invalidRegressionParameter(a[o]);
                var l = t.getCompiledFunction(a).fn;
                if (a.length) {
                    var c = {};
                    for (o = 1; o < a.length; o++) c[a[o]] = f(a[0]);
                    var u = t.substitute(c).isLinear(a[0]),
                        p = [];
                    for (o = 0; o < a.length; o++) p.push(t.takeDerivative(a[o]).getCompiledFunction(a).fn);
                    i = u ? w(l, p, a, n, r) : M(l, p, a, x(t), n, r)
                } else i = {
                    solution: [],
                    MSE: m(l, [])
                };
                var d = {};
                for (o = 0; o < a.length; o++) d[a[o]] = h(i.solution[o]);
                return d
            }

            function T(e, t) {
                return w(function(n, r) {
                    for (var i = [], o = 0; o < e.length; o++) i.push(t[o] - (n * e[o] + r));
                    return i
                }, [function() {
                    return e.map(function(e) {
                        return -e
                    })
                }, function() {
                    return e.map(function() {
                        return -1
                    })
                }], [0, 0])
            }

            function C(e, t) {
                var n = e.length,
                    r = e[0],
                    o = t[0],
                    a = e[n - 1],
                    s = t[n - 1];
                if (!(isFinite(r) && isFinite(a) && isFinite(o) && isFinite(s))) return !1;
                if (s - o == 0) return !1;
                var l = a - r;
                if (0 === l) return !1;
                for (var c = 1; c < n - 1; c++) {
                    var u = e[c],
                        p = t[c],
                        d = (s * (u - r) + o * (a - u)) / l;
                    if (!i.approx(p, d, 5)) return !1
                }
                return !0
            }

            function k(e, t, n, r) {
                var i = Object.create(n);
                for (var o in r) r.hasOwnProperty(o) && (i[o] = r[o]);
                return u.wrap(t.getConcreteTree(e, i))
            }
            e.init = function(e, n) {
                t.init.call(this), this._lhs = e, this.isLhsSimple = e instanceof d || e instanceof u, this._logLhs = p("ln", [e]), this._rhs = n, this._difference = y([e, n]), this._logDifference = y([p("ln", [e]), p("ln", [n])]), this.mergeDependencies(e, n)
            }, e.isRegression = !0, e.chooseResidualVariable = function(e) {
                if (this.userData && this.userData.residualVariable) {
                    var t = a.latexToIdentifier(this.userData.residualVariable);
                    if (!e[t]) return t
                }
                for (var n, r = this.getDependencies(), i = 0; i < r.length; i++) {
                    var o = r[i].match(/_(.*)/);
                    if (o && (n = "e_" + o[1], !e[n])) return n
                }
                for (var s = 1;;) {
                    if (n = "e_" + s, !e[n]) return n;
                    s++
                }
            }, e.getRHSModel = function(e, t, n) {
                function r(e, t, n) {
                    for (var r = 0; r < i.length; r++)
                        if (i[r].node === this) return i[r].tmpVar;
                    var a = f(this.tmpVar()),
                        s = this.getConcreteTree(e, t);
                    return s.getDependencies().length && (o = !1), i.push({
                        node: this,
                        tmpVar: a,
                        symbol: a._symbol,
                        concrete: s
                    }), a
                }
                var i = [],
                    o = !0,
                    a = {
                        List: r,
                        TableColumn: r,
                        Range: r
                    },
                    s = this._rhs.tryGetConcreteTree(e, t, a);
                return {
                    node: s,
                    substituted: s.isError ? s : s.substitute(n),
                    replacedNodes: i,
                    isValid: o
                }
            };
            var D = [18.9, .105, .0113, .089, 4.414, 34.32, 8.61, .373, .06, .149, 1.84, 9.26, 5, .7, .2, 1.13, 2.61, 1.89, 1, .007, 30, 120, 1500, 4e-4, 7.23, -1, -.0081, -.03, -28.6, -1.71, -.4, -6.94, -.777],
                P = function(e) {
                    return D[503 * e % D.length]
                },
                L = function(e, t) {
                    for (var n, r = [], i = t.length, o = 0; o < e; o++) {
                        n = [];
                        for (var a = 0; a < i; a++) n[a] = 0 === o ? 0 : 1 === o ? 1 : P(o * i + a);
                        r.push(n)
                    }
                    return r
                },
                A = function(e, t, n, r, i) {
                    for (var o = [], a = 0; a < n.length; a++) o.push({
                        soln: _(e, t, n[a], r),
                        startingVals: n[a]
                    });
                    o.sort(function(e, t) {
                        return isNaN(e.soln.MSE) ? 1 : isNaN(t.soln.MSE) ? -1 : e.soln.MSE - t.soln.MSE
                    });
                    for (var s = [], l = 0; l < i; l++) s.push(o[l].startingVals);
                    return s
                };
            e.computeStatistics = function(e, t, n, r, a) {
                if (n.getDependencies().length) throw s.optimizationError();
                var l = 0;
                n.eachElement(function(e) {
                    var t = e.asValue();
                    l += t * t
                });
                var c = l / n.length;
                if (!isFinite(c)) throw s.optimizationError();
                if (e.getDependencies().length > 0) return {
                    RMSE: Math.sqrt(c)
                };
                var p = g.isList(e.valueType) ? o.varp(e.asValue()) : 0;
                if (e.getDependencies().length || !isFinite(p) || p <= 0 || !this.isLhsSimple) return {
                    RMSE: Math.sqrt(c)
                };
                var d = 1 - c / p;
                if (t.isValid && 1 === t.replacedNodes.length) {
                    var h = [],
                        f = [],
                        m = r && (a === O.LINLOG || a === O.LOGLOG);
                    u.eachArgs([t.replacedNodes[0].concrete, e], function(e) {
                        h.push(m ? Math.log(e[0].asValue()) : +e[0].asValue()), f.push(+e[1].asValue())
                    });
                    var y = o.corr(h, f);
                    if (i.approx(T(h, f).MSE, c, 8)) return {
                        r: y,
                        rsquared: y * y
                    }
                }
                return {
                    Rsquared: d
                }
            }, e.getResidualSuggestionId = function(e, t) {
                var n, r = this._rhs.getDependencies();
                for (var i in t)
                    if (t.hasOwnProperty(i) && t[i].concreteTree.isTable && t[i].concreteTree.columns[0]) {
                        var o = t[i].rawTree.columns;
                        if (o && o.length) {
                            var a = o[0].getExports();
                            if (1 === a.length && -1 !== r.indexOf(a[0])) {
                                for (var s = 1; s < o.length; s++)
                                    if (-1 !== o[s].getDependencies().indexOf(e)) return;
                                n = n || i
                            }
                        }
                    } return n || void 0
            };
            var O = {
                NONE: 0,
                LOGLIN: 1,
                LOGLOG: 2,
                LINLOG: 3
            };
            e.linearizingTransformation = function(e, t) {
                if (!this.isLhsSimple) return O.NONE;
                var n = t.substituted;
                if (n.isError) return O.NONE;
                if (n.valueType !== g.Number) return O.NONE;
                var r = n.getDependencies();
                if (1 !== r.length) return O.NONE;
                if (isFinite(t.node.polynomialOrder(r[0]))) return O.NONE;
                var i = n.getCompiledFunction(r).fn,
                    o = t.replacedNodes[0].concrete;
                if (n.valueType !== g.Number) return O.NONE;
                var a = o.mapElements(function(e) {
                    return +e.asValue()
                });
                if (a.length < 3) return O.NONE;
                a.sort(function(e, t) {
                    return e - t
                });
                var s = a.map(i),
                    l = s.map(Math.log),
                    c = a.map(Math.log),
                    p = !0;
                return u.wrap(e).eachElement(function(e) {
                    isFinite(Math.log(+e.asValue())) || (p = !1)
                }), C(a, l) && p ? O.LOGLIN : C(c, l) && p ? O.LOGLOG : C(c, s) ? O.LINLOG : O.NONE
            }, e.optimize = function(e, t, n, r, i) {
                var o = this._lhs.getConcreteTree(e, t),
                    s = this._rhs.getConcreteTree(e, t);
                this.typeCheck([o, s]);
                var l, p = u.wrap(this._difference.getConcreteTree(e, t)),
                    d = I(e, p, this.userData.regressionParameters, r),
                    h = this.getRHSModel(e, t, d),
                    f = k(e, this._difference, t, d),
                    m = this.linearizingTransformation(o, h);
                if (!this.userData.isLogModeRegression || m !== O.LOGLIN && m !== O.LOGLOG) l = this.computeStatistics(o, h, f, this.userData.isLogModeRegression, m);
                else {
                    var g = this._logDifference.getConcreteTree(e, t),
                        y = this._logLhs.getConcreteTree(e, t);
                    d = I(e, g, this.userData.regressionParamters, r), h = this.getRHSModel(e, t, d), f = k(e, this._difference, t, d);
                    var v = k(e, this._logDifference, t, d);
                    l = this.computeStatistics(y, h, v, this.userData.isLogModeRegression, m)
                }
                var b = this.chooseResidualVariable(n),
                    x = this.getResidualSuggestionId(b, i);
                return this.userData.residualVariable = a.identifierToLatex(b), c(d, f, l, h.substituted, {
                    isModelValid: h.isValid,
                    residualVariable: b,
                    residualSuggestionId: x,
                    shouldSuggestLogMode: m !== O.NONE
                })
            }, e.tryOptimize = function() {
                try {
                    return this.optimize.apply(this, arguments)
                } catch (e) {
                    if (e instanceof l) return e;
                    throw e
                }
            }, e.exportTo = function(e, t, n) {
                if (!t.isError) {
                    for (var r in t.parameters) t.parameters.hasOwnProperty(r) && (e.assignmentForbidden(r) || (n[r] = n[r] ? s.multiplyDefined(r) : t.parameters[r]));
                    e.assignmentForbidden(t.residualVariable) || (n[t.residualVariable] = t.residuals)
                }
            }, e.getSliderVariables = function() {
                return []
            }
        })
    }), define("math/parsenode/image", ["require", "pjs", "./base"], function(e) {
        return e("pjs")(e("./base"), function(e, t, n, r) {
            e.isImage = !0, e.init = function(e, n) {
                t.init.call(this), this.center = e.center, this.radianAngle = e.radianAngle, this.width = e.width, this.height = e.height, this.opacity = e.opacity, this.moveStrategy = n, this.mergeDependencies(this.center, this.radianAngle, this.width, this.height, this.opacity)
            }
        })
    }), define("math/parsenode/slider", ["require", "pjs", "./assignment", "./identifier"], function(e) {
        var t = e("pjs"),
            n = e("./assignment"),
            r = e("./identifier");
        return t(n, function(e, t, n, i) {
            e.isSlider = !0, e.init = function(e, n) {
                t.init.call(this, r(e._symbol), e._expression), this.setInputSpan(e._inputSpan), this.sliderAssignment = e, this.sliderMin = n.sliderMin, this.sliderMax = n.sliderMax, this.sliderStep = n.sliderStep, this.sliderMin && this.mergeDependencies(this.sliderMin), this.sliderMax && this.mergeDependencies(this.sliderMax), this.sliderStep && this.mergeDependencies(this.sliderStep)
            }, e.shouldPromoteToSlider = function(e) {
                return !1
            }
        })
    }), define("math/parsenode/table", ["require", "pjs", "./base"], function(e) {
        return e("pjs")(e("./base"), function(e, t) {
            e.init = function(e) {
                t.init.call(this), this.columns = e, this._exports = [], this.mergeDependencies.apply(this, e);
                for (var n = 0; n < e.length; n++) Array.prototype.push.apply(this._exports, e[n].getExports())
            }, e.exportPenalty = 1, e.isTable = !0, e.exportTo = function(e, t, n) {
                for (var r = 0; r < this.columns.length; r++) {
                    var i = this.columns[r].getExports();
                    if (i.length) {
                        var o = i[0];
                        e.assignmentForbidden(o) || n[o] || (t.isError ? n[o] = t : this.columns[r].exportTo(e, t.columns[r], n))
                    }
                }
            }, e.getAllIds = function() {
                return this.columns.map(function(e) {
                    return e.header.userData.id
                })
            }
        })
    }), define("math/parsenode/tablecolumn", ["require", "pjs", "./base", "./list", "./constant", "./identifier"], function(e) {
        var t = e("pjs"),
            n = e("./base"),
            r = e("./list"),
            i = e("./constant"),
            o = e("./identifier");
        return t(n, function(e, t) {
            function a(e) {
                return e.isError ? i(NaN) : e
            }
            e.init = function(e, n, r) {
                t.init.call(this), this.header = e, this.length = n, this.values = r, this.isIndependent = !1, this.registerDependencies(), this._exports = this.computeExports()
            }, e.registerDependencies = function() {
                this.mergeDependencies(this.header), this.mergeDependencies.apply(this, this.values)
            }, e.computeExports = function() {
                return this.header instanceof o ? [this.header._symbol] : []
            }, e.isDiscrete = function(e) {
                return 1 !== this.header.getDependencies().length || 1 !== e.header.getDependencies().length || this.header.getDependencies()[0] !== e.header.getDependencies()[0]
            }, e._exportSymbolsTo = function(e, t, i) {
                if (e.length) {
                    var o = e[0];
                    if (t.isError) i[o] = t;
                    else try {
                        i[o] = r(t.values.map(a))
                    } catch (e) {
                        if (!(e instanceof n)) throw e;
                        i[o] = e
                    }
                }
            }, e.exportTo = function(e, t, n) {
                var r = this.getLegalExports(e);
                this._exportSymbolsTo(r, t, n)
            }, e.exportToLocal = function(e, t) {
                this._exportSymbolsTo(this.getExports(), e, t)
            }
        })
    }), define("math/parsenode/solvedequation", ["require", "pjs", "./base"], function(e) {
        return e("pjs")(e("./base"), function(e, t) {
            e.init = function(e, n) {
                t.init.call(this), this._symbol = e, this._expression = n, this.mergeDependencies(n)
            }, e.getCompiledFunction = function() {
                return this._expression.getCompiledFunction.apply(this._expression, arguments)
            }, e.getCompiledDerivative = function() {
                return this._expression.getCompiledDerivative.apply(this._expression, arguments)
            }, e.evaluate = function() {
                return this._expression.evaluate.apply(this._expression, arguments)
            }
        })
    }), define("math/parsenode/seed", ["require", "pjs", "./expression"], function(e) {
        return e("pjs")(e("./expression"), function(e, t) {
            e.init = function(e) {
                "string" != typeof e && (e = "" + e), this._stringValue = e, t.init.call(this, [])
            }, e.isString = !0, e.getEvalStrings = function() {
                return {
                    statements: [],
                    expression: "'" + this.asValue() + "'"
                }
            }, e.asValue = function() {
                return this._stringValue
            }
        })
    }), define("math/parsenode/extendseed", ["require", "pjs", "./expression"], function(e) {
        return e("pjs")(e("./expression"), function(e, t) {
            e.init = function(e, n) {
                t.init.call(this, n), this.seed = n[0], this.userSeed = n[1], this.tag = e
            }, e.getEvalStrings = function() {
                var e = this.seed.getEvalStrings(),
                    t = this.userSeed.getEvalStrings(),
                    n = [];
                return Array.prototype.push.apply(n, e.statements), Array.prototype.push.apply(n, t.statements), {
                    statements: n,
                    expression: "(" + e.expression + ") + '::" + this.tag + "' + (" + t.expression + ")"
                }
            }, e.copyWithArgs = function(e) {
                return new this.constructor(this.tag, e)
            }
        })
    }), define("parsenodes", ["require", "math/parsenode/expressionTypes", "math/parsenode/base", "math/parsenode/expression", "math/parsenode/scalarexpression", "math/parsenode/error", "math/parsenode/constant", "math/parsenode/mixednumber", "math/parsenode/identifier", "math/parsenode/ans", "math/parsenode/freevariable", "math/parsenode/dummyindex", "math/parsenode/list", "math/parsenode/range", "math/parsenode/broadcast", "math/parsenode/listaccess", "math/parsenode/dotaccess", "math/parsenode/dotaccessexponent", "math/parsenode/orderedpair", "math/parsenode/movablepoint", "math/parsenode/orderedpairaccess", "math/parsenode/polygon", "math/parsenode/basecomparator", "math/parsenode/comparator", "math/parsenode/doubleinequality", "math/parsenode/repeatedoperator", "math/parsenode/sum", "math/parsenode/product", "math/parsenode/integral", "math/parsenode/functioncall", "math/parsenode/seededfunctioncall", "math/parsenode/functionexponent", "math/parsenode/functionfactorial", "math/parsenode/prime", "math/parsenode/piecewise", "math/parsenode/derivative", "math/parsenode/builtinfunction", "math/parsenode/nativefunction", "math/parsenode/typedfunction", "math/parsenode/reducerfunction", "math/parsenode/parametrizedreducerfunction", "math/parsenode/doublereducerfunction", "math/parsenode/toplevelfunction", "math/parsenode/distribution", "math/parsenode/histogram", "math/parsenode/dotplot", "math/parsenode/boxplot", "math/parsenode/ttest", "math/parsenode/independent-ttest", "math/parsenode/stats", "math/parsenode/assignment", "math/parsenode/functiondefinition", "math/parsenode/equation", "math/parsenode/regression", "math/parsenode/image", "math/parsenode/slider", "math/parsenode/table", "math/parsenode/tablecolumn", "math/parsenode/solvedequation", "math/parsenode/optimizedregression", "math/parsenode/seed", "math/parsenode/extendseed"], function(e) {
        var t = e("math/parsenode/expressionTypes"),
            n = {
                Base: e("math/parsenode/base"),
                Expression: e("math/parsenode/expression"),
                ScalarExpression: e("math/parsenode/scalarexpression"),
                Error: e("math/parsenode/error"),
                Constant: e("math/parsenode/constant"),
                MixedNumber: e("math/parsenode/mixednumber"),
                Identifier: e("math/parsenode/identifier"),
                Ans: e("math/parsenode/ans"),
                FreeVariable: e("math/parsenode/freevariable"),
                DummyIndex: e("math/parsenode/dummyindex"),
                List: e("math/parsenode/list"),
                Range: e("math/parsenode/range"),
                Broadcast: e("math/parsenode/broadcast"),
                ListAccess: e("math/parsenode/listaccess"),
                DotAccess: e("math/parsenode/dotaccess"),
                DotAccessExponent: e("math/parsenode/dotaccessexponent"),
                OrderedPair: e("math/parsenode/orderedpair"),
                MovablePoint: e("math/parsenode/movablepoint"),
                OrderedPairAccess: e("math/parsenode/orderedpairaccess"),
                Polygon: e("math/parsenode/polygon"),
                BaseComparator: e("math/parsenode/basecomparator"),
                Comparator: e("math/parsenode/comparator"),
                DoubleInequality: e("math/parsenode/doubleinequality"),
                RepeatedOperator: e("math/parsenode/repeatedoperator"),
                Sum: e("math/parsenode/sum"),
                Product: e("math/parsenode/product"),
                Integral: e("math/parsenode/integral"),
                FunctionCall: e("math/parsenode/functioncall"),
                SeededFunctionCall: e("math/parsenode/seededfunctioncall"),
                FunctionExponent: e("math/parsenode/functionexponent"),
                FunctionFactorial: e("math/parsenode/functionfactorial"),
                Prime: e("math/parsenode/prime"),
                Piecewise: e("math/parsenode/piecewise"),
                Derivative: e("math/parsenode/derivative"),
                BuiltInFunction: e("math/parsenode/builtinfunction"),
                NativeFunction: e("math/parsenode/nativefunction"),
                TypedFunction: e("math/parsenode/typedfunction"),
                ReducerFunction: e("math/parsenode/reducerfunction"),
                ParametrizedReducerFunction: e("math/parsenode/parametrizedreducerfunction"),
                DoubleReducerFunction: e("math/parsenode/doublereducerfunction"),
                TopLevelFunction: e("math/parsenode/toplevelfunction"),
                Distribution: e("math/parsenode/distribution"),
                Histogram: e("math/parsenode/histogram"),
                DotPlot: e("math/parsenode/dotplot"),
                BoxPlot: e("math/parsenode/boxplot"),
                TTest: e("math/parsenode/ttest"),
                IndependentTTest: e("math/parsenode/independent-ttest"),
                Stats: e("math/parsenode/stats"),
                Assignment: e("math/parsenode/assignment"),
                FunctionDefinition: e("math/parsenode/functiondefinition"),
                Equation: e("math/parsenode/equation"),
                Regression: e("math/parsenode/regression"),
                Image: e("math/parsenode/image"),
                Slider: e("math/parsenode/slider"),
                Table: e("math/parsenode/table"),
                TableColumn: e("math/parsenode/tablecolumn"),
                SolvedEquation: e("math/parsenode/solvedequation"),
                OptimizedRegression: e("math/parsenode/optimizedregression"),
                Seed: e("math/parsenode/seed"),
                ExtendSeed: e("math/parsenode/extendseed")
            };
        for (var r in t) n[r] = t[r];
        for (var i in n) n.hasOwnProperty(i) && "Comparator" !== i && "BuiltInFunction" !== i && (n[i].prototype.type = i);
        for (var o in n.Comparator) n.Comparator.hasOwnProperty(o) && (n.Comparator[o].prototype.type = "Comparator['" + o + "']");
        for (var a in n.BuiltInFunction) n.BuiltInFunction.hasOwnProperty(a) && (n.BuiltInFunction[a].prototype.type = "BuiltInFunction['" + a + "']");
        return n
    }), define("math/parser/char-codes", ["require", "exports"], function(e, t) {
        "use strict";

        function n(e) {
            return 48 <= e && e <= 57
        }

        function r(e) {
            return 97 <= e && e <= 122
        }

        function i(e) {
            return 65 <= e && e <= 90
        }

        function o(e) {
            return r(e) || i(e)
        }

        function a(e) {
            return 92 === e
        }

        function s(e) {
            return 46 === e
        }

        function l(e) {
            return 39 === e
        }

        function c(e) {
            if (9 <= e && e <= 13) return !0;
            if (8192 <= e && e <= 8202) return !0;
            switch (e) {
                case 32:
                case 160:
                case 5760:
                case 8232:
                case 8233:
                case 8239:
                case 8287:
                case 12288:
                case 65279:
                    return !0;
                default:
                    return !1
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.isDigit = n, t.isLowerCaseLetter = r, t.isUpperCaseLetter = i, t.isLetter = o, t.isBackslash = a, t.isDot = s, t.isSingleQuote = l, t.isWhitespace = c
    }), define("math/parser/latex-lexer", ["require", "exports", "./char-codes", "./input-span"], function(e, t, n, r) {
        "use strict";

        function i(e, t) {
            return r.joinSpans(e.token.span, t.prevSpan)
        }

        function o(e, t, n) {
            return {
                type: e,
                span: t,
                val: n
            }
        }

        function a(e, t, n, r) {
            return {
                input: e,
                prevSpan: t,
                pos: n,
                token: r
            }
        }

        function s(e) {
            return l(e, 0, r.emptySpanAt(e, 0))
        }

        function l(e, t, r) {
            for (; n.isWhitespace(e.charCodeAt(t));) t += 1;
            return a(e, r, t, f(e, t))
        }

        function c(e) {
            return l(e.input, e.token.span.end, e.token.span)
        }

        function u(e) {
            return e.token
        }

        function p(e, t) {
            if (u(e).type !== t) throw "Parse Error: expected " + t + ".";
            return c(e)
        }

        function d(e, t) {
            return u(e).type === t
        }

        function h(e) {
            return e.pos >= e.input.length
        }

        function f(e, t) {
            var i = t;
            if (t >= e.length) return o("End", r.emptySpanAt(e, t), "");
            var a = e.charCodeAt(t);
            if (n.isDigit(a)) {
                var s = r.Span(e, i, t + 1);
                return o("Digit", s, e.charAt(i))
            }
            if (n.isLetter(a)) {
                var s = r.Span(e, i, t + 1);
                return o("Letter", s, e.charAt(i))
            }
            if (n.isBackslash(a)) {
                if (t += 1, n.isLetter(e.charCodeAt(t))) {
                    for (; n.isLetter(e.charCodeAt(t));) t += 1;
                    var s = r.Span(e, i, t),
                        l = r.slice(s),
                        c = m[l] || "Cmd";
                    return o(c, s, l)
                }
                t += 1;
                var s = r.Span(e, i, t),
                    l = r.slice(s);
                return o("EscapedSymbol", s, l)
            }
            if (n.isSingleQuote(a)) {
                for (t += 1; n.isSingleQuote(e.charCodeAt(t));) t += 1;
                if ("^" === e.charAt(t)) {
                    t += 1;
                    var s = r.Span(e, i, t),
                        l = r.slice(s);
                    return o("Primes^", s, l)
                }
                var s = r.Span(e, i, t),
                    l = r.slice(s);
                return o("Primes", s, l)
            }
            var s = r.Span(e, i, t + 1),
                l = e.charAt(i),
                c = g[l] || "Symbol";
            return o(c, s, l)
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.spanStates = i, t.LatexToken = o, t.lex = s, t.advance = c, t.peek = u, t.eat = p, t.isAt = d, t.isDone = h;
        var m = {
                "\\left": "Left",
                "\\right": "Right",
                "\\sqrt": "Sqrt",
                "\\frac": "Frac",
                "\\operatorname": "OperatorName"
            },
            g = {
                "[": "[",
                "]": "]",
                "{": "{",
                "}": "}",
                "^": "^",
                _: "_"
            }
    }), define("math/parser/latex-node", ["require", "exports"], function(e, t) {
        "use strict";

        function n(e, t) {
            return {
                type: "Group",
                span: e,
                args: t
            }
        }

        function r(e, t, n) {
            return {
                type: "Sqrt",
                span: e,
                optArg: t,
                arg: n
            }
        }

        function i(e, t, n) {
            return {
                type: "Frac",
                span: e,
                num: t,
                den: n
            }
        }

        function o(e, t, n, r) {
            return {
                type: "SupSub",
                span: e,
                sup: t,
                sub: n,
                nprimes: r
            }
        }

        function a(e, t, n, r) {
            return {
                type: "LeftRight",
                span: e,
                left: t,
                right: n,
                arg: r
            }
        }

        function s(e, t) {
            return {
                type: "OperatorName",
                span: e,
                arg: t
            }
        }

        function l(e, t) {
            return {
                type: "Symbol",
                span: e,
                val: t
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.Group = n, t.Sqrt = r, t.Frac = i, t.SupSub = o, t.LeftRight = a, t.OperatorName = s, t.Symbol = l
    }), define("math/parser/latex-parser", ["require", "exports", "./latex-lexer", "./input-span", "./latex-node"], function(e, t, n, r, i) {
        "use strict";

        function o(e) {
            switch (e) {
                case "Frac":
                    return 2;
                case "^":
                case "_":
                case "Primes^":
                case "Left":
                case "Frac":
                case "Sqrt":
                case "OperatorName":
                    return 1;
                default:
                    return 0
            }
        }

        function a(e) {
            var t = l(n.lex(e), !1),
                i = t.state,
                o = t.tree;
            if (!n.isDone(i)) throw "Parse error: unexpected " + r.slice(n.peek(i).span) + ".";
            return o
        }

        function s(e, t) {
            return {
                state: e,
                tree: t
            }
        }

        function l(e, t) {
            var r, o = e,
                a = [];
            e: for (; !n.isDone(e);) {
                var l = n.peek(e);
                switch (l.type) {
                    case "Cmd":
                    case "EscapedSymbol":
                    case "Letter":
                    case "Digit":
                    case "Symbol":
                    case "[":
                    case "{":
                    case "^":
                    case "_":
                    case "Primes":
                    case "Primes^":
                    case "Left":
                    case "Frac":
                    case "Sqrt":
                    case "OperatorName":
                    case "]":
                        if ("]" === l.type && t) break e;
                        var u = void 0;
                        if (r = c(e), e = r.state, u = r.tree, "Group" === u.type)
                            for (var p = 0, d = u.args; p < d.length; p++) {
                                var h = d[p];
                                a.push(h)
                            } else a.push(u);
                        break;
                    case "}":
                    case "Right":
                    case "End":
                        break e;
                    default:
                        var f = l.type;
                        throw "Unexpected token type " + f + "."
                }
            }
            var m = n.spanStates(o, e);
            return s(e, i.Group(m, a))
        }

        function c(e) {
            var t, r = n.peek(e);
            switch (r.type) {
                case "Cmd":
                case "EscapedSymbol":
                case "Letter":
                case "Digit":
                case "Symbol":
                    return e = n.advance(e), s(e, r);
                case "[":
                case "]":
                    return e = n.advance(e), s(e, i.Symbol(r.span, r.val));
                case "{":
                    e = n.advance(e);
                    var o = void 0;
                    return t = l(e, !1), e = t.state, o = t.tree, e = n.eat(e, "}"), s(e, o);
                case "^":
                case "_":
                case "Primes":
                case "Primes^":
                    return f(e);
                case "Left":
                    return h(e);
                case "Frac":
                    return d(e);
                case "Sqrt":
                    return p(e);
                case "OperatorName":
                    return u(e);
                case "}":
                case "Right":
                    throw "Parse Error: unexpected " + r.val + ".";
                case "End":
                    throw "Parse Error: unexpected end.";
                default:
                    throw "Unexpected token type " + r.type + "."
            }
        }

        function u(e) {
            var t, r = e,
                o = n.peek(e);
            e = n.eat(e, "OperatorName");
            var a;
            t = m(e, o), e = t.state, a = t.tree;
            var l = n.spanStates(r, e);
            return s(e, i.OperatorName(l, a))
        }

        function p(e) {
            var t, r, o = e,
                a = n.peek(e);
            e = n.eat(e, "Sqrt");
            var l;
            n.isAt(e, "[") && (t = g(e), e = t.state, l = t.tree);
            var c;
            r = m(e, a), e = r.state, c = r.tree;
            var u = n.spanStates(o, e);
            return s(e, i.Sqrt(u, l, c))
        }

        function d(e) {
            var t, r, o = e,
                a = n.peek(e);
            e = n.eat(e, "Frac");
            var l;
            t = m(e, a), e = t.state, l = t.tree;
            var c;
            r = m(e, a), e = r.state, c = r.tree;
            var u = n.spanStates(o, e);
            return s(e, i.Frac(u, l, c))
        }

        function h(e) {
            var t, r = e;
            e = n.eat(e, "Left");
            var o = n.peek(e);
            e = n.advance(e);
            var a;
            t = l(e, !1), e = t.state, a = t.tree, e = n.eat(e, "Right");
            var c = n.peek(e);
            e = n.advance(e);
            var u = n.spanStates(r, e);
            return s(e, i.LeftRight(u, o, c, a))
        }

        function f(e) {
            var t, r, o, a, l, c = e,
                u = 0;
            e: for (; !n.isDone(e);) {
                var p = n.peek(e);
                switch (p.type) {
                    case "^":
                        if (e = n.advance(e), a) throw "Parse Error: double superscript.";
                        t = m(e, p), e = t.state, a = t.tree;
                        break;
                    case "_":
                        if (e = n.advance(e), l) throw "Parse Error: double subscript.";
                        r = m(e, p), e = r.state, l = r.tree;
                        break;
                    case "Primes":
                        if (e = n.advance(e), u > 0) throw "Parse Error: double primes.";
                        u = p.val.length;
                        break;
                    case "Primes^":
                        if (e = n.advance(e), u > 0) throw "Parse Error: double primes.";
                        if (a) throw "Parse Error: double superscript";
                        u = p.val.length - 1, o = m(e, p), e = o.state, a = o.tree;
                        break;
                    default:
                        break e
                }
            }
            var d = n.spanStates(c, e);
            return s(e, i.SupSub(d, a, l, u))
        }

        function m(e, t) {
            var a, l, u = o(t.type);
            if (u <= 0) throw new Error("Programming Error: greediness must be greater than 0.");
            var p = o(n.peek(e).type);
            if (p > 0 && p <= u) {
                var d = r.slice(t.span);
                throw "Parse Error: can't use " + r.slice(n.peek(e).span) + " as argument of " + d + ". Use {}."
            }
            return a = c(e), e = a.state, l = a.tree, "Group" !== l.type && (l = i.Group(l.span, [l])), s(e, l)
        }

        function g(e) {
            var t;
            e = n.eat(e, "[");
            var r;
            return t = l(e, !0), e = t.state, r = t.tree, e = n.eat(e, "]"), s(e, r)
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.parse = a
    }), define("math/parser/command-aliases", ["require", "exports", "./char-codes"], function(e, t, n) {
        "use strict";

        function r(e) {
            for (var t = 0; n.isBackslash(e.charCodeAt(t));) t += 1;
            return t > 0 && (e = e.slice(t)), i[e] || e
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var i = {
            mcd: "gcd",
            gcf: "gcd",
            mcm: "lcm",
            signum: "sign",
            stdDevP: "stdevp",
            stddevp: "stdevp",
            stdDev: "stdev",
            stddev: "stdev",
            variance: "var",
            TTest: "ttest",
            TScore: "tscore",
            IndependentTTest: "ittest",
            iTTest: "ittest",
            inverseCdf: "quantile",
            inversecdf: "quantile"
        };
        t.translateCmd = r
    }), define("math/parser/surface-node", ["require", "exports", "./command-aliases"], function(e, t, n) {
        "use strict";

        function r(e, t) {
            return {
                type: "Equals",
                span: e,
                args: t
            }
        }

        function i(e, t, n) {
            return {
                type: "Inequality",
                span: e,
                symbol: t,
                args: n
            }
        }

        function o(e, t, n) {
            return {
                type: "TrailingInequalityPiece",
                span: e,
                symbol: t,
                args: n
            }
        }

        function a(e, t, n) {
            return {
                type: "InequalityChain",
                span: e,
                first: t,
                chain: n
            }
        }

        function s(e, t) {
            return {
                type: "Tilde",
                span: e,
                args: t
            }
        }

        function l(e, t) {
            return {
                type: "Pos",
                span: e,
                args: t
            }
        }

        function c(e, t) {
            return {
                type: "Neg",
                span: e,
                args: t
            }
        }

        function u(e, t) {
            return {
                type: "Add",
                span: e,
                args: t
            }
        }

        function p(e, t) {
            return {
                type: "Sub",
                span: e,
                args: t
            }
        }

        function d(e, t) {
            return {
                type: "Mul",
                span: e,
                args: t
            }
        }

        function h(e, t) {
            return {
                type: "Div",
                span: e,
                args: t
            }
        }

        function f(e, t) {
            return {
                type: "Bang",
                span: e,
                args: t
            }
        }

        function m(e, t) {
            return {
                type: "Call",
                span: e,
                args: t
            }
        }

        function g(e, t) {
            return {
                type: "ImplicitCall",
                span: e,
                args: t
            }
        }

        function y(e, t) {
            return {
                type: "Index",
                span: e,
                args: t
            }
        }

        function v(e, t) {
            return {
                type: "Paren",
                span: e,
                args: t
            }
        }

        function b(e, t) {
            return {
                type: "List",
                span: e,
                args: t
            }
        }

        function x(e, t) {
            return {
                type: "Pipes",
                span: e,
                args: t
            }
        }

        function w(e, t) {
            return {
                type: "Subscript",
                span: e,
                args: t
            }
        }

        function _(e, t) {
            return {
                type: "Superscript",
                span: e,
                args: t
            }
        }

        function S(e, t, n) {
            return {
                type: "Prime",
                span: e,
                nprimes: t,
                args: n
            }
        }

        function E(e, t) {
            return {
                type: "Seq",
                span: e,
                args: t
            }
        }

        function M(e, t) {
            return {
                type: "Sqrt",
                span: e,
                args: t
            }
        }

        function I(e, t) {
            return {
                type: "Nthroot",
                span: e,
                args: t
            }
        }

        function T(e, t) {
            return {
                type: "Frac",
                span: e,
                args: t
            }
        }

        function C(e, t) {
            return {
                type: "Derivative",
                span: e,
                args: t
            }
        }

        function k(e, t) {
            return {
                type: "Integral",
                span: e,
                args: t
            }
        }

        function D(e, t) {
            return {
                type: "EmptyIntegral",
                span: e,
                args: t
            }
        }

        function P(e, t) {
            return {
                type: "Sum",
                span: e,
                args: t
            }
        }

        function L(e, t) {
            return {
                type: "Product",
                span: e,
                args: t
            }
        }

        function A(e, t) {
            return {
                type: "Piecewise",
                span: e,
                args: t
            }
        }

        function O(e) {
            return {
                type: "EmptyPiecewise",
                span: e
            }
        }

        function F(e, t) {
            return {
                type: "Colon",
                span: e,
                args: t
            }
        }

        function q(e, t) {
            return {
                type: "Ellipsis",
                span: e,
                args: t
            }
        }

        function N(e, t) {
            return {
                type: "Dot",
                span: e,
                args: t
            }
        }

        function R(e, t) {
            return {
                type: "PercentOf",
                span: e,
                args: t
            }
        }

        function B(e, t) {
            return {
                type: "Juxt",
                span: e,
                args: t
            }
        }

        function j(e, t) {
            return {
                type: "Letter",
                span: e,
                val: t
            }
        }

        function V(e, t) {
            return {
                type: "Decimal",
                span: e,
                val: t
            }
        }

        function z(e, t) {
            return {
                type: "Cmd",
                span: e,
                val: n.translateCmd(t)
            }
        }

        function U(e, t) {
            return {
                type: "Alphanumeric",
                span: e,
                val: t
            }
        }

        function G(e, t, n, r) {
            return {
                type: "MixedNumber",
                span: e,
                whole: t,
                num: n,
                den: r
            }
        }

        function H(e) {
            if ("Subscript" === e.type) {
                if ("Alphanumeric" !== e.args[1].type) return !1;
                e = e.args[0]
            }
            switch (e.type) {
                case "Cmd":
                case "Letter":
                    return !0;
                default:
                    return !1
            }
        }

        function K(e) {
            return "Superscript" === e.type && H(e.args[0])
        }

        function W(e, t) {
            if ("Letter" !== e.type || "d" !== e.val) return !1;
            if ("Juxt" !== t.type) return !1;
            var n = t.args,
                r = n[0],
                i = n[1];
            return "Letter" === r.type && "d" === r.val && H(i)
        }

        function Y(e) {
            return "Seq" === e.type ? e.args : [e]
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.Equals = r, t.Inequality = i, t.TrailingInequalityPiece = o, t.InequalityChain = a, t.Tilde = s, t.Pos = l, t.Neg = c, t.Add = u, t.Sub = p, t.Mul = d, t.Div = h, t.Bang = f, t.Call = m, t.ImplicitCall = g, t.Index = y, t.Paren = v, t.List = b, t.Pipes = x, t.Subscript = w, t.Superscript = _, t.Prime = S, t.Seq = E, t.Sqrt = M, t.Nthroot = I, t.Frac = T, t.Derivative = C, t.Integral = k, t.EmptyIntegral = D, t.Sum = P, t.Product = L, t.Piecewise = A, t.EmptyPiecewise = O, t.Colon = F, t.Ellipsis = q, t.Dot = N, t.PercentOf = R, t.Juxt = B, t.Letter = j, t.Decimal = V, t.Cmd = z, t.Alphanumeric = U, t.MixedNumber = G, t.isIdentifier = H, t.isSuperscriptedIdentifier = K, t.isDerivative = W, t.unwrapSeq = Y
    }), define("math/parser/surface-node-error", ["require", "exports"], function(e, t) {
        "use strict";

        function n(e, t) {
            return {
                type: "Err",
                span: e,
                error: t
            }
        }

        function r() {
            return {
                type: "UnexpectedParseError"
            }
        }

        function i() {
            return {
                type: "EmptyInput"
            }
        }

        function o() {
            return {
                type: "EmptyGroup"
            }
        }

        function a() {
            return {
                type: "EmptySubscript"
            }
        }

        function s() {
            return {
                type: "EmptySuperscript"
            }
        }

        function l() {
            return {
                type: "EmptyRadical"
            }
        }

        function c() {
            return {
                type: "EmptySquareBracket"
            }
        }

        function u() {
            return {
                type: "EmptyPipe"
            }
        }

        function p() {
            return {
                type: "EmptyRadicand"
            }
        }

        function d() {
            return {
                type: "UnexpectedEnd"
            }
        }

        function h(e) {
            return {
                type: "BinaryOperatorMissingRight",
                val: e
            }
        }

        function f(e) {
            return {
                type: "BinaryOperatorMissingLeft",
                val: e
            }
        }

        function m(e) {
            return {
                type: "UnaryOperatorMissingRight",
                val: e
            }
        }

        function g(e) {
            return {
                type: "UnaryOperatorMissingLeft",
                val: e
            }
        }

        function y(e, t) {
            return {
                type: "MissingCloseDelimiter",
                open: e,
                close: t
            }
        }

        function v(e, t) {
            return {
                type: "UnexpectedCloseDelimiter",
                open: e,
                close: t
            }
        }

        function b() {
            return {
                type: "UnexpectedDifferential"
            }
        }

        function x(e) {
            return {
                type: "UnrecognizedSymbol",
                val: e
            }
        }

        function w(e) {
            return {
                type: "InvalidOperatorName",
                val: e
            }
        }

        function _(e) {
            return {
                type: "InvalidSubscript",
                val: e
            }
        }

        function S(e) {
            return {
                type: "UnexpectedSubscript",
                base: e
            }
        }

        function E(e) {
            return {
                type: "FunctionMissingArgument",
                val: e
            }
        }

        function M() {
            return {
                type: "PercentMissingOf"
            }
        }

        function I() {
            return {
                type: "PrimeWithoutParen"
            }
        }

        function T() {
            return {
                type: "SuperscriptWithPrime"
            }
        }

        function C() {
            return {
                type: "UnexpectedPrime"
            }
        }

        function k() {
            return {
                type: "SumMissingBound"
            }
        }

        function D() {
            return {
                type: "ProductMissingBound"
            }
        }

        function P() {
            return {
                type: "MissingBound"
            }
        }

        function L() {
            return {
                type: "IntegralMissingBound"
            }
        }

        function A() {
            return {
                type: "SumMissingBody"
            }
        }

        function O() {
            return {
                type: "ProductMissingBody"
            }
        }

        function F() {
            return {
                type: "IntegralMissingBody"
            }
        }

        function q() {
            return {
                type: "DerivativeMissingBody"
            }
        }

        function N() {
            return {
                type: "IntegralMissingDifferential"
            }
        }

        function R() {
            return {
                type: "DifferentialWithSuperscript"
            }
        }

        function B() {
            return {
                type: "FractionMissingNumerator"
            }
        }

        function j() {
            return {
                type: "FractionMissingDenominator"
            }
        }

        function V() {
            return {
                type: "FractionEmpty"
            }
        }

        function z(e) {
            return {
                type: "AdjacentNumbers",
                args: e
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.Err = n, t.UnexpectedParseError = r, t.EmptyInput = i, t.EmptyGroup = o, t.EmptySubscript = a, t.EmptySuperscript = s, t.EmptyRadical = l, t.EmptySquareBracket = c, t.EmptyPipe = u, t.EmptyRadicand = p, t.UnexpectedEnd = d, t.BinaryOperatorMissingRight = h, t.BinaryOperatorMissingLeft = f, t.UnaryOperatorMissingRight = m, t.UnaryOperatorMissingLeft = g, t.MissingCloseDelimiter = y, t.UnexpectedCloseDelimiter = v, t.UnexpectedDifferential = b, t.UnrecognizedSymbol = x, t.InvalidOperatorName = w, t.InvalidSubscript = _, t.UnexpectedSubscript = S, t.FunctionMissingArgument = E, t.PercentMissingOf = M, t.PrimeWithoutParen = I, t.SuperscriptWithPrime = T, t.UnexpectedPrime = C, t.SumMissingBound = k, t.ProductMissingBound = D, t.MissingBound = P, t.IntegralMissingBound = L, t.SumMissingBody = A, t.ProductMissingBody = O, t.IntegralMissingBody = F, t.DerivativeMissingBody = q, t.IntegralMissingDifferential = N, t.DifferentialWithSuperscript = R, t.FractionMissingNumerator = B, t.FractionMissingDenominator = j, t.FractionEmpty = V, t.AdjacentNumbers = z
    }), define("math/parser/expression-token-tables", ["require", "exports"], function(e, t) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var n = {
            "+": !0,
            "-": !0,
            "*": !0,
            "/": !0,
            "!": !0,
            "(": !0,
            ")": !0,
            "\\{": !0,
            "\\}": !0,
            "(|": !0,
            "|)": !0,
            "[": !0,
            "]": !0,
            ",": !0,
            "...": !0,
            ":": !0,
            "=": !0,
            ">": !0,
            "<": !0,
            ">=": !0,
            "<=": !0,
            "~": !0,
            "%": !0,
            ".": !0,
            Letter: !0,
            Decimal: !0,
            Cmd: !0,
            Differential: !0,
            End: !0,
            Trig: !0,
            Ln: !0,
            Log: !0,
            Int: !0,
            Sum: !0,
            Prod: !0,
            Err: !0
        };
        t.commandTable = {
            "\\lt": "<",
            "\\gt": ">",
            "\\le": "<=",
            "\\ge": ">=",
            "\\ldots": "...",
            "\\sim": "~",
            "\\cdot": "*",
            "\\times": "*",
            "\\div": "/",
            "\\ln": "Ln",
            "\\log": "Log",
            "\\int": "Int",
            "\\sum": "Sum",
            "\\prod": "Prod",
            "\\backslash": "Err"
        };
        for (var r = ["sin", "cos", "tan", "cot", "sec", "csc"], i = 0, o = r; i < o.length; i++) {
            var a = o[i];
            t.commandTable["\\" + a] = "Trig", t.commandTable["\\" + a + "h"] = "Trig", t.commandTable["\\arc" + a] = "Trig", t.commandTable["\\arc" + a + "h"] = "Trig"
        }
        t.symbolTable = {
            "+": "+",
            "-": "-",
            "*": "*",
            "/": "/",
            "!": "!",
            "(": "(",
            ")": ")",
            "[": "[",
            "]": "]",
            ",": ",",
            "...": "...",
            ":": ":",
            "=": "=",
            ">=": ">=",
            "<=": "<=",
            ">": ">",
            "<": "<",
            "~": "~",
            ".": "."
        }, t.escapedSymbolTable = {
            "\\{": "\\{",
            "\\}": "\\}",
            "\\%": "%"
        }, t.leftTable = {
            "|": "(|",
            "\\{": "\\{",
            "[": "[",
            "(": "("
        }, t.rightTable = {
            "|": "|)",
            "\\}": "\\}",
            "]": "]",
            ")": ")"
        }, t.allTokenTypes = Object.keys(n)
    }),
    define("math/parser/expression-lexer", ["require", "exports", "./expression-token-tables", "./input-span", "./input-span", "./surface-node"], function(e, t, n, r, i, o) {
        "use strict";

        function a(e, t, n, r, i, o, a, s) {
            return {
                opts: e,
                input: t,
                prevSpan: n,
                startIndex: r,
                endIndex: i,
                token: o,
                mode: a,
                parent: s
            }
        }

        function s(e, t) {
            return r.joinSpans(e.token.span, t.prevSpan)
        }

        function l(e, t) {
            return r.joinSpans(e, t.prevSpan)
        }

        function c(e) {
            return r.emptySpanAt(e.token.span.input, e.token.span.start)
        }

        function u(e, t) {
            return {
                type: "Differential",
                span: e,
                val: t
            }
        }

        function p(e, t, n) {
            return {
                type: e,
                span: t,
                val: n
            }
        }

        function d(e, t) {
            return h(t, e, 0, r.emptySpanAt(e.span.input, e.span.start), void 0, void 0)
        }

        function h(e, t, r, i, o, s) {
            var l = t.args;
            if (r > l.length && s) return m(s, i);
            r = C(l, r);
            var c = S(t, r, o),
                u = c.token,
                d = c.endIndex;
            if ("End" === u.type && s) {
                var h = s.input.args[s.startIndex];
                if ("LeftRight" === h.type) {
                    var f = h.right;
                    return a(e, t, i, r, d, p(n.rightTable[f.val] || "Err", f.span, f.val), o, s)
                }
            } else "Int" === u.type ? o = y(o) : "Differential" === u.type && (o = v(o));
            return a(e, t, i, r, d, u, o, s)
        }

        function f(e) {
            var t = e.input.args[e.startIndex],
                n = e.token.span;
            return t && "LeftRight" === t.type ? h(e.opts, t.arg, 0, n, e.mode, e) : m(e, n)
        }

        function m(e, t) {
            var n = e.input,
                r = e.endIndex,
                i = e.mode,
                o = e.parent;
            return h(e.opts, n, r + 1, t, i, o)
        }

        function g(e) {
            return e.token
        }

        function y(e) {
            return {
                type: "integral",
                parent: e
            }
        }

        function v(e) {
            if (!e || "integral" !== e.type) throw new Error("Programming Error: expected lexer to be in integral mode.");
            return e.parent
        }

        function b(e, t) {
            return g(e).type === t
        }

        function x(e) {
            return e.startIndex >= e.input.args.length
        }

        function w(e, t) {
            return t.token.span.start > e.token.span.start
        }

        function _(e, t) {
            return {
                token: t,
                endIndex: e
            }
        }

        function S(e, t, i) {
            if (t >= e.args.length) return _(t, p("End", r.emptySpanAt(e.span.input, e.span.end), ""));
            var o = e.args[t];
            switch (o.type) {
                case "Sqrt":
                case "Frac":
                case "SupSub":
                    return _(t, o);
                case "Letter":
                    if (!i || "integral" !== i.type) return _(t, o);
                    if ("d" != o.val) return _(t, o);
                    var a = S(e, t + 1, i),
                        s = a.endIndex,
                        l = a.token;
                    if ("Letter" === l.type || "Cmd" === l.type) {
                        return _(s, u(r.joinSpans(o.span, l.span), l.val))
                    }
                    return _(t, o);
                case "LeftRight":
                    var c = o.left;
                    return _(t, p(n.leftTable[c.val] || "Err", r.joinSpans(o.span, c.span), c.val));
                case "OperatorName":
                    for (var d = [], h = 0, f = o.arg.args; h < f.length; h++) {
                        var m = f[h];
                        if ("Letter" !== m.type) return _(t, p("Err", o.span, r.slice(o.arg.span)));
                        d.push(m.val)
                    }
                    var g = "\\" + d.join("");
                    return _(t, p(n.commandTable[g] || "Cmd", o.span, g));
                case "Cmd":
                    return _(t, p(n.commandTable[o.val] || "Cmd", o.span, o.val));
                case "EscapedSymbol":
                    return _(t, p(n.escapedSymbolTable[o.val] || "Err", o.span, o.val));
                case "Symbol":
                    if (k(o)) return E(e, t);
                    return _(t, p(n.symbolTable[o.val] || "Err", o.span, o.val));
                case "Digit":
                    return M(e, t);
                default:
                    throw "Unexpected atom " + o.type + "."
            }
        }

        function E(e, t) {
            var i = e.args[t];
            if ("Symbol" !== i.type || "." !== i.val) throw new Error("Programming Error: expected '.'");
            if (t + 2 < e.args.length && k(e.args[t + 1]) && k(e.args[t + 2])) {
                var o = r.joinSpans(i.span, e.args[t + 2].span);
                return _(t + 2, p("...", o, r.slice(o)))
            }
            var a = C(e.args, t + 1);
            return a < e.args.length && "Digit" === e.args[a].type ? M(e, t) : _(t, p(n.symbolTable[i.val] || "Err", i.span, i.val))
        }

        function M(e, t) {
            var n = I(e, t);
            if (n) return n;
            for (var i = e.args, o = e.args[t].span, a = [], s = !1, l = !1; t < i.length; t++) {
                var c = C(i, t);
                if (c >= i.length) break;
                var u = i[c];
                if ("Digit" === u.type) t = c, s = !0, a.push(u.val);
                else {
                    if (l || !k(u)) break;
                    if (c + 1 < i.length && k(e.args[c + 1])) break;
                    t = c, l = !0, a.push(".")
                }
            }
            if (!s) throw new Error("Programming Error: decimals must have at least one digit.");
            return _(t - 1, p("Decimal", r.joinSpans(o, e.args[t - 1].span), a.join("")))
        }

        function I(e, t) {
            for (var n = e.args, i = n[t].span, a = []; t < n.length; t++) {
                var s = C(n, t);
                if (s >= n.length) break;
                var l = n[s];
                if ("Digit" !== l.type) break;
                t = s, a.push(l.val)
            }
            if (!((t = C(n, t)) >= n.length)) {
                var c = n[t];
                if ("Frac" === c.type) {
                    for (var u = [], p = [], d = 0, h = c.num.args; d < h.length; d++) {
                        var l = h[d];
                        if (!T(l)) {
                            if ("Digit" !== l.type) return;
                            u.push(l.val)
                        }
                    }
                    for (var f = 0, m = c.den.args; f < m.length; f++) {
                        var l = m[f];
                        if (!T(l)) {
                            if ("Digit" !== l.type) return;
                            p.push(l.val)
                        }
                    }
                    var g = r.joinSpans(i, c.span);
                    return _(t, o.MixedNumber(g, a.join(""), u.join(""), p.join("")))
                }
            }
        }

        function T(e) {
            switch (e.type) {
                case "Sqrt":
                case "Frac":
                case "SupSub":
                case "LeftRight":
                case "OperatorName":
                case "Symbol":
                case "Letter":
                case "Digit":
                    return !1;
                case "Cmd":
                    return "\\space" === e.val;
                case "EscapedSymbol":
                    return "\\ " === e.val || "\\:" === e.val || "\\," === e.val || "\\;" === e.val;
                default:
                    throw "Unexpected atom " + e.type + "."
            }
        }

        function C(e, t) {
            for (; t < e.length && T(e[t]);) t += 1;
            return t
        }

        function k(e) {
            return "Symbol" === e.type && "." === e.val
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.Span = i.Span, t.spanStates = s, t.joinState = l, t.emptySpanAtState = c, t.lex = d, t.lexAt = h, t.advance = f, t.peek = g, t.beginIntegral = y, t.endIntegral = v, t.isAt = b, t.isDone = x, t.didAdvance = w
    }), define("math/parser/precspec", ["require", "exports", "./expression-token-tables"], function(e, t, n) {
        "use strict";

        function r(e) {
            return {
                type: "initial",
                tokenType: e
            }
        }

        function i(e) {
            return {
                type: "l",
                tokenType: e
            }
        }

        function o(e) {
            return {
                type: "r",
                tokenType: e
            }
        }

        function a(e) {
            return {
                type: "la",
                tokenType: e
            }
        }

        function s(e) {
            return {
                type: "ra",
                tokenType: e
            }
        }

        function l(e, t) {
            for (var r = 0, i = n.allTokenTypes; r < i.length; r++) {
                var o = i[r];
                if (void 0 === t[o]) throw new Error("Programming Error: token " + o + " must be a assigned a " + e + " precedence")
            }
        }

        function c(e, t, n, r) {
            if (void 0 !== t[n]) throw new Error("Programming Error: duplicate " + e + " entry for token " + n + ".");
            t[n] = r
        }

        function u(e) {
            function t(e) {
                return a[e]
            }

            function n(e) {
                return o[e]
            }

            function r(e) {
                var n = i[e];
                return void 0 === n ? t(e) : n
            }
            for (var i = {}, o = {}, a = {}, s = 0; s < e.length; s++)
                for (var u = e[s], p = 0, d = u; p < d.length; p++) {
                    var h = d[p],
                        f = h.type,
                        m = h.tokenType;
                    switch (f) {
                        case "initial":
                            c("initial", i, m, s);
                            break;
                        case "l":
                            c("left", o, m, s);
                            break;
                        case "r":
                            c("right", a, m, s);
                            break;
                        case "la":
                            c("left", o, m, s), c("right", a, m, s);
                            break;
                        case "ra":
                            c("left", o, m, s), c("right", a, m, s - 1)
                    }
                }
            return l("left", o), l("right", a), {
                rightPrec: t,
                leftPrec: n,
                initialPrec: r
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.initial = r, t.l = i, t.r = o, t.la = a, t.ra = s, t.precSpec = u
    }), define("math/parser/expression-parser", ["require", "exports", "tslib", "./surface-node", "./surface-node-error", "./input-span", "./expression-lexer", "./precspec"], function(e, t, n, r, i, o, a, s) {
        "use strict";

        function l(e, t) {
            var r = t ? n.__assign({}, L, t) : L,
                o = c(e, r);
            return "Err" === o.type && "EmptyGroup" === o.error.type ? i.Err(o.span, i.EmptyInput()) : o
        }

        function c(e, t) {
            var n = a.lex(e, t);
            if (a.isDone(n)) return i.Err(a.spanStates(n, n), i.EmptyGroup());
            var r = p(n, 0),
                o = r.state,
                s = r.tree;
            return "Err" === s.type || a.isDone(o) ? s : M(o).tree
        }

        function u(e, t) {
            return {
                state: e,
                tree: t
            }
        }

        function p(e, t) {
            var n, r, i, o = e;
            if (n = h(e), e = n.state, i = n.tree, "Err" === i.type) return u(e, i);
            if (!a.didAdvance(o, e)) throw new Error("Programming Error: parseInitial did not advance state.");
            for (; !a.isDone(e);) {
                var s = void 0;
                if (s = a.isAt(e, "(") && !m(i) ? D("(") : k(a.peek(e).type), t >= s) break;
                var l = e;
                if (r = f(e, i), e = r.state, i = r.tree, "Err" === i.type) return u(e, i);
                if (!a.didAdvance(l, e)) throw new Error("Programming Error: parseSuccessor did not advance state.")
            }
            return u(e, i)
        }

        function d(e) {
            return "UnexpectedDifferential" === e.type || "UnexpectedCloseDelimiter" === e.type || "UnexpectedEnd" === e.type || "BinaryOperatorMissingLeft" === e.type
        }

        function h(e) {
            var t, n, o, s, l, h, f, m, g, y, b, I, T, C, D, L, A, O, F, q = e,
                N = a.peek(e),
                R = P(N.type);
            switch (N.type) {
                case "+":
                    if (e = a.advance(e), t = p(e, R), e = t.state, F = t.tree, "Err" === F.type) {
                        if (!d(F.error)) return u(e, F);
                        var B = a.spanStates(q, e),
                            j = i.Err(B, i.UnaryOperatorMissingRight(N.val));
                        return u(e, j)
                    }
                    return u(e, r.Pos(a.spanStates(q, e), [F]));
                case "-":
                    if (e = a.advance(e), n = p(e, R), e = n.state, F = n.tree, "Err" === F.type) {
                        if (!d(F.error)) return u(e, F);
                        var B = a.spanStates(q, e),
                            j = i.Err(B, i.UnaryOperatorMissingRight(N.val));
                        return u(e, j)
                    }
                    return u(e, r.Neg(a.spanStates(q, e), [F]));
                case "(":
                    return _(e);
                case "\\{":
                    return e = a.advance(e), a.isAt(e, "\\}") ? (e = a.advance(e), u(e, r.EmptyPiecewise(a.spanStates(q, e)))) : (o = p(e, R), e = o.state, F = o.tree, s = E(q, e, F, "\\{", "\\}"), e = s.state, F = s.tree, "Err" === F.type ? u(e, F) : u(e, r.Piecewise(a.spanStates(q, e), [F])));
                case "[":
                    if (e = a.advance(e), a.isAt(e, "]")) {
                        e = a.advance(e);
                        var B = a.spanStates(q, e);
                        return u(e, i.Err(B, i.EmptySquareBracket()))
                    }
                    return l = p(e, R), e = l.state, F = l.tree, h = E(q, e, F, "[", "]"), e = h.state, F = h.tree, "Err" === F.type ? u(e, F) : u(e, r.List(a.spanStates(q, e), [F]));
                case "(|":
                    if (e = a.advance(e), a.isAt(e, "|)")) {
                        e = a.advance(e);
                        var B = a.spanStates(q, e);
                        return u(e, i.Err(B, i.EmptyPipe()))
                    }
                    return f = p(e, R), e = f.state, F = f.tree, m = E(q, e, F, "(|", "|)"), e = m.state, F = m.tree, "Err" === F.type ? u(e, F) : u(e, r.Pipes(a.spanStates(q, e), [F]));
                case "Frac":
                    e = a.advance(e);
                    var V = c(N.num, e.opts),
                        z = c(N.den, e.opts);
                    if ("Err" === V.type && "EmptyGroup" === V.error.type && "Err" === z.type && "EmptyGroup" === z.error.type) {
                        var B = a.spanStates(q, e),
                            j = i.Err(B, i.FractionEmpty());
                        return u(e, j)
                    }
                    if ("Err" === V.type && "EmptyGroup" === V.error.type) {
                        var B = a.spanStates(q, e),
                            j = i.Err(B, i.FractionMissingNumerator());
                        return u(e, j)
                    }
                    if ("Err" === z.type && "EmptyGroup" === z.error.type) {
                        var B = a.spanStates(q, e),
                            j = i.Err(B, i.FractionMissingDenominator());
                        return u(e, j)
                    }
                    if ("Err" === V.type) return u(e, V);
                    if ("Err" === z.type) return u(e, z);
                    if (r.isDerivative(V, z) && "Juxt" === z.type) {
                        var U = z.args[1],
                            G = void 0;
                        if (g = p(e, k("*") - 1), e = g.state, G = g.tree, "Err" === G.type) {
                            if (d(G.error)) {
                                var B = a.spanStates(q, e);
                                return u(e, i.Err(B, i.DerivativeMissingBody()))
                            }
                            return u(e, G)
                        }
                        return u(e, r.Derivative(a.spanStates(q, e), [U, G]))
                    }
                    return u(e, r.Frac(a.spanStates(q, e), [V, z]));
                case "Sqrt":
                    if (e = a.advance(e), N.optArg) {
                        var H = c(N.optArg, e.opts);
                        if ("Err" === H.type) return "EmptyGroup" === H.error.type ? u(e, i.Err(H.span, i.EmptyRadicand())) : u(e, H);
                        var K = c(N.arg, e.opts);
                        return "Err" === K.type ? "EmptyGroup" === K.error.type ? u(e, i.Err(K.span, i.EmptyRadical())) : u(e, K) : u(e, r.Nthroot(a.spanStates(q, e), [H, K]))
                    }
                    var K = c(N.arg, e.opts);
                    return "Err" === K.type ? "EmptyGroup" === K.error.type ? u(e, i.Err(K.span, i.EmptyRadical())) : u(e, K) : u(e, r.Sqrt(a.spanStates(q, e), [K]));
                case "Trig":
                case "Ln":
                    e = a.advance(e);
                    var W = r.Cmd(a.spanStates(q, e), N.val),
                        Y = 0,
                        X = a.peek(e);
                    if ("SupSub" === X.type) {
                        if (e = a.advance(e), X.sub) {
                            var B = a.spanStates(q, e),
                                j = i.Err(B, i.UnexpectedSubscript(W.val));
                            return u(e, j)
                        }
                        var $ = x(X, e.opts);
                        if ($) {
                            if ("Err" === $.type) return u(e, $);
                            W = r.Superscript(a.spanStates(q, e), [W, $])
                        }
                        Y = X.nprimes
                    }
                    var Q = a.isAt(e, "(");
                    if (Q) {
                        if (y = _(e), e = y.state, F = y.tree, "Err" === F.type) return u(e, F);
                        F = r.Call(a.spanStates(q, e), [W, F.args[0]])
                    } else {
                        if (b = p(e, R - 1), e = b.state, F = b.tree, "Err" === F.type) return d(F.error) ? u(e, i.Err(a.spanStates(q, e), i.FunctionMissingArgument(N.val))) : u(e, F);
                        F = r.ImplicitCall(a.spanStates(q, e), [W, F])
                    }
                    if (Y > 0) {
                        var B = a.spanStates(q, e);
                        if (!Q) {
                            var j = i.Err(B, i.PrimeWithoutParen());
                            return u(e, j)
                        }
                        F = r.Prime(B, Y, [F])
                    }
                    return u(e, F);
                case "Log":
                    e = a.advance(e);
                    var W = r.Cmd(a.spanStates(q, e), N.val),
                        Y = 0,
                        Z = void 0,
                        $ = void 0,
                        X = a.peek(e);
                    if ("SupSub" === X.type && (e = a.advance(e), Z = v(X, e.opts), $ = x(X, e.opts), Y = X.nprimes), Z && "Err" === Z.type) return u(e, Z);
                    if ($ && "Err" === $.type) return u(e, $);
                    var Q = a.isAt(e, "(");
                    if (Q) {
                        if (I = _(e), e = I.state, F = I.tree, "Err" === F.type) return u(e, F);
                        F = F.args[0]
                    } else if (T = p(e, R - 1), e = T.state, F = T.tree, "Err" === F.type) return d(F.error) ? u(e, i.Err(a.spanStates(q, e), i.FunctionMissingArgument(N.val))) : u(e, F);
                    var J = Z ? r.Seq(a.spanStates(q, e), r.unwrapSeq(F).concat(Z)) : F,
                        ee = Z ? r.Cmd(a.spanStates(q, e), "\\logbase") : W;
                    if ($ && (ee = r.Superscript(a.spanStates(q, e), [ee, $])), F = Q ? r.Call(a.spanStates(q, e), [ee, J]) : r.ImplicitCall(a.spanStates(q, e), [ee, J]), Y > 0) {
                        var B = a.spanStates(q, e);
                        if (!Q) {
                            var j = i.Err(B, i.PrimeWithoutParen());
                            return u(e, j)
                        }
                        F = r.Prime(B, Y, [F])
                    }
                    return u(e, F);
                case "Int":
                    e = a.advance(e);
                    var X = a.peek(e);
                    e = a.advance(e);
                    var te = w(X, q, e);
                    if ("Err" === te.type) return "MissingBound" === te.error.type ? u(e, i.Err(te.span, i.IntegralMissingBound())) : u(e, te);
                    var $ = te.sup,
                        Z = te.sub,
                        U = void 0;
                    if (a.isAt(e, "Differential")) return C = S(e), e = C.state, U = C.tree, "Err" === U.type ? u(e, U) : u(e, r.EmptyIntegral(a.spanStates(q, e), [U, Z, $]));
                    if (D = p(e, R), e = D.state, F = D.tree, "Err" === F.type) return d(F.error) ? u(e, i.Err(F.span, i.IntegralMissingBody())) : u(e, F);
                    var ne = F;
                    return a.isAt(e, "Differential") ? (L = S(e), e = L.state, U = L.tree, "Err" === U.type ? u(e, U) : u(e, r.Integral(a.spanStates(q, e), [U, Z, $, ne]))) : u(e, i.Err(a.spanStates(q, e), i.IntegralMissingDifferential()));
                case "Sum":
                    e = a.advance(e);
                    var X = a.peek(e);
                    e = a.advance(e);
                    var te = w(X, q, e);
                    if ("Err" === te.type) return "MissingBound" === te.error.type ? u(e, i.Err(te.span, i.SumMissingBound())) : u(e, te);
                    var $ = te.sup,
                        Z = te.sub;
                    return A = p(e, R), e = A.state, F = A.tree, "Err" === F.type ? d(F.error) ? u(e, i.Err(F.span, i.SumMissingBody())) : u(e, F) : u(e, r.Sum(a.spanStates(q, e), [F, Z, $]));
                case "Prod":
                    e = a.advance(e);
                    var X = a.peek(e);
                    e = a.advance(e);
                    var te = w(X, q, e);
                    if ("Err" === te.type) return "MissingBound" === te.error.type ? u(e, i.Err(te.span, i.ProductMissingBound())) : u(e, te);
                    var $ = te.sup,
                        Z = te.sub;
                    return O = p(e, R), e = O.state, F = O.tree, "Err" === F.type ? d(F.error) ? u(e, i.Err(F.span, i.ProductMissingBody())) : u(e, F) : u(e, r.Product(a.spanStates(q, e), [F, Z, $]));
                case "Cmd":
                    return e = a.advance(e), F = r.Cmd(a.spanStates(q, e), N.val), u(e, F);
                case "Letter":
                    return e = a.advance(e), F = r.Letter(a.spanStates(q, e), N.val), u(e, F);
                case "Decimal":
                    e = a.advance(e);
                    var re = r.Decimal(a.spanStates(q, e), N.val),
                        X = e.token;
                    if ("Decimal" === X.type || "MixedNumber" === X.type) {
                        var ie = e;
                        e = a.advance(e);
                        var B = a.spanStates(q, e),
                            oe = "MixedNumber" === X.type ? X : r.Decimal(a.spanStates(ie, e), X.val);
                        return u(e, i.Err(B, i.AdjacentNumbers([re, oe])))
                    }
                    return u(e, re);
                case "MixedNumber":
                    return e = a.advance(e), u(e, N);
                case "*":
                case "/":
                case ",":
                case "=":
                case ">":
                case "<":
                case ">=":
                case "<=":
                case "~":
                case ":":
                case "...":
                case "%":
                case ".":
                    e = a.advance(e);
                    var B = a.spanStates(q, e),
                        j = i.Err(B, i.BinaryOperatorMissingLeft(N.val));
                    return u(e, j);
                case "!":
                    e = a.advance(e);
                    var B = a.spanStates(q, e),
                        j = i.Err(B, i.UnaryOperatorMissingLeft(N.val));
                    return u(e, j);
                case "SupSub":
                    e = a.advance(e);
                    var ae = "supsub";
                    N.sub ? ae = "subscript" : N.sup ? ae = "superscript" : N.nprimes > 0 && (ae = "prime");
                    var B = a.spanStates(q, e),
                        j = i.Err(B, i.UnaryOperatorMissingLeft(ae));
                    return u(e, j);
                case ")":
                case "\\}":
                case "]":
                case "|)":
                case "Differential":
                    return M(e);
                case "Err":
                    e = a.advance(e);
                    var B = a.spanStates(q, e),
                        j = i.Err(B, i.UnrecognizedSymbol(N.val));
                    return u(e, j);
                case "End":
                    var B = a.spanStates(q, e),
                        j = i.Err(B, i.UnexpectedEnd());
                    return u(e, j);
                default:
                    throw "Unexpected token type " + N.type + "."
            }
        }

        function f(e, t) {
            var n, o, s, l, c, h, f, m, v, w, S, T, C, k, P, L = a.peek(e),
                A = D(L.type);
            switch (L.type) {
                case "+":
                case "-":
                case "*":
                case "/":
                case "=":
                case "~":
                case ":":
                case ".":
                    if (e = a.advance(e), n = p(e, A), e = n.state, P = n.tree, "Err" === P.type) {
                        if (d(P.error)) {
                            var O = a.joinState(t.span, e),
                                F = i.Err(O, i.BinaryOperatorMissingRight(L.val));
                            return u(e, F)
                        }
                        return u(e, P)
                    }
                    return u(e, g(L.type, a.joinState(t.span, e), [t, P]));
                case "%":
                    e = a.advance(e);
                    var q = a.peek(e);
                    if ("Cmd" !== q.type || "of" !== q.val && "\\of" !== q.val) {
                        var F = i.Err(L.span, i.PercentMissingOf());
                        return u(e, F)
                    }
                    if (e = a.advance(e), o = p(e, A), e = o.state, P = o.tree, "Err" === P.type) {
                        if (d(P.error)) {
                            var O = a.joinState(t.span, e),
                                F = i.Err(O, i.BinaryOperatorMissingRight(L.val));
                            return u(e, F)
                        }
                        return u(e, P)
                    }
                    return u(e, r.PercentOf(a.joinState(t.span, e), [t, P]));
                case ">=":
                case "<=":
                case ">":
                case "<":
                    var N = L.type;
                    if (e = a.advance(e), s = y(e, N), e = s.state, N = s.symbol, l = p(e, A), e = l.state, P = l.tree, "Err" === P.type) {
                        if (d(P.error)) {
                            var O = a.joinState(t.span, e),
                                F = i.Err(O, i.BinaryOperatorMissingRight(L.val));
                            return u(e, F)
                        }
                        return u(e, P)
                    }
                    for (var R = r.Inequality(a.joinState(t.span, e), N, [t, P]), B = [], j = a.peek(e).type;
                        ">=" === j || "<=" === j || ">" === j || "<" === j;) {
                        var V = e;
                        if (N = j, e = a.advance(e), c = y(e, N), e = c.state, N = c.symbol, h = p(e, A), e = h.state, P = h.tree, "Err" === P.type) {
                            if (d(P.error)) {
                                var O = a.joinState(t.span, e),
                                    F = i.Err(O, i.BinaryOperatorMissingRight(L.val));
                                return u(e, F)
                            }
                            return u(e, P)
                        }
                        B.push(r.TrailingInequalityPiece(a.spanStates(V, e), N, [P])), j = a.peek(e).type
                    }
                    return B.length ? u(e, r.InequalityChain(a.joinState(t.span, e), R, B)) : u(e, R);
                case "!":
                    return e = a.advance(e), u(e, r.Bang(a.joinState(t.span, e), [t]));
                case "[":
                    var V = e;
                    if (e = a.advance(e), a.isAt(e, "]")) {
                        e = a.advance(e);
                        var O = a.spanStates(V, e);
                        return u(e, i.Err(O, i.EmptySquareBracket()))
                    }
                    return f = p(e, A), e = f.state, P = f.tree, m = E(V, e, P, "[", "]"), e = m.state, P = m.tree, "Err" === P.type ? u(e, P) : u(e, r.Index(a.joinState(t.span, e), [t, P]));
                case "Sqrt":
                case "Frac":
                case "Letter":
                case "Cmd":
                case "Trig":
                case "Ln":
                case "Log":
                case "Sum":
                case "Int":
                case "Prod":
                case "Decimal":
                case "MixedNumber":
                case "\\{":
                case "(|":
                    return v = p(e, A), e = v.state, P = v.tree, "Err" === P.type ? u(e, P) : u(e, r.Juxt(a.joinState(t.span, e), [t, P]));
                case "(":
                    if (r.isIdentifier(t)) {
                        if (w = _(e), e = w.state, P = w.tree, "Err" === P.type) return u(e, P);
                        var O = a.joinState(t.span, e);
                        return u(e, r.Call(O, [t, P.args[0]]))
                    }
                    if ("Prime" === t.type && r.isIdentifier(t.args[0])) {
                        if (S = _(e), e = S.state, P = S.tree, "Err" === P.type) return u(e, P);
                        var O = a.joinState(t.span, e);
                        return u(e, r.Prime(O, t.nprimes, [r.Call(O, [t.args[0], P.args[0]])]))
                    }
                    return T = p(e, A), e = T.state, P = T.tree, "Err" === P.type ? u(e, P) : u(e, r.Juxt(a.joinState(t.span, e), [t, P]));
                case "SupSub":
                    e = a.advance(e);
                    var z = b(L),
                        U = x(L, e.opts);
                    if (z && "Err" === z.type) return u(e, z);
                    if (U && "Err" === U.type) return u(e, U);
                    if (z && (t = r.Subscript(a.joinState(t.span, e), [t, z])), U && (t = r.Superscript(a.joinState(t.span, e), [t, U])), L.nprimes > 0) {
                        var O = a.joinState(t.span, e);
                        if (!r.isIdentifier(t)) {
                            var F = i.Err(O, i.UnexpectedPrime());
                            return u(e, F)
                        }
                        t = r.Prime(O, L.nprimes, [t])
                    }
                    return u(e, t);
                case ",":
                    for (var G = [t]; a.isAt(e, ",") && (e = a.advance(e), !a.isAt(e, "...")) && (!e.opts.trailingComma || !I(e));) {
                        if (C = p(e, A), e = C.state, P = C.tree, "Err" === P.type) {
                            if (d(P.error)) {
                                var O = a.joinState(t.span, e),
                                    F = i.Err(O, i.BinaryOperatorMissingRight(L.val));
                                return u(e, F)
                            }
                            return u(e, P)
                        }
                        G.push(P)
                    }
                    return u(e, r.Seq(a.joinState(t.span, e), G));
                case "...":
                    if (e = a.advance(e), a.isAt(e, ",") && (e = a.advance(e)), k = p(e, A), e = k.state, P = k.tree, "Err" === P.type) {
                        if (d(P.error)) {
                            var O = a.joinState(t.span, e),
                                F = i.Err(O, i.BinaryOperatorMissingRight(L.val));
                            return u(e, F)
                        }
                        return u(e, P)
                    }
                    return u(e, r.Ellipsis(a.joinState(t.span, e), [t, P]));
                case "]":
                case ")":
                case "\\}":
                case "|)":
                case "Differential":
                    return M(e);
                case "Err":
                    return p(e, A);
                case "End":
                    var O = a.spanStates(e, e),
                        F = i.Err(O, i.UnexpectedEnd());
                    return u(e, F);
                default:
                    throw "Unexpected token type " + L.type + "."
            }
        }

        function m(e) {
            return !!r.isIdentifier(e) || !("Prime" !== e.type || !r.isIdentifier(e.args[0]))
        }

        function g(e, t, n) {
            switch (e) {
                case "+":
                    return r.Add(t, n);
                case "-":
                    return r.Sub(t, n);
                case "*":
                    return r.Mul(t, n);
                case "/":
                    return r.Div(t, n);
                case "=":
                    return r.Equals(t, n);
                case "~":
                    return r.Tilde(t, n);
                case ":":
                    return r.Colon(t, n);
                case ".":
                    return r.Dot(t, n);
                default:
                    throw "Unexpected token type " + e + "."
            }
        }

        function y(e, t) {
            if (!a.isAt(e, "=")) return {
                state: e,
                symbol: t
            };
            switch (t) {
                case ">":
                    e = a.advance(e), t = ">=";
                    break;
                case "<":
                    e = a.advance(e), t = "<="
            }
            return {
                state: e,
                symbol: t
            }
        }

        function v(e, t) {
            if (e.sub) {
                var n = e.sub,
                    r = c(n, t);
                return "Err" === r.type && "EmptyGroup" === r.error.type ? i.Err(r.span, i.EmptySubscript()) : r
            }
        }

        function b(e) {
            if (e.sub) {
                var t = e.sub;
                if (0 === t.args.length) return i.Err(t.span, i.EmptySubscript());
                for (var n = [], a = 0, s = t.args; a < s.length; a++) {
                    var l = s[a];
                    if ("Digit" !== l.type && "Letter" !== l.type) {
                        var c = l.span;
                        return i.Err(c, i.InvalidSubscript(o.slice(c)))
                    }
                    n.push(l.val)
                }
                return r.Alphanumeric(t.span, n.join(""))
            }
        }

        function x(e, t) {
            if (e.sup) {
                var n = c(e.sup, t);
                return "Err" === n.type ? "EmptyGroup" === n.error.type ? i.Err(n.span, i.EmptySuperscript()) : n : e.nprimes > 0 ? i.Err(e.span, i.SuperscriptWithPrime()) : n
            }
        }

        function w(e, t, n) {
            if ("SupSub" !== e.type) {
                var r = a.spanStates(t, n);
                return i.Err(r, i.MissingBound())
            }
            if (e.nprimes > 0) {
                var r = a.spanStates(t, n);
                return i.Err(r, i.UnexpectedPrime())
            }
            var o = v(e, n.opts),
                s = x(e, n.opts);
            if (!o || "Err" === o.type && "EmptySubscript" === o.error.type || !s || "Err" === s.type && "EmptySuperscript" === s.error.type) {
                var r = a.spanStates(t, n);
                return i.Err(r, i.MissingBound())
            }
            return "Err" === o.type ? o : "Err" === s.type ? s : {
                type: "Bounds",
                sup: s,
                sub: o
            }
        }

        function _(e) {
            var t, n, i = e,
                o = a.peek(e),
                s = P(o.type);
            if (!a.isAt(e, "(")) throw new Error("Programming Error: expected '(' at start of parseParen.");
            if (e = a.advance(e), a.isAt(e, ")")) {
                var l = r.Seq(a.emptySpanAtState(e), []);
                e = a.advance(e);
                var c = a.spanStates(i, e);
                return u(e, r.Paren(c, [l]))
            }
            var d;
            return t = p(e, s), e = t.state, d = t.tree, n = E(i, e, d, "(", ")"), e = n.state, d = n.tree, "Err" === d.type ? u(e, d) : u(e, r.Paren(a.spanStates(i, e), [d]))
        }

        function S(e) {
            var t = e,
                n = a.peek(e);
            if ("Differential" !== n.type) throw new Error("Programming Error: expected differential");
            e = a.advance(e);
            var o = r.Cmd(n.span, n.val),
                s = a.peek(e);
            if ("SupSub" === s.type) {
                e = a.advance(e);
                var l = a.spanStates(t, e),
                    c = b(s);
                if (c) {
                    if ("Err" === c.type) return u(e, c);
                    o = r.Subscript(l, [o, c])
                }
                if (s.sup) return u(e, i.Err(l, i.DifferentialWithSuperscript()));
                if (s.nprimes > 0) return u(e, i.Err(l, i.UnexpectedPrime()))
            }
            return u(e, o)
        }

        function E(e, t, n, r, o) {
            if ("Err" === n.type && "UnexpectedEnd" !== n.error.type) return u(t, n);
            if ("Err" === n.type || !a.isAt(t, o)) {
                var s = a.spanStates(e, t);
                return u(t, i.Err(s, i.MissingCloseDelimiter(r, o)))
            }
            return t = a.advance(t), u(t, n)
        }

        function M(e) {
            var t = e;
            switch (a.peek(e).type) {
                case ")":
                    e = a.advance(e);
                    var n = a.spanStates(t, e);
                    return u(e, i.Err(n, i.UnexpectedCloseDelimiter("(", ")")));
                case "]":
                    e = a.advance(e);
                    var n = a.spanStates(t, e);
                    return u(e, i.Err(n, i.UnexpectedCloseDelimiter("[", "]")));
                case "\\}":
                    e = a.advance(e);
                    var n = a.spanStates(t, e);
                    return u(e, i.Err(n, i.UnexpectedCloseDelimiter("\\{", "\\}")));
                case "|)":
                    e = a.advance(e);
                    var n = a.spanStates(t, e);
                    return u(e, i.Err(n, i.UnexpectedCloseDelimiter("|", "|")));
                case "Differential":
                    e = a.advance(e);
                    var n = a.spanStates(t, e);
                    return u(e, i.Err(n, i.UnexpectedDifferential()));
                default:
                    e = a.advance(e);
                    var n = a.spanStates(t, e);
                    return u(e, i.Err(n, i.UnexpectedParseError()))
            }
        }

        function I(e) {
            return a.isAt(e, ")") || a.isAt(e, "]") || a.isAt(e, "\\}")
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var T = [
                [s.initial("("), s.la(")"), s.initial("\\{"), s.la("\\}"), s.r("["), s.la("]"), s.initial("(|"), s.la("|)"), s.la("Differential"), s.la("End")],
                [s.ra("...")],
                [s.la(",")],
                [s.ra(":")],
                [s.la("="), s.la(">"), s.la("<"), s.la(">="), s.la("<="), s.la("~")],
                [s.la("+"), s.la("-")],
                [s.la("*"), s.la("/"), s.la("Decimal"), s.la("MixedNumber"), s.la("Letter"), s.la("Cmd"), s.la("%"), s.r("("), s.la("\\{"), s.la("(|"), s.la("Frac"), s.la("Sqrt"), s.la("Trig"), s.la("Ln"), s.la("Log"), s.ra("Int"), s.ra("Sum"), s.ra("Prod")],
                [s.initial("+"), s.initial("-")],
                [s.la("!")],
                [s.la("SupSub")],
                [s.l("["), s.la(".")],
                [s.l("(")],
                [s.la("Err")]
            ],
            C = s.precSpec(T),
            k = C.leftPrec,
            D = C.rightPrec,
            P = C.initialPrec,
            L = {
                trailingComma: !1
            };
        t.parse = l
    }), define("math/inverses", [], function() {
        var e = {};
        return ["sin", "cos", "tan", "cot", "sec", "csc", "sinh", "cosh", "tanh", "coth", "sech", "csch"].forEach(function(t) {
            e[t] = "arc" + t, e["arc" + t] = t
        }), e
    }), define("math/parser/lower", ["require", "exports", "math/inverses", "math/errormsg", "tslib", "./input-span", "./surface-node", "../maybe-rational"], function(e, t, n, r, i, o, a, s) {
        "use strict";

        function l(e, t) {
            return u(e, t)
        }

        function c(e, t) {
            for (var n = [], r = 0; r < t.length; r++) n.push(h(e, t[r]));
            return n
        }

        function u(e, t) {
            return e.setInput(p(e, t), t.span)
        }

        function p(e, t) {
            var n = e.nodes;
            switch (t.type) {
                case "Equals":
                    var i = t.args,
                        o = i[0],
                        s = i[1];
                    if ("Call" === o.type) {
                        var l = o.args,
                            u = l[0],
                            p = l[1],
                            m = a.unwrapSeq(p);
                        if (a.isIdentifier(u) && m.every(a.isIdentifier)) return n.FunctionDefinition(h(e, u), c(e, m), h(e, s))
                    } else if (a.isIdentifier(o)) return n.Assignment(h(e, o), h(e, s));
                    return n.Equation(h(e, o), h(e, s));
                case "Tilde":
                    var g = c(e, t.args),
                        o = g[0],
                        s = g[1];
                    return n.Regression(o, s);
                case "Inequality":
                    return _(e, t);
                case "InequalityChain":
                    if (t.chain.length > 1) throw r.inequalityChainTooLong();
                    var y = t.first,
                        v = y.symbol,
                        b = y.args,
                        x = b[0],
                        w = b[1],
                        S = t.chain[0],
                        E = S.symbol,
                        M = S.args[0];
                    return a.isIdentifier(w) ? n.DoubleInequality([h(e, x), v, h(e, w), E, h(e, M)]) : _(e, t);
                case "Seq":
                    if (!t.args.every(d)) throw r.malformedPoint();
                    return n.List(c(e, t.args));
                case "Call":
                    var I = t.args,
                        T = I[0],
                        C = I[1];
                    if ("Cmd" === T.type) switch (T.val) {
                        case "polygon":
                            return n.Polygon(c(e, a.unwrapSeq(C)));
                        case "histogram":
                            return n.Histogram(c(e, a.unwrapSeq(C)));
                        case "dotplot":
                            return n.DotPlot(c(e, a.unwrapSeq(C)));
                        case "boxplot":
                            return n.BoxPlot(c(e, a.unwrapSeq(C)));
                        case "ttest":
                            return n.TTest(c(e, a.unwrapSeq(C)));
                        case "ittest":
                            return n.IndependentTTest(c(e, a.unwrapSeq(C)));
                        case "stats":
                            return n.Stats(c(e, a.unwrapSeq(C)));
                        default:
                            return f(e, t)
                    }
                    return f(e, t);
                default:
                    return f(e, t)
            }
        }

        function d(e) {
            if ("Paren" !== e.type) return !1;
            var t = e.args[0];
            return "Seq" === t.type && 2 === t.args.length
        }

        function h(e, t) {
            return e.setInput(f(e, t), t.span)
        }

        function f(e, t) {
            var n = e.nodes;
            switch (t.type) {
                case "Pos":
                    return f(e, t.args[0]);
                case "Neg":
                    for (var i = -1, l = t.args[0];;)
                        if ("Pos" === l.type || "Paren" === l.type) l = l.args[0];
                        else {
                            if ("Neg" !== l.type) break;
                            l = l.args[0], i *= -1
                        } switch (l.type) {
                        case "Decimal":
                            var u = E(l);
                            return n.Constant(-1 === i ? s.neg(u) : u);
                        case "MixedNumber":
                            var u = M(l);
                            return n.MixedNumber(-1 === i ? s.neg(u) : u);
                        default:
                            return -1 === i ? n.Negative([h(e, l)]) : f(e, l)
                    }
                    case "Add":
                        return n.Add(c(e, t.args));
                    case "Sub":
                        return n.Subtract(c(e, t.args));
                    case "Mul":
                        return n.Multiply(c(e, t.args));
                    case "Div":
                        return n.Divide(c(e, t.args));
                    case "Bang":
                        var p = t.args[0];
                        return "Call" === p.type ? n.FunctionFactorial(c(e, p.args)) : n.FunctionCall("\\factorial", c(e, t.args));
                    case "PercentOf":
                        return n.PercentOf(c(e, t.args));
                    case "Call":
                        return b(e, t);
                    case "ImplicitCall":
                        return S(t), b(e, t);
                    case "Dot":
                        var d = t.args[1],
                            m = c(e, t.args),
                            g = m[0],
                            y = m[1];
                        if ("Cmd" === d.type && "random" === d.val) {
                            var v = o.emptySpanAt(d.span.input, d.span.end),
                                w = e.setInput(k(e), v);
                            y = e.setInput(n.SeededFunctionCall(y, [w]), d.span)
                        }
                        return n.DotAccess([g, y]);
                    case "Prime":
                        var _ = t.args[0];
                        if ("Call" === _.type) {
                            var C = _.args,
                                P = C[0],
                                L = C[1],
                                A = a.unwrapSeq(L).length;
                            if ("Cmd" === P.type && "logbase" === P.val) {
                                if (2 !== A) throw r.primedFunctionArity()
                            } else if (1 !== A) throw r.primedFunctionArity();
                            return n.Prime(t.nprimes, c(e, t.args))
                        }
                        throw "ImplicitCall" === _.type ? r.primeWithoutParen() : r.unexpectedPrime();
                    case "Index":
                        return n.ListAccess(c(e, t.args));
                    case "Paren":
                        var O = t.args[0];
                        if ("Seq" === O.type) {
                            if (2 === O.args.length) return n.OrderedPair(c(e, O.args));
                            throw 0 === O.args.length ? r.emptyParen() : r.nonPairTuple()
                        }
                        return f(e, O);
                    case "List":
                        var F = t.args[0];
                        if ("Ellipsis" === F.type) {
                            var q = F.args,
                                N = q[0],
                                R = q[1];
                            return n.Range([n.List(c(e, a.unwrapSeq(N))), n.List(c(e, a.unwrapSeq(R)))])
                        }
                        return n.List(c(e, a.unwrapSeq(F)));
                    case "Pipes":
                        return n.FunctionCall("\\abs", c(e, t.args));
                    case "Subscript":
                        var B = t.args,
                            j = B[0],
                            V = B[1];
                        if (0 === V.val.length) throw r.emptySubscript();
                        var z = void 0;
                        switch (j.type) {
                            case "Letter":
                            case "Cmd":
                                z = j.val;
                                break;
                            default:
                                throw r.unexpectedSubscript()
                        }
                        return n.Identifier(z + "_" + V.val);
                    case "Superscript":
                        var U = t.args,
                            j = U[0],
                            G = U[1];
                        return "Call" !== j.type || "Seq" === j.args[1].type || I(j) ? "Dot" === j.type ? n.DotAccessExponent(c(e, [j.args[0], j.args[1], G])) : n.Exponent(c(e, t.args)) : n.FunctionExponent(c(e, [j.args[0], j.args[1], G]));
                    case "Sqrt":
                        return n.FunctionCall("sqrt", c(e, t.args));
                    case "Nthroot":
                        return n.FunctionCall("nthroot", c(e, [t.args[1], t.args[0]]));
                    case "Frac":
                        return n.Divide(c(e, t.args));
                    case "Derivative":
                        var H = c(e, t.args);
                        if (!a.isIdentifier(t.args[0])) throw r.parseError();
                        return n.Derivative(H[0], [H[1]]);
                    case "Integral":
                        var K = t.args,
                            W = K[0],
                            Y = K[1],
                            X = K[2],
                            $ = K[3],
                            H = c(e, [W, Y, X, $]);
                        return n.Integral(H);
                    case "EmptyIntegral":
                        var Q = c(e, t.args),
                            W = Q[0],
                            Z = Q[1],
                            X = Q[2],
                            $ = n.Constant(s.maybeRational(1, 1));
                        return n.Integral([W, Z, X, $]);
                    case "Sum":
                        var J = t.args,
                            ee = J[0],
                            te = J[1],
                            X = J[2];
                        if ("Equals" != te.type) throw r.incorrectSumLowerBound();
                        if (!a.isIdentifier(te.args[0])) throw r.incorrectSumLowerBound();
                        var H = c(e, [te.args[0], te.args[1], X]),
                            ne = h(D(e, H[0]), ee);
                        return n.Sum(H.concat(ne));
                    case "Product":
                        var re = t.args,
                            ee = re[0],
                            ie = re[1],
                            X = re[2];
                        if ("Equals" != ie.type) throw r.incorrectProductLowerBound();
                        if (!a.isIdentifier(ie.args[0])) throw r.incorrectProductLowerBound();
                        var H = c(e, [ie.args[0], ie.args[1], X]),
                            ne = h(D(e, H[0]), ee);
                        return n.Product(H.concat(ne));
                    case "Juxt":
                        return n.Multiply(c(e, t.args));
                    case "Letter":
                        return n.Identifier(t.val);
                    case "Cmd":
                        var oe = t.val;
                        if ("ans" === oe) {
                            if (void 0 === e.currentIndex) throw r.badAnsContext();
                            return n.Ans("ans_{" + (e.currentIndex - 1) + "}")
                        }
                        if ("approx" === oe) throw r.unrecognizedSymbol(oe);
                        return n.Identifier(oe);
                    case "Decimal":
                        return n.Constant(E(t));
                    case "MixedNumber":
                        return n.MixedNumber(M(t));
                    case "Piecewise":
                        return x(e, t);
                    case "EmptyPiecewise":
                        if (!n.Piecewise.empty) throw r.featureUnavailable();
                        return n.Piecewise.empty();
                    case "Equals":
                        throw r.unexpectedSymbol("=");
                    case "Inequality":
                    case "InequalityChain":
                        throw r.unexpectedInequality();
                    case "Tilde":
                        throw r.unexpectedSymbol("~");
                    case "Seq":
                        throw r.unexpectedSymbol(",");
                    case "Colon":
                        throw r.unexpectedSymbol(":");
                    case "Ellipsis":
                        throw r.unexpectedSymbol("...");
                    case "Err":
                        throw T(t.error);
                    default:
                        throw "Unexpected surface node " + t.type + "."
            }
        }

        function m(e) {
            return n.hasOwnProperty(e)
        }

        function g(e) {
            return "ln" === e || "log" === e || "logbase" === e
        }

        function y(e) {
            return "Decimal" === e.type && "2" === e.val
        }

        function v(e) {
            return "Neg" === e.type && (e = e.args[0], "Decimal" === e.type && "1" === e.val)
        }

        function b(e, t) {
            var i = e.nodes,
                s = t.args,
                l = s[0],
                u = s[1],
                p = h(e, l),
                d = a.unwrapSeq(u),
                f = c(e, d);
            if ("Cmd" === l.type && "random" === l.val) {
                var b = o.emptySpanAt(u.span.input, u.span.start),
                    x = e.setInput(k(e), b);
                return i.SeededFunctionCall(p, [x].concat(f))
            }
            if (a.isIdentifier(l)) return i.FunctionCall(p, f);
            if ("Superscript" === l.type) {
                var w = l.args,
                    _ = w[0],
                    S = w[1];
                if ("Cmd" === _.type) {
                    var E = _.val;
                    if (m(E) || g(E)) {
                        if (y(S)) return i.Exponent([i.FunctionCall(E, f), h(e, S)]);
                        if (v(S) && void 0 !== n[E]) return i.FunctionCall(n[E], f);
                        throw m(E) ? r.badTrigExponent(E) : r.badLogExponent("logbase" === E ? "log" : E)
                    }
                }
            }
            return i.Multiply([p, h(e, u)])
        }

        function x(e, t) {
            var n, i = e.nodes,
                o = t.args[0],
                l = a.unwrapSeq(o),
                c = [];
            e: for (n = 0; n < l.length; n++) {
                var u = l[n];
                switch (u.type) {
                    case "Colon":
                        var p = u.args,
                            d = p[0],
                            f = p[1];
                        if (!w(d)) throw r.colonMissingCondition();
                        c.push({
                            condition: _(e, d),
                            if_expr: h(e, f)
                        });
                        break;
                    case "Equals":
                    case "Inequality":
                    case "InequalityChain":
                        c.push({
                            condition: _(e, u),
                            if_expr: i.Constant(s.maybeRational(1, 1))
                        });
                        break;
                    default:
                        break e
                }
            }
            if (0 === n) throw r.piecewiseMissingCondition();
            if (n < l.length - 1) throw r.piecewisePartMissingCondition();
            if (n === l.length - 1 && c.push({
                    condition: i.Constant(!0),
                    if_expr: h(e, l[n])
                }), !i.Piecewise.chain) throw r.featureUnavailable();
            return i.Piecewise.chain(c)
        }

        function w(e) {
            return "Equals" === e.type || "Inequality" === e.type || "InequalityChain" === e.type
        }

        function _(e, t) {
            var n = e.nodes;
            switch (t.type) {
                case "Equals":
                    return n.Comparator["="](c(e, t.args));
                case "Inequality":
                    return n.Comparator[t.symbol](c(e, t.args));
                case "InequalityChain":
                    if (t.chain.length > 1) throw r.inequalityChainTooLong();
                    var i = t.first,
                        s = i.symbol,
                        l = i.args,
                        u = l[0],
                        p = l[1],
                        d = t.chain[0],
                        h = d.symbol,
                        f = d.args[0],
                        m = o.emptySpanAt(t.span.input, t.span.start);
                    return n.And([_(e, a.Inequality(m, s, [u, p])), _(e, a.Inequality(m, h, [p, f]))]);
                default:
                    throw r.parseError()
            }
        }

        function S(e) {
            var t = e.args,
                n = t[0],
                i = t[1];
            if ("Superscript" === n.type && (n = n.args[0]), "Cmd" === n.type && "logbase" === n.val && "Seq" === i.type && 2 === i.args.length) {
                if (!C(i.args[0])) throw r.badImplicitCall("log")
            } else if (!C(i)) {
                if ("Cmd" === n.type) throw r.badImplicitCall(n.val);
                throw r.parseError()
            }
        }

        function E(e) {
            return s.fromDecimalString(e.val)
        }

        function M(e) {
            var t = s.fromDecimalString(e.whole),
                n = s.fromDecimalString(e.num),
                r = s.fromDecimalString(e.den);
            return s.add(t, s.div(n, r))
        }

        function I(e) {
            if ("Call" !== e.type) return !1;
            for (var t = e.args[0];
                "Superscript" === t.type || "Subscript" === t.type || "Prime" === t.type;) t = t.args[0];
            return "Cmd" === t.type && (m(t.val) || g(t.val))
        }

        function T(e) {
            switch (e.type) {
                case "UnexpectedParseError":
                case "MissingBound":
                case "EmptyGroup":
                case "UnexpectedDifferential":
                case "UnexpectedEnd":
                    return r.parseError();
                case "InvalidOperatorName":
                    return r.invalidOperatorName();
                case "UnexpectedCloseDelimiter":
                case "MissingCloseDelimiter":
                    return r.mismatchedBraces(e.open, e.close);
                case "UnrecognizedSymbol":
                    return "." === e.val ? r.unexpectedSymbol(e.val) : r.unrecognizedSymbol(e.val);
                case "EmptyInput":
                    return r.blankExpression();
                case "BinaryOperatorMissingRight":
                case "BinaryOperatorMissingLeft":
                    return r.binaryOperatorMissingOperand("%" === e.val ? "% of" : e.val);
                case "UnaryOperatorMissingLeft":
                    return r.unaryOperatorMissingLeft(e.val);
                case "UnaryOperatorMissingRight":
                    return r.unaryOperatorMissingRight(e.val);
                case "UnexpectedSubscript":
                    return r.cannotSubscript(e.base);
                case "PercentMissingOf":
                    return r.percentMissingOf();
                case "SumMissingBound":
                    return r.sumMissingBound();
                case "ProductMissingBound":
                    return r.productMissingBound();
                case "IntegralMissingBound":
                    return r.integralMissingBound();
                case "SumMissingBody":
                    return r.sumMissingBody();
                case "ProductMissingBody":
                    return r.productMissingBody();
                case "IntegralMissingBody":
                    return r.integralMissingBody();
                case "DerivativeMissingBody":
                    return r.derivativeMissingBody();
                case "IntegralMissingDifferential":
                    return r.integralMissingDifferential();
                case "DifferentialWithSuperscript":
                    return r.differentialWithSuperscript();
                case "FractionMissingNumerator":
                    return r.fractionMissingNumerator();
                case "FractionMissingDenominator":
                    return r.fractionMissingDenominator();
                case "FractionEmpty":
                    return r.fractionEmpty();
                case "EmptySuperscript":
                    return r.emptySuperscript();
                case "EmptySubscript":
                    return r.emptySubscript();
                case "InvalidSubscript":
                    return r.invalidSubscript(e.val);
                case "SuperscriptWithPrime":
                    return r.superscriptWithPrime();
                case "PrimeWithoutParen":
                    return r.primeWithoutParen();
                case "UnexpectedPrime":
                    return r.unexpectedPrime();
                case "EmptyRadical":
                    return r.emptyRadical();
                case "EmptyRadicand":
                    return r.emptyRadicand();
                case "EmptySquareBracket":
                    return r.emptySquareBracket();
                case "EmptyPipe":
                    return r.emptyPipe();
                case "FunctionMissingArgument":
                    return r.wrongArity(e.val, 1, 0);
                case "AdjacentNumbers":
                    var t = e.args[0].val,
                        n = void 0;
                    switch (e.args[1].type) {
                        case "Decimal":
                            n = e.args[1].val;
                            break;
                        case "MixedNumber":
                            n = e.args[1].whole + " " + e.args[1].num + "/" + e.args[1].den;
                            break;
                        default:
                            throw "Unexpected type " + e.args[1].type + " as right member of AdjacentNumbers."
                    }
                    return r.adjacentNumbers(t, n);
                default:
                    throw "Unexpected surface node " + e.type + "."
            }
        }

        function C(e) {
            switch (e.type) {
                case "Letter":
                case "Decimal":
                case "MixedNumber":
                case "Cmd":
                case "EmptyPiecewise":
                    return !0;
                case "Neg":
                    for (var t = e.args[0];;)
                        if ("Pos" === t.type || "Paren" === t.type) t = t.args[0];
                        else {
                            if ("Neg" !== t.type) break;
                            t = t.args[0]
                        } return "Decimal" === t.type || "MixedNumber" === t.type;
                case "Pos":
                case "Paren":
                    return C(e.args[0]);
                case "Juxt":
                case "Mul":
                case "Div":
                    return C(e.args[0]) && C(e.args[1]);
                case "Subscript":
                    return C(e.args[0]);
                case "Superscript":
                case "Frac":
                case "Add":
                case "Sub":
                    return C(e.args[0]) && C(e.args[1]);
                case "Piecewise":
                    var t = e.args[0];
                    return "Equals" === t.type || "Inequality" === t.type || "InequalityChain" === t.type;
                case "Call":
                    var n = e.args,
                        r = n[0],
                        i = n[1];
                    return !a.isIdentifier(r) && !a.isSuperscriptedIdentifier(r) && (C(r) && C(i));
                case "Derivative":
                case "Sqrt":
                case "Nthroot":
                case "Pipes":
                case "Bang":
                    return !1;
                case "Neg":
                case "Equals":
                case "Inequality":
                case "InequalityChain":
                case "Tilde":
                case "ImplicitCall":
                case "Index":
                case "List":
                case "Seq":
                case "Integral":
                case "EmptyIntegral":
                case "Sum":
                case "Product":
                case "Colon":
                case "Ellipsis":
                case "Dot":
                case "PercentOf":
                case "Prime":
                    return !1;
                default:
                    throw "Unexpected surface node " + e.type + "."
            }
        }

        function k(e) {
            var t = e.nodes.ExtendSeed("", [e.nodes.Identifier("globalRandomSeed"), e.nodes.Seed(e.nextSeed())]);
            if (!e.seedExtensions) return t;
            for (var n = 0, r = e.seedExtensions; n < r.length; n++) {
                var i = r[n];
                t = e.nodes.ExtendSeed("ro", [t, i])
            }
            return t
        }

        function D(e, t) {
            var n = e.seedExtensions || [];
            return i.__assign({}, e, {
                seedExtensions: n.concat(t)
            })
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.lower = l
    }), define("math/baseparser", ["require", "exports", "math/errormsg", "parsenodes", "math/parser/latex-parser", "math/parser/expression-parser", "math/parser/lower"], function(e, t, n, r, i, o, a) {
        "use strict";

        function s() {
            throw n.featureUnavailable()
        }

        function l(e, t) {
            return e.setInputSpan(t), e
        }

        function c(e, t) {
            if ("string" != typeof e) throw new Error("Type Error: parse can only be called with strings");
            t = t || {};
            var c = r;
            if (t.disabledFeatures) {
                c = Object.create(c);
                for (var u = 0, p = t.disabledFeatures; u < p.length; u++) {
                    var d = p[u];
                    if (!c[d]) throw new Error("Programming Error: " + d + " cannot be disabled because it is not a parsenode.");
                    c[d] = s
                }
            }
            var h = void 0 === t.seedPrefix ? "" : t.seedPrefix,
                f = 0,
                m = function() {
                    var e = h + "::vc" + f;
                    return f += 1, e
                },
                g = {
                    nodes: c,
                    currentIndex: t.index,
                    setInput: l,
                    nextSeed: m
                },
                y = void 0 !== t.trailingComma ? {
                    trailingComma: t.trailingComma
                } : {};
            try {
                var v = i.parse(e),
                    b = o.parse(v, y);
                return a.lower(g, b)
            } catch (e) {
                return e instanceof r.Error ? e : "string" == typeof e ? r.Error(e) : n.parseError()
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.parse = c
    }), define("math/sliders", ["require", "exports"], function(e, t) {
        "use strict";

        function n(e, t) {
            var n = Math.round(1e6 * e) / 1e6;
            return Math.abs(n - e) < t ? n : e
        }

        function r(e) {
            var t = !0,
                n = !0,
                r = !0;
            if (void 0 !== e.hardMin && e.target < e.hardMin && (t = !1), void 0 !== e.hardMax && e.target > e.hardMax && (n = !1), e.step) {
                i({
                    target: e.target,
                    step: e.step,
                    hardMin: t ? e.hardMin : void 0,
                    hardMax: n ? e.hardMax : void 0
                }) !== e.target && (r = !1)
            }
            return {
                min: t,
                max: n,
                step: r
            }
        }

        function i(e) {
            var t = e.target,
                r = e.hardMin,
                i = e.hardMax,
                o = e.step,
                a = 1e-10;
            if (void 0 !== r && void 0 !== i && (a = Math.min(a, Math.abs(i - r) / 1e3)), o && (a = Math.min(a, o / 10)), void 0 !== r && (r = n(r, a)), void 0 !== i && (i = n(i, a)), r > i) return r;
            if (t <= r) return r;
            if (t >= i) return i;
            if (o) {
                var s = void 0 !== r ? r : 0;
                t = o * Math.round((t - s) / o) + s
            }
            var l = n(t, a);
            return o ? t = l : r === l ? t = l : i === l && (t = l), t <= r ? r : t >= i ? i : t
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.roundToReasonableDecimal = n, t.determineWhichLimitsAreCompatibleWithValue = r, t.constrainSliderValueLikeEvaluator = i
    }), define("math/features/getConcreteTree", ["require", "parsenodes", "math/errormsg", "math/types", "graphing/label", "math/distance", "math/maybe-rational", "math/rational-arithmetic-sequence", "math/sliders"], function(e) {
        function t(e, t, n, r) {
            for (var i = [], o = 0; o < e.length; o++) i.push(e[o].getConcreteTree(t, n, r));
            return i
        }

        function n() {
            return this.getDependencies().concat([this._symbol])
        }

        function r(e) {
            return e === f.Distribution || f.isList(e)
        }

        function i(e, t, n, i) {
            var o = i.length - 1,
                a = e[t];
            if (!a) throw h.unexpectedSymbol(".");
            if (a.isError) throw a;
            if (!a.isFunction) throw h.unexpectedSymbol(".");
            if (!a.allowDotCalls) throw h.illegalDotCall(n);
            var s, l = "random" === t;
            if (s = l ? i[1].valueType : i[0].valueType, !r(s)) throw h.dotLHSTypeError("." + n, f.prettyPrint(s));
            if (o < a.dotMinArity) {
                if (l) throw h.randomArity();
                throw h.wrongArity("." + n, a.dotMinArity, o)
            }
            if (o > a.dotMaxArity) {
                if (l) throw h.randomArity();
                throw h.wrongArity("." + n, a.dotMaxArity, o)
            }
        }

        function o(e, n, r, o, a, s) {
            var l = t(r, o, a, s);
            return i(a, e, n, l), a[e].getConcreteInvocationTree(o, a, l, n, s)
        }

        function a(e, t) {
            return e.isError ? e : -1 === t.indexOf(e.valueType) ? h.parseError() : e
        }

        function s(e, t, n) {
            if (!t) return void(n.valids[e] = !0);
            var r = t.getDependencies();
            if (t.isError) n.errors[e] = !0;
            else if (r.length > 0) {
                n.errors[e] = !0;
                for (var i = 0; i < r.length; i++) r[i] === n.exportedSymbol ? n.errors.cycle = !0 : n.missingVars.push(r[i])
            } else n.values[e] = t.asValue();
            n.valids[e] = isFinite(n.values[e]), n.valids[e] || (n.values[e] = void 0)
        }

        function l(e, t, n, r, i) {
            if (n < e.length && !g.approx(i, e.elementAt(n).asValue(), 10)) throw h.nonArithmeticRange();
            if (r - n <= t.length && r - n > 1 && !g.approx(i, t.elementAt(t.length - r + n).asValue(), 10)) throw h.nonArithmeticRange()
        }

        function c(e, t) {
            for (var n = !1, r = !1, i = 0; i < e.length; i++) {
                var o = e[i];
                (o.isList || o.isBroadcast) && (r = !0);
                for (var a = o.getDependencies(), s = 0; s < a.length; s++)
                    if (-1 !== t.indexOf(a[s])) {
                        if (o.isList || o.isBroadcast) return "list"
                    } else n = !0
            }
            return r ? n ? "broadcast" : "list" : "none"
        }

        function u(e) {
            var t, n = [],
                r = [],
                i = [];
            for (t = 0; t < e.length; t++) {
                var o, a = e[t];
                if (a.isList) {
                    for (var s = !1, l = 0; l < i.length; l++)
                        if (a === i[l]) {
                            s = !0, o = d.DummyIndex(r[l]), o.valueType = f.elementType(a.valueType), n.push(o);
                            break
                        } if (!s) {
                        var c = d.Base.prototype.tmpVar();
                        r.push(c), i.push(a), o = d.DummyIndex(c), o.valueType = f.elementType(a.valueType), n.push(o)
                    }
                } else a.isBroadcast ? (Array.prototype.push.apply(r, a._replacedSymbols), Array.prototype.push.apply(i, a._lists), n.push(a._expression)) : n.push(a)
            }
            return {
                replacedArgs: i,
                concreteArgs: n,
                replacedSymbols: r
            }
        }

        function p(e, t, n) {
            if (n && n[this.type]) return n[this.type].call(this, e, t, n);
            if (!t[this._symbol]) throw h.functionUnsupported(this._symbol);
            var r = this.args.map(function(n) {
                return n.getConcreteTree(e, t)
            });
            if (r.length > 0) {
                if (1 === r.length && r.push(d.Constant(1)), r[1].getDependencies().length) throw h.illegalBinWidth(this._symbol).setDependencies(r[1].getDependencies());
                if (r[1].valueType !== f.Number) throw h.illegalBinWidth(this._symbol);
                var i = r[1].asValue();
                if (!isFinite(i) || i <= 0) throw h.illegalBinWidth(this._symbol)
            }
            return this.typeCheck(r), new this.constructor(r)
        }
        var d = e("parsenodes"),
            h = e("math/errormsg"),
            f = e("math/types"),
            m = e("graphing/label"),
            g = e("math/distance"),
            y = e("math/maybe-rational"),
            v = y.maybeRational,
            b = e("math/rational-arithmetic-sequence"),
            x = d.List,
            w = d.OrderedPair,
            _ = d.ScalarExpression,
            S = d.Constant,
            E = d.ExtendSeed,
            M = d.Multiply,
            I = d.Identifier,
            T = d.DummyIndex,
            C = d.BuiltInFunction,
            k = e("math/sliders");
        d.Base.prototype.tryGetConcreteTree = function() {
            var e;
            try {
                e = this.getConcreteTree.apply(this, arguments)
            } catch (t) {
                e = t instanceof d.Base ? t : h.parseError()
            }
            return e
        }, d.Base.prototype.getConcreteTree = function(e, t, n) {
            if (n) return this._getConcreteTree(e, t, n);
            if (this.isConcreteTreeCacheValid(t)) return this.__cachedConcreteTree.value;
            for (var r = this._getConcreteTree(e, t, n), i = {}, o = this.getCacheKeys().slice();;) {
                if (!o.length) break;
                var a = o.pop();
                if (!i.hasOwnProperty(a)) {
                    var s = t[a];
                    i[a] = s, s && Array.prototype.push.apply(o, s.getCacheKeys())
                }
            }
            return this.__cachedConcreteTree = {
                keys: i,
                value: r
            }, r
        }, d.Base.prototype.getCacheKeys = function() {
            return this.getDependencies()
        }, d.Histogram.prototype.getCacheKeys = n, d.DotPlot.prototype.getCacheKeys = n, d.BoxPlot.prototype.getCacheKeys = n, d.TTest.prototype.getCacheKeys = n, d.IndependentTTest.prototype.getCacheKeys = n, d.Base.prototype.isConcreteTreeCacheValid = function(e) {
            if (!this.__cachedConcreteTree) return !1;
            for (var t in this.__cachedConcreteTree.keys)
                if (this.__cachedConcreteTree.keys.hasOwnProperty(t) && e[t] !== this.__cachedConcreteTree.keys[t]) return !1;
            return !0
        }, d.PercentOf.prototype._getConcreteTree = function(e, t, n) {
            return n && n[this.type] ? n[this.type].call(this, e, t, n) : d.Divide([d.Multiply(this.args), d.Constant(v(100, 1))]).getConcreteTree(e, t, n)
        }, d.Assignment.prototype._getConcreteTree = function(e, t, n) {
            return n && n[this.type] ? n[this.type].call(this, e, t, n) : this._expression.getConcreteTree(e, t, n)
        }, d.Identifier.prototype._getConcreteTree = function(e, t, n) {
            if (n && n[this.type]) return n[this.type].call(this, e, t, n);
            var r = m.latexToIdentifier(this.getInputString()),
                i = t[this._symbol];
            if (i) {
                if (i.isError) throw i;
                if (i.isFunction) throw h.identifierAsFunction(r);
                return i.getConcreteTree(e, t, n)
            }
            if (C.hasOwnProperty(this._symbol)) throw h.functionUnsupported(r);
            return d.FreeVariable(this._symbol)
        }, d.Ans.prototype._getConcreteTree = function(e, t, n) {
            if (n && n[this.type]) return n[this.type].call(this, e, t, n);
            if (void 0 === t[this._symbol]) throw h.ansUndefined();
            return I.prototype._getConcreteTree.call(this, e, t, n)
        }, d.Equation.prototype._getConcreteTree = function(e, t, n) {
            return n && n[this.type] ? n[this.type].call(this, e, t, n) : this.asComparator().getConcreteTree(e, t, n)
        }, d.Constant.prototype._getConcreteTree = function(e, t, n) {
            return n && n[this.type] ? n[this.type].call(this, e, t, n) : new this.constructor(this._constantValue)
        }, d.Seed.prototype._getConcreteTree = function(e, t, n) {
            return n && n[this.type] ? n[this.type].call(this, e, t, n) : new this.constructor(this._stringValue)
        }, d.Derivative.prototype._getConcreteTree = function(e, t, n) {
            if (n && n[this.type]) return n[this.type].call(this, e, t, n);
            var r;
            if (t[this._symbol]) {
                var i = Object.create(t);
                i[this._symbol] = d.FreeVariable(this._symbol);
                var o = t[this._symbol].getConcreteTree(e, t, n);
                if (o.valueType !== f.Number && o.valueType !== f.ListOfNumber) throw h.derivativeVariableTypeError(this._symbol, [f.prettyPrint(o.valueType)]);
                var a = {};
                return a[this._symbol] = o, r = this.args[0].getConcreteTree(e, i, n), this.typeCheck([r]), r.takeDerivative(this._symbol).substitute(a).getConcreteTree(e, t, n)
            }
            return r = this.args[0].getConcreteTree(e, t, n), this.typeCheck([r]), r.takeDerivative(this._symbol).getConcreteTree(e, t, n)
        }, d.DoubleInequality.prototype._getConcreteTree = function(e, t, n) {
            return n && n[this.type] ? n[this.type].call(this, e, t, n) : new this.constructor([d.Piecewise([this._indicator, this._expressions[0], S(NaN)]).getConcreteTree(e, t, n), this._operators[0], I(this._symbol), this._operators[1], d.Piecewise([this._indicator, this._expressions[1], S(NaN)]).getConcreteTree(e, t, n)])
        }, d.Expression.prototype._getConcreteTree = function(e, n, r) {
            if (r && r[this.type]) return r[this.type].call(this, e, n, r);
            var i = t(this.args, e, n, r);
            return this.typeCheck(i), this._constantCollapsedCopy(i)
        }, d.Error.prototype._getConcreteTree = function(e, t, n) {
            return n && n[this.type] ? n[this.type].call(this, e, t, n) : this
        }, d.FreeVariable.prototype._getConcreteTree = function(e, t, n) {
            return n && n[this.type] ? n[this.type].call(this, e, t, n) : this
        }, d.FunctionCall.prototype._getConcreteTree = function(e, n, r) {
            if (r && r[this.type]) return r[this.type].call(this, e, n, r);
            var i = "logbase" === this._symbol ? "log" : m.latexToIdentifier(this._identifier.getInputString()),
                o = n[this._symbol];
            if (o && o.isError) throw o;
            if (!o || !o.isFunction) {
                if (C.hasOwnProperty(this._symbol)) throw "logbase" === this._symbol && n.ln && n.log ? h.logbaseUnsupported() : h.functionUnsupported(i);
                if (o && o.getConcreteTree(e, n, r).valueType === f.Distribution) throw h.distributionAsFunction(o._symbol);
                if (1 == this.args.length) {
                    var a = [I(this._symbol), this.args[0]];
                    return M(a).getConcreteTree(e, n, r)
                }
                if (o) throw h.variableAsFunction(i);
                throw h.functionNotDefined(i)
            }
            var s = t(this.args, e, n, r);
            return o.getConcreteInvocationTree(e, n, s, i, r)
        }, d.DotAccess.prototype._getConcreteTree = function(e, t, n) {
            if (n && n[this.type]) return n[this.type].call(this, e, t, n);
            var r, i, a = this.args[0],
                s = this.args[1];
            if (s instanceof d.Identifier) return "x" === s._symbol ? d.OrderedPairAccess([a, d.Constant(1)]).getConcreteTree(e, t, n) : "y" === s._symbol ? d.OrderedPairAccess([a, d.Constant(2)]).getConcreteTree(e, t, n) : (i = m.latexToIdentifier(s.getInputString()), r = [a], o(s._symbol, i, r, e, t, n));
            if (s instanceof d.SeededFunctionCall) return i = m.latexToIdentifier(s._identifier.getInputString()), r = [s.seed, a].concat(s.args.slice(1)), o(s._symbol, i, r, e, t, n);
            if (s instanceof d.FunctionCall) return "x" === s._symbol && 1 === s.args.length ? d.Multiply([d.OrderedPairAccess([a, d.Constant(1)]), s.args[0]]).getConcreteTree(e, t, n) : "y" === s._symbol && 1 === s.args.length ? d.Multiply([d.OrderedPairAccess([a, d.Constant(2)]), s.args[0]]).getConcreteTree(e, t, n) : (i = m.latexToIdentifier(s._identifier.getInputString()), r = [a].concat(s.args), o(s._symbol, i, r, e, t, n));
            throw h.unexpectedSymbol(".")
        }, d.DotAccessExponent.prototype._getConcreteTree = function(e, t, n) {
            return n && n[this.type] ? n[this.type].call(this, e, t, n) : "FunctionCall" !== this.args[1].type || 1 !== this.args[1].args.length || t[this.args[1]._symbol] && t[this.args[1]._symbol].isFunction ? d.Exponent([d.DotAccess([this.args[0], this.args[1]]), this.args[2]]).getConcreteTree(e, t, n) : d.Multiply([d.DotAccess([this.args[0], d.Identifier(this.args[1]._symbol)]), d.Exponent([this.args[1].args[0], this.args[2]])]).getConcreteTree(e, t, n)
        }, d.FunctionExponent.prototype._getConcreteTree = function(e, t, n) {
            if (n && n[this.type]) return n[this.type].call(this, e, t, n);
            var r = this.args[0]._symbol;
            return t[r] && t[r].isFunction ? d.Exponent([d.FunctionCall(r, [this.args[1]]), this.args[2]]).getConcreteTree(e, t, n) : M([this.args[0], d.Exponent([this.args[1], this.args[2]])]).getConcreteTree(e, t, n)
        }, d.FunctionFactorial.prototype._getConcreteTree = function(e, t, n) {
            if (n && n[this.type]) return n[this.type].call(this, e, t, n);
            var r = this.args[0]._symbol;
            return t[r] && t[r].isFunction ? d.FunctionCall("\\factorial", [d.FunctionCall(r, [this.args[1]])]).getConcreteTree(e, t, n) : M([this.args[0], d.FunctionCall("\\factorial", [this.args[1]])]).getConcreteTree(e, t, n)
        }, d.FunctionDefinition.prototype._getConcreteTree = function(e, t, n) {
            if (n && n[this.type]) return n[this.type].call(this, e, t, n);
            for (var r = 0; r < this._argSymbols.length; r++) {
                if (t[this._argSymbols[r]]) throw h.parameterAlreadyDefined(this._argSymbols[r]);
                if (this._argSymbols[r] === this._symbol) throw h.parameterAlreadyDefined(this._argSymbols[r])
            }
            return this._expression.getConcreteTree(e, t, n)
        }, d.Image.prototype._getConcreteTree = function(e, t, n) {
            if (n && n[this.type]) return n[this.type].call(this, e, t, n);
            var r = this.center.tryGetConcreteTree(e, t, n),
                i = this.radianAngle.tryGetConcreteTree(e, t, n),
                o = this.width.tryGetConcreteTree(e, t, n),
                s = this.height.tryGetConcreteTree(e, t, n),
                l = this.opacity.tryGetConcreteTree(e, t, n),
                c = [f.Point, f.ListOfPoint],
                u = [f.Number, f.ListOfNumber];
            return r = a(r, c), i = a(i, u), o = a(o, u), s = a(s, u), l = a(l, u), d.Image({
                center: r,
                radianAngle: i,
                width: o,
                height: s,
                opacity: l
            }, this.moveStrategy)
        }, d.Slider.prototype._getConcreteTree = function(e, t, n) {
            if (n && n[this.type]) return n[this.type].call(this, e, t, n);
            var r = this._expression.getConcreteTree(e, t, n),
                i = this.sliderMin && this.sliderMin.tryGetConcreteTree(e, t, n),
                o = this.sliderMax && this.sliderMax.tryGetConcreteTree(e, t, n),
                a = this.sliderStep && this.sliderStep.tryGetConcreteTree(e, t, n),
                l = {
                    exportedSymbol: this._symbol,
                    errors: {},
                    values: {},
                    valids: {},
                    missingVars: [],
                    errMsg: void 0
                };
            if (s("min", i, l), s("max", o, l), s("step", a, l), a && l.valids.step && (0 === l.values.step ? delete l.values.step : l.values.step = Math.abs(l.values.step)), l.errors.cycle ? r = h.sliderLimitReferencesExport(l.exportedSymbol) : (l.errors.min || !l.valids.min ? l.errMsg = h.sliderMinInvalid() : l.errors.max || !l.valids.max ? l.errMsg = h.sliderMaxInvalid() : !l.errors.step && l.valids.step || (l.errMsg = h.sliderStepInvalid()), l.values.min > l.values.max && (l.valids.min = !1, l.valids.max = !1, l.errMsg || (l.errMsg = h.sliderMaxLessThanMin()))), r.isConstant) {
                var c = k.constrainSliderValueLikeEvaluator({
                        target: r.asValue(),
                        hardMin: l.values.min,
                        hardMax: l.values.max,
                        step: l.values.step
                    }),
                    u = y.fromDecimalString(c.toString()),
                    p = isFinite(y.asFloat(u)) ? u : c;
                r = S(p)
            }
            return r.sliderInfo = l, r
        }, d.Integral.prototype._getConcreteTree = function(e, t, n) {
            if (n && n[this.type]) return n[this.type].call(this, e, t, n);
            if (t[this._differential._symbol]) throw h.shadowedIntegrationVariable(this._differential._symbol);
            var r = this.args[0],
                i = this.args[1],
                o = this.args[2];
            if (i.dependsOn(r._symbol) || o.dependsOn(r._symbol)) throw h.badIntegralBoundDependency(r._symbol);
            var a = Object.create(t);
            return a[this._differential._symbol] = T(this._differential._symbol), _.prototype._getConcreteTree.call(this, e, a, n)
        }, d.ListAccess.prototype._getConcreteTree = function(e, t, n) {
            if (n && n[this.type]) return n[this.type].call(this, e, t, n);
            var r = this.index.getConcreteTree(e, t, n),
                i = this.list.getConcreteTree(e, t, n),
                o = [i, r];
            return this.typeCheck(o), this._constantCollapsedCopy(o)
        }, d.List.prototype._getConcreteTree = function(e, n, r) {
            if (r && r[this.type]) return r[this.type].call(this, e, n, r);
            var i = t(this.args, e, n, r);
            return this.typeCheck(i), new this.constructor(i)
        }, d.ParametrizedReducerFunction.prototype._getConcreteTree = function(e, n, r) {
            if (r && r[this.type]) return r[this.type].call(this, e, n, r);
            if (this.args[0] instanceof d.List && this.args[0].valueType === f.ListOfDistribution) return d.List(d.List.mapArgs([this.args[0]], function(t) {
                return this.copyWithArgs([t[0], this.args[1]]).getConcreteTree(e, n, r)
            }.bind(this)));
            if (this.args[0] instanceof d.Distribution) return this.args[0][this._symbol](this.args.slice(1)).getConcreteTree(e, n, r);
            var i = t(this.args, e, n, r);
            switch (c([i[1]], this.getDummyDependencies())) {
                case "none":
                    return this.typeCheck(i), this._constantCollapsedCopy(i);
                case "list":
                    return d.List(d.List.mapArgs([i[1]], function(e) {
                        return e = [i[0]].concat(e), this.typeCheck(e), this._constantCollapsedCopy(e)
                    }.bind(this)));
                case "broadcast":
                    var o = u([i[1]]),
                        a = [i[0]].concat(o.concreteArgs);
                    return this.typeCheck(a), d.Broadcast(o.replacedSymbols, [this.copyWithArgs(a)].concat(o.replacedArgs))
            }
        }, d.Prime.prototype._getConcreteTree = function(e, t, n) {
            if (n && n[this.type]) return n[this.type].call(this, e, t, n);
            var r = this.args[0],
                i = r.args[0];
            if (!t[r._symbol]) throw h.functionNotDefined(r._symbol);
            var o, a = this.tmpVar();
            if ("logbase" === r._symbol) {
                if (2 !== r.args.length) throw h.primedFunctionArity();
                o = [I(a), r.args[1]]
            } else {
                if (1 !== r.args.length) throw h.primedFunctionArity();
                o = [I(a)]
            }
            for (var s = r.copyWithArgs(o).getConcreteTree(e, t, n), l = 0; l < this.order; l++) s = s.takeDerivative(a);
            var c = {};
            return c[a] = i, s.substitute(c).getConcreteTree(e, t, n)
        }, d.Range.prototype._getConcreteTree = function(e, t, n) {
            if (n && n[this.type]) return n[this.type].call(this, e, t, n);
            var r = this.beginning.getConcreteTree(e, t, n),
                i = this.end.getConcreteTree(e, t, n);
            if (r.getDependencies().length) throw h.variableRange(r.getDependencies());
            if (i.getDependencies().length) throw h.variableRange(i.getDependencies());
            if (!r.isList || !i.isList) throw new Error("Programming Error: range bounds must be List nodes.");
            var o, a, s = r.elementAt(0).asValue(),
                c = i.elementAt(i.length - 1).asValue(),
                u = c - s;
            if (1 === r.length) o = u >= 0 ? 1 : -1;
            else {
                var p = r.elementAt(1).asValue();
                a = b(s, p), o = r.elementAt(1).asValue() - s
            }
            var d = Math.round(u / o) + 1;
            if (!isFinite(d) || d < r.length || d < i.length) throw h.nonArithmeticRange();
            var f, m, g = [];
            if (a) {
                var y = a.nstart;
                for (f = 0; f < d; f++) l(r, i, f, d, y / a.lcm), g.push(S(v(y, a.lcm))), y += a.nstep
            } else
                for (g.push(S(s)), f = 1; f < d; f++) m = s + f * o, l(r, i, f, d, m), g.push(S(v(m, 1)));
            return x(g)
        }, d.ReducerFunction.prototype._getConcreteTree = function(e, n, r) {
            if (r && r[this.type]) return r[this.type].call(this, e, n, r);
            if (this.args[0] instanceof d.List && this.args[0].valueType === f.ListOfDistribution) return d.List(d.List.mapArgs(this.args, function(t) {
                return this.copyWithArgs(t).getConcreteTree(e, n, r)
            }.bind(this)));
            if (this.args[0] instanceof d.Distribution) return this.args[0][this._symbol]().getConcreteTree(e, n, r);
            var i = t(this.args, e, n, r);
            if (1 === this.args.length) return i = [d.List.wrap(i[0])], this.typeCheck(i), this._constantCollapsedCopy(i);
            switch (c(i, this.getDummyDependencies())) {
                case "none":
                    return i = [d.List(i)], this.typeCheck(i), this._constantCollapsedCopy(i);
                case "list":
                    return d.List(d.List.mapArgs(i, function(e) {
                        return e = [d.List(e)], this.typeCheck(e), this._constantCollapsedCopy(e)
                    }.bind(this)));
                case "broadcast":
                    var o = u(i);
                    return i = [d.List(o.concreteArgs)], this.typeCheck(i), d.Broadcast(o.replacedSymbols, [this.copyWithArgs(i)].concat(o.replacedArgs))
            }
        }, d.RepeatedOperator.prototype._getConcreteTree = function(e, t, n) {
            if (n && n[this.type]) return n[this.type].call(this, e, t, n);
            if (t[this._index._symbol]) throw h.shadowedIndex(this._index._symbol);
            var r = Object.create(t);
            return r[this._index._symbol] = T(this._index._symbol), _.prototype._getConcreteTree.call(this, e, r, n)
        }, d.ScalarExpression.prototype._getConcreteTree = function(e, n, r) {
            if (r && r[this.type]) return r[this.type].call(this, e, n, r);
            var i = t(this.args, e, n, r);
            switch (c(i, this.getDummyDependencies())) {
                case "none":
                    return this.typeCheck(i), this._constantCollapsedCopy(i);
                case "list":
                    return d.List(d.List.mapArgs(i, function(e) {
                        return this.typeCheck(e), this._constantCollapsedCopy(e)
                    }.bind(this)));
                case "broadcast":
                    var o = u(i);
                    return this.typeCheck(o.concreteArgs), d.Broadcast(o.replacedSymbols, [this.copyWithArgs(o.concreteArgs)].concat(o.replacedArgs))
            }
        }, d.Regression.prototype._getConcreteTree = function(e, t, n) {
            return n && n[this.type] ? n[this.type].call(this, e, t, n) : new this.constructor(this._lhs, this._rhs)
        }, d.Polygon.prototype._getConcreteTree = function(e, t, n) {
            if (n && n[this.type]) return n[this.type].call(this, e, t, n);
            var r = this.args.map(function(n) {
                return n.getConcreteTree(e, t)
            });
            return this.typeCheck(r), 1 === r.length && r[0].valueType === f.ListOfPoint ? new this.constructor(r) : r.every(function(e) {
                return e.valueType === f.Point
            }) ? new this.constructor([x(r)]) : 2 === r.length ? new this.constructor([w(this.args).getConcreteTree(e, t)]) : h.parseError()
        }, d.Histogram.prototype._getConcreteTree = p, d.DotPlot.prototype._getConcreteTree = p, d.BoxPlot.prototype._getConcreteTree = function(e, t, n) {
            if (n && n[this.type]) return n[this.type].call(this, e, t, n);
            if (!t[this._symbol]) throw h.functionUnsupported(this._symbol);
            var r = this.args.map(function(n) {
                return n.getConcreteTree(e, t)
            });
            return this.typeCheck(r), 1 === r.length && r[0].valueType === f.ListOfNumber ? new this.constructor(r) : h.parseError()
        }, d.TTest.prototype._getConcreteTree = function(e, t, n) {
            if (n && n[this.type]) return n[this.type].call(this, e, t, n);
            if (!t[this._symbol]) throw h.functionUnsupported(this._symbol);
            var r = this.args.map(function(n) {
                return n.getConcreteTree(e, t)
            });
            return this.typeCheck(r), new this.constructor(r)
        }, d.IndependentTTest.prototype._getConcreteTree = function(e, t, n) {
            if (n && n[this.type]) return n[this.type].call(this, e, t, n);
            if (!t[this._symbol]) throw h.functionUnsupported(this._symbol);
            var r = this.args.map(function(n) {
                return n.getConcreteTree(e, t)
            });
            return this.typeCheck(r), new this.constructor(r)
        }, d.SolvedEquation.prototype._getConcreteTree = function(e, t, n) {
            return n && n[this.type] ? n[this.type].call(this, e, t, n) : new this.constructor(this._symbol, this._expression.getConcreteTree(e, t, n))
        }, d.Table.prototype._getConcreteTree = function(e, t, n) {
            if (n && n[this.type]) return n[this.type].call(this, e, t, n);
            for (var r = [], i = Object.create(t), o = 0; o < this.columns.length; o++) {
                var a = this.columns[o].getConcreteTree(e, i, t, n);
                a.isIndependent && this.columns[o].exportToLocal(a, i), r.push(a)
            }
            return new this.constructor(r)
        }, d.TableColumn.prototype._getConcreteTree = function(e, t, n) {
            var r, i, o = this.header.getConcreteTree(e, t);
            if (o.isFreeVariable) {
                r = [];
                for (var a = 0; a < this.values.length; a++)
                    if (this.values[a].tableError()) r.push(h.invalidTableEntry(this.values[a].tableError()));
                    else {
                        var s = this.values[a].tryGetConcreteTree(e, t);
                        s.isError ? r.push(s) : s.tableError() ? r.push(h.invalidTableEntry(s.tableError())) : s.valueType === f.Number ? r.push(s) : r.push(h.tableEntryTypeError([f.prettyPrint(s.valueType)]))
                    } return i = new this.constructor(o, this.length, r), i.isIndependent = !0, i
            }
            if (o.isConstant) {
                for (var l = [], c = 0; c < this.length; c++) l.push(o);
                r = l
            } else r = o.isList ? o.args : [];
            return o = this.header.getConcreteTree(e, n), o.isError || o.valueType === f.Number || o.valueType === f.ListOfNumber || (o = h.tableHeaderTypeError([f.prettyPrint(o.valueType)])), i = new this.constructor(o, this.length, r)
        }, d.BuiltInFunction.pdf.prototype._getConcreteTree = function(e, t, n) {
            if (n && n[this.type]) return n[this.type].call(this, e, t, n);
            if (this.args[0] instanceof x) return d.List(d.List.mapArgs(this.args, function(r) {
                return this.copyWithArgs(r).getConcreteTree(e, t, n)
            }.bind(this)));
            if (this.typeCheck(this.args), !(this.args[0] instanceof d.Distribution)) throw h.functionTypeError(this._symbol, [f.prettyPrint(this.args[0].valueType)]);
            return this.args[0].pdf([this.args[1]]).getConcreteTree(e, t, n)
        }, d.BuiltInFunction.cdf.prototype._getConcreteTree = function(e, t, n) {
            if (n && n[this.type]) return n[this.type].call(this, e, t, n);
            var r = this.args;
            if (2 === r.length && (r = [r[0], d.Constant(-1 / 0), r[1]]), r[0] instanceof d.List) return d.List(d.List.mapArgs(r, function(r) {
                return this.copyWithArgs(r).getConcreteTree(e, t, n)
            }.bind(this)));
            if (this.typeCheck(r), !(r[0] instanceof d.Distribution)) throw h.functionTypeError(this._symbol, [f.prettyPrint(r[0].valueType)]);
            return r[0].cdf(r.slice(1)).getConcreteTree(e, t, n)
        }, d.BuiltInFunction.random.prototype._getConcreteTree = function(e, t, n) {
            if (n && n[this.type]) return n[this.type].call(this, e, t, n);
            var r = this.args;
            (r.length <= 1 || !(r[1] instanceof d.Distribution) && !(r[1] instanceof d.List) && r.length < 4) && (r = [r[0], C.uniformdist([])].concat(r.slice(1)));
            var i = r[0],
                o = r[1],
                a = r[2],
                s = r[3];
            if (this.typeCheck(r.slice(1)), a && a.getDependencies().length) throw h.variableSampleSize(a.getDependencies());
            if (s && s.getDependencies().length) throw h.variableSeed(s.getDependencies());
            if (s && (i = E("us", [i, s])), a) {
                var l = a.asValue();
                if (l < 1) throw h.badSampleSize();
                l = Math.round(l);
                for (var c, u = [], p = 0; p < l; p++) c = E("lc", [i, S(v(p, 1))]), u.push(o.sample([c]).getConcreteTree(e, t, n));
                return x(u)
            }
            return o.sample([i]).getConcreteTree(e, t, n)
        }
    }), define("math/features/getValueType", ["require", "parsenodes", "math/types"], function(e) {
        function t() {
            return s.Number
        }

        function n() {
            return s.Bool
        }

        function r() {
            return s.Point
        }

        function i() {
            return s.Distribution
        }

        function o() {
            return s.Any
        }
        var a = e("parsenodes"),
            s = e("math/types"),
            l = {
                Add: t,
                Multiply: t,
                Divide: t,
                Subtract: t,
                Exponent: t,
                Negative: t,
                And: n,
                Piecewise: function(e) {
                    return e[1].valueType
                },
                BaseComparator: n,
                RepeatedOperator: t,
                List: function(e) {
                    if (0 === e.length) return s.ListOfAny;
                    for (var t = e[0].valueType, n = 1; n < e.length; n++)
                        if (e[n].valueType !== t) return s.ListOfAny;
                    return s.hasListType(t) ? s.listType(t) : s.ListOfAny
                },
                ListAccess: function(e) {
                    return s.elementType(e[0].valueType)
                },
                Broadcast: function(e) {
                    return s.listType(e[0].valueType)
                },
                Seed: function(e) {
                    return s.SeedType
                },
                ExtendSeed: function(e) {
                    return s.SeedType
                },
                OrderedPairAccess: t,
                OrderedPair: r,
                NativeFunction: t,
                ReducerFunction: t,
                DoubleReducerFunction: t,
                ParametrizedReducerFunction: t,
                Distribution: i,
                DummyIndex: t,
                FreeVariable: t,
                TypedFunction: function() {
                    return this._outputType
                },
                Derivative: t,
                Integral: t,
                Identifier: o
            };
        for (var c in l) a[c].prototype._getValueType = l[c]
    }), define("math/features/typeCheck", ["require", "parsenodes", "math/types", "math/errormsg"], function(e) {
        function t(e) {
            for (var t = [], n = 0; n < e.length; n++) t.push(o.prettyPrint(e[n].valueType));
            return t
        }

        function n(e, n) {
            return function(r) {
                for (var i = 0; i < r.length; i++)
                    if (r[i].valueType !== e[i]) throw n(t(r))
            }
        }

        function r(e) {
            var t = e.length;
            if (t < 2) throw a.methodRequiresList(this._symbol);
            if (e[0].valueType !== o.ListOfNumber) throw a.methodRequiresList(this._symbol);
            if (t > 2) throw a.tooManyArguments(this._symbol, 2)
        }
        var i = e("parsenodes"),
            o = e("math/types"),
            a = e("math/errormsg"),
            s = {
                Add: n([o.Number, o.Number], a.addTypeError),
                Multiply: n([o.Number, o.Number], a.multiplyTypeError),
                Divide: n([o.Number, o.Number], a.divideTypeError),
                Subtract: n([o.Number, o.Number], a.subtractTypeError),
                Exponent: n([o.Number, o.Number], a.exponentTypeError),
                Negative: n([o.Number], a.negativeTypeError),
                BaseComparator: n([o.Number, o.Number], a.comparatorTypeError),
                And: n([o.Bool, o.Bool], a.andTypeError),
                ExtendSeed: function(e) {
                    if (2 !== e.length || e[0].valueType !== o.SeedType || e[1].valueType !== o.SeedType && e[1].valueType !== o.Number) throw a.functionUnsupported("random")
                },
                List: function(e) {
                    if (0 !== e.length) {
                        var t = e[0].valueType;
                        if (!o.hasListType(t)) throw a.listTypeError([o.prettyPrint(t)]);
                        for (var n = 0; n < e.length; n++) {
                            var r = e[n].valueType;
                            if (!o.hasListType(r)) throw a.listTypeError([o.prettyPrint(r)]);
                            if (r !== t) throw a.heterogeneousList()
                        }
                    }
                },
                Broadcast: function(e) {},
                Distribution: function(e) {},
                OrderedPair: n([o.Number, o.Number], a.pointTypeError),
                Piecewise: function(e) {
                    if (e[0].valueType !== o.Bool) throw a.piecewiseConditionTypeError(t(e));
                    if (e[1].valueType !== o.Number) throw a.piecewiseBranchTypeError([o.prettyPrint(e[1].valueType)]);
                    if (e[2].valueType !== o.Number) throw a.piecewiseBranchTypeError([o.prettyPrint(e[2].valueType)])
                },
                ListAccess: function(e) {
                    if (!o.isList(e[0].valueType) || e[1].valueType !== o.Number) throw a.indexTypeError(t(e))
                },
                OrderedPairAccess: n([o.Point, o.Number], a.orderedPairAccessTypeError),
                Sum: function(e) {
                    if (e[1].valueType !== o.Number) throw a.sumLowerBoundTypeError([o.prettyPrint(e[1].valueType)]);
                    if (e[2].valueType !== o.Number) throw a.sumUpperBoundTypeError([o.prettyPrint(e[2].valueType)]);
                    if (e[3].valueType !== o.Number) throw a.sumArgumentTypeError([o.prettyPrint(e[3].valueType)])
                },
                Product: function(e) {
                    if (e[1].valueType !== o.Number) throw a.productLowerBoundTypeError([o.prettyPrint(e[1].valueType)]);
                    if (e[2].valueType !== o.Number) throw a.productUpperBoundTypeError([o.prettyPrint(e[2].valueType)]);
                    if (e[3].valueType !== o.Number) throw a.productArgumentTypeError([o.prettyPrint(e[3].valueType)])
                },
                Integral: function(e) {
                    if (e[1].valueType !== o.Number) throw a.integralLowerBoundTypeError([o.prettyPrint(e[1].valueType)]);
                    if (e[2].valueType !== o.Number) throw a.integralUpperBoundTypeError([o.prettyPrint(e[2].valueType)]);
                    if (e[3].valueType !== o.Number) throw a.integralArgumentTypeError([o.prettyPrint(e[3].valueType)])
                },
                NativeFunction: function(e) {
                    var n = this._errorSymbol,
                        r = e.length,
                        i = "logbase" === this._symbol ? 1 : 0;
                    if (r < this._requiredArity) throw a.wrongArity(n, this._requiredArity - i, r - i);
                    if (r > this._maxArity) throw a.wrongArity(n, this._maxArity - i, r - i);
                    for (var s = 0; s < e.length; s++) {
                        if (e[s].valueType !== o.Number) throw a.functionTypeError(n, t(e))
                    }
                },
                ReducerFunction: function(e) {
                    if (e[0].valueType !== o.ListOfNumber) throw a.functionTypeError(this._symbol, t(e))
                },
                DoubleReducerFunction: function(e) {
                    if (!o.isList(e[0].valueType) || !o.isList(e[1].valueType)) throw a.nonListDoubleReducer(this._symbol);
                    if (e[0].valueType !== o.ListOfNumber || e[1].valueType !== o.ListOfNumber) throw a.functionTypeError(this._symbol, t(e))
                },
                ParametrizedReducerFunction: function(e) {
                    if (e[0].valueType !== o.ListOfNumber) throw a.nonListParametrizedReducer(this._symbol);
                    if (e[1].valueType !== o.Number) throw a.functionTypeError(this._symbol, t(e))
                },
                TypedFunction: function(e) {
                    var n = this._errorSymbol,
                        r = e.length,
                        i = "pdf" === this._symbol,
                        o = "cdf" === this._symbol;
                    if (r < this._requiredArity) {
                        if (i) throw a.pdfWrongArity();
                        if (o) throw a.cdfRequiresArguments();
                        throw a.wrongArity(n, this._requiredArity, r)
                    }
                    if (r > this._maxArity) {
                        if (i) throw a.pdfWrongArity();
                        if (o) throw a.cdfTooManyArguments();
                        throw a.wrongArity(n, this._maxArity, r)
                    }
                    for (var s = 0; s < e.length; s++)
                        if (e[s].valueType !== this._inputTypes[s]) throw a.functionTypeError(n, t(e))
                },
                Derivative: function(e) {
                    if (e[0].valueType !== o.Number && e[0].valueType !== o.ListOfNumber) throw a.derivativeTypeError(t(e))
                },
                Regression: function(e) {
                    if (e[0].valueType !== o.Number && e[0].valueType !== o.ListOfNumber || e[1].valueType !== o.Number && e[1].valueType !== o.ListOfNumber) throw a.regressionTypeError(t(e))
                },
                Polygon: function(e) {
                    if (1 === e.length && e[0].valueType !== o.ListOfPoint) throw a.polygonListTypeError(t(e));
                    if (2 === e.length && e[0].valueType === o.Number && e[1].valueType === o.Number) throw a.polygonTwoNumbersError();
                    if (e.length > 2 && !e.every(function(e) {
                            return e.valueType === o.Point
                        })) throw a.polygonPointArgsError()
                },
                Histogram: r,
                DotPlot: r,
                BoxPlot: function(e) {
                    var t = e.length,
                        n = e[0];
                    if (0 === t) throw a.methodRequiresList(this._symbol);
                    if (n.valueType !== o.ListOfNumber) throw a.methodRequiresList(this._symbol);
                    if (t > 1) throw a.methodRequiresList(this._symbol)
                },
                TTest: function(e) {
                    var n = this._symbol;
                    if (0 === e.length) throw a.methodRequiresList(n);
                    if (e[0].valueType !== o.ListOfNumber) throw a.methodRequiresList(n);
                    if (e.length > 2) throw a.tooManyArguments(n, 2);
                    if (e[0].length < 2) throw a.ttestListTooShort(n);
                    if (e[1] && e[1].valueType !== o.Number) throw a.functionTypeError(n, t(e))
                },
                IndependentTTest: function(e) {
                    var n = this._symbol;
                    if (2 !== e.length) throw a.wrongDoubleReducerArity(n);
                    if (!o.isList(e[0].valueType) || !o.isList(e[1].valueType)) throw a.nonListDoubleReducer(n);
                    if (e[0].valueType !== o.ListOfNumber || e[1].valueType !== o.ListOfNumber) throw a.functionTypeError(n, t(e));
                    if (e[0].args.length < 2 || e[1].args.length < 2) throw a.ttestListTooShort("ittest")
                },
                Stats: function(e) {
                    var t = e.length,
                        n = e[0];
                    if (0 === t) throw a.methodRequiresList(this._symbol);
                    if (n.valueType !== o.ListOfNumber) throw a.methodRequiresList(this._symbol);
                    if (t > 1) throw a.methodRequiresList(this._symbol)
                }
            };
        for (var l in s) i[l].prototype.typeCheck = s[l];
        i.BuiltInFunction.random.prototype.typeCheck = function(e) {
            var t = e.length,
                n = e[0],
                r = e[1],
                s = e[2];
            if (t > 3) throw a.randomArity();
            if (!n) throw a.randomArity();
            if (!(n instanceof i.Distribution || n instanceof i.List)) throw a.randomArity();
            if (n instanceof i.Distribution && n.args && (n.args[0] instanceof i.List || n.args[1] instanceof i.List)) throw a.randomFromBroadcastDistribution();
            if (r && r.valueType !== o.Number) throw a.randomArity();
            if (s && s.valueType !== o.Number) throw a.randomArity()
        }
    }), define("math/features/repr", ["require", "parsenodes"], function(e) {
        var t = e("parsenodes"),
            n = function(e, t, n) {
                n = n || 0;
                var r = Array(n + 1).join("  "),
                    i = r + "  ";
                return "[\n" + i + e.map(function(e) {
                    return e.repr(t, n + 1)
                }).join(",\n" + i) + "\n" + r + "]"
            },
            r = function(e, t) {
                return "" + (t = t || "") + e
            };
        t.Expression.prototype.repr = function(e, t) {
            return r(this.type, e) + "(" + n(this.args, e, t) + ")"
        }, t.DoubleInequality.prototype.repr = function(e, t) {
            t = t || 0;
            var n = Array(t + 1).join("  "),
                i = n + "  ";
            return r(this.type, e) + "([\n" + i + this.args[0].repr(e, t + 1) + ",\n" + i + "'" + this.args[1] + "',\n" + i + this.args[2].repr(e, t + 1) + ",\n" + i + "'" + this.args[3] + "',\n" + i + this.args[4].repr(e, t + 1) + "\n" + n + "])"
        }, t.Identifier.prototype.repr = t.FreeVariable.prototype.repr = function(e) {
            return r(this.type, e) + "('" + this._symbol + "')"
        }, t.Constant.prototype.repr = function(e) {
            return r(this.type, e) + "(" + this.asValue() + ")"
        }, t.ExtendSeed.prototype.repr = function(e, t) {
            return r(this.type, e) + "('" + this.tag + "', " + n(this.args, e, t) + ")"
        }, t.Seed.prototype.repr = function(e) {
            return r(this.type, e) + "(" + this.asValue() + ")"
        }, t.FunctionCall.prototype.repr = function(e, t) {
            return r(this.type, e) + "('" + this._symbol + "', " + n(this.args, e, t) + ")"
        }, t.Assignment.prototype.repr = function(e, n) {
            return r(this.type, e) + "(" + t.Identifier(this._symbol).repr(e, n) + ", " + this._expression.repr(e, n) + ")"
        }, t.Regression.prototype.repr = t.Equation.prototype.repr = function(e, t) {
            return r(this.type, e) + "(" + this._lhs.repr(e, t) + ", " + this._rhs.repr(e, t) + ")"
        }, t.FunctionDefinition.prototype.repr = function(e, i) {
            return r(this.type, e) + "(" + t.Identifier(this._symbol).repr(e, i) + ", " + n(this._argSymbols.map(function(e) {
                return t.Identifier(e)
            }), e, i) + ", " + this._expression.repr(e, i) + ")"
        }, t.Error.prototype.repr = function(e, t) {
            return r(this.type, e) + "('" + this._msg + "')"
        }, t.Derivative.prototype.repr = function(e, t) {
            return r(this.type, e) + "('" + this._symbol + "', " + n(this.args, e, t) + ")"
        }, t.SolvedEquation.prototype.repr = function(e, t) {
            return r(this.type, e) + "('" + this._symbol + "', " + this._expression.repr(e, t) + ")"
        }, t.OptimizedRegression.prototype.repr = function(e, t) {
            return r(this.type, e) + "(" + JSON.stringify(this.parameters) + ", " + JSON.stringify(this.residuals) + ", " + JSON.stringify(this.statistics) + ", " + this.model.repr(e, t + 1) + ", " + JSON.stringify({
                isModelValid: this.isModelValid,
                residualVariable: this.residualVariable,
                residualSuggestionId: this.residualSuggestionId,
                shouldSuggestLogMode: this.shouldSuggestLogMode
            }) + ")"
        }, t.Table.prototype.repr = function(e, t) {
            return r(this.type, e) + "(" + n(this.columns, e, t) + ")"
        }, t.TableColumn.prototype.repr = function(e, t) {
            return r(this.type, e) + "(" + this.header.repr(e, t) + ", " + this.length + ", " + n(this.values, e, t) + ")"
        }, t.Image.prototype.repr = function(e, t) {
            var n = Array(t + 1).join("  "),
                i = n + "  ";
            return r(this.type, e) + "({\n" + i + "center: " + this.center.repr(e, t + 1) + ",\n" + i + "radianAngle: " + this.radianAngle.repr(e, t + 1) + ",\n" + i + "width: " + this.width.repr(e, t + 1) + ",\n" + i + "height: " + this.height.repr(e, t + 1) + "},\n" + i + "opacity: " + this.opacity.repr(e, t + 1) + ",\n" + i + JSON.stringify(this.moveStrategy) + "\n" + n + ")"
        }, t.Slider.prototype.repr = function(e, t) {
            var n = Array(t + 1).join("  "),
                i = n + "  ";
            return r(this.type, e) + "({\n" + i + "sliderAssignment: " + this.sliderAssignment.repr(e, t + 1) + ",\n" + i + "sliderMin: " + (this.sliderMin && this.sliderMin.repr(e, t + 1)) + ",\n" + i + "sliderMax: " + (this.sliderMax && this.sliderMax.repr(e, t + 1)) + ",\n" + i + "sliderStep: " + (this.sliderStep && this.sliderStep.repr(e, t + 1)) + "},\n" + n + ")"
        }, t.Broadcast.prototype.repr = function(e, t) {
            return r(this.type, e) + "(['" + this._replacedSymbols.join("', ") + "'], " + n(this.args, e, t) + ")"
        }
    }), define("math/features/scalarEvalExpression", ["require", "parsenodes", "math/functions"], function(e) {
        var t = e("parsenodes"),
            n = e("math/functions"),
            r = {
                Add: function(e) {
                    return "(" + e.join("+") + ")"
                },
                Multiply: function(e) {
                    return "(" + e.join("*") + ")"
                },
                Divide: function(e) {
                    return "(" + e.join("/") + ")"
                },
                Subtract: function(e) {
                    return "(" + e.join("-") + ")"
                },
                Exponent: function(e) {
                    return "BuiltIn.pow(" + e.join(",") + ")"
                },
                RawExponent: function(e) {
                    return "Math.pow(" + e.join(",") + ")"
                },
                Negative: function(e) {
                    return "(-" + e[0] + ")"
                },
                And: function(e) {
                    return e.join("&&")
                },
                Piecewise: function(e) {
                    return "(" + e[0] + "?" + e[1] + ":" + e[2] + ")"
                }
            },
            i = {
                Add: 2,
                Multiply: 2,
                Divide: 2,
                Subtract: 2,
                Exponent: 2,
                RawExponent: 2,
                Negative: 1,
                And: 2,
                Piecewise: 3
            };
        for (var o in r) {
            var a = t[o].prototype;
            a.scalarEvalExpression = r[o], a.evaluate = n.createEvaluateFunction(a.scalarEvalExpression, i[o])
        }
    }), define("math/reconstitute-node", ["require", "parsenodes", "math/types"], function(e) {
        function t(e, i) {
            if (r.isList(e)) {
                for (var o = [], a = 0; a < i.length; a++) o.push(t(r.elementType(e), i[a]));
                var s = n.List(o);
                return s.valueType = e, s
            }
            switch (e) {
                case r.Number:
                case r.Bool:
                    return n.Constant(i);
                case r.Point:
                    return n.OrderedPair([n.Constant(i[0]), n.Constant(i[1])]);
                default:
                    throw new Error("Cannot reconstitute value of a " + r.prettyPrint(e) + ".")
            }
        }
        var n = e("parsenodes"),
            r = e("math/types");
        return t
    }), define("math/features/constantcollapsedcopy", ["require", "parsenodes", "math/reconstitute-node", "math/maybe-rational"], function(e) {
        var t = e("parsenodes"),
            n = t.Constant,
            r = t.Multiply,
            i = t.Subtract,
            o = t.RawExponent,
            a = t.Seed,
            s = t.BuiltInFunction,
            l = e("math/reconstitute-node"),
            c = e("math/maybe-rational"),
            u = {
                Expression: function(e) {
                    return this.copyWithArgs(e)
                },
                FreeVariable: function(e) {
                    return this
                },
                ScalarExpression: function(e) {
                    for (var t = [], r = 0; r < e.length; r++) {
                        if (!e[r].isConstant && !e[r].isString) return this.copyWithArgs(e);
                        t.push(e[r].asValue())
                    }
                    return n(this.evaluate(t))
                },
                OrderedPair: function(e) {
                    return this.copyWithArgs(e)
                },
                Add: function(e) {
                    return e[0].isConstant && e[1].isConstant ? n(c.add(e[0].asMaybeRationalValue(), e[1].asMaybeRationalValue())) : 0 === e[0].asValue() ? e[1] : 0 === e[1].asValue() ? e[0] : this.copyWithArgs(e)
                },
                Multiply: function(e) {
                    return e[0].isConstant && e[1].isConstant ? n(c.mul(e[0].asMaybeRationalValue(), e[1].asMaybeRationalValue())) : 1 === e[0].asValue() ? e[1] : 1 === e[1].asValue() ? e[0] : this.copyWithArgs(e)
                },
                Subtract: function(e) {
                    return e[0].isConstant && e[1].isConstant ? n(c.sub(e[0].asMaybeRationalValue(), e[1].asMaybeRationalValue())) : 0 === e[0].asValue() ? t.Negative([e[1]]) : 0 === e[1].asValue() ? e[0] : this.copyWithArgs(e)
                },
                Divide: function(e) {
                    return e[0].isConstant && e[1].isConstant ? n(c.div(e[0].asMaybeRationalValue(), e[1].asMaybeRationalValue())) : 1 === e[1].asValue() ? e[0] : this.copyWithArgs(e)
                },
                Exponent: function(e) {
                    if (e[0].isConstant && e[1].isConstant) return n(c.pow(e[0].asMaybeRationalValue(), e[1].asMaybeRationalValue()));
                    if (e[0].isConstant) {
                        if (e[0].asValue() === Math.E) return s.exp([e[1]]);
                        if (e[0].asValue() > 0) return o(e)
                    }
                    if (e[1].isConstant) {
                        var t = e[1].asValue();
                        if (1 === t) return e[0];
                        if (t === Math.floor(t)) return o(e);
                        var i = e[1].asMaybeRationalValue();
                        return c.isRational(i) ? i.d % 2 == 1 ? r([i.n % 2 == 0 ? n(c.maybeRational(1, 1)) : s.sign([e[0]]), o([s.abs([e[0]]), e[1]])]) : o(e) : this.copyWithArgs(e)
                    }
                    return this.copyWithArgs(e)
                },
                RawExponent: function(e) {
                    return e[0].isConstant && e[1].isConstant ? n(c.pow(e[0].asMaybeRationalValue(), e[1].asMaybeRationalValue())) : this.copyWithArgs(e)
                },
                Negative: function(e) {
                    return e[0].isConstant ? n(c.neg(e[0].asMaybeRationalValue())) : e[0] instanceof t.Negative ? e[0].args[0] : this.copyWithArgs(e)
                },
                And: function(e) {
                    return e[0].isConstant && e[1].isConstant ? n(e[0].asValue() && e[1].asValue()) : e[0].isConstant && !0 === e[0] ? e[1] : e[0].isConstant && !1 === e[0] ? n(!1) : e[1].isConstant && !0 === e[1] ? e[0] : e[1].isConstant && !1 === e[1] ? n(!1) : this.copyWithArgs(e)
                },
                Piecewise: function(e) {
                    return e[0].isConstant && !0 === e[0].asValue() ? e[1] : e[0].isConstant && !1 === e[0].asValue() ? e[2] : this.copyWithArgs(e)
                },
                Integral: function(e) {
                    var t = e[0],
                        o = e[1],
                        a = e[2],
                        s = e[3],
                        l = s.getDependencies();
                    if (o.isConstant && a.isConstant) {
                        var c = a.asValue() - o.asValue();
                        if (s.isConstant) return n(s.asValue() * c);
                        if (!s.dependsOn(t._symbol)) return r([s, n(c)]);
                        if (1 === l.length && l[0] === t._symbol) return n(this.evaluate(o.asValue(), a.asValue(), s))
                    } else if (!s.dependsOn(t._symbol)) return r([s, i([a, o])]);
                    return this.copyWithArgs(e)
                },
                ListAccess: function(e) {
                    return e[1].isConstant ? e[0].elementAt(e[1].asValue() - 1) : this.copyWithArgs(e)
                },
                OrderedPairAccess: function(e) {
                    return e[1].isConstant && e[0] instanceof t.OrderedPair ? e[0].elementAt(e[1].asValue() - 1) : this.copyWithArgs(e)
                },
                Broadcast: function(e) {
                    var t = e[0].getDependencies();
                    for (n = 0; n < t.length; n++)
                        if (-1 === this._replacedSymbols.indexOf(t[n])) return this.copyWithArgs(e);
                    for (var n = 1; n < e.length; n++)
                        if (0 !== e[n].getDependencies().length) return this.copyWithArgs(e);
                    return l(this.valueType, this.evaluate(e.slice(1).map(function(e) {
                        return e.asValue()
                    })))
                },
                ReducerFunction: function(e) {
                    return 0 === e[0].getDependencies().length ? l(this.valueType, this.evaluate([e[0].asValue()])) : this.copyWithArgs(e)
                },
                DoubleReducerFunction: function(e) {
                    if (0 === e[0].getDependencies().length && 0 === e[1].getDependencies().length) {
                        var t = Math.min(e[0].length, e[1].length);
                        return l(this.valueType, this.evaluate([e[0].asValue().slice(0, t), e[1].asValue().slice(0, t)]))
                    }
                    return this.copyWithArgs(e)
                },
                ParametrizedReducerFunction: function(e) {
                    var t = e[0],
                        n = e[1];
                    return n.isConstant && 0 === t.getDependencies().length ? l(this.valueType, this.evaluate([t.asValue(), n.asValue()])) : this.copyWithArgs(e)
                },
                RepeatedOperator: function(e) {
                    if (e[1].isConstant && e[2].isConstant) {
                        var t = e[1].asValue(),
                            r = e[2].asValue(),
                            i = e[3];
                        if (i.isConstant) return n(this.evaluateConstant([t, r, i.asValue()]));
                        var o = i.getDependencies();
                        if (0 === o.length || 1 === o.length && o[0] === e[0]._symbol) return n(this.evaluate(t, r, i))
                    }
                    return this.copyWithArgs(e)
                },
                ExtendSeed: function(e) {
                    var t = e[0],
                        n = e[1];
                    return 0 === t.getDependencies().length && 0 === n.getDependencies().length ? a(t.asValue() + "::" + this.tag + n.asValue()) : this.copyWithArgs(e)
                }
            };
        for (var p in u) t[p].prototype._constantCollapsedCopy = u[p];
        s.mod.prototype._constantCollapsedCopy = function(e) {
            return e[0].isConstant && e[1].isConstant ? n(c.mod(e[0].asMaybeRationalValue(), e[1].asMaybeRationalValue())) : this.copyWithArgs(e)
        }, s.sqrt.prototype._constantCollapsedCopy = function(e) {
            return e[0].isConstant ? n(c.sqrt(e[0].asMaybeRationalValue())) : this.copyWithArgs(e)
        }, s.nthroot.prototype._constantCollapsedCopy = function(e) {
            return e[0].isConstant && e[1].isConstant ? n(c.nthroot(e[0].asMaybeRationalValue(), e[1].asMaybeRationalValue())) : this.copyWithArgs(e)
        }, s.abs.prototype._constantCollapsedCopy = function(e) {
            return e[0].isConstant ? n(c.abs(e[0].asMaybeRationalValue())) : this.copyWithArgs(e)
        }, s.total.prototype._constantCollapsedCopy = function(e) {
            if (!e[0].isList) return this.copyWithArgs(e);
            for (var t = e[0].args, r = 0; r < t.length; r++)
                if (!t[r].isConstant) return this.copyWithArgs(e);
            return n(c.total(e[0].asMaybeRationalValue()))
        }, s.distance.prototype._constantCollapsedCopy = function(e) {
            return 0 === e[0].getDependencies().length && 0 === e[1].getDependencies().length ? n(this.evaluate([e[0].asArray(), e[1].asArray()])) : this.copyWithArgs(e)
        }, s.midpoint.prototype._constantCollapsedCopy = function(e) {
            if (0 === e[0].getDependencies().length && 0 === e[1].getDependencies().length) {
                var r = this.evaluate([e[0].asArray(), e[1].asArray()]);
                return t.OrderedPair([n(r[0]), n(r[1])])
            }
            return this.copyWithArgs(e)
        }
    }), define("math/features/polynomialorder", ["require", "parsenodes"], function(e) {
        var t = e("parsenodes"),
            n = {
                Expression: "this.dependsOn(symbol) ? Infinity : 0",
                FreeVariable: "(symbol === this._symbol ? 1 : 0)",
                Constant: "0",
                Add: "Math.max(order0, order1)",
                Subtract: "Math.max(order0, order1)",
                Multiply: "order0 + order1",
                Negative: "order0",
                Divide: "order1 > 0 ? Infinity : order0"
            };
        for (var r in n) {
            var i = n[r];
            t[r].prototype.polynomialOrder = function(e) {
                return e = e.replace("order0", "this.args[0].polynomialOrder(symbol)"), e = e.replace("order1", "this.args[1].polynomialOrder(symbol)"), new Function(["symbol"], "return " + e)
            }(i)
        }
        t.Exponent.prototype.polynomialOrder = function(e) {
            var t = this.args[0].polynomialOrder(e),
                n = this.args[1].polynomialOrder(e);
            if (0 === t && 0 === n) return 0;
            var r = this.args[1];
            return r.isConstant && r.asValue() === Math.round(r.asValue()) && r.asValue() > 0 ? t * r.asValue() : 1 / 0
        }, t.Piecewise.prototype.polynomialOrder = function(e) {
            return this.dependsOn(e) ? this.args[2].isConstant && this.args[2].isNaN() ? this.args[1].polynomialOrder(e) : 1 / 0 : 0
        }, t.List.prototype.polynomialOrder = function(e) {
            return 1 / 0
        }
    }), define("math/features/polynomialcoefficients", ["require", "parsenodes", "math/maybe-rational"], function(e) {
        var t = e("parsenodes"),
            n = e("math/maybe-rational").maybeRational,
            r = t.Constant(n(0, 1)),
            i = t.Constant(n(1, 1));
        t.FreeVariable.prototype.getPolynomialCoefficients = function(e) {
            return e === this._symbol ? [r, i] : [this]
        }, t.Constant.prototype.getPolynomialCoefficients = function(e) {
            return [this]
        }, t.Add.prototype.getPolynomialCoefficients = function(e) {
            for (var n = this.args[0].getPolynomialCoefficients(e), r = this.args[1].getPolynomialCoefficients(e), i = n.length - 1, o = r.length - 1, a = [], s = 0; s <= Math.max(i, o); s++) i >= s && o >= s ? a.push(t.Add([n[s], r[s]])) : a.push(i > o ? n[s] : r[s]);
            return a
        }, t.Subtract.prototype.getPolynomialCoefficients = function(e) {
            for (var n = this.args[0].getPolynomialCoefficients(e), r = this.args[1].getPolynomialCoefficients(e), i = n.length - 1, o = r.length - 1, a = [], s = 0; s <= Math.max(i, o); s++) i >= s && o >= s ? a.push(t.Subtract([n[s], r[s]])) : a.push(i > o ? n[s] : t.Negative([r[s]]));
            return a
        }, t.Negative.prototype.getPolynomialCoefficients = function(e) {
            for (var n = this.args[0].getPolynomialCoefficients(e), r = [], i = 0; i < n.length; i++) r.push(t.Negative([n[i]]));
            return r
        }, t.Exponent.prototype.getPolynomialCoefficients = function(e) {
            var n = this.args[0].getPolynomialCoefficients(e),
                i = this.args[1].getPolynomialCoefficients(e),
                o = n.length - 1;
            if (i.length - 1 > 0) throw "can't solve for variable in exponent";
            if (0 === o) return [t.Exponent([n[0], i[0]])];
            if (this.args[1].isConstant) {
                switch (this.args[1].asValue()) {
                    case 0:
                        return [r];
                    case 1:
                        return n;
                    case 2:
                        return t.Multiply([this.args[0], this.args[0]]).getPolynomialCoefficients(e)
                }
            }
            throw "Unable to compile polynomial representation"
        }, t.Multiply.prototype.getPolynomialCoefficients = function(e) {
            for (var n = this.args[0].getPolynomialCoefficients(e), r = this.args[1].getPolynomialCoefficients(e), i = n.length - 1, o = r.length - 1, a = [], s = 0; s <= i; s++)
                for (var l = 0; l <= o; l++) {
                    var c = t.Multiply([n[s], r[l]]),
                        u = a[s + l];
                    a[s + l] = void 0 === u ? c : t.Add([u, c])
                }
            return a
        }, t.Divide.prototype.getPolynomialCoefficients = function(e) {
            var n = this.args[0].getPolynomialCoefficients(e),
                r = this.args[1].getPolynomialCoefficients(e),
                i = r.length - 1,
                o = [];
            if (i > 0) throw "Can't solve for variable in denominator";
            for (var a = 0; a < n.length; a++) o.push(t.Divide([n[a], r[0]]));
            return o
        }, t.Expression.prototype.getPolynomialCoefficients = function(e) {
            if (this.dependsOn(e)) throw "Unimplemented polynomialCoefficient call";
            return [this]
        }, t.Piecewise.prototype.getPolynomialCoefficients = function(e) {
            return this.dependsOn(e) ? this.args[1].getPolynomialCoefficients(e) : [this]
        }
    }), define("math/features/extractconditions", ["require", "parsenodes"], function(e) {
        var t = e("parsenodes");
        t.Expression.prototype.extractConditions = function(e, t) {
            if (!this.dependsOn(e)) return t;
            for (var n = 0; n < this.args.length; n++) {
                t = this.args[n].extractConditions(e, t)
            }
            return t
        }, t.Piecewise.prototype.extractConditions = function(e, n) {
            if (!this.dependsOn(e)) return n;
            if (!this.args[0].dependsOn(e)) return n = this.args[1].extractConditions(e, n), n = this.args[2].extractConditions(e, n);
            var r = {};
            return r[e] = n, t.Piecewise([this.args[0].substitute(r), n, t.Constant(NaN)])
        }
    }), define("math/features/piecewiseDependsOn", ["require", "parsenodes"], function(e) {
        var t = e("parsenodes");
        t.Expression.prototype.piecewiseDependsOn = function(e) {
            if (!this.dependsOn(e)) return !1;
            for (var t = 0; t < this.args.length; t++) {
                if (this.args[t].piecewiseDependsOn(e)) return !0
            }
            return !1
        }, t.Piecewise.prototype.piecewiseDependsOn = function(e) {
            return this.dependsOn(e)
        }
    }), define("math/builtinconstants", ["require", "math/parsenode/constant", "math/maybe-rational"], function(e) {
        var t = e("math/parsenode/constant"),
            n = e("math/maybe-rational").maybeRational;
        return {
            pi: t(Math.PI),
            tau: t(2 * Math.PI),
            e: t(Math.E),
            trigAngleMultiplier: t(n(1, 1)),
            infty: t(1 / 0)
        }
    }), define("math/builtinframe", ["require", "math/builtinconstants", "math/parsenode/builtinfunction"], function(e) {
        var t, n = e("math/builtinconstants"),
            r = e("math/parsenode/builtinfunction"),
            i = {};
        for (t in n) n.hasOwnProperty(t) && (i[t] = n[t]);
        for (t in r) r.hasOwnProperty(t) && (i[t] = r[t]);
        return i
    }), define("math/domaintypes", ["require", "exports"], function(e, t) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.emptyDomain = function() {
            return {
                type: "empty"
            }
        }, t.unknownDomain = function() {
            return {
                type: "unknown"
            }
        }, t.knownDomain = function(e) {
            return isNaN(e[0]) || isNaN(e[1]) || e[1] < e[0] ? t.emptyDomain() : {
                type: "known",
                bounds: e
            }
        }, t.allReals = function() {
            return t.knownDomain([-1 / 0, 1 / 0])
        }, t.intersectDomains = function(e, n) {
            if ("empty" === e.type || "empty" === n.type) return t.emptyDomain();
            if ("unknown" === e.type || "unknown" === n.type) return t.unknownDomain();
            if (e.bounds && n.bounds) {
                var r = [Math.max(e.bounds[0], n.bounds[0]), Math.min(e.bounds[1], n.bounds[1])];
                return t.knownDomain(r)
            }
            return t.emptyDomain()
        }
    }), define("math/features/bounddomain", ["require", "parsenodes", "math/builtinframe", "math/domaintypes", "math/comparators", "math/maybe-rational", "math/policy"], function(e) {
        var t = e("parsenodes"),
            n = e("math/builtinframe"),
            r = e("math/domaintypes"),
            i = e("math/comparators").table,
            o = e("math/maybe-rational").maybeRational,
            a = e("math/policy").defaultPolicy,
            s = t.Constant(o(0, 1));
        t.Base.prototype.boundDomain = function(e) {
            return r.unknownDomain()
        }, t.List.prototype.boundDomain = function(e) {
            if (!this.dependsOn(e)) return r.allReals();
            if (!this.args.length) return r.allReals();
            var t = this.args[0].boundDomain(e);
            if ("known" !== t.type) return r.unknownDomain();
            for (var n = 0; n < this.args.length; n++) {
                var i = this.args[n].boundDomain(e);
                if ("known" !== i.type) return r.unknownDomain();
                if (i.bounds[0] !== t.bounds[0] || i.bounds[1] !== t.bounds[1]) return r.unknownDomain()
            }
            return t
        }, t.Expression.prototype.boundDomain = function(e) {
            for (var t = r.allReals(), n = 0; n < this.args.length; n++) t = r.intersectDomains(t, this.args[n].boundDomain(e));
            return t
        }, t.Constant.prototype.boundDomain = function(e) {
            return this.isNaN() ? r.emptyDomain() : r.allReals()
        }, t.Piecewise.prototype.boundDomain = function(e) {
            return this.args[2].isConstant && isNaN(this.args[2].asValue()) ? r.intersectDomains(this.args[0].boundDomain(e), this.args[1].boundDomain(e)) : r.unknownDomain()
        }, t.OrderedPair.prototype.boundDomain = function(e) {
            return r.intersectDomains(this.args[0].boundDomain(e), this.args[1].boundDomain(e))
        }, t.BaseComparator.prototype.boundDomain = function(e) {
            if ("=" === this.operator) return r.unknownDomain();
            var t = this._difference,
                o = this._difference.boundDomain(e);
            if (t.polynomialOrder(e) > 1) return r.unknownDomain();
            var l = t.getPolynomialCoefficients(e),
                c = l[1] ? l[1].getConcreteTree(a, n) : s,
                u = l[0] ? l[0].getConcreteTree(a, n) : s;
            if (!c.isConstant || !u.isConstant) return r.unknownDomain();
            if (isNaN(c.asValue()) || isNaN(u.asValue())) return r.emptyDomain();
            if (0 === c.asValue()) return i[this.operator].inclusive ? u.asValue() >= 0 ? o : r.emptyDomain() : u.asValue() > 0 ? o : r.emptyDomain();
            var p = -u.asValue() / c.asValue(),
                d = c.asValue() < 0 ? [-1 / 0, p] : [p, 1 / 0];
            return r.intersectDomains(o, r.knownDomain(d))
        }
    }), define("math/features/derivative", ["require", "parsenodes", "math/baseparser", "math/builtinframe", "math/parsenode/builtinfunction", "math/maybe-rational", "math/policy"], function(e) {
        var t = e("parsenodes"),
            n = e("math/baseparser"),
            r = e("math/builtinframe"),
            i = e("math/parsenode/builtinfunction"),
            o = e("math/maybe-rational").maybeRational,
            a = e("math/policy").defaultPolicy,
            s = t.Constant(o(0, 1)),
            l = t.Constant(o(1, 1)),
            c = t.Constant(o(2, 1)),
            u = {
                FreeVariable: function(e) {
                    return e === this._symbol ? l : s
                },
                Constant: function(e) {
                    return isFinite(this.asValue()) ? s : t.Constant(this.asValue())
                },
                Negative: function(e) {
                    return t.Negative([this.args[0].takeDerivative(e)])
                },
                Add: function(e) {
                    return t.Add([this.args[0].takeDerivative(e), this.args[1].takeDerivative(e)])
                },
                Subtract: function(e) {
                    return t.Subtract([this.args[0].takeDerivative(e), this.args[1].takeDerivative(e)])
                },
                Multiply: function(e) {
                    return t.Add([g(e, this.args[0], t.Multiply([this.args[0].takeDerivative(e), this.args[1]])), g(e, this.args[1], t.Multiply([this.args[0], this.args[1].takeDerivative(e)]))])
                },
                Divide: function(e) {
                    return t.Subtract([g(e, this.args[0], t.Divide([this.args[0].takeDerivative(e), this.args[1]])), g(e, this.args[1], t.Divide([t.Multiply([this.args[0], this.args[1].takeDerivative(e)]), t.Exponent([this.args[1], c])]))])
                },
                Exponent: function(e) {
                    return t.Add([g(e, this.args[0], t.Multiply([t.Multiply([this.args[1], t.Exponent([this.args[0], t.Subtract([this.args[1], l])])]), this.args[0].takeDerivative(e)])), g(e, this.args[1], t.Multiply([t.Piecewise([t.Comparator["="]([this.args[0], s]), t.Piecewise([t.Comparator[">"]([this.args[1], s]), s, t.Constant(NaN)]), t.Multiply([t.FunctionCall("\\ln", [this.args[0]]), t.Exponent([this.args[0], this.args[1]])])]), this.args[1].takeDerivative(e)]))]).getConcreteTree(a, r)
                },
                Sum: function(e) {
                    return this.copyWithArgs([this.args[0], this.args[1], this.args[2], this.args[3].takeDerivative(e)])
                },
                Product: function(e) {
                    var n = t.Sum([this.args[0], this.args[1], this.args[2], t.Piecewise([t.Comparator["="]([s, this.args[3]]), l, s])]),
                        r = t.Multiply([t.Sum([this.args[0], this.args[1], this.args[2], t.Divide([this.args[3].takeDerivative(e), this.args[3]])]), t.Product(this.args)]),
                        i = t.Product([this.args[0], this.args[1], this.args[2], t.Piecewise([t.Comparator["="]([s, this.args[3]]), this.args[3].takeDerivative(e), this.args[3]])]);
                    return t.Piecewise([t.Comparator["="]([s, n]), r, t.Piecewise([t.Comparator["="]([l, n]), i, s])])
                },
                Piecewise: function(e) {
                    return 2 === this.args.length ? t.Piecewise([this.args[0], this.args[1].takeDerivative(e)]) : 3 === this.args.length ? t.Piecewise([this.args[0], this.args[1].takeDerivative(e), this.args[2].takeDerivative(e)]) : void 0
                },
                List: function(e) {
                    return t.List(this.args.map(function(t) {
                        return t.takeDerivative(e)
                    }))
                },
                ListAccess: function(e) {
                    return new this.constructor([this.args[0].takeDerivative(e), this.args[1]])
                },
                OrderedPair: function(e) {
                    return new this.constructor([this.args[0].takeDerivative(e), this.args[1].takeDerivative(e)])
                },
                OrderedPairAccess: function(e) {
                    return new this.constructor([this.args[0].takeDerivative(e), this.args[1]])
                },
                Integral: function(e) {
                    var n = this.args[0],
                        r = this.args[1],
                        i = this.args[2],
                        o = this.args[3],
                        a = {};
                    a[n._symbol] = i;
                    var s = {};
                    return s[n._symbol] = r, t.Add([g(e, o, this.copyWithArgs([n, r, i, o.takeDerivative(e)])), t.Subtract([g(e, i, t.Multiply([o.substitute(a), i.takeDerivative(e)])), g(e, r, t.Multiply([o.substitute(s), r.takeDerivative(e)]))])])
                },
                SolvedEquation: function(e) {
                    return this._expression.takeDerivative(e)
                },
                OptimizedRegression: function(e) {
                    return this.model.takeDerivative(e)
                },
                Broadcast: function(e) {
                    for (var n = this._replacedSymbols.slice(), r = this.args.slice(1), i = this._expression.takeDerivative(e), o = 0; o < this._replacedSymbols.length; o++) {
                        var a = this._replacedSymbols[o],
                            s = this.args[o + 1];
                        if (s.dependsOn(e)) {
                            var l = this.tmpVar(),
                                c = t.DummyIndex(l);
                            n.push(l), r.push(s.takeDerivative(e)), i = t.Add([i, t.Multiply([this._expression.takeDerivative(a), c])])
                        }
                    }
                    return t.Broadcast(n, [i].concat(r))
                },
                Seed: function(e) {
                    return t.Constant(NaN)
                }
            },
            p = {
                exp: "\\exp(x)*x_1",
                ln: "\\{x >= 0: x_1/x \\}",
                log: "\\{ x >= 0: x_1/(x*\\ln(10)) \\}",
                sqrt: "x_1/(2*\\sqrt{x})",
                rtxsqpone: "x*x_1/\\rtxsqpone(x)",
                rtxsqmone: "x*x_1/\\rtxsqmone(x)",
                sin: "\\cos(x)*x_1",
                cos: "-\\sin(x)*x_1",
                tan: "\\sec(x)^2*x_1",
                arcsin: "x_1/\\sqrt{1 - x^2}",
                arccos: "-x_1/\\sqrt{1 - x^2}",
                sinh: "\\cosh(x)*x_1",
                cosh: "\\sinh(x)*x_1",
                tanh: "(\\sech(x))^2*x_1",
                arcsinh: "x_1/\\sqrt{x^2 + 1}",
                arccosh: "\\{ x > 0: x_1/\\rtxsqmone(x) \\}",
                arctanh: "\\{ \\abs(x) < 1: x_1/(1 - x^2) \\}",
                csc: "-\\cot(x)*\\csc(x)*x_1",
                sec: "\\tan(x)*\\sec(x)*x_1",
                cot: "-\\csc(x)^2*x_1",
                arccsc: "-x_1/(\\abs(x)*\\rtxsqmone(x))",
                arcsec: "x_1/(\\abs(x)*\\rtxsqmone(x))",
                arccot: "-x_1/(1+x^2)",
                csch: "-\\coth(x)*\\csch(x)*x_1",
                sech: "-\\tanh(x)*\\sech(x)*x_1",
                coth: "-(\\csch(x))^2*x_1",
                arccsch: "-x_1/(\\abs(x)*\\rtxsqpone(x))",
                arcsech: "\\{ x >= 0: -x_1/(x*\\sqrt{1 - x^2}) \\}",
                arccoth: "\\{ \\abs(x) > 1 : x_1/(1 - x^2) \\}",
                factorial: "(x)!*\\polyGamma(0, x + 1)*x_1",
                floor: "\\{ \\mod(x, 1) > 0: 0*x_1 \\}",
                ceil: "\\{ \\mod(x, 1) > 0: 0*x_1 \\}",
                abs: "\\{ \\abs(x) > 0: \\sign(x)*x_1 \\}",
                sign: "\\{ \\abs(x) > 0: 0*x_1 \\}",
                mean: "\\mean(x_1)",
                total: "\\total(x_1)",
                length: "0",
                var: "2*\\cov(x, x_1)",
                varp: "2*\\cov(x, x_1)*(\\length(x)-1)/\\length(x)",
                stdev: "\\cov(x, x_1)/\\stdev(x)",
                stdevp: "\\covp(x, x_1)/\\stdevp(x)",
                mad: "\\mean(\\sign(x-\\mean(x))*(x_1 - \\mean(x_1)))",
                min: "x_1[\\argmin(x)]",
                max: "x_1[\\argmax(x)]",
                median: "0.5*(x_1[\\lowerQuantileIndex(x, 0.5)] + x_1[\\upperQuantileIndex(x, 0.5)])",
                argmin: "0/0",
                argmax: "0/0",
                gcd: "0/0",
                lcm: "0/0",
                erf: "\\frac{2x_1}{\\sqrt{\\pi }}e^{-x^2}",
                invNorm: "\\frac{x_1}{\\pdf(\\normaldist(0,1),\\invNorm(x))}"
            },
            d = {
                logbase: ["\\{x > 0: \\frac{x_1}{x*\\ln(y)}\\}", "\\frac{-\\log_{y}(x)*y_1}{y*\\ln(y)}"],
                nthroot: ["x^{1/y - 1}/y*x_1", "-\\frac{x^{1/y}*\\ln(x)*y_1}{y^2}"],
                polyGamma: ["0/0", "\\polyGamma(1 + x, y)*y_1"],
                mod: ["\\{ \\abs(\\mod(x, y)) > 0: x_1 \\}", "\\{ \\mod(x/y, 1) > 0: -\\floor(x/y)*y_1 \\}"],
                round: ["\\{ \\abs(\\mod(x, 1) - 0.5) > 0: 0*x_1 \\}", "0/0"],
                cov: ["\\cov(x_1, y)", "\\cov(x, y_1)"],
                covp: ["\\covp(x_1, y)", "\\covp(x, y_1)"],
                corr: ["(\\cov(x_1, y) - (\\cov(x, y)*\\cov(x, x_1)/\\var(x)))/(\\stdevp(x)\\stdevp(y))", "(\\cov(x, y_1) - (\\cov(x, y)*\\cov(y, y_1)/\\var(y)))/(\\stdevp(x)\\stdevp(y))"],
                quantile: ["\\{ \\floor(y*(\\length(x)-1)) = y*(\\length(x)-1) :   x_1[\\upperQuantileIndex(x, y)],  (\\ceil(y*(\\length(x)-1)) - y*(\\length(x)-1))*x_1[\\lowerQuantileIndex(x, y)] +   (y*(\\length(x)-1) - \\floor(y*(\\length(x)-1)))*x_1[\\upperQuantileIndex(x, y)]\\}", "\\{ \\floor(y*(\\length(x)-1)) < y*(\\length(x)-1) :   (x[\\upperQuantileIndex(x, y)] - x[\\lowerQuantileIndex(x, y)])*y_1\\}"],
                quartile: ["0.5*(x_1[\\lowerQuartileIndex(x, y)] + x_1[\\upperQuartileIndex(x, y)])", "0/0"],
                tscore: ["\\frac{\\sqrt{\\length(x)}(\\stdev(x)*\\mean(x_1)-(\\mean(x)-y)*\\frac{\\cov(x,x_1)}{\\stdev(x)})}{\\stdev(x)^2}", "-y_1*\\sqrt{\\length(x)}/\\stdev(x)"],
                quartileIndex: ["0/0", "0/0"],
                upperQuartileIndex: ["0/0", "0/0"],
                lowerQuartileIndex: ["0/0", "0/0"],
                upperQuantileIndex: ["0/0", "0/0"],
                lowerQuantileIndex: ["0/0", "0/0"],
                nCr: ["0/0", "0/0"],
                nPr: ["0/0", "0/0"],
                arctan: ["x_1*y/(y^2+x^2)", "-y_1*x/(y^2+x^2)"],
                poissonpdf: ["0/0", "y_1\\frac{e^{-y}(\\floor(x)-y)y^{(\\floor(x)-1)}}{\\floor(x)!}"],
                invPoisson: ["0/0", "0/0"],
                tpdf: ["x_1*\\pdf(\\tdist(y),x)*\\frac{-(y+1)*x}{y+x^2}", "y_1*\\frac{1}{2}\\pdf(\\tdist(y),x)(  \\frac{x^2-1}{y + x^2} + \\ln(\\frac{y}{y + x^2}) +   \\polyGamma(0, \\frac{1+y}{2}) - \\polyGamma(0, y/2))"],
                invT: ["x_1/\\pdf(\\tdist(y),\\invT(x, y))", "0/0"]
            },
            h = {
                tcdf: ["-x_1*\\pdf(\\tdist(z),x)", "y_1*\\pdf(\\tdist(z),y)", "0/0"],
                poissoncdf: ["0/0", "0/0", "z_1\\sum _{n=\\max(0,\\floor(\\min(x,y)))}^{\\floor(\\max(x,y))}\\frac{e^{-z}(n-z)z^{(n-1)}}{n!}"],
                normalpdf: ["-x_1*\\frac{x-y}{z^2} \\pdf(\\normaldist(y,z),x)", "y_1*\\frac{x-y}{z^2} \\pdf(\\normaldist(y,z),x)", "z_1*(\\frac{(x-y-z)*(x-y+z)}{z^3}) \\pdf(\\normaldist(y,z),x)"],
                binompdf: ["0/0", "0/0", "\\{0<=z<=1: z_1*\\pdf(\\binomialdist(y,z),x)*(\\frac{\\round(x)}{z}-\\frac{\\round(y)-\\round(x)}{1-z}), 0 \\}"],
                invBinom: ["0/0", "0/0", "0/0"],
                uniformpdf: ["0", "\\{y<=x: \\frac{y_1}{(z-y)^2}, 0\\}", "\\{z>=x: -\\frac{z_1}{(z-y)^2}, 0\\}"],
                invUniform: ["\\{y<=x<=z: x_1*(z-y), 0\\}", "\\{y<=x<=z: y_1*(1-x), 0\\}", "\\{y<=x<=z: z_1*x, 0\\}"]
            },
            f = {
                normalcdf: ["-x_1\\pdf(\\normaldist(z,u), x)", "y_1\\pdf(\\normaldist(z,u), y)", "-z_1*(\\pdf(\\normaldist(z,u), y) - \\pdf(\\normaldist(z,u), x))", "u_1*(  \\{\\abs(y)=1/0:0,\\frac{z-y}{u}\\pdf(\\normaldist(z,u),y)\\} -   \\{\\abs(x)=1/0:0,\\frac{z-x}{u}\\pdf(\\normaldist(z,u),x)\\})"],
                binomcdf: ["0/0", "0/0", "0/0", "\\{0<=u<=1: u_1*\\sum _{n=\\max(0,\\round(\\min(x,y)))}^{\\round(\\max(x,y))}(  \\pdf(\\binomialdist(z,u),n)*(\\frac{n}{u}-\\frac{\\round(z)-n}{1-u})), 0 \\}"],
                uniformcdf: ["\\{z>u: 0/0, -x_1\\pdf(\\uniformdist(z,u), x)\\}", "\\{z>u: 0/0, y_1\\pdf(\\uniformdist(z,u), y)\\}", "\\{z>u: 0/0, z_1*(\\frac{\\{z<x<u:u-x,0\\} + \\{z<y<u:y-u,0\\}}{(u-z)^2})\\}", "\\{z>u: 0/0, u_1*(\\frac{\\{z<x<u:x-z,0\\} + \\{z<y<u:z-y,0\\}}{(u-z)^2})\\}"]
            };
        for (var m in p) i[m].prototype.takeDerivative = function(e) {
            return function(t) {
                var n = this.args,
                    i = {
                        x: n[0],
                        x_1: n[0].takeDerivative(t)
                    };
                return g(t, n[0], e.substitute(i)).getConcreteTree(a, r)
            }
        }(n.parse(p[m]));
        for (m in d) i[m].prototype.takeDerivative = function(e, n) {
            return function(i) {
                var o = this.args,
                    s = {
                        x: o[0],
                        x_1: o[0].takeDerivative(i),
                        y: o[1],
                        y_1: o[1].takeDerivative(i)
                    };
                return t.Add([g(i, o[0], e.substitute(s)), g(i, o[1], n.substitute(s))]).getConcreteTree(a, r)
            }
        }(n.parse(d[m][0]), n.parse(d[m][1]));
        for (m in h) i[m].prototype.takeDerivative = function(e, n, i) {
            return function(o) {
                var s = this.args,
                    l = {
                        x: s[0],
                        x_1: s[0].takeDerivative(o),
                        y: s[1],
                        y_1: s[1].takeDerivative(o),
                        z: s[2],
                        z_1: s[2].takeDerivative(o)
                    };
                return t.Add([t.Add([g(o, s[0], e.substitute(l)), g(o, s[1], n.substitute(l))]), g(o, s[2], i.substitute(l))]).getConcreteTree(a, r)
            }
        }(n.parse(h[m][0]), n.parse(h[m][1]), n.parse(h[m][2]));
        for (m in f) i[m].prototype.takeDerivative = function(e, n, i, o) {
            return function(s) {
                var l = this.args,
                    c = {
                        x: l[0],
                        x_1: l[0].takeDerivative(s),
                        y: l[1],
                        y_1: l[1].takeDerivative(s),
                        z: l[2],
                        z_1: l[2].takeDerivative(s),
                        u: l[3],
                        u_1: l[3].takeDerivative(s)
                    };
                return t.Add([t.Add([g(s, l[0], e.substitute(c)), g(s, l[1], n.substitute(c))]), t.Add([g(s, l[2], i.substitute(c)), g(s, l[3], o.substitute(c))])]).getConcreteTree(a, r)
            }
        }(n.parse(f[m][0]), n.parse(f[m][1]), n.parse(f[m][2]), n.parse(f[m][3]));
        i.distance.prototype.takeDerivative = function(e) {
            var n = this.args[0],
                o = this.args[1],
                s = t.OrderedPairAccess([n, l]),
                u = t.OrderedPairAccess([n, c]),
                p = t.OrderedPairAccess([o, l]),
                d = t.OrderedPairAccess([o, c]),
                h = g(e, s, s.takeDerivative(e)),
                f = g(e, u, u.takeDerivative(e)),
                m = g(e, p, p.takeDerivative(e)),
                y = g(e, d, d.takeDerivative(e));
            return g(e, this, t.Divide([t.Add([t.Add([t.Subtract([t.Multiply([h, s]), t.Multiply([h, p])]), t.Subtract([t.Multiply([m, p]), t.Multiply([m, s])])]), t.Add([t.Subtract([t.Multiply([f, u]), t.Multiply([f, d])]), t.Subtract([t.Multiply([y, d]), t.Multiply([y, u])])])]), i.distance([this.args[0], this.args[1]])])).getConcreteTree(a, r)
        }, i.midpoint.prototype.takeDerivative = function(e) {
            var n = this.args[0],
                o = this.args[1],
                s = t.OrderedPairAccess([n, l]),
                u = t.OrderedPairAccess([n, c]),
                p = t.OrderedPairAccess([o, l]),
                d = t.OrderedPairAccess([o, c]),
                h = g(e, s, s.takeDerivative(e)),
                f = g(e, u, u.takeDerivative(e)),
                m = g(e, p, p.takeDerivative(e)),
                y = g(e, d, d.takeDerivative(e));
            return t.OrderedPair([i.mean([h, m]), i.mean([f, y])]).getConcreteTree(a, r)
        };
        var g = function(e, t, n) {
            return t.dependsOn(e) ? n : s
        };
        for (var y in u) {
            var v = u[y];
            t[y].prototype.takeDerivative = v
        } ["tSample", "poissonSample", "uniformSample", "normalSample", "binomSample"].forEach(function(e) {
            i[e].prototype.takeDerivative = function(e) {
                for (var n = 0; n < this.args.length; n++)
                    if (this.args[n].dependsOn(e)) return t.Constant(NaN);
                return s
            }
        })
    }), define("math/features/substitute", ["require", "parsenodes"], function(e) {
        var t = e("parsenodes"),
            n = {
                Identifier: function(e) {
                    return e[this._symbol] ? e[this._symbol] : this
                },
                FreeVariable: function(e) {
                    return e[this._symbol] ? e[this._symbol] : this
                },
                Constant: function(e) {
                    return this
                },
                Expression: function(e) {
                    return this.copyWithArgs(this.args.map(function(t) {
                        return t.substitute(e)
                    }))
                },
                List: function(e) {
                    return t.List(this.args.map(function(t) {
                        return t.substitute(e)
                    }))
                },
                SolvedEquation: function(e) {
                    return new this.constructor(this._symbol, this._expression.substitute(e))
                },
                OptimizedRegression: function(e) {
                    return new this.constructor(this.model.substitute(e), this.parameters, this.residualVariables, this.residuals, this.statistics)
                }
            };
        for (var r in n) t[r].prototype.substitute = n[r]
    }), define("worker/workerconfig", [], function() {
        return {
            pointsOfInterest: !0,
            plotSingleVariableImplicitEquations: !0
        }
    }), define("math/features/solve", ["require", "math/baseparser", "parsenodes", "math/errormsg", "math/builtinframe", "worker/workerconfig", "math/maybe-rational", "math/policy"], function(e) {
        function t(e) {
            var t = Object.create(m);
            return t.a = e[2] ? e[2].tryGetConcreteTree(v, m) : b, t.b = e[1] ? e[1].tryGetConcreteTree(v, m) : b, t.c = e[0] ? e[0].tryGetConcreteTree(v, m) : b, t
        }

        function n(e) {
            return 0 === e.a.asValue() ? 0 === e.b.asValue() ? 0 : 1 : 2
        }

        function r(e, r, i, o) {
            for (var a, s, l = [], c = [], u = 0; u < i.length; u++) {
                var p = i[u],
                    d = 0;
                h.eachArgs([r], function(e) {
                    var t = e[0];
                    d = Math.max(d, t.polynomialOrder(p))
                });
                var f = d > 2,
                    m = i.length > 1 && !e.validSolvedVariable(p),
                    g = o && r.piecewiseDependsOn(p);
                f || m || g ? (c[u] = {}, l[u] = 1 / 0) : (c[u] = [], l[u] = 0, h.eachArgs([r], function(e) {
                    var r = e[0];
                    s = t(r.getPolynomialCoefficients(p)), c[u].push(s), l[u] = Math.max(l[u], n(s))
                }))
            }
            var y;
            if (1 === i.length) s = c[0], a = i[0], y = l[0];
            else {
                var v;
                v = 0 === l[0] ? 1 : 0 === l[1] ? 0 : l[0] < l[1] ? 0 : 1, s = c[v], a = i[v], y = l[v]
            }
            return {
                localFrame: s,
                variableOfInterest: a,
                effectiveOrder: y
            }
        }

        function i(e, t) {
            return t ? C.inequality : C.generalEquation
        }

        function o(e) {
            e.f = x.getConcreteTree(v, e), e.g = w.getConcreteTree(v, e), e.p = _.getConcreteTree(v, e), e.q = S.getConcreteTree(v, e), e.m = c(y(1e305, 1))
        }
        var a = e("math/baseparser"),
            s = e("parsenodes"),
            l = s.Base,
            c = s.Constant,
            u = s.Equation,
            p = s.SolvedEquation,
            d = s.BaseComparator,
            h = s.List,
            f = e("math/errormsg"),
            m = e("math/builtinframe"),
            g = e("worker/workerconfig"),
            y = e("math/maybe-rational").maybeRational,
            v = e("math/policy").defaultPolicy,
            b = c(y(0, 1)),
            x = a.parse("b*b"),
            w = a.parse("4*a*c"),
            _ = a.parse("(-b+\\sqrt{b*b-4*a*c})/(2*a)"),
            S = a.parse("(-b-\\sqrt{b*b-4*a*c})/(2*a)"),
            E = a.parse("[\\{\\abs(b)>0:-c/b\\}]"),
            M = a.parse("[\\{\\abs(a)>0:-b/(2*a)\\}]"),
            I = a.parse("[\\{a=0:\\{b<0:-c/b\\},q\\},\\{a=0:\\{b>0:-c/b\\},p\\}]"),
            T = a.parse("[\\{a=0:\\{b<0:-c/b\\},a>0:q\\},\\{a=0:\\{b=0:\\{c>0:-m\\}\\},a>0:\\{f<g:-m\\},p\\},\\{a=0:\\{b=0:\\{c>0:m\\}\\},a>0:\\{f<g:m\\},q\\},\\{a=0:\\{b>0:-c/b\\},a>0:p\\}]"),
            C = {
                inequality: function(e) {
                    return o(e), T.getConcreteTree(v, e)
                },
                generalEquation: function(e) {
                    return o(e), e.a.isConstant && 0 === e.a.asValue() ? E.getConcreteTree(v, e) : e.f.isConstant && e.g.isConstant && e.f.asValue() - e.g.asValue() == 0 ? M.getConcreteTree(v, e) : I.getConcreteTree(v, e)
                }
            };
        l.prototype.trySolve = function(e, t) {
            try {
                return this.solve(e, t)
            } catch (e) {
                if (e instanceof s.Error) return e;
                throw e
            }
        }, u.prototype.solve = function(e, t) {
            return this.asComparator().solve(e, t)
        }, d.prototype.solve = function(e, t) {
            var n = this.tryGetConcreteTree(e, t);
            if (n.isError) return n;
            if (n.isConstant) return n;
            var o = "=" !== this.getOperator(),
                a = this._difference.tryGetConcreteTree(e, t);
            a.isBroadcast && (a = h(a.mapElements(function(e) {
                return e
            })));
            var s = a.getDependencies();
            if (0 === s.length) return a.isList ? h(a.args.map(function(e) {
                return c(0 === e.asValue())
            })) : c(0 === a.asValue());
            if (1 === s.length && a.isList && !o) return a;
            if (1 === s.length && !o && !g.plotSingleVariableImplicitEquations) return f.singleVariableImplicitEquationsDisabled();
            var l = h.wrap(a);
            if (s.length > 2) return f.tooManyVariables(this.getSliderVariables(e, n)).setDependencies(s);
            if (o && !e.validInequalityVariables(s)) return f.invalidInequalityVariables().setDependencies(s);
            var u = r(e, l, s, o),
                d = u.localFrame,
                m = u.effectiveOrder,
                y = u.variableOfInterest;
            if (e.complicatedPolarImplicit(y, m)) return f.complicatedPolarImplicit().setDependencies(s);
            if (!e.validImplicitVariables(s)) return f.invalidImplicitVariables();
            if (m > 2) return a;
            for (var v = i(s, o), b = [], x = 0; x < d.length; x++) {
                var w = v(d[x]);
                if (w.isError) return w;
                if (w.isConstant) b.push(w);
                else
                    for (var _ = 0; _ < w.args.length; _++) {
                        var S = w.args[_],
                            E = l.args[x].extractConditions(y, S).getConcreteTree(e, t);
                        b.push(E)
                    }
            }
            return p(y, h(b))
        }
    }), define("graphing/graphmode", ["require", "exports"], function(e, t) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.X = 1, t.Y = 2, t.XYPOINT = 3, t.XYPOINT_MOVABLE = 4, t.PARAMETRIC = 5, t.POLAR = 6, t.POLYGONFILL = 7, t.IMPLICIT = 8, t.NONE = 10, t.VISUALIZATION = 11
    }), define("math/distribution-spec", ["require", "exports", "math/baseparser", "tslib"], function(e, t, n, r) {
        "use strict";

        function i(e) {
            return o(n.parse(e, {
                trailingComma: !0
            }))
        }

        function o(e) {
            var n = e,
                i = a[n.type];
            if (!i) switch ("Assignment" === n.type && (n = n._expression), n.type) {
                case "FunctionCall":
                    i = t.DistributionParameterDefaultsMap[n._symbol];
                    break;
                default:
                    return
            }
            if (i) {
                for (var o = {}, s = i.params, l = n.args, c = 0; c < s.length; c++) {
                    var u = l[c];
                    o[s[c]] = u && u.getInputString() || ""
                }
                return r.__assign({}, i, {
                    span: n.getInputSpan(),
                    values: o
                })
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.DistributionParameterDefaultsMap = {
            normaldist: {
                type: "distribution",
                symbol: "normaldist",
                params: ["mean", "stdev"],
                defaults: ["0", "1"],
                discrete: !1
            },
            tdist: {
                type: "distribution",
                symbol: "tdist",
                params: ["dof"],
                defaults: [void 0],
                discrete: !1
            },
            binomialdist: {
                type: "distribution",
                symbol: "binomialdist",
                params: ["trials", "probsuccess"],
                defaults: [void 0, "0.5"],
                discrete: !0
            },
            poissondist: {
                type: "distribution",
                symbol: "poissondist",
                params: ["mean"],
                defaults: [void 0],
                discrete: !0
            },
            uniformdist: {
                type: "distribution",
                symbol: "uniformdist",
                params: ["min", "max"],
                defaults: ["0", "1"],
                discrete: !1
            }
        };
        var a = {
            Histogram: {
                type: "visualization",
                symbol: "histogram",
                params: ["data", "binwidth"],
                defaults: [void 0, "1"]
            },
            DotPlot: {
                type: "visualization",
                symbol: "dotplot",
                params: ["data", "binwidth"],
                defaults: [void 0, "1"]
            },
            BoxPlot: {
                type: "visualization",
                symbol: "boxplot",
                params: ["data"],
                defaults: [void 0]
            }
        };
        t.parseToplevelFunction = i, t.getFunctionSpecFromTree = o
    }), define("math/evaluationstate", ["require", "graphing/graphmode", "parsenodes", "graphing/label", "math/types", "math/distribution-spec"], function(e) {
        function t(e) {
            return e.isError ? e.getError() : void 0 === e.asValue() ? "" : +e.asValue()
        }

        function n(e, n, r) {
            for (var i = [], o = 0; o < n.columns.length; o++) {
                var a = r.columns[o],
                    s = {
                        dependent: !a.isIndependent,
                        discrete: a.isIndependent
                    };
                a.isError ? (s.error = a.getError(), s.values = []) : s.values = a.values.map(t), i.push(s)
            }
            return {
                column_data: i
            }
        }

        function r(e, t, n) {
            var r = {
                variables: [],
                errorMap: {},
                dimensions: {}
            };
            return n.center.isError && (r.errorMap.center = !0), n.radianAngle.isError && (r.errorMap.angle = !0), n.width.isError && (r.errorMap.width = !0), n.height.isError && (r.errorMap.height = !0), n.opacity.isError && (r.errorMap.opacity = !0), n.center.isError || n.radianAngle.isError || n.width.isError || n.height.isError || n.opacity.isError ? (r.variables = t.getSliderVariables(e, n), r) : (r.dimensions.x = [], r.dimensions.y = [], r.dimensions.radianAngle = [], r.dimensions.width = [], r.dimensions.height = [], r.dimensions.opacity = [], o.List.eachArgs([n.center, n.radianAngle, n.width, n.height, n.opacity], function(e) {
                var t = e[0].asValue();
                r.dimensions.x.push(+t[0]), r.dimensions.y.push(+t[1]), r.dimensions.radianAngle.push(+e[1].asValue()), r.dimensions.width.push(+e[2].asValue()), r.dimensions.height.push(+e[3].asValue()), r.dimensions.opacity.push(Math.max(0, Math.min(1, e[4].asValue())))
            }), (e.graphingEnabled() ? t.getGraphMode(e, n) : i.NONE) !== i.NONE && (r.is_graphable = !0), n.moveStrategy && (r.move_strategy = n.moveStrategy), r)
        }
        var i = e("graphing/graphmode"),
            o = e("parsenodes"),
            a = e("graphing/label"),
            s = e("math/types"),
            l = e("math/distribution-spec").getFunctionSpecFromTree,
            c = function() {
                return {
                    operator: "=",
                    variables: []
                }
            },
            u = function(e, t, u) {
                if (t.isTable) return n(e, t, u);
                if (t.isImage) return r(e, t, u);
                var p = c();
                if (u.isError && (!(t instanceof o.FunctionDefinition) || u.blocksExport)) return p.error = u.getError(), p.variables = t.getSliderVariables(e, u), p.is_single_identifier = t instanceof o.Identifier, p;
                u.moveStrategy && (p.move_strategy = u.moveStrategy, p.default_drag_mode = u.defaultDragMode), t.isInequality() && (p.is_inequality = !0), p.operator = t.getOperator(), u instanceof o.SolvedEquation ? !0 !== u._expression.asValue() && !1 !== u._expression.asValue() && (p.assignment = u._symbol) : t instanceof o.Assignment && (p.assignment = t._symbol);
                var d = e.graphingEnabled() ? t.getGraphMode(e, u) : i.NONE;
                if (d !== i.NONE) {
                    p.is_graphable = !0, p.expression_type = t.getExpressionType(d, u.valueType), u.isShadeBetween() && (p.is_shade_between = !0);
                    var h = t.tableInfo(e, u);
                    h && (p.is_tableable = !0, p.table_info = h)
                }
                s.isList(u.valueType) && (p.is_concrete_list = !0), p.variables = p.is_graphable ? [] : t.getSliderVariables(e, u), p.is_single_identifier = t instanceof o.Identifier, u.isConstant && (p.constant_value = u.asValue());
                var f = u.getEvaluationInfo();
                if (!f || "=" !== p.operator || t.isConstant || t.isFunction || (p.is_evaluable = !0, p.zero_values = f), u instanceof o.OptimizedRegression) {
                    var m = {};
                    for (var g in u.parameters) u.parameters.hasOwnProperty(g) && (m[a.identifierToLatex(g)] = +u.parameters[g].asValue());
                    p.is_regression = !0, p.regression = {
                        parameters: m,
                        residualVariable: a.identifierToLatex(u.residualVariable),
                        residualSuggestionId: u.residualSuggestionId,
                        shouldSuggestLogMode: u.shouldSuggestLogMode,
                        statistics: u.statistics
                    }
                }
                var y = l(t);
                return y && y.discrete && (p.is_discrete_distribution = !0), p
            };
        return u.default = c, u
    }), define("math/statementanalysis", ["require", "math/evaluationstate", "pjs", "graphing/graphmode", "worker/workerconfig"], function(e) {
        var t = e("math/evaluationstate"),
            n = e("pjs"),
            r = e("graphing/graphmode"),
            i = e("worker/workerconfig");
        return n(function(e) {
            e.init = function(e, n, r) {
                this.policy = e, this.rawTree = n, this.concreteTree = r, this.evaluationState = t(e, n, r)
            }, e.exportTo = function(e, t) {
                this.rawTree.exportTo(e, this.concreteTree, t)
            }, e.graph = function(e) {
                return this.rawTree.graph(this.policy, this.concreteTree, e)
            }, e.getGraphMode = function() {
                return this.rawTree.getGraphMode(this.policy, this.concreteTree)
            }, e.getGraphInfo = function() {
                return this.rawTree.getGraphInfo(this.policy, this.concreteTree)
            }, e.shouldIntersect = function() {
                if (!this.evaluationState.is_graphable) return !1;
                if (!this.rawTree.userData.shouldGraph) return !1;
                if (!i.pointsOfInterest) return !1;
                var e = this.getGraphMode();
                return e === r.X || e === r.Y
            }
        })
    }), define("math/expression-types", ["require", "exports"], function(e, t) {
        "use strict";

        function n(e, n) {
            if (void 0 === e) return {
                points: !1,
                lines: !1,
                fill: !1
            };
            var r = t.EXPRESSION_PROP_DEFAULTS[e];
            switch (e) {
                case i.SINGLE_POINT:
                    return {
                        points: !0, lines: !1, fill: !1
                    };
                case i.POINT_LIST:
                case i.DOTPLOT:
                    return {
                        points: void 0 === n.points ? r.points : n.points, lines: void 0 === n.lines ? r.lines : n.lines, fill: !1
                    };
                case i.PARAMETRIC:
                case i.POLYGON:
                case i.X_OR_Y:
                case i.POLAR:
                case i.IMPLICIT:
                case i.HISTOGRAM:
                case i.BOXPLOT:
                case i.TTEST:
                case i.STATS:
                    return {
                        points: !1, lines: void 0 === n.lines ? r.lines : n.lines, fill: void 0 === n.fill ? r.fill : n.fill
                    };
                default:
                    return e
            }
        }

        function r(e) {
            if (void 0 === e) return !1;
            switch (e) {
                case i.SINGLE_POINT:
                case i.POINT_LIST:
                case i.PARAMETRIC:
                case i.POLYGON:
                case i.X_OR_Y:
                case i.POLAR:
                case i.IMPLICIT:
                    return !0;
                case i.HISTOGRAM:
                case i.BOXPLOT:
                case i.DOTPLOT:
                case i.TTEST:
                case i.STATS:
                    return !1;
                default:
                    return e
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var i;
        ! function(e) {
            e.X_OR_Y = "X_OR_Y", e.SINGLE_POINT = "SINGLE_POINT", e.POINT_LIST = "POINT_LIST", e.PARAMETRIC = "PARAMETRIC", e.POLAR = "POLAR", e.IMPLICIT = "IMPLICIT", e.POLYGON = "POLYGON", e.HISTOGRAM = "HISTOGRAM", e.DOTPLOT = "DOTPLOT", e.BOXPLOT = "BOXPLOT", e.TTEST = "TTEST", e.STATS = "STATS"
        }(i = t.ExpressionType || (t.ExpressionType = {})), t.EXPRESSION_PROP_DEFAULTS = {
            X_OR_Y: {
                points: !1,
                lines: !0,
                fill: !1
            },
            SINGLE_POINT: {
                points: !0,
                lines: !1,
                fill: !1
            },
            POINT_LIST: {
                points: !0,
                lines: !1,
                fill: !1
            },
            PARAMETRIC: {
                points: !1,
                lines: !0,
                fill: !1
            },
            POLAR: {
                points: !1,
                lines: !0,
                fill: !1
            },
            IMPLICIT: {
                points: !1,
                lines: !0,
                fill: !1
            },
            POLYGON: {
                points: !1,
                lines: !0,
                fill: !0
            },
            HISTOGRAM: {
                points: !1,
                lines: !0,
                fill: !0
            },
            DOTPLOT: {
                points: !0,
                lines: !1,
                fill: !1
            },
            BOXPLOT: {
                points: !1,
                lines: !0,
                fill: !1
            },
            TTEST: {
                points: !1,
                lines: !1,
                fill: !1
            },
            STATS: {
                points: !1,
                lines: !1,
                fill: !1
            }
        }, t.getReconciledExpressionProps = n, t.isClickableExpressionType = r
    }), define("math/features/analyze", ["require", "underscore", "parsenodes", "math/statementanalysis", "math/builtin", "math/builtinframe", "math/parsenode/builtinfunction", "math/errormsg", "math/comparators", "math/types", "graphing/graphmode", "math/expression-types", "math/distribution-spec"], function(e) {
        function t(e, t, n, r) {
            if (r.isError) return l(e, n, r);
            var i = r.getDependencies();
            switch (r.valueType) {
                case f.Distribution:
                case f.ListOfDistribution:
                    return l(e, n, r);
                case f.Point:
                case f.ListOfPoint:
                    return i.length ? e.validParametricVariables(i) ? l(e, n, r) : l(e, n, d.tooManyVariables(n.getSliderVariables(e, r)).setDependencies(i)) : l(e, n, r);
                case f.Number:
                case f.ListOfNumber:
                    switch (i.length) {
                        case 0:
                            return l(e, n, r);
                        case 1:
                            return e.validExpressionVariable(i[0]) ? l(e, n, r) : l(e, n, d.equationRequired(e.implicitDependency(i[0])).setDependencies(i));
                        default:
                            return e.validImplicitVariables(i) ? l(e, n, d.equationRequired().setDependencies(i)) : l(e, n, d.tooManyVariables(n.getSliderVariables(e, r)).setDependencies(i))
                    }
                    break;
                default:
                    return l(e, n, d.parseError())
            }
        }

        function n(e) {
            return p.pdf([e, s.FreeVariable("x")])
        }

        function r(e, t) {
            var n = this.tryGetConcreteTree(e, t),
                r = n.getDependencies();
            return r.length ? l(e, this, d.tooManyVariables(this.getSliderVariables(e, n)).setDependencies(r)) : l(e, this, this.tryGetConcreteTree(e, t))
        }

        function i(e) {
            return function(t, n) {
                var r = this.tryGetConcreteTree(t, n),
                    i = r.getDependencies();
                if (i.length) return l(t, this, d.tooManyVariables(this.getSliderVariables(t, r)).setDependencies(i));
                var o = l(t, this, this.tryGetConcreteTree(t, n));
                if (!r.isError) {
                    o.evaluationState.expression_type = g.TTEST;
                    var a = r.args.map(function(e) {
                        return e.asValue()
                    });
                    o.evaluationState.ttest_results = e.apply(null, a)
                }
                return o
            }
        }

        function o(e, t) {
            return e.filter(function(e) {
                return !t[e]
            })
        }
        var a = e("underscore"),
            s = e("parsenodes"),
            l = e("math/statementanalysis"),
            c = e("math/builtin"),
            u = e("math/builtinframe"),
            p = e("math/parsenode/builtinfunction"),
            d = e("math/errormsg"),
            h = e("math/comparators"),
            f = e("math/types"),
            m = e("graphing/graphmode"),
            g = e("math/expression-types").ExpressionType,
            y = e("math/distribution-spec").DistributionParameterDefaultsMap;
        s.Base.prototype.analyze = function(e, t) {
            return l(e, this, this.tryGetConcreteTree(e, t))
        }, s.FunctionCall.prototype.analyze = function(e, r) {
            var i = this.tryGetConcreteTree(e, r);
            return !i.isError && y[this._symbol] && 0 === i.getDependencies().length && (i = n(i).tryGetConcreteTree(e, r)), t(e, r, this, i)
        }, s.Expression.prototype.analyze = function(e, n) {
            return t(e, n, this, this.tryGetConcreteTree(e, n))
        }, s.FunctionDefinition.prototype.analyze = function(e, t) {
            if (u[this._symbol]) return this.asEquation().analyze(e, t);
            var n = this._symbol.split("_")[0];
            if (p[n]) return l(e, this, d.cannotRedefine(this._symbol, n));
            var r = this.tryGetConcreteTree(e, t);
            if (r.isError) return l(e, this, r);
            var i = this._argSymbols,
                o = r.getDependencies();
            if (-1 !== o.indexOf(this._symbol)) return l(e, this, d.selfReferentialFunction(this._symbol));
            var a = o.filter(function(e) {
                return -1 === i.indexOf(e)
            });
            return e.unplottablePolarFunction(this._symbol, o) ? l(e, this, d.unplottablePolarFunction()) : a.some(e.assignmentForbidden) ? l(e, this, d.addArgumentsToDefinition(a, this._symbol, i).setDependencies(o)) : a.length ? l(e, this, d.tooManyVariables(this.getSliderVariables(e, r)).setDependencies(o)) : l(e, this, r)
        }, s.Assignment.prototype.analyze = function(e, t, r) {
            var i = this._symbol;
            if (!e.validLHS(i)) return l(e, this, d.invalidLHS(i));
            if (u[i]) return this.asEquation().analyze(e, t);
            var o = this.tryGetConcreteTree(e, t);
            if (!o.isError && this._expression instanceof s.FunctionCall && y[this._expression._symbol] && 0 === o.getDependencies().length && (o = n(o).tryGetConcreteTree(e, t)), o.isError) return l(e, this, o);
            var a = o.getDependencies();
            if (this.isEquation(o)) return this.asEquation().analyze(e, t);
            if (a.length > 1) {
                var c = this.getSliderVariables(e, o);
                return c.length ? l(e, this, d.tooManyVariables(c).allowExport().setDependencies(a)) : l(e, this, o)
            }
            var p = this.getMoveStrategy(e, t, o, r);
            if (p) {
                var h = this.getDefaultDragMode(p);
                return l(e, this, s.MovablePoint(o.args, p, h))
            }
            return l(e, this, o)
        }, s.Regression.prototype.analyze = function(e, t, n, r, i) {
            return l(e, this, this.tryOptimize(e, t, n, r, i))
        }, s.Polygon.prototype.analyze = r, s.Histogram.prototype.analyze = r, s.DotPlot.prototype.analyze = r, s.BoxPlot.prototype.analyze = r, s.TTest.prototype.analyze = i(c.ttest), s.IndependentTTest.prototype.analyze = i(c.ittest), s.Stats.prototype.analyze = function(e, t) {
            var n = this.tryGetConcreteTree(e, t),
                r = n.getDependencies();
            if (r.length) return l(e, this, d.tooManyVariables(this.getSliderVariables(e, n)).setDependencies(r));
            var i = l(e, this, this.tryGetConcreteTree(e, t));
            if (!n.isError) {
                i.evaluationState.expression_type = g.STATS;
                var o = n.args.map(function(e) {
                    return e.asValue()
                });
                i.evaluationState.stats_results = c.stats.apply(null, o)
            }
            return i
        }, s.Equation.prototype.analyze = s.BaseComparator.prototype.analyze = function(e, t) {
            var n = this.trySolve(e, t);
            if (n.isError) return l(e, this, n);
            if (n instanceof s.SolvedEquation && n.getDependencies().length) {
                var r = n.getDependencies().concat(n._symbol);
                if (!e.validImplicitVariables(r)) return l(e, this, d.invalidImplicitVariables().setDependencies(r))
            }
            return this.getGraphMode(e, n) !== m.IMPLICIT || e.validImplicitVariables(n.getDependencies()) ? l(e, this, n) : l(e, this, d.invalidImplicitVariables().setDependencies(n.getDependencies()))
        }, s.DoubleInequality.prototype.analyze = function(e, t) {
            var n = this.tryGetConcreteTree(e, t);
            if (n.isError) return l(e, this, n);
            var r = n.getDependencies();
            return h.table[this._operators[0]].direction !== h.table[this._operators[1]].direction ? l(e, this, d.mismatchedDoubleInequality()) : e.validDoubleInequalitySymbol(n._symbol) && e.validDoubleInequalityVariables(r) ? r.length > 2 ? l(e, this, d.tooManyVariables(this.getSliderVariables(e, n)).setDependencies(r)) : -1 !== n._expressions[0].getDependencies().indexOf(n._symbol) || -1 !== n._expressions[1].getDependencies().indexOf(n._symbol) ? l(e, this, d.complicatedDoubleInequality().setDependencies(r)) : l(e, this, n) : l(e, this, d.invalidDoubleInequalityVariables().setDependencies(r))
        }, s.And.prototype.analyze = function(e, t) {
            var n = this.tryGetConcreteTree(e, t);
            if (n.isError) return l(e, this, n);
            var r = n.getDependencies();
            return r.length ? e.validDoubleInequalityVariables(r) ? l(e, this, d.complicatedDoubleInequality().setDependencies(r)) : l(e, this, d.tooManyVariables(this.getSliderVariables(e, n)).setDependencies(r)) : l(e, this, n)
        }, s.OrderedPair.prototype.analyze = function(e, n, r) {
            var i = this.tryGetConcreteTree(e, n);
            if (i.isError) return l(e, this, i);
            var o = this.getMoveStrategy(e, n, i, r);
            if (o) {
                var a = this.getDefaultDragMode(o);
                return l(e, this, s.MovablePoint(i.args, o, a))
            }
            return t(e, n, this, i)
        }, s.Table.prototype.analyze = function(e, t) {
            for (var n = Object.create(t), r = [], i = 0; i < this.columns.length; i++) {
                var a = this.columns[i].analyze(e, n, t);
                if (0 === i && (a.concreteTree.isIndependent ? e.validFirstColumnVariable(a.concreteTree.header._symbol) ? a.concreteTree.header._symbol : a = l(e, this.columns[i], d.invalidFirstTableColumn()) : a = l(e, this.columns[i], d.invalidDependentFirstTableColumn())), a.concreteTree.isIndependent) a.rawTree.exportToLocal(a.concreteTree, n);
                else if (!a.concreteTree.isError) {
                    var c = a.concreteTree.header.getDependencies(),
                        u = o(c, n);
                    u.length && (a = l(e, this.columns[i], d.tooManyVariables(u).setDependencies(u)))
                }
                r.push(a.concreteTree)
            }
            var p = s.Table(r),
                h = l(e, this, p);
            return h.evaluationState.is_graphable = !0, h
        }, s.TableColumn.prototype.analyze = function(e, t, n) {
            var r = this.header.tableError();
            if (r) return l(e, this, d.invalidTableHeader(r));
            var i = this.tryGetConcreteTree(e, t, n);
            if (i.isError) return l(e, this, i);
            if (i.header.isError) return l(e, this, i.header);
            if (i.values.isError) return l(e, this, i.values);
            for (var o = 0; o < i.values.length; o++)
                if (!i.values[o].isError) {
                    var a = this.values[o] && this.values[o].tableError();
                    if (a) i.values[o] = d.invalidTableEntry(a);
                    else {
                        var s = i.values[o].getDependencies();
                        s.length && (i.values[o] = d.tooManyVariables(s).setDependencies(s))
                    }
                } return l(e, this, i)
        }, s.Image.prototype.analyze = function(e, t, n) {
            var r = this.tryGetConcreteTree(e, t);
            if (r.radianAngle.isError || r.center.isError || r.width.isError || r.height.isError || r.opacity.isError) return l(e, this, r);
            var i = r.center.getDependencies(),
                o = r.radianAngle.getDependencies(),
                a = r.width.getDependencies(),
                c = r.height.getDependencies(),
                u = r.opacity.getDependencies();
            return i.length || o.length || a.length || c.length || u.length ? l(e, this, s.Image({
                center: i.length ? d.tooManyVariables(o).setDependencies(i) : r.center,
                radianAngle: o.length ? d.tooManyVariables(o).setDependencies(o) : r.radianAngle,
                width: a.length ? d.tooManyVariables(a).setDependencies(a) : r.width,
                height: c.length ? d.tooManyVariables(c).setDependencies(c) : r.height,
                opacity: u.length ? d.tooManyVariables(u).setDependencies(u) : r.opacity
            })) : (r.moveStrategy = this.getMoveStrategy(e, t, r, n), l(e, this, r))
        }, s.Slider.prototype.analyze = function(e, t) {
            var n, r = this.tryGetConcreteTree(e, t),
                i = r.sliderInfo;
            if (i.missingVars.length) {
                var o = a.unique(i.missingVars);
                n = l(e, this, d.tooManyVariables(e.sliderVariables(o)).setDependencies(o).allowExport())
            } else n = l(e, this, r);
            var s = n.evaluationState;
            s.assignment = i.exportedSymbol, s.slider_min_number = i.values.min, s.slider_max_number = i.values.max, s.slider_step_number = i.values.step, s.slider_min_valid = i.valids.min, s.slider_max_valid = i.valids.max, s.slider_step_valid = i.valids.step;
            var c = s.slider_min_valid && s.slider_max_valid && s.slider_step_valid;
            return s.is_slider = !0, s.raw_slider_latex = this.getInputString(), s.is_slidable = c, s.is_animatable = s.is_slidable && !s.is_graphable, delete s.is_evaluable, delete s.zero_values, i.errMsg && (s.error = i.errMsg.getError()), n
        }
    }), define("math/features/analyzeFourFunction", ["require", "parsenodes", "math/statementanalysis", "math/errormsg", "math/parsenode/builtinfunction", "math/builtinconstants"], function(e) {
        function t(e, t) {
            return r(e, this, i.inequalitiesUnsupported())
        }
        var n = e("parsenodes"),
            r = e("math/statementanalysis"),
            i = e("math/errormsg"),
            o = e("math/parsenode/builtinfunction"),
            a = e("math/builtinconstants");
        n.Base.prototype.analyzeFourFunction = function(e, t) {
            var n = this.tryGetConcreteTree(e, t);
            return n.isError ? r(e, this, n) : r(e, this, i.parseError())
        }, n.Expression.prototype.analyzeFourFunction = function(e, t) {
            var n = this.tryGetConcreteTree(e, t);
            if (n.isError) return r(e, this, n);
            var s = n.getDependencies();
            if (s.length > 0) {
                var l, c = s[0];
                return l = o.hasOwnProperty(c) ? i.functionUnsupported(c) : a.hasOwnProperty(c) ? i.constantUnsupported(c) : i.variablesUnsupported(c), r(e, this, l)
            }
            return r(e, this, n)
        }, n.Assignment.prototype.analyzeFourFunction = function(e, t) {
            return r(e, this, i.assignmentsUnsupported())
        }, n.FunctionDefinition.prototype.analyzeFourFunction = function(e, t) {
            return r(e, this, i.functionDefinitionsUnsupported())
        }, n.Equation.prototype.analyzeFourFunction = function(e, t) {
            return r(e, this, i.equationsUnsupported())
        }, n.And.prototype.analyzeFourFunction = t, n.DoubleInequality.prototype.analyzeFourFunction = t, n.BaseComparator.prototype.analyzeFourFunction = t, n.Regression.prototype.analyzeFourFunction = function(e, t) {
            return r(e, this, i.regressionsUnsupported())
        }, n.OrderedPair.prototype.analyzeFourFunction = function(e, t) {
            return r(e, this, i.pointsUnsupported())
        }
    }), define("math/features/analyzeScientific", ["require", "parsenodes", "math/statementanalysis", "math/errormsg", "math/builtinframe"], function(e) {
        function t(e, t) {
            return r(e, this, i.inequalitiesUnsupported())
        }
        var n = e("parsenodes"),
            r = e("math/statementanalysis"),
            i = e("math/errormsg"),
            o = e("math/builtinframe");
        n.Base.prototype.analyzeScientific = function(e, t) {
            var n = this.tryGetConcreteTree(e, t);
            return n.isError ? r(e, this, n) : r(e, this, i.parseError())
        }, n.Expression.prototype.analyzeScientific = function(e, t) {
            var n = this.tryGetConcreteTree(e, t);
            if (n.isError) return r(e, this, n);
            var o = n.getDependencies();
            return o.length > 0 ? r(e, this, i.tooManyVariables(o)) : r(e, this, n)
        }, n.Assignment.prototype.analyzeScientific = function(e, t) {
            var n = this._symbol;
            if (o[n]) return r(e, this, i.cannotRedefine(n));
            var a = this.tryGetConcreteTree(e, t);
            if (a.isError) return r(e, this, a);
            var s = a.getDependencies();
            return this.isEquation(a) ? r(e, this, i.equationsUnsupported()) : s.length > 0 ? r(e, this, i.tooManyVariables(s)) : r(e, this, a)
        }, n.FunctionDefinition.prototype.analyzeScientific = function(e, t) {
            if (o[this._symbol]) return r(e, this, i.cannotRedefine(this._symbol));
            var n = this.tryGetConcreteTree(e, t);
            if (n.isError) return r(e, this, n);
            var a = this._argSymbols,
                s = n.getDependencies();
            if (-1 !== s.indexOf(this._symbol)) return r(e, this, i.selfReferentialFunction(this._symbol));
            var l = s.filter(function(e) {
                return -1 === a.indexOf(e)
            });
            return l.length ? r(e, this, i.addArgumentsToDefinition(l, this._symbol, a)) : r(e, this, n)
        }, n.Equation.prototype.analyzeScientific = function(e, t) {
            return r(e, this, i.equationsUnsupported())
        }, n.And.prototype.analyzeScientific = t, n.DoubleInequality.prototype.analyzeScientific = t, n.BaseComparator.prototype.analyzeScientific = t, n.Regression.prototype.analyzeScientific = function(e, t) {
            return r(e, this, i.regressionsUnsupported())
        }, n.OrderedPair.prototype.analyzeScientific = function(e, t) {
            return r(e, this, i.pointsUnsupported())
        }
    }), define("math/features/analyzeSingleExpressionScientific", ["require", "parsenodes", "math/statementanalysis", "math/errormsg", "math/parsenode/builtinfunction", "math/builtinconstants"], function(e) {
        function t(e, t) {
            return r(e, this, i.inequalitiesUnsupported())
        }
        var n = e("parsenodes"),
            r = e("math/statementanalysis"),
            i = e("math/errormsg"),
            o = e("math/parsenode/builtinfunction"),
            a = e("math/builtinconstants");
        n.Base.prototype.analyzeSingleExpressionScientific = function(e, t) {
            var n = this.tryGetConcreteTree(e, t);
            return n.isError ? r(e, this, n) : r(e, this, i.parseError())
        }, n.Expression.prototype.analyzeSingleExpressionScientific = function(e, t) {
            var n = this.tryGetConcreteTree(e, t);
            if (n.isError) return r(e, this, n);
            var s = n.getDependencies();
            if (s.length > 0) {
                var l, c = s[0];
                return l = o.hasOwnProperty(c) ? i.functionUnsupported(c) : a.hasOwnProperty(c) ? i.constantUnsupported(c) : i.variablesUnsupported(c), r(e, this, l)
            }
            return r(e, this, n)
        }, n.Assignment.prototype.analyzeSingleExpressionScientific = function(e, t) {
            return r(e, this, i.assignmentsUnsupported())
        }, n.FunctionDefinition.prototype.analyzeSingleExpressionScientific = function(e, t) {
            return r(e, this, i.functionDefinitionsUnsupported())
        }, n.Equation.prototype.analyzeSingleExpressionScientific = function(e, t) {
            return r(e, this, i.equationsUnsupported())
        }, n.And.prototype.analyzeSingleExpressionScientific = t, n.DoubleInequality.prototype.analyzeSingleExpressionScientific = t, n.BaseComparator.prototype.analyzeSingleExpressionScientific = t, n.Regression.prototype.analyzeSingleExpressionScientific = function(e, t) {
            return r(e, this, i.regressionsUnsupported())
        }, n.OrderedPair.prototype.analyzeSingleExpressionScientific = function(e, t) {
            return r(e, this, i.pointsUnsupported())
        }
    }), define("graphing/reconcileDragMode", ["require", "exports", "graphing/dragmode"], function(e, t, n) {
        "use strict";

        function r(e) {
            return e ? "none" === e[0].type && "none" === e[1].type ? n.DragMode.NONE : "none" === e[1].type ? n.DragMode.X : "none" === e[0].type ? n.DragMode.Y : n.DragMode.XY : n.DragMode.NONE
        }

        function i(e, t) {
            var i = r(t);
            switch (e) {
                case n.DragMode.NONE:
                    return n.DragMode.NONE;
                case n.DragMode.AUTO:
                case n.DragMode.XY:
                    return i;
                case n.DragMode.X:
                    return i === n.DragMode.X || i === n.DragMode.XY ? n.DragMode.X : n.DragMode.NONE;
                case n.DragMode.Y:
                    return i === n.DragMode.Y || i === n.DragMode.XY ? n.DragMode.Y : n.DragMode.NONE;
                default:
                    return n.DragMode.NONE
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = i
    }), define("math/features/getgraphmode", ["require", "parsenodes", "graphing/graphmode", "graphing/reconcileDragMode", "graphing/dragmode", "math/types"], function(e) {
        function t(e, t) {
            var n;
            return n = e && e.hasOwnProperty("dragMode") ? e.dragMode === l.AUTO ? t.defaultDragMode : e.dragMode : t.defaultDragMode, s(n, t.moveStrategy)
        }

        function n(e, n) {
            var r = n.getDependencies();
            switch (n.valueType) {
                case c.Point:
                case c.ListOfPoint:
                    return n.isMovablePoint && t(this.userData, n) !== l.NONE ? a.XYPOINT_MOVABLE : 0 === r.length ? a.XYPOINT : e.validParametricVariables(r) ? a.PARAMETRIC : a.NONE;
                case c.Number:
                case c.ListOfNumber:
                    return 1 === r.length ? a.Y : a.NONE;
                default:
                    return a.NONE
            }
        }

        function r(e, t) {
            var n = t._expression.getDependencies();
            if (n.length > 1) return a.NONE;
            if (t._expression.valueType !== c.Number && t._expression.valueType !== c.ListOfNumber) return a.NONE;
            var r = t._symbol,
                i = n[0];
            return e.graphMode(r, i)
        }

        function i(e, t) {
            return t.isError ? a.NONE : a.VISUALIZATION
        }
        var o = e("parsenodes"),
            a = e("graphing/graphmode"),
            s = e("graphing/reconcileDragMode").default,
            l = e("graphing/dragmode").DragMode,
            c = e("math/types");
        o.Base.prototype.getGraphMode = function(e, t) {
            return a.NONE
        }, o.Expression.prototype.getGraphMode = n, o.Equation.prototype.getGraphMode = o.BaseComparator.prototype.getGraphMode = function(e, t) {
            var n = t.getDependencies();
            return t.isConstant ? a.NONE : t instanceof o.SolvedEquation ? 0 === n.length ? e.graphableAsConstant(t._symbol) ? e.constantGraphMode(t._symbol) : a.NONE : r(e, t) : n.length <= 2 ? a.IMPLICIT : a.NONE
        }, o.DoubleInequality.prototype.getGraphMode = function(e, t) {
            return e.constantGraphMode(t._symbol)
        }, o.Assignment.prototype.getGraphMode = function(e, t) {
            if (t instanceof o.SolvedEquation) return r(e, t);
            if (this.isEquation(t)) return this.asEquation().getGraphMode(e, t);
            var i = t.getDependencies();
            switch (t.valueType) {
                case c.Number:
                case c.ListOfNumber:
                    switch (i.length) {
                        case 0:
                            return e.graphableAsConstant(this._symbol) ? e.constantGraphMode(this._symbol) : a.NONE;
                        case 1:
                            return t.valueType !== c.ListOfNumber || e.graphableListVariables(this._symbol, i[0]) ? this.isSlider ? a.NONE : e.graphMode(this._symbol, i[0]) : a.NONE;
                        default:
                            return a.NONE
                    }
                    break;
                default:
                    return n.call(this, e, t)
            }
        }, o.FunctionDefinition.prototype.getGraphMode = function(e, t) {
            if (1 !== this._argSymbols.length) return a.NONE;
            var n = e.graphMode(this._symbol, this._argSymbols[0]),
                r = t.getDependencies();
            switch (t.valueType) {
                case c.Number:
                case c.ListOfNumber:
                    switch (r.length) {
                        case 0:
                            return n;
                        case 1:
                            return r[0] !== this._argSymbols[0] ? a.NONE : n;
                        default:
                            return a.NONE
                    }
                    break;
                default:
                    return a.NONE
            }
        }, o.Regression.prototype.getGraphMode = function(e, t) {
            return this.isLhsSimple && t.isModelValid ? 1 !== t.model.getDependencies().length ? a.NONE : a.Y : a.NONE
        }, o.Polygon.prototype.getGraphMode = function(e, t) {
            return t.isError ? a.NONE : a.POLYGONFILL
        }, o.Histogram.prototype.getGraphMode = i, o.DotPlot.prototype.getGraphMode = i, o.BoxPlot.prototype.getGraphMode = i, o.Image.prototype.getGraphMode = function(e, t) {
            return this.userData.showPoints ? this.center.isError || this.radianAngle.isError || this.width.isError || this.height.isError || this.opacity.isError ? a.NONE : a.XYPOINT : a.NONE
        }
    }), define("math/features/getgraphinfo", ["require", "parsenodes", "math/builtinframe", "math/domaintypes", "math/policy"], function(e) {
        var t = e("parsenodes"),
            n = e("math/builtinframe"),
            r = e("math/domaintypes"),
            i = e("math/policy").defaultPolicy;
        t.Base.prototype.getGraphInfo = function(e, t) {
            var n, i, o = t.getDependencies();
            switch (o.length) {
                case 0:
                    n = t.getLinearCoefficients(), i = t.boundDomain("x");
                    break;
                case 1:
                    i = t.boundDomain(o[0]), "known" === i.type && (n = t.getLinearCoefficients());
                    break;
                case 2:
                    i = r.unknownDomain()
            }
            return {
                graphMode: this.getGraphMode(e, t),
                color: this.userData.color,
                pointStyle: this.userData.pointStyle,
                lineStyle: this.userData.lineStyle,
                operator: this.getOperator(),
                isLinear: !!n,
                linearCoefficients: n,
                domainBound: i
            }
        }, t.Base.prototype.getLinearCoefficients = function() {
            var e = this.getDependencies();
            switch (e.length) {
                case 0:
                    return [+this.asValue(), 0];
                case 1:
                    if (this.polynomialOrder(e[0]) > 1) return;
                    var t = this.getPolynomialCoefficients(e[0]);
                    return [t[0] ? +t[0].getConcreteTree(i, n).asValue() : 0, t[1] ? +t[1].getConcreteTree(i, n).asValue() : 0];
                default:
                    return
            }
        }, t.OrderedPair.prototype.getLinearCoefficients = function() {
            var e = this.args[0].getLinearCoefficients(),
                t = this.args[1].getLinearCoefficients();
            if (e && t) return [e, t]
        }
    }), define("math/features/getMoveStrategy", ["require", "parsenodes", "math/types", "math/maybe-rational", "math/builtinframe"], function(e) {
        function t(e) {
            return {
                type: "none",
                inputString: e
            }
        }

        function n(e) {
            return {
                type: "updateCoordinate",
                inputString: e
            }
        }

        function r(e, t, n) {
            return {
                type: "updateSlider",
                inputString: e,
                id: t,
                coefficients: n
            }
        }

        function i(e, t, n, r, i, o) {
            for (var a = t.getDependencies(), s = 0; s < a.length; s++)
                if (i[a[s]]) return !1;
            for (var l = a.length - 1; l >= 0; l--) {
                var c = a[l];
                if (!o[c]) {
                    var u = r[c];
                    if (void 0 !== u) {
                        var p = n[c];
                        if (1 === p.order) {
                            var f = p.tree,
                                m = f.getPolynomialCoefficients(c),
                                g = m[1] ? m[1].getConcreteTree(e, d) : h,
                                y = m[0] ? m[0].getConcreteTree(e, d) : h;
                            if (y.isConstant && g.isConstant && isFinite(y.asValue()) && isFinite(g.asValue()) && 0 !== g.asValue()) {
                                return {
                                    symbol: c,
                                    id: u,
                                    coefficients: [-y.asValue() / g.asValue(), 1 / g.asValue()]
                                }
                            }
                        }
                    }
                }
            }
            return !1
        }

        function o(e) {
            for (var t = {}, n = 0; n < e.length; n++) t[e[n]] = !0;
            return t
        }

        function a(e, t) {
            var n = o(e),
                r = {};
            for (var i in t) {
                var a = t[i].evaluationState.assignment;
                t[i].evaluationState.is_slidable && n[a] && (r[a] = i)
            }
            return r
        }

        function s(e, t, n, r) {
            for (var i = [], o = 0; o < n.length; o++) {
                var a = n[o],
                    s = {};
                i.push(s);
                for (var l = 0; l < r.length; l++) {
                    var u = r[l],
                        p = Object.create(t);
                    p[u] = c.FreeVariable(u);
                    var d = a.tryGetConcreteTree(e, p);
                    d.isError ? s[u] = {
                        tree: d,
                        order: 1 / 0
                    } : s[u] = {
                        tree: d,
                        order: d.polynomialOrder(u)
                    }
                }
            }
            return i
        }

        function l(e, t, n) {
            for (var r = 0; r < e.length; r++) {
                var i = e[r];
                0 !== t[i].order && (n[i] = !0)
            }
        }
        var c = e("parsenodes"),
            u = e("math/types"),
            p = e("math/maybe-rational").maybeRational,
            d = e("math/builtinframe"),
            h = c.Constant(p(0, 1));
        c.Base.prototype.getMoveStrategy = function() {}, c.Assignment.prototype.getMoveStrategy = function(e, t, n, r) {
            if (this._expression instanceof c.OrderedPair) return this._expression.getMoveStrategy(e, t, n, r)
        }, c.OrderedPair.prototype.getMoveStrategy = function(e, o, c, p) {
            if (c.valueType === u.Point && 0 === c.getDependencies().length) {
                for (var d = this.getDependencies(), h = a(d, p), f = Object.keys(h), m = this.args, g = s(e, o, m, f), y = [], v = {}, b = {}, x = 0; x < 2; x++) {
                    var w = m[x],
                        _ = w.getInputString();
                    if (w.isConstant) y[x] = n(_);
                    else {
                        var S = i(e, w, g[x], h, v, b);
                        S && (y[x] = r(_, S.id, S.coefficients), v[S.symbol] = !0, l(f, g[x], b)), y[x] || (y[x] = t(_))
                    }
                }
                if ("none" !== y[0].type || "none" !== y[1].type) return y
            }
        }, c.Image.prototype.getMoveStrategy = function(e, o, c, u) {
            if ((!this.userData || !1 !== this.userData.shouldGraph) && "OrderedPair" === c.center.type && c.center.args[0].isConstant && c.center.args[1].isConstant && c.width.isConstant && c.height.isConstant && c.radianAngle.isConstant && c.opacity.isConstant) {
                var p = this.getDependencies(),
                    d = a(p, u),
                    h = Object.keys(d),
                    f = [this.width, this.height];
                "OrderedPair" === this.center.type && f.push(this.center.args[0], this.center.args[1]);
                for (var m = [], g = {}, y = {}, v = s(e, o, f, h), b = [2, 3, 0, 1], x = 0; x < b.length; x++) {
                    var w = b[x],
                        _ = f[w];
                    if (_) {
                        var S = _.getInputString();
                        if (_.isConstant) m[w] = n(S);
                        else {
                            var E = i(e, _, v[w], d, g, y);
                            E && (m[w] = r(S, E.id, E.coefficients), g[E.symbol] = !0, l(h, v[w], y)), m[w] || (m[w] = t(S))
                        }
                    } else m[w] = t("")
                }
                if ("none" !== m[0].type || "none" !== m[1].type || "none" !== m[2].type || "none" !== m[3].type) return m
            }
        }
    }), define("math/features/getDefaultDragMode", ["require", "parsenodes", "graphing/dragmode"], function(e) {
        var t = e("parsenodes"),
            n = e("graphing/dragmode").DragMode;
        t.Base.prototype.getMoveStrategy = function() {
            return n.NONE
        }, t.Assignment.prototype.getDefaultDragMode = function(e) {
            return "none" !== e[0].type && "none" !== e[1].type ? n.XY : "none" !== e[0].type ? n.X : "none" !== e[1].type ? n.Y : n.NONE
        }, t.OrderedPair.prototype.getDefaultDragMode = function(e) {
            return "updateSlider" === e[0].type && "updateSlider" === e[1].type ? n.XY : "updateSlider" === e[0].type ? n.X : "updateSlider" === e[1].type ? n.Y : n.NONE
        }
    }), define("math/features/tableinfo", ["require", "parsenodes", "math/types", "graphing/label", "math/distribution-spec"], function(e) {
        var t = e("parsenodes"),
            n = t.List,
            r = e("math/types"),
            i = e("graphing/label"),
            o = e("math/distribution-spec").getFunctionSpecFromTree;
        t.Base.prototype.tableInfo = function(e, t) {
            return !1
        }, t.Identifier.prototype.tableInfo = function(e, t) {
            return !!e.validFirstColumnVariable(this._symbol) && {
                independent_variable: this._symbol,
                dependent_column: this.getInputString(),
                by_reference: !1
            }
        }, t.Expression.prototype.tableInfo = function(e, t) {
            var i = t.getDependencies();
            if (o(this)) return !1;
            switch (t.valueType) {
                case r.Point:
                case r.ListOfPoint:
                    if (0 !== i.length) return !1;
                    if (t.isMovablePoint && ("updateSlider" === t.moveStrategy[0].type || "updateSlider" === t.moveStrategy[1].type)) return !1;
                    return {
                        independent_variable: "x", dependent_column: "y", by_reference: !1, values: n.wrap(t).mapElements(function(e) {
                            return e.asArray()
                        })
                    };
                case r.Number:
                    if (1 !== i.length) return !1;
                    var a = i[0];
                    return !!e.validFirstColumnVariable(a) && {
                        independent_variable: a,
                        dependent_column: this.getInputString(),
                        by_reference: !1
                    };
                default:
                    return !1
            }
        }, t.Assignment.prototype.tableInfo = function(e, n) {
            if (n instanceof t.SolvedEquation) return !1;
            if (!this.getInputString().length) return !1;
            if (o(this)) return !1;
            var r = n.getDependencies();
            if (r.length > 1) return !1;
            var a;
            if (0 === r.length) {
                if (!e.tableableAsConstant(this._symbol)) return !1;
                a = e.implicitIndependent(this._symbol)
            } else a = r[0];
            return !!e.validFirstColumnVariable(a) && {
                independent_variable: a,
                dependent_column: e.assignmentForbidden(this._symbol) ? i.trimLatex(this.getInputString().replace(/[^=]*=/, "")) : i.trimLatex(this.getInputString().split("=")[0]),
                by_reference: !e.assignmentForbidden(this._symbol)
            }
        }, t.FunctionDefinition.prototype.tableInfo = function(e, t) {
            if (1 !== this._argSymbols.length) return !1;
            if (!this.getInputString().length) return !1;
            if (t.getDependencies().length > 1) return !1;
            var n = this._argSymbols[0];
            if (!e.validFirstColumnVariable(n)) return !1;
            var r = e.assignmentForbidden(this._symbol);
            return {
                independent_variable: n,
                dependent_column: r ? i.trimLatex(this.getInputString().replace(/[^=]*=/, "")) : i.trimLatex(this.getInputString().split("=")[0]),
                by_reference: !r
            }
        }, t.BaseComparator.prototype.tableInfo = function(e, t) {
            return !1
        }, t.DoubleInequality.prototype.tableInfo = function(e, t) {
            return !1
        }, t.Equation.prototype.tableInfo = function(e, t) {
            return !1
        }
    }), define("math/features/tableerror", ["require", "parsenodes", "lib/worker-i18n"], function(e) {
        var t = e("parsenodes"),
            n = e("lib/worker-i18n");
        t.Base.prototype.tableError = function() {
            return this.isInequality() ? n.t("Inequalities are not allowed.") : !(this instanceof t.Expression) && n.t("This type of expression is not allowed.")
        }, t.List.prototype.tableError = function() {
            return n.t("Lists are not allowed.")
        }, t.Equation.prototype.tableError = t.Assignment.prototype.tableError = function() {
            return n.t("Equations are not allowed.")
        }, t.FunctionDefinition.prototype.tableError = function() {
            return n.t("Function definitions are not allowed.")
        }, t.Regression.prototype.tableError = function() {
            return n.t("Regressions are not allowed.")
        }
    }), define("math/features/islinear", ["require", "parsenodes"], function(e) {
        var t = e("parsenodes");
        t.Base.prototype.isLinear = function(e) {
            return !1
        }, t.Expression.prototype.isLinear = function(e) {
            return this.polynomialOrder(e) <= 1
        }, t.List.prototype.isLinear = function(e) {
            return this.args.every(function(t) {
                return t.isLinear(e)
            })
        }, t.Broadcast.prototype.isLinear = function(e) {
            for (var n = this._replacedSymbols, r = this._expression, i = this._lists, o = {}, a = 0; a < i.length; a++)
                if (i[a].dependsOn(e)) {
                    if (!i[a].isLinear(e)) return !1;
                    o[n[a]] = t.FreeVariable(e)
                } return r.substitute(o).isLinear(e)
        }
    }), define("math/curve-accumulator", ["require", "exports", "./distance"], function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = function() {
            function e(e) {
                e ? (this.xtolerance = e.xtolerance || e.tolerance || 0, this.ytolerance = e.ytolerance || e.tolerance || 0, this.map = e.map) : this.xtolerance = this.ytolerance = 0, this.segments = [], this.segment = [], this.pivotPoint = void 0, this.pendingPoint = void 0
            }
            return e.prototype.colinear = function(e, t, r) {
                this.map && (e = this.map(e), t = this.map(t), r = this.map(r));
                var i = n.pointToSegmentParameter(r[0], r[1], e[0], e[1], t[0], t[1]);
                if (i < 1) return !1;
                var o = [e[0] + i * (t[0] - e[0]), e[1] + i * (t[1] - e[1])];
                return Math.abs(r[0] - o[0]) <= this.xtolerance && Math.abs(r[1] - o[1]) <= this.ytolerance
            }, e.prototype.addPoint = function(e) {
                if (this.xtolerance < 0 && this.ytolerance < 0) return void this.segment.push(e[0], e[1]);
                if (!this.segment.length) return void this.segment.push(e[0], e[1]);
                var t = [this.segment[this.segment.length - 2], this.segment[this.segment.length - 1]];
                if (e[0] !== t[0] || e[1] !== t[1]) {
                    if (!this.pivotPoint || !this.pendingPoint) return this.pivotPoint = e, void(this.pendingPoint = e);
                    (!this.colinear(t, this.pivotPoint, e) || n.hypot(t[0] - e[0], t[1] - e[1]) < n.hypot(t[0] - this.pendingPoint[0], t[1] - this.pendingPoint[1])) && (this.flushPending(), this.pivotPoint = e), this.pendingPoint = e
                }
            }, e.prototype.flushPending = function() {
                this.pendingPoint && (this.segment.push(this.pendingPoint[0], this.pendingPoint[1]), this.pivotPoint = void 0, this.pendingPoint = void 0)
            }, e.prototype.breakSegment = function() {
                this.flushPending(), this.segment.length > 2 && this.segments.push(this.segment), this.segment = []
            }, e.prototype.getSegments = function() {
                return this.breakSegment(), this.segments
            }, e.prototype.finish = function() {
                return {
                    segments: this.getSegments(),
                    resolved: !0
                }
            }, e
        }();
        t.default = r
    }), define("math/implicit-plotter", ["require", "exports", "./distance", "./curve-accumulator"], function(e, t, n, r) {
        "use strict";

        function i(e, t) {
            var n = o(e, t);
            return {
                segments: n.contours.strokeSegments,
                fillSegments: n.contours.fillSegments,
                resolved: n.quadTree.resolved
            }
        }

        function o(e, t) {
            var n = Math.pow(2, -H),
                r = c(t, n),
                i = c(t, 2 * n),
                o = d(e, r, i),
                a = C(o.root, e, r);
            return {
                paddedDomain: r,
                rootDomain: i,
                quadTree: o,
                triangles: a,
                contours: V(a, e, r)
            }
        }

        function a(e, t, n) {
            return {
                x: e,
                y: t,
                z: n
            }
        }

        function s(e, t, n) {
            return {
                x: e,
                y: t,
                isZero: n
            }
        }

        function l(e, t, n) {
            return {
                vertices: [e, t, n],
                visited: !1,
                next: void 0
            }
        }

        function c(e, t) {
            var n = (1 + t) * e.xmin - t * e.xmax,
                r = (1 + t) * e.xmax - t * e.xmin;
            return {
                xmin: n,
                ymin: (1 + t) * e.ymin - t * e.ymax,
                xmax: r,
                ymax: (1 + t) * e.ymax - t * e.ymin,
                xtolerance: e.xtolerance,
                ytolerance: e.ytolerance
            }
        }

        function u(e, t) {
            return {
                depth: e,
                vertices: t,
                children: void 0,
                center: void 0
            }
        }

        function p(e, t, n) {
            e.center = E(e.vertices[0], e.vertices[1], e.vertices[2], e.vertices[3], t, n)
        }

        function d(e, t, n) {
            var r = h(e, n),
                i = [],
                o = [];
            o.push(r);
            var a = 1,
                s = !0;
            e: for (; o.length;) {
                var l = i;
                i = o, o = l;
                for (var c = void 0; c = i.pop();)
                    if (m(c, e, t)) {
                        if (f(c, e), !c.children) {
                            s = !1;
                            break e
                        }
                        if (o.push(c.children[0]), o.push(c.children[1]), o.push(c.children[2]), o.push(c.children[3]), (a += 3) >= K) {
                            s = !1;
                            break e
                        }
                    } else p(c, e, t)
            }
            for (var u = 0; u < i.length; u++) p(i[u], e, t);
            for (var u = 0; u < o.length; u++) p(o[u], e, t);
            return {
                root: r,
                resolved: s
            }
        }

        function h(e, t) {
            var n = t.xmin,
                r = t.xmax,
                i = t.ymin,
                o = t.ymax;
            return u(0, [w(n, o, e), w(r, o, e), w(r, i, e), w(n, i, e)])
        }

        function f(e, t) {
            var n = e.depth + 1,
                r = e.vertices[0],
                i = e.vertices[1],
                o = e.vertices[2],
                a = e.vertices[3],
                s = _(r, i, t),
                l = _(i, o, t),
                c = _(o, a, t),
                p = _(a, r, t),
                d = _(r, o, t);
            e.children = [u(n, [r, s, d, p]), u(n, [s, i, l, d]), u(n, [d, l, o, c]), u(n, [p, d, c, a])]
        }

        function m(e, t, n) {
            if (e.depth < H) return !0;
            if (b(e, n)) return !1;
            if (v(e, n)) return !1;
            var r = e.vertices[0],
                i = e.vertices[1],
                o = e.vertices[2],
                a = e.vertices[3];
            if (isNaN(r.z) && isNaN(i.z) && isNaN(o.z) && isNaN(a.z)) return !1;
            if (isNaN(r.z) || isNaN(i.z) || isNaN(o.z) || isNaN(a.z)) return !0;
            var s = E(r, i, o, a, t, n),
                l = S(r, i, t, n),
                c = S(i, o, t, n),
                u = S(o, a, t, n),
                p = S(a, r, t, n);
            return y(r, l, t) || y(i, l, t) || y(i, c, t) || y(o, c, t) || y(o, u, t) || y(a, u, t) || y(a, p, t) || y(r, p, t) || g(r, l, s, t, n) || g(l, i, s, t, n) || g(i, c, s, t, n) || g(c, o, s, t, n) || g(o, u, s, t, n) || g(u, a, s, t, n) || g(a, p, s, t, n) || g(p, r, s, t, n)
        }

        function g(e, t, r, i, o) {
            if (e.z > 0 == t.z > 0 && t.z > 0 == r.z > 0) return !1;
            var a, s, l, c;
            if (e.z > 0 == t.z > 0) {
                if (a = _(e, t, i), a.z > 0 != e.z > 0) return !0;
                s = I(e, r, i, o), l = I(t, r, i, o), c = I(a, r, i, o)
            } else if (t.z > 0 == r.z > 0) {
                if (a = _(t, r, i), a.z > 0 != t.z > 0) return !0;
                s = I(t, e, i, o), l = I(r, e, i, o), c = I(a, e, i, o)
            } else {
                if (a = _(r, e, i), a.z > 0 != r.z > 0) return !0;
                s = I(r, t, i, o), l = I(e, t, i, o), c = I(a, t, i, o)
            }
            var u = o.xtolerance,
                p = o.ytolerance;
            return n.pointToSegment(p * c.x, u * c.y, p * s.x, u * s.y, p * l.x, u * l.y) > u * p
        }

        function y(e, t, n) {
            if (isNaN(e.z) && isNaN(t.z)) return !1;
            if (isNaN(e.z) || isNaN(t.z)) return e.z > 0 || t.z > 0;
            var r = _(e, t, n),
                i = 4 * r.z - t.z - 3 * e.z,
                o = (n(.9999 * e.x + 1e-4 * t.x, .9999 * e.y + 1e-4 * t.y) - e.z) / 1e-4,
                a = Math.max(Math.abs(e.z), Math.abs(t.z));
            return Math.abs(i - o) > .125 * a
        }

        function v(e, t) {
            return e.vertices[1].x - e.vertices[0].x < 10 * t.xtolerance || e.vertices[0].y - e.vertices[3].y < 10 * t.ytolerance
        }

        function b(e, t) {
            return e.vertices[0].x < t.xmin || e.vertices[0].y > t.ymax || e.vertices[2].x > t.xmax || e.vertices[2].y < t.ymin
        }

        function x(e, t) {
            return e.x < t.xmin || e.x > t.xmax || e.y < t.ymin || e.y > t.ymax
        }

        function w(e, t, n) {
            return a(e, t, n(e, t))
        }

        function _(e, t, n) {
            return w(.5 * (e.x + t.x), .5 * (e.y + t.y), n)
        }

        function S(e, t, n, r) {
            if (x(e, r) || x(t, r)) return _(e, t, n);
            if (isNaN(e.z) || isNaN(t.z)) return T(e, t, n, r);
            if (e.z > 0 != t.z > 0) return _(e, t, n);
            var i = n(.99 * e.x + .01 * t.x, .99 * e.y + .01 * t.y) - e.z,
                o = t.z - n(.01 * e.x + .99 * t.x, .01 * e.y + .99 * t.y);
            return isNaN(i) || isNaN(o) ? _(e, t, n) : i > 0 == o > 0 ? _(e, t, n) : M(a(e.x, e.y, i), a(t.x, t.y, o), n)
        }

        function E(e, t, n, r, i, o) {
            var a = S(e, n, i, o);
            return e.z > 0 == n.z > 0 && a.z > 0 != e.z > 0 ? a : (a = S(t, r, i, o), t.z > 0 == r.z > 0 && a.z > 0 != t.z > 0 ? a : _(e, n, i))
        }

        function M(e, t, n) {
            if (isNaN(e.z)) return t;
            if (isNaN(t.z)) return e;
            if (isFinite(e.z) || isFinite(t.z)) {
                if (isFinite(e.z)) {
                    if (isFinite(t.z)) {
                        var r = 1 - e.z / t.z,
                            i = 1 - t.z / e.z;
                        return w(e.x / r + t.x / i, e.y / r + t.y / i, n)
                    }
                    return e
                }
                return t
            }
            return _(e, t, n)
        }

        function I(e, t, n, r) {
            var i = e.x,
                o = t.x,
                l = e.y,
                c = t.y,
                u = e.z,
                p = t.z,
                d = r.xtolerance,
                h = r.ytolerance;
            if (x(e, r) || x(t, r)) {
                var f = _(e, t, n);
                return s(f.x, f.y, !1)
            }
            for (; Math.abs(i - o) > d || Math.abs(l - c) > h;) {
                var m = .5 * (i + o),
                    g = .5 * (l + c),
                    y = n(m, g);
                y > 0 == u > 0 ? (i = m, l = g, u = y) : (o = m, c = g, p = y)
            }
            if (isNaN(u)) return s(o, c, !1);
            if (isNaN(p)) return s(i, l, !1);
            var v = M(a(i, l, u), a(o, c, p), n),
                b = 0 === u || 0 === p || 0 === v.z || v.z >= u == p >= v.z && Math.abs(v.z) < 1e250;
            return s(v.x, v.y, b)
        }

        function T(e, t, n, r) {
            if (isNaN(e.z) === isNaN(t.z)) return _(e, t, n);
            if (isNaN(e.z)) {
                var i = e;
                e = t, t = i
            }
            for (var o = e.x, s = t.x, l = e.y, c = t.y, u = e.z, p = r.xtolerance, d = r.ytolerance; Math.abs(o - s) > p || Math.abs(l - c) > d;) {
                var h = .5 * (o + s),
                    f = .5 * (l + c),
                    m = n(h, f);
                isNaN(m) === isNaN(u) ? (o = h, l = f, u = m) : (s = h, c = f)
            }
            return a(o, l, u)
        }

        function C(e, t, n) {
            var r = {
                triangles: [],
                edgeCache: {},
                domain: n,
                fn: t
            };
            return k(e, r), r.triangles
        }

        function k(e, t) {
            e.children && (k(e.children[0], t), k(e.children[1], t), k(e.children[2], t), k(e.children[3], t), D(e.children[0], e.children[1], t), D(e.children[3], e.children[2], t), P(e.children[1], e.children[2], t), P(e.children[0], e.children[3], t))
        }

        function D(e, t, n) {
            e.children && t.children ? (D(e.children[1], t.children[0], n), D(e.children[2], t.children[3], n)) : e.children ? (D(e.children[1], t, n), D(e.children[2], t, n)) : t.children ? (D(e, t.children[0], n), D(e, t.children[3], n)) : L(e, t, n)
        }

        function P(e, t, n) {
            e.children && t.children ? (P(e.children[2], t.children[1], n), P(e.children[3], t.children[0], n)) : e.children ? (P(e.children[2], t, n), P(e.children[3], t, n)) : t.children ? (P(e, t.children[1], n), P(e, t.children[0], n)) : A(e, t, n)
        }

        function L(e, t, n) {
            if (e.center && t.center) {
                var r, i;
                e.depth >= t.depth ? (r = S(e.vertices[1], e.vertices[2], n.fn, n.domain), i = O(e.vertices[1], t.center, e.vertices[2], e.center, r)) : (r = S(t.vertices[0], t.vertices[3], n.fn, n.domain), i = O(t.vertices[0], t.center, t.vertices[3], e.center, r)), N(i, n.edgeCache, n.domain);
                for (var o = 0; o < 4; o++) n.triangles.push(i[o])
            }
        }

        function A(e, t, n) {
            if (e.center && t.center) {
                var r, i;
                e.depth >= t.depth ? (r = S(e.vertices[3], e.vertices[2], n.fn, n.domain), i = O(e.vertices[2], t.center, e.vertices[3], e.center, r)) : (r = S(t.vertices[1], t.vertices[0], n.fn, n.domain), i = O(t.vertices[1], t.center, t.vertices[0], e.center, r)), N(i, n.edgeCache, n.domain);
                for (var o = 0; o < 4; o++) n.triangles.push(i[o])
            }
        }

        function O(e, t, n, r, i) {
            return [l(e, i, t), l(t, i, n), l(n, i, r), l(r, i, e)]
        }

        function F(e, t, n) {
            return e.z > 0 && !x(e, n) && (!(t.z > 0) || x(t, n))
        }

        function q(e, t) {
            return e.x + "," + e.y + "," + t.x + "," + t.y
        }

        function N(e, t, n) {
            R(e[0], e[1], e[2], q(e[1].vertices[2], e[1].vertices[0]), t, n), R(e[1], e[2], e[3], q(e[2].vertices[0], e[2].vertices[2]), t, n), R(e[2], e[3], e[0], q(e[3].vertices[2], e[3].vertices[0]), t, n), R(e[3], e[0], e[1], q(e[0].vertices[0], e[0].vertices[2]), t, n)
        }

        function R(e, t, n, r, i, o) {
            var a = t.vertices[0],
                s = t.vertices[1],
                l = t.vertices[2];
            F(s, l, o) && (t.next = n), F(a, s, o) && (t.next = e), F(l, a, o) && j(t, r, i), F(a, l, o) && B(t, r, i)
        }

        function B(e, t, n) {
            n[t] ? n[t].next = e : n[t] = e
        }

        function j(e, t, n) {
            n[t] ? e.next = n[t] : n[t] = e
        }

        function V(e, t, n) {
            for (var i = {
                    fillAccumulator: new r.default(n),
                    strokeAccumulator: new r.default(n),
                    fn: t,
                    domain: n
                }, o = 0; o < e.length; o++) {
                var a = e[o];
                a.next && !a.visited && z(a, i)
            }
            return {
                strokeSegments: i.strokeAccumulator.finish().segments,
                fillSegments: i.fillAccumulator.finish().segments
            }
        }

        function z(e, t) {
            for (;;) {
                var n = e.vertices[0],
                    r = e.vertices[1],
                    i = e.vertices[2];
                if (U(n, r, t), U(r, i, t), U(i, n, t), e.visited) break;
                if (!e.next) break;
                e.visited = !0, e = e.next
            }
            t.strokeAccumulator.breakSegment(), t.fillAccumulator.breakSegment()
        }

        function U(e, t, n) {
            if (F(e, t, n.domain)) {
                var r = I(e, t, n.fn, n.domain);
                n.fillAccumulator.addPoint([r.x, r.y]), r.isZero ? n.strokeAccumulator.addPoint([r.x, r.y]) : n.strokeAccumulator.breakSegment()
            }
        }

        function G(e) {
            for (var t = [], n = 0; n < e.length; n++) {
                var r = e[n];
                t.push([r.vertices[0].x, r.vertices[0].y, r.vertices[1].x, r.vertices[1].y, r.vertices[2].x, r.vertices[2].y, r.vertices[0].x, r.vertices[0].y])
            }
            return t
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var H = 5,
            K = Math.pow(2, 14);
        t.sampleImplicit = i, t.sampleImplicitDiagnostic = o, t.buildQuadTree = d, t.triangulate = C, t.traceContours = V, t.displayTriangles = G
    }), define("math/poi-finding-accumulator", ["require", "exports", "worker/workerconfig", "tslib", "./curve-accumulator", "./poi"], function(e, t, n, r, i, o) {
        "use strict";

        function a(e) {
            return Math.abs(e) < 5e-8
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var s = function(e) {
            function t(t, n, r) {
                var i = e.call(this, t) || this;
                return i.domain = t, i.fn = n, i.derivative = r, i.poiData = {
                    zeros: {
                        x: [],
                        y: []
                    },
                    intercept: {
                        x: [],
                        y: []
                    },
                    extrema: {
                        x: [],
                        y: []
                    }
                }, i.zeroBuffer = [], i.extremumBuffer = [], i
            }
            return r.__extends(t, e), t.prototype.getPOI = function() {
                return n.pointsOfInterest ? (void 0 !== this.fn && (this.poiData.intercept = this.findIntercept(this.fn)), this.poiData) : {
                    zeros: {
                        x: [],
                        y: []
                    },
                    intercept: {
                        x: [],
                        y: []
                    },
                    extrema: {
                        x: [],
                        y: []
                    }
                }
            }, t.prototype.addLinearZero = function(e) {
                var t = -e[0] / e[1];
                this.isOutsideDomain(t) || (this.poiData.zeros = {
                    x: [t],
                    y: [0]
                })
            }, t.prototype.addLinearIntercept = function(e) {
                this.isOutsideDomain(0) || (this.poiData.intercept = {
                    x: [0],
                    y: [e[0]]
                })
            }, t.prototype.isOutsideDomain = function(e) {
                return !this.domain || void 0 === this.domain.min || void 0 === this.domain.max || (e < this.domain.min || e > this.domain.max || isNaN(e))
            }, t.prototype.addPoint = function(t) {
                0 === this.segment.length && a(t[1]) && (this.poiData.zeros.x.push(t[0]), this.poiData.zeros.y.push(t[1])), this.updateZeroBuffer(t), this.updateExtremumBuffer(t), e.prototype.addPoint.call(this, t)
            }, t.prototype.updateZeroBuffer = function(e) {
                if (this.fn) {
                    if (!isFinite(e[0]) || !isFinite(e[1])) return void(this.zeroBuffer.length = 0);
                    switch (this.zeroBuffer.length) {
                        case 0:
                            if (a(e[1])) return;
                            return void this.zeroBuffer.push(e);
                        case 1:
                            if (0 === e[1]) return void this.zeroBuffer.push(e);
                            if (e[1] > 0 != this.zeroBuffer[0][1] > 0) {
                                var t = o.default.bisectZero(this.zeroBuffer[0][0], this.zeroBuffer[0][1], e[0], e[1], this.fn);
                                return t && (this.poiData.zeros.x.push(t[0]), this.poiData.zeros.y.push(t[1])), this.zeroBuffer.length = 0, void this.zeroBuffer.push(e)
                            }
                            return this.zeroBuffer.length = 0, void this.zeroBuffer.push(e);
                        case 2:
                            if (0 === e[1]) return;
                            if (e[1] > 0 != this.zeroBuffer[0][1] > 0) {
                                var t = o.default.flatCenter(this.zeroBuffer[0][0], this.zeroBuffer[0][1], this.zeroBuffer[1][0], this.zeroBuffer[1][1], e[0], e[1], this.fn);
                                return t && (this.poiData.zeros.x.push(t[0]), this.poiData.zeros.y.push(t[1])), this.zeroBuffer.length = 0, void this.zeroBuffer.push(e)
                            }
                            return this.zeroBuffer.length = 0, void this.zeroBuffer.push(e)
                    }
                }
            }, t.prototype.updateExtremumBuffer = function(e) {
                if (this.fn) {
                    if (!isFinite(e[0]) || !isFinite(e[1])) return void(this.zeroBuffer.length = 0);
                    switch (this.extremumBuffer.length) {
                        case 0:
                            return void this.extremumBuffer.push(e);
                        case 1:
                            return e[1] === this.extremumBuffer[0][1] && (this.extremumBuffer.length = 0), void this.extremumBuffer.push(e);
                        case 2:
                            if (e[1] === this.extremumBuffer[1][1]) return void this.extremumBuffer.push(e);
                            if (e[1] > this.extremumBuffer[1][1] != this.extremumBuffer[1][1] > this.extremumBuffer[0][1]) {
                                var t = this.bisectExtremumUsingDerivative(this.extremumBuffer[0][0], this.extremumBuffer[0][1], this.extremumBuffer[1][0], this.extremumBuffer[1][1], e[0], e[1]);
                                if (t) {
                                    this.poiData.extrema.x.push(t[0]), this.poiData.extrema.y.push(t[1]);
                                    !!!o.default.bisectJump(this.extremumBuffer[0][0], this.extremumBuffer[0][1], t[0], t[1], e[0], e[1], this.fn, this.ytolerance) && t[0] > this.segment[this.segment.length - 2] && (this.pendingPoint = t)
                                }
                                return this.extremumBuffer.shift(), void this.extremumBuffer.push(e)
                            }
                            return this.extremumBuffer.shift(), void this.extremumBuffer.push(e);
                        case 3:
                            if (e[1] === this.extremumBuffer[1][1]) return;
                            if (e[1] > this.extremumBuffer[1][1] != this.extremumBuffer[1][1] > this.extremumBuffer[0][1]) {
                                var t = void 0,
                                    n = .5 * (this.extremumBuffer[1][0] + this.extremumBuffer[2][0]),
                                    r = this.fn(n);
                                return t = r === this.extremumBuffer[1][1] ? o.default.flatCenter(this.extremumBuffer[0][0], this.extremumBuffer[0][1], this.extremumBuffer[1][0], this.extremumBuffer[1][1], e[0], e[1], this.fn) : this.bisectExtremumUsingDerivative(this.extremumBuffer[1][0], this.extremumBuffer[1][1], n, r, this.extremumBuffer[2][0], this.extremumBuffer[2][1]), t && (this.poiData.extrema.x.push(t[0]), this.poiData.extrema.y.push(t[1])), this.extremumBuffer.shift(), this.extremumBuffer.shift(), void this.extremumBuffer.push(e)
                            }
                            return this.extremumBuffer.shift(), this.extremumBuffer.shift(), void this.extremumBuffer.push(e)
                    }
                }
            }, t.prototype.bisectExtremumUsingDerivative = function(e, t, n, r, i, a) {
                if (this.fn) {
                    var s;
                    if (this.derivative) {
                        var l = this.derivative(e),
                            c = this.derivative(i);
                        if (!isNaN(l) && !isNaN(c) && l < 0 != c < 0) {
                            var u = o.default.bisectZero(e, l, i, c, this.derivative);
                            u && (s = [u[0], this.fn(u[0])])
                        }
                    }
                    return s || (s = o.default.bisectExtremum(e, t, n, r, i, a, this.fn)), s
                }
            }, t.prototype.breakSegment = function() {
                this.zeroBuffer.length = 0, this.extremumBuffer.length = 0, this.flushPending(), this.segment.length > 2 && (this.segments.push(this.segment), a(this.segment[this.segment.length - 1]) && (this.poiData.zeros.x.push(this.segment[this.segment.length - 2]), this.poiData.zeros.y.push(this.segment[this.segment.length - 1]))), this.segment = []
            }, t.prototype.findIntercept = function(e) {
                if (!e) return {
                    x: [],
                    y: []
                };
                var t = e(0);
                return isFinite(t) ? {
                    x: [0],
                    y: [e(0)]
                } : {
                    x: [],
                    y: []
                }
            }, t.prototype.finish = function() {
                return {
                    segments: this.getSegments(),
                    resolved: !0,
                    poi: this.getPOI()
                }
            }, t
        }(i.default);
        t.default = s
    }), define("math/plotter", ["require", "exports", "./distance", "./poi", "./implicit-plotter", "./curve-accumulator", "./poi-finding-accumulator", "graphing/graphmode", "./domaintypes"], function(e, t, n, r, i, o, a, s, l) {
        "use strict";

        function c(e, t) {
            for (var n, r = new a.default(t, e), i = t.min; i <= t.max + t.step / 2; i += t.step) n = e(i), isFinite(n) ? r.addPoint([i, n]) : r.breakSegment();
            return r.finish()
        }

        function u(e, t) {
            var n = new a.default(t),
                r = e[0] + t.min * e[1],
                i = e[0] + t.max * e[1];
            return isFinite(r) && isFinite(i) ? (n.addPoint([t.min, r]), n.addPoint([t.max, i]), n.addLinearZero(e), n.addLinearIntercept(e), n.finish()) : n.finish()
        }

        function p(e, t) {
            var n = u(e[0], t),
                r = u(e[1], t);
            return n.segments.length && r.segments.length && 4 === n.segments[0].length && 4 === r.segments[0].length ? {
                segments: [
                    [n.segments[0][1], r.segments[0][1], n.segments[0][3], r.segments[0][3]]
                ],
                resolved: !0
            } : {
                segments: [],
                resolved: !0
            }
        }

        function d(e, t) {
            var n = e(t),
                r = n[0],
                i = n[1];
            return {
                segments: [
                    [r, i, r, i]
                ],
                resolved: !0
            }
        }

        function h(e, t, i) {
            var o = i.fn,
                a = i.jumpTolerance,
                s = e[0],
                l = e[1],
                c = t[0],
                u = t[1],
                p = n.mean(s, c),
                d = o(p);
            return r.default.bisectJump(s, l, p, d, c, u, o, a)
        }

        function f(e, t, n) {
            var r = t,
                i = e(r);
            return isFinite(i) || (r = t + n, i = e(r)), isFinite(i) || (r = t - n, i = e(r)), [r, i]
        }

        function m(e, t, n) {
            var i, o, a, s, l, c, u, p = new k(e, t, n),
                d = t.step / 10,
                h = t.min;
            i = f(e, h, d), u = i[0], c = i[1];
            var m = [u, c];
            isFinite(c) && p.accumulator.addPoint([u, c]);
            for (var g = Math.ceil((t.max - t.min) / t.step), y = 1; y <= g; y++) h = (g - y) / g * t.min + y / g * t.max, o = f(e, h, d), u = o[0], c = o[1], isFinite(c) && isFinite(m[1]) ? (a = C(m, [u, c], p), u = a[0], c = a[1], p.accumulator.addPoint([u, c])) : isFinite(c) && !isFinite(m[1]) ? (l = r.default.bisectFinite(m[0], m[1], u, c, e)) && (l[0] !== u && p.accumulator.addPoint(l), s = C(l, [u, c], p), u = s[0], c = s[1], p.accumulator.addPoint([u, c])) : !isFinite(c) && isFinite(m[1]) && (l = r.default.bisectFinite(m[0], m[1], u, c, e)) && (l = C(m, l, p), l[0] !== m[0] && p.accumulator.addPoint(l), p.accumulator.breakSegment()), m = [u, c];
            return p.accumulator.finish()
        }

        function g(e) {
            for (var t = e.fn, n = e.domain, r = n.min, i = n.max, o = Math.floor(r), a = Math.ceil(i), s = [], l = o; l <= a; l++) {
                var c = t(l);
                isFinite(l) && isFinite(c) && s.push([l, c])
            }
            return {
                segments: s,
                resolved: !0
            }
        }

        function y(e, t, n, r) {
            function i(e, t) {
                var i = t % 2 == 0 ? 1 : -1;
                if (!r && -1 === i) return !1;
                for (var o = t * (Math.PI / n), a = [l, l + 1, l + 2, l + 3], s = !1, c = 0, p = a.length; c < p; c++) {
                    var d = e(a[c]),
                        h = e(a[c] + o);
                    if (isFinite(d) && isFinite(h) && (s = !0), isFinite(d) !== isFinite(h) || Math.abs(d - i * h) > u) return !1
                }
                return !!s
            }
            var o, a, s, l = t.min,
                c = t.max - t.min,
                u = t.xtolerance && t.ytolerance ? Math.min(t.xtolerance, t.ytolerance) : t.tolerance ? t.tolerance : 0,
                p = Math.floor(c / (Math.PI / n));
            for (o = 1; o <= p; o++)
                if (i(e, o)) {
                    for (s = o, a = 2; a * o <= p; a++) i(e, a * o) || (s = void 0);
                    if (s) break
                } return s ? s * (Math.PI / n) : null
        }

        function v(e) {
            return [e[1] * Math.cos(e[0]), e[1] * Math.sin(e[0])]
        }

        function b(e, t) {
            return t.map = v, m(e, t)
        }

        function x(e, t) {
            for (var n = e.min, r = e.max, i = e.step, o = r - n, a = Math.ceil(o / i), s = o / a, l = 0; l < a; l++) t(n + l * s);
            t(r)
        }

        function w(e, t) {
            if (t.max < t.min) return {
                segments: [],
                resolved: !0
            };
            var n = new o.default(t),
                r = t.min,
                i = e(r);
            isFinite(i[0]) && isFinite(i[1]) && n.addPoint(i);
            var a;
            return x(t, function(t) {
                a = e(t), _(e, r, i, t, a, 10, n), r = t, i = a
            }), n.finish()
        }

        function _(e, t, r, i, o, a, s) {
            if (i !== t) {
                var l = s.xtolerance,
                    c = s.ytolerance,
                    u = n.mean(t, i),
                    p = e(u),
                    d = isFinite(r[0]) && isFinite(r[1]),
                    h = isFinite(o[0]) && isFinite(o[1]),
                    f = isFinite(p[0]) && isFinite(p[1]);
                if (0 === a || u === t || u === i) return s.breakSegment(), void(h && s.addPoint(o));
                if (d || h) {
                    if (d !== h) {
                        for (var m = t, g = i, y = r, v = o; t !== u && u !== i;) f == d ? (t = u, r = p, d = f) : (i = u, o = p, h = f), u = t + (i - t) / 2, p = e(u), f = isFinite(p[0]) && isFinite(p[1]);
                        return void(d ? (_(e, m, y, t, r, a - 1, s), s.breakSegment()) : (s.breakSegment(), s.addPoint(o), _(e, i, o, g, v, a - 1, s)))
                    }
                    if (d && f && h) {
                        var b = n.pointToSegmentParameter(p[0], p[1], r[0], r[1], o[0], o[1]);
                        if (b > .2 && b < .8 && Math.abs(p[0] - (r[0] + b * (o[0] - r[0]))) <= l && Math.abs(p[1] - (r[1] + b * (o[1] - r[1]))) <= c) return void s.addPoint(o)
                    }
                    r[0] === p[0] && r[1] === p[1] || _(e, t, r, u, p, a - 1, s), o[0] === p[0] && o[1] === p[1] || _(e, u, p, i, o, a - 1, s)
                }
            }
        }

        function S(e) {
            if (!e) return !1;
            var t = e.viewport.xmin,
                n = e.viewport.xmax,
                r = e.viewport.ymin,
                i = e.viewport.ymax;
            return !(!isFinite(t) || !isFinite(n) || n <= t) && (!(!isFinite(r) || !isFinite(i) || i <= r) && (!(!isFinite(e.screen.width) || e.screen.width <= 0) && !(!isFinite(e.screen.height) || e.screen.height <= 0)))
        }

        function E(e, t, n) {
            var r, i, o = e.viewport.xmin,
                a = e.viewport.xmax,
                c = e.viewport.ymin,
                u = e.viewport.ymax,
                p = e.trigAngleMultiplier || 1,
                d = e.oversample || 4,
                h = 1 / d * (a - o) / e.screen.width,
                f = 1 / d * (u - c) / e.screen.height,
                m = t.domainBound;
            switch (t.graphMode) {
                case s.X:
                    switch (r = l.intersectDomains(l.knownDomain([c, u]), m), r.type) {
                        case "empty":
                            return !1;
                        case "known":
                            c = r.bounds[0], u = r.bounds[1]
                    }
                    i = {
                        min: c,
                        max: u,
                        xtolerance: f,
                        ytolerance: h,
                        step: f
                    };
                    break;
                case s.Y:
                    switch (r = l.intersectDomains(l.knownDomain([o, a]), m), r.type) {
                        case "empty":
                            return !1;
                        case "known":
                            o = r.bounds[0], a = r.bounds[1]
                    }
                    i = {
                        min: o,
                        max: a,
                        xtolerance: h,
                        ytolerance: f,
                        step: h
                    };
                    break;
                case s.POLAR:
                    if (!t.domain) throw new Error("Expected polar graph to have domain");
                    if (i = {
                            min: t.domain.min,
                            max: t.domain.max,
                            step: 2 * Math.PI / p / 1e3,
                            tolerance: Math.min(h, f)
                        }, !t.domain.isExplicit) {
                        var g = y(n, i, p, "=" === t.operator);
                        g && (i.max = i.min + g)
                    }
                    i.step = Math.max(i.step, (i.max - i.min) / 11999);
                    break;
                case s.PARAMETRIC:
                    var v = t.domain ? t.domain.min : 0,
                        b = t.domain ? t.domain.max : 1,
                        x = t.domain ? t.domain.step : .01;
                    switch (r = l.intersectDomains(l.knownDomain([v, b]), m), r.type) {
                        case "empty":
                            return !1;
                        case "known":
                            v = r.bounds[0], b = r.bounds[1]
                    }
                    i = {
                        min: v,
                        max: b,
                        step: x,
                        xtolerance: h,
                        ytolerance: f
                    };
                    break;
                case s.IMPLICIT:
                    i = {
                        xmin: o,
                        xmax: a,
                        ymin: c,
                        ymax: u,
                        xtolerance: h,
                        ytolerance: f
                    };
                    break;
                default:
                    return !1
            }
            return i
        }

        function M(e) {
            var t, n, r, o = e.viewState,
                a = e.graphInfo,
                l = e.compiled,
                c = e.derivative,
                h = e.discrete,
                f = e.maxOverride,
                y = l.fn,
                v = E(o, a, y),
                x = a.graphMode;
            if (v) {
                switch (x) {
                    case s.X:
                    case s.Y:
                        var _ = c ? c.fn : void 0;
                        if (h) {
                            var S = v,
                                M = S.min,
                                I = S.max,
                                T = S.step;
                            t = g({
                                fn: y,
                                domain: {
                                    min: Math.max(M, 0),
                                    max: void 0 !== f ? Math.min(f, I) : I,
                                    step: T
                                }
                            })
                        } else t = a.isLinear ? u(a.linearCoefficients, v) : m(y, v, _);
                        break;
                    case s.POLAR:
                        t = b(y, v);
                        break;
                    case s.IMPLICIT:
                        t = i.sampleImplicit(y, v);
                        break;
                    case s.PARAMETRIC:
                        v.step || (v.step = (v.max - v.min) / 1e3), t = v.max === v.min ? d(y, v.min) : a.isLinear ? p(a.linearCoefficients, v) : w(y, v);
                        break;
                    default:
                        throw new Error("Programming Error: unexpected graphmode " + x)
                }
                r = t.poi
            } else t = {
                segments: [],
                resolved: !0
            };
            if ((!r || r.zeros.x.length + r.extrema.x.length + r.intercept.x.length > 250) && (r = {
                    zeros: {
                        x: [],
                        y: []
                    },
                    extrema: {
                        x: [],
                        y: []
                    },
                    intercept: {
                        x: [],
                        y: []
                    }
                }), x === s.X)
                for (var C in r)
                    if (r.hasOwnProperty(C)) {
                        var k = C;
                        n = r[k].y, r[k].y = r[k].x, r[k].x = n
                    } var D = {
                segments: t.segments,
                resolved: t.resolved,
                graphMode: x,
                color: a.color,
                style: h ? a.pointStyle : a.lineStyle,
                operator: a.operator,
                poi: r,
                compiled: l
            };
            if (x === s.POLAR) {
                var P = v;
                D.sampledDomain = {
                    min: P.min,
                    max: P.max,
                    step: P.step
                }
            }
            return t.fillSegments && (D.fillSegments = t.fillSegments), D
        }

        function I(e, t, n) {
            var r, i, o, a, l = [],
                c = null;
            switch (n) {
                case s.POLAR:
                    c = v;
                    break;
                case s.X:
                    c = function(e) {
                        return [e[1], e[0]]
                    }
            }
            for (r = 0; r < e.length; r++)
                for (a = e[r], i = 0; i < a.length; i += 2) o = [a[i], a[i + 1]], c && (o = c(o)), l.push(o[0], o[1]);
            for (r = t.length - 1; r >= 0; r--)
                for (a = t[r], i = a.length - 2; i >= 0; i -= 2) o = [a[i], a[i + 1]], c && (o = c(o)), l.push(o[0], o[1]);
            return l
        }

        function T(e, t, r) {
            for (var i = function(e) {
                    var t = e[e.length - 1];
                    return t[t.length - 2]
                }, o = [], a = 0, s = 0, l = [], c = [], u = -1 / 0, p = -1 / 0;;) {
                if (u <= p) {
                    if (a >= t.length) break;
                    c.push(t[a++])
                }
                if (p <= u) {
                    if (s >= e.length) break;
                    l.push(e[s++])
                }
                if (u = i(c), p = i(l), n.approx(u, p, 4)) {
                    o.push(I(l, c, r)), c = [], l = [];
                    var d = Math.max(u, p);
                    u = d, p = d
                }
            }
            return o
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var C = function(e, t, n) {
                var r = n.fn,
                    i = n.jumpTolerance,
                    o = n.accumulator;
                if (!isFinite(i) || i <= 0) return t;
                var a = h(e, t, n);
                if (!a) return t;
                for (var s = (t[0] - e[0]) / 10, l = [-s, s], c = t, u = 0; u < l.length; u++) {
                    var p = e[0] + l[u],
                        d = r(p);
                    isFinite(d) || (p = e[0], d = e[1], p = e[0], d = e[1]);
                    var f = t[0] + l[u],
                        m = r(f);
                    if (isFinite(m) ? c = [f, m] : (f = t[0], m = t[1]), h([p, d], [f, m], n)) {
                        var g = a[0],
                            y = a[1];
                        return o.addPoint(g), o.breakSegment(), o.addPoint(y), t
                    }
                }
                return c
            },
            k = function() {
                function e(e, t, n) {
                    this.derivative = n, this.accumulator = new a.default(t, e, n), this.fn = e, this.jumpTolerance = t.ytolerance || t.tolerance || 0
                }
                return e
            }();
        t.default = {
            sampleXYNaive: c,
            sampleLinear: u,
            sampleXY: m,
            findPiPeriod: y,
            samplePolar: b,
            sampleParametricRecursive: w,
            subsampleParametricRecursive: _,
            validateViewState: S,
            computeDomain: E,
            computeGraphData: M,
            polygonsFromSegments: T
        }
    }), define("math/cdf-branches", ["require", "exports", "tslib", "lib/deepCopy", "math/plotter", "math/domaintypes", "expressions/styles"], function(e, t, n, r, i, o, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var s = function(e, t) {
                var r = e.segments,
                    i = t.segments,
                    o = r.concat(i);
                return n.__assign({}, e, {
                    segments: o
                })
            },
            l = function(e) {
                var t = e.viewState,
                    n = e.graphInfo,
                    s = e.compiled,
                    l = e.derivative,
                    c = e.bounds,
                    u = e.included,
                    p = e.discrete,
                    d = r.default(n),
                    h = o.intersectDomains(n.domainBound, o.knownDomain(c));
                if ("known" === h.type) return d.domainBound = h, p ? d.pointStyle = u ? a.PointStyle.POINT : a.PointStyle.OPEN : d.lineStyle = a.LineStyle.SOLID, i.default.computeGraphData({
                    graphInfo: d,
                    viewState: t,
                    compiled: s,
                    derivative: l,
                    discrete: p
                })
            };
        t.makeCDFTopBranches = function(e) {
            var t, n = e.viewState,
                r = e.graphInfo,
                o = e.compiled,
                a = e.derivative,
                c = e.bounds,
                u = e.discrete,
                p = e.maxOverride,
                d = c[0],
                h = c[1],
                f = [];
            if (u) {
                d = Math.ceil(d), h = Math.floor(h);
                var m = void 0 !== p ? p : 1 / 0;
                if (d === -1 / 0 && h >= m) t = l({
                    bounds: [d, m],
                    included: !0,
                    viewState: n,
                    graphInfo: r,
                    compiled: o,
                    derivative: a,
                    discrete: u
                }), f.push(t);
                else if (d === -1 / 0 && h < 1 / 0) t = l({
                    bounds: [d, h],
                    included: !0,
                    viewState: n,
                    graphInfo: r,
                    compiled: o,
                    derivative: a,
                    discrete: u
                }), f.push(t), f.push(l({
                    bounds: [h + 1, m],
                    included: !1,
                    viewState: n,
                    graphInfo: r,
                    compiled: o,
                    derivative: a,
                    discrete: u
                }));
                else if (d > -1 / 0 && h >= m) t = l({
                    bounds: [d, m],
                    included: !0,
                    viewState: n,
                    graphInfo: r,
                    compiled: o,
                    derivative: a,
                    discrete: u
                }), f.push(l({
                    bounds: [-1 / 0, d - 1],
                    included: !1,
                    viewState: n,
                    graphInfo: r,
                    compiled: o,
                    derivative: a,
                    discrete: u
                })), f.push(t);
                else {
                    t = l({
                        bounds: [d, h],
                        included: !0,
                        viewState: n,
                        graphInfo: r,
                        compiled: o,
                        derivative: a,
                        discrete: u
                    });
                    var g = l({
                            bounds: [-1 / 0, d - 1],
                            included: !1,
                            viewState: n,
                            graphInfo: r,
                            compiled: o,
                            derivative: a,
                            discrete: u
                        }),
                        y = l({
                            bounds: [h + 1, m],
                            included: !1,
                            viewState: n,
                            graphInfo: r,
                            compiled: o,
                            derivative: a,
                            discrete: u
                        });
                    f.push(t);
                    var v = void 0;
                    g && y && (v = s(g, y), f.push(v))
                }
            } else t = l({
                bounds: [d, h],
                included: !0,
                viewState: n,
                graphInfo: r,
                compiled: o,
                derivative: a,
                discrete: u
            }), f.push(i.default.computeGraphData({
                viewState: n,
                graphInfo: r,
                compiled: o,
                derivative: a
            }));
            return {
                cdfTopBranch: t,
                topBranches: f
            }
        }
    }), define("math/copy-defined-pois", ["require", "exports"], function(e, t) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var n = function(e) {
            for (var t = [], n = [], r = e.length, i = 0; i < r; i++) t.push(e[i][0]),
                n.push(e[i][1]);
            return {
                defined: {
                    x: t,
                    y: n
                }
            }
        };
        t.default = n
    }), define("expressions/slider_loop_modes", ["require", "exports"], function(e, t) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.LOOP_FORWARD_REVERSE = "LOOP_FORWARD_REVERSE", t.LOOP_FORWARD = "LOOP_FORWARD"
    }), define("lib/default-spec", ["require", "exports", "underscore", "lib/deepCopy"], function(e, t, n, r) {
        "use strict";

        function i(e, t) {
            var r = {};
            for (var i in t) t.hasOwnProperty(i) && (n.isEqual(e[i], t[i]) || (r[i] = t[i]));
            return r
        }

        function o(e, t) {
            var r = void 0,
                i = {};
            for (var o in t) t.hasOwnProperty(o) && (n.isEqual(e[o], t[o]) || (i[o] = t[o], r = i));
            return r
        }

        function a(e, t) {
            t || (t = {});
            var n = {};
            for (var i in e) e.hasOwnProperty(i) && !t.hasOwnProperty(i) && (n[i] = r.default(e[i]));
            for (var i in t) t.hasOwnProperty(i) && (n[i] = t[i]);
            return n
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.stripDefaults = i, t.stripDefaultsAndMaybeReturnUndefined = o, t.populateDefaults = a
    }), define("graphing-calc/json/expression", ["require", "exports", "tslib", "expressions/opacity", "expressions/styles", "graphing/dragmode", "main/label-sizes", "main/label-orientations", "expressions/slider_loop_modes", "lib/default-spec"], function(e, t, n, r, i, o, a, s, l, c) {
        "use strict";

        function u(e) {
            return n.__assign({}, t.DEFAULTS, e, {
                slider: n.__assign({}, t.SLIDER_DEFAULTS, e.slider),
                cdf: n.__assign({}, t.CDF_DEFAULTS, e.cdf),
                vizProps: n.__assign({}, t.VIZ_DEFAULTS, e.vizProps),
                clickableInfo: n.__assign({}, t.CLICKABLEINFO_DEFAULTS, e.clickableInfo)
            })
        }

        function p(e) {
            var r = c.stripDefaults(t.DEFAULTS, n.__assign({}, e, {
                    slider: c.stripDefaults(t.SLIDER_DEFAULTS, e.slider)
                })),
                i = c.stripDefaultsAndMaybeReturnUndefined(t.CDF_DEFAULTS, e.cdf);
            void 0 === i ? delete r.cdf : r.cdf = i;
            var o = c.stripDefaultsAndMaybeReturnUndefined(t.VIZ_DEFAULTS, e.vizProps);
            void 0 === o ? delete r.vizProps : r.vizProps = o;
            var a = c.stripDefaultsAndMaybeReturnUndefined(t.CLICKABLEINFO_DEFAULTS, e.clickableInfo);
            return void 0 === a ? delete r.clickableInfo : r.clickableInfo = a, r
        }

        function d(e) {
            return {
                type: "statement",
                id: e.id,
                latex: e.latex,
                label: e.label,
                color: e.color,
                fill: e.fill,
                fillOpacity: e.fillOpacity,
                points: e.points,
                lines: e.lines,
                pointStyle: e.pointStyle,
                lineStyle: e.lineStyle,
                dragMode: e.dragMode,
                labelSize: e.labelSize,
                labelOrientation: e.labelOrientation,
                verticalLabel: e.verticalLabel,
                interactiveLabel: e.interactiveLabel,
                editableLabelMode: e.editableLabelMode,
                residualVariable: e.residualVariable,
                regressionParameters: e.regressionParameters,
                isLogModeRegression: e.isLogModeRegression,
                showLabel: e.showLabel,
                shouldGraph: e.hidden,
                slider: {
                    min: e.slider.hardMin ? e.slider.min : "",
                    max: e.slider.hardMax ? e.slider.max : "",
                    step: e.slider.step
                },
                parametricDomain: e.parametricDomain,
                polarDomain: e.polarDomain,
                cdf: e.cdf,
                vizProps: e.vizProps,
                clickableInfo: e.clickableInfo
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.CDF_DEFAULTS = {
            show: !1,
            min: "",
            max: ""
        }, t.VIZ_DEFAULTS = {
            breadth: "",
            axisOffset: "",
            alignedAxis: "x",
            binAlignment: "center",
            dotplotXMode: "exact",
            dotplotSize: "medium",
            histogramMode: ""
        }, t.CLICKABLEINFO_DEFAULTS = {
            enabled: !1,
            description: "",
            assignment: "",
            expression: ""
        };
        var h;
        ! function(e) {
            e.None = "NONE", e.Math = "MATH", e.Text = "TEXT"
        }(h = t.EditableLabelMode || (t.EditableLabelMode = {})), t.DEFAULT_SLIDER_PERIOD = 4e3, t.DEFAULTS = {
            folderId: "",
            latex: "",
            color: "",
            showLabel: !1,
            label: "",
            cdf: t.CDF_DEFAULTS,
            vizProps: t.VIZ_DEFAULTS,
            clickableInfo: t.CLICKABLEINFO_DEFAULTS,
            hidden: !1,
            secret: !1,
            dragMode: o.DragMode.AUTO,
            labelSize: a.LabelSize.MEDIUM,
            labelOrientation: s.LabelOrientation.DEFAULT,
            verticalLabel: !1,
            interactiveLabel: !1,
            editableLabelMode: h.None,
            residualVariable: "",
            isLogModeRegression: !1,
            pointStyle: i.PointStyle.POINT,
            lineStyle: i.LineStyle.SOLID,
            fillOpacity: "" + r.DEFAULT,
            regressionParameters: {},
            displayEvaluationAsFraction: !1,
            slider: {},
            polarDomain: {
                min: "",
                max: ""
            },
            parametricDomain: {
                min: "",
                max: ""
            },
            points: void 0,
            lines: void 0,
            fill: void 0
        }, t.SLIDER_DEFAULTS = {
            hardMin: !1,
            hardMax: !1,
            animationPeriod: t.DEFAULT_SLIDER_PERIOD,
            loopMode: l.LOOP_FORWARD_REVERSE,
            playDirection: 1,
            isPlaying: !1,
            min: "-10",
            max: "10",
            step: ""
        }, t.inflateDefaults = u, t.stripDefaults = p, t.computeParsableState = d
    }), define("math/features/graph", ["require", "underscore", "parsenodes", "math/plotter", "graphing/graphmode", "math/comparators", "graphing/dragmode", "math/expression-types", "math/types", "math/builtin", "math/cdf-branches", "math/copy-defined-pois", "math/distribution-spec", "graphing-calc/json/expression"], function(e) {
        function t(e, t) {
            for (var n = 1 / 0, r = -1 / 0, i = 1 / 0, o = -1 / 0, a = 0; a < t.length; a++)
                for (var s = t[a], l = 0; l < s.length; l += 2) {
                    var c = s[l],
                        u = s[l + 1];
                    c < n && (n = c), c > r && (r = c), u < i && (i = u), u > o && (o = u)
                }
            if (isFinite(n) && isFinite(i)) return {
                type: e,
                xmin: n,
                ymin: i,
                xmax: r,
                ymax: o
            }
        }

        function n(e, t, n) {
            var r = {};
            n -= .5 * t;
            for (var i = e.length - 1; i >= 0; i--) {
                var o = e[i],
                    a = Math.floor((o - n) / t);
                r[a] ? r[a].data.push(o) : r[a] = {
                    id: a,
                    data: [o],
                    min: a * t + n,
                    max: a * t + n + t,
                    center: a * t + n + t / 2
                }
            }
            return r
        }

        function r(e) {
            return Array.prototype.concat.apply([], e)
        }

        function i(e, t, n) {
            return !!e && (0 === t && 0 === n ? "none" !== e[2].type || "none" !== e[3].type : 0 !== t && 0 !== n ? "none" !== e[0].type && "none" !== e[1].type : 0 !== t ? "none" !== e[0].type : 0 !== n && "none" !== e[1].type)
        }
        var o = e("underscore"),
            a = e("parsenodes"),
            s = e("math/plotter").default,
            l = e("graphing/graphmode"),
            c = e("math/comparators"),
            u = e("graphing/dragmode").DragMode,
            p = e("math/expression-types").getReconciledExpressionProps,
            d = e("math/types"),
            h = a.List,
            f = e("math/builtin"),
            m = e("math/cdf-branches").makeCDFTopBranches,
            g = e("math/copy-defined-pois").default,
            y = e("math/distribution-spec").getFunctionSpecFromTree,
            v = e("graphing-calc/json/expression").EditableLabelMode;
        a.Base.prototype._graph = function(e, t, n, i) {
            function c(e, t) {
                if (e) {
                    var n, r, i, o, a, s, l, c, u = e.discrete ? "discreteDistribution" : "continuousDistribution";
                    if ("binomialdist" === e.symbol) return r = t.args[1].asValue(), i = t.args.length > 2 ? t.args[2].asValue() : .5, n = f.binompdf(i * r, r, i), {
                        type: u,
                        xmin: 0,
                        xmax: r,
                        ymin: 0,
                        ymax: n
                    };
                    if ("poissondist" === e.symbol) return o = t.args[1].asValue(), n = Math.max(f.poissonpdf(Math.floor(o), o), f.poissonpdf(Math.ceil(o), o)), {
                        type: u,
                        xmin: 0,
                        xmax: 2.5 * o,
                        ymin: 0,
                        ymax: n
                    };
                    if ("normaldist" === e.symbol) return o = t.args.length > 1 ? t.args[1].asValue() : 0, a = t.args.length > 2 ? t.args[2].asValue() : 1, n = f.normalpdf(o, o, a), {
                        type: u,
                        xmin: o - 2 * Math.abs(a),
                        xmax: o + 2 * Math.abs(a),
                        ymin: 0,
                        ymax: n
                    };
                    if ("uniformdist" === e.symbol) return s = t.args.length > 1 ? t.args[1].asValue() : 0, l = t.args.length > 2 ? t.args[2].asValue() : 1, o = (s + l) / 2, c = l - s, n = f.uniformpdf(o, s, l), {
                        type: u,
                        xmin: s - c / 3,
                        xmax: l + c / 3,
                        ymin: 0,
                        ymax: n
                    };
                    if ("tdist" === e.symbol) {
                        var p = t.args[1].asValue();
                        return n = f.tpdf(0, p), {
                            type: u,
                            xmin: -3,
                            xmax: 3,
                            ymin: 0,
                            ymax: n
                        }
                    }
                }
            }

            function u(e) {
                var t = e.editableLabelMode;
                return t === v.Text || t === v.Math
            }
            if (t instanceof a.SolvedEquation) return this._graph(e, t._expression, n, i);
            var b, x, w, _, S, E = this,
                M = t.getExpressionType(i.graphMode, t.valueType),
                I = p(M, {
                    points: this.userData.points,
                    lines: this.userData.lines,
                    fill: this.userData.fill
                });
            switch (i.graphMode) {
                case l.XYPOINT_MOVABLE:
                    return b = [t.asArray()], w = this.userData.shouldGraph && I.points, S = this.userData.showLabel && !w, w ? [{
                        segments: [b],
                        graphMode: i.graphMode,
                        color: this.userData.color,
                        style: this.userData.pointStyle,
                        showLabel: !!this.userData.showLabel,
                        labelSize: this.userData.labelSize,
                        labelOrientation: this.userData.labelOrientation,
                        verticalLabel: this.userData.verticalLabel,
                        editableLabel: u(this.userData),
                        labels: this.computedLabels || [],
                        poi: g(b)
                    }] : S ? [{
                        segments: [b],
                        graphMode: l.XYPOINT,
                        color: this.userData.color,
                        style: this.userData.pointStyle,
                        showLabel: !!this.userData.showLabel,
                        nakedLabel: !0,
                        labelSize: this.userData.labelSize,
                        labelOrientation: this.userData.labelOrientation,
                        verticalLabel: this.userData.verticalLabel,
                        editableLabel: u(this.userData),
                        labels: this.computedLabels || [],
                        poi: g(b)
                    }] : [];
                case l.XYPOINT:
                    return x = [], b = h.wrap(t).mapElements(function(e) {
                        return e.asArray()
                    }), w = this.userData.shouldGraph && I.points, _ = this.userData.shouldGraph && I.lines, S = this.userData.showLabel && !w && !_, (this.userData.showLabel || w) && x.push({
                        segments: [b],
                        graphMode: i.graphMode,
                        color: this.userData.color,
                        style: this.userData.pointStyle,
                        showLabel: !!this.userData.showLabel,
                        showPoint: w,
                        labelSize: this.userData.labelSize,
                        labelOrientation: this.userData.labelOrientation,
                        verticalLabel: this.userData.verticalLabel,
                        interactiveLabel: !!this.userData.interactiveLabel,
                        editableLabel: u(this.userData),
                        nakedLabel: S,
                        labels: this.computedLabels || [],
                        poi: g(b)
                    }), _ && x.push({
                        segments: [b].map(r),
                        graphMode: l.PARAMETRIC,
                        color: this.userData.color,
                        style: this.userData.lineStyle,
                        poi: []
                    }), x;
                case l.PARAMETRIC:
                    var T = this.userData,
                        C = [];
                    if (x = h.wrap(t).mapElements(function(t) {
                            if (0 === t.getDependencies().length) return b = [t.asArray()], {
                                segments: [b],
                                graphMode: l.XYPOINT,
                                color: T.color,
                                style: T.lineStyle,
                                poi: g(b)
                            };
                            var r = t.getCompiledFunction(),
                                o = E.getGraphInfo(e, t);
                            return o.graphMode = i.graphMode, o.domain = {
                                min: E.metaData.evaluatedDomainMin,
                                max: E.metaData.evaluatedDomainMax
                            }, o.style = E.userData.lineStyle, s.computeGraphData({
                                viewState: n,
                                graphInfo: o,
                                compiled: r
                            })
                        }), I.fill) {
                        if (x.forEach(function(e) {
                                C.push({
                                    segments: e.segments,
                                    color: T.color,
                                    fillOpacity: E.metaData.computedFillOpacity,
                                    graphMode: l.POLYGONFILL,
                                    poi: []
                                })
                            }), !I.lines) return C;
                        x = x.concat(C)
                    }
                    return x;
                case l.X:
                case l.Y:
                case l.IMPLICIT:
                case l.POLAR:
                    x = [];
                    var k = t.valueType === d.Number;
                    return h.wrap(t).eachElement(function(t) {
                        var r, a = i.graphMode === l.IMPLICIT ? t.getCompiledFunction(["x", "y"]) : t.getCompiledFunction(),
                            u = y(E),
                            p = u && u.discrete,
                            d = c(u, t);
                        try {
                            r = t.getCompiledDerivative()
                        } catch (e) {}
                        var h = E.getGraphInfo(e, t);
                        h.graphMode = i.graphMode, h.style = E.userData.lineStyle, i.graphMode === l.POLAR && (h.domain = {
                            min: E.metaData.evaluatedDomainMin,
                            max: E.metaData.evaluatedDomainMax,
                            isExplicit: E.metaData.isExplicitDomain
                        });
                        var f = E.metaData.evaluatedCDFMin,
                            v = E.metaData.evaluatedCDFMax;
                        if (isNaN(f) || isNaN(v) || !k) {
                            var b = {
                                viewState: n,
                                graphInfo: h,
                                compiled: a,
                                derivative: r,
                                discrete: p
                            };
                            u && "binomialdist" === u.symbol && (b.maxOverride = t.args[1].asValue());
                            var w = s.computeGraphData(b);
                            d && (w.boundingBox = d), w.fillSegments ? x.push(o.omit(w, "fillSegments")) : p ? x.push({
                                graphMode: l.XYPOINT,
                                segments: [w.segments],
                                showPoint: E.userData.shouldGraph,
                                color: E.userData.color,
                                style: w.style,
                                boundingBox: d,
                                poi: g(w.segments)
                            }) : x.push(w), h.graphMode === l.IMPLICIT && "=" !== h.operator && x.push({
                                graphMode: l.POLYGONFILL,
                                segments: w.fillSegments,
                                poi: {}
                            })
                        } else {
                            var _ = {
                                viewState: n,
                                graphInfo: h,
                                compiled: a,
                                derivative: r,
                                bounds: [f, v],
                                discrete: p
                            };
                            u && "binomialdist" === u.symbol && (_.maxOverride = t.args[1].asValue());
                            var S = m(_),
                                M = S.cdfTopBranch,
                                I = o.each(S.topBranches, function(e) {
                                    e && (e.boundingBox = d)
                                });
                            if (o.every(I, function(e) {
                                    return void 0 !== e
                                }))
                                if (p) {
                                    if (x = I.map(function(e) {
                                            return {
                                                graphMode: l.XYPOINT,
                                                segments: [e.segments],
                                                showPoint: E.userData.shouldGraph,
                                                color: E.userData.color,
                                                style: e.style,
                                                poi: g(e.segments),
                                                boundingBox: d
                                            }
                                        }), M && M.segments.length) {
                                        var T = [];
                                        M.segments.forEach(function(e) {
                                            T.push([e[0], 0, e[0], e[1]])
                                        }), x.push({
                                            graphMode: l.PARAMETRIC,
                                            segments: T,
                                            boundingBox: d,
                                            poi: {}
                                        })
                                    }
                                } else if (x = I, M && M.segments.length) {
                                var C, D, P, L;
                                for (C = 0; C < M.segments.length; C++)
                                    if (D = M.segments[C], D.length >= 4) {
                                        P = D[0];
                                        break
                                    } for (C = M.segments.length - 1; C >= 0; C--)
                                    if (D = M.segments[C], D.length >= 4) {
                                        L = D[D.length - 2];
                                        break
                                    } if (isFinite(P) && isFinite(L)) {
                                    var A = s.polygonsFromSegments(M.segments, [
                                        [P, 0, L, 0]
                                    ], M.graphMode);
                                    x.push({
                                        graphMode: l.POLYGONFILL,
                                        segments: A,
                                        poi: {}
                                    })
                                }
                            }
                        }
                    }), x;
                default:
                    return !1
            }
        }, a.Base.prototype.graph = function(e, t, n) {
            var r = this.getGraphInfo(e, t);
            return this._graph(e, t, n, r)
        }, a.BaseComparator.prototype.graph = function(e, t, n) {
            var r = this,
                i = this.getGraphInfo(e, t),
                o = i.graphMode;
            if (o === l.IMPLICIT) return this._graph(e, t, n, i);
            if (o === l.NONE) return !1;
            if (!(t instanceof a.SolvedEquation)) return !1;
            var u = this.getOperator(),
                p = [],
                d = [],
                h = !0;
            t._expression.eachElement(function(e) {
                p.push(e.getCompiledFunction());
                try {
                    d.push(e.getCompiledDerivative())
                } catch (e) {
                    h = !1
                }
            }), h || (d = void 0);
            var f, m, g = [],
                y = [-1, 0, 0, 1],
                v = p.length;
            for (m = 0; m < v; m++) {
                var b = this.getGraphInfo(e, t._expression.args[m]);
                b.graphMode = o, b.style = r.userData.lineStyle, i.graphMode === l.POLAR && (b.domain = {
                    min: r.metaData.evaluatedDomainMin,
                    max: r.metaData.evaluatedDomainMax,
                    isExplicit: r.metaData.isExplicitDomain
                }), f = s.computeGraphData({
                    viewState: n,
                    graphInfo: b,
                    compiled: p[m],
                    derivative: d ? d[m] : void 0
                }), f.operator = c.get(c.table[u].inclusive, y[m % 4]), g.push(f)
            }
            for (m = 0; m < v; m += 4) {
                var x = s.polygonsFromSegments(g[m + 1].segments, g[m + 2].segments, o);
                g.push({
                    graphMode: l.POLYGONFILL,
                    segments: x,
                    poi: {}
                })
            }
            return g
        }, a.DoubleInequality.prototype.graph = function(e, t, n) {
            var r = this.getGraphInfo(e, t);
            if (r.graphMode === l.NONE) return !1;
            var i = [],
                o = c.get(c.table[this._operators[0]].inclusive, 0),
                a = c.get(c.table[this._operators[1]].inclusive, 0),
                u = this.userData,
                p = this.metaData,
                d = this;
            return h.eachArgs(t._expressions, function(t) {
                var c, h;
                t[0].userData = t[1].userData = u, t[0].metaData = t[1].metaData = p, c = d._graph(e, t[0], n, r)[0], c.operator = o, i.push(c), h = d._graph(e, t[1], n, r)[0], h.operator = a, i.push(h);
                var f = s.polygonsFromSegments(c.segments, h.segments, c.graphMode);
                i.push({
                    graphMode: l.POLYGONFILL,
                    segments: f,
                    poi: {}
                })
            }), i
        }, a.Regression.prototype.graph = function(e, t, n) {
            var r = this.getGraphInfo(e, t);
            return this._graph(e, t.model, n, r)
        }, a.Polygon.prototype.graph = function(e, t, n) {
            for (var i = this.getGraphInfo(e, t), o = t.args[0].asValue(), a = [], s = void 0 === this.userData.lines || this.userData.lines, c = void 0 === this.userData.fill || this.userData.fill, u = [], p = [], d = 0; d < o.length; d++) {
                var h = o[d][0],
                    f = o[d][1];
                isFinite(h) && isFinite(f) ? (s || c) && p.push([h, f]) : (s || c) && (p.length > 1 && u.push(p), p = [])
            }
            if (u.length || p.length) {
                p.push([o[0][0], o[0][1]]), u.push(p);
                var m = u.map(r);
                c && a.push({
                    segments: m,
                    graphMode: l.POLYGONFILL,
                    poi: [],
                    color: i.color,
                    fillOpacity: this.metaData.computedFillOpacity,
                    style: i.style
                }), s && a.push({
                    segments: m,
                    graphMode: l.PARAMETRIC,
                    poi: [],
                    color: i.color,
                    style: this.userData.lineStyle
                })
            }
            return a
        }, a.Histogram.prototype.graph = function(e, r, i) {
            var o = this.getGraphInfo(e, r),
                a = r.args[0].asValue(),
                s = r.args[1].asValue(),
                c = this.userData.vizProps && "left" === this.userData.vizProps.binAlignment ? s / 2 : 0,
                u = n(a, s, c),
                p = 1;
            this.userData.vizProps && "density" === this.userData.vizProps.histogramMode ? p = 1 / (a.length * s) : this.userData.vizProps && "relative" === this.userData.vizProps.histogramMode && (p = 1 / a.length);
            var d = [],
                h = [];
            for (var f in u) {
                var m = u[f],
                    g = m.data.length;
                h.push([m.min, 0 * p, m.min, g * p, m.max, g * p, m.max, 0 * p]);
                var y = 0;
                u[m.id + 1] && (y = u[m.id + 1].data.length);
                var v = [m.min, 0 * p, m.min, g * p, m.max, g * p];
                y < g && v.push(m.max, y * p), d.push(v)
            }
            var b = t("histogram", h);
            return b && s && (b.binWidth = s), [{
                segments: h,
                graphMode: l.POLYGONFILL,
                boundingBox: b,
                poi: [],
                color: o.color,
                fillOpacity: .4
            }, {
                segments: d,
                graphMode: l.Y,
                poi: {
                    zeros: {
                        x: [],
                        y: []
                    },
                    extrema: {
                        x: [],
                        y: []
                    },
                    intercept: {
                        x: [],
                        y: []
                    }
                },
                color: o.color
            }]
        }, a.DotPlot.prototype.graph = function(e, r, i) {
            var o, a, s, c, u = this.getGraphInfo(e, r),
                p = r.args[1].asValue(),
                d = this.userData.vizProps && "left" === this.userData.vizProps.binAlignment ? p / 2 : 0,
                h = n(r.args[0].asValue(), p, d),
                f = !1,
                m = [];
            for (a in h) {
                s = h[a];
                for (var y = s.data.length - 1; y >= 0; y--) s.center !== s.data[y] && (f = !0)
            }
            if (this.userData.vizProps && "exact" === this.userData.vizProps.dotplotXMode)
                for (a in h)
                    for (s = h[a], c = s.data, c.reverse(), o = 0; o < c.length; o++) m.push([c[o], o + 1]);
            else
                for (a in h)
                    for (s = h[a], c = s.data, o = 0; o < c.length; o++) m.push([s.center, o + 1]);
            var v = t("dotplot", m);
            return v && p && (v.ymin = 0, v.xmin -= .5 * p, v.xmax += .5 * p, v.binWidth = p), [{
                segments: [m],
                graphMode: l.XYPOINT,
                boundingBox: v,
                poi: g(m),
                color: u.color,
                style: this.userData.pointStyle,
                pointSize: this.userData.vizProps && this.userData.vizProps.dotplotSize,
                showPoint: !0,
                needsDotplotXMode: f
            }]
        }, a.BoxPlot.prototype.graph = function(e, n, r) {
            var i = this.getGraphInfo(e, n),
                o = this.metaData.evaluatedAxisOffset,
                a = this.metaData.evaluatedBreadth,
                s = n.args[0].asValue();
            if (isNaN(a) || isNaN(o)) return {};
            var c = Math.min.apply(null, s),
                u = Math.max.apply(null, s),
                p = f.quartile(s, 1),
                d = f.quartile(s, 2),
                h = f.quartile(s, 3),
                m = o,
                g = m - a / 2,
                y = m + a / 2,
                v = a / 10,
                b = [
                    [p, g, h, g, h, y, p, y, p, g],
                    [d, g, d, y],
                    [p, m, c, m],
                    [h, m, u, m],
                    [c, m - v, c, m + v],
                    [u, m - v, u, m + v]
                ];
            if (this.userData.vizProps && "y" === this.userData.vizProps.alignedAxis)
                for (var x = 0; x < b.length; x++)
                    for (var w = b[x], _ = 0; _ < w.length; _ += 2) {
                        var S = w[_];
                        w[_] = w[_ + 1], w[_ + 1] = S
                    }
            return [{
                segments: b,
                graphMode: l.PARAMETRIC,
                boundingBox: t("boxplot", b),
                poi: [],
                color: i.color
            }]
        }, a.Table.prototype.isValueDraggable = function(e, t, n) {
            if (!e.columns[t].isIndependent) return !1;
            var r = this.columns[t],
                i = r.values,
                o = i && i[n];
            return !(!o || !isFinite(o.asValue()) || 0 !== o._dependencies.length)
        }, a.Table.prototype.graph = function(e, t, n) {
            var i = [];
            if (t.columns[0].isError) return i;
            for (var o = t.columns[0], a = o.values, s = 1; s < this.columns.length; s++) {
                var c = t.columns[s];
                if (!c.isError) {
                    var p = this.columns[s].header.userData;
                    if (!p.hidden) {
                        for (var d = p.dragMode, h = d === u.X || d === u.XY, f = d === u.Y || d === u.XY, m = !!p.points, y = !!p.lines, v = c.isDiscrete(o), b = y && v, x = y && !v, w = [], _ = [], S = [], E = [], M = [], I = [], T = 1 / 0, C = -1 / 0, k = 1 / 0, D = -1 / 0, P = 0; P < a.length; P++) {
                            var L = a[P],
                                A = c.values[P];
                            if (L && A && isFinite(L.asValue()) && isFinite(A.asValue())) {
                                var O = L.asValue(),
                                    F = A.asValue();
                                if (m) {
                                    var q = h && this.isValueDraggable(t, 0, P),
                                        N = f && this.isValueDraggable(t, s, P);
                                    q || N ? (S.push([O, F]), E.push({
                                        index: P,
                                        dragX: q,
                                        dragY: N
                                    })) : _.push([O, F])
                                }
                                b && I.push([O, F]), O < T && (T = O), O > C && (C = O), F < k && (k = F), F > D && (D = F)
                            } else b && (I.length > 1 && M.push(I), I = [])
                        }
                        var R = {
                            type: "table",
                            xmin: T,
                            xmax: C,
                            ymin: k,
                            ymax: D
                        };
                        if (S.length && w.push({
                                graphMode: l.XYPOINT_MOVABLE,
                                segments: [S],
                                color: p.color,
                                tableId: p.tableId,
                                poi: g(S),
                                movablePointInfo: E,
                                boundingBox: R
                            }), _.length && w.push({
                                segments: [_],
                                graphMode: l.XYPOINT,
                                showPoint: !0,
                                poi: g(_),
                                color: p.color,
                                style: p.pointStyle,
                                tableId: p.tableId,
                                boundingBox: R
                            }), (M.length || I.length) && (M.push(I), w.push({
                                segments: M.map(r),
                                graphMode: l.PARAMETRIC,
                                poi: [],
                                color: p.color,
                                style: p.lineStyle,
                                tableId: p.tableId,
                                boundingBox: R
                            })), x) {
                            var B = this.columns[s].header.graph(e, t.columns[s].header, n);
                            B.length && Array.prototype.push.apply(w, B)
                        }
                        w.length && (i[p.id] = w)
                    }
                }
            }
            return i
        }, a.Image.prototype.graph = function(e, t, n) {
            var r = [];
            if (!("OrderedPair" === t.center.type && t.center.args[0].isConstant && t.center.args[1].isConstant && t.radianAngle.isConstant && t.width.isConstant && t.height.isConstant && t.opacity.isConstant)) return r;
            for (var o = [], a = [], s = t.width.asValue() / 2, c = t.height.asValue() / 2, u = t.radianAngle.asValue(), p = -1; p <= 1; p++)
                for (var d = -1; d <= 1; d++) {
                    var h = [t.center.args[0].asValue() + p * s * Math.cos(u) + d * c * Math.sin(u), t.center.args[1].asValue() - p * s * Math.sin(u) + d * c * Math.cos(u)],
                        f = i(t.moveStrategy, p, d);
                    f && (o.push(h), a.push([p, d]))
                }
            return r.push({
                segments: [o],
                scaleFactors: [a],
                graphMode: l.XYPOINT_MOVABLE,
                color: this.userData.color,
                style: this.userData.style,
                poi: g(o)
            }), r
        }
    });
define("math/features/elementAt", ["require", "parsenodes", "math/builtinframe", "math/policy"], function(e) {
        function t(e) {
            for (var t = 0; t < this.length; t++) e(this.elementAt(t))
        }

        function n(e) {
            for (var t = [], n = 0; n < this.length; n++) t.push(e(this.elementAt(n)));
            return t
        }
        var r = e("parsenodes"),
            i = e("math/builtinframe"),
            o = e("math/policy").defaultPolicy;
        r.List.prototype.elementAt = function(e) {
            return e = Math.floor(e), e >= 0 && e < this.args.length ? this.args[e] : r.Constant(NaN)
        }, r.Broadcast.prototype.elementAt = function(e) {
            if ((e = Math.floor(e)) < 0 || e >= this.length) return r.Constant(NaN);
            for (var t = {}, n = 0; n < this._replacedSymbols.length; n++) t[this._replacedSymbols[n]] = this._lists[n].elementAt(e);
            return this._expression.substitute(t).getConcreteTree(o, i)
        }, r.List.prototype.eachElement = t, r.Broadcast.prototype.eachElement = t, r.List.prototype.mapElements = n, r.Broadcast.prototype.mapElements = n, r.OrderedPair.prototype.elementAt = function(e) {
            switch (e) {
                case 0:
                    return this.args[0];
                case 1:
                    return this.args[1];
                default:
                    return r.Constant(NaN)
            }
        }
    }), define("math/features/printLatex", ["require", "parsenodes", "graphing/label", "lib/number-to-latex"], function(e) {
        function t() {
            return l.identifierToLatex(this._symbol) + " "
        }

        function n(e) {
            switch (e) {
                case ">":
                    return "\\gt ";
                case "<":
                    return "\\lt ";
                case ">=":
                    return "\\ge ";
                case "<=":
                    return "\\le ";
                case "=":
                    return "="
            }
        }

        function r(e) {
            return e.printLatex()
        }

        function i() {
            switch (this._symbol) {
                case "sqrt":
                    return "\\sqrt{" + this.args[0].printLatex() + "}";
                case "nthroot":
                    return "\\sqrt[" + this.args[1].printLatex() + "]{" + this.args[0].printLatex() + "}";
                case "logbase":
                    return "\\log_{" + this.args[1].printLatex() + "}\\left(" + this.args[0].printLatex() + "\\right)";
                default:
                    return l.identifierToLatex(this._symbol) + "\\left(" + this.args.map(r).join(", ") + "\\right)"
            }
        }

        function o(e) {
            return e.isConstant && !0 === e.asValue()
        }

        function a(e) {
            return e.isConstant && e.isNaN()
        }
        var s = e("parsenodes"),
            l = e("graphing/label"),
            c = e("lib/number-to-latex").default;
        s.Identifier.prototype.printLatex = t, s.FreeVariable.prototype.printLatex = t, s.Constant.prototype.printLatex = function() {
            return c(this.asValue())
        }, s.Negative.prototype.printLatex = function() {
            return "-\\left(" + this.args[0].printLatex() + "\\right)"
        }, s.Add.prototype.printLatex = function() {
            return "\\left(" + this.args[0].printLatex() + "\\right)+\\left(" + this.args[1].printLatex() + "\\right)"
        }, s.PercentOf.prototype.printLatex = function() {
            return this.args[0].printLatex() + " \\% \\operatorname{of} " + this.args[1].printLatex()
        }, s.Subtract.prototype.printLatex = function() {
            return "\\left(" + this.args[0].printLatex() + "\\right)-\\left(" + this.args[1].printLatex() + "\\right)"
        }, s.Multiply.prototype.printLatex = function() {
            return "\\left(" + this.args[0].printLatex() + "\\right)*\\left(" + this.args[1].printLatex() + "\\right)"
        }, s.Divide.prototype.printLatex = function() {
            return "\\frac{" + this.args[0].printLatex() + "}{" + this.args[1].printLatex() + "}"
        }, s.Exponent.prototype.printLatex = function() {
            return "\\left(" + this.args[0].printLatex() + "\\right)^{" + this.args[1].printLatex() + "}"
        }, s.Assignment.prototype.printLatex = function() {
            return l.identifierToLatex(this._symbol) + "=" + this._expression.printLatex()
        }, s.Equation.prototype.printLatex = function() {
            return this._lhs.printLatex() + "=" + this._rhs.printLatex()
        }, s.BaseComparator.prototype.printLatex = function() {
            return "\\left(" + this.args[0].printLatex() + "\\right)" + n(this.operator) + "\\left(" + this.args[1].printLatex() + "\\right)"
        }, s.DoubleInequality.prototype.printLatex = function() {
            return "\\left(" + this.args[0].printLatex() + "\\right)" + n(this.args[1]) + this.args[2].printLatex() + n(this.args[3]) + "\\left(" + this.args[4].printLatex() + "\\right)"
        }, s.And.prototype.printLatex = function() {
            if (!(this.args[0] instanceof s.BaseComparator && this.args[1] instanceof s.BaseComparator)) throw new Error("Not implemented");
            if (this.args[0].args[1].printLatex() !== this.args[1].args[0].printLatex()) throw new Error("Not implemented");
            return "\\left(" + this.args[0].args[0].printLatex() + "\\right)" + n(this.args[0].operator) + "\\left(" + this.args[0].args[1].printLatex() + "\\right)" + n(this.args[1].operator) + "\\left(" + this.args[1].args[1].printLatex() + "\\right)"
        }, s.NativeFunction.prototype.printLatex = i, s.TypedFunction.prototype.printLatex = i, s.ReducerFunction.prototype.printLatex = i, s.ParametrizedReducerFunction.prototype.printLatex = i, s.DoubleReducerFunction.prototype.printLatex = i, s.FunctionCall.prototype.printLatex = i, s.Distribution.prototype.printLatex = i, s.SeededFunctionCall.prototype.printLatex = function() {
            return l.identifierToLatex(this._symbol) + "\\left(" + this.args.slice(1).map(r).join(", ") + "\\right)"
        }, s.DotAccess.prototype.printLatex = function() {
            return "(" + this.args[0].printLatex() + ").(" + this.args[1].printLatex() + ")"
        }, s.DotAccessExponent.prototype.printLatex = function() {
            return "(" + this.args[0].printLatex() + ").(" + this.args[1].printLatex() + ")^{" + this.args[2].printLatex() + "}"
        }, s.Prime.prototype.printLatex = function() {
            switch (this.args[0]._symbol) {
                case "logbase":
                    return "\\log_{" + this.args[0].args[1].printLatex() + "}" + Array(this.order + 1).join("'") + "\\left(" + this.args[0].args[0].printLatex() + "\\right)";
                default:
                    return l.identifierToLatex(this.args[0]._symbol) + Array(this.order + 1).join("'") + "\\left(" + this.args[0].args.map(r).join(", ") + "\\right)"
            }
        }, s.List.prototype.printLatex = function() {
            return "\\left[" + this.args.map(r).join(", ") + "\\right]"
        }, s.Range.prototype.printLatex = function() {
            return "\\left[" + this.args[0].args.map(r).join(", ") + " ... " + this.args[1].args.map(r).join(", ") + "\\right]"
        }, s.ListAccess.prototype.printLatex = function() {
            return "\\left(" + this.args[0].printLatex() + "\\right)\\left[" + this.args[1].printLatex() + "\\right]"
        }, s.OrderedPair.prototype.printLatex = function() {
            return "\\left(" + this.args.map(r).join(", ") + "\\right)"
        }, s.Sum.prototype.printLatex = function() {
            return "\\sum_{" + this.args[0].printLatex() + "=" + this.args[1].printLatex() + "}^{" + this.args[2].printLatex() + "}\\left(" + this.args[3].printLatex() + "\\right)"
        }, s.Product.prototype.printLatex = function() {
            return "\\prod_{" + this.args[0].printLatex() + "=" + this.args[1].printLatex() + "}^{" + this.args[2].printLatex() + "}\\left(" + this.args[3].printLatex() + "\\right)"
        }, s.Integral.prototype.printLatex = function() {
            return "\\int_{" + this.args[1].printLatex() + "}^{" + this.args[2].printLatex() + "}\\left(" + this.args[3].printLatex() + "\\right)d" + this.args[0].printLatex()
        }, s.FunctionExponent.prototype.printLatex = function() {
            return this.args[0].printLatex() + "\\left(" + this.args[1].printLatex() + "\\right)^{" + this.args[2].printLatex() + "}"
        }, s.FunctionFactorial.prototype.printLatex = function() {
            return this.args[0].printLatex() + "\\left(" + this.args[1].printLatex() + "\\right)!"
        }, s.Piecewise.prototype.printLatex = function() {
            var e = this;
            if (o(e.args[0])) return e.args[1].printLatex();
            for (var t = ["\\left\\{"];;) {
                if (o(e.args[0])) {
                    t.push(e.args[1].printLatex());
                    break
                }
                if (t.push(e.args[0].printLatex(), ": "), a(e.args[2])) {
                    t.push(e.args[1].printLatex());
                    break
                }
                if (t.push(e.args[1].printLatex(), ", "), !(e.args[2] instanceof s.Piecewise)) {
                    t.push(e.args[2].printLatex());
                    break
                }
                e = e.args[2]
            }
            return t.push("\\right\\}"), t.join("")
        }, s.FunctionDefinition.prototype.printLatex = function() {
            return l.identifierToLatex(this._symbol) + "\\left(" + this._argSymbols.map(l.identifierToLatex).join(", ") + "\\right) = " + this._expression.printLatex()
        }, s.Derivative.prototype.printLatex = function() {
            return "\\frac{d}{d" + l.identifierToLatex(this._symbol) + "}\\left(" + this.args[0].printLatex() + "\\right)"
        }, s.Regression.prototype.printLatex = function() {
            return "\\left(" + this._lhs.printLatex() + "\\right)\\sim\\left(" + this._rhs.printLatex() + "\\right)"
        }, s.Polygon.prototype.printLatex = function() {
            return "\\polygon\\left(" + this.args.map(r).join(", ") + "\\right)"
        }, s.Histogram.prototype.printLatex = function() {
            return "\\histogram\\left(" + this.args.map(r).join(", ") + "\\right)"
        }, s.DotPlot.prototype.printLatex = function() {
            return "\\dotplot\\left(" + this.args.map(r).join(", ") + "\\right)"
        }, s.BoxPlot.prototype.printLatex = function() {
            return "\\boxplot\\left(" + this.args.map(r).join(", ") + "\\right)"
        }, s.TTest.prototype.printLatex = function() {
            return "\\TTest\\left(" + this.args.map(r).join(", ") + "\\right)"
        }, s.IndependentTTest.prototype.printLatex = function() {
            return "\\IndependentTTest\\left(" + this.args.map(r).join(", ") + "\\right)"
        }, s.Stats.prototype.printLatex = function() {
            return "\\Stats\\left(" + this.args.map(r).join(", ") + "\\right)"
        }
    }), define("math/features/statistics", ["require", "parsenodes", "math/maybe-rational"], function(e) {
        var t = e("parsenodes"),
            n = t.BuiltInFunction,
            r = e("math/maybe-rational").maybeRational,
            i = t.Constant(r(0, 1)),
            o = t.Constant(r(1, 1)),
            a = t.Constant(r(2, 1)),
            s = t.Constant(-1 / 0);
        n.normaldist.prototype.pdf = function(e) {
            return n.normalpdf([e[0], this.args[0], this.args[1]])
        }, n.normaldist.prototype.cdf = function(e) {
            var t, r;
            return 1 === e.length ? (t = s, r = e[0]) : (t = e[0], r = e[1]), n.normalcdf([t, r, this.args[0], this.args[1]])
        }, n.normaldist.prototype.mean = function() {
            return this.args[0]
        }, n.normaldist.prototype.median = function() {
            return this.args[0]
        }, n.normaldist.prototype.stdev = function() {
            return n.abs([this.args[1]])
        }, n.normaldist.prototype.var = function() {
            return t.Exponent([this.args[1], a])
        }, n.normaldist.prototype.quantile = function(e) {
            return t.Add([t.Multiply([n.invNorm(e), this.stdev()]), this.mean()])
        }, n.normaldist.prototype.sample = function(e) {
            return n.normalSample([e[0], this.args[0], this.args[1]])
        }, n.tdist.prototype.pdf = function(e) {
            return n.tpdf([e[0], this.args[0]])
        }, n.tdist.prototype.cdf = function(e) {
            var t, r;
            return 1 === e.length ? (t = s, r = e[0]) : (t = e[0], r = e[1]), n.tcdf([t, r, this.args[0]])
        }, n.tdist.prototype.mean = function() {
            return i
        }, n.tdist.prototype.median = function() {
            return i
        }, n.tdist.prototype.quantile = function(e) {
            return n.invT([e[0], this.args[0]])
        }, n.tdist.prototype.sample = function(e) {
            return n.tSample([e[0], this.args[0]])
        }, n.tdist.prototype.stdev = function() {
            return n.sqrt([this.var()])
        }, n.tdist.prototype.var = function() {
            var e = this.args[0];
            return t.Piecewise([t.Comparator[">="]([e, a]), t.Divide([e, t.Subtract([e, a])]), t.Constant(NaN)])
        }, n.poissondist.prototype.pdf = function(e) {
            return n.poissonpdf([e[0], this.args[0]])
        }, n.poissondist.prototype.cdf = function(e) {
            var t, r;
            return 1 === e.length ? (t = s, r = e[0]) : (t = e[0], r = e[1]), n.poissoncdf([t, r, this.args[0]])
        }, n.poissondist.prototype.mean = function() {
            return this.args[0]
        }, n.poissondist.prototype.stdev = function() {
            return n.sqrt([this.args[0]])
        }, n.poissondist.prototype.var = function() {
            return this.args[0]
        }, n.poissondist.prototype.quantile = function(e) {
            return n.invPoisson([e[0], this.args[0]])
        }, n.poissondist.prototype.sample = function(e) {
            return n.poissonSample([e[0], this.args[0]])
        }, n.binomialdist.prototype.pdf = function(e) {
            return n.binompdf([e[0], this.args[0], this.args[1]])
        }, n.binomialdist.prototype.cdf = function(e) {
            var t, r;
            return 1 === e.length ? (t = s, r = e[0]) : (t = e[0], r = e[1]), n.binomcdf([t, r, this.args[0], this.args[1]])
        }, n.binomialdist.prototype.mean = function() {
            return t.Multiply([this.args[0], this.args[1]])
        }, n.binomialdist.prototype.stdev = function() {
            return n.sqrt([this.var()])
        }, n.binomialdist.prototype.var = function() {
            var e = this.args[0],
                n = this.args[1];
            return t.Multiply([e, t.Multiply([n, t.Subtract([o, n])])])
        }, n.binomialdist.prototype.quantile = function(e) {
            return n.invBinom([e[0], this.args[0], this.args[1]])
        }, n.binomialdist.prototype.sample = function(e) {
            return n.binomSample([e[0], this.args[0], this.args[1]])
        }, n.uniformdist.prototype.pdf = function(e) {
            return n.uniformpdf([e[0], this.args[0], this.args[1]])
        }, n.uniformdist.prototype.cdf = function(e) {
            var t, r;
            return 1 === e.length ? (t = s, r = e[0]) : (t = e[0], r = e[1]), n.uniformcdf([t, r, this.args[0], this.args[1]])
        }, n.uniformdist.prototype.mean = function() {
            return t.Divide([t.Add([this.args[0], this.args[1]]), a])
        }, n.uniformdist.prototype.median = function() {
            return t.Divide([t.Add([this.args[0], this.args[1]]), a])
        }, n.uniformdist.prototype.stdev = function() {
            return n.sqrt([this.var()])
        }, n.uniformdist.prototype.var = function() {
            return t.Divide([t.Exponent([t.Subtract([this.args[1], this.args[0]]), a]), t.Constant(r(12, 1))])
        }, n.uniformdist.prototype.quantile = function(e) {
            return n.invUniform([e[0], this.args[0], this.args[1]])
        }, n.uniformdist.prototype.sample = function(e) {
            return n.uniformSample([e[0], this.args[0], this.args[1]])
        }, t.List.prototype.sample = function(e) {
            return t.ListAccess([this, t.Add([n.floor([t.Multiply([n.uniformSample([e[0], i, o]), t.Constant(r(this.length, 1))])]), o])])
        }
    }), define("math/features/getExpressionType", ["require", "parsenodes", "graphing/graphmode", "math/expression-types", "math/types"], function(e) {
        var t = e("parsenodes"),
            n = e("graphing/graphmode"),
            r = e("math/expression-types").ExpressionType,
            i = e("math/types");
        t.Base.prototype.getExpressionType = function(e, t) {
            return e === n.X || e === n.Y ? r.X_OR_Y : e === n.XYPOINT || e === n.XYPOINT_MOVABLE ? t === i.Point ? r.SINGLE_POINT : r.POINT_LIST : e === n.PARAMETRIC ? r.PARAMETRIC : e === n.POLAR ? r.POLAR : e === n.IMPLICIT ? r.IMPLICIT : r.X_OR_Y
        }, t.Polygon.prototype.getExpressionType = function(e, t) {
            return r.POLYGON
        }, t.Histogram.prototype.getExpressionType = function(e, t) {
            return r.HISTOGRAM
        }, t.DotPlot.prototype.getExpressionType = function(e, t) {
            return r.DOTPLOT
        }, t.BoxPlot.prototype.getExpressionType = function(e, t) {
            return r.BOXPLOT
        }
    }), define("parser", ["require", "math/baseparser", "math/features/getConcreteTree", "math/features/getValueType", "math/features/typeCheck", "math/features/repr", "math/features/scalarEvalExpression", "math/features/constantcollapsedcopy", "math/features/polynomialorder", "math/features/polynomialcoefficients", "math/features/extractconditions", "math/features/piecewiseDependsOn", "math/features/bounddomain", "math/features/derivative", "math/features/substitute", "math/features/solve", "math/features/analyze", "math/features/analyzeFourFunction", "math/features/analyzeScientific", "math/features/analyzeSingleExpressionScientific", "math/features/getgraphmode", "math/features/getgraphinfo", "math/features/getMoveStrategy", "math/features/getDefaultDragMode", "math/features/tableinfo", "math/features/tableerror", "math/features/islinear", "math/features/graph", "math/features/elementAt", "math/features/printLatex", "math/features/statistics", "math/features/getExpressionType"], function(e) {
        var t = e("math/baseparser");
        return e("math/features/getConcreteTree"), e("math/features/getValueType"), e("math/features/typeCheck"), e("math/features/repr"), e("math/features/scalarEvalExpression"), e("math/features/constantcollapsedcopy"), e("math/features/polynomialorder"), e("math/features/polynomialcoefficients"), e("math/features/extractconditions"), e("math/features/piecewiseDependsOn"), e("math/features/bounddomain"), e("math/features/derivative"), e("math/features/substitute"), e("math/features/solve"), e("math/features/analyze"), e("math/features/analyzeFourFunction"), e("math/features/analyzeScientific"), e("math/features/analyzeSingleExpressionScientific"), e("math/features/getgraphmode"), e("math/features/getgraphinfo"), e("math/features/getMoveStrategy"), e("math/features/getDefaultDragMode"), e("math/features/tableinfo"), e("math/features/tableerror"), e("math/features/islinear"), e("math/features/graph"), e("math/features/elementAt"), e("math/features/printLatex"), e("math/features/statistics"), e("math/features/getExpressionType"), t
    }), define("lib/evaluate-single-expression", ["require", "exports", "parser", "math/builtinframe", "math/parsenode/constant", "../math/policy"], function(e, t, n, r, i, o) {
        "use strict";

        function a(e, t) {
            if (/^\s*(\-|\+)?([0-9]+(\.[0-9]+)?)\s*$/.test(e)) return parseFloat(e);
            var a = Object.create(r);
            return a.trigAngleMultiplier = i(t ? Math.PI / 180 : 1), +n.parse(e).tryGetConcreteTree(o.defaultPolicy, a).asValue()
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = a
    }), define("lib/rounding", ["require", "exports", "math/distance"], function(e, t, n) {
        "use strict";

        function r(e, t) {
            var r = n.mean(e, t);
            if (e > 0 != t > 0) return 0;
            if (0 === e || 0 === t) return 0;
            var i = e > 0 ? 1 : -1,
                o = Math.abs(e).toExponential().split("e"),
                a = Math.abs(t).toExponential().split("e"),
                s = o[0],
                l = a[0],
                c = o[1],
                u = a[1];
            if (u !== c) return i * Math.pow(10, Math.max(parseFloat(c), parseFloat(u)));
            if (s[0] !== l[0]) return parseFloat(r.toPrecision(1));
            for (var p = 1, d = 2; d < Math.min(s.length, l.length) && (p++, s[d] === l[d]); d++);
            return parseFloat(r.toPrecision(p))
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.shortestDecimalBetween = r
    }), define("lib/copy-properties", ["require", "exports", "lib/deepCopy"], function(e, t, n) {
        "use strict";

        function r(e) {
            var t = e.from,
                r = e.to,
                i = e.props;
            for (var o in i) i[o] && t.hasOwnProperty(o) && (r[o] = n.default(t[o]))
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.copyProperties = r
    }), define("math/policyGraphing", ["require", "exports", "./builtinframe", "../graphing/graphmode"], function(e, t, n, r) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var i = function() {
            function e() {}
            return e.prototype.assignmentForbidden = function(e) {
                return "x" === e || "y" === e || "theta" === e || "tmp" === e.slice(0, 3) || n.hasOwnProperty(e)
            }, e.prototype.isValidSlider = function(e) {
                return "x" === e || "y" === e || "ans" !== e.slice(0, 3) && !this.assignmentForbidden(e)
            }, e.prototype.sliderVariables = function(e) {
                var t = this;
                return -1 !== e.indexOf("theta") && (e = e.filter(function(e) {
                    return "r" !== e
                })), e.filter(function(e) {
                    return !t.assignmentForbidden(e) && "ans" !== e.slice(0, 3)
                })
            }, e.prototype.graphingEnabled = function() {
                return !0
            }, e.prototype.ansEnabled = function() {
                return !1
            }, e.prototype.validRegressionParameter = function(e) {
                return "x" !== e && "y" !== e
            }, e.prototype.validLHS = function(e) {
                return "theta" !== e
            }, e.prototype.unplottablePolarFunction = function(e, t) {
                return "theta" === e && -1 !== t.indexOf("r")
            }, e.prototype.validDoubleInequalitySymbol = function(e) {
                return "x" === e || "y" === e
            }, e.prototype.validDoubleInequalityVariables = function(e) {
                return !(e.length > 2) && e.every(this.validDoubleInequalitySymbol)
            }, e.prototype.validExpressionVariable = function(e) {
                return "x" === e
            }, e.prototype.validSolvedVariable = function(e) {
                return "x" === e || "y" === e || "r" === e
            }, e.prototype.validImplicitVariables = function(e) {
                switch (e.length) {
                    case 1:
                        return "x" === e[0] || "y" === e[0] || "r" === e[0];
                    case 2:
                        return "x" === e[0] && "y" === e[1] || "y" === e[0] && "x" === e[1] || "r" === e[0] && "theta" === e[1] || "theta" === e[0] && "r" === e[1];
                    default:
                        return !1
                }
            }, e.prototype.graphableListVariables = function(e, t) {
                return "x" === e || "y" === e || "r" === e || "x" === t || "y" === t
            }, e.prototype.validParametricVariable = function(e) {
                return "t" === e
            }, e.prototype.validParametricVariables = function(e) {
                return 1 === e.length && this.validParametricVariable(e[0])
            }, e.prototype.validInequalityVariables = function(e) {
                switch (e.length) {
                    case 1:
                        return "x" === e[0] || "y" === e[0] || "r" === e[0];
                    case 2:
                        return this.validImplicitVariables(e);
                    default:
                        return !1
                }
            }, e.prototype.validFirstColumnVariable = function(e) {
                return "y" !== e && "r" !== e && "theta" !== e && !e.match(/y_(\d+)/)
            }, e.prototype.complicatedPolarImplicit = function(e, t) {
                return "theta" === e || "r" === e && 1 !== t
            }, e.prototype.constantGraphMode = function(e) {
                return "x" === e ? r.X : "r" === e ? r.POLAR : r.Y
            }, e.prototype.graphMode = function(e, t) {
                return "y" === t ? r.X : "x" === e ? r.X : "r" === e && "theta" === t ? r.POLAR : r.Y
            }, e.prototype.tableableAsConstant = function(e) {
                return "x" !== e && ("r" !== e && "theta" !== e)
            }, e.prototype.implicitIndependent = function(e) {
                return "x"
            }, e.prototype.implicitDependency = function(e) {
                return "y" === e ? "x" : "theta" === e ? "r" : "y"
            }, e.prototype.graphableAsConstant = function(e) {
                return "y" === e || "x" === e || "r" === e
            }, e.prototype.disabledFeatures = function() {
                return []
            }, e
        }();
        t.PolicyGraphing = new i
    }), define("graphing-calc/models/expression", ["require", "exports", "parser", "math/builtinframe", "tslib", "graphing/dragmode", "expressions/styles", "main/label-sizes", "main/label-orientations", "expressions/slider_loop_modes", "graphing/reconcileDragMode", "lib/evaluate-single-expression", "lib/rounding", "lib/deepCopy", "lib/copy-properties", "./abstract-item", "./list", "underscore", "math/expression-types", "graphing/label", "lib/number-to-latex", "math/sliders", "lib/number-to-latex", "../json/expression", "math/distribution-spec", "../../math/policyGraphing"], function(e, t, n, r, i, o, a, s, l, c, u, p, d, h, f, m, g, y, v, b, x, w, _, S, E, M) {
        "use strict";

        function I(e) {
            var t = e.formula;
            return !!t && (e.controller.isDecimalToFractionEnabled() && t.hasOwnProperty("constant_value") && b.canDisplayAsFraction(t.constant_value))
        }

        function T(e) {
            return !!e.isGraphable
        }

        function C(e) {
            var t = e.formula;
            if (!t) return !1;
            var n = t.is_evaluable && t.zero_values && t.zero_values.length > 0 && "boolean" != typeof t.zero_values[0].val,
                r = I(e) && Fe(e);
            return n || r
        }

        function k(e) {
            var t = e.formula;
            return C(e) ? t.zero_values && t.zero_values.length ? t.zero_values[0].val : t.constant_value : I(e) ? e.formula.constant_value : NaN
        }

        function D(e) {
            var t = e.formula.ttest_results;
            if (t && isFinite(t.lessThan)) return {
                lessThan: t.lessThan,
                greaterThan: t.greaterThan,
                notEqual: t.notEqual
            }
        }

        function P(e) {
            var t = e.formula.stats_results;
            if (t && isFinite(t.min)) return {
                min: t.min,
                q1: t.q1,
                median: t.median,
                q3: t.q3,
                max: t.max
            }
        }

        function L(e, t) {
            if (!isFinite(t)) return e;
            var n = /=(.*?)([-\.0-9]+)/,
                r = e.match(n);
            if (!r) return e;
            if (parseFloat(r[2]) === t) return e;
            var i = _.numberToDecimalString(t);
            return e.replace(n, "=$1" + i)
        }

        function A(e) {
            return "" === ((e.latex || "") + (e.label || "")).split(" ").join("")
        }

        function O(e) {
            var t = e.dragMode === o.DragMode.AUTO ? e.formula.default_drag_mode : e.dragMode;
            e.reconciledDragMode = u.default(t, e.formula.move_strategy), e.interactiveLabel && e.reconciledDragMode !== o.DragMode.NONE && nt(e, !1)
        }

        function F(e, t, n) {
            if (!e.sliderExists) return NaN;
            var r = Y(e),
                i = X(e),
                o = $(e);
            if (n && void 0 !== n.overwriteStep && (o = n.overwriteStep), t = w.constrainSliderValueLikeEvaluator({
                    target: t,
                    hardMin: e.slider.hardMin ? r : void 0,
                    hardMax: e.slider.hardMax ? i : void 0,
                    step: o
                }), !n || !n.ignoreSoftLimits) {
                if (!e.slider.hardMin && t < r) return r;
                if (!e.slider.hardMax && t > i) return i
            }
            return t
        }

        function q(e, t) {
            if (!e.sliderExists) return NaN;
            var n = Q(e),
                r = Y(e),
                i = X(e),
                o = $(e),
                a = o || (i - r) / 20,
                s = 0;
            switch (t) {
                case "min":
                    return F(e, r);
                case "max":
                    return F(e, i);
                case "up":
                    s = 1;
                    break;
                case "down":
                    s = -1;
                    break;
                case "bigup":
                    s = 5;
                    break;
                case "bigdown":
                    s = -5;
                    break;
                default:
                    return t
            }
            for (var l = n, c = 0; c < 20; c++) {
                var u = c / 3 * a,
                    p = n;
                if (s > 0)(n = F(e, l + u, {
                    overwriteStep: a
                })) > p && (s -= 1);
                else {
                    if (!(s < 0)) break;
                    (n = F(e, l - u, {
                        overwriteStep: a
                    })) < p && (s += 1)
                }
            }
            return n
        }

        function N(e, t) {
            if (e.sliderExists) {
                e.slider.isPlaying && Te(e, !1);
                var n = F(e, t, {
                    ignoreSoftLimits: !0
                });
                e.latex = L(e.latex, n)
            }
        }

        function R(e, t) {
            if (e.sliderExists) {
                e.slider.isPlaying && Te(e, !1), Ce(e);
                var n = q(e, t);
                e.latex = L(e.latex, n)
            }
        }

        function B(e, t) {
            if (e.sliderExists) {
                e.slider.isPlaying && Te(e, !1);
                var n = F(e, t);
                e.latex = L(e.latex, n)
            }
        }

        function j(e, t) {
            if (e.sliderExists) {
                var n = Y(e),
                    r = X(e),
                    i = $(e),
                    o = e.slider.animationPeriod,
                    a = e.slider.loopMode,
                    s = i ? i / 2 : 0;
                if (a === c.LOOP_FORWARD_REVERSE) e.sliderAnimationTargetValue >= r ? Ie(e, {
                    playDirection: -1
                }) : e.sliderAnimationTargetValue <= n && Ie(e, {
                    playDirection: 1
                });
                else {
                    if (a !== c.LOOP_FORWARD) throw new Error("Unexpected slider loop mode: " + a);
                    Ie(e, {
                        playDirection: 1
                    }), e.sliderAnimationTargetValue >= r + s && (e.sliderAnimationTargetValue = n - s)
                }
                isFinite(t) || (t = 0), t = Math.min(t, o / 10);
                var l = (r - n) * t / o;
                e.sliderAnimationTargetValue += l * e.slider.playDirection, e.sliderAnimationTargetValue = Math.max(n - s, Math.min(r + s, e.sliderAnimationTargetValue));
                var u = e.sliderAnimationTargetValue;
                i || (u = d.shortestDecimalBetween(u - .1 * l, u + .1 * l));
                var u = F(e, u);
                e.latex = L(e.latex, u)
            }
        }

        function V(e, t) {
            e.formula = t, e.loading = !1, e.error = t.error ? t.error : "", e.isGraphable = t.is_graphable, e.dependent = t.assignment, e.isTableable = t.is_tableable, e.unresolved = !1, t.is_single_identifier ? e.missingVariables = [] : e.missingVariables = t.variables || [], e.__workerSliderLatex = t.raw_slider_latex, t.is_slider ? (e.__workerSliderValue = t.constant_value, e.__workerSliderMin = t.slider_min_number, e.__workerSliderMax = t.slider_max_number, e.__workerSliderStep = t.slider_step_number, e.__workerSliderMinValid = t.slider_min_valid, e.__workerSliderMaxValid = t.slider_max_valid, e.__workerSliderStepValid = t.slider_step_valid, e.sliderExists || (e.sliderAnimationTargetValue = Q(e), e.sliderDragging = !1, e.sliderExists = !0)) : e.sliderExists = !1, e.__workerDomainMin = t.domain_min_number, e.__workerDomainMax = t.domain_max_number, e.__workerDomainMinValid = t.domain_min_valid, e.__workerDomainMaxValid = t.domain_max_valid, e.__workerCDFMinValid = t.cdf_min_valid, e.__workerCDFMaxValid = t.cdf_max_valid, e.__workerFillOpacityValid = t.fill_opacity_valid, e.__workerCDFEvaluation = t.cdf_evaluation;
            var n = {};
            t.is_regression && (n = t.regression.parameters, e.residualVariable = t.regression.residualVariable), y.isEqual(e.regressionParameters, n) || (e.regressionParameters = n)
        }

        function z(e) {
            var t = g.getParentFolderModel(e);
            t && t.hidden ? e.shouldGraph = !1 : e.formula.expression_type && st(e) ? e.shouldGraph = !1 : e.shouldGraph = !e.hidden
        }

        function U(e) {
            if (!e.sliderExists || e.latex !== e.__workerSliderLatex) return void(e.cachedDisplayLatex = {
                storedLatex: e.latex,
                valueLatex: e.latex
            });
            var t = e.latex;
            if (e.cachedDisplayLatex.storedLatex !== t) return void(e.cachedDisplayLatex = {
                storedLatex: e.latex,
                valueLatex: e.latex
            });
            if (isFinite(e.__workerSliderValue)) {
                var n = e.controller.getFocusLocation();
                n && "expression" === n.type && n.id === e.id || (e.cachedDisplayLatex.valueLatex = L(e.latex, e.__workerSliderValue))
            }
        }

        function G(e) {
            return e.cachedDisplayLatex.valueLatex
        }

        function H(e) {
            var t = b.value(e);
            return t.superscript && t.mantissa ? t.mantissa + "^{" + t.superscript + "}" : t.string
        }

        function K(e) {
            return e.slider.hardMin ? e.slider.min : H(Y(e))
        }

        function W(e) {
            return e.slider.hardMax ? e.slider.max : H(X(e))
        }

        function Y(e) {
            if (e.slider.hardMin) return isFinite(e.__workerSliderMin) ? e.__workerSliderMin : NaN;
            var t = e.controller.isDegreeMode(),
                n = p.default(e.slider.min, t),
                r = Q(e),
                i = $(e),
                o = e.slider.hardMax ? e.__workerSliderMax : void 0,
                a = -10;
            if (n < a && (a = n), r < a && (a = r), o < a && (a = o), i) {
                var s = w.constrainSliderValueLikeEvaluator({
                    target: a,
                    hardMin: void 0,
                    hardMax: o,
                    step: i
                });
                a = s <= a ? s : s - i
            }
            return a
        }

        function X(e) {
            if (e.slider.hardMax) return isFinite(e.__workerSliderMax) ? e.__workerSliderMax : NaN;
            var t = e.controller.isDegreeMode(),
                n = p.default(e.slider.max, t),
                r = Q(e),
                i = $(e),
                o = e.slider.hardMin ? e.__workerSliderMin : void 0,
                a = 10;
            if (n > a && (a = n), r > a && (a = r), o > a && (a = o), i) {
                var s = w.constrainSliderValueLikeEvaluator({
                    target: a,
                    hardMin: o,
                    hardMax: void 0,
                    step: i
                });
                a = s >= a ? s : s + i
            }
            return a
        }

        function $(e) {
            return e.__workerSliderStep
        }

        function Q(e) {
            return e.latex !== e.__workerSliderLatex ? ke(e.latex) : isFinite(e.__workerSliderValue) ? e.__workerSliderValue : NaN
        }

        function Z(e, t) {
            return !!e.formula.viz_valids && !!e.formula.viz_valids[t]
        }

        function J(e, t) {
            return e.vizProps[t]
        }

        function ee(e, t, n) {
            var r;
            e.vizProps = i.__assign({}, e.vizProps, (r = {}, r[t] = n, r))
        }

        function te(e, t) {
            return e.clickableInfo[t]
        }

        function ne(e, t) {
            return "assignment" === t ? !!e.formula.clickableinfo_identifier_valid : "expression" === t && !!e.formula.clickableinfo_expression_valid
        }

        function re(e) {
            return e.formula.clickableinfo_latex
        }

        function ie(e) {
            return e.formula.clickableinfo_identifier
        }

        function oe(e, t, n) {
            var r;
            e.clickableInfo = i.__assign({}, e.clickableInfo, (r = {}, r[t] = n, r))
        }

        function ae(e) {
            return e.clickableInfo.enabled && Ht(e)
        }

        function se(e) {
            return !!e.__workerNeedsDotplotXMode
        }

        function le(e) {
            return !!e.__workerSliderMinValid
        }

        function ce(e) {
            return !!e.__workerSliderMaxValid
        }

        function ue(e) {
            return !!e.__workerSliderStepValid
        }

        function pe(e) {
            return isFinite(e.__workerSampledDomainMin) ? e.__workerSampledDomainMin : isFinite(e.__workerDomainMin) ? e.__workerDomainMin : NaN
        }

        function de(e) {
            return isFinite(e.__workerSampledDomainMax) ? e.__workerSampledDomainMax : isFinite(e.__workerDomainMax) ? e.__workerDomainMax : NaN
        }

        function he(e) {
            return !!e.__workerDomainMinValid
        }

        function fe(e) {
            return !!e.__workerDomainMaxValid
        }

        function me(e, t) {
            var n = e.cachedViewState;
            if (t.stripDefaults && "" === e.parametricDomain.min && "" === e.parametricDomain.max || (n = i.__assign({}, n, {
                    domain: {
                        min: "" === e.parametricDomain.min ? "0" : e.parametricDomain.min,
                        max: "" === e.parametricDomain.max ? "1" : e.parametricDomain.max
                    }
                })), t.stripDefaults) return S.stripDefaults(n);
            if (void 0 === n.points || void 0 === n.lines || void 0 === n.fill) {
                var r = h.default(n);
                return void 0 === r.points && delete r.points, void 0 === r.lines && delete r.lines, void 0 === r.fill && delete r.fill, r
            }
            return n
        }

        function ge(e) {
            var t = e.cachedViewState;
            t && t.folderId === e.folderId && t.color === e.color && t.latex === e.latex && t.parametricDomain === e.parametricDomain && t.fillOpacity === e.fillOpacity && t.polarDomain === e.polarDomain && t.showLabel === e.showLabel && t.cdf === e.cdf && t.vizProps === e.vizProps && t.clickableInfo === e.clickableInfo && t.label === e.label && t.hidden === e.hidden && t.secret === e.secret && t.fill === e.fill && t.fillOpacity === e.fillOpacity && t.points === e.points && t.lines === e.lines && t.lineStyle === e.lineStyle && t.pointStyle === e.pointStyle && t.dragMode === e.dragMode && t.labelSize === e.labelSize && t.labelOrientation === e.labelOrientation && t.verticalLabel === e.verticalLabel && t.interactiveLabel === e.interactiveLabel && t.editableLabelMode === e.editableLabelMode && t.residualVariable === e.residualVariable && t.regressionParameters === e.regressionParameters && t.isLogModeRegression === e.isLogModeRegression && t.displayEvaluationAsFraction === e.displayEvaluationAsFraction && t.slider === e.slider || (e.cachedViewState = {
                type: e.type,
                id: e.id,
                folderId: e.folderId,
                color: e.color,
                latex: e.latex,
                parametricDomain: e.parametricDomain,
                fillOpacity: e.fillOpacity,
                polarDomain: e.polarDomain,
                showLabel: e.showLabel,
                cdf: e.cdf,
                vizProps: e.vizProps,
                clickableInfo: e.clickableInfo,
                label: e.label,
                hidden: e.hidden,
                secret: e.secret,
                points: e.points,
                lines: e.lines,
                lineStyle: e.lineStyle,
                pointStyle: e.pointStyle,
                fill: e.fill,
                dragMode: e.dragMode,
                labelSize: e.labelSize,
                labelOrientation: e.labelOrientation,
                verticalLabel: e.verticalLabel,
                interactiveLabel: e.interactiveLabel,
                editableLabelMode: e.editableLabelMode,
                residualVariable: e.residualVariable,
                regressionParameters: e.regressionParameters,
                isLogModeRegression: e.isLogModeRegression,
                displayEvaluationAsFraction: e.displayEvaluationAsFraction,
                slider: e.slider
            })
        }

        function ye(e, t) {
            t && Ce(e), e.draggingOnGraphpaper = t
        }

        function ve(e) {
            var t = e.memoizedUndoRedoStateParams,
                n = e.cachedViewState,
                r = e.preTransientState;
            if (!t || t.viewState !== n || t.preTransientState !== r) {
                e.memoizedUndoRedoStateParams = {
                    viewState: n,
                    preTransientState: r
                };
                var o;
                o = r ? i.__assign({}, n, {
                    latex: r.latex,
                    slider: i.__assign({}, n.slider, r.slider)
                }) : i.__assign({}, n), delete o.regressionParameters, delete o.residualVariable, e.cachedUndoRedoState = o
            }
        }

        function be(e, t) {
            var n = h.default(S.inflateDefaults(e));
            return i.__assign({}, n, m.DEFAULTS(t), {
                loading: !0,
                labelDropdownOpen: !1,
                formula: {
                    error: void 0
                },
                missingVariables: [],
                error: void 0,
                unresolved: !1,
                color: n.color || t.getNextColor(),
                fill: n.fill,
                points: n.points,
                lines: n.lines,
                pointStyle: n.pointStyle,
                lineStyle: n.lineStyle,
                displayEvaluationAsFraction: n.displayEvaluationAsFraction,
                shouldGraph: void 0,
                sliderDragging: void 0,
                sliderAnimationTargetValue: void 0,
                draggingOnGraphpaper: !1,
                cachedUndoRedoState: void 0,
                cachedParsableState: void 0,
                cachedViewState: void 0,
                cachedDisplayLatex: {
                    storedLatex: "",
                    valueLatex: ""
                }
            })
        }

        function xe(e) {
            var t = g.getParentFolderModel(e),
                n = !(!t || !t.hidden),
                r = e.cachedViewState,
                i = e.index,
                o = e.showLabel && !n,
                a = e.shouldGraph,
                s = e.slider.hardMin ? e.slider.min : "",
                l = e.slider.hardMax ? e.slider.max : "",
                c = e.slider.step,
                u = e.memoizedParsableStateParams;
            if (!u || u.viewState !== r || u.index !== i || u.showLabel !== o || u.shouldGraph !== a || u.polarDomainMin !== e.polarDomain.min || u.polarDomainMax !== e.polarDomain.max || u.fillOpacity !== e.fillOpacity || u.parametricDomainMin !== e.parametricDomain.min || u.parametricDomainMax !== e.parametricDomain.max || u.sliderMin !== s || u.sliderMax !== l || u.sliderStep !== c) {
                e.memoizedParsableStateParams = {
                    viewState: r,
                    index: i,
                    polarDomainMin: e.polarDomain.min,
                    polarDomainMax: e.polarDomain.max,
                    fillOpacity: e.fillOpacity,
                    parametricDomainMin: e.parametricDomain.min,
                    parametricDomainMax: e.parametricDomain.max,
                    sliderMin: s,
                    sliderMax: l,
                    sliderStep: c,
                    showLabel: o,
                    shouldGraph: a
                };
                var p = S.computeParsableState(r);
                p.index = i, p.showLabel = o, p.shouldGraph = a, e.cachedParsableState = p
            }
        }

        function we(e, t) {
            t(e.latex), e.residualVariable && t(e.residualVariable)
        }

        function _e(e) {
            var t = e.sliderExists && (e.slider.isPlaying || e.sliderDragging);
            e.draggingOnGraphpaper || t ? e.preTransientState || (e.preTransientState = {
                latex: e.latex,
                slider: {
                    min: e.slider.min,
                    max: e.slider.max,
                    playDirection: e.slider.playDirection
                }
            }) : delete e.preTransientState, m.updateIsHiddenFromUI(e), z(e), O(e), ge(e), ve(e), xe(e), U(e)
        }

        function Se(e, t) {
            f.copyProperties({
                from: t,
                to: e,
                props: {
                    id: !1,
                    type: !1,
                    color: !0,
                    folderId: !0,
                    latex: !0,
                    polarDomain: !0,
                    parametricDomain: !0,
                    showLabel: !0,
                    label: !0,
                    cdf: !0,
                    vizProps: !0,
                    clickableInfo: !0,
                    hidden: !0,
                    secret: !0,
                    points: !0,
                    lines: !0,
                    lineStyle: !0,
                    pointStyle: !0,
                    fill: !0,
                    fillOpacity: !0,
                    dragMode: !0,
                    labelSize: !0,
                    labelOrientation: !0,
                    verticalLabel: !0,
                    interactiveLabel: !0,
                    editableLabelMode: !0,
                    residualVariable: !0,
                    regressionParameters: !0,
                    isLogModeRegression: !0,
                    displayEvaluationAsFraction: !0,
                    slider: !0
                }
            })
        }

        function Ee(e, t) {
            t ? Ie(e, {
                hardMin: !0,
                min: t
            }) : Ie(e, {
                hardMin: !1,
                min: "-10"
            })
        }

        function Me(e, t) {
            t ? Ie(e, {
                hardMax: !0,
                max: t
            }) : Ie(e, {
                hardMax: !1,
                max: "10"
            })
        }

        function Ie(e, t) {
            e.slider = i.__assign({}, e.slider, t)
        }

        function Te(e, t) {
            if (e && e.sliderExists) {
                e.slider.isPlaying !== t && (Ie(e, {
                    isPlaying: t
                }), t && (Ce(e), e.sliderAnimationTargetValue = Q(e)))
            }
        }

        function Ce(e) {
            if (!e.slider.hardMin) {
                var t = x.default(Y(e));
                t !== e.slider.min && Ie(e, {
                    min: t
                })
            }
            if (!e.slider.hardMax) {
                var n = x.default(X(e));
                n !== e.slider.max && Ie(e, {
                    max: n
                })
            }
        }

        function ke(e) {
            var t = n.parse(e);
            if ("Assignment" !== t.type) return NaN;
            if ("Constant" !== t._expression.type) return NaN;
            if (!M.PolicyGraphing.validLHS(t._symbol)) return NaN;
            if (r[t._symbol]) return NaN;
            var i = t._expression.asValue();
            return "number" == typeof i ? i : NaN
        }

        function De(e, t) {
            var n = ke(t);
            if (isFinite(n)) {
                var r = w.determineWhichLimitsAreCompatibleWithValue({
                    target: n,
                    step: $(e),
                    hardMin: e.slider.hardMin ? Y(e) : void 0,
                    hardMax: e.slider.hardMax ? X(e) : void 0
                });
                r.min || Ie(e, {
                    hardMin: !1,
                    min: "-10"
                }), r.max || Ie(e, {
                    hardMax: !1,
                    max: "10"
                }), r.step || Ie(e, {
                    step: ""
                })
            }
            e.latex = t
        }

        function Pe(e, t) {
            Ie(e, {
                loopMode: t,
                playDirection: 1
            }), e.sliderAnimationTargetValue = Y(e)
        }

        function Le(e, t) {
            t && Ce(e), e.sliderDragging = t
        }

        function Ae(e, t) {
            Ie(e, {
                step: t
            })
        }

        function Oe(e, t) {
            Ie(e, {
                animationPeriod: t
            })
        }

        function Fe(e) {
            return e.displayEvaluationAsFraction
        }

        function qe(e, t) {
            e.displayEvaluationAsFraction = t
        }

        function Ne(e, t) {
            e.label = t
        }

        function Re(e, t) {
            e.showLabel = t
        }

        function Be(e, t) {
            e.polarDomain = i.__assign({}, e.polarDomain, {
                min: t
            })
        }

        function je(e, t) {
            e.parametricDomain = i.__assign({}, e.parametricDomain, {
                min: t
            })
        }

        function Ve(e, t) {
            e.polarDomain = i.__assign({}, e.polarDomain, {
                max: t
            })
        }

        function ze(e, t) {
            e.parametricDomain = i.__assign({}, e.parametricDomain, {
                max: t
            })
        }

        function Ue(e, t) {
            e.isLogModeRegression = t
        }

        function Ge(e, t) {
            e.color = t
        }

        function He(e, t) {
            e.fill = t
        }

        function Ke(e, t) {
            e.fillOpacity !== t && (e.fillOpacity = t)
        }

        function We(e, t) {
            e.labelDropdownOpen = t
        }

        function Ye(e, t) {
            e.dragMode !== t && (e.dragMode = t, t !== o.DragMode.NONE && (e.pointStyle = a.PointStyle.POINT))
        }

        function Xe(e, t) {
            e.points = t
        }

        function $e(e, t) {
            e.pointStyle !== t && (e.pointStyle = t, t !== a.PointStyle.POINT && (e.dragMode = o.DragMode.NONE))
        }

        function Qe(e, t) {
            e.lines = t
        }

        function Ze(e, t) {
            e.lineStyle !== t && (e.lineStyle = t)
        }

        function Je(e, t) {
            e.labelSize = t
        }

        function et(e, t) {
            e.labelOrientation = t
        }

        function tt(e, t) {
            e.verticalLabel = t
        }

        function nt(e, t) {
            e.interactiveLabel = t
        }

        function rt(e, t) {
            e.editableLabelMode = t
        }

        function it(e) {
            return e.editableLabelMode
        }

        function ot(e) {
            var t = e.editableLabelMode;
            return t === S.EditableLabelMode.Math || t === S.EditableLabelMode.Text
        }

        function at(e, t) {
            e.hidden = t, !t && st(e) && (e.lines = e.points = e.fill = void 0)
        }

        function st(e) {
            var t = e.points,
                n = e.lines,
                r = e.fill,
                i = v.getReconciledExpressionProps(e.formula.expression_type, {
                    points: t,
                    lines: n,
                    fill: r
                });
            return !i.points && !i.lines && !i.fill
        }

        function lt(e) {
            return mt(e) || gt(e)
        }

        function ct(e) {
            return e.polarDomain.min
        }

        function ut(e) {
            return e.polarDomain.max
        }

        function pt(e) {
            return e.parametricDomain.min
        }

        function dt(e) {
            return e.parametricDomain.max
        }

        function ht(e) {
            return !!e.sliderExists
        }

        function ft(e) {
            return e.formula.expression_type === v.ExpressionType.POLYGON
        }

        function mt(e) {
            return e.formula.expression_type === v.ExpressionType.PARAMETRIC
        }

        function gt(e) {
            return e.formula.expression_type === v.ExpressionType.POLAR
        }

        function yt(e) {
            return e.formula.expression_type === v.ExpressionType.SINGLE_POINT
        }

        function vt(e) {
            return e.formula.expression_type === v.ExpressionType.POINT_LIST
        }

        function bt(e) {
            return e.formula.expression_type === v.ExpressionType.POINT_LIST || e.formula.expression_type === v.ExpressionType.SINGLE_POINT
        }

        function xt(e) {
            var t = kt(e);
            return !(!t || "visualization" !== t.type || "boxplot" !== t.symbol)
        }

        function wt(e) {
            var t = kt(e);
            return !(!t || "visualization" !== t.type || "dotplot" !== t.symbol)
        }

        function _t(e) {
            var t = kt(e);
            return !(!t || "visualization" !== t.type || "histogram" !== t.symbol)
        }

        function St(e) {
            return xt(e) || wt(e) || _t(e)
        }

        function Et(e) {
            return e.formula.expression_type === v.ExpressionType.TTEST
        }

        function Mt(e) {
            return e.formula.expression_type === v.ExpressionType.STATS
        }

        function It(e) {
            return !!kt(e)
        }

        function Tt(e) {
            var t = kt(e);
            return !(!t || "distribution" !== t.type)
        }

        function Ct(e) {
            var t = e.formula;
            return !!t && !!t.is_discrete_distribution
        }

        function kt(e) {
            if (e.controller.areDistributionsEnabled() && e.latex) return e.cachedParseToplevelFunction && e.cachedParseToplevelFunction.latex === e.latex || (e.cachedParseToplevelFunction = {
                latex: e.latex,
                spec: E.parseToplevelFunction(e.latex)
            }), e.cachedParseToplevelFunction.spec
        }

        function Dt(e) {
            return Pt(e) && Tt(e)
        }

        function Pt(e) {
            return !!e.formula.expression_type
        }

        function Lt(e) {
            return !!e.formula.is_concrete_list
        }

        function At(e) {
            return !!Dt(e) && (!Lt(e) && e.cdf.show)
        }

        function Ot(e) {
            return e.cdf.min
        }

        function Ft(e) {
            return e.cdf.max
        }

        function qt(e) {
            var t = e.formula.cdf_min_default;
            return t === -1 / 0 ? "-\\infty" : isFinite(t) ? t + "" : "-\\infty"
        }

        function Nt(e) {
            var t = e.formula.cdf_max_default;
            return t === 1 / 0 ? "\\infty" : isFinite(t) ? t + "" : "\\infty"
        }

        function Rt(e, t) {
            e.cdf = i.__assign({}, e.cdf, {
                show: t
            })
        }

        function Bt(e, t) {
            e.cdf = i.__assign({}, e.cdf, {
                min: t
            })
        }

        function jt(e, t) {
            e.cdf = i.__assign({}, e.cdf, {
                max: t
            })
        }

        function Vt(e) {
            return !1 !== e.__workerCDFMinValid
        }

        function zt(e) {
            return !1 !== e.__workerCDFMaxValid
        }

        function Ut(e) {
            return !1 !== e.__workerFillOpacityValid
        }

        function Gt(e) {
            return isFinite(e.__workerCDFEvaluation) ? e.__workerCDFEvaluation : 0
        }

        function Ht(e) {
            return !!v.isClickableExpressionType(e.formula.expression_type) && (!e.reconciledDragMode || e.reconciledDragMode === o.DragMode.NONE)
        }

        function Kt(e) {
            e.showLabel = S.DEFAULTS.showLabel, e.label = S.DEFAULTS.label, e.hidden = S.DEFAULTS.hidden, e.dragMode = S.DEFAULTS.dragMode, e.fill = S.DEFAULTS.fill, e.fillOpacity = S.DEFAULTS.fillOpacity, e.points = S.DEFAULTS.points, e.pointStyle = S.DEFAULTS.pointStyle, e.lines = S.DEFAULTS.lines, e.lineStyle = S.DEFAULTS.lineStyle, e.polarDomain = S.DEFAULTS.polarDomain, e.parametricDomain = S.DEFAULTS.parametricDomain, e.slider = S.SLIDER_DEFAULTS, e.latex = "", e.labelSize = s.LabelSize.MEDIUM, e.labelOrientation = l.LabelOrientation.DEFAULT, e.displayEvaluationAsFraction = S.DEFAULTS.displayEvaluationAsFraction, e.verticalLabel = !1, e.interactiveLabel = !1, e.editableLabelMode = S.DEFAULTS.editableLabelMode, e.cdf = S.DEFAULTS.cdf, e.vizProps = S.DEFAULTS.vizProps
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.EvaluationLabelOptions = {
            smallCutoff: 1e-6,
            bigCutoff: 1e9,
            digits: 12
        }, t.isRationalizableConstant = I, t.isGraphable = T, t.shouldShowEvaluation = C, t.getEvaluationValue = k, t.getTTestResults = D, t.getStatsResults = P, t.computeNewSliderLatex = L, t.isEmpty = A, t.updateReconciledDragMode = O, t.adjustSliderByMovablePoint = N, t.adjustSliderByKeyboard = R, t.adjustSliderByDraggingThumb = B, t.tickSliderStep = j, t.onFormulaUpdate = V, t.computeShouldGraph = z, t.updateDisplayLatex = U, t.getDisplayLatex = G, t.getDisplaySliderMin = K, t.getDisplaySliderMax = W, t.getSliderMin = Y, t.getSliderMax = X, t.getSliderStep = $, t.getSliderValue = Q, t.isVizPropValid = Z, t.getVizPropLatex = J, t.setVizProp = ee, t.getClickableInfoPropLatex = te, t.isClickableInfoPropValid = ne, t.getClickableInfoUpdateLatex = re, t.getClickableInfoUpdateIdentifier = ie, t.setClickableInfoProp = oe, t.isClickableObject = ae, t.needsDotplotXMode = se, t.isSliderMinValid = le, t.isSliderMaxValid = ce, t.isSliderStepValid = ue, t.getDomainMin = pe, t.getDomainMax = de, t.isDomainMinValid = he, t.isDomainMaxValid = fe, t.getState = me, t.updateCachedViewState = ge, t.setIsDraggingOnGrapher = ye, t.updateCachedUndoRedoState = ve, t.initModel = be, t.updateCachedParsableState = xe, t.eachLatex = we, t.onControllerUpdate = _e, t.restoreState = Se, t.setSliderMin = Ee, t.setSliderMax = Me, t.setSliderIsPlaying = Te, t.commitSliderSoftLimits = Ce, t.extractSliderValueFromLatex = ke, t.setLatex = De, t.setSliderLoopMode = Pe, t.setSliderDragging = Le, t.setSliderStep = Ae, t.setSliderAnimationPeriod = Oe, t.shouldEvaluationDisplayAsFraction = Fe, t.setEvaluationAsFraction = qe, t.setLabel = Ne, t.setShowLabel = Re, t.setPolarDomainMin = Be, t.setParametricDomainMin = je, t.setPolarDomainMax = Ve, t.setParametricDomainMax = ze, t.setLogMode = Ue, t.setColor = Ge, t.setFill = He, t.setFillOpacity = Ke, t.setLabelDropdownOpen = We, t.setDragMode = Ye, t.setPoints = Xe, t.setPointStyle = $e, t.setLines = Qe, t.setLineStyle = Ze, t.setLabelSize = Je, t.setLabelOrientation = et, t.setVerticalLabel = tt, t.setInteractiveLabel = nt, t.setEditableLabelMode = rt, t.getEditableLabelMode = it, t.hasEditableLabel = ot, t.setHidden = at, t.areAllVisibilityPropsOff = st, t.hasDomain = lt, t.getPolarDomainMin = ct, t.getPolarDomainMax = ut, t.getParametricDomainMin = pt, t.getParametricDomainMax = dt, t.hasSlider = ht, t.isPolygon = ft, t.isParametric = mt, t.isPolar = gt, t.isSinglePoint = yt, t.isPointList = vt, t.isPointOrPointList = bt, t.isBoxPlot = xt, t.isDotPlot = wt, t.isHistogram = _t, t.isVisualization = St, t.isTTest = Et, t.isStats = Mt, t.isToplevelFunction = It, t.isToplevelDistribution = Tt, t.isDiscreteDistribution = Ct, t.parseToplevelFunction = kt, t.shouldShowCDFCheckbox = Dt, t.isPrimaryLatexValid = Pt, t.isListValuedDistribution = Lt, t.shouldShowCDFFooter = At, t.getCDFMin = Ot, t.getCDFMax = Ft, t.getCDFMinPlaceholder = qt, t.getCDFMaxPlaceholder = Nt, t.setShowCDF = Rt, t.setCDFMin = Bt, t.setCDFMax = jt, t.isCDFMinValid = Vt, t.isCDFMaxValid = zt, t.isFillOpacityValid = Ut, t.getCDFEvaluation = Gt, t.isClickableAllowed = Ht, t.blankOutExpressionAfterClearingLatex = Kt
    }), define("graphing-calc/json/folder", ["require", "exports", "tslib", "lib/default-spec"], function(e, t, n, r) {
        "use strict";

        function i(e) {
            return n.__assign({}, t.DEFAULTS, e)
        }

        function o(e) {
            return r.stripDefaults(t.DEFAULTS, e)
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.DEFAULTS = {
            folderId: "",
            collapsed: !1,
            hidden: !1,
            secret: !1,
            title: ""
        }, t.inflateDefaults = i, t.stripDefaults = o
    }), define("graphing-calc/models/folder", ["require", "exports", "tslib", "lib/deepCopy", "lib/copy-properties", "./abstract-item", "./list", "../json/folder"], function(e, t, n, r, i, o, a, s) {
        "use strict";

        function l(e, t) {
            var n = e.cachedViewState;
            return t.stripDefaults ? s.stripDefaults(n) : n
        }

        function c(e) {
            e.cachedViewState = {
                type: e.type,
                id: e.id,
                folderId: e.folderId,
                title: e.title,
                hidden: e.hidden,
                collapsed: e.collapsed,
                secret: e.secret
            }
        }

        function u(e) {
            e.cachedUndoRedoState = e.cachedViewState
        }

        function p(e, t) {
            var i = r.default(s.inflateDefaults(e));
            return n.__assign({}, i, o.DEFAULTS(t), {
                cachedUndoRedoState: {},
                cachedViewState: {}
            })
        }

        function d(e) {
            f(e), o.updateIsHiddenFromUI(e), c(e), u(e)
        }

        function h(e, t) {
            i.copyProperties({
                from: t,
                to: e,
                props: {
                    id: !1,
                    type: !1,
                    folderId: !0,
                    hidden: !0,
                    secret: !0,
                    collapsed: !0,
                    title: !0
                }
            })
        }

        function f(e) {
            var t = e.controller,
                n = t.getSelectedItem();
            e.collapsed ? n && n.folderId === e.id ? (e.selectedHiddenChild = n, a.setSelected(t.getListModel(), e)) : n !== e && (e.selectedHiddenChild = void 0) : (n === e && e.selectedHiddenChild && a.setSelected(t.getListModel(), e.selectedHiddenChild), e.selectedHiddenChild = void 0)
        }

        function m(e, t) {
            e.collapsed = t
        }

        function g(e, t) {
            e.title = t
        }

        function y(e, t) {
            e.hidden = t
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.getState = l, t.updateCachedViewState = c, t.updateCachedUndoRedoState = u, t.initModel = p, t.onControllerUpdate = d, t.restoreState = h, t.updateSelectedHiddenChild = f, t.setCollapsed = m, t.setTitle = g, t.setHidden = y
    }), define("graphing-calc/json/text", ["require", "exports", "tslib", "lib/default-spec"], function(e, t, n, r) {
        "use strict";

        function i(e) {
            return n.__assign({}, t.DEFAULTS, e)
        }

        function o(e) {
            return r.stripDefaults(t.DEFAULTS, e)
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.DEFAULTS = {
            folderId: "",
            text: "",
            secret: !1
        }, t.inflateDefaults = i, t.stripDefaults = o
    }), define("graphing-calc/models/text", ["require", "exports", "tslib", "./abstract-item", "lib/deepCopy", "lib/copy-properties", "../json/text"], function(e, t, n, r, i, o, a) {
        "use strict";

        function s(e, t) {
            e.text = t
        }

        function l(e, t) {
            var o = i.default(a.inflateDefaults(e));
            return n.__assign({}, o, r.DEFAULTS(t), {
                cachedUndoRedoState: {},
                cachedViewState: {}
            })
        }

        function c(e) {
            r.updateIsHiddenFromUI(e), d(e), h(e)
        }

        function u(e, t) {
            o.copyProperties({
                from: t,
                to: e,
                props: {
                    id: !1,
                    type: !1,
                    folderId: !0,
                    text: !0,
                    secret: !0
                }
            })
        }

        function p(e, t) {
            var n = e.cachedViewState;
            return t.stripDefaults ? a.stripDefaults(n) : n
        }

        function d(e) {
            e.cachedViewState = {
                type: e.type,
                id: e.id,
                folderId: e.folderId,
                text: e.text,
                secret: e.secret
            }
        }

        function h(e) {
            e.cachedUndoRedoState = e.cachedViewState
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.setText = s, t.initModel = l, t.onControllerUpdate = c, t.restoreState = u, t.getState = p, t.updateCachedViewState = d, t.updateCachedUndoRedoState = h
    }), define("graphing-calc/models/helper-expression", ["require", "exports", "math/evaluationstate", "tslib", "underscore"], function(e, t, n, r, i) {
        "use strict";

        function o(e) {
            return r.__assign({}, e, {
                formula: n.default(),
                cachedParsableState: {
                    type: "statement",
                    id: e.id,
                    latex: e.latex,
                    shouldGraph: !1
                }
            })
        }

        function a(e, t, n) {
            t.formula = n;
            var r, o = t.proxy,
                a = {
                    numericValue: o.numericValue,
                    listValue: o.listValue
                };
            n.zero_values && 1 === n.zero_values.length && (r = n.zero_values[0].val), o.numericValue = i.isNumber(r) ? r : NaN, o.listValue = i.isArray(r) ? r.slice(0) : void 0, i.isEqual(o.numericValue, a.numericValue) || e.runAfterDispatch(function() {
                o.notifyPropertyChange("numericValue")
            }), i.isEqual(o.listValue, a.listValue) || e.runAfterDispatch(function() {
                o.notifyPropertyChange("listValue")
            })
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.init = o, t.onFormulaUpdate = a
    }), define("graphing-calc/json/image", ["require", "exports", "tslib", "lib/default-spec"], function(e, t, n, r) {
        "use strict";

        function i(e) {
            return n.__assign({}, t.DEFAULTS, e, {
                clickableInfo: n.__assign({}, t.CLICKABLEINFO_DEFAULTS, e.clickableInfo)
            })
        }

        function o(e) {
            var n = r.stripDefaults(t.DEFAULTS, e),
                i = r.stripDefaultsAndMaybeReturnUndefined(t.CLICKABLEINFO_DEFAULTS, e.clickableInfo);
            return void 0 === i ? delete n.clickableInfo : n.clickableInfo = i, n
        }

        function a(e) {
            return {
                type: "image",
                id: e.id,
                center: e.center,
                angle: e.angle,
                width: e.width,
                height: e.height,
                opacity: e.opacity,
                clickableInfo: e.clickableInfo,
                guid: "",
                index: 0,
                color: "",
                shouldGraph: e.hidden,
                showPoints: !1
            }
        }
        Object.defineProperty(t, "__esModule", {
                value: !0
            }), t.CLICKABLEINFO_DEFAULTS = {
                enabled: !1,
                description: "",
                assignment: "",
                expression: "",
                hoveredImage: "",
                depressedImage: ""
            }, t.DEFAULTS = {
                folderId: "",
                hidden: !1,
                secret: !1,
                center: "\\left(0,0\\right)",
                angle: "0",
                width: "10",
                height: "10",
                opacity: "1",
                foreground: !1,
                name: "",
                clickableInfo: t.CLICKABLEINFO_DEFAULTS
            }, t.inflateDefaults = i,
            t.stripDefaults = o, t.computeParsableState = a
    }), define("graphing-calc/models/image", ["require", "exports", "tslib", "lib/color-helpers", "./abstract-item", "lib/deepCopy", "lib/copy-properties", "./list", "jquery", "../json/image"], function(e, t, n, r, i, o, a, s, l, c) {
        "use strict";

        function u(e, t) {
            e.hidden = t
        }

        function p(e, t) {
            e.secret = t
        }

        function d(e, t, n) {
            e[t] = n
        }

        function h(e, t) {
            return e[t]
        }

        function f(e, t) {
            e.name = t
        }

        function m(e, t) {
            e.opacity = t
        }

        function g(e, t) {
            e.foreground = t
        }

        function y(e, t) {
            e.image_url = t
        }

        function v(e) {
            var t = c.computeParsableState(e);
            t.color = e.color, t.index = e.index, t.guid = e.guid, t.shouldGraph = e.shouldGraph, t.showPoints = e.showPoints, e.cachedParsableState = t
        }

        function b(e) {
            e.draggingOnGraphpaper ? e.preTransientState || (e.preTransientState = {
                center: e.center,
                angle: e.angle,
                width: e.width,
                height: e.height,
                opacity: e.opacity
            }) : delete e.preTransientState, i.updateIsHiddenFromUI(e);
            var t = s.getParentFolderModel(e);
            e.shouldGraph = (!t || !t.hidden) && !e.hidden, e.showPoints = e.shouldGraph && s.isItemSelected(e) && "loaded" === e.loadStatus, S(e), M(e), v(e)
        }

        function x(e, t) {
            e.formula = t, e.missingVariables = e.formula.variables || [], e.computed_x = e.formula.dimensions.x, e.computed_y = e.formula.dimensions.y, e.computed_radian_angle = e.formula.dimensions.radianAngle, e.computed_height = e.formula.dimensions.height, e.computed_width = e.formula.dimensions.width, e.computed_opacity = e.formula.dimensions.opacity;
            var n = {
                    center: e.controller.t("Invalid center. Try, for example, (0,0)."),
                    angle: e.controller.t("Invalid angle. Try using any number."),
                    width: e.controller.t("Invalid width. Try using any number."),
                    height: e.controller.t("Invalid height. Try using any number."),
                    opacity: e.controller.t("Invalid opacity. Try using any number.")
                },
                r = [];
            for (var i in e.formula.errorMap) e.formula.errorMap[i] && r.push(n[i]);
            e.error = r[0], e.inputErrors = {
                center: !!e.formula.errorMap.center,
                width: !!e.formula.errorMap.width,
                height: !!e.formula.errorMap.height,
                angle: !!e.formula.errorMap.angle,
                opacity: !!e.formula.errorMap.opacity
            }
        }

        function w(e, t) {
            return !!e.inputErrors && e.inputErrors[t]
        }

        function _(e, t) {
            var n = e.cachedViewState;
            return t.stripDefaults ? c.stripDefaults(n) : n
        }

        function S(e) {
            var t = e.cachedViewState.clickableInfo,
                n = !0,
                r = !0;
            if (t && (t.depressedImage === e.clickableInfo.depressedImage && (r = !1), t.hoveredImage === e.clickableInfo.hoveredImage && (n = !1)), n && (e.hoveredImageObj && (l(e.hoveredImageObj).off("load"), delete e.hoveredImageObj), e.clickableInfo.hoveredImage)) {
                e.hoveredImageObj = new Image;
                var i = function() {
                        var t = e.controller.getGrapher();
                        t && t.redrawAllLayers()
                    },
                    o = function() {};
                I(e.hoveredImageObj, e.clickableInfo.hoveredImage, i, o)
            }
            if (r && (e.depressedImageObj && (l(e.depressedImageObj).off("load"), delete e.depressedImageObj), e.clickableInfo.depressedImage)) {
                e.depressedImageObj = new Image;
                var i = function() {
                        var t = e.controller.getGrapher();
                        t && t.redrawAllLayers()
                    },
                    o = function() {};
                I(e.depressedImageObj, e.clickableInfo.depressedImage, i, o)
            }
            e.cachedViewState = {
                type: e.type,
                id: e.id,
                folderId: e.folderId,
                image_url: e.image_url,
                name: e.name,
                hidden: e.hidden,
                height: e.height,
                width: e.width,
                center: e.center,
                angle: e.angle,
                opacity: e.opacity,
                foreground: e.foreground,
                secret: e.secret,
                clickableInfo: e.clickableInfo
            }
        }

        function E(e, t) {
            e.draggingOnGraphpaper = t
        }

        function M(e) {
            var t = e.cachedViewState;
            e.preTransientState && (t = n.__assign({}, t, e.preTransientState)), e.cachedUndoRedoState = t
        }

        function I(e, t, n, r) {
            l(e).on("load", n).on("error", r), /^data:/.test(t) || (e.crossOrigin = "anonymous"), e.src = t
        }

        function T(e, t) {
            function a() {
                u.controller.dispatch({
                    type: "image-load-success",
                    id: u.id
                })
            }

            function s() {
                u.controller.dispatch({
                    type: "image-load-error",
                    id: u.id
                })
            }
            var l = o.default(c.inflateDefaults(e)),
                u = n.__assign({}, l, i.DEFAULTS(t), {
                    color: r.colors.BLUE,
                    loadStatus: "loading",
                    failures: 0,
                    imageObj: new Image,
                    hoveredImageObj: void 0,
                    depressedImageObj: void 0,
                    shouldGraph: void 0,
                    showPoints: void 0,
                    error: void 0,
                    formula: void 0,
                    missingVariables: [],
                    computed_x: void 0,
                    computed_y: void 0,
                    computed_width: void 0,
                    computed_height: void 0,
                    computed_radian_angle: void 0,
                    computed_opacity: void 0,
                    draggingOnGraphpaper: !1,
                    cachedViewState: {},
                    cachedParsableState: {},
                    cachedUndoRedoState: {}
                });
            return I(u.imageObj, u.image_url, a, s), u
        }

        function C(e, t) {
            a.copyProperties({
                from: t,
                to: e,
                props: {
                    id: !1,
                    type: !1,
                    image_url: !1,
                    name: !0,
                    folderId: !0,
                    hidden: !0,
                    secret: !0,
                    center: !0,
                    opacity: !0,
                    angle: !0,
                    width: !0,
                    height: !0,
                    foreground: !0,
                    clickableInfo: !0
                }
            })
        }

        function k(e, t) {
            for (var n = {
                    errors: [],
                    tokens: []
                }, r = 0; r < t.length; r++) {
                var i = t[r];
                i.type.match("image/*") ? n.tokens.push(D(e, i)) : n.errors.push(e.t('The file "__file__" is not an image', {
                    file: i.name
                }))
            }
            return n
        }

        function D(e, t) {
            var n = "" + B++;
            return e.getGraphSettings().config.imageUploadCallback(t, function(r, i) {
                setTimeout(function() {
                    if (r) e.dispatch({
                        type: "image-upload-error",
                        token: n,
                        error: r
                    });
                    else {
                        var o = new Image;
                        I(o, i, function() {
                            var r = o.width,
                                a = o.height,
                                s = Math.max(r, a) / Math.min(r, a);
                            r < a ? (a = 10, r = Math.round(10 * a / s) / 10) : (r = 10, a = Math.round(10 * r / s) / 10), e.dispatch({
                                type: "image-upload-success",
                                token: n,
                                url: i,
                                width: r + "",
                                height: a + "",
                                name: t.name
                            })
                        }, function() {
                            e.dispatch({
                                type: "image-upload-error",
                                token: n,
                                error: ""
                            })
                        })
                    }
                })
            }), n
        }

        function P(e, t) {
            e.loadStatus = t, "loaded" === t && (e.failures = 0), "failed" === t && (e.failures += 1)
        }

        function L(e) {
            e.imageObj.src = e.imageObj.src, P(e, "loading")
        }

        function A(e, t) {
            return e.clickableInfo[t]
        }

        function O(e, t) {
            return !!e.formula && ("assignment" === t ? !!e.formula.clickableinfo_identifier_valid : "expression" === t && !!e.formula.clickableinfo_expression_valid)
        }

        function F(e) {
            if (e.formula) return e.formula.clickableinfo_latex
        }

        function q(e) {
            if (e.formula) return e.formula.clickableinfo_identifier
        }

        function N(e, t, r) {
            var i;
            e.clickableInfo = n.__assign({}, e.clickableInfo, (i = {}, i[t] = r, i))
        }

        function R(e) {
            return e.clickableInfo.enabled
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.setHidden = u, t.setSecret = p, t.setMQAttribute = d, t.getMQAttribute = h, t.setName = f, t.setOpacity = m, t.setForeground = g, t.setImageURL = y, t.updateCachedParsableState = v, t.onControllerUpdate = b, t.onFormulaUpdate = x, t.hasInputError = w, t.getState = _, t.updateCachedViewState = S, t.setIsDraggingOnGrapher = E, t.updateCachedUndoRedoState = M, t.initModel = T, t.restoreState = C, t.uploadImages = k;
        var B = 0;
        t.uploadImageAndGenerateToken = D, t.setLoadStatus = P, t.retryLoading = L, t.getClickableInfoPropLatex = A, t.isClickableInfoPropValid = O, t.getClickableInfoUpdateLatex = F, t.getClickableInfoUpdateIdentifier = q, t.setClickableInfoProp = N, t.isClickableObject = R
    }), define("graphing-calc/models/list", ["require", "exports", "lib/color-distance", "./abstract-item", "./expression", "./folder", "./table", "./text", "./helper-expression", "./image", "graphing/graphmode", "lib/color-helpers", "underscore", "lib/deepCopy"], function(e, t, n, r, i, o, a, s, l, c, u, p, d, h) {
        "use strict";

        function f(e) {
            return {
                controller: e,
                __itemModelArray: [],
                __itemIdToModel: {},
                __helperIdToModel: {},
                __anyDependsOnRandomSeed: !1,
                drawOrder: [],
                colorIdx: 0,
                expressionAnalysis: {},
                nextDisplayIndex: 1
            }
        }

        function m(e) {
            for (var t = 0; t < e.__itemModelArray.length; t++) {
                var n = e.__itemModelArray[t];
                if ("image" === n.type && "loading" === n.loadStatus) return !0
            }
            return !1
        }

        function g(e) {
            var t = d.filter(d.values(e.controller.getColors()), function(e) {
                    return e != p.colors.ORANGE
                }),
                n = t[e.colorIdx];
            return e.colorIdx = (e.colorIdx + 1) % t.length, n
        }

        function y(e, t) {
            return e.__itemModelArray[t]
        }

        function v(e) {
            for (var t = 0; t < e.__itemModelArray.length; t++) {
                var n = e.__itemModelArray[t];
                if (M(n)) return n
            }
        }

        function b(e) {
            for (var t = e.__itemModelArray.length - 1; t >= 0; t--) {
                var n = e.__itemModelArray[t];
                if (M(n)) return n
            }
        }

        function x(e, t) {
            var n;
            do {
                if (-1 === --t) return;
                n = y(e, t)
            } while (n && !M(n));
            return n
        }

        function w(e, t) {
            var n, r = B(e);
            do {
                if (++t === r) return;
                n = y(e, t)
            } while (n && !M(n));
            return n
        }

        function _(e) {
            if (e.folderId) {
                var t = e.controller.getListModel(),
                    n = L(t, e.folderId);
                if (n && "folder" === n.type) return n
            }
        }

        function S(e, t) {
            var n = L(e, t);
            if (!n || "folder" !== n.type) return 0;
            for (var r = 0, i = e.__itemModelArray.length, o = n.index + 1; o < i && e.__itemModelArray[o].folderId === t; o++) r += 1;
            return r
        }

        function E(e) {
            if (!e) return !1;
            if (e.secret) return !0;
            var t = _(e);
            return !(!t || !t.secret)
        }

        function M(e) {
            return !I(e)
        }

        function I(e) {
            if (!e) return !0;
            if (e.controller.isItemBeingDragged(e.id)) return !1;
            if (!e.controller.canAdministerSecretFolders() && E(e)) return !0;
            var t = _(e);
            return !(!t || !t.collapsed)
        }

        function T(e) {
            return e.__itemModelArray
        }

        function C(e) {
            return d.values(e.__helperIdToModel)
        }

        function k(e, t) {
            for (var n = 0; n < e.__itemModelArray.length; n++) {
                var r = e.__itemModelArray[n];
                switch (r.type) {
                    case "expression":
                        i.eachLatex(r, t);
                        break;
                    case "table":
                        a.eachLatex(r, t);
                        break;
                    case "image":
                    case "folder":
                    case "text":
                        break;
                    default:
                        return r
                }
            }
        }

        function D(e) {
            var t = [];
            k(e, function(e) {
                if (-1 === e.indexOf("~") && -1 === e.indexOf("\\sim"))
                    for (var n = /_(\d)|_\{(?:\s|\\space)*(\d+)(?:\s|\\space)*\}/g;;) {
                        var r = n.exec(e);
                        if (!r) break;
                        t.push(parseInt(r[1] || r[2], 10))
                    }
            }), t.sort(function(e, t) {
                return e - t
            });
            for (var n = 1, r = 0; r < t.length; r++) t[r] === n && n++;
            return n
        }

        function P(e) {
            var t = [];
            d.each(e.__itemModelArray, function(e) {
                "table" === e.type ? d.each(e.columnModels, function(e) {
                    t.push(e.id)
                }) : t.push(e.id)
            }), e.drawOrder = t
        }

        function L(e, t) {
            return e.__itemIdToModel[t]
        }

        function A(e, t) {
            for (var n = [], r = 0; r < e.__itemModelArray.length; r++) {
                var i = e.__itemModelArray[r];
                "expression" === i.type && i.dependent === t && n.push(i)
            }
            return n
        }

        function O(e, t) {
            return e.__helperIdToModel[t]
        }

        function F(e, t) {
            var n = l.init(t);
            e.__helperIdToModel[n.id] = n
        }

        function q(e) {
            e.__anyDependsOnRandomSeed = !1;
            for (var t = 0; t < e.__itemModelArray.length; t++) {
                var n = e.__itemModelArray[t];
                if (n && "formula" in n && n.formula && n.formula.depends_on_random_seed) return void(e.__anyDependsOnRandomSeed = !0)
            }
        }

        function N(e) {
            for (var t = !e.controller.canAdministerSecretFolders(), n = 1, r = 1, i = 0; i < e.__itemModelArray.length; i++) {
                var o = e.__itemModelArray[i];
                o.index = i, o.displayIndex = n, E(o) && (o.secretIndex = r, r += 1), t && E(o) || (n += 1)
            }
            e.nextDisplayIndex = n
        }

        function R(e) {
            e.__itemModelArray = [], e.__itemIdToModel = {}, e.__helperIdToModel = {}, e.__anyDependsOnRandomSeed = !1
        }

        function B(e) {
            return e.__itemModelArray.length
        }

        function j(e) {
            return 1 === e.nextDisplayIndex
        }

        function V(e) {
            for (var t = [], n = 0; n < e.__itemModelArray.length; n++) {
                var r = e.__itemModelArray[n];
                "expression" === r.type && r.sliderExists && t.push(r)
            }
            return t
        }

        function z(e) {
            return e.selectedItem
        }

        function U(e) {
            return {
                list: e.__itemModelArray.map(function(e) {
                    return e.cachedUndoRedoState
                })
            }
        }

        function G(e, t) {
            return {
                list: e.__itemModelArray.map(function(e) {
                    switch (e.type) {
                        case "expression":
                            return i.getState(e, t);
                        case "image":
                            return c.getState(e, t);
                        case "table":
                            return a.getState(e, t);
                        case "folder":
                            return o.getState(e, t);
                        case "text":
                            return s.getState(e, t);
                        default:
                            return e
                    }
                })
            }
        }

        function H(e) {
            for (var t = 0, n = /^[0-9]+$/, r = e.list.length - 1; r >= 0; r--) {
                var i = e.list[r],
                    o = i.id;
                if (n.test(o)) {
                    var a = parseInt(o, 10);
                    a > t && (t = a)
                }
                if ("table" === i.type && i.columns)
                    for (var s = i.columns.length - 1; s >= 0; s--)
                        if (o = i.columns[s].id, n.test(o)) {
                            var a = parseInt(o, 10);
                            a > t && (t = a)
                        }
            }
            return t
        }

        function K(e, t, r) {
            r || (r = {});
            var i, o;
            for (e.colorIdx = 0, R(e), e.expressionAnalysis = {}, i = 0; i < t.list.length; i++) {
                if (o = W(e, t.list[i]), r.remapColors && "color" in o && o.color) {
                    var a = d.values(e.controller.getColors());
                    d.contains(a, o.color) || (o.color = n.closestColor(o.color, a))
                }
                e.__itemModelArray.push(o), e.__itemIdToModel[o.id] = o
            }
            if (N(e), 1 === e.nextDisplayIndex) {
                ee(e, W(e, {
                    type: "expression",
                    id: e.controller.generateId(),
                    color: e.controller.getNextColor()
                }), e.__itemModelArray.length)
            }
        }

        function W(e, t) {
            switch (t.type) {
                case "expression":
                    return i.initModel(t, e.controller);
                case "table":
                    return a.initModel(t, e.controller);
                case "image":
                    return c.initModel(t, e.controller);
                case "folder":
                    return o.initModel(t, e.controller);
                case "text":
                    return s.initModel(t, e.controller);
                default:
                    return t
            }
        }

        function Y(e, t) {
            var n, r, l = e.__itemIdToModel;
            for (e.__itemModelArray = [], e.__itemIdToModel = {}, n = 0; n < t.list.length; n++) {
                var u = t.list[n];
                if ((r = l[u.id]) && r.type === u.type) switch (r.type) {
                    case "expression":
                        if (u.type !== r.type) throw new Error("invalid restoration");
                        i.restoreState(r, u);
                        break;
                    case "table":
                        if (u.type !== r.type) throw new Error("invalid restoration");
                        a.restoreState(r, u);
                        break;
                    case "image":
                        if (u.type !== r.type) throw new Error("invalid restoration");
                        c.restoreState(r, u);
                        break;
                    case "folder":
                        if (u.type !== r.type) throw new Error("invalid restoration");
                        o.restoreState(r, u);
                        break;
                    case "text":
                        if (u.type !== r.type) throw new Error("invalid restoration");
                        s.restoreState(r, u);
                        break;
                    default:
                        return r
                } else r = W(e, u);
                e.__itemModelArray.push(r), e.__itemIdToModel[r.id] = r
            }
            q(e), N(e)
        }

        function X(e, t, n) {
            var r = n[0] && n[0].tableId,
                i = L(e, r || t);
            if (i) {
                var o;
                switch (i.type) {
                    case "expression":
                        var s = !1;
                        i.__workerNeedsDotplotXMode = !1;
                        for (var l = 0; l < n.length; l++) {
                            var c = n[l];
                            "resolved" in c && !c.resolved && (s = !0), c.boundingBox && (o || (o = []), o.push(c.boundingBox)), c.needsDotplotXMode && (i.__workerNeedsDotplotXMode = !0)
                        }
                        i.unresolved = s, i.boundingBoxes = o;
                        for (var p = 1 / 0, d = -1 / 0, h = 0, f = n; h < f.length; h++) {
                            var c = f[h];
                            if (c.graphMode === u.POLAR) {
                                var m = c.sampledDomain;
                                m && (p = Math.min(p, m.min), d = Math.max(d, m.max))
                            }
                        }
                        return isFinite(p) && (i.__workerSampledDomainMin = p), void(isFinite(d) && (i.__workerSampledDomainMax = d));
                    case "table":
                        for (var l = 0; l < n.length; l++) {
                            var c = n[l];
                            c.boundingBox && (o || (o = []), o.push(c.boundingBox))
                        }
                        return void(o && a.setColumnBoundingBoxes(i, t, o));
                    default:
                        return
                }
            }
        }

        function $(e, t) {
            var n, r, o, s = h.default(e.expressionAnalysis);
            for (n in t)
                if (t.hasOwnProperty(n)) {
                    o = t[n], r = L(e, n);
                    var u = {
                        isGraphable: !!o.is_graphable,
                        isError: !!o.error,
                        errorMessage: o.error ? e.controller.unpack(o.error) : void 0
                    };
                    if (r) switch (r.type) {
                        case "expression":
                            if (i.onFormulaUpdate(r, o), o.zero_values && 1 === o.zero_values.length) {
                                var p = o.zero_values[0].val;
                                d.isNumber(p) && (u.evaluation = {
                                    type: "Number",
                                    value: p
                                }, u.evaluationDisplayed = !0), d.isArray(p) && p.every(d.isNumber) && (u.evaluation = {
                                    type: "ListOfNumber",
                                    value: p.slice()
                                }, u.evaluationDisplayed = !0)
                            } else o.hasOwnProperty("constant_value") && d.isNumber(o.constant_value) && (u.evaluation = {
                                type: "Number",
                                value: o.constant_value
                            }, u.evaluationDisplayed = !1);
                            break;
                        case "image":
                            c.onFormulaUpdate(r, o);
                            break;
                        case "table":
                            a.onFormulaUpdate(r, o);
                            break;
                        case "folder":
                        case "text":
                            break;
                        default:
                            var f = r;
                            return f
                    } else {
                        var m = O(e, n);
                        if (!m) continue;
                        l.onFormulaUpdate(e.controller, m, o)
                    }
                    s[n] = u
                } q(e), e.expressionAnalysis = s
        }

        function Q(e, t) {
            e.selectedItem = t
        }

        function Z(e) {
            for (var t = "", n = 0, i = e.__itemModelArray; n < i.length; n++) {
                var o = i[n];
                "folder" === o.type ? (t = o.id, "" !== o.folderId && r.setFolderId(o, "")) : "" === o.folderId ? t = "" : o.folderId !== t && (r.setFolderId(o, ""), t = "")
            }
        }

        function J(e, t, n, r) {
            if (t !== n) {
                var i = e.__itemModelArray.splice(t, r);
                t < n && (n = n - r + 1), e.__itemModelArray.splice.apply(e.__itemModelArray, [n, 0].concat(i)), N(e)
            }
        }

        function ee(e, t, n) {
            var r = String(t.id);
            if (e.__itemIdToModel.hasOwnProperty(r)) throw Error("Item with id '" + r + "' is already in list");
            e.__itemIdToModel[r] = t, e.__itemModelArray.splice(n, 0, t), N(e)
        }

        function te(e, t) {
            ee(e, t, B(e))
        }

        function ne(e, t) {
            var n = e.__itemModelArray[t];
            if ("folder" === n.type) {
                for (var r = 0, i = n.index + 1; i < e.__itemModelArray.length; i++) {
                    var o = e.__itemModelArray[i];
                    if (o.folderId !== n.id) break;
                    r += 1, se(o) && Q(e, void 0), delete e.__itemIdToModel[o.id], delete e.expressionAnalysis[n.id]
                }
                e.__itemModelArray.splice(t, 1 + r)
            } else e.__itemModelArray.splice(t, 1);
            se(n) && Q(e, void 0), delete e.__itemIdToModel[n.id], delete e.expressionAnalysis[n.id], q(e), N(e)
        }

        function re(e) {
            return e.__anyDependsOnRandomSeed
        }

        function ie(e, t) {
            var n = L(e, t);
            n && ne(e, n.index)
        }

        function oe(e) {
            var t = z(e);
            if (!t) return !1;
            var n = x(e, t.index);
            return !!n && (Q(e, n), n.index === B(e) - 1 && "expression" === t.type && i.isEmpty(t) && ne(e, n.index), !0)
        }

        function ae(e) {
            var t = z(e);
            if (!t) return !1;
            var n = w(e, t.index);
            return !!n && (Q(e, n), !0)
        }

        function se(e) {
            return e.controller.getListModel().selectedItem === e
        }

        function le(e, t) {
            e.dragState = t
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.init = f, t.areAnyImagesLoading = m, t.getNextColor = g, t.getItemByIndex = y, t.getFirstSelectableItem = v, t.getLastSelectableItem = b, t.findPrevSelectableItem = x, t.findNextSelectableItem = w, t.getParentFolderModel = _, t.getNumberOfItemsInFolder = S, t.isItemSecret = E, t.isItemSelectable = M, t.isItemHiddenFromUI = I, t.getAllItemModels = T, t.getAllHelperItemModels = C, t.eachLatex = k, t.findAvailableColumnSubscript = D, t.updateDrawOrder = P, t.getItemById = L, t.getItemsByIdentifier = A, t.getHelperExpressionById = O, t.addHelperExpression = F, t.recomputeAnyItemDependsOnRandomSeed = q, t.reindex = N, t.removeAllItems = R, t.getItemCount = B, t.hasNoVisibleExpressions = j, t.getAllModelsWithSliders = V, t.getSelected = z, t.getUndoRedoState = U, t.getState = G, t.getLargestIntegerId = H, t.setListState = K, t.modelFromSpec = W, t.restoreListState = Y, t.onGraphComputed = X, t.onEvaluatorFormulaUpdates = $, t.setSelected = Q, t.verifyFolderIntegrity = Z, t.moveItemsTo = J, t.insertItemAtIndex = ee, t.insertItemAtEnd = te, t.removeItemAtIndex = ne, t.anyItemDependsOnRandomSeed = re, t.removeItemById = ie, t.selectPrevItem = oe, t.selectNextItem = ae, t.isItemSelected = se, t.setDragState = le
    }), define("graphing-calc/models/abstract-item", ["require", "exports", "./list"], function(e, t, n) {
        "use strict";

        function r() {
            return "abstract_item_" + c++
        }

        function i(e) {
            return {
                guid: r(),
                controller: e,
                index: -1,
                displayIndex: -1,
                secretIndex: -1,
                isHiddenFromUI: !0,
                renderShell: !0
            }
        }

        function o(e, t) {
            e.secret = t
        }

        function a(e, t) {
            e.folderId = t
        }

        function s(e) {
            e.isHiddenFromUI = n.isItemHiddenFromUI(e)
        }

        function l(e) {
            return e.isHiddenFromUI ? "none" : e.renderShell ? "shell" : "render"
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var c = 0;
        t.getGUID = r, t.DEFAULTS = i, t.setSecret = o, t.setFolderId = a, t.updateIsHiddenFromUI = s, t.getDisplayState = l
    }), define("graphing-calc/json/table", ["require", "exports", "tslib", "lib/default-spec", "expressions/styles", "graphing/dragmode"], function(e, t, n, r, i, o) {
        "use strict";

        function a(e) {
            var r = n.__assign({}, t.DEFAULTS, e);
            return r.columns = r.columns.map(function(e) {
                return n.__assign({}, t.COLUMN_DEFAULTS, e)
            }), r
        }

        function s(e) {
            return e = n.__assign({}, e, {
                columns: e.columns.map(function(e) {
                    return r.stripDefaults(t.COLUMN_DEFAULTS, e)
                })
            }), r.stripDefaults(t.DEFAULTS, e)
        }

        function l(e) {
            return {
                type: "table",
                id: e.id,
                columns: e.columns.map(function(t) {
                    return n.__assign({}, t, {
                        tableId: e.id
                    })
                })
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.DEFAULTS = {
            folderId: "",
            secret: !1,
            columns: []
        }, t.COLUMN_DEFAULTS = {
            latex: "",
            color: "",
            hidden: !1,
            values: [],
            points: !0,
            lines: !1,
            dragMode: o.DragMode.NONE,
            pointStyle: i.PointStyle.POINT,
            lineStyle: i.LineStyle.SOLID
        }, t.inflateDefaults = a, t.stripDefaults = s, t.computeParsableState = l
    }), define("graphing-calc/models/table", ["require", "exports", "math/rational-arithmetic-sequence", "tslib", "expressions/styles", "graphing/dragmode", "./abstract-item", "underscore", "graphing/label", "lib/evaluate-single-expression", "math/distance", "lib/deepCopy", "lib/copy-properties", "graphing-calc/models/list", "../json/table", "../json/table", "../json/table"], function(e, t, n, r, i, o, a, s, l, c, u, p, d, h, f, m, g) {
        "use strict";

        function y(e, t, n, r) {
            r.row = e.rowModels[t], r.row.cells.splice(n, 0, r)
        }

        function v(e, t, n) {
            e.rowModels[t].cells.splice(n, 1)
        }

        function b(e) {
            return isFinite(e) ? l.truncatedLatexLabel(e, {
                digits: 8,
                bigCutoff: 1e6,
                smallCutoff: .001
            }) : "\\mathrm{undefined}"
        }

        function x(e, t, n) {
            var r = e.columnModels[t];
            r.error = n.error, r.discrete = n.discrete, r.disabled = n.dependent, r.draggable = !n.error && !n.dependent, r.packedErrors = [], r.computedValues = [];
            for (var i = n.values, o = i.length - 1; o >= 0; o--) {
                var a = i[o];
                r.computedValues[o] = "number" == typeof a ? b(a) : "", r.packedErrors[o] = a && a.msg ? a : void 0
            }
        }

        function w(e) {
            var t = Q(e);
            if (t) {
                var n = _(e);
                if (!n) return void(e.isExpanded || oe(e, !0));
                t.row >= n.min && t.row < n.max && oe(e, !0)
            }
        }

        function _(e) {
            if (!e.isExpanded) {
                var t = e.rowModels.length;
                if (!(t < 30)) return {
                    min: 8,
                    max: t - 5
                }
            }
        }

        function S(e, t) {
            var n = e.columnModels[t];
            return {
                values: e.columns[t].values.slice(),
                dragMode: n.dragMode,
                hidden: n.hidden,
                id: n.id,
                color: n.color,
                points: n.points,
                lines: n.lines,
                pointStyle: n.pointStyle,
                lineStyle: n.lineStyle,
                latex: n.latex
            }
        }

        function E() {
            return "table_guid_" + he++
        }

        function M() {
            return {
                guid: E(),
                type: "cell",
                row: void 0,
                column: void 0
            }
        }

        function I(e) {
            return {
                type: "row",
                index: e,
                guid: E(),
                cells: []
            }
        }

        function T(e, t, n, r) {
            var i = e.columnModels[t];
            i.cells.splice(n, 0, r), r.column = i, e.columns[i.index].values.splice(n, 0, "")
        }

        function C(e, t, n) {
            var r = e.columnModels[t];
            r.cells.splice(n, 1), e.columns[r.index].values.splice(n, 1)
        }

        function k(e, t, n) {
            var i = r.__assign({}, n, {
                type: "header",
                guid: E(),
                index: t,
                error: void 0,
                table: e,
                color: n.color || e.controller.getNextColor(),
                packedErrors: [],
                computedValues: [],
                cells: void 0,
                row: void 0,
                discrete: void 0,
                shouldGraph: void 0,
                disabled: void 0,
                draggable: void 0
            });
            return i.cells = i.values.map(function() {
                var e = M();
                return e.column = i, e
            }), delete i.values, 0 === t && (i.hidden = !0), i
        }

        function D(e) {
            e.draggingOnGraphpaper ? e.preTransientState || (e.preTransientState = {
                columns: V(e, {
                    stripDefaults: !1
                }).columns
            }) : delete e.preTransientState, a.updateIsHiddenFromUI(e);
            var t = h.getParentFolderModel(e),
                n = t && t.hidden;
            s.each(e.columnModels, function(e) {
                e.shouldGraph = !n && !e.hidden
            }), z(e), G(e), R(e)
        }

        function P(e, t) {
            e.formula = t;
            var n, r = e.formula.column_data,
                i = e.columnModels[0].cells.length,
                o = e.columnModels.length,
                a = 0;
            for (n = 0; n < r.length; n++) {
                var s = r[n].values.length;
                s > a && (a = s)
            }
            for (n = a - i; n > 0; n--) L(e, i), i++;
            for (n = 0; n < r.length && n < o; n++) x(e, n, r[n]);
            var l = e.columnModels[e.columnModels.length - 1];
            l.disabled = !0, l.error = void 0
        }

        function L(e, t) {
            var n = I(t + 1);
            e.rowModels.splice(t + 1, 0, n);
            for (var r = t + 1; r < e.rowModels.length; r++) e.rowModels[r].index = r;
            for (r = 0; r < e.columnModels.length; r++) {
                var i = M();
                T(e, r, t, i), y(e, t + 1, r, i)
            }
        }

        function A(e, t) {
            var n = _(e);
            n && t === n.max - 1 && oe(e, !0);
            for (var r = 0; r < e.columnModels.length; r++) C(e, r, t);
            for (e.rowModels.splice(t + 1, 1), r = t + 1; r < e.rowModels.length; r++) e.rowModels[r].index = r
        }

        function O(e, t, n) {
            var i = r.__assign({}, f.COLUMN_DEFAULTS, n, {
                    values: e.columns[0].values.map(function() {
                        return ""
                    })
                }),
                o = k(e, t, i);
            e.columnModels.splice(t, 0, o), e.columns.splice(t, 0, i);
            for (var a = t + 1; a < e.columnModels.length; a++) e.columnModels[a].index = a;
            for (y(e, 0, t, o), a = 1; a < e.rowModels.length; a++) y(e, a, t, o.cells[a - 1])
        }

        function F(e, t) {
            e.columnModels.splice(t, 1);
            for (var n = t; n < e.columnModels.length; n++) e.columnModels[n].index = n;
            for (n = 0; n < e.rowModels.length; n++) v(e, n, t)
        }

        function q(e, t) {
            var r, i = e.columnModels.length,
                o = [];
            for (r = 0; r < i; r++) o.push("");
            var a = e.columns[0].values;
            if (t > 1) {
                var s = e.controller.isDegreeMode(),
                    l = c.default(a[0], s),
                    p = c.default(a[1], s);
                if (isFinite(l) && isFinite(p)) {
                    var d = n(l, p);
                    if (d) {
                        var h = d.nstart,
                            f = h / d.lcm;
                        for (r = 0; r < t; r++) {
                            var m = c.default(a[r], s);
                            if (!u.approx(m, f)) return o;
                            h += d.nstep, f = h / d.lcm
                        }
                        o[0] = ("" + l).length < 8 && ("" + p).length < 8 ? "" + f : "\\frac{" + h + "}{" + d.lcm + "}"
                    }
                }
            }
            return o
        }

        function N(e, t) {
            for (var n = 0; n < e.columnModels.length; n++) {
                t(e.columnModels[n].latex);
                for (var r = e.columns[n], i = 0; i < r.values.length; i++) r.values[i] && t(r.values[i])
            }
        }

        function R(e) {
            for (var t = g.computeParsableState({
                    type: "table",
                    id: e.id,
                    secret: e.secret,
                    folderId: e.folderId,
                    columns: e.columnModels.map(function(t) {
                        return S(e, t.index)
                    })
                }), n = 0; n < t.columns.length; n++) t.columns[n].hidden = !e.columnModels[n].shouldGraph;
            e.cachedParsableState = t
        }

        function B(e, t) {
            return e = p.default(e), e.push(r.__assign({}, f.COLUMN_DEFAULTS, {
                id: t,
                values: e[0].values.map(function() {
                    return ""
                })
            })), e.forEach(function(e) {
                e.values.push("")
            }), e
        }

        function j(e) {
            return e = p.default(e), e.pop(), e.forEach(function(e) {
                e.values.pop()
            }), e
        }

        function V(e, t) {
            var n = r.__assign({}, e.cachedViewState, {
                columns: j(e.cachedViewState.columns)
            });
            return t.stripDefaults ? m.stripDefaults(n) : n
        }

        function z(e) {
            var t = e.columnModels.map(function(t, n) {
                return S(e, n)
            });
            e.cachedViewState = {
                id: e.id,
                type: e.type,
                folderId: e.folderId,
                columns: t,
                secret: e.secret
            }
        }

        function U(e, t) {
            e.draggingOnGraphpaper = t
        }

        function G(e) {
            var t = r.__assign({}, e.cachedViewState, {
                columns: j(e.cachedViewState.columns)
            });
            e.preTransientState && (t = r.__assign({}, t, e.preTransientState)), e.cachedUndoRedoState = t
        }

        function H(e, t) {
            if (e.columnModels.length - 1 !== t.length) return {
                type: "start-fresh"
            };
            if (e.columnModels[0].cells.length - 1 !== t[0].values.length) return {
                type: "start-fresh"
            };
            for (var n = -1, r = t.length - 1; r >= 0; r--) {
                var i = e.columns[r],
                    o = t[r];
                if (i.id !== o.id) return {
                    type: "start-fresh"
                };
                for (var a = i.values, s = o.values, l = s.length - 1; l >= 0; l--)
                    if (a[l] !== s[l] && (-1 === n && (n = l), n !== l)) return {
                        type: "start-fresh"
                    }
            }
            return -1 === n ? {
                type: "none"
            } : {
                type: "edit-row",
                rowIndex: n
            }
        }

        function K(e, t) {
            var n = H(e, t.columns);
            if (d.copyProperties({
                    from: t,
                    to: e,
                    props: {
                        id: !1,
                        type: !1,
                        columns: !1,
                        folderId: !0,
                        secret: !0
                    }
                }), "start-fresh" === n.type) e.columns = B(t.columns, e.controller.generateId()), Y(e);
            else {
                switch (n.type) {
                    case "none":
                        break;
                    case "edit-row":
                        for (var r = t.columns.length - 1; r >= 0; r--) {
                            ue(e, {
                                column: r,
                                row: n.rowIndex + 1
                            }, t.columns[r].values[n.rowIndex])
                        }
                        break;
                    default:
                        return n
                }
                for (var i = 0; i < t.columns.length; i++) d.copyProperties({
                    from: t.columns[i],
                    to: e.columnModels[i],
                    props: {
                        id: !1,
                        values: !1,
                        color: !0,
                        latex: !0,
                        hidden: !0,
                        points: !0,
                        lines: !0,
                        dragMode: !0,
                        lineStyle: !0,
                        pointStyle: !0
                    }
                })
            }
        }

        function W(e, t) {
            var n = p.default(m.inflateDefaults(e)),
                i = r.__assign({}, n, a.DEFAULTS(t), {
                    columnModels: void 0,
                    rowModels: void 0,
                    formula: void 0,
                    draggingOnGraphpaper: !1,
                    cachedViewState: {},
                    cachedParsableState: {},
                    cachedUndoRedoState: {},
                    isExpanded: !1
                });
            i.columns = B(i.columns, t.generateId());
            var o, s = 0;
            for (o = 0; o < i.columns.length; o++) i.columns[o].values || (i.columns[o].values = []), i.columns[o].values.length > s && (s = i.columns[o].values.length);
            for (o = 0; o < i.columns.length; o++)
                for (var l = s - i.columns[o].values.length; l > 0; l--) i.columns[o].values.push("");
            return Y(i), i
        }

        function Y(e) {
            e.columnModels = e.columns.map(function(t, n) {
                return k(e, n, t)
            }), e.rowModels = [I(0)];
            for (var t = 0; t < e.columnModels.length; t++) y(e, 0, t, e.columnModels[t]);
            for (var t = 0; t < e.columnModels[0].cells.length; t++) {
                var n = I(t + 1);
                e.rowModels.push(n);
                for (var r = 0; r < e.columnModels.length; r++) y(e, t + 1, r, e.columnModels[r].cells[t])
            }
        }

        function X(e, t, n) {
            for (var r = [], a = Math.min(t.length, fe.length), s = 0; s < a; s++) r.push({
                id: n.generateId(),
                latex: l.identifierToLatex(fe[s] + "_" + e),
                values: t[s],
                color: n.getNextColor(),
                hidden: !1,
                points: !0,
                lines: !1,
                dragMode: o.DragMode.NONE,
                pointStyle: i.PointStyle.POINT,
                lineStyle: i.LineStyle.SOLID
            });
            return {
                id: n.generateId(),
                type: "table",
                folderId: "",
                secret: !1,
                columns: r
            }
        }

        function $(e, t) {
            var n = V(e, {
                stripDefaults: !1
            });
            if (!n.columns || !t.columns) return t;
            for (var r = 0; r < t.columns.length; r++) {
                var i = n.columns[r],
                    o = t.columns[r];
                if (i)
                    for (var a in i) i.hasOwnProperty(a) && (o.hasOwnProperty(a) || (o[a] = i[a]))
            }
            return t
        }

        function Q(e) {
            var t = e.controller.getFocusLocation();
            return t && "table" === t.type && t.id === e.id ? t.location : void 0
        }

        function Z(e, t) {
            for (var n = 0; n < e.columnModels.length; n++) {
                var r = e.columnModels[n];
                if (r.id === t) return r
            }
        }

        function J(e, t, n) {
            var r = Z(e, t);
            r && (r.points = n, n || (r.dragMode = o.DragMode.NONE))
        }

        function ee(e, t, n) {
            var r = Z(e, t);
            r && (r.pointStyle = n)
        }

        function te(e, t, n) {
            var r = Z(e, t);
            r && (r.lines = n)
        }

        function ne(e, t, n) {
            var r = Z(e, t);
            r && (r.lineStyle = n)
        }

        function re(e, t, n) {
            var r = Z(e, t);
            r && (r.dragMode = n, n === o.DragMode.NONE || r.points || (r.points = !0))
        }

        function ie(e, t, n) {
            var r = Z(e, t);
            r && (r.color = n)
        }

        function oe(e, t) {
            e.isExpanded = t
        }

        function ae(e, t, n) {
            var r = Z(e, t);
            r && (r.hidden = n, n && le(e))
        }

        function se(e, t, n) {
            var r = Z(e, t);
            r && (r.boundingBoxes = n, le(e))
        }

        function le(e) {
            var t = [];
            e.columnModels.forEach(function(e) {
                e.boundingBoxes && !e.hidden && (t = t.concat(e.boundingBoxes))
            }), e.boundingBoxes = t
        }

        function ce(e, t) {
            var n = Z(e, t);
            return !n || !n.points && !n.lines
        }

        function ue(e, t, n) {
            if (0 === t.row) {
                var r = e.columnModels[t.column].id,
                    i = Z(e, r);
                if (!i) return;
                return i.latex = n, void(t.column >= e.columnModels.length - 1 && O(e, t.column + 1, {
                    id: e.controller.generateId(),
                    latex: "",
                    color: e.controller.getNextColor()
                }))
            }
            var o = e.columnModels[t.column];
            e.columns[o.index].values[t.row - 1] = n, "" !== n && t.row >= e.columnModels[0].cells.length && L(e, t.row)
        }

        function pe(e, t) {
            return t.row < e.rowModels.length && t.column < e.columnModels.length
        }

        function de(e) {
            if (e.values)
                for (var t = 0, n = e.values; t < n.length; t++)
                    if ("" !== n[t]) return !1;
            if (e.computedValues)
                for (var r = 0, i = e.computedValues; r < i.length; r++)
                    if ("" !== i[r]) return !1;
            return !0
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.insertCellToRow = y, t.removeCellFromRow = v, t.formatValueForDisplay = b, t.setColumnComputedValues = x, t.updateIsCollapsedByFocusLocation = w, t.getCollapsedRange = _, t.getColumnState = S;
        var he = 0;
        t.getGUID = E, t.makeCell = M, t.makeRow = I, t.insertCellToColumn = T, t.removeCellFromColumn = C, t.makeColumn = k, t.onControllerUpdate = D, t.onFormulaUpdate = P, t.insertBlankRow = L, t.removeRow = A, t.insertBlankColumn = O, t.removeColumn = F, t.getRowAutoFillValues = q, t.eachLatex = N, t.updateCachedParsableState = R, t.addBlankRowAndColumn = B, t.stripBlankRowAndColumn = j, t.getState = V, t.updateCachedViewState = z, t.setIsDraggingOnGrapher = U, t.updateCachedUndoRedoState = G, t.computeTableStructureMutation = H, t.restoreState = K, t.initModel = W, t.buildEntireColumnStructure = Y;
        var fe = ["x", "y", "z", "u", "v", "w"];
        t.makeTableState = X, t.cloneTableAndExtendWithProperties = $, t.getSelectedCell = Q, t.getColumnModel = Z, t.setColumnPoints = J, t.setColumnPointStyle = ee, t.setColumnLines = te, t.setColumnLineStyle = ne, t.setColumnDragMode = re, t.setColumnColor = ie, t.setExpanded = oe, t.setColumnHidden = ae, t.setColumnBoundingBoxes = se, t.mergeBoundingBoxes = le, t.shouldHideColumn = ce, t.setCellLatex = ue, t.doesCellExist = pe, t.isColumnEmpty = de
    }), define("main/propagate_selection", ["require", "graphing-calc/models/table"], function(e) {
        function t(e) {
            var t = e && e.id;
            if (e && "table" === e.type) {
                var n = r.getSelectedCell(e);
                if (n) {
                    var i = e.columnModels[n.column];
                    t = i ? i.id : void 0
                } else t = void 0
            }
            if (e && "folder" === e.type) {
                var o = e.selectedHiddenChild;
                t = o ? o.id : void 0
            }
            return t
        }

        function n(e, n, r, i) {
            var o = e.getSelectedItem(),
                a = t(o);
            if (a !== i) {
                n.select(a);
                var s = {};
                void 0 !== a && (s[a] = !0), r.setIntersectIds(s), r.updateIntersections(a)
            }
            return a
        }
        var r = e("graphing-calc/models/table");
        return {
            getSelectedId: t,
            propagateSelection: n
        }
    }),
    function(e, t) {
        "object" == typeof exports && "object" == typeof module ? module.exports = t() : "function" == typeof define && define.amd ? define("flux", [], t) : "object" == typeof exports ? exports.Flux = t() : e.Flux = t()
    }(this, function() {
        return function(e) {
            function t(r) {
                if (n[r]) return n[r].exports;
                var i = n[r] = {
                    exports: {},
                    id: r,
                    loaded: !1
                };
                return e[r].call(i.exports, i, i.exports, t), i.loaded = !0, i.exports
            }
            var n = {};
            return t.m = e, t.c = n, t.p = "", t(0)
        }([function(e, t, n) {
            "use strict";
            e.exports.Dispatcher = n(1)
        }, function(e, t, n) {
            "use strict";

            function r(e, t) {
                if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
            }
            t.__esModule = !0;
            var i = n(2),
                o = function() {
                    function e() {
                        r(this, e), this._callbacks = {}, this._isDispatching = !1, this._isHandled = {}, this._isPending = {}, this._lastID = 1
                    }
                    return e.prototype.register = function(e) {
                        var t = "ID_" + this._lastID++;
                        return this._callbacks[t] = e, t
                    }, e.prototype.unregister = function(e) {
                        this._callbacks[e] || i(!1, "Dispatcher.unregister(...): `%s` does not map to a registered callback.", e), delete this._callbacks[e]
                    }, e.prototype.waitFor = function(e) {
                        this._isDispatching || i(!1, "Dispatcher.waitFor(...): Must be invoked while dispatching.");
                        for (var t = 0; t < e.length; t++) {
                            var n = e[t];
                            this._isPending[n] ? this._isHandled[n] || i(!1, "Dispatcher.waitFor(...): Circular dependency detected while waiting for `%s`.", n) : (this._callbacks[n] || i(!1, "Dispatcher.waitFor(...): `%s` does not map to a registered callback.", n), this._invokeCallback(n))
                        }
                    }, e.prototype.dispatch = function(e) {
                        this._isDispatching && i(!1, "Dispatch.dispatch(...): Cannot dispatch in the middle of a dispatch."), this._startDispatching(e);
                        try {
                            for (var t in this._callbacks) this._isPending[t] || this._invokeCallback(t)
                        } finally {
                            this._stopDispatching()
                        }
                    }, e.prototype.isDispatching = function() {
                        return this._isDispatching
                    }, e.prototype._invokeCallback = function(e) {
                        this._isPending[e] = !0, this._callbacks[e](this._pendingPayload), this._isHandled[e] = !0
                    }, e.prototype._startDispatching = function(e) {
                        for (var t in this._callbacks) this._isPending[t] = !1, this._isHandled[t] = !1;
                        this._pendingPayload = e, this._isDispatching = !0
                    }, e.prototype._stopDispatching = function() {
                        delete this._pendingPayload, this._isDispatching = !1
                    }, e
                }();
            e.exports = o
        }, function(e, t, n) {
            "use strict";

            function r(e, t, n, r, i, o, a, s) {
                if (void 0 === t) throw new Error("invariant requires an error message argument");
                if (!e) {
                    var l;
                    if (void 0 === t) l = new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");
                    else {
                        var c = [n, r, i, o, a, s],
                            u = 0;
                        l = new Error(t.replace(/%s/g, function() {
                            return c[u++]
                        })), l.name = "Invariant Violation"
                    }
                    throw l.framesToPop = 1, l
                }
            }
            e.exports = r
        }])
    }), define("lib/conditional_blur", ["require", "exports", "touchtracking", "jquery"], function(e, t, n, r) {
        "use strict";

        function i() {
            if (document.activeElement) {
                var e = r(document.activeElement);
                n.elIsFocusable(e) && r(document.activeElement).blur()
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = i
    }),
    define("lib/state-stack", ["require", "exports"], function(e, t) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var n = function() {
            function e(e) {
                void 0 === e && (e = 100), this.clear(), this._sizeLimit = e
            }
            return e.prototype.clear = function() {
                this._stack = [], this._stackPointer = -1
            }, e.prototype.getState = function() {
                return this._stack[this._stackPointer]
            }, e.prototype.serializeForBugsnag = function() {
                function e(e) {
                    try {
                        return JSON.stringify(e, null, 2)
                    } catch (e) {
                        return "[[could not jsonify]]"
                    }
                }
                return {
                    currentState: e(this._stack[this._stackPointer]),
                    undoState: e(this._stack[this._stackPointer - 1]),
                    redoState: e(this._stack[this._stackPointer + 1])
                }
            }, e.prototype.addState = function(e) {
                this.canRedo() && this._stack.splice(this._stackPointer + 1), this._stack.push(e), this._stack.length > this._sizeLimit && this._stack.shift(), this._stackPointer = this._stack.length - 1
            }, e.prototype.replaceState = function(e) {
                this.canRedo() && this._stack.splice(this._stackPointer + 1), 0 === this._stack.length ? (this._stack.push(e), this._stackPointer = 0) : this._stack[this._stackPointer] = e
            }, e.prototype.canUndo = function() {
                return this._stackPointer > 0
            }, e.prototype.canRedo = function() {
                return this._stackPointer < this._stack.length - 1
            }, e.prototype.undo = function() {
                this.canUndo() && (this._stackPointer -= 1)
            }, e.prototype.redo = function() {
                this.canRedo() && (this._stackPointer += 1)
            }, e
        }();
        t.default = n
    }), define("graphing/viewport", ["require", "exports"], function(e, t) {
        "use strict";

        function n(e, t) {
            return e * (1 - 1e-8) + 1e-8 * t > e && t - e > 1e-300 && t - e < 1e300
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = function() {
            function e(e, t, n, r) {
                void 0 === e && (e = -10), void 0 === t && (t = 10), void 0 === n && (n = -10), void 0 === r && (r = 10), this.xmin = e, this.xmax = t, this.ymin = n, this.ymax = r
            }
            return e.fromObject = function(t) {
                return new e(t.xmin, t.xmax, t.ymin, t.ymax)
            }, e.prototype.toObject = function() {
                return {
                    xmin: this.xmin,
                    ymin: this.ymin,
                    xmax: this.xmax,
                    ymax: this.ymax
                }
            }, e.prototype.equals = function(e) {
                return this.xmin === e.xmin && (this.ymin === e.ymin && (this.xmax === e.xmax && this.ymax === e.ymax))
            }, e.prototype.isXValid = function() {
                return n(this.xmin, this.xmax)
            }, e.prototype.isYValid = function() {
                return n(this.ymin, this.ymax)
            }, e.prototype.isValid = function() {
                return this.isXValid() && this.isYValid()
            }, e.prototype.isSquare = function(e) {
                return Math.abs(e.height - e.width * this.aspectRatio()) < 1
            }, e.prototype.aspectRatio = function() {
                return (this.ymax - this.ymin) / (this.xmax - this.xmin)
            }, e.prototype.squareXAxis = function(t) {
                var n = this.xmax - this.xmin,
                    r = this.ymax - this.ymin,
                    i = this.xmin + n / 2,
                    o = r / t.height * t.width;
                return new e(i - o / 2, i + o / 2, this.ymin, this.ymax)
            }, e.prototype.squareYAxis = function(t) {
                var n = this.xmax - this.xmin,
                    r = this.ymax - this.ymin,
                    i = this.ymin + r / 2,
                    o = n / t.width * t.height;
                return new e(this.xmin, this.xmax, i - o / 2, i + o / 2)
            }, e.prototype.squareCrop = function(e) {
                return this.aspectRatio() > e.height / e.width ? this.squareYAxis(e) : this.squareXAxis(e)
            }, e.prototype.polarDiameter = function() {
                var e = Math.abs(this.xmax),
                    t = Math.abs(this.xmin),
                    n = Math.abs(this.ymax),
                    r = Math.abs(this.ymin);
                return 1.5 * Math.max(e, t, n, r)
            }, e.prototype.largestR = function() {
                return Math.sqrt(Math.pow(Math.max(-this.xmin, this.xmax), 2) + Math.pow(Math.max(-this.ymin, this.ymax), 2))
            }, e.prototype.smallestR = function() {
                return this.xmin <= 0 && this.xmax >= 0 && this.ymin <= 0 && this.ymax >= 0 ? 0 : this.xmin <= 0 && this.xmax >= 0 ? Math.min(Math.abs(this.ymin), Math.abs(this.ymax)) : this.ymin <= 0 && this.ymax >= 0 ? Math.min(Math.abs(this.xmin), Math.abs(this.xmax)) : Math.sqrt(Math.pow(Math.max(this.xmin, -this.xmax), 2) + Math.pow(Math.max(this.ymin, -this.ymax), 2))
            }, e
        }();
        t.Viewport = r
    }), define("migrations/0", ["require"], function(e) {
        function t(e) {
            if (e.type) {
                if (l.hasOwnProperty(e.type)) return e.type;
                throw new Error("Invalid item type: '" + e.type + "'.")
            }
            return void 0 !== e.text ? "text" : void 0 !== e.columns || void 0 !== e.headings ? "table" : "expression"
        }

        function n(e) {
            return e.replace(/\\(total|length|mean|median|quantile|stdev|stddev|stdDev|stdevp|stddevp|stdDevP|var|variance|cov|corr|ceil|floor|round|abs|mod|lcm|mcm|mcd|nCr|nPr|signum|sign|arcsinh|arccosh|arctanh|arccsch|arcsech|arccoth|arccsc|arcsec|arccot)/g, "\\operatorname{$1}")
        }

        function r(e) {
            var t = {};
            for (var r in e) e.hasOwnProperty(r) && (t[r] = "latex" === r ? n(e[r]) : "values" === r ? e[r].map(n) : e[r]);
            return t
        }

        function i(e) {
            var i, o = t(e),
                a = {};
            switch (o) {
                case "expression":
                    for (i in e) e.hasOwnProperty(i) && (a[i] = "latex" === i ? n(e[i]) : e[i]);
                    return a.type = o, a;
                case "table":
                    for (i in e) e.hasOwnProperty(i) && (a[i] = "columns" === i ? e[i].map(r) : e[i]);
                    return a.type = o, a;
                case "image":
                    for (i in e) e.hasOwnProperty(i) && (a[i] = "width" === i || "height" === i || "x" === i || "y" === i ? n(e[i]) : e[i]);
                    return a.type = o, a;
                case "text":
                case "folder":
                    for (i in e) e.hasOwnProperty(i) && (a[i] = e[i]);
                    return a.type = o, a
            }
        }

        function o(e) {
            var t = {};
            for (var n in e) e.hasOwnProperty(n) && "xAxisArrows" !== n && "yAxisArrows" !== n && (t[n] = e[n]);
            return t.xAxisArrowMode = c[e.xAxisArrows || "none"], t.yAxisArrowMode = c[e.yAxisArrows || "none"], t
        }

        function a(e) {
            if (e.version) throw new Error("Unexpected version: " + e.version);
            var t = {};
            return t.graph = o(e.graph), t.expressions = {
                list: e.expressions.list.map(i)
            }, t.version = 0, t
        }
        var s = {
                NONE: "NONE",
                POSITIVE: "POSITIVE",
                BOTH: "BOTH"
            },
            l = {
                expression: !0,
                table: !0,
                image: !0,
                folder: !0,
                text: !0
            },
            c = {
                none: s.NONE,
                both: s.BOTH,
                positive: s.POSITIVE
            };
        return a
    }), define("migrations/1", ["require"], function(e) {
        function t(e) {
            return e.replace(/\\(sech|csch)/g, "\\operatorname{$1}")
        }

        function n(e) {
            var n = {};
            for (var r in e) e.hasOwnProperty(r) && (n[r] = "latex" === r ? t(e[r]) : "values" === r ? e[r].map(t) : e[r]);
            return n
        }

        function r(e) {
            var r, i = e.type,
                o = {};
            switch (i) {
                case "expression":
                    for (r in e) e.hasOwnProperty(r) && (o[r] = "latex" === r ? t(e[r]) : e[r]);
                    return o;
                case "table":
                    for (r in e) e.hasOwnProperty(r) && (o[r] = "columns" === r ? e[r].map(n) : e[r]);
                    return o;
                case "image":
                    for (r in e) e.hasOwnProperty(r) && (o[r] = "width" === r || "height" === r || "x" === r || "y" === r ? t(e[r]) : e[r]);
                    return o;
                case "text":
                case "folder":
                    for (r in e) e.hasOwnProperty(r) && (o[r] = e[r]);
                    return o;
                default:
                    throw new Error("Unexpected expression type: " + i)
            }
        }

        function i(e) {
            if (e.version) throw new Error("Unexpected version: " + e.version);
            var t = {};
            return t.graph = e.graph, t.expressions = {
                list: e.expressions.list.map(r)
            }, t.version = o, t
        }
        var o = 1;
        return i
    }), define("migrations/2", ["require", "expressions/colors"], function(e) {
        function t(e) {
            switch (e) {
                case s:
                    return a.RED;
                case l:
                    return a.BLUE;
                case c:
                    return a.GREEN;
                case u:
                    return a.PURPLE;
                case p:
                    return a.ORANGE;
                case d:
                    return a.BLACK;
                default:
                    return e
            }
        }

        function n(e) {
            var n = {};
            for (var r in e) e.hasOwnProperty(r) && (n[r] = "color" === r ? t(e[r]) : e[r]);
            return n
        }

        function r(e) {
            var r, i = e.type,
                o = {};
            switch (i) {
                case "expression":
                    for (r in e) e.hasOwnProperty(r) && (o[r] = "color" === r ? t(e[r]) : e[r]);
                    return o;
                case "table":
                    for (r in e) e.hasOwnProperty(r) && (o[r] = "columns" === r ? e[r].map(n) : e[r]);
                    return o;
                case "image":
                case "text":
                case "folder":
                    for (r in e) e.hasOwnProperty(r) && (o[r] = e[r]);
                    return o;
                default:
                    throw new Error("Unexpected expression type: " + i)
            }
        }

        function i(e) {
            if (e.version > 1) throw new Error("Unexpected version: " + e.version);
            var t = {};
            return t.graph = e.graph, t.expressions = {
                list: e.expressions.list.map(r)
            }, t.version = o, t
        }
        var o = 2,
            a = e("expressions/colors"),
            s = "#C0504D",
            l = "#4F81BD",
            c = "#9BBB59",
            u = "#8064A2",
            p = "#F79646",
            d = "#000000";
        return i
    }), define("migrations/3", ["require"], function(e) {
        function t(e) {
            if ("string" == typeof e) return e;
            if (void 0 === e) return "";
            var t = e + "";
            return t = t.replace(/1e\+?([-\d]+)/, "10^{$1}"), t = t.replace(/([-\d\.]+)e\+?([-\d]+)/, "$1\\cdot 10^{$2}")
        }

        function n(e) {
            var n, r = e.type,
                i = {};
            switch (r) {
                case "expression":
                    for (n in e) e.hasOwnProperty(n) && (i[n] = "sliderMax" === n || "sliderMin" === n || "sliderInterval" === n ? t(e[n]) : "domain" === n ? {
                        max: t(e[n].max),
                        min: t(e[n].min)
                    } : e[n]);
                    return i.hasOwnProperty("sliderMin") && void 0 === i.sliderInterval && (i.sliderInterval = ""), i;
                case "image":
                case "table":
                case "text":
                case "folder":
                    for (n in e) e.hasOwnProperty(n) && (i[n] = e[n]);
                    return i;
                default:
                    throw new Error("Unexpected expression type: " + r)
            }
        }

        function r(e) {
            if (e.version > 2) throw new Error("Unexpected version: " + e.version);
            var t = {};
            return t.graph = e.graph, t.expressions = {
                list: e.expressions.list.map(n)
            }, t.version = i, t
        }
        var i = 3;
        return r
    }), define("migrations/4", ["require"], function(e) {
        function t(e) {
            switch (e) {
                case "point":
                    return "POINT";
                case "cross":
                    return "CROSS";
                case "open":
                    return "OPEN";
                case "normal":
                    return "SOLID";
                case "dashed":
                    return "DASHED";
                case "dotted":
                    return "DOTTED";
                default:
                    return e
            }
        }

        function n(e) {
            var n = {};
            for (var r in e) e.hasOwnProperty(r) && (n[r] = "style" === r ? t(e[r]) : e[r]);
            return n
        }

        function r(e) {
            var r, i = e.type,
                o = {};
            switch (i) {
                case "expression":
                    for (r in e) e.hasOwnProperty(r) && (o[r] = "style" === r ? t(e[r]) : e[r]);
                    return o;
                case "table":
                    for (r in e) e.hasOwnProperty(r) && (o[r] = "columns" === r ? e[r].map(n) : e[r]);
                    return o;
                case "image":
                case "text":
                case "folder":
                    for (r in e) e.hasOwnProperty(r) && (o[r] = e[r]);
                    return o;
                default:
                    throw new Error("Unexpected expression type: " + i)
            }
        }

        function i(e) {
            if (3 !== e.version) throw new Error("Unexpected version: " + e.version);
            var t = {};
            return t.graph = e.graph, t.expressions = {
                list: e.expressions.list.map(r)
            }, t.version = o, t
        }
        var o = 4;
        return i
    }), define("migrations/5", ["require"], function(e) {
        function t(e) {
            var t, n = {};
            for (var r in e)
                if (e.hasOwnProperty(r)) switch (t = e[r], r) {
                    case "showAxes":
                        n.showXAxis = t, n.showYAxis = t;
                        break;
                    case "showLabels":
                        n.xAxisNumbers = t, n.yAxisNumbers = t, n.polarNumbers = t;
                        break;
                    case "labelXMode":
                        n.xAxisStep = "pi" === t ? Math.PI : 0;
                        break;
                    case "labelYMode":
                        n.yAxisStep = "pi" === t ? Math.PI : 0;
                        break;
                    default:
                        n[r] = t
                }
            return n
        }

        function n(e) {
            var t = {};
            for (var n in e) e.hasOwnProperty(n) && "showPoints" !== n && "showLine" !== n && (t[n] = e[n]);
            return void 0 === e.showPoints && void 0 === e.showLine || (e.showPoints && e.showLine ? t.columnMode = "POINTS_AND_LINES" : e.showPoints ? t.columnMode = "POINTS" : e.showLine ? t.columnMode = "LINES" : (t.hidden = !0, t.columnMode = "POINTS")), t
        }

        function r(e) {
            var t, r = e.type,
                i = {};
            switch (r) {
                case "expression":
                    void 0 === e.hidden ? e.hasOwnProperty("graphed") ? i.hidden = !e.graphed : e.hasOwnProperty("userRequestedGraphing") ? i.hidden = "never" === e.userRequestedGraphing : i.hidden = !1 : i.hidden = e.hidden;
                    for (t in e) e.hasOwnProperty(t) && "graphed" !== t && "userRequestedGraphing" !== t && "hidden" !== t && "slider" !== t && ("color" !== t ? "style" !== t ? "sliderInterval" !== t ? i[t] = e[t] : i.sliderInterval = "undefined" === e.sliderInterval ? "" : e.sliderInterval : i.style = "normal" === e.style ? "SOLID" : e.style : "object" == typeof e.color ? i.color = e.color.value : i.color = e.color);
                    return i;
                case "table":
                    if (e.headings || e.columns) {
                        var o = e.headings ? e.headings : e.columns;
                        if (i.columns = o.map(n), e.rows)
                            for (var a = 0; a < i.columns.length; a++) {
                                var s = i.columns[a];
                                s.values = [];
                                for (var l = 0; l < e.rows.length; l++) s.values.push(e.rows[l][a])
                            }
                    }
                    for (t in e) e.hasOwnProperty(t) && "rows" !== t && "headings" !== t && "columns" !== t && (i[t] = e[t]);
                    return i;
                case "image":
                case "text":
                case "folder":
                    for (t in e) e.hasOwnProperty(t) && (i[t] = e[t]);
                    return i;
                default:
                    throw new Error("Unexpected expression type: " + r)
            }
        }

        function i(e) {
            if (4 !== e.version) throw new Error("Unexpected version: " + e.version);
            var n = {};
            return n.graph = t(e.graph), n.expressions = {
                list: e.expressions.list.map(r)
            }, n.version = o, n
        }
        var o = 5;
        return i
    }), define("migrations/6", ["require", "lib/deepCopy", "underscore", "math/sliders", "lib/evaluate-single-expression"], function(e) {
        function t(e) {
            return !(e.length < 2) && ("`" === e[0] && "`" === e[e.length - 1])
        }

        function n(e) {
            if (t(e)) return {
                raw: e,
                parts: [e]
            };
            for (var n, r = ["[a-zA-Z][0-9]*", "[a-zA-Z]_[a-zA-Z0-9]+", "[a-zA-Z]_\\{[a-zA-Z0-9]+\\}"], i = "({" + r.join("})|({") + "})", o = new RegExp(i, "g"), a = [], s = 0, l = 0; n = o.exec(e);) {
                l = n.index, l > s && a.push(e.substr(s, l - s));
                var c = n[0],
                    u = c.replace(/[{}\$]/g, "").replace(/^([a-zA-Z])([0-9]+)$/, "$1_$2");
                a.push({
                    symbol: u,
                    str: c
                }), s = n.index + c.length
            }
            return s < e.length && a.push(e.substr(s)), {
                raw: e,
                parts: a
            }
        }

        function r(e) {
            var t = {};
            for (var n in e)
                if (e.hasOwnProperty(n) && "style" !== n)
                    if ("values" === n && (t[n] = e[n].map(function(e) {
                            return e ? "" + e : ""
                        })), "columnMode" !== n || e.hasOwnProperty("points") || e.hasOwnProperty("lines")) t[n] = e[n];
                    else switch (e[n]) {
                        case "LINES":
                            t.points = !1, t.lines = !0;
                            break;
                        case "POINTS_AND_LINES":
                            t.points = !0, t.lines = !0;
                            break;
                        default:
                            t.points = !0, t.lines = !1
                    }
            return t.hasOwnProperty("pointStyle") || (t.pointStyle = "POINT"), t.hasOwnProperty("lineStyle") || (t.lineStyle = "SOLID"), t.id = "" + t.id, t
        }

        function i(e) {
            var t = n(e),
                r = "";
            return u.each(t.parts, function(e) {
                r += "object" == typeof e && e.str ? "$" + e.str : e
            }), r
        }

        function o(e, t) {
            var n = e.latex.split("=");
            if (2 === n.length) {
                var r = d(n[1]);
                if (isFinite(r)) {
                    var i = e.slider.hardMin ? d(e.slider.min || "-10", t) : void 0,
                        o = e.slider.hardMax ? d(e.slider.max || "10", t) : void 0,
                        a = e.slider.step ? d(e.slider.step, t) : void 0,
                        s = p.determineWhichLimitsAreCompatibleWithValue({
                            target: r,
                            step: a,
                            hardMin: i,
                            hardMax: o
                        });
                    s.min || (delete e.slider.hardMin, delete e.slider.min), s.max || (delete e.slider.hardMax, delete e.slider.max), s.step || delete e.slider.step
                }
            }
        }

        function a(e, t, n, a) {
            var s, l = e.type,
                c = {};
            switch (l) {
                case "folder":
                    for (s in e) e.hasOwnProperty(s) && ("memberIds" === s || (c[s] = e[s]));
                    break;
                case "expression":
                    for (s in e)
                        if (e.hasOwnProperty(s))
                            if ("style" !== s || e.hasOwnProperty("pointStyle") || e.hasOwnProperty("lineStyle")) f.hasOwnProperty(s) ? (c.slider = c.slider || {}, c.slider[f[s]] = e[s]) : c[s] = e[s], e.label && (c.label = i(e.label));
                            else {
                                var p = e[s];
                                u.contains(["POINT", "OPEN", "CROSS"], p) ? (c.pointStyle = p, c.lineStyle = "SOLID") : u.contains(["SOLID", "DASHED", "DOTTED"], p) ? (c.pointStyle = "POINT", c.lineStyle = p) : (c.pointStyle = "POINT", c.lineStyle = "SOLID")
                            } c.latex && c.slider && !c.slider.isPlaying && o(c, a), c.hasOwnProperty("fillOpacity") || (c.fillOpacity = .4), !1 === c.label && (c.label = ""), c.labelSize || (c.labelSize = "medium"), c.labelOrientation || (c.labelOrientation = "default"), c.verticalLabel || (c.verticalLabel = !1), c.interactiveLabel || (c.interactiveLabel = !1);
                    break;
                case "image":
                    for (s in e) e.hasOwnProperty(s) && "x" !== s && "y" !== s && (c[s] = e[s]);
                    c.center = "\\left(" + (e.x || "0") + "," + (e.y || "0") + "\\right)", c.angle = e.angle || "0", c.foreground = !!c.foreground;
                    break;
                case "text":
                    for (s in e) e.hasOwnProperty(s) && (c[s] = e[s]);
                    break;
                case "table":
                    for (s in e) e.hasOwnProperty(s) && (c[s] = "columns" === s ? e[s].map(r) : e[s]);
                    break;
                default:
                    throw new Error("Unexpected expression type: " + l)
            }
            if (c.id = "" + c.id, "folder" === e.type) t.folderId = c.id, t.memberIds = e.memberIds, c.folderId = "";
            else {
                var d = n[c.id];
                t.memberIds && t.memberIds[d] ? c.folderId = t.folderId : (c.folderId = "", t.folderId = void 0, t.memberIds = void 0)
            }
            return c
        }

        function s(e) {
            for (var t = 0, n = /^[0-9]+$/, r = e.length - 1; r >= 0; r--) {
                var i, o = e[r],
                    a = o.id;
                if (n.test(a) && (i = parseInt(a, 10)) > t && (t = i), "table" === o.type && o.columns)
                    for (var s = o.columns.length - 1; s >= 0; s--) a = o.columns[s].id, n.test(a) && (i = parseInt(a, 10)) > t && (t = i)
            }
            return t + 1
        }

        function l(e) {
            if (5 !== e.version) throw new Error("Unexpected version: " + e.version);
            var t = !(!e.graph || !e.graph.degreeMode),
                n = e.expressions.list,
                r = -1,
                i = {},
                o = {},
                l = {},
                u = {};
            return u.graph = e.graph, u.expressions = {
                list: n.map(function(e) {
                    return i[e.id] ? (-1 === r && (r = s(n)), o[r] = e.id, e = c(e), e.id = r + "", r += 1) : o[e.id] = e.id, i[e.id] = !0, a(e, l, o, t)
                })
            }, u.version = h, u
        }
        var c = e("lib/deepCopy").default,
            u = e("underscore"),
            p = e("math/sliders"),
            d = e("lib/evaluate-single-expression").default,
            h = 6,
            f = {
                sliderMin: "min",
                sliderMax: "max",
                sliderInterval: "step",
                sliderHardMin: "hardMin",
                sliderHardMax: "hardMax",
                sliderAnimationPeriod: "animationPeriod",
                sliderLoopMode: "loopMode",
                sliderPlayDirection: "playDirection",
                sliderIsPlaying: "isPlaying"
            };
        return l
    }), define("main/validate-state", ["require", "exports", "lib/deepCopy"], function(e, t, n) {
        "use strict";

        function r(e) {
            "number" == typeof e.min && (e.min = "" + e.min), "number" == typeof e.max && (e.max = "" + e.max), "number" == typeof e.step && (e.step = "" + e.step)
        }

        function i(e) {
            e.slider && r(e.slider), "string" != typeof e.id && (e.id = "" + e.id)
        }

        function o(e) {
            for (var t, n, r = s(e) + 1, o = {}, a = 0, l = e; a < l.length; a++) {
                var c = l[a];
                if (i(c), "folder" === c.type) t = c.id, o[c.id] && (c.id = "" + r, r += 1), n = c.id, o[c.id] = !0;
                else {
                    if (void 0 !== t && c.folderId === t ? c.folderId = n : (c.folderId && (c.folderId = ""), t = void 0, n = void 0), "table" === c.type)
                        for (var u = 0, p = c.columns; u < p.length; u++) {
                            var d = p[u];
                            o[d.id] && (d.id = "" + r, r += 1), o[d.id] = !0
                        }
                    o[c.id] && (c.id = "" + r, r += 1), o[c.id] = !0
                }
            }
        }

        function a(e, t) {
            var n = parseFloat(t);
            return n !== Math.floor(n) ? e : Math.max(e, n)
        }

        function s(e) {
            for (var t = 0, n = 0, r = e; n < r.length; n++) {
                var i = r[n];
                if (t = a(t, i.id), "table" === i.type)
                    for (var o = 0, s = i.columns; o < s.length; o++) {
                        var l = s[o];
                        a(t, l.id)
                    }
            }
            return t
        }

        function l(e) {
            var t = n.default(e);
            return o(t.expressions.list), t
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.validateState = l
    }), define("migrations/back-migration", ["require", "exports", "tslib"], function(e, t, n) {
        "use strict";

        function r(e) {
            if (8 !== e.version) throw new Error("Unexpected version: " + e.version);
            var t = e.expressions.list.map(function(e) {
                if ("image" === e.type) {
                    var t = n.__assign({}, e, {
                        stringOpacity: void 0,
                        opacity: void 0
                    });
                    if (void 0 !== e.opacity) {
                        var r = void 0 === e.opacity ? NaN : +e.opacity;
                        t.stringOpacity = e.opacity, r > 0 && r < 1 && (t.opacity = r)
                    }
                    return void 0 === t.opacity && delete t.opacity, void 0 === t.stringOpacity && delete t.stringOpacity, t
                }
                if ("expression" === e.type) {
                    var t = n.__assign({}, e, {
                        stringFillOpacity: void 0,
                        fillOpacity: void 0
                    });
                    return delete t.fillOpacity, void 0 === e.fillOpacity ? delete t.stringFillOpacity : t.stringFillOpacity = e.fillOpacity, t
                }
                return e
            });
            return {
                version: 7,
                graph: e.graph,
                randomSeed: e.randomSeed,
                expressions: {
                    list: t
                }
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = r
    }), define("migrations/7", ["require", "exports", "tslib"], function(e, t, n) {
        "use strict";

        function r(e) {
            if (6 !== e.version) throw new Error("Unexpected version: " + e.version);
            var t = e.expressions.list.map(function(e) {
                if ("expression" === e.type && e.domain) {
                    var t = n.__assign({}, e, {
                        parametricDomain: {
                            min: e.domain.min,
                            max: e.domain.max
                        }
                    });
                    return delete t.domain, t
                }
                return e
            });
            return {
                version: 7,
                randomSeed: e.randomSeed,
                graph: e.graph,
                expressions: {
                    list: t
                }
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = r
    }), define("lib/random-seed", ["require", "exports", "lib/md5"], function(e, t, n) {
        "use strict";

        function r(e) {
            return 1 === e.length ? "0" + e : e
        }

        function i() {
            var e = new Uint8Array(16);
            if ("undefined" != typeof crypto) crypto.getRandomValues(e);
            else {
                if ("undefined" == typeof msCrypto) return n(Date.now().toString());
                msCrypto.getRandomValues(e)
            }
            return Array.prototype.slice.call(e).map(function(e) {
                return r(e.toString(16))
            }).join("")
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = i
    }), define("migrations/8", ["require", "exports", "tslib", "lib/random-seed"], function(e, t, n, r) {
        "use strict";

        function i(e) {
            var t = /\\operatorname(?:\{stdev\}p|\{stddev\}p|\{stdDev\}P|\{var\}iance)/g;
            return e.replace(t, function(e) {
                switch (e) {
                    case "\\operatorname{stdev}p":
                        return "\\operatorname{stdevp}";
                    case "\\operatorname{stddev}p":
                        return "\\operatorname{stddevp}";
                    case "\\operatorname{stdDev}P":
                        return "\\operatorname{stdDevP}";
                    case "\\operatorname{var}iance":
                        return "\\operatorname{variance}";
                    default:
                        return ""
                }
            })
        }

        function o(e) {
            return e.columns ? n.__assign({}, e, {
                columns: e.columns.map(a)
            }) : e
        }

        function a(e) {
            var t = e.latex,
                r = e.values,
                o = n.__assign({}, e);
            return t && (o.latex = i(t)), r && (o.values = r.map(function(e) {
                return e ? i(e) : ""
            })), o
        }

        function s(e) {
            if (7 !== e.version) throw new Error("Unexpected version: " + e.version);
            var t = e.expressions.list.map(function(e) {
                if ("image" === e.type) {
                    var t = n.__assign({}, e, {
                        opacity: ""
                    });
                    e.hasOwnProperty("stringOpacity") ? t.opacity = e.stringOpacity : e.hasOwnProperty("opacity") ? t.opacity = e.opacity + "" : delete t.opacity, delete t.stringOpacity;
                    for (var r in e)
                        if ("x" === r || "y" === r || "width" === r || "height" === r) {
                            var a = e[r];
                            a && (t[r] = i(a))
                        } return t
                }
                if ("expression" === e.type) {
                    var t = n.__assign({}, e, {
                        fillOpacity: ""
                    });
                    return "string" == typeof e.latex && (t.latex = i(e.latex)), e.latex && (t.latex = i(e.latex)), e.hasOwnProperty("stringFillOpacity") ? t.fillOpacity = e.stringFillOpacity : e.hasOwnProperty("fillOpacity") ? t.fillOpacity = e.fillOpacity + "" : delete t.fillOpacity, t
                }
                return "table" === e.type ? o(e) : e
            });
            return {
                version: 8,
                randomSeed: e.randomSeed || r.default(),
                graph: e.graph,
                expressions: {
                    list: t
                }
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = s
    }), define("main/migrate_state", ["require", "exports", "migrations/0", "migrations/1", "migrations/2", "migrations/3", "migrations/4", "migrations/5", "migrations/6", "lib/console", "main/validate-state", "../migrations/back-migration", "../migrations/7", "../migrations/8"], function(e, t, n, r, i, o, a, s, l, c, u, p, d, h) {
        "use strict";

        function f(e) {
            if (e.version > t.currentVersion) return c.warn("Loading saved state with version " + e.version + " but last known version is " + t.currentVersion + ". States saved in a newer version of the calculator may not load correctly in an older version of the calculator."), u.validateState(e);
            if (e.hasOwnProperty("version") && !g[e.version]) return c.warn("State has invalid version " + e.version + ". If a version is present, it should be a non-negative integer less than or equal to " + t.currentVersion + "."), u.validateState(e);
            for (e.hasOwnProperty("version") || (e = g[0](e)); e.version < t.currentVersion;) e = g[e.version + 1](e);
            return u.validateState(e)
        }

        function m(e) {
            return p.default(f(e))
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var g = [n, r, i, o, a, s, l, d.default, h.default];
        t.persistedVersion = 7, t.currentVersion = 8, t.migrateToLatest = f, t.migrateToPersisted = m
    }), define("graphing-calc/models/focus", ["require", "exports", "./expression", "./list"], function(e, t, n, r) {
        "use strict";

        function i(e, t, n) {
            o(e, a(e, t, n))
        }

        function o(e, t) {
            if (e.focusLocation = t, t && "settings" !== t.type && "editable-label" !== t.type && "add-item-btn" !== t.type && "add-expression-btn" !== t.type && "add-table-btn" !== t.type && "add-folder-btn" !== t.type && "add-image-btn" !== t.type) {
                var i = e.getItemModel(t.id);
                "expression-menu" === t.type ? r.setSelected(e.getListModel(), void 0) : r.setSelected(e.getListModel(), i), i && "expression" === i.type && n.setSliderIsPlaying(i, !1)
            }
        }

        function a(e, t, n) {
            var r = e.getItemModel(t);
            if (r) switch (r.type) {
                case "expression":
                case "folder":
                case "text":
                    return {
                        type: r.type, id: t
                    };
                case "table":
                    var i = {
                        row: 1,
                        column: 0
                    };
                    return n && ("cell" === n.location ? i = {
                        row: n.row,
                        column: n.column
                    } : "end" === n ? i = {
                        row: r.columnModels[0].cells.length,
                        column: 0
                    } : "start" === n && (i = {
                        row: 0,
                        column: 0
                    })), {
                        type: r.type,
                        id: t,
                        location: i
                    };
                case "image":
                    return {
                        type: r.type, id: t, location: "name"
                    };
                default:
                    return r
            }
        }

        function s(e) {
            var t = e.getSelectedItem();
            if (t && "expression" === t.type) return void i(e, t.id);
            if (!t || "table" !== t.type || !e.focusLocation) {
                for (var n = e.getFirstFullyVisibleItem(); n && "expression" !== n.type;) n = e.getItemModelByIndex(n.index + 1);
                if (n) return void i(e, n.id);
                var o = e.createItemModel({
                    type: "expression",
                    id: e.generateId(),
                    color: e.getNextColor()
                });
                r.insertItemAtEnd(e.getListModel(), o), i(e, o.id)
            }
        }

        function l(e) {
            var t = e.focusLocation;
            if (t && "settings" !== t.type && "editable-label" !== t.type && "add-item-btn" !== t.type && "add-expression-btn" !== t.type && "add-table-btn" !== t.type && "add-folder-btn" !== t.type && "add-image-btn" !== t.type) return e.getItemModel(t.id)
        }

        function c(e, t, n) {
            o(e, {
                type: "table",
                id: t,
                location: n
            })
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.moveFocusToItem = i, t.setFocusLocation = o, t.computeFocusLocationForItem = a, t.addFocusForKeypad = s, t.getFocusedItem = l, t.focusTableCell = c
    }), define("graphing-calc/actions/keyboard", ["require", "exports", "browser", "lib/conditional_blur", "../models/table", "../models/focus", "../models/list", "../models/abstract-item"], function(e, t, n, r, i, o, a, s) {
        "use strict";

        function l(e, t, n) {
            var r = e.getItemModel(t);
            if (r && "table" === r.type) {
                var a = r,
                    s = i.getSelectedCell(a),
                    l = s ? s.row : -1,
                    f = s ? s.column : -1,
                    m = a.columnModels,
                    g = m[0].cells.length,
                    y = m.length,
                    v = function(n, r) {
                        -1 === n ? c(e) : n > g ? u(e) : (-1 === r ? (r = y - 1, n--) : r === y && (n++, r = 0), o.focusTableCell(e, t, {
                            row: n,
                            column: r
                        }))
                    },
                    b = function(n) {
                        g > 2 && i.removeRow(a, l - 1), o.focusTableCell(e, t, {
                            row: n,
                            column: f
                        })
                    },
                    x = function(n) {
                        0 === f || y <= 2 || (i.removeColumn(a, f), o.focusTableCell(e, t, {
                            row: l,
                            column: n
                        }))
                    };
                switch (n) {
                    case "Left":
                        v(l, f - 1);
                        break;
                    case "Right":
                        v(l, f + 1);
                        break;
                    case "Up":
                        v(l - 1, f);
                        break;
                    case "Down":
                        v(l + 1, f);
                        break;
                    case "Enter":
                        if (l >= g) return h(e);
                        if (f > 0) return v(l + 1, f);
                        if (l === g - 1) {
                            var w = i.getRowAutoFillValues(a, l);
                            i.insertBlankRow(a, l);
                            for (var _ = 0; _ < w.length; _++) i.setCellLatex(a, {
                                row: l + 1,
                                column: _
                            }, w[_]);
                            return void o.focusTableCell(e, t, {
                                row: l + 1,
                                column: f
                            })
                        }
                        i.insertBlankRow(a, l), o.focusTableCell(e, t, {
                            row: l + 1,
                            column: f
                        });
                        break;
                    case "Backspace":
                        0 === l ? 0 === f ? p(e) : f === y - 1 || 1 === f && 3 === y ? v(0, f - 1) : x(f - 1) : 0 !== f ? v(l, f - 1) : l === g ? v(l - 1, f) : b(l - 1);
                        break;
                    case "Delete":
                        0 === l ? 0 === f ? d(e) : f < y - 1 && x(f) : l >= g || b(l)
                }
            }
        }

        function c(e) {
            var t = e.getSelectedItem();
            t && (e.inAudioTraceMode() || 0 !== t.index && (a.selectPrevItem(e.getListModel()), (t = e.getSelectedItem()) && o.moveFocusToItem(e, t.id, "end")))
        }

        function u(e) {
            if (!e.inAudioTraceMode()) {
                if (!a.selectNextItem(e.getListModel())) {
                    var t = e.createItemModel({
                        type: "expression",
                        id: e.generateId(),
                        color: e.getNextColor()
                    });
                    a.insertItemAtEnd(e.getListModel(), t), a.setSelected(e.getListModel(), t)
                }
                var n = e.getSelectedItem();
                n && o.moveFocusToItem(e, n.id, "start")
            }
        }

        function p(e) {
            var t = e.getSelectedItem();
            if (t && (1 !== e.getItemCount() || "expression" !== t.type)) {
                var r = "text" === t.type,
                    i = a.getParentFolderModel(t);
                if (i) {
                    var l = e.getNumberOfItemsInFolder(i.id);
                    if (t.index === i.index + l) return void s.setFolderId(t, "")
                }
                if (f(e), r && n.IS_IPAD && n.IS_IN_IFRAME) return void a.setSelected(e.getListModel(), void 0);
                t = e.getSelectedItem(), t && o.moveFocusToItem(e, t.id, "end")
            }
        }

        function d(e) {
            var t = e.getSelectedItem();
            t && (1 === e.getItemCount() && "expression" === t.type || (m(e), (t = e.getSelectedItem()) && o.moveFocusToItem(e, t.id, "start")))
        }

        function h(e) {
            var t = e.getSelectedItem();
            if (t) {
                if ("text" === t.type && n.IS_IPAD && n.IS_IN_IFRAME) return r.default(), void a.setSelected(e.getListModel(), void 0);
                if (("expression" === t.type || "image" === t.type) && t.missingVariables.length) return e.createSlidersForItem(t.id, t.missingVariables.concat(""));
                var i = e.createItemModel({
                        type: "expression",
                        id: e.generateId(),
                        color: e.getNextColor()
                    }),
                    l = t.index + 1;
                "folder" === t.type && t.collapsed && (l += e.getNumberOfItemsInFolder(t.id)), a.insertItemAtIndex(e.getListModel(), i, l), a.setSelected(e.getListModel(), i), "folder" !== t.type || t.collapsed ? t.folderId && s.setFolderId(i, t.folderId) : s.setFolderId(i, t.id), t = e.getSelectedItem(), t && o.moveFocusToItem(e, t.id)
            }
        }

        function f(e) {
            var t = e.getSelectedItem(),
                n = e.getListModel();
            if (t) {
                var r = a.findPrevSelectableItem(n, t.index);
                if (e._removeExpressionSynchronously(t), !r) {
                    var i = a.getFirstSelectableItem(n);
                    i && (r = i)
                }
                a.setSelected(n, r)
            }
        }

        function m(e) {
            var t = e.getSelectedItem(),
                n = e.getListModel();
            if (t) {
                var r = a.findNextSelectableItem(n, t.index);
                if (e._removeExpressionSynchronously(t), !r) {
                    var i = a.getLastSelectableItem(n);
                    i && (r = i)
                }
                a.setSelected(n, r)
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.navigateTableByKey = l, t.onUpPressed = c, t.onDownPressed = u, t.onBackspacePressed = p, t.onDeletePressed = d, t.onEnterPressed = h, t.upwardDeleteSelectedExpression = f, t.downwardDeleteSelectedExpression = m
    }), define("main/expression-zoom-helpers", ["require", "exports", "lib/deepCopy"], function(e, t, n) {
        "use strict";

        function r(e) {
            switch (e) {
                case "histogram":
                case "dotplot":
                    return 12;
                case "boxplot":
                    return 40
            }
            return 1 / 0
        }

        function i(e) {
            return "boxplot" === e || "dotplot" === e || "histogram" == e
        }

        function o(e) {
            return "boxplot" === e ? 3 : .5
        }

        function a(e, t) {
            if ("dotplot" === e.type || "histogram" === e.type) {
                var n = Math.max(1, e.xmax - e.xmin),
                    r = 80 * n / (e.binWidth ? e.binWidth : 1),
                    i = .5 * (t.screen.width - r) / r;
                return Math.max(.2, i)
            }
            return .5
        }

        function s(e) {
            e = n.default(e);
            return e.xmax < 0 && e.xmin < 0 && e.xmax / (e.xmin - e.xmax) < 1.2 && (e.xmax = 0), e.xmax > 0 && e.xmin > 0 && e.xmin / (e.xmax - e.xmin) < 1.2 && (e.xmin = 0), e.ymax < 0 && e.ymin < 0 && e.ymax / (e.ymin - e.ymax) < 1.2 && (e.ymax = 0), e.ymax > 0 && e.ymin > 0 && e.ymin / (e.ymax - e.ymin) < 1.2 && (e.ymin = 0), e
        }

        function l(e, t) {
            var n, s, l, c, u = e.type,
                p = a(e, t),
                d = o(u);
            e.xmin === e.xmax && (e.xmin -= .5, e.xmax += .5), e.ymin === e.ymax && (e.ymin -= .5, e.ymax += .5);
            var h = e.xmax - e.xmin;
            n = e.xmin - p * h, s = e.xmax + p * h;
            var f = e.ymax - e.ymin;
            if (l = e.ymin - d * f, c = e.ymax + d * f, i(u)) {
                var m = t.screen.height / t.screen.width,
                    g = (s - n) * m;
                if (g > e.ymax - e.ymin && g < r(u) * (e.ymax - e.ymin)) {
                    var y = .5 * (e.ymax + e.ymin);
                    c = y + .5 * g, l = y - .5 * g
                }
            }
            return {
                xmin: n,
                xmax: s,
                ymin: l,
                ymax: c
            }
        }

        function c(e, t) {
            var n = u(e, t);
            if (!n) return !1;
            var r = t.mapx(n.xmin),
                i = t.mapx(n.xmax),
                o = t.mapy(n.ymin),
                a = t.mapy(n.ymax);
            return !(Math.abs(r) <= 10 && Math.abs(a) <= 10 && Math.abs(i - t.screen.width) <= 10 && Math.abs(o - t.screen.height) <= 10)
        }

        function u(e, t) {
            for (var n = 1 / 0, r = -1 / 0, i = 1 / 0, o = -1 / 0, a = 0, c = e.length, u = 0; u < c; u++) {
                var p = s(e[u]);
                if (isFinite(p.xmax - p.xmin) && isFinite(p.ymax - p.ymin)) {
                    var d = l(p, t);
                    d.xmin < n && (n = d.xmin), d.xmax > r && (r = d.xmax), d.ymin < i && (i = d.ymin), d.ymax > o && (o = d.ymax)
                } else a += 1
            }
            if (a !== c) return {
                xmin: n,
                xmax: r,
                ymin: i,
                ymax: o
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.conditionalExpandViewport = s, t.padViewport = l, t.shouldExpressionZoomFit = c, t.getRecommendedViewportForExpression = u
    }), define("main/layout-model", ["require", "exports", "browser"], function(e, t, n) {
        "use strict";

        function r(e) {
            return {
                keypadMinimized: !n.IS_TOUCH_DEVICE,
                keypadLayout: "mainNumbers",
                keypadFunctionsTab: "trig",
                keypadFunctionsOpen: !1,
                graphSettingsOpen: !1,
                addExpressionOpen: !1,
                expressionsVisible: !!e.expressions,
                inEditListMode: !1,
                isFileDraggedOver: !1,
                expressionsHiddenTime: void 0
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.defaultLayoutModel = r
    }), define("main/settings-view-model", ["require", "exports", "tslib", "graphing/label"], function(e, t, n, r) {
        "use strict";

        function i(e, t) {
            var n = r.value(e, t),
                i = "";
            if (n.mantissa) i = n.mantissa.split("×").join("\\cdot") + "^{" + n.superscript + "}";
            else {
                var o = n.string.split("/");
                i = 2 === o.length ? "-" === o[0][0] ? "-\\frac{" + o[0].slice(1) + "}{" + o[1] + "}" : "\\frac{" + o[0] + "}{" + o[1] + "}" : n.string
            }
            return i = i.replace(/π/, "\\pi")
        }

        function o(e) {
            return {
                xmin: i(e.xmin, e.xmax - e.xmin),
                xmax: i(e.xmax, e.xmax - e.xmin),
                ymin: i(e.ymin, e.ymax - e.ymin),
                ymax: i(e.ymax, e.ymax - e.ymin)
            }
        }

        function a(e, t) {
            return 0 === e ? "" : i(e, t)
        }

        function s(e, t, r) {
            var i = o(e);
            return n.__assign({}, i, {
                xstep: a(t, e.xmax - e.xmin),
                ystep: a(r, e.ymax - e.ymin)
            })
        }

        function l() {
            return {
                limitLatex: {
                    xmin: "",
                    xmax: "",
                    xstep: "",
                    ymin: "",
                    ymax: "",
                    ystep: ""
                }
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.formatLatex = i, t.formatViewport = o, t.formatStep = a, t.limitLatex = s, t.defaultSettingsViewModel = l
    }), define("expressions/list_move_controller", ["require", "exports", "graphing/dragmode", "lib/number-to-latex", "graphing/label", "lib/rounding", "graphing-calc/models/expression", "graphing-calc/models/table", "graphing-calc/models/list", "graphing-calc/models/image"], function(e, t, n, r, i, o, a, s, l, c) {
        "use strict";

        function u(e, t, r) {
            if (r.tableInfo) {
                l.setSelected(t, void 0);
                var i = e.getItemModel(r.tableInfo.tableId);
                if (!i || "table" !== i.type) return;
                s.setIsDraggingOnGrapher(i, !0)
            } else {
                var o = e.getItemModel(r.sketch.id);
                if (!o || "expression" !== o.type && "image" !== o.type) return;
                if ("image" !== o.type && l.setSelected(t, void 0), !o.formula || !o.formula.move_strategy) return;
                for (var u = o.formula.move_strategy, p = 0; p < u.length; p++)
                    if ("updateCoordinate" === u[p].type) "image" === o.type ? c.setIsDraggingOnGrapher(o, !0) : "expression" === o.type && a.setIsDraggingOnGrapher(o, !0);
                    else if ("updateSlider" === u[p].type) {
                    var d = e.getItemModel(u[p].id);
                    if (!d || "expression" !== d.type) continue;
                    var h;
                    if ((h = "expression" === o.type ? o.reconciledDragMode : void 0) === n.DragMode.NONE || 0 === p && h === n.DragMode.Y || 1 === p && h === n.DragMode.X) continue;
                    a.setSliderDragging(d, !0)
                }
            }
        }

        function p(e, t) {
            if (t.tableInfo) {
                var n = e.getItemModel(t.tableInfo.tableId);
                if (!n || "table" !== n.type) return;
                return void s.setIsDraggingOnGrapher(n, !1)
            }
            var r = e.getItemModel(t.sketch.id);
            if (r && ("expression" === r.type || "image" === r.type) && r.formula && r.formula.move_strategy)
                for (var i = r.formula.move_strategy, o = 0; o < i.length; o++)
                    if ("image" === r.type ? c.setIsDraggingOnGrapher(r, !1) : "expression" === r.type && a.setIsDraggingOnGrapher(r, !1), "updateSlider" === i[o].type) {
                        var l = e.getItemModel(i[o].id);
                        l && "expression" === l.type && a.setSliderDragging(l, !1)
                    }
        }

        function d(e, t, n, i) {
            var a = t.tableInfo.tableId,
                l = t.tableInfo.rowIndex,
                c = t.tableInfo.columnId,
                u = t.tableInfo.dragX,
                p = t.tableInfo.dragY,
                d = e.getItemModel(a);
            if (d && "table" === d.type) {
                var f = s.getColumnModel(d, c);
                if (f) {
                    var m = i.closestPointOnScreen(n),
                        g = i.pixelsToMath.mapRect(h(m, .5)),
                        y = {
                            x: r.default(o.shortestDecimalBetween(g.left, g.right)),
                            y: r.default(o.shortestDecimalBetween(g.top, g.bottom))
                        };
                    if (u && s.setCellLatex(d, {
                            row: l + 1,
                            column: 0
                        }, y.x), p) {
                        var v = f.index;
                        s.setCellLatex(d, {
                            row: l + 1,
                            column: v
                        }, y.y)
                    }
                }
            }
        }

        function h(e, t) {
            return {
                left: e.x - t,
                right: e.x + t,
                top: e.y + t,
                bottom: e.y - t
            }
        }

        function f(e, t, n) {
            var a;
            a = e.assignment ? i.identifierToLatex(e.assignment) + "=" : "";
            var s = o.shortestDecimalBetween(t[0].min, t[0].max),
                l = o.shortestDecimalBetween(t[1].min, t[1].max),
                c = "updateCoordinate" === e.move_strategy[0].type && m(0, n),
                u = "updateCoordinate" === e.move_strategy[1].type && m(1, n);
            return a + "\\left(" + (c ? r.default(s) : e.move_strategy[0].inputString) + "," + (u ? r.default(l) : e.move_strategy[1].inputString) + "\\right)"
        }

        function m(e, t) {
            switch (t) {
                case n.DragMode.X:
                    return 0 === e;
                case n.DragMode.Y:
                    return 1 === e;
                case n.DragMode.XY:
                    return !0;
                default:
                    return !1
            }
        }

        function g(e, t, n) {
            if (0 === n[0] && 0 === n[1]) return {
                x: t.x,
                y: t.y,
                width: e.width,
                height: e.height
            };
            var r = Math.cos(e.radianAngle),
                i = Math.sin(e.radianAngle),
                o = t.x - e.x,
                a = t.y - e.y;
            if (0 === n[0]) return {
                x: e.x,
                y: e.y,
                width: e.width,
                height: 2 * n[1] * (r * a + i * o)
            };
            if (0 === n[1]) return {
                x: e.x,
                y: e.y,
                width: 2 * n[0] * (r * o - i * a),
                height: e.height
            };
            var s = 2 * (e.width * n[0] * (r * o - i * a) + e.height * n[1] * (i * o + r * a)) / (e.width * e.width + e.height * e.height);
            return {
                x: e.x,
                y: e.y,
                width: s * e.width,
                height: s * e.height
            }
        }

        function y(e, t, n) {
            for (var r = [{
                    x: t.left,
                    y: t.bottom
                }, {
                    x: t.left,
                    y: t.top
                }, {
                    x: t.right,
                    y: t.top
                }, {
                    x: t.right,
                    y: t.bottom
                }], i = ["x", "y", "width", "height"], o = {
                    x: 1 / 0,
                    y: 1 / 0,
                    width: 1 / 0,
                    height: 1 / 0
                }, a = {
                    x: -1 / 0,
                    y: -1 / 0,
                    width: -1 / 0,
                    height: -1 / 0
                }, s = 0, l = r; s < l.length; s++)
                for (var c = l[s], u = g(e, c, n), p = 0, d = i; p < d.length; p++) {
                    var h = d[p];
                    o[h] = Math.min(o[h], u[h]), a[h] = Math.max(a[h], u[h])
                }
            return {
                min: o,
                max: a
            }
        }

        function v(e, t, n, i, s) {
            var l = t.formula;
            if (!l || !l.move_strategy) return !1;
            var u = l.dimensions,
                p = n.scaleFactor,
                d = 0 !== p[0] && 0 !== p[1],
                f = s.closestPointOnScreen(i),
                m = s.pixelsToMath.mapRect(h(f, d ? .05 : .5)),
                g = y(u, m, p),
                v = s.mathToPixels.mapRect({
                    left: u.x - .5 * u.width,
                    right: u.x + .5 * u.width,
                    top: u.y - .5 * u.height,
                    bottom: u.y + .5 * u.height
                }),
                b = Math.abs(v.right - v.left),
                x = Math.abs(v.bottom - v.top),
                w = s.mathToPixels.mapRect({
                    left: g.min.x - .5 * g.min.width,
                    right: g.min.x + .5 * g.min.width,
                    top: g.min.y - .5 * g.min.height,
                    bottom: g.min.y + .5 * g.min.height
                }),
                _ = Math.abs(w.right - w.left),
                S = Math.abs(w.bottom - w.top);
            if (_ < b && _ < 1 || S < x && S < 1) return !1;
            for (var E = ["width", "height", "x", "y"], M = !1, I = 0; I < E.length; I++) {
                var T = E[I],
                    C = l.move_strategy[I];
                switch (C.type) {
                    case "updateCoordinate":
                        var k = o.shortestDecimalBetween(g.min[T], g.max[T]),
                            D = r.default(k);
                        switch (T) {
                            case "width":
                            case "height":
                                c.setMQAttribute(t, T, D);
                                break;
                            case "x":
                                if ("updateCoordinate" === l.move_strategy[3].type) {
                                    var P = o.shortestDecimalBetween(g.min.y, g.max.y),
                                        L = r.default(P),
                                        A = "\\left(" + D + "," + L + "\\right)";
                                    c.setMQAttribute(t, "center", A)
                                } else {
                                    var A = "\\left(" + D + "," + l.move_strategy[3].inputString + "\\right)";
                                    c.setMQAttribute(t, "center", A)
                                }
                                break;
                            case "y":
                                if ("updateCoordinate" !== l.move_strategy[2].type) {
                                    var A = "\\left(" + l.move_strategy[2].inputString + "," + D + "\\right)";
                                    c.setMQAttribute(t, "center", A)
                                }
                                break;
                            default:
                                return T
                        }
                        M = !0;
                        break;
                    case "updateSlider":
                        var O = e.getItemModel(C.id);
                        if (!O || "expression" !== O.type) continue;
                        var F = C.coefficients[0],
                            q = C.coefficients[1],
                            N = q * g.min[T] + F,
                            R = q * g.max[T] + F,
                            B = o.shortestDecimalBetween(N, R),
                            j = O.latex;
                        a.adjustSliderByMovablePoint(O, B), O.latex !== j && (M = !0)
                }
            }
            return M
        }

        function b(e, t, r, i, s) {
            var l = t.formula;
            if (!l || !l.move_strategy) return !1;
            var c = t.reconciledDragMode || n.DragMode.NONE,
                u = !1,
                p = i.closestPointOnScreen(r),
                d = i.pixelsToMath.mapRect(h(p, .5)),
                g = [{
                    min: d.left,
                    max: d.right
                }, {
                    min: d.top,
                    max: d.bottom
                }];
            "updateCoordinate" !== l.move_strategy[0].type && "updateCoordinate" !== l.move_strategy[1].type || (a.setLatex(t, f(l, g, c)), u = !0);
            for (var y = 0; y < 2; y++) {
                var v = l.move_strategy[y];
                if ("updateSlider" === v.type && m(y, c)) {
                    var b = e.getItemModel(v.id);
                    if (b && "expression" === b.type) {
                        var x = v.coefficients[0],
                            w = v.coefficients[1],
                            _ = b.latex,
                            S = s && s[y];
                        if (S) a.adjustSliderByKeyboard(b, S);
                        else {
                            var E = o.shortestDecimalBetween(w * g[y].min + x, w * g[y].max + x);
                            a.adjustSliderByMovablePoint(b, E)
                        }
                        b.latex !== _ && (u = !0)
                    }
                }
            }
            return u
        }

        function x(e, t, n, r, i) {
            if (t.tableInfo) return d(e, t, n, r), !0;
            var o = e.getItemModel(t.sketch.id);
            return !!o && ("image" === o.type ? v(e, o, t, n, r) : "expression" === o.type && b(e, o, n, r, i))
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.onStartMovingPoint = u, t.onStopMovingPoint = p, t.onMovePoint = x
    }), define("main/blank_state", ["require", "exports", "main/migrate_state"], function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.BLANK_STATE = {
            version: n.currentVersion,
            randomSeed: "",
            graph: {
                viewport: {
                    xmin: -10,
                    ymin: -13.25,
                    xmax: 10,
                    ymax: 13.25
                }
            },
            expressions: {
                list: [{
                    id: "1",
                    type: "expression"
                }]
            }
        }, t.default = t.BLANK_STATE
    }), define("submodules/dcgview/src/attr-event-handler", [], function() {
        function e(e, t) {
            if (null !== t && void 0 !== t) {
                if ("string" != typeof e) throw new Error("Must pass a string for an EventHandler name");
                if ("function" != typeof t) throw new Error("Must pass a function for an EventHandler callback");
                return {
                    bindings: {
                        onMount: function(n) {
                            n[e.toLowerCase()] = function(e) {
                                e && t.apply(this, arguments)
                            }
                        }
                    }
                }
            }
        }
        return e
    }), define("submodules/dcgview/src/const", ["require"], function(e) {
        function t(e) {
            var t = function() {
                return e
            };
            return t.isDCGViewConst = !0, t
        }

        function n(e) {
            return !("function" != typeof e || !e.isDCGViewConst)
        }
        return {
            isConst: n,
            makeConst: t
        }
    }), define("submodules/dcgview/src/attr", ["require"], function(e) {
        function t(e, t, n) {
            void 0 === n ? e.removeAttribute(t) : e.setAttribute(t, n + "")
        }
        return {
            update: t
        }
    }), define("submodules/dcgview/src/attr-generic", ["require", "./const", "./attr"], function(e) {
        function t(e, t) {
            var i, o = t();
            return n.isConst(t) || (i = {
                onUpdate: function(n) {
                    var i = t();
                    i !== o && (o = i, r.update(n, e, i))
                }
            }), {
                value: o,
                bindings: i
            }
        }
        var n = e("./const"),
            r = e("./attr");
        return t
    }), define("submodules/dcgview/src/is-event-handler", [], function() {
        function e(e) {
            return "o" === e[0] && "n" === e[1] && e[2].toUpperCase() === e[2]
        }
        return e
    }), define("submodules/dcgview/src/custom-attributes", ["require"], function(e) {
        function t(e, t) {
            i[e] = t
        }

        function n(e) {
            return i.hasOwnProperty(e)
        }

        function r(e, t) {
            return (0, i[e])(t)
        }
        var i = {};
        return {
            isCustomAttribute: n,
            add: t,
            parse: r
        }
    }), define("submodules/dcgview/src/bindings", ["require"], function(e) {
        function t(e, t, n) {
            var r = e._bindings[t];
            r ? r.push(n) : e._bindings[t] = [n]
        }

        function n(e, t) {
            var n = e._bindings[t];
            if (n)
                for (var r = n.length, i = 0; i < r; i++) n[i]()
        }
        return {
            add: t,
            invoke: n
        }
    }), define("submodules/dcgview/src/bind-attrs", ["require", "./attr-event-handler", "./attr-generic", "./is-event-handler", "./custom-attributes", "./bindings"], function(e) {
        function t(e, t, n) {
            var r = n.bindings;
            if (r)
                for (var i in r) {
                    var o = r[i];
                    i in c && (o = o.bind(null, t)), l.add(e, i, o)
                }
        }

        function n(e, t) {
            if ("function" != typeof t) throw new Error('The "' + e + '" attr must be a function. It is: ' + JSON.stringify(t));
            return s.isCustomAttribute(e) ? s.parse(e, t) : a(e) ? i(e, t) : o(e, t)
        }

        function r(e, r, i) {
            if (r)
                for (var o in r) {
                    var a = n(o, r[o]);
                    if (a) {
                        var s = a.value;
                        void 0 !== s && i.setAttribute(o, s), a.bindings && t(e, i, a)
                    }
                }
        }
        var i = e("./attr-event-handler"),
            o = e("./attr-generic"),
            a = e("./is-event-handler"),
            s = e("./custom-attributes"),
            l = e("./bindings"),
            c = {
                onMount: !0,
                didMount: !0,
                willUnmount: !0,
                willUpdate: !0,
                onUpdate: !0,
                didUpdate: !0
            };
        return r
    }), define("submodules/dcgview/src/bind-text", ["require", "./bindings"], function(e) {
        function t() {
            i = !0
        }

        function n(e, t, n) {
            if ("function" != typeof n) throw new Error("bindText expects a function");
            var o = n();
            void 0 !== o && null !== o || (o = "");
            var a = document.createTextNode(o);
            if (i) {
                var s = document.createElement("span");
                s.appendChild(a), t.appendChild(s)
            } else t.appendChild(a);
            r.add(e, "onUpdate", function() {
                var e = n();
                void 0 !== e && null !== e || (e = ""), o !== e && (a.nodeValue = e, o = e)
            })
        }
        var r = e("./bindings"),
            i = !1;
        return {
            bindText: n,
            enableSpanWrapping: t
        }
    }), define("submodules/dcgview/src/warnings", ["require"], function(e) {
        function t(e) {
            i.push(e)
        }

        function n(e) {
            var t = i;
            i = [];
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r !== e && i.push(r)
            }
        }

        function r(e) {
            try {
                throw new Error(e)
            } catch (e) {
                console.warn(e);
                for (var t = 0; t < i.length; t++) i[t](e)
            }
        }
        var i = [];
        return {
            warn: r,
            addWarningHandler: t,
            removeWarningHandler: n
        }
    }), define("submodules/dcgview/src/dcg-element", ["require", "./bind-attrs", "./bind-text", "./const", "./warnings"], function(e) {
        function t(e, t) {
            var n = document.createTextNode(t);
            e.appendChild(n)
        }

        function n(e, t, n) {
            this.tagName = e, this.attrs = t, this.children = n
        }
        var r = e("./bind-attrs"),
            i = e("./bind-text").bindText,
            o = e("./const"),
            a = e("./warnings");
        return n.prototype._isDCGElement = !0, n.prototype.renderToDocFrag = function(e, n) {
            if (this._domNode) throw new Error("Cannot remount a DCGElement");
            var s = this.children,
                l = document.createElement(this.tagName);
            this._domNode = l, r(n, this.attrs, l), e.appendChild(l);
            for (var c = s.length, u = 0; u < c; u++) {
                var p = s[u];
                p._isDCGElement ? p.renderToDocFrag(l, n) : o.isConst(p) ? t(l, p()) : "function" == typeof p ? i(n, l, p) : (a.warn("Text should be a const or a getter: " + JSON.stringify(p)), t(l, p))
            }
        }, n
    }), define("submodules/dcgview/src/create-element", ["require", "./dcg-element"], function(e) {
        function t(e, n) {
            if (null !== e && void 0 !== e)
                if (Array.isArray(e))
                    for (var r = 0; r < e.length; r++) t(e[r], n);
                else n.push(e)
        }

        function n(e, n) {
            for (var i = [], o = arguments.length - 1, a = 2; a <= o; a++) t(arguments[a], i);
            if ("string" == typeof e) return new r(e, n, i);
            if (e && e._isDCGViewClass) return new e(n, i);
            throw new Error("createElement expects a String or DCGViewClass")
        }
        var r = e("./dcg-element");
        return n
    }), define("submodules/dcgview/src/mounting", ["require", "./bindings"], function(e) {
        function t() {
            for (var e = this._element; e._isDCGView;) e = e._element;
            return e._domNode
        }

        function n(e, t) {
            if (t && t._childViews.push(this), this.__generatedHTMLBefore) throw new Error("Cannot remount a DCGView");
            this.__generatedHTMLBefore = !0, this._element.renderToDocFrag(e, this)
        }

        function r(e, t, n) {
            if (!e || !e._isDCGViewClass) throw new Error("Must pass a DCGView class to be mounted");
            if (!t || 1 !== t.nodeType) throw new Error("Must pass an HTMLElement for the node");
            if (t._mountedDCGView) throw new Error("This node is already mounted by a view");
            var r = new e(n),
                i = document.createDocumentFragment();
            return r.renderToDocFrag(i), t.innerHTML = "", o(r), t._mountedDCGView = r, t.appendChild(i), a(r), s(r), r
        }

        function i(e) {
            var t = e._mountedDCGView;
            if (!t) throw new Error("This node is not mounted by a DCGView");
            l(t), e.innerHTML = "", delete e._mountedDCGView, c(t), u(t)
        }

        function o(e) {
            e.willMount && e.willMount(), d.invoke(e, "willMount"), e._childViews.forEach(o)
        }

        function a(e) {
            e._isMounted = !0, e.onMount && e.onMount(), d.invoke(e, "onMount"), e._childViews.forEach(a)
        }

        function s(e) {
            e.didMount && e.didMount(), d.invoke(e, "didMount"), e._childViews.forEach(s)
        }

        function l(e) {
            e.willUnmount && e.willUnmount(), d.invoke(e, "willUnmount"), e._childViews.forEach(l)
        }

        function c(e) {
            e._isMounted = !1, e._childViews.forEach(c), d.invoke(e, "onUnmount"), e.onUnmount && e.onUnmount()
        }

        function u(e) {
            e._childViews.forEach(u), d.invoke(e, "didUnmount"), e.didUnmount && e.didUnmount()
        }

        function p(e, t) {
            var n = document.createDocumentFragment();
            return e.renderToDocFrag(n, t), n.firstChild
        }
        var d = e("./bindings");
        return {
            renderToDocFrag: n,
            findRootNode: t,
            createNodeForView: p,
            willMount: o,
            onMount: a,
            didMount: s,
            willUnmount: l,
            onUnmount: c,
            didUnmount: u,
            mountToNode: r,
            unmountFromNode: i
        }
    }), define("submodules/dcgview/src/update", ["require", "./bindings", "./warnings"], function(e) {
        function t() {
            if (!this._isMounted) return r.warn("Trying to update view that is not mounted. Ignoring update.");
            if (!this.shouldUpdate || this.shouldUpdate()) {
                if (this.willUpdate && this.willUpdate(), n.invoke(this, "willUpdate"), n.invoke(this, "onUpdate"), this.onUpdate && this.onUpdate(), this.overrideChildUpdates) this.overrideChildUpdates();
                else
                    for (var e = this._childViews, t = e.length, i = 0; i < t; i++) e[i].update();
                n.invoke(this, "didUpdate"), this.didUpdate && this.didUpdate()
            }
        }
        var n = e("./bindings"),
            r = e("./warnings");
        return {
            update: t
        }
    }), define("submodules/dcgview/src/spread", ["require"], function(e) {
        function t(e) {
            var t = arguments.length;
            if (t < 2) return e;
            for (var n = 1; n < t; n++)
                for (var r = arguments[n], i = Object.keys(r), o = i.length, a = 0; a < o; a++) {
                    var s = i[a];
                    e[s] = r[s]
                }
            return e
        }
        return t
    }), define("submodules/dcgview/src/create-class", ["require", "./create-element", "./mounting", "./update", "./const", "./spread"], function(e) {
        function t(e) {
            if (!e) throw new Error("must pass a spec to DCGView.createClass");
            if ("function" != typeof e.template) throw new Error("must pass a template function to DCGView.createClass");
            var t = function(e, t) {
                this._setupProps(e, t), this.init && this.init(), this._callTemplate()
            };
            t.prototype._setupProps = function(e, t) {
                if (e) {
                    for (var n in e) {
                        var r = e[n];
                        if ("function" != typeof r && void 0 !== r) throw new Error('The "' + n + '" prop must be a function. It is: ' + JSON.stringify(r))
                    }
                    this.props = e
                } else this.props = {};
                this.children = t, this._childViews = [], this._bindings = {}
            }, t.prototype._callTemplate = function() {
                if (this._element = this.template(), !this._element || !this._element._isDCGElement) throw new Error("template() must return a DCGElement")
            }, t.prototype.bindFn = function(e) {
                return e.bind(this)
            }, t.prototype.findRootNode = r.findRootNode, t.prototype.renderToDocFrag = r.renderToDocFrag, t.prototype.const = o.makeConst, t.prototype.spread = a, t.prototype.createElement = n, t.prototype.update = i.update;
            for (var s in e)
                if (e.hasOwnProperty(s)) {
                    if (t.prototype.hasOwnProperty(s)) throw new Error("Cannot override the " + s + "() method");
                    t.prototype[s] = e[s]
                } return t._isDCGViewClass = !0, t.prototype._isDCGView = !0, t.prototype._isDCGElement = !0, t
        }
        var n = e("./create-element"),
            r = e("./mounting"),
            i = e("./update"),
            o = e("./const"),
            a = e("./spread");
        return t
    }), define("submodules/dcgview/src/attr-style", ["require", "./const", "./attr"], function(e) {
        function t(e) {
            var t = e(),
                n = typeof t;
            if ("string" === n) return t;
            if (!n || "object" !== n) throw new Error("Unsupported type returned from style getter: " + n);
            var r = "";
            for (var i in t) {
                var o = t[i];
                t.hasOwnProperty(i) && null !== o && void 0 !== o && (r ? r += ";" + i + ":" + o : r = i + ":" + o)
            }
            return r
        }

        function n(e) {
            var n, o = t(e);
            return r.isConst(e) || (n = {
                onUpdate: function(n) {
                    var r = t(e);
                    o !== r && (i.update(n, "style", r), o = r)
                }
            }), {
                value: o,
                bindings: n
            }
        }
        var r = e("./const"),
            i = e("./attr");
        return n
    }), define("submodules/dcgview/src/attr-class", ["require", "./const"], function(e) {
        function t(e) {
            var t = e(),
                n = typeof t;
            if ("string" === n) return t;
            if (!n || "object" !== n) throw new Error("Unsupported type returned from class getter: " + n);
            var r = "";
            for (var i in t)
                if (t.hasOwnProperty(i)) {
                    var o = t[i];
                    o && (r ? r += " " + i : r = i)
                } return r
        }

        function n(e, t, n) {
            for (var r = [], i = e.className.replace(o, "").split(a), s = t.replace(o, "").split(a), l = {}, c = s.length - 1; c >= 0; c--) l[s[c]] = !0;
            var u = i.length;
            for (c = 0; c < u; c++) {
                var p = i[c];
                l.hasOwnProperty(p) || r.push(p)
            }
            return n ? r.length ? n + " " + r.join(" ") : n : r.join(" ")
        }

        function r(e) {
            var r, o = t(e);
            return i.isConst(e) || (r = {
                onUpdate: function(r) {
                    var i = t(e);
                    o !== i && (r.className === o ? (r.className = i, o = i) : (r.className = n(r, o, i), o = i))
                }
            }), {
                value: o,
                bindings: r
            }
        }
        var i = e("./const"),
            o = /^\s+|\s+$/g,
            a = /\s+/;
        return r
    }), define("submodules/dcgview/src/attr-lifecycle", ["require", "./const"], function(e) {
        function t(e) {
            return function(t) {
                if ("function" != typeof t) throw new Error("The " + e + " attribute expects a function for the value");
                if (n.isConst(t)) throw new Error("The " + e + " attribute does not expect a const for the value");
                var r = {
                    bindings: {}
                };
                return r.bindings[e] = t, r
            }
        }
        var n = e("./const");
        return t
    }), define("submodules/dcgview/src/longest-subsequence", ["require"], function(e) {
        return function(e) {
            var t, n, r = e.length,
                i = new Array(r),
                o = new Array(r + 1),
                a = 0;
            for (n = 0; n < r; n++) {
                if (e[o[a]] < e[n]) t = a + 1;
                else {
                    for (var s = 1, l = a - 1; s <= l;) {
                        var c = Math.ceil((s + l) / 2);
                        e[o[c]] < e[n] ? s = c + 1 : l = c - 1
                    }
                    t = s
                }
                i[n] = o[t - 1], o[t] = n, t > a && (a = t)
            }
            var u = new Array(a),
                p = o[a];
            for (n = a - 1; n >= 0; n--) u[n] = e[p], p = i[p];
            return u
        }
    }), define("submodules/dcgview/src/compute-key-mutations", ["require", "./longest-subsequence"], function(e) {
        function t(e, t) {
            var r, i, o = {},
                a = [],
                s = [];
            for (r = 0; r < t.length; r++) i = t[r], o[i] = r;
            for (r = 0; r < e.length; r++) i = e[r], void 0 === o[i] && a.push(i);
            var l = [];
            for (r = 0; r < e.length; r++) {
                i = e[r];
                var c = o[i];
                void 0 !== c && l.push(c)
            }
            var u = n(l),
                p = {};
            for (r = 0; r < u.length; r++) i = t[u[r]], p[i] = !0;
            for (r = t.length - 1; r >= 0; r--) i = t[r], p[i] || s.push({
                key: i,
                beforeKey: t[r + 1]
            });
            return {
                removes: a,
                inserts: s
            }
        }
        var n = e("./longest-subsequence");
        return t
    }), define("submodules/dcgview/src/for", ["require", "./create-class", "./compute-key-mutations", "./const", "./mounting"], function(e) {
        var t = e("./create-class"),
            n = e("./compute-key-mutations"),
            r = e("./const"),
            i = e("./mounting"),
            o = t({
                template: function() {
                    return this.children[0]
                }
            });
        return t({
            _isDCGFor: !0,
            getKeys: function() {
                this._keyToItem = {};
                var e = this.props.each();
                if (!Array.isArray(e)) throw new Error("<For each={}> must return an array");
                var t = this.props.key ? e.map(this.props.key) : e.slice(0);
                if (!this._chosenKeyType && t.length && (this._chosenKeyType = typeof t[0], "string" !== this._chosenKeyType && "number" !== this._chosenKeyType)) throw new Error("The key: " + JSON.stringify(t[0]) + " is not a string or number");
                for (var n = 0; n < t.length; n++) {
                    var r = t[n];
                    if (typeof r !== this._chosenKeyType) throw new Error("Keys must be the same type. " + JSON.stringify(r) + " is not a " + this._chosenKeyType);
                    if (r in this._keyToItem) throw new Error("The key: " + JSON.stringify(r) + " is not unique");
                    this._keyToItem[r] = e[n]
                }
                return t
            },
            createViewForKey: function(e) {
                var t = this._keyToItem[e],
                    n = this._viewFunction.call(this, t, e),
                    r = n;
                return r._isDCGView || (r = this.createElement(o, null, n)), this._keyToView[e] = r, r
            },
            template: function() {
                if (this._keyToView = {}, "function" != typeof this.props.each) throw new Error("<For each={}> must be a function");
                if (1 !== this.children.length) throw new Error("<For> expects a single child. You passed " + this.children.length);
                var e = this.children[0];
                if (!e || !e._isDCGElement) throw new Error("<For> expects the root node to be a DCGElement. You passed " + JSON.stringify(e));
                if (e._isDCGView) throw new Error("<For> expects the root node to not be a DCGView. Pass in something like <div> or <span>");
                if (1 !== e.children.length) throw new Error("<For> expects a root node with a single child. You passed " + e.children.length);
                if (this._viewFunction = e.children[0], this._viewFunction && this._viewFunction._isDCGElement) throw new Error("<For> expects a function that constructs a DCGElement. You passed a DCGElement directly");
                if ("function" != typeof this._viewFunction) {
                    var t = JSON.stringify(this._viewFunction);
                    throw new Error("<For> expects a function that constructs a DCGElement. You passed " + t)
                }
                if (r.isConst(this._viewFunction)) throw new Error("<For> expects a function that constructs a DCGElement. You passed a constant");
                this._keys = this.getKeys();
                for (var n = [], i = 0; i < this._keys.length; i++) {
                    var o = this._keys[i];
                    n.push(this.createViewForKey(o))
                }
                return e.children = n, e
            },
            detachAllRemovedViews: function() {
                for (var e, t = this._childViews, n = 0, r = t.length, i = 0; i < r; i++) e = t[i], e._will_be_unmounted_ ? n++ : t[i - n] = e;
                t.splice(r - n, n)
            },
            overrideChildUpdates: function() {
                var e = this._keys,
                    t = this.getKeys();
                this._keys = t;
                var r, o, a, s, l, c, u = this.findRootNode(),
                    p = n(e, t),
                    d = [];
                for (r = p.removes.length - 1; r >= 0; r--) c = p.removes[r], d.push(this._keyToView[c]);
                for (d.forEach(i.willUnmount), r = 0; r < p.removes.length; r++) c = p.removes[r], o = this._keyToView[c], delete this._keyToView[c], o._will_be_unmounted_ = !0, u.removeChild(o.findRootNode());
                d.length > 0 && this.detachAllRemovedViews(), d.forEach(i.onUnmount), d.forEach(i.didUnmount);
                var h = [];
                for (r = p.inserts.length - 1; r >= 0; r--)(c = p.inserts[r].key) in this._keyToView || (o = this.createViewForKey(c), h.push(o), i.createNodeForView(o, this));
                for (h.forEach(i.willMount), r = 0; r < p.inserts.length; r++) l = p.inserts[r], a = this._keyToView[l.key].findRootNode(), s = void 0 !== l.beforeKey ? this._keyToView[l.beforeKey].findRootNode() : null, u.insertBefore(a, s);
                h.forEach(i.onMount), h.forEach(i.didMount);
                var f = this._childViews,
                    m = f.length - h.length;
                for (r = 0; r < m; r++) f[r].update()
            }
        })
    }), define("submodules/dcgview/src/switch", ["require", "./create-class", "./const", "./mounting"], function(e) {
        var t = e("./create-class"),
            n = e("./const"),
            r = e("./mounting"),
            i = t({
                template: function() {
                    return this.children[0]
                }
            });
        return t({
            _isDCGSwitch: !0,
            updateKey: function() {
                this._key = this.props.key()
            },
            createView: function() {
                var e = this._viewFunction(this._key);
                return null !== e && void 0 !== e || (e = this.createElement("div", {
                    style: this.const("display: none")
                })), this.createElement(i, null, e)
            },
            template: function() {
                if (this._key = void 0, "function" != typeof this.props.key) throw new Error("<Switch key={}> must be a function");
                if (1 !== this.children.length) throw new Error("<Switch> expects a single child. You passed " + this.children.length);
                if (this._viewFunction = this.children[0], this._viewFunction && this._viewFunction._isDCGElement) throw new Error("<Switch> expects a function that constructs a DCGElement. You passed a DCGElement directly");
                if ("function" != typeof this._viewFunction) {
                    var e = JSON.stringify(this._viewFunction);
                    throw new Error("<Switch> expects a function that constructs a DCGElement. You passed " + e)
                }
                if (n.isConst(this._viewFunction)) throw new Error("<Switch> expects a function that constructs a DCGElement. You passed a constant");
                return this.updateKey(), this.createView()
            },
            overrideChildUpdates: function() {
                var e = this._key;
                if (this.updateKey(), e === this._key) this._element.update();
                else {
                    var t = this.findRootNode(),
                        n = document.createTextNode("");
                    t.parentNode.insertBefore(n, t), r.willUnmount(this._element), this._childViews = [], t.parentNode.removeChild(t), r.onUnmount(this._element), r.didUnmount(this._element), this._element = this.createView();
                    var i = r.createNodeForView(this._element, this);
                    r.willMount(this._element), n.parentNode.insertBefore(i, n), n.parentNode.removeChild(n), r.onMount(this._element), r.didMount(this._element)
                }
            }
        })
    }), define("submodules/dcgview/src/switch-union", ["require", "./create-class", "./mounting", "./create-element"], function(e) {
        function t(e, t, n) {
            return o(s, {
                getCase: function() {
                    var n = t();
                    return e ? n && n[e] : n
                },
                buildChildView: function(e) {
                    var r = n[e];
                    if (r) return r(t)
                }
            })
        }

        function n(e, n) {
            return "string" == typeof e ? t.bind(this, e, n) : t(void 0, e, n)
        }
        var r = e("./create-class"),
            i = e("./mounting"),
            o = e("./create-element"),
            a = r({
                template: function() {
                    return this.children[0]
                }
            }),
            s = r({
                _isDCGSwitchUnion: !0,
                updateCase: function() {
                    this._case = this.props.getCase()
                },
                createView: function() {
                    var e = this.props.buildChildView(this._case);
                    return null !== e && void 0 !== e || (e = this.createElement("div", {
                        style: this.const("display: none")
                    })), this.createElement(a, null, e)
                },
                template: function() {
                    return this._case = void 0, this.updateCase(), this.createView()
                },
                overrideChildUpdates: function() {
                    var e = this._case;
                    if (this.updateCase(), e === this._case) this._element.update();
                    else {
                        var t = this.findRootNode(),
                            n = document.createTextNode("");
                        t.parentNode.insertBefore(n, t), i.willUnmount(this._element), this._childViews = [], t.parentNode.removeChild(t), i.onUnmount(this._element), i.didUnmount(this._element), this._element = this.createView();
                        var r = i.createNodeForView(this._element, this);
                        i.willMount(this._element), n.parentNode.insertBefore(r, n), n.parentNode.removeChild(n), i.onMount(this._element), i.didMount(this._element)
                    }
                }
            });
        return n
    }), define("submodules/dcgview/src/if", ["require", "./create-class", "./const", "./switch"], function(e) {
        var t = e("./create-class"),
            n = e("./const"),
            r = e("./switch");
        return t({
            _isDCGIf: !0,
            template: function() {
                if ("function" != typeof this.props.predicate) throw new Error("<If predicate={}> must be a function");
                if (1 !== this.children.length) throw new Error("<If> expects a single child. You passed " + this.children.length);
                if (this._viewFunction = this.children[0], this._viewFunction && this._viewFunction._isDCGElement) throw new Error("<If> expects a function that constructs a DCGElement. You passed a DCGElement directly");
                if ("function" != typeof this._viewFunction) {
                    var e = JSON.stringify(this._viewFunction);
                    throw new Error("<If> expects a function that constructs a DCGElement. You passed " + e)
                }
                if (n.isConst(this._viewFunction)) throw new Error("<If> expects a function that constructs a DCGElement. You passed a constant");
                var t = function() {
                        return !!this.props.predicate()
                    }.bind(this),
                    i = function(e) {
                        if (e) return this._viewFunction()
                    }.bind(this);
                return this.createElement(r, {
                    key: t
                }, i)
            }
        })
    }), define("submodules/dcgview/src/if-defined", ["require", "./create-class", "./mounting", "./create-element"], function(e) {
        function t(e, t) {
            return i(a, {
                isDefined: function() {
                    return null != e()
                },
                buildChildView: function() {
                    return t(e)
                }
            })
        }
        var n = e("./create-class"),
            r = e("./mounting"),
            i = e("./create-element"),
            o = n({
                template: function() {
                    return this.children[0]
                }
            }),
            a = n({
                _isDCGIfDefined: !0,
                updateIsDefined: function() {
                    this._isDefined = this.props.isDefined()
                },
                createView: function() {
                    var e;
                    return this._isDefined && (e = this.props.buildChildView()), null !== e && void 0 !== e || (e = this.createElement("div", {
                        style: this.const("display: none")
                    })), this.createElement(o, null, e)
                },
                template: function() {
                    return this._isDefined = void 0, this.updateIsDefined(), this.createView()
                },
                overrideChildUpdates: function() {
                    var e = this._isDefined;
                    if (this.updateIsDefined(), e === this._isDefined) this._element.update();
                    else {
                        var t = this.findRootNode(),
                            n = document.createTextNode("");
                        t.parentNode.insertBefore(n, t), r.willUnmount(this._element), this._childViews = [], t.parentNode.removeChild(t), r.onUnmount(this._element), r.didUnmount(this._element), this._element = this.createView();
                        var i = r.createNodeForView(this._element, this);
                        r.willMount(this._element), n.parentNode.insertBefore(i, n), n.parentNode.removeChild(n), r.onMount(this._element), r.didMount(this._element)
                    }
                }
            });
        return t
    }), define("submodules/dcgview/src/if-else", ["require", "./switch-union"], function(e) {
        function t(e, t) {
            return n(function() {
                return e() ? "true" : "false"
            }, t)
        }
        var n = e("./switch-union");
        return t
    }), define("submodules/dcgview/src/textarea", ["require", "./create-class", "./spread"], function(e) {
        var t = e("./create-class"),
            n = e("./spread");
        return t({
            computeValue: function() {
                var e = this.props.value();
                return null === e || void 0 === e ? "" : e + ""
            },
            template: function() {
                if (!this.props.value) throw new Error('<Textarea> expects a "value={}" prop');
                if (!this.props.onInput) throw new Error('<Textarea> expects an "onInput={}" prop');
                var e = n({}, this.props, {
                    onInput: function(e) {
                        this.props.onInput(e.target.value), this._isMounted && this.update()
                    }.bind(this)
                });
                return this.props.disabled && (e.disabled = function() {
                    return !!this.props.disabled() || void 0
                }.bind(this)), delete e.value, this.createElement("textarea", e, this.const(this.computeValue()))
            },
            didUpdate: function() {
                this.rootDOM || (this.rootDOM = this.findRootNode());
                var e = this.computeValue();
                this.rootDOM.value !== e && (this.rootDOM.value = e)
            }
        })
    }), define("submodules/dcgview/src/input", ["require", "./create-class", "./spread"], function(e) {
        var t = e("./create-class"),
            n = e("./spread");
        return t({
            computeValue: function() {
                var e = this.props.value();
                return null === e || void 0 === e ? "" : e + ""
            },
            template: function() {
                if (!this.props.value) throw new Error('<Input> expects a "value={}" prop');
                if (!this.props.onInput) throw new Error('<Input> expects an "onInput={}" prop');
                var e = n({}, this.props, {
                    value: this.const(this.computeValue()),
                    onInput: function(e) {
                        this.props.onInput(e.target.value), this._isMounted && this.update()
                    }.bind(this)
                });
                return this.props.disabled && (e.disabled = function() {
                    return !!this.props.disabled() || void 0
                }.bind(this)), e.hasOwnProperty("tabindex") || (e.tabindex = function() {
                    return this.props.disabled && this.props.disabled() ? "-1" : "0"
                }.bind(this)), this.createElement("input", e)
            },
            didUpdate: function() {
                this.rootDOM || (this.rootDOM = this.findRootNode());
                var e = this.computeValue();
                this.rootDOM.value !== e && (this.rootDOM.value = e)
            }
        })
    }), define("submodules/dcgview/src/checkbox", ["require", "./create-class", "./spread"], function(e) {
        var t = e("./create-class"),
            n = e("./spread");
        return t({
            computeChecked: function() {
                return !!this.props.checked()
            },
            template: function() {
                if (!this.props.checked) throw new Error('<Checkbox> expects a "checked={}" prop');
                if (!this.props.onChange) throw new Error('<Checkbox> expects an "onChange={}" prop');
                var e = n({}, this.props, {
                    type: this.const("checkbox"),
                    checked: this.const(this.computeChecked() ? "checked" : void 0),
                    onChange: function(e) {
                        this.props.onChange(e.target.checked), this._isMounted && this.update()
                    }.bind(this)
                });
                return this.createElement("input", e)
            },
            didUpdate: function() {
                this.rootDOM || (this.rootDOM = this.findRootNode());
                var e = this.computeChecked();
                this.rootDOM.checked !== e && (this.rootDOM.checked = e)
            }
        })
    }), define("submodules/dcgview/src/components", ["require", "./for", "./switch", "./switch-union", "./if", "./if-defined", "./if-else", "./textarea", "./input", "./checkbox"], function(e) {
        return {
            For: e("./for"),
            Switch: e("./switch"),
            SwitchUnion: e("./switch-union"),
            If: e("./if"),
            IfDefined: e("./if-defined"),
            IfElse: e("./if-else"),
            Textarea: e("./textarea"),
            Input: e("./input"),
            Checkbox: e("./checkbox")
        }
    }), define("submodules/dcgview/src/class", ["require", "./create-class"], function(e) {
        return e("./create-class")({
            template: function() {}
        })
    }), define("submodules/dcgview/src/dcg-view", ["require", "./create-element", "./create-class", "./mounting", "./spread", "./const", "./custom-attributes", "./attr-style", "./attr-class", "./attr-lifecycle", "./components", "./warnings", "./bind-text", "./class"], function(e) {
        var t = e("./create-element"),
            n = e("./create-class"),
            r = e("./mounting"),
            i = e("./spread"),
            o = e("./const"),
            a = e("./custom-attributes"),
            s = e("./attr-style"),
            l = e("./attr-class"),
            c = e("./attr-lifecycle"),
            u = e("./components"),
            p = e("./warnings"),
            d = e("./bind-text").enableSpanWrapping,
            h = e("./class"),
            f = {
                createElement: t,
                createClass: n,
                mountToNode: r.mountToNode,
                unmountFromNode: r.unmountFromNode,
                spread: i,
                const: o.makeConst,
                addCustomAttribute: a.add,
                Components: u,
                addWarningHandler: p.addWarningHandler,
                removeWarningHandler: p.removeWarningHandler,
                enableSpanWrapping: d,
                Class: h
            };
        return f.addCustomAttribute("style", s), f.addCustomAttribute("class", l), f.addCustomAttribute("willMount", c("willMount")), f.addCustomAttribute("onMount", c("onMount")), f.addCustomAttribute("didMount", c("didMount")), f.addCustomAttribute("willUnmount", c("willUnmount")), f.addCustomAttribute("onUnmount", c("onUnmount")), f.addCustomAttribute("didUnmount", c("didUnmount")), f.addCustomAttribute("willUpdate", c("willUpdate")), f.addCustomAttribute("onUpdate", c("onUpdate")), f.addCustomAttribute("didUpdate", c("didUpdate")), f
    }), define("submodules/dcgview/dcgview", ["require", "./src/dcg-view"], function(e) {
        return e("./src/dcg-view")
    }), define("loadcss!dcgview-shim", function() {}),
    function() {
        define("dcgview", ["require", "jquery", "underscore", "submodules/dcgview/dcgview", "submodules/dcgview/src/const", "bugsnag", "loadcss!dcgview-shim"], function(e) {
            var t, n, r, i, o, a;
            return t = e("jquery"), o = e("underscore"), i = e("submodules/dcgview/dcgview"), r = e("submodules/dcgview/src/const"), n = e("bugsnag"), e("loadcss!dcgview-shim"), i.addWarningHandler(function(e) {
                return n.notify(e)
            }), a = [], i.onUrlChange = function(e) {
                return a.push(e)
            }, i.addCustomAttribute("href", function(e) {
                var n;
                return n = {
                    value: "" + e(),
                    bindings: {
                        onMount: function(n) {
                            var r;
                            if (!t(n).is("a") && !t(n).is("use")) throw new Error("Cannot have an href on a non-link element.");
                            return r = !1, t(n).on("dcg-tap", function(t) {
                                var n;
                                if (!t.metaKey && (r = !1, n = e(), o.any(a.map(function(e) {
                                        return e(n, t)
                                    })))) return r = !0
                            }), t(n).on("click", function(e) {
                                if (r) return r = !1, e.preventDefault()
                            })
                        }
                    }
                }, r.isConst(e) || (n.bindings.onUpdate = function(t) {
                    return t.setAttribute("href", e())
                }), n
            }), i.addCustomAttribute("onTap", function(e) {
                return {
                    value: "",
                    bindings: {
                        onMount: function(n) {
                            return t(n).on("dcg-tap", e)
                        }
                    }
                }
            }), i.addCustomAttribute("ignoreRealClick", function(e) {
                return {
                    bindings: {
                        onMount: function(n) {
                            return t(n).on("click", function(t) {
                                if (e()) return t.preventDefault()
                            })
                        }
                    }
                }
            }), i.addCustomAttribute("onTapStart", function(e) {
                return {
                    bindings: {
                        onMount: function(n) {
                            return t(n).on("dcg-tapstart", e)
                        }
                    }
                }
            }), i.addCustomAttribute("onTapMove", function(e) {
                return {
                    bindings: {
                        onMount: function(n) {
                            return t(n).on("dcg-tapmove", e)
                        }
                    }
                }
            }), i.addCustomAttribute("onTapEnd", function(e) {
                return {
                    bindings: {
                        onMount: function(n) {
                            return t(n).on("dcg-tapend", e)
                        }
                    }
                }
            }), i.addCustomAttribute("onLongHold", function(e) {
                return {
                    bindings: {
                        onMount: function(n) {
                            return t(n).on("dcg-longhold", e)
                        }
                    }
                }
            }), i.addCustomAttribute("manageFocus", function(e) {
                return void 0 === e() ? {} : {
                    bindings: {
                        onMount: function(t) {
                            return e().shouldBeFocused() && t.focus(), t.onfocus = function() {
                                if (!e().shouldBeFocused()) return e().onFocusedChanged(!0)
                            }, t.onblur = function() {
                                if (e().shouldBeFocused()) return e().onFocusedChanged(!1)
                            }
                        },
                        onUpdate: function(t) {
                            var n, r;
                            return r = e().shouldBeFocused(), n = document.activeElement === t, r && !n ? t.focus() : n && !r ? t.blur() : void 0
                        },
                        willUnmount: function(e) {
                            return delete e.onfocus, delete e.onblur
                        }
                    }
                }
            }), i
        })
    }.call(this), define("vendor/mathquill", ["require", "exports", "toplevel/mathquill", "mathquill"], function(e, t, n, r) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.MQ = n.getInterface(1).config(r)
    }), define("loadcss!dcgview-helpers/static-mathquill-view", function() {}), define("dcgview-helpers/static-mathquill-view", ["require", "exports", "tslib", "dcgview", "vendor/mathquill", "jquery", "lib/conditional_blur", "loadcss!./static-mathquill-view"], function(e, t, n, r, i, o, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var s = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.template = function() {
                var e = this;
                return 1 === this.children.length ? this.children[0] : r.createElement("div", {
                    didMount: function(t) {
                        return e.didMountMathquill(t)
                    }
                })
            }, t.prototype.didMount = function() {
                1 === this.children.length && this.didMountMathquill(this.findRootNode())
            }, t.prototype.didMountMathquill = function(e) {
                this.staticMath = i.MQ.StaticMath(e), o(e).off(".mathquill").addClass("dcg-static-mathquill-view").on("dcg-tapstart", function() {
                    a.default()
                }), this.updateMathquill()
            }, t.prototype.didUpdate = function() {
                this.updateMathquill()
            }, t.prototype.updateMathquill = function() {
                this.updateMathquillAria(), this.updateMathquillLatex()
            }, t.prototype.updateMathquillLatex = function() {
                if (this.staticMath) {
                    var e = this.props.latex();
                    this.lastLatex !== e && (this.staticMath.latex(e), this.lastLatex = e, this.props.onReflow && this.props.onReflow())
                }
            }, t.prototype.updateMathquillAria = function() {
                if (this.staticMath && this.props.getAriaLabel) {
                    var e = this.props.getAriaLabel();
                    e !== this.staticMath.getAriaLabel() && this.staticMath.setAriaLabel(e)
                }
            }, t
        }(r.Class);
        t.default = s
    }), define("loadcss!dcgview-helpers/mathquill-view", function() {}), define("dcgview-helpers/mathquill-view", ["require", "exports", "tslib", "keys", "browser", "dcgview", "vendor/mathquill", "jquery", "./static-mathquill-view", "loadcss!./mathquill-view"], function(e, t, n, r, i, o, a, s, l) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var c = o.Components.If,
            u = function(e) {
                function t() {
                    var t = null !== e && e.apply(this, arguments) || this;
                    return t.lastLatexProp = "", t.wasFocusedLastUpdate = !1, t
                }
                return n.__extends(t, e), t.prototype.template = function() {
                    var e = this;
                    return 1 === this.children.length ? this.children[0] : o.createElement("div", {
                        class: o.const("dcg-mq-container")
                    }, o.createElement(c, {
                        predicate: function() {
                            return e.getPlaceholder().trim().length > 0
                        }
                    }, function() {
                        return o.createElement("span", {
                            class: o.const("dcg-mq-placeholder")
                        }, o.createElement(l.default, {
                            latex: function() {
                                return e.getPlaceholder()
                            }
                        }))
                    }), o.createElement("div", {
                        class: function() {
                            return {
                                "dcg-math-field": !0,
                                "dcg-no-fadeout": e.props.noFadeout && e.props.noFadeout(),
                                "dcg-invalid": e.props.hasError(),
                                "dcg-focus": e.props.isFocused()
                            }
                        },
                        didMount: function(t) {
                            return e.didMountMathquill(t)
                        },
                        "data-dcg-label": function() {
                            return e.props.dataLabelAttributeValue ? e.props.dataLabelAttributeValue() : void 0
                        }
                    }))
                }, t.prototype.didMount = function() {
                    1 === this.children.length && this.didMountMathquill(this.findRootNode())
                }, t.prototype.willUnmount = function() {
                    this.$mathField.off(".view"), this.mathField = void 0
                }, t.prototype.getPlaceholder = function() {
                    return this.props.placeholder ? this.props.isFocused() ? "" : this.props.latex() ? "" : this.props.placeholder() : ""
                }, t.prototype.didMountMathquill = function(e) {
                    var t = this,
                        o = n.__assign({}, this.props.config(), {
                            handlers: {
                                reflow: function(e) {
                                    t.props.onReflow && t.mathField && t.props.onReflow(e)
                                }
                            },
                            onCut: function() {
                                t.mathField && t.props.onUserChangedLatex(t.mathField.latex())
                            },
                            onPaste: function() {
                                t.mathField && t.props.onUserChangedLatex(t.mathField.latex())
                            },
                            overrideTypedText: function(e) {
                                t.mathField && t.viewCanAcceptText(e) && (t.props.onUserTypedText ? t.props.onUserTypedText(e) : (t.mathField.typedText(e), t.props.onUserChangedLatex(t.mathField.latex())))
                            },
                            overrideKeystroke: function(e, n) {
                                if ("Backspace" === e && n.preventDefault(), t.mathField) {
                                    if ("Spacebar" === e && t.props.disableSpace && t.props.disableSpace()) return n.preventDefault();
                                    if (n.originalEvent) {
                                        var i = r.lookup(n.originalEvent);
                                        if ("Up" === i || "Down" === i || "Left" === i || "Right" === i || "Esc" === i) {
                                            var o = [];
                                            n.ctrlKey && o.push("Ctrl"), n.metaKey && o.push("Meta"), n.altKey && o.push("Alt"), n.shiftKey && o.push("Shift"), o.length ? (o.push(i), e = o.join("-")) : e = i
                                        }
                                    }
                                    t.props.onUserPressedKey ? t.props.onUserPressedKey(e, n) : (t.mathField.keystroke(e, n), t.props.onUserChangedLatex(t.mathField.latex()))
                                }
                            }
                        });
                    this.$mathField = s(e), this.mathField = a.MQ.MathField(e, o), e._mqMathFieldInstance = this.mathField, e._mqViewInstance = this, this.$mathField.on("focusin.view focusout.view", function(e) {
                        return t.onFocusEvent(e)
                    }).on("paste.view", function(e) {
                        return t.onPasteEvent(e)
                    }), (i.IS_IOS || i.IS_ANDROID) && this.$mathField.on("keypress.view", function(e) {
                        return t.onKeypressEvent(e)
                    }), this.hookupMQTapTouch(), this.updateMathquill()
                }, t.prototype.didUpdate = function() {
                    this.updateMathquill()
                }, t.prototype.updateMathquill = function() {
                    this.updateMathquillAria(), this.updateMathquillLatex(), this.updateMathquillFocused(), this.updateMathquillPostLabel()
                }, t.prototype.onFocusEvent = function(e) {
                    var t = this.isFocused();
                    t !== this.shouldBeFocused() && this.props.onFocusedChanged(t, e)
                }, t.prototype.onPasteEvent = function(e) {
                    var t = "",
                        n = window.clipboardData,
                        r = e.originalEvent;
                    return n && n.getData ? t = n.getData("Text") : r && r.clipboardData && r.clipboardData.getData && (t = r.clipboardData.getData("text/plain")), this.viewCanAcceptText(t)
                }, t.prototype.viewCanAcceptText = function(e) {
                    return t.canAcceptText(this.mathField, this.props.capExpressionSize(), e)
                }, t.canAcceptText = function(e, t, n) {
                    return !!e && (!t || e.latex().length + n.length <= 100)
                }, t.prototype.onKeypressEvent = function(e) {
                    if (e.stopPropagation(), e.preventDefault(), this.mathField) {
                        var t = r.lookupChar(e.originalEvent);
                        t && this.viewCanAcceptText(t) && (this.props.onUserTypedText ? this.props.onUserTypedText(t) : (this.mathField.typedText(t), this.props.onUserChangedLatex(this.mathField.latex())))
                    }
                }, t.prototype.hookupMQTapTouch = function() {
                    var e = this;
                    this.$mathField.on("dcg-tap.view", function(t) {
                        if ("touch" === t.device && e.mathField) {
                            var n = t.originalEvent.changedTouches[0];
                            e.mathField.clickAt(n.clientX, n.clientY, n.target), e.mathField.focus();
                            var r = void 0;
                            setTimeout(function() {
                                r = Date.now()
                            }, 0), e.mathField.ignoreNextMousedown(function() {
                                return void 0 === r || Date.now() - r < 500
                            })
                        }
                    })
                }, t.prototype.updateMathquillAria = function() {
                    if (this.mathField) {
                        var e = this.props.getAriaLabel();
                        e !== this.mathField.getAriaLabel() && this.mathField.setAriaLabel(e)
                    }
                }, t.prototype.updateMathquillPostLabel = function() {
                    this.mathField && this.mathField.setAriaPostLabel(this.props.getAriaPostLabel(), this.props.hasError() ? 5e3 : 1e3)
                }, t.prototype.updateMathquillLatex = function() {
                    var e = this.props.latex();
                    this.mathField && this.lastLatexProp !== e && (this.props.capExpressionSize() && e.length > 100 || (this.lastLatexProp = e, this.mathField.latex() !== e && this.mathField.latex(e)))
                }, t.prototype.updateMathquillFocused = function() {
                    if (this.mathField) {
                        var e = this.isFocused(),
                            t = this.shouldBeFocused();
                        t && t !== this.wasFocusedLastUpdate && this.props.selectOnFocus && this.props.selectOnFocus() && this.mathField.select(), this.wasFocusedLastUpdate = t, e !== t && (t ? this.mathField.focus() : this.mathField.blur())
                    }
                }, t.prototype.isFocused = function() {
                    return !(!document.activeElement || !s(document.activeElement).closest(this.$mathField).length)
                }, t.prototype.shouldBeFocused = function() {
                    return this.props.isFocused()
                }, t.getFocusedMathquill = function() {
                    if (document.activeElement) {
                        var e = s(document.activeElement).closest(".dcg-mq-editable-field")[0];
                        return e ? e._mqMathFieldInstance : void 0
                    }
                }, t.getMQViewInstance = function(e) {
                    var t = e.el();
                    return t ? t._mqViewInstance : void 0
                }, t.applyArrowKeyAndReturnIfWasAtBounds = function(e, t, n) {
                    var r = s(e.el()),
                        i = r.find(".dcg-mq-selection"),
                        o = 1 === i.length && i.parent().parent()[0] === r[0] && 1 === i.parent().children().length;
                    if (("Up" === t || "Down" === t) && o) return e.keystroke(t, n), !0;
                    var a = r.find(".dcg-mq-cursor")[0];
                    if (!a) return e.keystroke(t, n), !1;
                    var l = a.previousSibling || a.parentElement;
                    return e.keystroke(t, n), l === (a.previousSibling || a.parentElement)
                }, t.simulateKeypress = function(e, n) {
                    var r = t.getMQViewInstance(e);
                    r && (r.props.onUserPressedKey ? r.props.onUserPressedKey(n) : (e.keystroke(n), r.props.onUserChangedLatex(e.latex())))
                }, t.simulateUserChangedLatex = function(e) {
                    var n = t.getMQViewInstance(e);
                    n && n.mathField && n.props.onUserChangedLatex(n.mathField.latex())
                }, t.handleKeystrokeAndDecideIfSpecialEvent = function(e, n, r) {
                    return "Enter" === n || ("Delete" === n && "" === e.latex() || ("Backspace" === n && "" === e.latex() || ("Up" === n ? t.applyArrowKeyAndReturnIfWasAtBounds(e, n, r) : "Down" === n ? t.applyArrowKeyAndReturnIfWasAtBounds(e, n, r) : "Left" === n ? t.applyArrowKeyAndReturnIfWasAtBounds(e, n, r) : "Right" === n ? t.applyArrowKeyAndReturnIfWasAtBounds(e, n, r) : (e.keystroke(n, r), !1))))
                }, t
            }(o.Class);
        t.default = u
    }), define("expressions/measure-expressions", ["require", "exports", "jquery"], function(e, t, n) {
        "use strict";

        function r(e) {
            for (var t = [], n = e.getAllItemModels(), r = 0, i = n; r < i.length; r++) {
                var o = i[r],
                    a = e.getItemRootNodeById(o.id);
                a && t.push(a)
            }
            return t
        }

        function i(e) {
            for (var t = e.getAllItemModels(), n = t.length - 1; n >= 0; n--) {
                var r = t[n];
                if (r.dcgView) return r.id
            }
        }

        function o(e, t) {
            for (var n = r(e), i = 0, o = n.length - 1; i <= o;) {
                var a = i + Math.floor((o - i) / 2),
                    s = n[a],
                    l = s.getBoundingClientRect();
                if (l.top > t) o = a - 1;
                else {
                    if (!(l.bottom < t)) return s;
                    i = a + 1
                }
            }
        }

        function a(e, t) {
            for (var n, i = r(e), o = 0, a = i.length - 1; o <= a;) {
                var s = o + Math.floor((a - o) / 2),
                    l = i[s];
                l.getBoundingClientRect().top > t ? (a = s - 1, n = l) : o = s + 1
            }
            return n
        }

        function s(e, t) {
            var r = f(e);
            if (r) {
                if (t) {
                    var i = e.getItemRootNodeById(t);
                    if (i) {
                        var a = i.getBoundingClientRect();
                        if (a.height > 0 && a.top <= r.top && a.bottom >= r.top) return t
                    }
                }
                var s = o(e, r.top);
                if (s) return n(s).attr("expr-id")
            }
        }

        function l(e, t) {
            var r = f(e);
            if (r) {
                var a = i(e);
                if (a) {
                    if (t) {
                        var s = e.getItemRootNodeById(t);
                        if (s) {
                            var l = s.getBoundingClientRect();
                            if (l.height > 0 && l.top <= r.bottom && l.bottom >= r.bottom) return t;
                            if (t === a && l.bottom <= r.bottom) return t
                        }
                    }
                    var c = o(e, r.bottom);
                    return c && n(c).attr("expr-id") || a
                }
            }
        }

        function c(e) {
            var t = f(e);
            if (t) {
                var r = a(e, t.top - 2);
                if (r) return n(r).attr("expr-id")
            }
        }

        function u(e, t) {
            var n = f(e);
            if (!n) return !1;
            var r = e.getItemRootNodeById(t);
            if (!r) return !1;
            var i = r.getBoundingClientRect();
            return i.bottom > n.top && i.top < n.bottom
        }

        function p(e) {
            return e.find$(".dcg-exppanel")[0]
        }

        function d(e) {
            var t = p(e);
            if (t) return n(t)
        }

        function h(e) {
            var t = e.find$(".dcg-exppanel-outer")[0];
            if (t) return t.getBoundingClientRect()
        }

        function f(e) {
            var t = p(e);
            if (t) return t.getBoundingClientRect()
        }

        function m(e) {
            var t = p(e);
            if (t) {
                var n = t.getBoundingClientRect(),
                    r = t.scrollTop;
                return n.top - r
            }
        }

        function g(e) {
            var t = e.find$(".dcg-expressionlist");
            if (1 === t.length) return t.height()
        }

        function y(e) {
            var t = d(e);
            return t ? t.find(".dcg-drag-container").height() : 0
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.getFirstPartiallyVisibleItemId = s, t.getLastPartiallyVisibleItemId = l, t.getFirstFullyVisibleItemId = c, t.isItemPartiallyVisible = u, t.getExppanelElt = p, t.getExppanelSelector = d, t.getOuterExppanelRect = h, t.getExppanelRect = f, t.getExppanelScrolledTop = m, t.getExpListHeight = g, t.getDragContainerHeight = y
    }), define("animation-frame-src", ["require"], function(e) {
        var t = 0,
            n = function(e, n) {
                var r = (new Date).getTime(),
                    i = Math.max(0, 16 - (r - t)),
                    o = window.setTimeout(function() {
                        e(r + i)
                    }, i);
                return t = r + i, o
            };
        return window.requestAnimationFrame && window.cancelAnimationFrame ? {
            requestAnimationFrame: window.requestAnimationFrame.bind(window),
            cancelAnimationFrame: window.cancelAnimationFrame.bind(window)
        } : {
            requestAnimationFrame: n,
            cancelAnimationFrame: window.clearTimeout.bind(window)
        }
    }), define("lib/animation-frame", ["require", "exports", "animation-frame-src"], function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.requestAnimationFrame = n.requestAnimationFrame, t.cancelAnimationFrame = n.cancelAnimationFrame
    }), define("jquery.handleevent", ["require", "jquery"], function(e) {
        var t = e("jquery");
        t.Event.prototype.wasHandled = function(e) {
            e = e || "_*_";
            var n = this.originalEvent,
                r = n && n.handledBy;
            if (r && r[e]) return !0;
            if ("_*_" !== e) return !1;
            var i = t(this.target).closest("[handleEvent]");
            return !(!i.length || i[0] === this.currentTarget) && "false" !== i.attr("handleEvent")
        }, t.Event.prototype.handle = function(e) {
            e = e || "_*_";
            var t = this.originalEvent;
            if (t) {
                var n = t.handledBy;
                n || (n = t.handledBy = {}), n[e] = !0
            }
        }
    }), define("expressions/dragdrop_expressions", ["require", "exports", "tslib", "jquery", "expressions/measure-expressions", "lib/animation-frame", "jquery.handleevent"], function(e, t, n, r, i, o) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var a = function() {
            function e(e) {
                this.active = !1, this.controller = e;
                var t = i.getExppanelSelector(e);
                t && (this.$exppanel = t)
            }
            return e.prototype.startDragging = function(e) {
                this.active = !0, this.mouseY = e, this.setupEventListeners()
            }, e.prototype.applyDrag = function() {
                var e = this.controller.getListModel(),
                    t = e.dragState;
                if (t) {
                    this.scheduleUpdateScroll();
                    var r = this.measureDOM(t);
                    if (r) {
                        var i = r.floatingPreviewRect,
                            o = this.controller.getItemModel(t.firstItemId);
                        if (o) {
                            for (var a = o.index, s = 0, l = r.visibleRects; s < l.length; s++) {
                                var c = l[s],
                                    u = c.id,
                                    p = c.rect;
                                if (u !== o.id) {
                                    var d = this.controller.getItemModel(u);
                                    if (!d) return;
                                    if (d.index < o.index) {
                                        if (i.top < p.top + p.height / 2) {
                                            a = d.index;
                                            break
                                        }
                                    } else i.bottom > p.top + p.height / 2 && (a = d.index, "folder" === d.type && d.collapsed && (a += this.controller.getNumberOfItemsInFolder(d.id)))
                                }
                            }
                            var h, f;
                            a > o.index ? (h = a, f = a + 1) : a < o.index ? (h = a - 1, f = a) : (h = a - 1, f = a + 1);
                            var m = this.controller.getItemModelByIndex(h),
                                g = this.controller.getItemModelByIndex(f),
                                y = "",
                                v = "";
                            m && (y = "folder" === m.type ? m.id : m.folderId), g && (v = "folder" === g.type ? g.id : g.folderId);
                            var b = "";
                            return y && (v === y ? "folder" === o.type ? a = o.index : b = y : "folder" !== o.type && this.isPreviewTopContainedInFolder(r, y) && (b = y)), {
                                dragState: n.__assign({}, r.dragState),
                                newIndex: a,
                                folderId: b
                            }
                        }
                    }
                }
            }, e.prototype.measureDOM = function(e) {
                var t = i.getExppanelScrolledTop(this.controller),
                    r = i.getExpListHeight(this.controller);
                if (void 0 !== t && void 0 !== r) {
                    var o = i.getDragContainerHeight(this.controller),
                        a = e.mouseY - e.grabOffset + 2,
                        s = a - t;
                    s = Math.max(s, -o / 2), s = Math.min(s, r - o);
                    var l = {
                            top: a,
                            bottom: a + o,
                            height: o
                        },
                        c = this.controller.findFirstPartiallyVisibleItem(),
                        u = this.controller.findLastPartiallyVisibleItem();
                    if (c && u) {
                        for (var p = [], d = c.index; d <= u.index; d++) {
                            var h = this.controller.getItemModelByIndex(d);
                            if (h) {
                                var f = this.controller.getItemRootNodeById(h.id);
                                if (f && h.id !== e.firstItemId) {
                                    var m = f.getBoundingClientRect();
                                    p.push({
                                        id: h.id,
                                        rect: m
                                    })
                                }
                            }
                        }
                        if (0 !== p.length) return {
                            dragState: n.__assign({}, e, {
                                itemTop: s
                            }),
                            floatingPreviewRect: l,
                            visibleRects: p
                        }
                    }
                }
            }, e.prototype.isPreviewTopContainedInFolder = function(e, t) {
                for (var n = e.visibleRects, r = e.floatingPreviewRect, i = 0, o = n; i < o.length; i++) {
                    var a = o[i],
                        s = a.id,
                        l = a.rect;
                    if (l.top <= r.top && l.bottom >= r.top) {
                        var c = this.controller.getItemModel(s);
                        if (!c) return !1;
                        if ("folder" === c.type && c.id === t) return !0;
                        if (c.folderId === t) return !0
                    }
                }
                return !1
            }, e.prototype.scheduleUpdateScroll = function() {
                var e = this;
                this.updateScrollScheduled || (this.updateScrollScheduled = !0, o.requestAnimationFrame(function() {
                    e.updateScroll(), e.updateScrollScheduled = !1
                }))
            }, e.prototype.stop = function() {
                this.active = !1, this.tearDownEventListeners(), this.controller.dispatch({
                    type: "stop-dragdrop"
                })
            }, e.prototype.setupEventListeners = function() {
                var e = this;
                r(document).on("dcg-tapmove.dragdrop", function(t) {
                    e.mouseY = t.changedTouches[0].clientY, e.controller.dispatch({
                        type: "update-dragdrop",
                        mouseY: e.mouseY
                    })
                }), r(document).on("dcg-tapend.dragdrop", function(t) {
                    e.stop(), t.handle("dragdrop")
                })
            }, e.prototype.tearDownEventListeners = function() {
                r(document).off(".dragdrop")
            }, e.prototype.updateScroll = function() {
                if (this.active) {
                    var e = this.$exppanel[0].getBoundingClientRect(),
                        t = 0;
                    t = Math.min(t, this.mouseY - e.top), t = Math.max(t, this.mouseY - e.bottom + 30), t = t * e.height / 900, t && this.$exppanel.scrollTop(this.$exppanel.scrollTop() + t)
                }
            }, e
        }();
        t.default = a
    }), define("keypad/mq-commands", ["require", "exports"], function(e, t) {
        "use strict";

        function n(e, t) {
            r[t](e)
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = {
            loga: function(e) {
                e.write("\\log_{}"), e.typedText("("), e.keystroke("Left"), e.keystroke("Down")
            },
            nthroot: function(e) {
                e.write("\\sqrt[]{}"), e.keystroke("Left"), e.keystroke("Left")
            },
            ddx: function(e) {
                e.write("\\frac{d}{dx}")
            },
            arcsin: function(e) {
                e.write("sin^{-1}"), e.typedText("(")
            },
            arccos: function(e) {
                e.write("cos^{-1}"), e.typedText("(")
            },
            arctan: function(e) {
                e.write("tan^{-1}"), e.typedText("(")
            },
            arcsec: function(e) {
                e.write("sec^{-1}"), e.typedText("(")
            },
            arccsc: function(e) {
                e.write("csc^{-1}"), e.typedText("(")
            },
            arccot: function(e) {
                e.write("cot^{-1}"), e.typedText("(")
            },
            "A^T": function(e) {
                e.typedText("^T"), e.keystroke("Right")
            },
            "A^-1": function(e) {
                e.typedText("^-1"), e.keystroke("Right")
            },
            "A^2": function(e) {
                e.typedText("^2"), e.keystroke("Right")
            },
            "a^2": function(e) {
                e.typedText("^2"), e.keystroke("Right")
            },
            "a^3": function(e) {
                e.typedText("^3"), e.keystroke("Right")
            }
        };
        t.execute = n
    }), define("main/controller", ["require", "exports", "main/propagate_selection", "tslib", "scroll_helpers", "browser", "graphing/label", "underscore", "lib/i18n", "flux", "expressions/opacity", "graphing/dragmode", "expressions/styles", "lib/conditional_blur", "lib/deepCopy", "lib/number-to-latex", "lib/state-stack", "graphing/viewport", "main/migrate_state", "math/expression-types", "lib/color-helpers", "graphing-calc/models/expression", "graphing-calc/json/expression", "graphing-calc/models/expression", "graphing-calc/models/table", "graphing-calc/models/image", "graphing-calc/models/folder", "graphing-calc/models/text", "graphing-calc/models/list", "graphing-calc/models/abstract-item", "graphing-calc/models/focus", "graphing-calc/actions/keyboard", "main/expression-zoom-helpers", "lib/evaluate-single-expression", "./layout-model", "./settings-view-model", "jquery", "bugsnag", "expressions/list_move_controller", "./blank_state", "dcgview-helpers/mathquill-view", "expressions/measure-expressions", "expressions/dragdrop_expressions", "keypad/mq-commands", "lib/random-seed"], function(e, t, n, r, i, o, a, s, l, c, u, p, d, h, f, m, g, y, v, b, x, w, _, S, E, M, I, T, C, k, D, P, L, A, O, F, q, N, R, B, j, V, z, U, G) {
        "use strict";

        function H(e) {
            return e ? r.__assign({}, e, {
                wasCompleteSetState: void 0,
                layoutModel: void 0,
                settingsViewModel: void 0
            }) : e
        }

        function K(e, t) {
            return s.isEqual(H(e), H(t))
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var W = function() {
            function e(e) {
                var t = this;
                this.__nextItemId = 0, this.__pendingImageUploads = {}, this.__waitingForClickableObjectWorkerResponse = !1, this.nextSubscription = 0, this.subscriptions = {}, this._queuedCallbacks = [], this._hasUnsavedChanges = !1, this.shouldScrollSelectedItemIntoViewAfterDispatch = !1, this.lastParsableObjects = {}, this.toastData = {}, this.t = function(e, n) {
                    var r = t.graphSettings.config.language;
                    return l.t(e, n, r)
                }, this.unpack = function(e) {
                    var n = t.graphSettings.config.language;
                    return l.unpack(e, n)
                }, this.dispatch = function(e) {
                    if ("blur-focus-location" === e.type && t.dispatcher.isDispatching()) return void t.runAfterDispatch(function() {
                        t.dispatch(e)
                    });
                    if ("set-focus-location" === e.type && t.dispatcher.isDispatching()) return void t.runAfterDispatch(function() {
                        t.dispatch(e)
                    });
                    if ("tick" === e.type && t.dispatcher.isDispatching()) return void t.runAfterDispatch(function() {
                        t.dispatch(e)
                    });
                    "tick" === e.type || ("process-graph-data" === e.type ? N.leaveBreadcrumb("dispatch::" + t.bugsnagContext, {
                        type: e.type
                    }) : N.leaveBreadcrumb("dispatch::" + t.bugsnagContext, e)), t.dispatcher.isDispatching() && N.leaveBreadcrumb("dispatch-in-dispatch::" + t.bugsnagContext, {
                        type: e.type
                    }), t.dispatcher.dispatch(e), t.onEventsEmitted && t.onEventsEmitted(t.enqueuedEvents);
                    for (var n; n = t._queuedCallbacks.shift();) n()
                }, this.updateViews = function() {
                    for (var e in t.subscriptions) t.subscriptions[e]()
                }, this.bugsnagContext = "", this.inPrintMode = !1, this.stateStack = new g.default, this.isCurrentlyDoingSetState = !1, this.graphSettings = e, this.listModel = C.init(this), this.layoutModel = O.defaultLayoutModel(this.graphSettings.config), this.layoutMeasurements = {
                    width: 0,
                    height: 0
                }, this.settingsViewModel = F.defaultSettingsViewModel(), this.imageRetryState = {
                    lastAttemptTime: 0,
                    attempts: 0
                }, this.setupDispatcher(), this.graphSettings.observe("randomSeed", function() {
                    t.evaluator.setGlobalRandomSeed(t.graphSettings.randomSeed)
                })
            }
            return e.prototype.hasUnsavedChanges = function() {
                return this._hasUnsavedChanges
            }, e.prototype.hasVisibleAndUndoableToast = function() {
                return "function" == typeof this.toastData.undoCallback
            }, e.prototype.getToastData = function() {
                return this.toastData
            }, e.prototype.toastUndo = function() {
                "function" == typeof this.toastData.undoCallback && (this.toastData.undoCallback(), this.dispatch({
                    type: "toast/close"
                }))
            }, e.prototype.runAfterDispatch = function(e) {
                this.dispatcher.isDispatching() ? this._queuedCallbacks.push(e) : e()
            }, e.prototype.enqueueEvent = function(e) {
                this.enqueuedEvents[e] = !0
            }, e.prototype.setRandomSeed = function(e) {
                this.graphSettings.setProperty("randomSeed", e)
            }, e.prototype.getRandomSeed = function() {
                return this.graphSettings.randomSeed
            }, e.prototype.setupDispatcher = function() {
                var e = this;
                this.dispatcher = new c.Dispatcher, this.dispatcher.register(function(t) {
                    var n = e.getSelectedItem(),
                        r = e.getFocusLocation();
                    e.shouldScrollSelectedItemIntoViewAfterDispatch = !1;
                    var i;
                    e.enqueuedEvents = {
                        change: !1,
                        graphReset: !1,
                        clearUnsavedChanges: !1,
                        openDrawer: !1,
                        userMovedPoint: !1
                    }, e.isCurrentlyDoingSetState = !1, e.handleDispatchedAction(t), e.updateTheComputedWorld(), e.updateRenderShellsBeforePaint(), e.retryLoadingFailedImage(), "undo" === t.type || "redo" === t.type || e.isDragDropActive() || e.commitUndoRedoSynchronously(t.type), e.requestParseForAllItems(), "clickable-item-clicked" === t.type && (e.__waitingForClickableObjectWorkerResponse = !0, e.evaluator.notifyWhenSynced(function() {
                        e.__waitingForClickableObjectWorkerResponse = !1
                    })), e.isCurrentlyDoingSetState = !1, e.enqueuedEvents.change && e.grapher && e.grapher.markLabelsDirty(), e.enqueuedEvents.clearUnsavedChanges ? e._hasUnsavedChanges = !1 : e.enqueuedEvents.change && (e._hasUnsavedChanges = !0);
                    var o = e.getSelectedItem();
                    o ? n && n.guid === o.guid || (e.shouldScrollSelectedItemIntoViewAfterDispatch = !0) : e.shouldScrollSelectedItemIntoViewAfterDispatch = !1;
                    var a = e.getFocusLocation();
                    if (a && !s.isEqual(a, r)) {
                        e.getFocusedItem() == o && (e.shouldScrollSelectedItemIntoViewAfterDispatch = !0)
                    }
                    r && n && "table" === n.type && "table" === r.type && (!a || "table" !== a.type || r.id !== a.id) && n.isExpanded && (E.setExpanded(n, !1), a || (i = n)), a && o && "table" === o.type && E.updateIsCollapsedByFocusLocation(o), e.updateViews(), i ? e.scrollItemIntoView(i) : e.shouldScrollSelectedItemIntoViewAfterDispatch && e.scrollSelectedItemIntoView(), e.updateRenderShellsAfterPaint(), e.updateDragDrop()
                })
            }, e.prototype.handleDispatchedAction = function(e) {
                var t = this;
                switch (e.type) {
                    case "api-method-called":
                        break;
                    case "undo":
                        this.undo();
                        break;
                    case "redo":
                        this.redo();
                        break;
                    case "clear-undoredo-history":
                        this.clearUndoRedoHistory();
                        break;
                    case "on-special-key-pressed":
                        "Enter" === e.key ? P.onEnterPressed(this) : "Up" === e.key ? P.onUpPressed(this) : "Down" === e.key ? P.onDownPressed(this) : "Backspace" === e.key ? P.onBackspacePressed(this) : "Delete" === e.key && P.onDeletePressed(this);
                        break;
                    case "select-previous-expression":
                        C.selectPrevItem(this.listModel);
                        break;
                    case "select-next-expression":
                        C.selectNextItem(this.listModel);
                        break;
                    case "upward-delete-selected-expression":
                        P.upwardDeleteSelectedExpression(this);
                        break;
                    case "downward-delete-selected-expression":
                        P.downwardDeleteSelectedExpression(this);
                        break;
                    case "table-show-more-rows":
                        var n = this.getItemModel(e.id);
                        if (!n || "table" !== n.type) return;
                        var i = E.getCollapsedRange(n);
                        if (!i) return;
                        C.setSelected(this.listModel, n), E.setExpanded(n, !0), D.setFocusLocation(this, {
                            type: "table",
                            id: n.id,
                            location: {
                                row: i.min,
                                column: 0
                            }
                        });
                        break;
                    case "navigate-table-by-key":
                        P.navigateTableByKey(this, e.id, e.key);
                        break;
                    case "delete-item-and-animate-out":
                        this._deleteItemAndAnimateOut(e.id, e.setFocusAfterDelete);
                        break;
                    case "finish-deleting-item-after-animation":
                        this._finishDeletingItemAfterAnimation(e.id, e.setFocusAfterDelete);
                        break;
                    case "expression-zoom-fit":
                        this._expressionZoomFit(e.id);
                        break;
                    case "set-expression-properties-from-api":
                        this._setExpressionPropertiesFromAPI(e.id, e.properties);
                        break;
                    case "add-item-to-end-from-api":
                        this._addItemToEndFromAPI(this.createItemModel(e.state));
                        break;
                    case "duplicate-expression":
                        var o = this.getItemModel(e.id);
                        if (!o || "expression" !== o.type) return;
                        var s = S.getState(o, {
                                stripDefaults: !1
                            }),
                            l = this.createItemModel(r.__assign({}, s, {
                                id: this.generateId()
                            }));
                        this._toplevelInsertItemAt(o.index + 1, l, !1, o.folderId);
                        break;
                    case "insert-item-at-index":
                        var c = this.createItemModel(e.state);
                        this._toplevelInsertItemAt(e.index, c, e.focus, e.folderId);
                        break;
                    case "new-expression-at-end":
                        var u = this.createItemModel({
                            type: "expression",
                            id: this.generateId(),
                            color: this.getNextColor()
                        });
                        this.setEditListMode(!1), C.insertItemAtEnd(this.listModel, u), D.moveFocusToItem(this, u.id);
                        break;
                    case "new-expression":
                        var d = this.createItemModel({
                            type: "expression",
                            id: this.generateId(),
                            color: this.getNextColor()
                        });
                        this.setEditListMode(!1), this._toplevelNewItemAtSelection(d, {
                            shouldFocus: !0
                        }), this._closeAddExpression();
                        break;
                    case "new-text":
                        var h = this.createItemModel({
                            id: this.generateId(),
                            type: "text"
                        });
                        this._toplevelNewItemAtSelection(h, {
                            shouldFocus: !0
                        }), this._closeAddExpression();
                        break;
                    case "new-folder":
                        var f = this.createItemModel({
                            type: "folder",
                            id: this.generateId()
                        });
                        this._toplevelNewItemAtSelection(f, {
                            shouldFocus: !0
                        }), this._closeAddExpression();
                        break;
                    case "new-images":
                        this._uploadImagesAndWaitForThemToLoad(e.files), this._closeAddExpression();
                        break;
                    case "new-table":
                        var m = this._createTableItem();
                        this._toplevelNewItemAtSelection(m, {
                            shouldFocus: !0
                        }), this._closeAddExpression();
                        break;
                    case "paste-table":
                        this._pasteTable(e.data);
                        break;
                    case "insert-several-expressions":
                        this.shouldScrollSelectedItemIntoViewAfterDispatch = !0, this._insertSeveralExpressions(e.expressions);
                        break;
                    case "append-number-list":
                        this._appendNumberList(e.latex);
                        break;
                    case "remove-item-by-id":
                        C.removeItemById(this.listModel, e.id);
                        break;
                    case "replace-item-at-index":
                        var g = this.createItemModel(e.state);
                        this._toplevelReplaceItemAt(e.index, g, e.focus);
                        break;
                    case "create-sliders-for-item":
                        this.createSlidersForItem(e.id, e.variables);
                        break;
                    case "start-dragdrop":
                        var n = this.getItemModel(e.id);
                        if (!n) return;
                        var y = this.getItemRootNodeById(n.id);
                        if (!y) return;
                        var v = y.getBoundingClientRect();
                        C.setSelected(this.listModel, void 0);
                        var b = e.grabY - v.top,
                            x = !1,
                            w = 1;
                        "folder" === n.type && (w += this.getNumberOfItemsInFolder(n.id), n.collapsed || (x = !0, I.setCollapsed(n, !0))), C.setDragState(this.listModel, {
                            firstItemId: n.id,
                            numberOfItems: w,
                            expandFolder: x,
                            grabOffset: b,
                            mouseY: e.mouseY,
                            itemTop: 0
                        }), this.dragdrop_expressions.startDragging(e.mouseY);
                        break;
                    case "update-dragdrop":
                        var L = this.listModel.dragState;
                        if (!L) return;
                        C.setDragState(this.listModel, r.__assign({}, L, {
                            mouseY: e.mouseY
                        }));
                        break;
                    case "stop-dragdrop":
                        var L = this.listModel.dragState;
                        if (!L) return;
                        var A = this.getItemModel(L.firstItemId);
                        if (!A) return;
                        C.setSelected(this.listModel, A), "folder" === A.type && L.expandFolder && I.setCollapsed(A, !1), C.setDragState(this.listModel, void 0);
                        break;
                    case "set-selected-id":
                        var O = this.getItemModel(e.id);
                        C.setSelected(this.listModel, O);
                        break;
                    case "set-selected-index":
                        var F = this.getItemModelByIndex(e.index);
                        C.setSelected(this.listModel, F);
                        break;
                    case "set-none-selected":
                        C.setSelected(this.listModel, void 0);
                        break;
                    case "set-focus-location":
                        "table" === (e.location ? e.location.type : "") && (this.layoutModel = r.__assign({}, this.layoutModel, {
                            inEditListMode: !1
                        })), D.setFocusLocation(this, e.location);
                        break;
                    case "move-focus-to-item":
                        D.moveFocusToItem(this, e.id, e.where);
                        break;
                    case "blur-focus-location":
                        this.isFocusLocationFocused(e.location) && D.setFocusLocation(this, void 0);
                        break;
                    case "set-folder-collapsed":
                        var n = this.getItemModel(e.id);
                        if (!n || "folder" !== n.type) return;
                        I.setCollapsed(n, e.isCollapsed);
                        break;
                    case "set-item-secret":
                        var q = this.getItemModel(e.id);
                        if (!q) return;
                        k.setSecret(q, e.isSecret);
                        break;
                    case "set-tablecolumn-color":
                        var n = this.getItemModel(e.tableId);
                        if (!n || "table" !== n.type) return;
                        E.setColumnColor(n, e.columnId, e.color);
                        break;
                    case "set-show-cdf":
                        var n = this.getItemModel(e.id);
                        if (!n || "expression" !== n.type) return;
                        S.setShowCDF(n, e.showCDF);
                        break;
                    case "set-cdf-min":
                        var n = this.getItemModel(e.id);
                        if (!n || "expression" !== n.type) return;
                        S.setCDFMin(n, e.latex);
                        break;
                    case "set-cdf-max":
                        var n = this.getItemModel(e.id);
                        if (!n || "expression" !== n.type) return;
                        S.setCDFMax(n, e.latex);
                        break;
                    case "toggle-item-hidden":
                        this._toggleItemHidden(e.id);
                        break;
                    case "toggle-tablecolumn-hidden":
                        this._toggleTableColumnHidden(e.tableId, e.columnId);
                        break;
                    case "toggle-item-settings-menu":
                        this.listModel.openItemMenu && e.menu.model === this.listModel.openItemMenu.model ? this.listModel.openItemMenu = void 0 : this.listModel.openItemMenu = e.menu;
                        break;
                    case "close-item-settings-menu":
                        this.listModel.openItemMenu = void 0;
                        break;
                    case "toggle-fraction-evaluation":
                        var n = this.getItemModel(e.id);
                        if (!n || "expression" !== n.type) return;
                        var N = S.shouldEvaluationDisplayAsFraction(n);
                        S.setEvaluationAsFraction(n, !N);
                        break;
                    case "set-item-label":
                        var n = this.getItemModel(e.id);
                        if (!n || "expression" !== n.type) return;
                        S.setLabel(n, e.label);
                        break;
                    case "set-item-showlabel":
                        var n = this.getItemModel(e.id);
                        if (!n || "expression" !== n.type) return;
                        S.setShowLabel(n, e.showLabel), e.showLabel || (S.setInteractiveLabel(n, !1), S.setEditableLabelMode(n, _.EditableLabelMode.None));
                        break;
                    case "set-item-color":
                        var n = this.getItemModel(e.id);
                        if (!n || "expression" !== n.type) return;
                        S.setColor(n, e.color);
                        break;
                    case "set-item-fill":
                        var n = this.getItemModel(e.id);
                        if (!n || "expression" !== n.type) return;
                        S.setFill(n, e.fill), this._setItemHidden(n.id, S.areAllVisibilityPropsOff(n));
                        break;
                    case "set-image-opacity":
                        var n = this.getItemModel(e.id);
                        if (!n || "image" !== n.type) return;
                        M.setOpacity(n, e.opacity), this._setItemHidden(n.id, !1);
                        break;
                    case "set-image-in-foreground":
                        var n = this.getItemModel(e.id);
                        if (!n || "image" !== n.type) return;
                        M.setForeground(n, e.foreground);
                        break;
                    case "image-upload-error":
                        this.__pendingImageUploads[e.token] && (delete this.__pendingImageUploads[e.token], this._showToast({
                            message: this.t("Image upload failed.")
                        }));
                        break;
                    case "image-upload-success":
                        if (this.__pendingImageUploads[e.token]) {
                            delete this.__pendingImageUploads[e.token];
                            var B = this.createItemModel({
                                type: "image",
                                id: this.generateId(),
                                width: e.width,
                                height: e.height,
                                image_url: e.url,
                                name: e.name
                            });
                            this._toplevelNewItemAtSelection(B, {
                                shouldFocus: !1
                            })
                        }
                        this.isUploadingImages() || (this.toastData = {});
                        break;
                    case "image-load-success":
                        var B = this.getItemModel(e.id);
                        if (!B || "image" !== B.type) return;
                        M.setLoadStatus(B, "loaded"), this.imageRetryState = {
                            lastAttemptTime: 0,
                            attempts: 0
                        };
                        break;
                    case "image-load-error":
                        var B = this.getItemModel(e.id);
                        if (!B || "image" !== B.type) return;
                        M.setLoadStatus(B, "failed");
                        break;
                    case "image-retry-loading":
                        var B = this.getItemModel(e.id);
                        if (!B || "image" !== B.type) return;
                        M.retryLoading(B);
                        break;
                    case "set-item-dragmode":
                        var n = this.getItemModel(e.id);
                        if (!n || "expression" !== n.type) return;
                        S.setDragMode(n, e.dragMode), e.dragMode !== p.DragMode.NONE && this._setItemHidden(e.id, !1);
                        break;
                    case "set-tablecolumn-dragmode":
                        var n = this.getItemModel(e.tableId);
                        if (!n || "table" !== n.type) return;
                        E.setColumnDragMode(n, e.columnId, e.dragMode), e.dragMode !== p.DragMode.NONE && this._setTableColumnHidden(e.tableId, e.columnId, !1);
                        break;
                    case "set-tablecolumn-points":
                        var n = this.getItemModel(e.tableId);
                        if (!n || "table" !== n.type) return;
                        E.setColumnPoints(n, e.columnId, e.bool), this._setTableColumnHidden(e.tableId, e.columnId, E.shouldHideColumn(n, e.columnId));
                        break;
                    case "set-tablecolumn-lines":
                        var n = this.getItemModel(e.tableId);
                        if (!n || "table" !== n.type) return;
                        E.setColumnLines(n, e.columnId, e.bool), this._setTableColumnHidden(e.tableId, e.columnId, E.shouldHideColumn(n, e.columnId));
                        break;
                    case "set-tablecolumn-linestyle":
                        var n = this.getItemModel(e.tableId);
                        if (!n || "table" !== n.type) return;
                        E.setColumnLineStyle(n, e.columnId, e.lineStyle), this._setTableColumnHidden(e.tableId, e.columnId, !1);
                        break;
                    case "set-tablecolumn-pointstyle":
                        var n = this.getItemModel(e.tableId);
                        if (!n || "table" !== n.type) return;
                        E.setColumnPointStyle(n, e.columnId, e.pointStyle), this._setTableColumnHidden(e.tableId, e.columnId, !1);
                        break;
                    case "set-item-points":
                        var n = this.getItemModel(e.id);
                        if (!n || "expression" !== n.type) return;
                        S.setPoints(n, e.points), this._setItemHidden(e.id, S.areAllVisibilityPropsOff(n)), e.points || n.dragMode === p.DragMode.NONE || S.setDragMode(n, p.DragMode.NONE);
                        break;
                    case "set-item-pointstyle":
                        var n = this.getItemModel(e.id);
                        if (!n || "expression" !== n.type) return;
                        S.setPointStyle(n, e.pointStyle), this._setItemHidden(e.id, !1);
                        break;
                    case "set-item-lines":
                        var n = this.getItemModel(e.id);
                        if (!n || "expression" !== n.type) return;
                        S.setLines(n, e.lines), this._setItemHidden(e.id, S.areAllVisibilityPropsOff(n));
                        break;
                    case "set-item-linestyle":
                        var n = this.getItemModel(e.id);
                        if (!n || "expression" !== n.type) return;
                        S.setLineStyle(n, e.lineStyle), this._setItemHidden(e.id, !1);
                        break;
                    case "set-item-label-dropdown-open":
                        var n = this.getItemModel(e.id);
                        if (!n || "expression" !== n.type) return;
                        S.setLabelDropdownOpen(n, e.open);
                        break;
                    case "set-item-fillopacity":
                        var n = this.getItemModel(e.id);
                        if (!n || "expression" !== n.type) return;
                        S.setFillOpacity(n, e.fillOpacity), this._setItemHidden(e.id, !1);
                        break;
                    case "set-item-labelSize":
                        var n = this.getItemModel(e.id);
                        if (!n || "expression" !== n.type) return;
                        S.setLabelSize(n, e.labelSize);
                        break;
                    case "set-item-label-orientation":
                        var n = this.getItemModel(e.id);
                        if (!n || "expression" !== n.type) return;
                        S.setLabelOrientation(n, e.labelOrientation);
                        break;
                    case "set-item-vertical-label":
                        var n = this.getItemModel(e.id);
                        if (!n || "expression" !== n.type) return;
                        S.setVerticalLabel(n, e.verticalLabel);
                        break;
                    case "set-item-interactive-label":
                        var n = this.getItemModel(e.id);
                        if (!n || "expression" !== n.type) return;
                        S.setInteractiveLabel(n, e.interactiveLabel), e.interactiveLabel && S.setEditableLabelMode(n, _.EditableLabelMode.None);
                        break;
                    case "set-item-editable-label-mode":
                        var n = this.getItemModel(e.id);
                        if (!n || "expression" !== n.type) return;
                        n.editableLabelMode !== _.EditableLabelMode.None && e.editableLabelMode !== _.EditableLabelMode.None && n.editableLabelMode !== e.editableLabelMode && S.setLabel(n, ""), S.setEditableLabelMode(n, e.editableLabelMode), e.editableLabelMode !== _.EditableLabelMode.None && S.setInteractiveLabel(n, !1);
                        break;
                    case "plot-residuals":
                        var V = this.getItemModel(e.id);
                        if (!V || "expression" !== V.type) return;
                        var z = V.formula.regression,
                            H = z.residualSuggestionId;
                        if (!H) return;
                        var K = this.getItemModel(H);
                        if (!K) return;
                        E.insertBlankColumn(K, K.columnModels.length - 1, {
                            id: this.generateId(),
                            latex: a.identifierToLatex(z.residualVariable),
                            color: this.getNextColor()
                        });
                        break;
                    case "toggle-logmode":
                        var n = this.getItemModel(e.id);
                        if (!n || "expression" !== n.type) return;
                        var W = n.isLogModeRegression;
                        S.setLogMode(n, !W);
                        break;
                    case "set-item-latex":
                        this.shouldScrollSelectedItemIntoViewAfterDispatch = !0;
                        var Y = this.getItemModel(e.id);
                        if (!Y || "expression" !== Y.type) return;
                        var X = e.latex;
                        if ('"' === X && this.areNotesEnabled()) {
                            var $ = this.createItemModel({
                                id: this.generateId(),
                                type: "text"
                            });
                            this._toplevelReplaceItemAt(Y.index, $, !0)
                        } else if ("" === X) S.blankOutExpressionAfterClearingLatex(Y);
                        else if ("folder" === X && this.areFoldersEnabled()) {
                            var Q = this.createItemModel({
                                id: this.generateId(),
                                type: "folder"
                            });
                            this._toplevelReplaceItemAt(Y.index, Q, !0)
                        } else if ("table" === X) {
                            var Z = this._createTableItem();
                            this._toplevelReplaceItemAt(Y.index, Z, !0)
                        } else "betchacant" === X ? this.runAfterDispatch(function() {
                            t.triggerBetchacant && t.triggerBetchacant()
                        }) : S.setLatex(Y, X);
                        break;
                    case "set-visualization-prop":
                        var n = this.getItemModel(e.id);
                        if (!n || "expression" !== n.type) return;
                        S.setVizProp(n, e.prop, e.latex);
                        break;
                    case "set-clickableinfo-prop":
                        var n = this.getItemModel(e.id);
                        if (!n) return;
                        "expression" === n.type ? S.setClickableInfoProp(n, e.prop, e.value) : "image" === n.type && M.setClickableInfoProp(n, e.prop, e.value), !0 === e.value && (D.setFocusLocation(this, {
                            type: "clickableinfo-prop",
                            id: e.id,
                            location: "assignment"
                        }), this.listModel.openItemMenu = void 0);
                        break;
                    case "set-folder-title":
                        this.shouldScrollSelectedItemIntoViewAfterDispatch = !0;
                        var n = this.getItemModel(e.id);
                        if (!n || "folder" !== n.type) return;
                        I.setTitle(n, e.title);
                        break;
                    case "set-image-mq-attribute":
                        this.shouldScrollSelectedItemIntoViewAfterDispatch = !0;
                        var n = this.getItemModel(e.id);
                        if (!n || "image" !== n.type) return;
                        M.setMQAttribute(n, e.attribute, e.latex);
                        break;
                    case "set-image-name":
                        this.shouldScrollSelectedItemIntoViewAfterDispatch = !0;
                        var n = this.getItemModel(e.id);
                        if (!n || "image" !== n.type) return;
                        M.setName(n, e.name);
                        break;
                    case "set-graph-settings":
                        for (var J in e) "type" !== J && this.graphSettings.setProperty(J, e[J]);
                        break;
                    case "set-polar-domain-minlatex":
                        this.shouldScrollSelectedItemIntoViewAfterDispatch = !0;
                        var n = this.getItemModel(e.id);
                        if (!n || "expression" !== n.type) return;
                        S.setPolarDomainMin(n, e.latex);
                        break;
                    case "set-polar-domain-maxlatex":
                        this.shouldScrollSelectedItemIntoViewAfterDispatch = !0;
                        var n = this.getItemModel(e.id);
                        if (!n || "expression" !== n.type) return;
                        S.setPolarDomainMax(n, e.latex);
                        break;
                    case "set-parametric-domain-minlatex":
                        this.shouldScrollSelectedItemIntoViewAfterDispatch = !0;
                        var n = this.getItemModel(e.id);
                        if (!n || "expression" !== n.type) return;
                        S.setParametricDomainMin(n, e.latex);
                        break;
                    case "set-parametric-domain-maxlatex":
                        this.shouldScrollSelectedItemIntoViewAfterDispatch = !0;
                        var n = this.getItemModel(e.id);
                        if (!n || "expression" !== n.type) return;
                        S.setParametricDomainMax(n, e.latex);
                        break;
                    case "set-note-text":
                        this.shouldScrollSelectedItemIntoViewAfterDispatch = !0;
                        var n = this.getItemModel(e.id);
                        if (!n || "text" !== n.type) return;
                        T.setText(n, e.text);
                        break;
                    case "set-edit-list-mode":
                        this.setEditListMode(e.isEditListMode), C.setSelected(this.listModel, void 0), e.focusExpressionList && this.runAfterDispatch(function() {
                            t.find$(".dcg-expressionitem").find(':input, [role="textbox"], .dcg-edit-list-mathquill, [tabindex="0"]').first().focus()
                        });
                        break;
                    case "set-tablecell-latex":
                        this.shouldScrollSelectedItemIntoViewAfterDispatch = !0;
                        var n = this.getItemModel(e.tableId);
                        if (!n || "table" !== n.type) return;
                        E.setCellLatex(n, e.cell, e.latex);
                        break;
                    case "set-state":
                        this.externalSetState(e.state, e.opts);
                        break;
                    case "set-blank":
                        this.externalSetState(this.getBlankState(), e.opts);
                        break;
                    case "clear-unsaved-changes":
                        this.enqueueEvent("clearUnsavedChanges");
                        break;
                    case "reset-graph":
                        var ee = this.getState();
                        this.externalSetState(this.graphSettings.defaultState, {}), this._showToast({
                            message: this.t("Graph reset."),
                            undoCallback: function() {
                                return t.dispatch({
                                    type: "set-state",
                                    state: ee,
                                    opts: {}
                                })
                            }
                        }), this.enqueueEvent("graphReset");
                        break;
                    case "clear-graph":
                        if (this.triggerClearGraph) return void this.runAfterDispatch(function() {
                            return t.triggerClearGraph()
                        });
                        var te = this.getState();
                        this.externalSetState(this.getBlankState(), {});
                        var A = this.getItemModelByIndex(0);
                        A && D.moveFocusToItem(this, A.id, "end"), this._showToast({
                            message: this.t("Graph cleared."),
                            undoCallback: function() {
                                return t.dispatch({
                                    type: "set-state",
                                    state: te,
                                    opts: {}
                                })
                            }
                        }), this.enqueueEvent("graphReset");
                        break;
                    case "on-evaluator-changes":
                        C.onEvaluatorFormulaUpdates(this.listModel, e.changes);
                        break;
                    case "process-graph-data":
                        var ne;
                        for (ne in e.graphData.addedGraphs) {
                            var re = e.graphData.addedGraphs[ne];
                            this.grapher && this.grapher.updateSketch(ne, re), C.onGraphComputed(this.listModel, ne, re)
                        }
                        for (ne in e.graphData.removedGraphs) this.grapher && this.grapher.hide(ne);
                        for (ne in e.graphData.intersections) this.grapher && this.grapher.updateIntersections(ne, e.graphData.intersections[ne]);
                        this.grapher && this.grapher.poiController.handleTraceUpdate();
                        break;
                    case "add-helper-expression":
                        C.addHelperExpression(this.listModel, e.state);
                        break;
                    case "tick":
                        this._tick(e.time);
                        break;
                    case "adjust-slider-by-keyboard":
                        var n = this.getItemModel(e.id);
                        if (!n || "expression" !== n.type) return;
                        S.adjustSliderByKeyboard(n, e.adjustment);
                        break;
                    case "adjust-slider-by-dragging-thumb":
                        var n = this.getItemModel(e.id);
                        if (!n || "expression" !== n.type) return;
                        S.adjustSliderByDraggingThumb(n, e.target);
                        break;
                    case "set-slider-minlatex":
                        this.shouldScrollSelectedItemIntoViewAfterDispatch = !0;
                        var n = this.getItemModel(e.id);
                        if (!n || "expression" !== n.type) return;
                        S.setSliderMin(n, e.latex);
                        break;
                    case "set-slider-maxlatex":
                        this.shouldScrollSelectedItemIntoViewAfterDispatch = !0;
                        var n = this.getItemModel(e.id);
                        if (!n || "expression" !== n.type) return;
                        S.setSliderMax(n, e.latex);
                        break;
                    case "set-slider-steplatex":
                        this.shouldScrollSelectedItemIntoViewAfterDispatch = !0;
                        var n = this.getItemModel(e.id);
                        if (!n || "expression" !== n.type) return;
                        S.setSliderStep(n, e.latex);
                        break;
                    case "set-slider-dragging":
                        var n = this.getItemModel(e.id);
                        if (!n || "expression" !== n.type) return;
                        S.setSliderDragging(n, e.dragging);
                        break;
                    case "set-slider-isplaying":
                        var n = this.getItemModel(e.id);
                        if (!n || "expression" !== n.type) return;
                        S.setSliderIsPlaying(n, e.isPlaying);
                        break;
                    case "set-slider-loopmode":
                        var n = this.getItemModel(e.id);
                        if (!n || "expression" !== n.type) return;
                        S.setSliderLoopMode(n, e.loopMode);
                        break;
                    case "set-slider-animationperiod":
                        var n = this.getItemModel(e.id);
                        if (!n || "expression" !== n.type) return;
                        S.setSliderAnimationPeriod(n, e.animationPeriod);
                        break;
                    case "show-expressions-list":
                        this._showExpressions();
                        break;
                    case "hide-expressions-list":
                        this._hideExpressions();
                        break;
                    case "open-drawer":
                        this.enqueueEvent("openDrawer");
                        break;
                    case "re-randomize":
                        this.setRandomSeed(G.default());
                        break;
                    case "resize-exp-list":
                        this._setExpListWidth(e.expListWidth);
                        break;
                    case "toast/show":
                        this._showToast(e.toast);
                        break;
                    case "toast/close":
                        var ie = this.toastData.onHide;
                        ie && this.runAfterDispatch(ie), this.toastData = {};
                        break;
                    case "toast/undo":
                        var oe = this.toastData.undoCallback;
                        oe && this.runAfterDispatch(oe), this.toastData = {};
                        break;
                    case "toast/learn-more":
                        var ae = this.toastData.undoCallback;
                        ae && this.runAfterDispatch(ae), this.toastData = {};
                        break;
                    case "start-moving-point":
                        R.onStartMovingPoint(this, this.listModel, e.pointInfo);
                        break;
                    case "stop-moving-point":
                        R.onStopMovingPoint(this, e.pointInfo);
                        break;
                    case "on-move-point":
                        R.onMovePoint(this, e.pointInfo, e.screenPt, e.projection, e.keyboardDirection) && this.enqueueEvent("userMovedPoint");
                        break;
                    case "commit-user-requested-viewport":
                        this._commitUserRequestedViewport(e.viewport);
                        break;
                    case "set-viewport":
                        this._setAxisLimitLatex("xmin", e.viewport.xmin + ""), this._setAxisLimitLatex("xmax", e.viewport.xmax + ""), this._setAxisLimitLatex("ymin", e.viewport.ymin + ""), this._setAxisLimitLatex("ymax", e.viewport.ymax + "");
                        break;
                    case "set-axis-limit-latex":
                        this._setAxisLimitLatex(e.limit, e.latex);
                        break;
                    case "toggle-graph-settings":
                        this.layoutModel = r.__assign({}, this.layoutModel, {
                            graphSettingsOpen: !this.layoutModel.graphSettingsOpen
                        }), e.focusOnOpen && this.layoutModel.graphSettingsOpen && D.setFocusLocation(this, {
                            type: "settings",
                            location: "projector-mode"
                        });
                        break;
                    case "close-graph-settings":
                        this.layoutModel = r.__assign({}, this.layoutModel, {
                            graphSettingsOpen: !1
                        }), e.focusIconAfterClose && D.setFocusLocation(this, {
                            type: "settings",
                            location: "icon"
                        });
                        break;
                    case "toggle-add-expression":
                        this.layoutModel = r.__assign({}, this.layoutModel, {
                            addExpressionOpen: !this.layoutModel.addExpressionOpen
                        }), e.focusOnOpen && this.layoutModel.addExpressionOpen && D.setFocusLocation(this, {
                            type: "add-expression-btn"
                        });
                        break;
                    case "close-add-expression":
                        this._closeAddExpression(), e.focusIconAfterClose && D.setFocusLocation(this, {
                            type: "add-item-btn"
                        });
                        break;
                    case "ui/container-resized":
                        this.layoutMeasurements = {
                            width: e.size.width,
                            height: e.size.height
                        }, this.shouldScrollSelectedItemIntoViewAfterDispatch = !0;
                        break;
                    case "enter-printmode":
                        this.inPrintMode = !0;
                        break;
                    case "exit-printmode":
                        this.inPrintMode = !1;
                        break;
                    case "keypad/set-layout":
                        this.layoutModel = r.__assign({}, this.layoutModel, {
                            keypadLayout: e.layout,
                            keypadFunctionsOpen: !1
                        });
                        break;
                    case "keypad/set-functions-tab":
                        this.layoutModel = r.__assign({}, this.layoutModel, {
                            keypadFunctionsTab: e.tab
                        });
                        break;
                    case "keypad/set-minimized":
                        this.layoutModel = r.__assign({}, this.layoutModel, {
                            keypadMinimized: e.minimized,
                            keypadLayout: "mainNumbers"
                        }), this.shouldScrollSelectedItemIntoViewAfterDispatch = !0, this.needsFakeKeypad() || D.addFocusForKeypad(this);
                        break;
                    case "keypad/type-text":
                        this.layoutModel = r.__assign({}, this.layoutModel, {
                            keypadFunctionsOpen: !1
                        }), this.runAfterDispatch(function() {
                            var n = j.default.getFocusedMathquill();
                            n && j.default.canAcceptText(n, !!t.getGraphSettings().config.capExpressionSize, e.text) && (n.typedText(e.text), j.default.simulateUserChangedLatex(n))
                        });
                        break;
                    case "keypad/press-key":
                        this.layoutModel = r.__assign({}, this.layoutModel, {
                            keypadFunctionsOpen: !1
                        }), this.runAfterDispatch(function() {
                            var t = j.default.getFocusedMathquill();
                            t && j.default.simulateKeypress(t, e.key)
                        });
                        break;
                    case "keypad/custom-command":
                        this.layoutModel = r.__assign({}, this.layoutModel, {
                            keypadFunctionsOpen: !1
                        }), this.runAfterDispatch(function() {
                            var t = j.default.getFocusedMathquill();
                            t && (U.execute(t, e.command), j.default.simulateUserChangedLatex(t))
                        });
                        break;
                    case "keypad/shift":
                        "capitalLetters" === this.getKeypadLayout() ? this.layoutModel = r.__assign({}, this.layoutModel, {
                            keypadLayout: "letters",
                            keypadFunctionsOpen: !1
                        }) : this.layoutModel = r.__assign({}, this.layoutModel, {
                            keypadLayout: "capitalLetters",
                            keypadFunctionsOpen: !1
                        });
                        break;
                    case "keypad/123":
                        this.layoutModel = r.__assign({}, this.layoutModel, {
                            keypadLayout: "mainNumbers",
                            keypadFunctionsOpen: !1
                        });
                        break;
                    case "keypad/abc":
                        this.isQwertyKeyboardEnabled() ? this.layoutModel = r.__assign({}, this.layoutModel, {
                            keypadLayout: "letters",
                            keypadFunctionsOpen: !1
                        }) : this.layoutModel = r.__assign({}, this.layoutModel, {
                            keypadLayout: "noQwertyLetters",
                            keypadFunctionsOpen: !1
                        });
                        break;
                    case "keypad/functions":
                        this.layoutModel = r.__assign({}, this.layoutModel, {
                            keypadFunctionsOpen: !this.isKeypadFunctionsPopoverOpen()
                        });
                        break;
                    case "open-on-web":
                        this._openOnWeb();
                        break;
                    case "file-is-dragged-over":
                        this.listModel.openItemMenu = void 0, this.layoutModel = r.__assign({}, this.layoutModel, {
                            isFileDraggedOver: !0
                        });
                        break;
                    case "file-is-not-dragged-over":
                        this.layoutModel = r.__assign({}, this.layoutModel, {
                            isFileDraggedOver: !1
                        });
                        break;
                    case "zoom":
                        this.grapher && this.grapher.viewportController.zoom(e.direction);
                        break;
                    case "set-hovered-image":
                        var n = this.getItemModel(e.id);
                        if (!n || "image" !== n.type) return;
                        M.setClickableInfoProp(n, "hoveredImage", e.url);
                        break;
                    case "set-depressed-image":
                        var n = this.getItemModel(e.id);
                        if (!n || "image" !== n.type) return;
                        M.setClickableInfoProp(n, "depressedImage", e.url);
                        break;
                    case "clickable-item-clicked":
                        var n = this.getItemModel(e.id);
                        if (!n) return;
                        var se;
                        if ("expression" === n.type ? se = S.getClickableInfoUpdateLatex(n) : "image" === n.type && (se = M.getClickableInfoUpdateLatex(n)), !se) return;
                        var le;
                        if ("expression" === n.type ? le = S.getClickableInfoUpdateIdentifier(n) : "image" === n.type && (le = M.getClickableInfoUpdateIdentifier(n)), le) {
                            var ce = C.getItemsByIdentifier(this.listModel, le);
                            if (1 === ce.length) {
                                var ue = ce[0];
                                ue.slider.isPlaying ? (S.setSliderIsPlaying(ue, !1), S.setLatex(ue, se), S.setSliderIsPlaying(ue, !0)) : S.setLatex(ue, se)
                            }
                        }
                        break;
                    default:
                        return e
                }
            }, e.prototype.areClickableObjectsTemporarilyDisabled = function() {
                return this.__waitingForClickableObjectWorkerResponse
            }, e.prototype.setEditListMode = function(e) {
                this.layoutModel = r.__assign({}, this.layoutModel, {
                    inEditListMode: e
                })
            }, e.prototype._createTableItem = function() {
                var e = C.findAvailableColumnSubscript(this.listModel),
                    t = E.makeTableState(e, [
                        [""],
                        [""]
                    ], this);
                return this.createItemModel(t)
            }, e.prototype._populateSettingsViewLimitLatex = function() {
                this.grapher && (this.settingsViewModel = r.__assign({}, this.settingsViewModel, {
                    limitLatex: F.limitLatex(this.grapher.getCurrentViewport(), this.getGraphSettings().xAxisStep, this.getGraphSettings().yAxisStep)
                }))
            }, e.prototype.getSettingsViewModel = function() {
                return this.settingsViewModel
            }, e.prototype.getListModel = function() {
                return this.listModel
            }, e.prototype.hasBackgroundColor = function() {
                return "#ffffff" !== this.getBackgroundColor()
            }, e.prototype.getBackgroundColor = function() {
                return this.getGraphSettings().getBackgroundColor()
            }, e.prototype.getTextColor = function() {
                return this.getGraphSettings().getTextColor()
            }, e.prototype.getPillboxBackgroundColor = function() {
                return x.shadeColor(this.getBackgroundColor(), -.07)
            }, e.prototype.subToChanges = function(e) {
                var t = this,
                    n = this.nextSubscription;
                return this.nextSubscription += 1, this.subscriptions[n] = e,
                    function() {
                        delete t.subscriptions[n]
                    }
            }, e.prototype.updateTheComputedWorld = function() {
                var e = this;
                C.reindex(this.listModel), C.updateDrawOrder(this.listModel), this.grapher && this.grapher.setSketchOrder(this.listModel.drawOrder);
                for (var t = 0, n = this.getAllItemModels(); t < n.length; t++) {
                    var i = n[t];
                    switch (i.type) {
                        case "expression":
                            S.onControllerUpdate(i);
                            break;
                        case "image":
                            M.onControllerUpdate(i);
                            break;
                        case "table":
                            E.onControllerUpdate(i);
                            break;
                        case "folder":
                            I.onControllerUpdate(i);
                            break;
                        case "text":
                            T.onControllerUpdate(i);
                            break;
                        default:
                            return i
                    }
                }
                if (this.isCurrentFocusLocationValid() || D.setFocusLocation(this, void 0), this.listModel.openItemMenu) {
                    document.body && document.body.contains(this.listModel.openItemMenu.icon) || (this.listModel.openItemMenu = void 0)
                }
                var o = this.getSelectedItem();
                o && !this.getItemModel(o.id) && C.setSelected(this.listModel, void 0), this.layoutModel.graphSettingsOpen || this._populateSettingsViewLimitLatex(), this.propagateSelection(), this.isKeypadOpen() || (this.layoutModel = r.__assign({}, this.layoutModel, {
                    keypadFunctionsOpen: !1
                })), this.runAfterDispatch(function() {
                    e.grapher && e.grapher.audioGraph.checkIfSelectedItemChanged(o ? o.id : void 0), e.grapher && e.focusLocation && e.grapher.audioGraph.exitAudioTrace()
                })
            }, e.prototype.propagateSelection = function() {
                this.grapher && this.evaluator && (this.__lastSelectedId = n.propagateSelection(this, this.grapher, this.evaluator, this.__lastSelectedId))
            }, e.prototype.areParsableObjectsEqual = function(e, t) {
                return e === t || s.isEqual(r.__assign({}, e, {
                    regressionParameters: void 0
                }), r.__assign({}, t, {
                    regressionParameters: void 0
                }))
            }, e.prototype.requestParseForAllItems = function() {
                this.isCurrentlyDoingSetState && this.evaluator.clearStatementsAndStartCompleteState();
                for (var e = {}, t = this.lastParsableObjects, n = 0, r = this.getAllItemModels(); n < r.length; n++) {
                    var i = r[n];
                    switch (i.type) {
                        case "expression":
                        case "image":
                        case "table":
                            e[i.id] = i.cachedParsableState;
                            break;
                        case "folder":
                        case "text":
                            break;
                        default:
                            return i
                    }
                }
                for (var o = 0, a = C.getAllHelperItemModels(this.listModel); o < a.length; o++) {
                    var i = a[o];
                    e[i.id] = i.cachedParsableState
                }
                for (var l in e) {
                    var c = e[l],
                        u = t[l];
                    if ("image" === c.type && (!u || c.type !== u.type || c.guid !== u.guid) && this.grapher) {
                        var i = this.getItemModel(l);
                        i && "image" === i.type && this.grapher.addGraphImage(i)
                    }
                    this.areParsableObjectsEqual(c, u) || (this.grapher && "statement" === c.type && "" === c.latex && this.grapher.removeGraphSketch(c.id), this.evaluator.addStatement(c))
                }
                for (var l in t) {
                    var u = t[l],
                        c = e[l];
                    if ("image" !== u.type || c && c.type === u.type && c.guid === u.guid || this.grapher && this.grapher.removeGraphImage(l), !c && (this.evaluator.removeStatement(l), "table" === u.type))
                        for (var p = 0, d = u.columns; p < d.length; p++) {
                            var h = d[p];
                            this.evaluator.removeStatement(h.id)
                        }
                }
                if (this.grapher) {
                    var f = this.grapher.getProjection(),
                        m = {
                            viewport: f.viewport.toObject(),
                            screen: f.screen
                        };
                    s.isEqual(m, this.lastViewState) || (this.evaluator.setViewState(m), this.lastViewState = m)
                }
                this.evaluator.tick(), this.lastParsableObjects = e
            }, e.prototype.setEvaluator = function(e) {
                this.evaluator = e
            }, e.prototype.setGrapher = function(e) {
                this.grapher = e
            }, e.prototype.getGrapher = function() {
                return this.grapher
            }, e.prototype.shouldExpressionZoomFit = function(e) {
                return !!this.grapher && (("expression" === e.type || "table" === e.type) && (!!("expression" !== e.type || !e.error && e.shouldGraph && e.formula.is_graphable) && (!(!e.boundingBoxes || !e.boundingBoxes.length) && L.shouldExpressionZoomFit(e.boundingBoxes, this.grapher.viewportController.getProjection()))))
            }, e.prototype.setBugsnagContext = function(e) {
                this.bugsnagContext = e
            }, e.prototype.getItemRootNodeById = function(e) {
                var t = this.getItemModel(e);
                return t && t.dcgView ? t.dcgView.findRootNode() : void 0
            }, e.prototype.getItemSelectorById = function(e) {
                var t = this.getItemRootNodeById(e);
                return t ? q(t) : void 0
            }, e.prototype.generateId = function() {
                var e = this.__nextItemId;
                return this.__nextItemId += 1, e + ""
            }, e.prototype.getNextColor = function() {
                return C.getNextColor(this.listModel)
            }, e.prototype.getNextDisplayIndex = function() {
                return this.listModel.nextDisplayIndex
            }, e.prototype._clearPendingImageUploads = function() {
                this.__pendingImageUploads = {}
            }, e.prototype.isUploadingImages = function() {
                return Object.keys(this.__pendingImageUploads).length > 0
            }, e.prototype.getExpressionAnalysis = function() {
                return this.listModel.expressionAnalysis
            }, e.prototype.createItemModel = function(e) {
                return C.modelFromSpec(this.listModel, e)
            }, e.prototype.getItemModel = function(e) {
                return C.getItemById(this.listModel, e)
            }, e.prototype.getItemModelByIndex = function(e) {
                return C.getItemByIndex(this.listModel, e)
            }, e.prototype.getItemCount = function() {
                return C.getItemCount(this.listModel)
            }, e.prototype.getItemEditableLabelMode = function(e) {
                var t = this.getItemModel(e);
                if (t && "expression" === t.type) return S.getEditableLabelMode(t)
            }, e.prototype.isItemSecret = function(e) {
                var t = this.getItemModel(e);
                return !!t && C.isItemSecret(t)
            }, e.prototype.isItemSelected = function(e) {
                var t = this.getItemModel(e);
                return !!t && C.isItemSelected(t)
            }, e.prototype.isItemSelectable = function(e) {
                var t = this.getItemModel(e);
                return !!t && C.isItemSelectable(t)
            }, e.prototype.anyItemDependsOnRandomSeed = function() {
                return C.anyItemDependsOnRandomSeed(this.listModel)
            }, e.prototype.getAllItemModels = function() {
                return C.getAllItemModels(this.listModel)
            }, e.prototype.getAllModelsWithSliders = function() {
                return C.getAllModelsWithSliders(this.listModel)
            }, e.prototype.getGraphSettings = function() {
                return this.graphSettings
            }, e.prototype.getAudioGraph = function() {
                return void 0 !== this.grapher ? this.grapher.audioGraph : void 0
            }, e.prototype.inAudioTraceMode = function() {
                var e = this.getAudioGraph();
                return !(!e || !e.audioTraceActive)
            }, e.prototype.expressionsAreFullWidth = function() {
                return this.isNarrow() || !1 === this.graphSettings.config.graphpaper
            }, e.prototype.getExpListWidthString = function() {
                return this.expressionsAreFullWidth() ? "100%" : this.rootElt ? this._getExpListWidth() + "px" : "0"
            }, e.prototype.getExpListWidth = function() {
                return this.rootElt ? this._getExpListWidth() : 0
            }, e.prototype.findFirstPartiallyVisibleItem = function() {
                var e = V.getFirstPartiallyVisibleItemId(this, this._previousFirstPartiallyVisibleId);
                return this._previousFirstPartiallyVisibleId = e, e ? this.getItemModel(e) : void 0
            }, e.prototype.findLastPartiallyVisibleItem = function() {
                var e = V.getLastPartiallyVisibleItemId(this, this._previousLastPartiallyVisibleId);
                return this._previousLastPartiallyVisibleId = e, e ? this.getItemModel(e) : void 0
            }, e.prototype.updateRenderShellsBeforePaint = function() {
                if (this.inPrintMode)
                    for (var e = 0, t = this.getAllItemModels(); e < t.length; e++) {
                        var n = t[e];
                        n.renderShell = !1
                    } else {
                        for (var r = 0, i = this.getAllItemModels(); r < i.length; r++) {
                            var n = i[r];
                            n.isHiddenFromUI && (n.renderShell = !0)
                        }
                        var o = this.getSelectedItem();
                        o && (o.renderShell = !1)
                    }
            }, e.prototype.updateRenderShellsAfterPaint = function() {
                if (this.inPrintMode)
                    for (var e = 0, t = this.getAllItemModels(); e < t.length; e++) {
                        var n = t[e];
                        n.renderShell = !1
                    } else if (this.rootElt && this.isListVisible()) {
                        for (var r = void 0, i = void 0, o = 0, a = this.getAllItemModels(); o < a.length; o++) {
                            var n = a[o];
                            n.renderShell || (r || (r = n), i = n)
                        }
                        var s = this.findFirstPartiallyVisibleItem(),
                            l = this.findLastPartiallyVisibleItem();
                        if (s && l)
                            for (var c = s.index; c <= l.index; c++) {
                                var u = this.getItemModelByIndex(c);
                                u && !u.isHiddenFromUI && u.renderShell && (u.renderShell = !1)
                            }
                        if (s && l && r && i)
                            for (var c = r.index; c <= i.index; c++)
                                if (c < s.index || c > l.index) {
                                    var u = this.getItemModelByIndex(c);
                                    if (u && !u.isHiddenFromUI && !u.renderShell) {
                                        u.renderShell = !0;
                                        var p = this.getItemRootNodeById(u.id);
                                        if (p) {
                                            var d = p.getBoundingClientRect().height;
                                            d > 0 && (u.cachedRenderHeight = d)
                                        }
                                    }
                                } var h = this.getSelectedItem();
                        h && (h.renderShell = !1)
                    }
            }, e.prototype.updateDragDrop = function() {
                var e = this.listModel.dragState;
                if (e) {
                    var t = this.getItemModel(e.firstItemId);
                    if (t) {
                        var n = this.dragdrop_expressions.applyDrag();
                        n && (C.setDragState(this.listModel, n.dragState), k.setFolderId(t, n.folderId), t.index !== n.newIndex && C.moveItemsTo(this.listModel, t.index, n.newIndex, e.numberOfItems), C.verifyFolderIntegrity(this.listModel))
                    }
                }
            }, e.prototype.isSelectedItemPartiallyVisible = function() {
                var e = this.getSelectedItem();
                return !(!e || !V.isItemPartiallyVisible(this, e.id))
            }, e.prototype._tick = function(e) {
                var t = this;
                if (void 0 !== this._lastTickTime) {
                    var n = e - this._lastTickTime;
                    this.getAllItemModels().forEach(function(e) {
                        "expression" === e.type && e.sliderExists && e.slider.isPlaying && S.tickSliderStep(e, n)
                    })
                }
                this.runAfterDispatch(function() {
                    t.grapher && t.grapher.tick(e)
                }), this._lastTickTime = e
            }, e.prototype.areAnyImagesLoading = function() {
                return C.areAnyImagesLoading(this.listModel)
            }, e.prototype._commitUserRequestedViewport = function(e) {
                this.grapher && this.grapher.setUserRequestedViewport(e)
            }, e.prototype._setAxisLimitLatex = function(e, t) {
                var n, i;
                this.settingsViewModel = r.__assign({}, this.settingsViewModel, {
                    limitLatex: r.__assign({}, this.settingsViewModel.limitLatex, (n = {}, n[e] = t, n))
                });
                var o = "" === t && ("xstep" === e || "ystep" === e),
                    a = o ? 0 : A.default(t, this.graphSettings.degreeMode);
                switch (e) {
                    case "xstep":
                        if (a < 0 || !isFinite(a)) return;
                        this.graphSettings.setProperty("xAxisStep", a);
                        break;
                    case "ystep":
                        if (a < 0 || !isFinite(a)) return;
                        this.graphSettings.setProperty("yAxisStep", a);
                        break;
                    case "xmin":
                    case "xmax":
                    case "ymin":
                    case "ymax":
                        if (!this.grapher) return;
                        var s = this.grapher.viewportController.getViewport(),
                            l = "xmin";
                        "xmin" === e && (l = "xmax"), "ymax" === e && (l = "ymin"), "ymin" === e && (l = "ymax");
                        var c = A.default(this.settingsViewModel.limitLatex[l], this.graphSettings.degreeMode),
                            u = y.Viewport.fromObject(r.__assign({}, s.toObject(), (i = {}, i[e] = a, i[l] = c, i)));
                        if (!u.isValid()) return;
                        this.grapher.viewportController.setViewport(u);
                        var p = "xmin" === e || "xmax" === e ? "x" : "y";
                        this.graphSettings.setProperty("lastChangedAxis", p);
                        var d = u.isSquare(this.grapher.getProjection().screen);
                        this.graphSettings.setProperty("squareAxes", d)
                }
                if (this.grapher) {
                    var h = this.grapher.viewportController.getViewport().toObject();
                    this._commitUserRequestedViewport(h)
                }
            }, e.prototype.canUserAddExpressions = function() {
                return !!this.graphSettings.config.expressions
            }, e.prototype.areNotesEnabled = function() {
                return !!this.graphSettings.config.notes
            }, e.prototype.areLinksEnabled = function() {
                return !!this.graphSettings.config.links
            }, e.prototype.areImagesEnabled = function() {
                var e = window.FileReader,
                    t = o.IS_IPAD && o.IOS_VERSION && 8 === o.IOS_VERSION[0] && 0 === o.IOS_VERSION[1] && 0 === o.IOS_VERSION[2];
                return !(!this.graphSettings.config.images || !e || t)
            }, e.prototype.areFoldersEnabled = function() {
                return !!this.graphSettings.config.folders
            }, e.prototype.isDecimalToFractionEnabled = function() {
                return !!this.graphSettings.config.decimalToFraction
            }, e.prototype.areFunctionsRestricted = function() {
                return !!this.graphSettings.config.restrictedFunctions
            }, e.prototype.isQwertyKeyboardEnabled = function() {
                return !!this.graphSettings.config.qwertyKeyboard
            }, e.prototype.canEditOnWeb = function() {
                return !!this.graphSettings.config.editOnWeb
            }, e.prototype.hasTransparentBackground = function() {
                return !!this.graphSettings.config.transparentBackground
            }, e.prototype.shouldAudioTraceReverseExpressions = function() {
                return !!this.graphSettings.config.audioTraceReverseExpressions
            }, e.prototype.hasDefaultState = function() {
                return !!this.graphSettings.defaultState
            }, e.prototype.getDefaultStateViewport = function() {
                var e = this.graphSettings.defaultState;
                if (e && e.graph) return e.graph.viewport
            }, e.prototype.getColors = function() {
                return this.graphSettings.config.colors
            }, e.prototype.getImageOpacities = function() {
                return ["0.2", "0.4", "0.6", "0.8", "1"]
            }, e.prototype.getUIDragModes = function() {
                return [p.DragMode.X, p.DragMode.Y, p.DragMode.XY]
            }, e.prototype.getNumberOfItemsInFolder = function(e) {
                return C.getNumberOfItemsInFolder(this.listModel, e)
            }, e.prototype.getEnabledDragModesForItem = function(e) {
                var t = this.getItemModel(e);
                if (!t || "expression" !== t.type) return [];
                var n = t.formula,
                    r = [];
                if (!n.move_strategy) return r;
                var i = "none" !== n.move_strategy[0].type,
                    o = "none" !== n.move_strategy[1].type,
                    a = i && o;
                return i && r.push(p.DragMode.X), o && r.push(p.DragMode.Y), a && r.push(p.DragMode.XY), r
            }, e.prototype.shouldShowEvaluationForItem = function(e) {
                var t = this.getItemModel(e);
                return !!t && ("expression" === t.type && S.shouldShowEvaluation(t))
            }, e.prototype.getEvaluationValueForItem = function(e) {
                var t = this.getItemModel(e);
                return t ? "expression" !== t.type ? NaN : S.getEvaluationValue(t) : NaN
            }, e.prototype.canDisplayEvaluationForItemAsFraction = function(e) {
                if (!this.isDecimalToFractionEnabled()) return !1;
                var t = this.getItemModel(e);
                if (!t) return !1;
                if ("expression" !== t.type) return !1;
                if (S.isGraphable(t)) return !1;
                var n = this.getEvaluationValueForItem(e);
                return !Array.isArray(n) && a.canDisplayAsFraction(n)
            }, e.prototype.shouldEvaluationForItemDisplayAsFraction = function(e) {
                if (!this.isDecimalToFractionEnabled()) return !1;
                var t = this.getItemModel(e);
                return !!t && ("expression" === t.type && S.shouldEvaluationDisplayAsFraction(t))
            }, e.prototype.getEvaluationLabelOptionsForItem = function(e) {
                return r.__assign({}, w.EvaluationLabelOptions, {
                    displayAsFraction: this.shouldEvaluationForItemDisplayAsFraction(e)
                })
            }, e.prototype.getPointStyles = function() {
                return [d.PointStyle.POINT, d.PointStyle.OPEN, d.PointStyle.CROSS]
            }, e.prototype.getLineStyles = function() {
                return [d.LineStyle.SOLID, d.LineStyle.DASHED, d.LineStyle.DOTTED]
            }, e.prototype.getOpacities = function() {
                return [u.LOW, u.DEFAULT, u.HIGH]
            }, e.prototype.isInEditListMode = function() {
                return this.layoutModel.inEditListMode
            }, e.prototype.canAdministerSecretFolders = function() {
                return this.graphSettings.config.administerSecretFolders
            }, e.prototype.canUseAdvancedStyling = function() {
                return this.graphSettings.config.advancedStyling
            }, e.prototype.canAuthorClickableObjects = function() {
                return this.graphSettings.config.clickableObjects
            }, e.prototype.isDegreeMode = function() {
                return this.graphSettings.degreeMode
            }, e.prototype.isGraphSettingsOpen = function() {
                return this.layoutModel.graphSettingsOpen
            }, e.prototype.isAddExpressionOpen = function() {
                return this.layoutModel.addExpressionOpen
            }, e.prototype.shouldRenderList = function() {
                if (this.layoutModel.expressionsVisible) return !0;
                var e = this.layoutModel.expressionsHiddenTime;
                return void 0 !== e && Date.now() - e <= 500
            }, e.prototype.isListVisible = function() {
                return this.layoutModel.expressionsVisible
            }, e.prototype.isGrapherEnabled = function() {
                return !1 !== this.graphSettings.config.graphpaper
            }, e.prototype.isListEnabled = function() {
                return !1 !== this.graphSettings.config.expressions
            }, e.prototype.areDistributionsEnabled = function() {
                return !0 === this.graphSettings.config.distributions
            }, e.prototype.needsFakeKeypad = function() {
                var e = this.getFocusLocation();
                if (!e) return !1;
                switch (e.type) {
                    case "settings":
                        return "icon" !== e.location && "degree-mode" !== e.location;
                    case "distribution-param":
                    case "cdf-limit":
                    case "slider-limit":
                    case "domain-limit":
                    case "expression":
                    case "visualization-prop":
                    case "expression-menu":
                        return !0;
                    case "clickableinfo-prop":
                        return "description" !== e.location;
                    case "table":
                        var t = e.location;
                        if (0 === t.row) return !0;
                        var n = this.getItemModel(e.id);
                        if (!n || "table" !== n.type) return !1;
                        var r = n.columnModels[t.column];
                        return !!r && !r.disabled;
                    case "image":
                        return "name" !== e.location;
                    case "text":
                    case "folder":
                    case "add-item-btn":
                    case "add-expression-btn":
                    case "add-table-btn":
                    case "add-folder-btn":
                    case "add-image-btn":
                        return !1;
                    case "slider-icon":
                    case "slider-thumb":
                        return !1;
                    case "editable-label":
                        return this.getItemEditableLabelMode(e.id) === _.EditableLabelMode.Math;
                    default:
                        return e
                }
            }, e.prototype.getBrandingMode = function() {
                return this.getEditLink() ? "static-edit-link" : this.getGraphSettings().config.editOnWeb ? "edit-link" : "powered-by"
            }, e.prototype.getEditLink = function() {
                return window.iframeEmbedBrandingLink
            }, e.prototype._expressionZoomFit = function(e) {
                var t = this.getItemModel(e);
                if (this.grapher && t && ("expression" === t.type || "table" === t.type) && t.boundingBoxes && t.boundingBoxes.length) {
                    var n = L.getRecommendedViewportForExpression(t.boundingBoxes, this.grapher.viewportController.getProjection());
                    n && this.grapher.viewportController.zoomCustom(n)
                }
            }, e.prototype._deleteItemAndAnimateOut = function(e, t) {
                var n = this,
                    r = this.getItemSelectorById(e);
                r && (r.css({
                    transition: "0.2s",
                    opacity: "0",
                    transform: "scale(.1, .1)"
                }), setTimeout(function() {
                    n.dispatch({
                        type: "finish-deleting-item-after-animation",
                        id: e,
                        setFocusAfterDelete: t
                    })
                }, 200))
            }, e.prototype._finishDeletingItemAfterAnimation = function(e, t) {
                var n = this.getItemModel(e);
                if (n) {
                    var r = this.getItemSelectorById(e),
                        i = r && document.activeElement && q(document.activeElement).closest(r).length > 0,
                        o = C.findPrevSelectableItem(this.listModel, n.index);
                    if (this._removeExpressionSynchronously(n), t && i) {
                        if (!o) {
                            var a = C.getFirstSelectableItem(this.listModel);
                            a && (o = a)
                        }
                        o && D.moveFocusToItem(this, o.id, "end")
                    }
                }
            }, e.prototype._removeExpressionSynchronously = function(e) {
                if (C.removeItemAtIndex(this.listModel, e.index), C.hasNoVisibleExpressions(this.listModel)) {
                    var t = this.createItemModel({
                        type: "expression",
                        id: this.generateId(),
                        color: this.getNextColor()
                    });
                    C.insertItemAtEnd(this.listModel, t)
                }
            }, e.prototype.setRootElt = function(e) {
                this.rootElt = e, this.dragdrop_expressions = new z.default(this)
            }, e.prototype._hideExpressions = function() {
                this.graphSettings.config.expressions && (C.setSelected(this.listModel, void 0), this.layoutModel = r.__assign({}, this.layoutModel, {
                    expressionsVisible: !1,
                    expressionsHiddenTime: Date.now()
                }), h.default())
            }, e.prototype._showExpressions = function() {
                this.graphSettings.config.expressions && (this.layoutModel = r.__assign({}, this.layoutModel, {
                    expressionsVisible: !0
                }), h.default())
            }, e.prototype._showToast = function(e) {
                var t = this;
                if (this.toastData = e, this.toastData.hasOwnProperty("undoCallback") && !o.IS_MOBILE) {
                    var n = o.IS_APPLE ? " Press CMD+Z to undo." : " Press CTRL+Z to undo.";
                    this.toastData.message += n
                }
                clearTimeout(this._hideToastTimeout);
                var r = "number" == typeof e.hideAfter ? e.hideAfter : 6e3;
                r > 0 && (this._hideToastTimeout = setTimeout(function() {
                    t.dispatch({
                        type: "toast/close",
                        onHide: t.toastData.onHide
                    })
                }, r))
            }, e.prototype._setExpressionPropertiesFromAPI = function(e, t) {
                var n = this.getItemModel(e);
                if (n)
                    if ("table" === n.type && t.columns) {
                        t = f.default(t);
                        var r = E.cloneTableAndExtendWithProperties(n, t),
                            i = C.modelFromSpec(this.listModel, r);
                        this._toplevelReplaceItemAt(n.index, i, !1)
                    } else {
                        var o = this.getItemModel(e);
                        if (!o) return;
                        for (var a in t)
                            if (t.hasOwnProperty(a)) switch (a) {
                                case "slider":
                                    if ("expression" !== o.type) continue;
                                    var s = t[a];
                                    s.hasOwnProperty("min") && S.setSliderMin(o, s.min), s.hasOwnProperty("max") && S.setSliderMax(o, s.max), s.hasOwnProperty("step") && S.setSliderStep(o, s.step);
                                    break;
                                case "polarDomain":
                                    if ("expression" !== o.type) continue;
                                    S.setPolarDomainMin(o, m.default(t.polarDomain.min)), S.setPolarDomainMax(o, m.default(t.polarDomain.max));
                                    break;
                                case "parametricDomain":
                                    if ("expression" !== o.type) continue;
                                    S.setParametricDomainMin(o, m.default(t.parametricDomain.min)), S.setParametricDomainMax(o, m.default(t.parametricDomain.max));
                                    break;
                                case "hidden":
                                    this._setItemHidden(e, t.hidden);
                                    break;
                                case "secret":
                                    k.setSecret(o, t.secret);
                                    break;
                                case "color":
                                    if ("expression" !== o.type) continue;
                                    S.setColor(o, t.color);
                                    break;
                                case "dragMode":
                                    if ("expression" !== o.type) continue;
                                    S.setDragMode(o, t.dragMode);
                                    break;
                                case "label":
                                    if ("expression" !== o.type) continue;
                                    S.setLabel(o, t.label);
                                    break;
                                case "showLabel":
                                    if ("expression" !== o.type) continue;
                                    S.setShowLabel(o, t.showLabel);
                                    break;
                                case "labelSize":
                                    if ("expression" !== o.type) continue;
                                    S.setLabelSize(o, t.labelSize);
                                    break;
                                case "labelOrientation":
                                    if ("expression" !== o.type) continue;
                                    S.setLabelOrientation(o, t.labelOrientation);
                                    break;
                                case "verticalLabel":
                                    if ("expression" !== o.type) continue;
                                    S.setVerticalLabel(o, t.verticalLabel);
                                    break;
                                case "latex":
                                    if ("expression" !== o.type) continue;
                                    S.setLatex(o, t.latex);
                                    break;
                                case "points":
                                    if ("expression" !== o.type) continue;
                                    S.setPoints(o, !!t.points);
                                    break;
                                case "lines":
                                    if ("expression" !== o.type) continue;
                                    S.setLines(o, !!t.lines);
                                    break;
                                case "pointStyle":
                                    if ("expression" !== o.type) continue;
                                    S.setPointStyle(o, t.pointStyle);
                                    break;
                                case "lineStyle":
                                    if ("expression" !== o.type) continue;
                                    S.setLineStyle(o, t.lineStyle);
                                    break;
                                case "fill":
                                    if ("expression" !== o.type) continue;
                                    S.setFill(o, t.fill);
                                    break;
                                case "fillOpacity":
                                    if ("expression" !== o.type) continue;
                                    S.setFillOpacity(o, t.fillOpacity);
                                    break;
                                case "id":
                                case "type":
                                case "domain":
                                    break;
                                default:
                                    throw new Error("trying to call setProperty for: " + a)
                            }
                    }
            }, e.prototype._isParentFolderHidden = function(e) {
                var t = this.getItemModel(e);
                if (!t) return !1;
                var n = C.getParentFolderModel(t);
                return !!n && n.hidden
            }, e.prototype._toggleItemHidden = function(e) {
                if (this._isParentFolderHidden(e)) this._setItemHidden(e, !1);
                else {
                    var t = this.getItemModel(e);
                    if (!t) return;
                    switch (t.type) {
                        case "expression":
                        case "image":
                        case "folder":
                            this._setItemHidden(e, !t.hidden);
                            break;
                        case "table":
                        case "text":
                            break;
                        default:
                            return t
                    }
                }
            }, e.prototype._toggleTableColumnHidden = function(e, t) {
                if (this._isParentFolderHidden(e)) this._setTableColumnHidden(e, t, !1);
                else {
                    var n = this.getItemModel(e);
                    if (!n || "table" !== n.type) return;
                    var r = E.getColumnModel(n, t);
                    if (!r) return;
                    this._setTableColumnHidden(e, t, !r.hidden)
                }
            }, e.prototype._setTableColumnHidden = function(e, t, n) {
                var r = this.getItemModel(e);
                if (r && "table" === r.type) {
                    var i = E.shouldHideColumn(r, t);
                    !n && this._isParentFolderHidden(e) && this._setItemHidden(r.folderId, !1), E.setColumnHidden(r, t, n), !n && i && E.setColumnPoints(r, t, !0)
                }
            }, e.prototype._setItemHidden = function(e, t) {
                var n = this.getItemModel(e);
                if (n) switch (!t && this._isParentFolderHidden(n.id) && this._setItemHidden(n.folderId, !1), n.type) {
                    case "expression":
                        S.setHidden(n, t);
                        break;
                    case "folder":
                        I.setHidden(n, t);
                        break;
                    case "image":
                        M.setHidden(n, t);
                        break;
                    case "table":
                    case "text":
                        break;
                    default:
                        return n
                }
            }, e.prototype._addItemToEndFromAPI = function(e) {
                var t = C.getLastSelectableItem(this.listModel);
                !e.secret && t && "expression" === t.type && "" === t.latex && C.removeItemAtIndex(this.listModel, t.index), C.insertItemAtEnd(this.listModel, e)
            }, e.prototype._toplevelInsertItemAt = function(e, t, n, r) {
                var i = t;
                C.insertItemAtIndex(this.listModel, i, e), r && k.setFolderId(i, r), n && D.moveFocusToItem(this, i.id)
            }, e.prototype._toplevelNewItemAtSelection = function(e, t) {
                var n = this.getSelectedItem();
                if (n) {
                    var r = "expression" === n.type && !n.latex;
                    if (r && !n.folderId && ("expression" !== e.type || e.latex)) return this._toplevelReplaceItemAt(n.index, e, t.shouldFocus);
                    if (r && n.folderId && "expression" !== e.type && "folder" !== e.type) return this._toplevelReplaceItemAt(n.index, e, t.shouldFocus);
                    if (!n.folderId && "folder" !== n.type) {
                        return this._toplevelInsertItemAt(n.index + 1, e, t.shouldFocus, void 0)
                    }
                    if (n.folderId && "folder" !== e.type) return this._toplevelInsertItemAt(n.index + 1, e, t.shouldFocus, n.folderId);
                    if ("folder" === n.type && !n.collapsed && "folder" !== e.type) return this._toplevelInsertItemAt(n.index + 1, e, t.shouldFocus, n.id)
                }
                var i = this.getFirstFullyVisibleItem();
                for (i && "folder" === i.type && (i = this.getItemModelByIndex(i.index + 1)); i && i.folderId;) i = this.getItemModelByIndex(i.index + 1);
                var o = i ? i.index : this.getItemCount();
                return this._toplevelInsertItemAt(o, e, t.shouldFocus, void 0)
            }, e.prototype.getFirstFullyVisibleItem = function() {
                var e = V.getFirstFullyVisibleItemId(this);
                if (e) return C.getItemById(this.listModel, e)
            }, e.prototype.find$ = function(e) {
                return q(this.rootElt).find(e)
            }, e.prototype.getExppanelSelectorOrThrow = function() {
                var e = V.getExppanelElt(this);
                if (e) return q(e);
                throw new Error("expected to find $exppanel but could not")
            }, e.prototype.scrollItemIntoView = function(e) {
                if (this.rootElt && this.isListVisible()) {
                    var t = this.getItemSelectorById(e.id),
                        n = V.getExppanelSelector(this);
                    if (t && n) {
                        if ("table" === e.type) {
                            var r = t.find(".dcg-row .dcg-selected");
                            if (1 === r.length) return void i.scrollVisible(r, n, 60)
                        }
                        i.scrollVisible(t, n, 90)
                    }
                }
            }, e.prototype.scrollSelectedItemIntoView = function() {
                var e = this.getSelectedItem();
                e && this.scrollItemIntoView(e)
            }, e.prototype._pasteTable = function(e) {
                var t = this;
                if (this.grapher) {
                    var n = C.findAvailableColumnSubscript(this.listModel),
                        r = E.makeTableState(n, e, this),
                        i = this.createItemModel(r);
                    this._toplevelNewItemAtSelection(i, {
                        shouldFocus: !0
                    }), this._closeAddExpression();
                    var o = this.grapher.viewportController.getViewport(),
                        a = s.map(e[0], function(e) {
                            return parseFloat(e)
                        }),
                        l = s.map(e[1], function(e) {
                            return parseFloat(e)
                        }),
                        c = {
                            xmin: s.min(a),
                            xmax: s.max(a),
                            ymin: s.min(l),
                            ymax: s.max(l),
                            type: "table"
                        };
                    if (isFinite(c.xmin) && isFinite(c.xmax) && isFinite(c.ymin) && isFinite(c.ymax) && (c.xmax > o.xmax || c.xmin < o.xmin || c.ymax > o.ymax || c.ymin < o.ymin)) {
                        var u = L.getRecommendedViewportForExpression([c], o);
                        if (u) {
                            var p = new y.Viewport(u.xmin, u.xmax, u.ymin, u.ymax);
                            this.grapher.viewportController.setViewport(p), this._showToast({
                                message: this.t("We zoomed to fit your data."),
                                undoCallback: function() {
                                    t.dispatch({
                                        type: "undo"
                                    })
                                }
                            })
                        }
                    }
                }
            }, e.prototype._insertSeveralExpressions = function(e) {
                for (var t = 0; t < e.length; t++) {
                    var n = void 0;
                    n = this.createItemModel(e[t]), this._toplevelNewItemAtSelection(n, {
                        shouldFocus: !0
                    })
                }
            }, e.prototype._appendNumberList = function(e) {
                var t = this.getSelectedItem();
                if (t && "expression" === t.type) {
                    var n = t.latex,
                        r = this.createItemModel({
                            type: "expression",
                            id: this.generateId(),
                            latex: n + e
                        });
                    return this._toplevelReplaceItemAt(t.index, r, !0)
                }
            }, e.prototype._openOnWeb = function() {
                var e = this;
                this.runAfterDispatch(function() {
                    if (e.grapher) {
                        var t = JSON.stringify(e.getState()),
                            n = e.grapher.screenshot({
                                width: 100,
                                height: 100
                            }),
                            r = e.getGraphSettings().config.crossOriginSaveTest,
                            i = r ? "/" : "https://www.desmos.com/",
                            o = i + "api/v1/calculator/cross_origin_save",
                            a = q('<input type="text" name="calc_state" />').val(t),
                            s = q('<input type="text" name="thumb_data" />').val(n),
                            l = q('<form target="_blank" method="POST" style="display:none;"></form>').attr("action", o).append(q('<input type="text" name="is_open_on_web" value="true" />')).append(q('<input type="text" name="my_graphs" value="false" />')).append(q('<input type="text" name="is_update" value="false" />')).append(a).append(s);
                        q(e.rootElt).append(l), l.submit().remove()
                    }
                })
            }, e.prototype.notifyBugsnagAboutMissingSelectedItem = function(e, t) {
                var n = C.getSelected(this.listModel),
                    r = "";
                try {
                    r = n ? JSON.stringify(n.cachedUndoRedoState, null, 2) : "undefined"
                } catch (e) {
                    r = "[[could not stringify]]"
                }
                var i = "";
                try {
                    if (n) {
                        var o = {
                            id: n.id,
                            index: n.index,
                            displayIndex: n.index,
                            secretIndex: n.secretIndex,
                            guid: n.guid,
                            renderShell: n.renderShell,
                            isHiddenFromUI: n.isHiddenFromUI,
                            hasDCGView: !!n.dcgView,
                            cachedRenderHeight: n.cachedRenderHeight
                        };
                        i = JSON.stringify(o, null, 2)
                    } else i = "undefined"
                } catch (e) {
                    i = "[[could not stringify]]"
                }
                var a = "";
                try {
                    a = JSON.stringify(C.getUndoRedoState(this.listModel), null, 2)
                } catch (e) {
                    a = "[[could not stringify]]"
                }
                N.notify("ReplaceItemAtError: no item at index", {
                    metaData: {
                        index: e,
                        shouldFocus: t,
                        selectedModelJSON: i,
                        selectedItemJSON: r,
                        listStateJSON: a
                    }
                })
            }, e.prototype._toplevelReplaceItemAt = function(e, t, n) {
                var r = t,
                    i = this.getItemModelByIndex(e);
                i || this.notifyBugsnagAboutMissingSelectedItem(e, n);
                var o = i.folderId;
                C.removeItemAtIndex(this.listModel, e), C.insertItemAtIndex(this.listModel, r, e), o && k.setFolderId(r, o), n && D.moveFocusToItem(this, r.id)
            }, e.prototype.createSlidersForItem = function(e, t) {
                var n = this,
                    r = this.getItemModel(e);
                if (r) {
                    for (var i = r.folderId, o = r.index + 1, s = t.map(function(e) {
                            var t = e ? a.identifierToLatex(e) + "=1" : "";
                            return {
                                type: "expression",
                                id: n.generateId(),
                                latex: t,
                                color: n.getNextColor(),
                                hidden: !!t
                            }
                        }), l = s.length - 1; l >= 0; l--) {
                        var c = this.createItemModel(s[l]);
                        C.insertItemAtIndex(this.listModel, c, o), i && k.setFolderId(c, i)
                    }
                    var u = s[s.length - 1];
                    "" === u.latex ? D.moveFocusToItem(this, u.id) : D.setFocusLocation(this, void 0)
                }
            }, e.prototype._uploadImagesAndWaitForThemToLoad = function(e) {
                var t = this;
                if (!e || 0 === e.length) return void this._showToast({
                    message: this.t("You did not select a file")
                });
                var n = M.uploadImages(this, e),
                    r = n.errors[0];
                r && this._showToast({
                    message: r
                });
                for (var i = 0, o = n.tokens; i < o.length; i++) {
                    var a = o[i];
                    this.__pendingImageUploads[a] = !0
                }
                this.isUploadingImages() && this._showToast({
                    message: this.t("Uploading images..."),
                    onHide: function() {
                        t._clearPendingImageUploads()
                    }
                })
            }, e.prototype.getImageToRetry = function() {
                for (var e, t = 0, n = this.getAllItemModels(); t < n.length; t++) {
                    var r = n[t];
                    "image" === r.type && "failed" === r.loadStatus && (!e || e.failures > r.failures) && (e = r)
                }
                return e
            }, e.prototype.retryLoadingFailedImage = function() {
                var e = Date.now(),
                    t = e - this.imageRetryState.lastAttemptTime,
                    n = 1e3 * Math.pow(2, this.imageRetryState.attempts);
                if (!(this.imageRetryState.attempts > 0 && t < n)) {
                    var r = this.getImageToRetry();
                    r && (M.retryLoading(r), this.imageRetryState = {
                        lastAttemptTime: e,
                        attempts: this.imageRetryState.attempts + 1
                    })
                }
            }, e.prototype.getSelectedItem = function() {
                return C.getSelected(this.listModel)
            }, e.prototype.getOpenItemMenu = function() {
                return this.listModel.openItemMenu
            }, e.prototype.getFocusedItem = function() {
                return D.getFocusedItem(this)
            }, e.prototype.getFocusLocation = function() {
                return this.focusLocation
            }, e.prototype.isFocusLocationFocused = function(e) {
                var t = this.focusLocation,
                    n = e;
                return !(!t || !n) && s.isEqual(t, n)
            }, e.prototype.isCurrentFocusLocationValid = function() {
                var e = this.focusLocation;
                if (!e) return !0;
                if ("settings" === e.type) return "icon" === e.location || this.isGraphSettingsOpen();
                if ("add-item-btn" === e.type) return !0;
                if ("add-expression-btn" === e.type || "add-table-btn" === e.type) return this.layoutModel.addExpressionOpen;
                if ("add-folder-btn" === e.type) return this.layoutModel.addExpressionOpen && this.areFoldersEnabled();
                if ("add-image-btn" === e.type) return this.layoutModel.addExpressionOpen && this.areImagesEnabled();
                var t = this.getItemModel(e.id);
                if (!t) return !1;
                if ("expression-menu" === e.type) {
                    if ("expression" !== t.type) return !1;
                    var n = t.points,
                        r = t.lines,
                        i = t.fill;
                    return !!b.getReconciledExpressionProps(t.formula.expression_type, {
                        points: n,
                        lines: r,
                        fill: i
                    }).fill
                }
                if (!this.isItemSelected(e.id) && "editable-label" !== e.type) return !1;
                switch (e.type) {
                    case "domain-limit":
                        return "expression" === t.type && !!S.hasDomain(t);
                    case "slider-icon":
                    case "slider-thumb":
                    case "slider-limit":
                        return "expression" === t.type && !!S.hasSlider(t);
                    case "visualization-prop":
                        return "expression" === t.type && !!S.isVisualization(t);
                    case "clickableinfo-prop":
                        return "expression" === t.type ? !!S.isClickableAllowed(t) && t.clickableInfo.enabled : "image" === t.type && t.clickableInfo.enabled;
                    case "distribution-param":
                        if ("expression" !== t.type) return !1;
                        var o = S.parseToplevelFunction(t);
                        return !!o && e.location in o.values;
                    case "cdf-limit":
                        return "expression" === t.type && S.shouldShowCDFFooter(t);
                    case "image":
                        return "image" === t.type;
                    case "folder":
                        return "folder" === t.type;
                    case "text":
                        return "text" === t.type;
                    case "expression":
                        return "expression" === t.type;
                    case "table":
                        return "table" === t.type && !!E.doesCellExist(t, e.location);
                    case "editable-label":
                        return "expression" === t.type && S.hasEditableLabel(t);
                    default:
                        return e
                }
            }, e.prototype.isDragDropActive = function() {
                return !!this.listModel.dragState
            }, e.prototype.isItemBeingDragged = function(e) {
                var t = this.listModel.dragState;
                return !(!t || t.firstItemId !== e)
            }, e.prototype.getDraggedItemId = function() {
                var e = this.listModel.dragState;
                return e && e.firstItemId
            }, e.prototype.getRawDragState = function() {
                return this.listModel.dragState
            }, e.prototype.initStateStack = function() {
                this.stateStack = new g.default, this.stateStack.addState(this.getUndoRedoState())
            }, e.prototype.getUndoRedoState = function() {
                return {
                    randomSeed: this.getRandomSeed(),
                    layoutModel: this.layoutModel,
                    settingsViewModel: this.settingsViewModel,
                    graph: this.grapher ? this.grapher.getUndoRedoState() : void 0,
                    expressions: C.getUndoRedoState(this.listModel),
                    wasCompleteSetState: this.isCurrentlyDoingSetState
                }
            }, e.prototype.getState = function(e) {
                var t = {
                    stripDefaults: !0
                };
                e && e.hasOwnProperty("stripDefaults") && (t.stripDefaults = !!e.stripDefaults);
                var n = {
                    version: v.currentVersion,
                    randomSeed: this.getRandomSeed(),
                    graph: this.grapher ? this.grapher.getState(t) : this.getBlankState().graph,
                    expressions: C.getState(this.listModel, t)
                };
                return e && e.avoidBackMigration ? f.default(n) : v.migrateToPersisted(f.default(n))
            }, e.prototype.getBlankState = function() {
                return this.graphSettings.config.clearIntoDegreeMode ? r.__assign({}, B.default, {
                    graph: r.__assign({}, B.default.graph, {
                        degreeMode: !0
                    })
                }) : B.default
            }, e.prototype.externalSetState = function(e, t) {
                this._clearPendingImageUploads(), t || (t = {}), e || (e = this.getBlankState()), "string" == typeof e && (e = JSON.parse(e)), e && (e = v.migrateToLatest(e));
                var n = this.layoutModel;
                this.setState(e, t), this.layoutModel = r.__assign({}, O.defaultLayoutModel(this.graphSettings.config), {
                    keypadMinimized: n.keypadMinimized,
                    keypadLayout: n.keypadLayout,
                    keypadFunctionsTab: n.keypadFunctionsTab,
                    keypadFunctionsOpen: n.keypadFunctionsOpen,
                    expressionsVisible: !!this.graphSettings.config.expressions && (this.isListVisible() || !!t.forceExpressionsOpen)
                }), this.settingsViewModel = F.defaultSettingsViewModel(), D.setFocusLocation(this, void 0), this.enqueueEvent("clearUnsavedChanges")
            }, e.prototype.setState = function(e, t) {
                if (this.lastParsableObjects = {}, this.lastViewState = void 0, this.isCurrentlyDoingSetState = !0, "graph" in e && this.grapher && this.grapher.setGrapherState(e.graph), "expressions" in e) {
                    C.setSelected(this.listModel, void 0);
                    var n = C.getLargestIntegerId(e.expressions);
                    n >= this.__nextItemId && (this.__nextItemId = n + 1), C.setListState(this.listModel, e.expressions, t || {})
                }
                e.layoutModel && (this.layoutModel = e.layoutModel), e.settingsViewModel && (this.settingsViewModel = e.settingsViewModel), t && t.allowUndo || this.clearUndoRedoHistory(), this.setRandomSeed(e.randomSeed || G.default())
            }, e.prototype.updateToState = function(e) {
                "graph" in e && this.grapher && this.grapher.setGrapherState(e.graph, {
                    doNotClear: !0
                }), "expressions" in e && C.restoreListState(this.listModel, e.expressions), e.layoutModel && (this.layoutModel = e.layoutModel), e.settingsViewModel && (this.settingsViewModel = e.settingsViewModel)
            }, e.prototype.commitUndoRedoSynchronously = function(e) {
                var t = this.getUndoRedoState();
                K(this.stateStack.getState(), t) || (this.stateStack.addState(t), this.enqueueEvent("change"))
            }, e.prototype.undo = function() {
                if (this.canUndo()) {
                    this.stateStack.undo();
                    var e = this.stateStack.getState();
                    e.wasCompleteSetState ? this.setState(e, {
                        allowUndo: !0
                    }) : this.updateToState(e), this.enqueueEvent("change")
                }
            }, e.prototype.redo = function() {
                if (this.canRedo()) {
                    this.stateStack.redo();
                    var e = this.stateStack.getState();
                    e.wasCompleteSetState ? this.setState(e, {
                        allowUndo: !0
                    }) : this.updateToState(e), this.enqueueEvent("change")
                }
            }, e.prototype.clearUndoRedoHistory = function() {
                this.stateStack.clear()
            }, e.prototype.canUndo = function() {
                return this.stateStack.canUndo()
            }, e.prototype.canRedo = function() {
                return this.stateStack.canRedo()
            }, e.prototype._closeAddExpression = function() {
                this.layoutModel = r.__assign({}, this.layoutModel, {
                    addExpressionOpen: !1
                })
            }, e.prototype.doesDOMHaveSize = function() {
                return this.layoutMeasurements.width > 0 && this.layoutMeasurements.height > 0
            }, e.prototype._getExpListWidth = function() {
                var e;
                if (void 0 !== this.userSpecifiedExpListWidth) e = Math.max(280, Math.min(this.layoutMeasurements.width - 200, this.userSpecifiedExpListWidth));
                else {
                    if (!(e = this.layoutMeasurements.width)) return 356;
                    var t = .2 * e + 160;
                    e = Math.min(500, Math.max(280, t))
                }
                var n = this.layoutMeasurements.width - this.layoutMeasurements.height;
                return Math.abs(n - e) <= 10 ? n : e
            }, e.prototype._setExpListWidth = function(e) {
                this.userSpecifiedExpListWidth !== e && (this.userSpecifiedExpListWidth = e)
            }, e.prototype.getKeypadHeight = function() {
                return this.computeMajorLayout().keypad.height
            }, e.prototype.isKeypadOpen = function() {
                var e = this.layoutModel.keypadMinimized && !this.isNarrow();
                return this.needsFakeKeypad() && !e
            }, e.prototype.isKeypadFunctionsPopoverOpen = function() {
                return !!this.layoutModel.keypadFunctionsOpen
            }, e.prototype.getKeypadLayout = function() {
                return this.layoutModel.keypadLayout
            }, e.prototype.isLetterKeypadOpen = function() {
                var e = this.getKeypadLayout();
                return this.isKeypadOpen() && ("letters" === e || "noQwertyLetters" === e || "capitalLetters" === e)
            }, e.prototype.getKeypadFunctionsTab = function() {
                return this.layoutModel.keypadFunctionsTab
            }, e.prototype.isFileDraggedOver = function() {
                return this.layoutModel.isFileDraggedOver
            }, e.prototype.computeMajorLayout = function() {
                var e = this.layoutMeasurements.width,
                    t = this.layoutMeasurements.height,
                    n = this.isNarrow(),
                    r = this.isListVisible(),
                    i = this.isKeypadOpen(),
                    o = !this.isGrapherEnabled(),
                    a = !this.isListEnabled(),
                    s = {
                        left: 0,
                        top: 0,
                        width: 0,
                        height: 0
                    },
                    l = {
                        left: 0,
                        top: 0,
                        width: 0,
                        height: 0
                    },
                    c = {
                        left: 0,
                        top: t,
                        width: e,
                        height: 168
                    };
                return a ? (l.width = e, l.height = t) : o ? (s.width = e, s.height = t) : r ? n ? (s.width = e, s.height = Math.round(.58 * t), s.top = t - s.height, l.width = e, l.height = t - s.height) : (s.width = this.getExpListWidth(), s.height = t, l.left = s.width, l.width = e - l.left, l.height = t) : r || (n ? (s.width = e, s.height = Math.round(.58 * t), s.top = t, l.width = e, l.height = t) : (s.width = this.getExpListWidth(), s.height = t, s.left = -s.width, l.width = e, l.height = t)), i && (c.top -= c.height, a || (s.height -= c.height)), {
                    list: s,
                    grapher: l,
                    keypad: c
                }
            }, e.prototype.isNarrow = function() {
                return this.layoutMeasurements.width < 450
            }, e
        }();
        t.default = W
    }), define("lib/aria", ["require", "exports", "browser", "jquery"], function(e, t, n, r) {
        "use strict";

        function i(e) {
            s.push(e)
        }

        function o(e) {
            if (void 0 !== e && i(e), void 0 !== a && s.length > 0) {
                var t = s.join(" ").replace(/ +(?= )/g, "");
                a.attr("aria-relevant", l === t && n.IS_APPLE ? "all" : "additions text"), a.empty().text(t), l = t
            }
            s.length = 0
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var a, s = [],
            l = "";
        t.queue = i, t.alert = o, r(document).ready(function() {
            var e = ".dcg-aria-alert";
            0 === r(e).length && r("body").append("<p aria-live='assertive' aria-atomic='true' class='dcg-aria-alert'></p>"), a = r(e)
        })
    }), define("main/instancehotkeys", ["require", "exports", "keys", "lib/aria", "jquery", "graphing-calc/models/expression"], function(e, t, n, r, i, o) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var a = function() {
            function e(e) {
                this.controller = e
            }
            return e.prototype.handleKeydown = function(e) {
                var t = this;
                if (n.isUndo(e)) e.stopPropagation(), e.preventDefault(), this.controller.hasVisibleAndUndoableToast() ? this.controller.toastUndo() : this.controller.dispatch({
                    type: "undo"
                });
                else if (n.isRedo(e)) e.stopPropagation(), e.preventDefault(), this.controller.dispatch({
                    type: "redo"
                });
                else if (e.ctrlKey && (e.altKey || e.metaKey) && !e.shiftKey) {
                    if ("E" === n.lookupChar(e)) {
                        e.preventDefault(), e.stopPropagation(), this.controller.getSelectedItem() || this.controller.dispatch({
                            type: "set-selected-index",
                            index: 0
                        });
                        var a = this.controller.getSelectedItem();
                        a ? (r.alert(this.controller.t("Expression list")), this.controller.dispatch({
                            type: "move-focus-to-item",
                            id: a.id
                        })) : r.alert(this.controller.t("Unable to focus expression list"))
                    } else if ("X" === n.lookupChar(e)) e.preventDefault(), e.stopPropagation(), this.controller.canUserAddExpressions() ? (r.alert(this.controller.t("Add expression")), this.controller.dispatch({
                        type: "new-expression"
                    })) : r.alert(this.controller.t("Unable to add expression"));
                    else if ("O" === n.lookupChar(e)) e.preventDefault(), e.stopPropagation(), this.controller.canUserAddExpressions() && this.controller.areNotesEnabled() ? (r.alert(this.controller.t("Add note")), this.controller.dispatch({
                        type: "new-text"
                    })) : r.alert(this.controller.t("Unable to add note"));
                    else if ("F" === n.lookupChar(e)) e.preventDefault(), e.stopPropagation(), this.controller.canUserAddExpressions() && this.controller.areFoldersEnabled() ? (r.alert(this.controller.t("Add folder")), this.controller.dispatch({
                        type: "new-folder"
                    })) : r.alert(this.controller.t("Unable to add folder"));
                    else if ("I" === n.lookupChar(e)) e.preventDefault(), e.stopPropagation(), this.controller.canUserAddExpressions() && this.controller.areImagesEnabled() ? (r.alert(this.controller.t("Add image")), this.controller.dispatch({
                        type: "toggle-add-expression",
                        focusOnOpen: !1
                    }), this.controller.find$(".dcg-action-newimage input[type=file]").click()) : r.alert(this.controller.t("Unable to add image"));
                    else if ("T" === n.lookupChar(e)) e.preventDefault(), e.stopPropagation(), this.controller.canUserAddExpressions() ? (r.alert(this.controller.t("Add table")), this.controller.dispatch({
                        type: "new-table"
                    })) : r.alert(this.controller.t("Unable to add table"));
                    else if ("G" === n.lookupChar(e)) e.preventDefault(), e.stopPropagation(), this.controller.dispatch({
                        type: "toggle-graph-settings",
                        focusOnOpen: !0
                    });
                    else if ("P" === n.lookupChar(e)) {
                        e.preventDefault(), e.stopPropagation();
                        var s = this.controller.find$(".dcg-tabbable-point").filter("[tabindex=0]");
                        0 === s.length && (s = this.controller.find$(".dcg-editable-label-border").find('input, textarea, [role="textbox"]')), this.focusElement(s.first(), this.controller.t("No interactive points on screen"))
                    } else if ("Z" === n.lookupChar(e)) {
                        var l = this.controller.getSelectedItem();
                        l && l.id && this.controller.dispatch({
                            type: "expression-zoom-fit",
                            id: l.id
                        })
                    } else if ("D" === n.lookupChar(e) && this.controller.canUserAddExpressions()) {
                        e.preventDefault(), e.stopPropagation();
                        var c = !this.controller.isInEditListMode();
                        this.controller.dispatch({
                            type: "set-edit-list-mode",
                            isEditListMode: c,
                            focusExpressionList: !0
                        })
                    }
                } else if ((e.altKey || e.metaKey) && !e.ctrlKey && e.shiftKey && "F" === n.lookupChar(e) && this.controller.isDecimalToFractionEnabled()) {
                    var u = this.controller.getSelectedItem();
                    u && "expression" === u.type && (e.preventDefault(), e.stopPropagation(), this.controller.dispatch({
                        type: "toggle-fraction-evaluation",
                        id: u.id
                    }), this.controller.runAfterDispatch(function() {
                        o.shouldEvaluationDisplayAsFraction(u) ? r.alert(t.controller.t("Show as Fraction")) : r.alert(t.controller.t("Show as Decimal"))
                    }))
                } else e.altKey || e.ctrlKey || e.metaKey || e.shiftKey || (n.lookup(e) === n.BACKSPACE ? document.activeElement && i(document.activeElement).is('input, textarea, [role="textbox"]') || e.preventDefault() : n.lookup(e) === n.ESCAPE && this.controller.isInEditListMode() && 0 === this.controller.find$(".dcg-options-menu").length && (e.preventDefault(), e.stopPropagation(), this.controller.dispatch({
                    type: "set-edit-list-mode",
                    isEditListMode: !1,
                    focusExpressionList: !0
                })))
            }, e.prototype.focusElement = function(e, t) {
                e.length ? e.focus() : t && r.alert(t)
            }, e
        }();
        t.default = a
    }), define("lib/defocus-mobile", ["require", "exports", "jquery", "touchtracking"], function(e, t, n, r) {
        "use strict";

        function i() {
            if (document.activeElement) {
                var e = n(document.activeElement);
                r.elIsFocusable(e) && n("<input />").prependTo("body").focus().attr({
                    readonly: "readonly",
                    disabled: "true"
                }).blur().remove()
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = i
    }), define("ipad.scrollfix", ["require", "jquery"], function(e) {
        var t = e("jquery"),
            n = !1,
            r = function() {
                i(document), n = !0
            },
            i = function(e) {
                n || t(e).bind("touchstart", function(e) {
                    var n = t(e.target),
                        r = 0,
                        i = null;
                    if (!n.closest("[disablescroll]").length)
                        for (; 0 === r && n.length && void 0 !== n[0].tagName;) {
                            var o = n.css("overflow"),
                                a = n.css("overflow-y");
                            if ("hidden" !== o && "visible" !== o && "hidden" !== a && "hidden" !== a) {
                                var s = n.scrollTop();
                                0 !== s && (r = 2), n.scrollTop(s + 1), n.scrollTop() !== s && (r |= 1, n.scrollTop(s))
                            }
                            n = n.parent()
                        }
                    if (0 !== r) {
                        i = [];
                        for (var l = e.originalEvent.touches, c = 0; c < l.length; c++) {
                            var u = {};
                            for (var p in l[c]) l[c].hasOwnProperty(p) && (u[p] = l[c][p]);
                            i.push(u)
                        }
                    }
                    t(document).on("touchmove.scrollfix", function(e) {
                        if (i) {
                            var t = i[0],
                                n = e.originalEvent.touches[0],
                                o = n.screenY - t.screenY;
                            o > 0 && !(2 & r) ? r = 0 : o < 0 && !(1 & r) && (r = 0), o && (i = null)
                        }
                        0 === r && e.preventDefault()
                    }), t(document).on("touchend.scrollfix", function() {
                        t(document).off(".scrollfix")
                    })
                })
            };
        return {
            limitScrollOnElement: i,
            limitScrollOnDocument: r
        }
    }), define("expressions/abstract-item-view", ["require", "exports", "tslib", "dcgview", "jquery.handleevent"], function(e, t, n, r) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var i = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.init = function() {
                this.controller = this.props.controller(), this.model = this.props.model(), this.id = this.model.id, this._isFirstRender = !0, this._isDragCopy = this.props.isDragCopy()
            }, t.prototype.onItemViewMounted = function() {
                this._isDragCopy || (this.model.dcgView = this), this._isFirstRender = !1
            }, t.prototype.onItemViewUnmounted = function() {
                this._isDragCopy || (this.model.dcgView = void 0)
            }, t.prototype.isFirstRender = function() {
                return this._isFirstRender
            }, t.prototype.onMouseSelect = function(e) {
                if (this.controller.isInEditListMode()) return void this.exitEditListMode();
                "dcg-tap" === e.type && "mouse" === e.device || "dcg-tapstart" === e.type && "touch" === e.device || e.wasHandled() || (e.handle(), this.controller.dispatch({
                    type: "set-selected-id",
                    id: this.id
                }))
            }, t.prototype.onDelete = function() {
                this.controller.dispatch({
                    type: "delete-item-and-animate-out",
                    id: this.id,
                    setFocusAfterDelete: !this.controller.isInEditListMode()
                })
            }, t.prototype.onDragPending = function(e) {
                this.props.onDragPending(e)
            }, t.prototype.exitEditListMode = function() {
                this.controller.dispatch({
                    type: "set-edit-list-mode",
                    isEditListMode: !1,
                    focusExpressionList: !0
                })
            }, t
        }(r.Class);
        t.default = i
    }), define("loadcss!lib/tooltip", function() {}), define("lib/tooltip", ["require", "exports", "tslib", "keys", "dcgview", "jquery", "underscore", "loadcss!./tooltip"], function(e, t, n, r, i, o, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var s = function(e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return n.__extends(t, e), t.prototype.template = function() {
                    var e = this;
                    return i.createElement("div", {
                        class: i.const("dcg-tooltip-positioning-container"),
                        style: function() {
                            return {
                                top: e.props.hitAreaRect().top + "px",
                                left: e.props.hitAreaRect().left + "px",
                                width: e.props.hitAreaRect().width + "px",
                                height: e.props.hitAreaRect().height + "px"
                            }
                        }
                    }, i.createElement("div", {
                        class: i.const("dcg-tooltip-message-container"),
                        style: this.bindFn(this.getMessageStyle)
                    }, i.createElement("div", {
                        class: i.const("dcg-tooltip-message"),
                        style: function() {
                            return {
                                background: e.getBackgroundColor(),
                                cursor: e.props.isStickyAndNotStuck() ? "pointer" : "default"
                            }
                        }
                    }, this.props.tooltip)), i.createElement("div", {
                        class: i.const("dcg-tooltip-arrow"),
                        style: this.bindFn(this.getArrowStyle)
                    }))
                }, t.prototype.getArrowStyle = function() {
                    var e = this.props.gravity();
                    switch (e) {
                        case "s":
                        case "sw":
                        case "se":
                            return {
                                top: "100%", left: "50%", border: "5px solid transparent", "border-color": "transparent transparent " + this.getBackgroundColor() + " transparent", "margin-top": "-5px", "margin-left": "-5px"
                            };
                        case "n":
                        case "nw":
                        case "ne":
                            return {
                                bottom: "100%", left: "50%", border: "5px solid transparent", "border-color": this.getBackgroundColor() + " transparent transparent transparent", "margin-bottom": "-5px", "margin-left": "-5px"
                            };
                        case "e":
                            return {
                                top: "50%", left: "100%", border: "5px solid transparent", "border-color": "transparent " + this.getBackgroundColor() + " transparent transparent", "margin-left": "-5px", "margin-top": "-5px"
                            };
                        case "w":
                            return {
                                top: "50%", right: "100%", border: "5px solid transparent", "border-color": "transparent transparent transparent " + this.getBackgroundColor(), "margin-right": "-5px", "margin-top": "-5px"
                            };
                        default:
                            return e
                    }
                }, t.prototype.getBackgroundColor = function() {
                    return this.props.isStickyAndNotStuck() ? "#666" : "#000"
                }, t.prototype.getMessageStyle = function() {
                    var e = this.props.hitAreaRect(),
                        t = this.props.gravity(),
                        n = this.props.offset().left || 0;
                    switch (t) {
                        case "s":
                            return {
                                top: "100%", transform: "translate(-50%, 0)", left: .5 * e.width + n + "px", "margin-top": "5px", "text-align": "center"
                            };
                        case "sw":
                            return {
                                top: "100%", right: -n + "px", "margin-top": "5px", "text-align": "right"
                            };
                        case "se":
                            return {
                                top: "100%", left: n + "px", "margin-top": "5px", "text-align": "left"
                            };
                        case "n":
                            return {
                                bottom: "100%", transform: "translate(-50%, 0)", left: .5 * e.width + n + "px", "margin-bottom": "5px", "text-align": "center"
                            };
                        case "nw":
                            return {
                                bottom: "100%", right: -n + "px", "margin-bottom": "5px", "text-align": "right"
                            };
                        case "ne":
                            return {
                                bottom: "100%", left: n + "px", "margin-bottom": "5px", "text-align": "left"
                            };
                        case "e":
                            return {
                                transform: "translate(0, -50%)", left: "100%", top: .5 * e.height + "px", "margin-left": 5 + n + "px", "text-align": "left"
                            };
                        case "w":
                            return {
                                transform: "translate(0, -50%)", right: "100%", top: .5 * e.height + "px", "margin-right": 5 - n + "px", "text-align": "right"
                            };
                        default:
                            return t
                    }
                }, t
            }(i.Class),
            l = function(e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return n.__extends(t, e), t.prototype.init = function() {
                    this.uuid = a.uniqueId(), this.isMounted = !0
                }, t.prototype.template = function() {
                    var e = this;
                    return i.createElement("div", {
                        class: i.const("dcg-tooltip-hit-area-container"),
                        handleevent: i.const("true"),
                        didMount: function(t) {
                            e.hitAreaNode = t, e.setupEventListeners(e.hitAreaNode)
                        },
                        onTap: function() {
                            if (e.isStuck) return e.clearTimeouts(), void e.hideTooltip();
                            e.isSticky() ? (e.showTooltip(), e.stickTooltip()) : e.hideTooltip()
                        }
                    }, this.children)
                }, t.prototype.didUpdate = function() {
                    this.updateTooltip()
                }, t.prototype.updateTooltip = function() {
                    if (this.wrapperRef) {
                        var e = this.hitAreaNode.getBoundingClientRect(),
                            t = this.wrapperRef.elt.getBoundingClientRect(),
                            n = this.wrapperRef,
                            r = n.originalTop,
                            i = n.originalLeft,
                            o = e.top - t.top,
                            a = e.left - t.left;
                        Math.abs(o - r) > 3 || Math.abs(a - i) > 3 ? this.hideTooltip() : this.wrapperRef.view.update()
                    }
                }, t.prototype.setupEventListeners = function(e) {
                    var t = this;
                    o(e).on("tipsyshow", function(n) {
                        n.target === e && (t.props.disabled && t.props.disabled() || (t.clearTimeouts(), t.showTooltipTimeout = setTimeout(t.bindFn(t.showTooltip), 500)))
                    }).on("tipsyhide", function(n) {
                        n.target !== e || t.isStuck || (t.clearTimeouts(), t.hideTooltipTimeout = setTimeout(t.bindFn(t.hideTooltip), 150))
                    })
                }, t.prototype.willUnmount = function() {
                    this.clearTimeouts(), this.isMounted = !1, this.hideTooltip()
                }, t.prototype.stickTooltip = function() {
                    var e = this;
                    this.isMounted && this.wrapperRef && (this.isStuck || (o(document).on("mousedown.dcg-tooltip-" + this.uuid + " touchstart.dcg-tooltip-" + this.uuid + " pointerdown.dcg-tooltip-" + this.uuid, function(t) {
                        e.wrapperRef && (o(t.target).closest(e.hitAreaNode).length || o(t.target).closest(e.wrapperRef.elt).length || e.hideTooltip())
                    }), this.isStuck = !0, this.updateTooltip()))
                }, t.prototype.clearTimeouts = function() {
                    clearTimeout(this.showTooltipTimeout), clearTimeout(this.hideTooltipTimeout)
                }, t.prototype.showTooltip = function() {
                    var e = this;
                    if (this.isMounted && !this.wrapperRef) {
                        var t = this.hitAreaNode.getBoundingClientRect(),
                            n = document.createElement("div");
                        n.className = "dcg-tooltip-mount-pt";
                        o(this.hitAreaNode).closest(".dcg-tap-container")[0].appendChild(n);
                        var a = n.getBoundingClientRect(),
                            l = t.left - a.left,
                            c = t.top - a.top,
                            u = {
                                tooltip: this.props.tooltip,
                                isStickyAndNotStuck: function() {
                                    return e.isSticky() && !e.isStuck
                                },
                                offset: function() {
                                    return e.props.offset ? e.props.offset() : {}
                                },
                                gravity: function() {
                                    return e.props.gravity ? e.props.gravity() : "s"
                                },
                                hitAreaRect: function() {
                                    return {
                                        top: c || 0,
                                        left: l || 0,
                                        width: t.width || 0,
                                        height: t.height || 0
                                    }
                                }
                            };
                        this.setupEventListeners(n), o(n).on("dcg-tap", function() {
                            e.isSticky() && e.stickTooltip()
                        });
                        var p = i.mountToNode(s, n, u);
                        o(document).on("keydown.dcg-tooltip-" + this.uuid, function(t) {
                            r.lookup(t) === r.ESCAPE && e.hideTooltip()
                        });
                        var d = function() {
                            return e.updateTooltip()
                        };
                        window.addEventListener("scroll", d, !0), this.wrapperRef = {
                            elt: n,
                            view: p,
                            originalLeft: l,
                            originalTop: c,
                            onScroll: d
                        }
                    }
                }, t.prototype.hideTooltip = function() {
                    this.clearTimeouts(), this.wrapperRef && (this.isStuck = !1, o(document).off(".dcg-tooltip-" + this.uuid), window.removeEventListener("scroll", this.wrapperRef.onScroll, !0), i.unmountFromNode(this.wrapperRef.elt),
                        this.wrapperRef.elt.parentNode && this.wrapperRef.elt.parentNode.removeChild(this.wrapperRef.elt), this.wrapperRef = void 0)
                }, t.prototype.isSticky = function() {
                    return !!this.props.sticky && this.props.sticky()
                }, t
            }(i.Class);
        t.Tooltip = l
    }), define("loadcss!dcgview-helpers/tooltipped-error", function() {}), define("dcgview-helpers/tooltipped-error", ["require", "exports", "tslib", "dcgview", "lib/tooltip", "loadcss!./tooltipped-error"], function(e, t, n, r, i) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var o = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.template = function() {
                var e = this;
                return r.createElement(i.Tooltip, {
                    tooltip: this.props.error,
                    sticky: this.const(!0),
                    gravity: this.props.gravity
                }, r.createElement("div", {
                    class: function() {
                        return {
                            "dcg-tooltipped-error": !0,
                            "dcg-white": e.props.isWhite && e.props.isWhite(),
                            "dcg-small": e.props.size && "small" === e.props.size()
                        }
                    }
                }, r.createElement("i", {
                    class: r.const("dcg-icon-error")
                })))
            }, t
        }(r.Class);
        t.TooltippedError = o
    }), define("loadcss!expressions/circular-icon-view", function() {}), define("expressions/circular-icon-view", ["require", "exports", "tslib", "dcgview", "loadcss!./circular-icon-view"], function(e, t, n, r) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var i = r.Components.If,
            o = function(e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return n.__extends(t, e), t.prototype.template = function() {
                    var e = this;
                    return r.createElement("span", {
                        class: function() {
                            var t;
                            return t = {
                                "dcg-do-not-blur": !0,
                                "dcg-circular-icon": !0,
                                "dcg-thick-outline": e.isThickOutline(),
                                "dcg-white-icon": !!e.props.whiteIcon && e.props.whiteIcon(),
                                "dcg-hidden": e.isHidden(),
                                "dcg-semi-transparent": e.props.semiTransparent && e.props.semiTransparent(),
                                "dcg-colored-icon": !e.isThickOutline() && !e.isHidden() && !e.hasBackgroundImage() && "loading" !== e.props.iconType(),
                                "dcg-has-background-image": e.hasBackgroundImage()
                            }, t[e.iconModifier()] = e.iconModifier().length > 0, t
                        },
                        style: function() {
                            return {
                                background: e.getBackgroundColor()
                            }
                        }
                    }, r.createElement(i, {
                        predicate: this.bindFn(this.hasBackgroundImage)
                    }, function() {
                        return r.createElement("span", {
                            class: r.const("dcg-background-image"),
                            style: function() {
                                return {
                                    "background-image": e.props.backgroundImage && e.props.backgroundImage(),
                                    opacity: e.props.backgroundOpacity && e.props.backgroundOpacity()
                                }
                            }
                        })
                    }), r.createElement(i, {
                        predicate: function() {
                            return !!e.backgroundIcon()
                        }
                    }, function() {
                        return r.createElement("i", {
                            class: function() {
                                var t;
                                return t = {}, t[e.backgroundIcon()] = !0, t["dcg-layered-icon"] = !0, t
                            },
                            style: function() {
                                return {
                                    opacity: e.backgroundOpacity()
                                }
                            }
                        })
                    }), r.createElement(i, {
                        predicate: function() {
                            return !!e.primaryIcon()
                        }
                    }, function() {
                        return r.createElement("i", {
                            class: function() {
                                var t;
                                return t = {}, t[e.primaryIcon()] = !0, t["dcg-layered-icon"] = !0, t
                            },
                            style: function() {
                                return {
                                    color: e.props.foregroundColor && e.props.foregroundColor()
                                }
                            }
                        })
                    }), r.createElement(i, {
                        predicate: function() {
                            return "loading" === e.props.iconType()
                        }
                    }, function() {
                        return r.createElement("span", {
                            class: r.const("dcg-spinner")
                        })
                    }))
                }, t.prototype.iconModifier = function() {
                    if (!this.props.iconModifier) return "";
                    switch (this.props.iconModifier()) {
                        case "medium":
                            return "dcg-modifier-size-medium";
                        case "large":
                            return "dcg-modifier-size-large";
                        case "small":
                            return "dcg-modifier-size-small";
                        case "rotated":
                            return "dcg-modifier-rotated";
                        case "none":
                            return ""
                    }
                }, t.prototype.getBackgroundColor = function() {
                    if (!this.isHidden() && this.props.backgroundColor) return this.props.backgroundColor()
                }, t.prototype.isHidden = function() {
                    return "hidden" === this.props.iconType()
                }, t.prototype.isThickOutline = function() {
                    var e = this.props.iconType();
                    return "folder" === e || "pause" === e || "play" === e || "fraction" === e
                }, t.prototype.hasBackgroundImage = function() {
                    return !!this.props.backgroundImage && !this.isHidden() && !!this.props.backgroundImage()
                }, t.prototype.primaryIcon = function() {
                    var e = this.props.iconType();
                    switch (e) {
                        case "folder":
                            return "dcg-icon-folder";
                        case "pause":
                            return "dcg-icon-pause";
                        case "play":
                            return "dcg-icon-play";
                        case "polygon-dashed":
                        case "polygon-dashed-filled":
                            return "dcg-icon-polygon-dashed";
                        case "polygon-dotted":
                        case "polygon-dotted-filled":
                            return "dcg-icon-polygon-dotted";
                        case "polygon-default":
                        case "polygon-default-filled":
                            return "dcg-icon-polygon-solid";
                        case "graph-dashed":
                        case "parametric-dashed-filled":
                            return "dcg-icon-parametric-dashed";
                        case "graph-dotted":
                        case "parametric-dotted-filled":
                            return "dcg-icon-parametric-dotted";
                        case "graph-default":
                        case "parametric-default-filled":
                            return "dcg-icon-parametric-solid";
                        case "movable-vertical":
                            return "dcg-icon-move-vertical";
                        case "movable-both":
                            return "dcg-icon-move";
                        case "movable-horizontal":
                            return "dcg-icon-move-horizontal";
                        case "point-open":
                            return "dcg-icon-open";
                        case "point-cross":
                            return "dcg-icon-cross";
                        case "point-default":
                            return "dcg-icon-point";
                        case "table-points":
                        case "table-points-and-lines":
                            return "dcg-icon-points";
                        case "table-lines":
                            return "dcg-icon-lines-solid";
                        case "shaded-inequality":
                        case "inequality":
                            return "dcg-icon-shaded-inequality-dash";
                        case "check":
                            return "dcg-icon-check";
                        case "none":
                        case "background":
                        case "hidden":
                        case "polygon-none-filled":
                        case "parametric-none-filled":
                        case "loading":
                            return "";
                        case "fraction":
                            return "dcg-icon-fraction";
                        case "boxplot":
                            return "dcg-icon-boxplot";
                        case "dotplot-cross":
                            return "dcg-icon-dotplot-cross";
                        case "dotplot-default":
                            return "dcg-icon-dotplot-default";
                        case "dotplot-open":
                            return "dcg-icon-dotplot-open";
                        case "histogram":
                            return "dcg-icon-histogram";
                        case "unfilled-distribution":
                        case "filled-distribution":
                            return "dcg-icon-distribution";
                        default:
                            return e
                    }
                }, t.prototype.backgroundOpacity = function() {
                    var e = this.backgroundIcon();
                    return "dcg-icon-polygon-filled" === e || "dcg-icon-parametric-filled" === e || "dcg-icon-shaded-inequality-shade2" === e || "dcg-icon-distribution-fill" === e || "dcg-icon-histogram-fill" === e ? .5 : 1
                }, t.prototype.backgroundIcon = function() {
                    var e = this.props.iconType();
                    return "filled-distribution" === e ? "dcg-icon-distribution-fill" : "histogram" === e ? "dcg-icon-histogram-fill" : "polygon-dashed-filled" === e || "polygon-dotted-filled" === e || "polygon-default-filled" === e || "polygon-none-filled" === e ? "dcg-icon-polygon-filled" : "parametric-dashed-filled" === e || "parametric-dotted-filled" === e || "parametric-default-filled" === e || "parametric-none-filled" === e ? "dcg-icon-parametric-filled" : "table-points-and-lines" === e ? "dcg-icon-lines-solid" : "shaded-inequality" === e ? "dcg-icon-shaded-inequality-shade2" : ""
                }, t
            }(r.Class);
        t.CircularIconView = o
    }), define("main/manage-focus-helper", ["require", "exports", "underscore"], function(e, t, n) {
        "use strict";

        function r(e) {
            return {
                shouldBeFocused: function() {
                    return i(e)
                },
                onFocusedChanged: function(t) {
                    o(e, t)
                }
            }
        }

        function i(e) {
            var t = e.controller.getFocusLocation();
            return t && n.isEqual(t, e.location)
        }

        function o(e, t) {
            t ? e.controller.dispatch({
                type: "set-focus-location",
                location: e.location
            }) : e.controller.dispatch({
                type: "blur-focus-location",
                location: e.location
            })
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.manageFocusHelper = r, t.defaultShouldBeFocused = i, t.defaultOnFocusChanged = o
    }), define("expressions/play-pause-icon-view", ["require", "exports", "tslib", "dcgview", "lib/aria", "./circular-icon-view", "main/manage-focus-helper", "jquery.handleevent"], function(e, t, n, r, i, o, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var s = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.template = function() {
                var e = this;
                return r.createElement("div", {
                    class: r.const("dcg-circular-icon-container"),
                    "aria-label": this.bindFn(this.getAriaLabel),
                    role: r.const("button"),
                    tabindex: r.const("0"),
                    onTap: this.bindFn(this.toggleSliderIsPlaying),
                    manageFocus: this.const(a.manageFocusHelper({
                        controller: this.props.controller(),
                        location: {
                            type: "slider-icon",
                            id: this.props.model().id
                        }
                    }))
                }, r.createElement(o.CircularIconView, {
                    iconType: function() {
                        return e.props.model().slider.isPlaying ? "pause" : "play"
                    },
                    whiteIcon: function() {
                        return !e.props.controller().isInEditListMode() && e.props.controller().isItemSelected(e.props.model().id) || e.props.controller().isItemBeingDragged(e.props.model().id)
                    }
                }))
            }, t.prototype.getAriaLabel = function() {
                if (!this.props.model().sliderExists) return "";
                var e = this.props.model().dependent;
                return e ? this.props.model().slider.isPlaying ? this.props.controller().t("Pause __variable__ Animation", {
                    variable: e
                }) : this.props.controller().t("Play __variable__ Animation", {
                    variable: e
                }) : ""
            }, t.prototype.toggleSliderIsPlaying = function() {
                var e = this.props.model();
                if (e.sliderExists) {
                    this.props.controller().dispatch({
                        type: "set-slider-isplaying",
                        id: e.id,
                        isPlaying: !e.slider.isPlaying
                    });
                    var t = "",
                        n = e.dependent;
                    t = e.slider.isPlaying ? this.props.controller().t("__variable__ playing", {
                        variable: n
                    }) : this.props.controller().t("__variable__ paused", {
                        variable: n
                    }), i.alert(t)
                }
            }, t
        }(r.Class);
        t.PlayPauseIconView = s
    }), define("expressions/expression-icon-view", ["require", "exports", "tslib", "dcgview", "graphing/dragmode", "expressions/styles", "math/comparators", "math/expression-types", "graphing-calc/models/expression", "../dcgview-helpers/tooltipped-error", "./play-pause-icon-view", "./circular-icon-view", "jquery.handleevent"], function(e, t, n, r, i, o, a, s, l, c, u, p) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var d = r.Components.SwitchUnion,
            h = function(e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return n.__extends(t, e), t.prototype.init = function() {
                    this.model = this.props.model(), this.controller = this.props.controller()
                }, t.prototype.template = function() {
                    var e = this;
                    return r.createElement("div", {
                        class: r.const("dcg-expression-icon-container")
                    }, d(this.bindFn(this.getIconMode), {
                        error: function() {
                            return r.createElement(c.TooltippedError, {
                                error: function() {
                                    return e.controller.unpack(e.model.error)
                                },
                                isWhite: function() {
                                    return e.controller.isItemSelected(e.model.id) || e.controller.isItemBeingDragged(e.model.id)
                                },
                                gravity: e.const("se")
                            })
                        },
                        none: function() {
                            return r.createElement("span", null)
                        },
                        slider: function() {
                            return r.createElement(u.PlayPauseIconView, {
                                controller: e.props.controller,
                                model: e.props.model
                            })
                        },
                        icon: function() {
                            return r.createElement("div", {
                                class: r.const("dcg-circular-icon-container"),
                                role: r.const("button"),
                                tabindex: r.const("0"),
                                "aria-label": e.bindFn(e.getIconAriaLabel),
                                onTap: function(t) {
                                    if (!t.wasHandled("dragdrop") && !t.wasLongheld()) return e.myOptionsOpen() ? e.toggleOptions(t) : e.controller.isInEditListMode() && !e.isFraction() ? e.toggleOptions(t) : e.isFraction() ? e.onToggleFractionDisplay() : void e.toggleGraphShown()
                                },
                                didMount: function(t) {
                                    return e.rootElt = t
                                },
                                onLongHold: function(t) {
                                    t.handle("dcg-longhold"), t.handle("dcg-tap"), e.isFraction() || e.toggleOptions(t)
                                }
                            }, r.createElement(p.CircularIconView, {
                                iconType: e.bindFn(e.getIconType),
                                backgroundColor: e.bindFn(e.getBackgroundColor),
                                whiteIcon: e.bindFn(e.isSelected),
                                foregroundColor: e.bindFn(e.getForegroundColor),
                                iconModifier: e.bindFn(e.getIconModifier)
                            }))
                        }
                    }))
                }, t.prototype.myOptionsOpen = function() {
                    var e = this.controller.getOpenItemMenu();
                    return !!e && e.model === this.model
                }, t.prototype.toggleOptions = function(e) {
                    this.controller.dispatch({
                        type: "toggle-item-settings-menu",
                        menu: {
                            type: "expression",
                            model: this.model,
                            icon: this.rootElt,
                            focusFirstOption: "keyboard" === e.device
                        }
                    })
                }, t.prototype.isSelected = function() {
                    return this.controller.isItemSelected(this.model.id) || this.controller.isItemBeingDragged(this.model.id)
                }, t.prototype.isFraction = function() {
                    return this.controller.canDisplayEvaluationForItemAsFraction(this.model.id)
                }, t.prototype.getIconMode = function() {
                    return this.hasError() ? "error" : this.controller.getGraphSettings().config.graphpaper ? this.model.isGraphable && !this.model.loading ? "icon" : this.hasSlider() ? "slider" : this.isFraction() ? "icon" : "none" : "none"
                }, t.prototype.toggleGraphShown = function() {
                    this.controller.dispatch({
                        type: "toggle-item-hidden",
                        id: this.model.id
                    })
                }, t.prototype.hasError = function() {
                    return !!this.model.error && !l.isEmpty(this.model)
                }, t.prototype.hasSlider = function() {
                    return !!this.model.sliderExists
                }, t.prototype.getDisplayProps = function() {
                    var e = this.model,
                        t = e.points,
                        n = e.lines,
                        r = e.fill;
                    return s.getReconciledExpressionProps(this.model.formula.expression_type, {
                        points: t,
                        lines: n,
                        fill: r
                    })
                }, t.prototype.getBackgroundColor = function() {
                    if (!this.isFraction()) return this.model.color;
                    var e = this.isSelected();
                    return this.controller.shouldEvaluationForItemDisplayAsFraction(this.model.id) ? e ? "#fff" : "#000" : ""
                }, t.prototype.getForegroundColor = function() {
                    if (!this.isFraction()) return "";
                    var e = this.isSelected();
                    return e !== this.controller.shouldEvaluationForItemDisplayAsFraction(this.model.id) ? "#fff" : e ? "#6399cb" : "#000"
                }, t.prototype.onToggleFractionDisplay = function() {
                    this.controller.dispatch({
                        type: "toggle-fraction-evaluation",
                        id: this.model.id
                    })
                }, t.prototype.getIconModifier = function() {
                    return l.isBoxPlot(this.model) && "y" === l.getVizPropLatex(this.model, "alignedAxis") ? "rotated" : "none"
                }, t.prototype.getIconType = function() {
                    if (this.isFraction()) return "fraction";
                    if (!this.model.shouldGraph) return "hidden";
                    if (this.controller.isInEditListMode()) return "none";
                    var e = this.model.pointStyle,
                        t = this.model.lineStyle,
                        n = this.getDisplayProps(),
                        r = this.model.formula;
                    if (l.isBoxPlot(this.model)) return "boxplot";
                    if (l.isDotPlot(this.model)) {
                        if ("POINT" === this.model.pointStyle) return "dotplot-default";
                        if ("CROSS" === this.model.pointStyle) return "dotplot-cross";
                        if ("OPEN" === this.model.pointStyle) return "dotplot-open"
                    }
                    if (l.isHistogram(this.model)) return "histogram";
                    if (l.isToplevelDistribution(this.model)) return l.shouldShowCDFFooter(this.model) ? "filled-distribution" : "unfilled-distribution";
                    if (this.model.reconciledDragMode === i.DragMode.X) return "movable-horizontal";
                    if (this.model.reconciledDragMode === i.DragMode.Y) return "movable-vertical";
                    if (this.model.reconciledDragMode === i.DragMode.XY) return "movable-both";
                    if (l.isPointOrPointList(this.model)) return l.isSinglePoint(this.model) ? e === o.PointStyle.OPEN ? "point-open" : e === o.PointStyle.CROSS ? "point-cross" : "point-default" : n.lines && n.points ? "table-points-and-lines" : n.lines ? "table-lines" : "table-points";
                    var s = this.getDisplayProps().fill;
                    if (l.isPolygon(this.model)) return s ? n.lines ? t === o.LineStyle.DASHED ? "polygon-dashed-filled" : t === o.LineStyle.DOTTED ? "polygon-dotted-filled" : "polygon-default-filled" : "polygon-none-filled" : n.lines ? t === o.LineStyle.DASHED ? "polygon-dashed" : t === o.LineStyle.DOTTED ? "polygon-dotted" : "polygon-default" : "none";
                    if (l.isParametric(this.model)) return s ? n.lines ? t === o.LineStyle.DASHED ? "parametric-dashed-filled" : t === o.LineStyle.DOTTED ? "parametric-dotted-filled" : "parametric-default-filled" : "parametric-none-filled" : n.lines ? t === o.LineStyle.DASHED ? "graph-dashed" : t === o.LineStyle.DOTTED ? "graph-dotted" : "graph-default" : "none";
                    var c = r.operator,
                        u = 0 !== a.table[c].direction,
                        p = !1 === a.table[c].inclusive;
                    return r.is_shade_between ? "shaded-inequality" : !p && u ? "shaded-inequality" : p && !u ? "inequality" : p && u ? "shaded-inequality" : t === o.LineStyle.DASHED ? "graph-dashed" : t === o.LineStyle.DOTTED ? "graph-dotted" : "graph-default"
                }, t.prototype.getIconAriaLabel = function() {
                    return this.isFraction() ? l.shouldEvaluationDisplayAsFraction(this.model) ? this.controller.t("Displaying as fraction. Press Enter to display as Decimal") : this.controller.t("Displaying as decimal. Press Enter to display as Fraction") : this.controller.isInEditListMode() ? this.myOptionsOpen() ? this.controller.t("Hide Options") : this.controller.t("Show Options") : this.model.hidden ? this.controller.t("Show Expression") : this.controller.t("Hide Expression")
                }, t
            }(r.Class);
        t.default = h
    }), define("loadcss!expressions/evaluation-view", function() {}), define("expressions/evaluation-view", ["require", "exports", "tslib", "dcgview", "graphing/label", "dcgview-helpers/static-mathquill-view", "loadcss!./evaluation-view"], function(e, t, n, r, i, o) {
        "use strict";

        function a(e, t) {
            return i.numericLabel(e, t)
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var s = r.Components,
            l = s.If,
            c = s.SwitchUnion,
            u = function(e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return n.__extends(t, e), t.prototype.init = function() {
                    this.controller = this.props.controller()
                }, t.prototype.template = function() {
                    var e = this;
                    return r.createElement("div", {
                        class: r.const("dcg-evaluation-container")
                    }, r.createElement("div", {
                        class: function() {
                            return {
                                "dcg-evaluation": !0,
                                "dcg-do-blur": !0,
                                "dcg-hidden": e.props.controller().isInEditListMode()
                            }
                        },
                        handleEvent: r.const("true"),
                        tabindex: function() {
                            return e.props.focusable() ? "0" : "-1"
                        }
                    }, r.createElement("div", {
                        class: r.const("dcg-evaluation-label-container"),
                        onTap: this.bindFn(this.onSelectEvaluation)
                    }, r.createElement(l, {
                        predicate: function() {
                            return !!e.props.dependent()
                        }
                    }, function() {
                        return r.createElement(o.default, {
                            latex: function() {
                                return i.identifierToLatex(e.props.dependent())
                            }
                        }, r.createElement("span", null))
                    }), r.createElement("span", {
                        class: r.const("dcg-equals")
                    }, r.createElement(o.default, {
                        latex: this.const("=")
                    }))), r.createElement("span", {
                        class: r.const("dcg-text-selectable dcg-evaluation-html"),
                        didMount: this.bindFn(this.didMountEvaluation)
                    }, c(function() {
                        return e.getEvaluationType()
                    }, {
                        list: function() {
                            return r.createElement("span", null, function() {
                                return e.controller.t("__count__ element list", {
                                    count: e.props.val().length
                                })
                            })
                        },
                        fraction: function() {
                            return r.createElement(o.default, {
                                latex: function() {
                                    return i.truncatedLatexLabel(e.props.val(), e.getLabelOptions())
                                }
                            })
                        },
                        undefined: function() {
                            return r.createElement("span", null, r.const("undefined"))
                        },
                        scientific: function() {
                            return r.createElement(o.default, {
                                latex: function() {
                                    return e.getNumberLabel().mantissa + "\\times10^{" + e.getNumberLabel().exponent + "}"
                                }
                            })
                        },
                        decimal: function() {
                            return r.createElement(o.default, {
                                latex: function() {
                                    return e.getNumberLabel().value
                                }
                            })
                        }
                    }))), r.createElement("div", {
                        class: r.const("dcg-clear")
                    }))
                }, t.prototype.getNumberLabel = function() {
                    return a(this.props.val(), this.getLabelOptions())
                }, t.prototype.getEvaluationType = function() {
                    var e = this.props.val();
                    return Array.isArray(e) ? "list" : this.getNumberLabel().type
                }, t.prototype.getLabelOptions = function() {
                    return this.props.controller().getEvaluationLabelOptionsForItem(this.props.id())
                }, t.prototype.didMountEvaluation = function(e) {
                    this.evaluationNode = e
                }, t.prototype.onSelectEvaluation = function() {
                    var e = document.createRange();
                    e.selectNodeContents(this.evaluationNode);
                    var t = window.getSelection();
                    t && (t.removeAllRanges(), (t = window.getSelection()) && t.addRange(e))
                }, t
            }(r.Class);
        t.default = u
    }), define("expressions/unresolved_view", ["require", "exports", "tslib", "dcgview"], function(e, t, n, r) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var i = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.template = function() {
                var e = this;
                return this.controller = this.props.controller(), r.createElement("div", {
                    class: r.const("dcg-unresolved")
                }, r.createElement("i", {
                    class: r.const("dcg-icon-error")
                }), r.const(" "), function() {
                    return e.controller.t("This equation contains fine detail that has not been fully resolved.")
                }, r.createElement("a", {
                    href: r.const("http://support.desmos.com/entries/29577773-Unresolved-Detail-In-Plotted-Functions"),
                    target: r.const("_blank")
                }, function() {
                    return e.controller.t("Learn more.")
                }))
            }, t
        }(r.Class);
        t.default = i
    }), define("loadcss!domain", function() {}), define("expressions/domain_view", ["require", "exports", "tslib", "dcgview", "dcgview-helpers/static-mathquill-view", "dcgview-helpers/mathquill-view", "graphing-calc/models/expression", "graphing/label", "bugsnag", "loadcss!domain"], function(e, t, n, r, i, o, a, s, l) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var c = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.init = function() {
                this.controller = this.props.controller(), this.model = this.props.model(), this.id = this.model.id
            }, t.prototype.template = function() {
                var e = this;
                return r.createElement("div", {
                    class: r.const("dcg-domain dcg-do-blur"),
                    handleEvent: r.const("true")
                }, r.createElement("div", {
                    class: r.const("dcg-display-domain dcg-do-blur"),
                    handleEvent: r.const("true")
                }, r.createElement("div", {
                    class: r.const("dcg-editable-mathquill-container")
                }, r.createElement(o.default, {
                    latex: function() {
                        return e.getMinLatex()
                    },
                    placeholder: function() {
                        return s.value(a.getDomainMin(e.model)).string
                    },
                    isFocused: function() {
                        return "min" === e.getFocusedInput()
                    },
                    capExpressionSize: function() {
                        return !!e.controller.getGraphSettings().config.capExpressionSize
                    },
                    selectOnFocus: this.const(!0),
                    config: this.const({}),
                    getAriaLabel: function() {
                        return e.controller.t("domain Minimum: ")
                    },
                    getAriaPostLabel: this.const(""),
                    hasError: function() {
                        return !a.isDomainMinValid(e.model)
                    },
                    onUserPressedKey: function(t, n) {
                        e.handlePressedKey("min", t, n)
                    },
                    onUserChangedLatex: function(t) {
                        return e.dispatchMinLatexIfChanged(t)
                    },
                    onFocusedChanged: function(t) {
                        return e.handleFocusedChanged("min", t)
                    },
                    dataLabelAttributeValue: this.const("domain-min")
                }), r.createElement("span", {
                    class: r.const("dcg-interval-interior")
                }, r.createElement(i.default, {
                    latex: function() {
                        return e.getDomainVariableLatex()
                    }
                }, r.createElement("span", null))), r.createElement(o.default, {
                    latex: function() {
                        return e.getMaxLatex()
                    },
                    placeholder: function() {
                        return s.value(a.getDomainMax(e.model)).string
                    },
                    isFocused: function() {
                        return "max" === e.getFocusedInput()
                    },
                    capExpressionSize: function() {
                        return !!e.controller.getGraphSettings().config.capExpressionSize
                    },
                    selectOnFocus: this.const(!0),
                    config: this.const({}),
                    getAriaLabel: function() {
                        return e.controller.t("domain Maximum: ")
                    },
                    getAriaPostLabel: this.const(""),
                    hasError: function() {
                        return !a.isDomainMaxValid(e.model)
                    },
                    onUserPressedKey: function(t, n) {
                        e.handlePressedKey("max", t, n)
                    },
                    onUserChangedLatex: function(t) {
                        return e.dispatchMaxLatexIfChanged(t)
                    },
                    onFocusedChanged: function(t) {
                        return e.handleFocusedChanged("max", t)
                    },
                    dataLabelAttributeValue: this.const("domain-max")
                }))))
            }, t.prototype.handlePressedKey = function(e, t, n) {
                if (!this.controller.isInEditListMode()) {
                    if ("Esc" === t) return void this.controller.dispatch({
                        type: "set-focus-location",
                        location: void 0
                    });
                    if ("Enter" === t) return this.controller.dispatch({
                        type: "on-special-key-pressed",
                        key: "Enter"
                    })
                }
                var r = o.default.getFocusedMathquill();
                if (r) {
                    if ("Left" === t || "Right" === t || "Down" === t || "Up" === t) {
                        return void(o.default.applyArrowKeyAndReturnIfWasAtBounds(r, t, n) && ("Left" === t ? "max" === e && this.controller.dispatch({
                            type: "set-focus-location",
                            location: {
                                type: "domain-limit",
                                id: this.model.id,
                                location: "min"
                            }
                        }) : "Right" === t ? "min" === e && this.controller.dispatch({
                            type: "set-focus-location",
                            location: {
                                type: "domain-limit",
                                id: this.model.id,
                                location: "max"
                            }
                        }) : this.controller.isInEditListMode() || ("Down" === t ? this.controller.dispatch({
                            type: "on-special-key-pressed",
                            key: "Down"
                        }) : "Up" === t && this.controller.dispatch({
                            type: "set-focus-location",
                            location: {
                                type: "expression",
                                id: this.model.id
                            }
                        }))))
                    }
                    r.keystroke(t, n), "min" === e ? this.dispatchMinLatexIfChanged(r.latex()) : "max" === e && this.dispatchMaxLatexIfChanged(r.latex())
                }
            }, t.prototype.handleFocusedChanged = function(e, t) {
                t ? this.controller.dispatch({
                    type: "set-focus-location",
                    location: {
                        type: "domain-limit",
                        id: this.id,
                        location: e
                    }
                }) : this.controller.dispatch({
                    type: "blur-focus-location",
                    location: {
                        type: "domain-limit",
                        id: this.id,
                        location: e
                    }
                })
            }, t.prototype.dispatchMinLatexIfChanged = function(e) {
                if (this.getMinLatex() !== e) {
                    var t = this.getDomainType();
                    if ("unknown" === t) return void l.notify("DomainView is in use for a non-parametric, non-polar expression", {
                        severity: "error",
                        metaData: {
                            expression: a.getState(this.model, {
                                stripDefaults: !0
                            })
                        }
                    });
                    this.controller.dispatch("polar" === t ? {
                        type: "set-polar-domain-minlatex",
                        id: this.id,
                        latex: e
                    } : {
                        type: "set-parametric-domain-minlatex",
                        id: this.id,
                        latex: e
                    })
                }
            }, t.prototype.dispatchMaxLatexIfChanged = function(e) {
                if (this.getMaxLatex() !== e) {
                    var t = this.getDomainType();
                    if ("unknown" === t) return void l.notify("DomainView is in use for a non-parametric, non-polar expression", {
                        severity: "error",
                        metaData: {
                            expression: a.getState(this.model, {
                                stripDefaults: !0
                            })
                        }
                    });
                    this.controller.dispatch("polar" === t ? {
                        type: "set-polar-domain-maxlatex",
                        id: this.id,
                        latex: e
                    } : {
                        type: "set-parametric-domain-maxlatex",
                        id: this.id,
                        latex: e
                    })
                }
            }, t.prototype.getFocusedInput = function() {
                var e = this.controller.getFocusLocation();
                if (e && "domain-limit" === e.type && e.id === this.id) return e.location
            }, t.prototype.getMinLatex = function() {
                switch (this.getDomainType()) {
                    case "parametric":
                        return a.getParametricDomainMin(this.model);
                    case "polar":
                        return a.getPolarDomainMin(this.model);
                    default:
                        return ""
                }
            }, t.prototype.getMaxLatex = function() {
                switch (this.getDomainType()) {
                    case "parametric":
                        return a.getParametricDomainMax(this.model);
                    case "polar":
                        return a.getPolarDomainMax(this.model);
                    default:
                        return ""
                }
            }, t.prototype.getDomainVariableLatex = function() {
                switch (this.getDomainType()) {
                    case "parametric":
                        return "\\le t \\le";
                    case "polar":
                        return "\\le \\theta \\le";
                    default:
                        return ""
                }
            }, t.prototype.getDomainType = function() {
                return a.isPolar(this.model) ? "polar" : a.isParametric(this.model) ? "parametric" : "unknown"
            }, t
        }(r.Class);
        t.default = c
    }), define("loadcss!regression", function() {}), define("expressions/regression_view", ["require", "exports", "tslib", "dcgview", "graphing/label", "dcgview-helpers/static-mathquill-view", "loadcss!regression"], function(e, t, n, r, i, o) {
        "use strict";

        function a(e, t) {
            return i.truncatedLatexLabel(e.parameters[t], {
                zeroCutoff: 1e-15,
                digits: 6,
                smallCutoff: 1e-6,
                bigCutoff: 1e9
            })
        }

        function s(e, t) {
            return i.truncatedLatexLabel(e.statistics[t], {
                zeroCutoff: 1e-15,
                digits: 4,
                smallCutoff: 1e-6,
                bigCutoff: 1e9
            })
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var l = r.Components,
            c = l.If,
            u = l.For,
            p = function(e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return n.__extends(t, e), t.prototype.template = function() {
                    var e = this;
                    return this.controller = this.props.controller(), this.model = this.props.model(), this.id = this.model.id, r.createElement(c, {
                        predicate: this.bindFn(this.getRegression)
                    }, function() {
                        return r.createElement("div", {
                            class: r.const("dcg-regression-container")
                        }, r.createElement("div", {
                            class: r.const("dcg-handle-event"),
                            handleEvent: r.const("true")
                        }, r.createElement(c, {
                            predicate: e.bindFn(e.getShouldSuggestLogMode)
                        }, function() {
                            return r.createElement("div", {
                                class: r.const("dcg-log-mode-toggle")
                            }, r.createElement("div", {
                                class: function() {
                                    return {
                                        "dcg-action-log-mode-toggle": !0,
                                        "dcg-toggled-on": e.getIsLogModeRegression()
                                    }
                                },
                                onTap: e.bindFn(e.onTapLogMode)
                            }, r.createElement("span", {
                                class: r.const("dcg-log-mode-checkbox"),
                                role: r.const("checkbox"),
                                "aria-checked": function() {
                                    return e.getIsLogModeRegression()
                                },
                                tabindex: r.const("0"),
                                "aria-label": function() {
                                    return e.controller.t("Log Mode")
                                }
                            }, r.createElement("i", {
                                class: r.const("dcg-icon-check")
                            })), function() {
                                return e.controller.t("Log Mode")
                            }), r.createElement("a", {
                                "aria-label": function() {
                                    return e.controller.t("Log Mode Help")
                                },
                                class: r.const("dcg-log-mode-toggle-help"),
                                target: r.const("_blank"),
                                href: r.const("http://support.desmos.com/hc/en-us/articles/204349605")
                            }, r.createElement("i", {
                                class: r.const("dcg-icon-question-sign")
                            })))
                        }), r.createElement("div", {
                            class: r.const("dcg-statistics"),
                            role: r.const("group"),
                            "aria-label": function() {
                                return e.controller.t("Statistics")
                            }
                        }, r.createElement("div", {
                            class: r.const("dcg-expression-footer-title")
                        }, function() {
                            return e.controller.t("Statistics")
                        }, r.createElement(c, {
                            predicate: function() {
                                return e.getRegression().statistics.hasOwnProperty("RMSE")
                            }
                        }, function() {
                            return r.createElement("a", {
                                class: r.const("dcg-expression-footer-title-help"),
                                target: r.const("_blank"),
                                href: r.const("http://support.desmos.com/entries/60176149-What-is-RMSE-"),
                                "aria-label": function() {
                                    return e.controller.t("What is RMSE?")
                                }
                            }, r.createElement("i", {
                                class: r.const("dcg-icon-question-sign")
                            }))
                        }), r.createElement(c, {
                            predicate: function() {
                                return e.getRegression().statistics.Rsquared < 0
                            }
                        }, function() {
                            return r.createElement("a", {
                                "aria-label": function() {
                                    return e.controller.t("Why am I seeing a negative R Squared value?")
                                },
                                class: r.const("dcg-expression-footer-title-help"),
                                target: r.const("_blank"),
                                href: r.const("http://support.desmos.com/entries/60460125-Why-am-I-seeing-a-negative-R-2-value-")
                            }, r.createElement("i", {
                                class: r.const("dcg-icon-question-sign")
                            }))
                        })), r.createElement("div", {
                            class: r.const("dcg-statistics-values")
                        }, r.createElement(c, {
                            predicate: function() {
                                return e.getRegression().statistics.hasOwnProperty("Rsquared")
                            }
                        }, function() {
                            return r.createElement("div", null, r.createElement(o.default, {
                                latex: function() {
                                    return "R^2=" + s(e.getRegression(), "Rsquared")
                                }
                            }, r.createElement("span", {
                                tabindex: r.const("0")
                            })))
                        }), r.createElement(c, {
                            predicate: function() {
                                return e.getRegression().statistics.hasOwnProperty("rsquared")
                            }
                        }, function() {
                            return r.createElement("div", null, r.createElement(o.default, {
                                latex: function() {
                                    return "r^2=" + s(e.getRegression(), "rsquared")
                                }
                            }, r.createElement("span", {
                                tabindex: r.const("0")
                            })))
                        }), r.createElement(c, {
                            predicate: function() {
                                return e.getRegression().statistics.hasOwnProperty("r")
                            }
                        }, function() {
                            return r.createElement("div", null, r.createElement(o.default, {
                                latex: function() {
                                    return "r=" + s(e.getRegression(), "r")
                                }
                            }, r.createElement("span", {
                                class: r.const("dcg-r-value"),
                                tabindex: r.const("0")
                            })))
                        }), r.createElement(c, {
                            predicate: function() {
                                return e.getRegression().statistics.hasOwnProperty("RMSE")
                            }
                        }, function() {
                            return r.createElement("div", null, r.createElement(o.default, {
                                latex: function() {
                                    return "\\operatorname{RMSE}=" + s(e.getRegression(), "RMSE")
                                }
                            }, r.createElement("span", {
                                tabindex: r.const("0")
                            })))
                        }))), r.createElement("div", {
                            role: r.const("group"),
                            "aria-label": function() {
                                return e.controller.t("Residuals")
                            },
                            class: r.const("dcg-residuals")
                        }, r.createElement("div", {
                            class: r.const("dcg-expression-footer-title")
                        }, function() {
                            return e.controller.t("Residuals")
                        }), r.createElement(o.default, {
                            latex: e.bindFn(e.getResidualVariable)
                        }, r.createElement("span", {
                            class: r.const("dcg-residuals-variable"),
                            tabindex: r.const("0")
                        })), r.createElement("div", {
                            class: function() {
                                return {
                                    "dcg-residual-suggestion": !0,
                                    "dcg-action-plot-residual": !0,
                                    "dcg-btn": !0,
                                    "dcg-btn-light-gray": !0,
                                    "dcg-visible": e.getResidualSuggestionVisible()
                                }
                            },
                            "aria-hidden": function() {
                                return !e.getResidualSuggestionVisible()
                            },
                            role: r.const("button"),
                            tabindex: function() {
                                return e.getResidualSuggestionVisible() ? "0" : void 0
                            },
                            onTap: e.bindFn(e.onTapResidualsSuggestion)
                        }, function() {
                            return e.controller.t("plot")
                        })), r.createElement(c, {
                            predicate: function() {
                                return Object.keys(e.getRegression().parameters).length > 0
                            }
                        }, function() {
                            return r.createElement("div", {
                                class: r.const("dcg-parameters-container")
                            }, r.createElement("div", {
                                class: r.const("dcg-expression-footer-title")
                            }, function() {
                                return e.controller.t("Parameters")
                            }), r.createElement(u, {
                                each: function() {
                                    return Object.keys(e.getRegression().parameters)
                                }
                            }, r.createElement("div", {
                                role: r.const("group"),
                                "aria-label": function() {
                                    return e.controller.t("Parameters")
                                },
                                class: r.const("dcg-parameters")
                            }, function(t) {
                                return r.createElement(o.default, {
                                    latex: function() {
                                        return t + "=" + a(e.getRegression(), t)
                                    }
                                }, r.createElement("span", {
                                    class: r.const("dcg-parameter"),
                                    tabindex: r.const("0")
                                }))
                            })))
                        }), r.createElement("div", {
                            class: r.const("dcg-clear")
                        })))
                    })
                }, t.prototype.onTapResidualsSuggestion = function() {
                    this.controller.dispatch({
                        type: "plot-residuals",
                        id: this.id
                    })
                }, t.prototype.onTapLogMode = function() {
                    this.controller.dispatch({
                        type: "toggle-logmode",
                        id: this.id
                    })
                }, t.prototype.getRegression = function() {
                    return this.model.formula.regression
                }, t.prototype.getResidualVariable = function() {
                    return this.getRegression().residualVariable || ""
                }, t.prototype.getResidualSuggestionVisible = function() {
                    return void 0 !== this.getRegression().residualSuggestionId
                }, t.prototype.getShouldSuggestLogMode = function() {
                    return !!this.getRegression().shouldSuggestLogMode
                }, t.prototype.getIsLogModeRegression = function() {
                    return !!this.model.isLogModeRegression
                }, t
            }(r.Class);
        t.default = p, t.getRoundedParam = a, t.getRoundedStat = s
    }),
    function() {
        define("dcgview-helpers/dragdrop", ["require", "underscore", "underscore_model", "jquery", "pjs", "lib/animation-frame"], function(e) {
            var t, n, r, i;
            return e("underscore"), i = e("underscore_model").UnderscoreModel, t = e("jquery"), r = e("pjs"), n = e("lib/animation-frame"), r(i, function(e, r) {
                return {
                    init: function(e) {
                        return this.options = null != e ? e : {}, r.init.call(this), this.dragging = !1
                    },
                    _evt2pt: function(e) {
                        return {
                            x: e.changedTouches[0].pageX - this._offsetPt.x,
                            y: e.changedTouches[0].pageY - this._offsetPt.y
                        }
                    },
                    _dispatch: function(e, t) {
                        var n;
                        if (!this._destroyed) return n = this._evt2pt(t), this.triggerEvent(e, {
                            x: n.x,
                            y: n.y,
                            dx: n.x - this._startPt.x,
                            dy: n.y - this._startPt.y,
                            evt: t
                        })
                    },
                    destroy: function() {
                        return t(document).off("." + this.guid), this._destroyed = !0
                    },
                    startDrag: function(e, r) {
                        if (null == r && (r = {}),
                            !this.dragging) return t(document).on("dcg-tapmove." + this.guid, function(e) {
                            return function(t) {
                                if (t.originalEvent.preventDefault(), !e.options.doNotThrottle) return n.cancelAnimationFrame(e.frameThrottle), e.frameThrottle = n.requestAnimationFrame(function() {
                                    return e.doDrag(t)
                                });
                                e.doDrag(t)
                            }
                        }(this)), t(document).on("dcg-tapend." + this.guid + " dcg-tapcancel." + this.guid, function(e) {
                            return function(t) {
                                return e.endDrag(t)
                            }
                        }(this)), this._offsetPt = {
                            x: 0,
                            y: 0
                        }, null != r.origin && (this._offsetPt = {
                            x: this._evt2pt(e).x - r.origin.x,
                            y: this._evt2pt(e).y - r.origin.y
                        }), this._startPt = this._evt2pt(e), this.setProperty("dragging", !0), this._dispatch("onGrab", e)
                    },
                    doDrag: function(e) {
                        if (this.dragging) return this._dispatch("onDrag", e)
                    },
                    endDrag: function(e) {
                        if (this.dragging) return t(document).off("." + this.guid), this.doDrag(e), this.setProperty("dragging", !1), this._dispatch("onDrop", e)
                    }
                }
            })
        })
    }.call(this), define("loadcss!dcgview-helpers/slider", function() {}), define("dcgview-helpers/slider", ["require", "exports", "./dragdrop", "lib/rounding", "tslib", "keys", "dcgview", "jquery", "lib/conditional_blur", "loadcss!./slider"], function(e, t, n, r, i, o, a, s, l) {
        "use strict";

        function c(e, t, n) {
            return Math.min(Math.max(e, t), n)
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var u = a.Components.If,
            p = function(e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return i.__extends(t, e), t.prototype.template = function() {
                    var e = this;
                    return a.createElement("div", {
                        class: function() {
                            return {
                                "dcg-slider-interior": !0,
                                "dcg-disable-slider": e.shouldDisableSlider()
                            }
                        },
                        didMount: this.bindFn(this.didMountRoot),
                        onTapStart: this.bindFn(this.onStartDrag),
                        style: a.const({
                            "touch-action": "none"
                        })
                    }, a.createElement("div", {
                        class: a.const("dcg-track")
                    }, a.createElement("div", {
                        class: a.const("dcg-ticks"),
                        onMount: this.bindFn(this.didMountTickMarks)
                    }), a.createElement("div", {
                        class: a.const("dcg-graphic")
                    })), a.createElement(u, {
                        predicate: this.bindFn(this.shouldShowZeroMarker)
                    }, function() {
                        return a.createElement("div", {
                            class: a.const("dcg-zeroMarker"),
                            style: function() {
                                return {
                                    left: e.getZeroMarkerPercent() + "%"
                                }
                            }
                        })
                    }), a.createElement("div", {
                        class: function() {
                            return {
                                "dcg-thumb": !0,
                                "dcg-down": e.isDragging
                            }
                        },
                        role: a.const("slider"),
                        tabindex: a.const("0"),
                        disablescroll: a.const("true"),
                        style: function() {
                            return {
                                left: e.getThumbPercent() + "%"
                            }
                        },
                        onKeyDown: this.bindFn(this.onKeyDown),
                        "aria-label": this.props.ariaLabel,
                        "aria-valuemin": this.props.min,
                        "aria-valuemax": this.props.max,
                        "aria-valuenow": this.props.value,
                        manageFocus: this.buildFocusManager()
                    }, a.createElement("div", {
                        class: a.const("dcg-graphic")
                    }), a.createElement("div", {
                        class: a.const("dcg-center")
                    })))
                }, t.prototype.willUnmount = function() {
                    this.dragDrop.destroy()
                }, t.prototype.didMountRoot = function(e) {
                    var t = this;
                    this.rootNode = e, this.dragDrop = n(), this.isMounted = !0, this.dragDrop.observeEvent("onDrop", function() {
                        t.isDragging = !1, t.update(), t.props.onDrop && t.props.onDrop()
                    }), this.dragDrop.observeEvent("onGrab", function() {
                        t.isDragging = !0, t.update(), t.props.onGrab && t.props.onGrab()
                    }), this.dragDrop.observeEvent("onDrag", function(e, n) {
                        t.props.onDragUpdate(t.valueFromPixels(n.x))
                    })
                }, t.prototype.didMountTickMarks = function(e) {
                    this.tickMarksNode = e, this.renderTickMarks()
                }, t.prototype.didUpdate = function() {
                    this.renderTickMarks()
                }, t.prototype.shouldDisableSlider = function() {
                    return this.props.min() === this.props.max()
                }, t.prototype.renderTickMarks = function() {
                    if (this.tickMarksNode) {
                        var e, t = this.props.step(),
                            n = this.props.min(),
                            r = this.props.max();
                        if (e = void 0 === t ? 0 : 100 * t / (r - n), e < 3 && (e = 0), e > 100 && (e = 0), isNaN(e) && (e = 0), this.lastTickMarksPercent !== e) {
                            this.lastTickMarksPercent = e;
                            var i = "";
                            if (e > 0 && e < 100)
                                for (var o = e; o < 100; o += e) i += '<div class="dcg-tick" style="left:' + o + '%"></div>';
                            this.tickMarksNode.innerHTML = i
                        }
                    }
                }, t.prototype.shouldShowZeroMarker = function() {
                    return this.props.min() <= 0 && this.props.max() >= 0
                }, t.prototype.getZeroMarkerPercent = function() {
                    var e = this.props.min();
                    return 100 * (0 - e) / (this.props.max() - e)
                }, t.prototype.getThumbPercent = function() {
                    return 100 * this.percentFromValue(this.props.value())
                }, t.prototype.valueFromPixels = function(e) {
                    if (!this.isMounted) return 0;
                    var t = this.props.min(),
                        n = this.props.max(),
                        i = this.rootNode.getBoundingClientRect().width,
                        o = c(e / i, 0, 1),
                        a = t + (n - t) * o,
                        s = (n - t) / i;
                    return r.shortestDecimalBetween(a - s, a + s)
                }, t.prototype.percentFromValue = function(e) {
                    var t = this.props.min();
                    return c((e - t) / (this.props.max() - t), 0, 1)
                }, t.prototype.pixelsFromValue = function(e) {
                    if (!this.isMounted) return 0;
                    var t = this.percentFromValue(e);
                    return this.rootNode.getBoundingClientRect().width * t
                }, t.prototype.onKeyDown = function(e) {
                    switch (o.lookup(e)) {
                        case o.UP:
                            this.props.onUpPress && (this.props.onUpPress(), e.preventDefault());
                            break;
                        case o.DOWN:
                            this.props.onDownPress && (this.props.onDownPress(), e.preventDefault());
                            break;
                        case o.ENTER:
                            this.props.onEnterPress && (this.props.onEnterPress(), e.preventDefault());
                            break;
                        case o.ESCAPE:
                            document.activeElement && s(document.activeElement).blur();
                            break;
                        case o.LEFT:
                            this.props.onKeyboardUpdate("down"), e.preventDefault();
                            break;
                        case o.RIGHT:
                            this.props.onKeyboardUpdate("up"), e.preventDefault();
                            break;
                        case o.PAGEDOWN:
                            this.props.onKeyboardUpdate("bigdown"), e.preventDefault();
                            break;
                        case o.PAGEUP:
                            this.props.onKeyboardUpdate("bigup"), e.preventDefault();
                            break;
                        case o.HOME:
                            this.props.onKeyboardUpdate("min"), e.preventDefault();
                            break;
                        case o.END:
                            this.props.onKeyboardUpdate("max"), e.preventDefault()
                    }
                }, t.prototype.onStartDrag = function(e) {
                    if ("keyboard" !== e.device && e.target) {
                        e.preventDefault(), l.default();
                        var t = {
                            x: 0,
                            y: 0
                        };
                        1 === s(e.target).closest(".dcg-thumb").length ? t.x = this.pixelsFromValue(this.props.value()) : t.x = e.changedTouches[0].clientX - this.rootNode.getBoundingClientRect().left, this.dragDrop.startDrag(e, {
                            origin: t
                        })
                    }
                }, t.prototype.buildFocusManager = function() {
                    return this.props.onFocusedChanged && this.props.isFocused ? this.const({
                        shouldBeFocused: this.props.isFocused,
                        onFocusedChanged: this.props.onFocusedChanged
                    }) : this.const(void 0)
                }, t
            }(a.Class);
        t.default = p
    }), define("expressions/slider_limits_view", ["require", "exports", "tslib", "dcgview", "dcgview-helpers/static-mathquill-view", "dcgview-helpers/mathquill-view", "graphing-calc/models/expression", "graphing/label"], function(e, t, n, r, i, o, a, s) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var l = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.template = function() {
                var e = this;
                return this.controller = this.props.controller(), this.model = this.props.model(), this.id = this.model.id, r.createElement("div", {
                    class: r.const("dcg-slider_menu dcg-do-blur"),
                    handleEvent: r.const("true"),
                    didMount: function(t) {
                        return e.node = t
                    }
                }, r.createElement("div", {
                    class: r.const("dcg-editable-mathquill-container")
                }, r.createElement(o.default, {
                    latex: function() {
                        return e.model.slider.hardMin ? e.model.slider.min : ""
                    },
                    isFocused: function() {
                        return "min" === e.getFocusedInput()
                    },
                    capExpressionSize: function() {
                        return !!e.controller.getGraphSettings().config.capExpressionSize
                    },
                    selectOnFocus: this.const(!0),
                    config: this.const({}),
                    getAriaLabel: function() {
                        return e.controller.t("Slider Minimum: ")
                    },
                    getAriaPostLabel: this.const(""),
                    hasError: this.const(!1),
                    onUserPressedKey: function(t, n) {
                        return e.handlePressedKey("min", t, n)
                    },
                    onUserChangedLatex: function(t) {
                        return e.handleLatexChanged("min", t)
                    },
                    onFocusedChanged: function(t, n) {
                        return e.handleFocusedChanged("min", t, n)
                    }
                }, r.createElement("span", {
                    class: function() {
                        return {
                            "dcg-math-field": !0,
                            "dcg-focus": "min" === e.getFocusedInput(),
                            "dcg-invalid": !a.isSliderMinValid(e.model)
                        }
                    },
                    "data-dcg-limit": r.const("slidermin")
                })), r.createElement("span", {
                    class: r.const("dcg-interval-interior")
                }, r.createElement(i.default, {
                    latex: this.bindFn(this.getDependentLatex)
                }, r.createElement("span", null))), r.createElement(o.default, {
                    latex: function() {
                        return e.model.slider.hardMax ? e.model.slider.max : ""
                    },
                    isFocused: function() {
                        return "max" === e.getFocusedInput()
                    },
                    capExpressionSize: function() {
                        return !!e.controller.getGraphSettings().config.capExpressionSize
                    },
                    selectOnFocus: this.const(!0),
                    config: this.const({}),
                    getAriaLabel: function() {
                        return e.controller.t("Slider Maximum: ")
                    },
                    getAriaPostLabel: this.const(""),
                    hasError: this.const(!1),
                    onUserPressedKey: function(t, n) {
                        return e.handlePressedKey("max", t, n)
                    },
                    onUserChangedLatex: function(t) {
                        return e.handleLatexChanged("max", t)
                    },
                    onFocusedChanged: function(t, n) {
                        return e.handleFocusedChanged("max", t, n)
                    }
                }, r.createElement("span", {
                    class: function() {
                        return {
                            "dcg-math-field": !0,
                            "dcg-focus": "max" === e.getFocusedInput(),
                            "dcg-invalid": !a.isSliderMaxValid(e.model)
                        }
                    },
                    "data-dcg-limit": r.const("slidermax")
                })), r.createElement("span", {
                    class: r.const("dcg-slider-step-container")
                }, r.createElement("span", {
                    class: r.const("dcg-slider-step-label"),
                    "aria-hidden": r.const("true")
                }, function() {
                    return e.controller.t("step:")
                }), r.createElement(o.default, {
                    latex: function() {
                        return e.model.slider.step
                    },
                    isFocused: function() {
                        return "step" === e.getFocusedInput()
                    },
                    capExpressionSize: function() {
                        return !!e.controller.getGraphSettings().config.capExpressionSize
                    },
                    selectOnFocus: this.const(!0),
                    config: this.const({}),
                    getAriaLabel: function() {
                        return e.controller.t("Slider Step Size: ")
                    },
                    getAriaPostLabel: this.const(""),
                    hasError: this.const(!1),
                    onUserPressedKey: function(t, n) {
                        return e.handlePressedKey("step", t, n)
                    },
                    onUserChangedLatex: function(t) {
                        return e.handleLatexChanged("step", t)
                    },
                    onFocusedChanged: function(t, n) {
                        return e.handleFocusedChanged("step", t, n)
                    }
                }, r.createElement("span", {
                    class: function() {
                        return {
                            "dcg-math-field": !0,
                            "dcg-focus": "step" === e.getFocusedInput(),
                            "dcg-invalid": !a.isSliderStepValid(e.model)
                        }
                    },
                    "data-dcg-limit": r.const("sliderstep")
                })))))
            }, t.prototype.handlePressedKey = function(e, t, n) {
                if (!this.controller.isInEditListMode() && ("Esc" === t || "Enter" === t)) return void this.controller.dispatch({
                    type: "set-focus-location",
                    location: {
                        type: "slider-thumb",
                        id: this.id
                    }
                });
                var r = o.default.getFocusedMathquill();
                if (r) {
                    if ("Left" === t || "Right" === t || "Down" === t || "Up" === t) {
                        return void(o.default.applyArrowKeyAndReturnIfWasAtBounds(r, t, n) && ("Left" === t ? "max" === e ? this.controller.dispatch({
                            type: "set-focus-location",
                            location: {
                                type: "slider-limit",
                                id: this.model.id,
                                location: "min"
                            }
                        }) : "step" === e && this.controller.dispatch({
                            type: "set-focus-location",
                            location: {
                                type: "slider-limit",
                                id: this.model.id,
                                location: "max"
                            }
                        }) : "Right" === t ? "min" === e ? this.controller.dispatch({
                            type: "set-focus-location",
                            location: {
                                type: "slider-limit",
                                id: this.model.id,
                                location: "max"
                            }
                        }) : "max" === e && this.controller.dispatch({
                            type: "set-focus-location",
                            location: {
                                type: "slider-limit",
                                id: this.model.id,
                                location: "step"
                            }
                        }) : this.controller.isInEditListMode() || ("Down" === t ? this.controller.dispatch({
                            type: "on-special-key-pressed",
                            key: "Down"
                        }) : "Up" === t && this.controller.dispatch({
                            type: "set-focus-location",
                            location: {
                                type: "expression",
                                id: this.model.id
                            }
                        }))))
                    }
                    r.keystroke(t, n), this.handleLatexChanged(e, r.latex())
                }
            }, t.prototype.handleLatexChanged = function(e, t) {
                "min" === e ? this.dispatchMinLatexIfChanged(t) : "max" === e ? this.dispatchMaxLatexIfChanged(t) : "step" === e && this.dispatchStepLatexIfChanged(t)
            }, t.prototype.handleFocusedChanged = function(e, t, n) {
                t && this.getFocusedInput() !== e ? this.controller.dispatch({
                    type: "set-focus-location",
                    location: {
                        type: "slider-limit",
                        id: this.id,
                        location: e
                    }
                }) : this.getFocusedInput() !== e || n.relatedTarget && this.node.contains(n.relatedTarget) || this.controller.dispatch({
                    type: "blur-focus-location",
                    location: {
                        type: "slider-limit",
                        id: this.id,
                        location: e
                    }
                })
            }, t.prototype.dispatchMinLatexIfChanged = function(e) {
                this.model.slider.min !== e && this.controller.dispatch({
                    type: "set-slider-minlatex",
                    id: this.id,
                    latex: e
                })
            }, t.prototype.dispatchMaxLatexIfChanged = function(e) {
                this.model.slider.max !== e && this.controller.dispatch({
                    type: "set-slider-maxlatex",
                    id: this.id,
                    latex: e
                })
            }, t.prototype.dispatchStepLatexIfChanged = function(e) {
                this.model.slider.step !== e && this.controller.dispatch({
                    type: "set-slider-steplatex",
                    id: this.id,
                    latex: e
                })
            }, t.prototype.getDependentLatex = function() {
                var e = this.model.dependent || "";
                return " \\le " + s.identifierToLatex(e) + " \\le "
            }, t.prototype.getFocusedInput = function() {
                var e = this.controller.getFocusLocation();
                if (e && "slider-limit" === e.type && e.id === this.id) return e.location
            }, t
        }(r.Class);
        t.default = l
    }), define("loadcss!expressions/slider-view", function() {}), define("expressions/slider_view", ["require", "exports", "tslib", "jquery", "keys", "dcgview", "dcgview-helpers/slider", "./slider_limits_view", "dcgview-helpers/static-mathquill-view", "graphing-calc/models/expression", "loadcss!./slider-view"], function(e, t, n, r, i, o, a, s, l, c) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var u = o.Components.If,
            p = function(e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return n.__extends(t, e), t.prototype.init = function() {
                    this.controller = this.props.controller(), this.model = this.props.model(), this.id = this.model.id
                }, t.prototype.template = function() {
                    var e = this;
                    return o.createElement("span", {
                        class: o.const("dcg-slider-container"),
                        tapboundary: o.const("true"),
                        onKeydown: function(t) {
                            "Tab" !== i.lookup(t) || t.altKey || t.metaKey || t.ctrlKey || (t.shiftKey ? e.isSliderMinFocused() && e.controller.isInEditListMode() ? (null !== t.target && r(t.target).closest(".dcg-expressionitem").find('[tabindex="0"]:visible:first').focus(), t.preventDefault(), t.stopPropagation()) : e.isSliderThumbFocused() && (e.controller.dispatch({
                                type: "set-focus-location",
                                location: {
                                    type: "slider-limit",
                                    id: e.id,
                                    location: "step"
                                }
                            }), t.preventDefault(), t.stopPropagation()) : !t.shiftKey && e.isSliderStepFocused() && (e.controller.isInEditListMode() ? e.controller.dispatch({
                                type: "set-focus-location",
                                location: {
                                    type: "slider-icon",
                                    id: e.id
                                }
                            }) : e.controller.dispatch({
                                type: "set-focus-location",
                                location: {
                                    type: "slider-thumb",
                                    id: e.id
                                }
                            }), t.preventDefault(), t.stopPropagation()))
                        }
                    }, o.createElement(u, {
                        predicate: function() {
                            return e.shouldShowSlider()
                        }
                    }, function() {
                        return o.createElement("div", {
                            class: o.const("dcg-do-blur dcg-slider"),
                            handleEvent: o.const("true")
                        }, o.createElement("div", {
                            class: o.const("dcg-minLabel dcg-template-minlabelhtml"),
                            role: o.const("button"),
                            tabindex: o.const("0"),
                            "aria-label": function() {
                                return e.controller.t("Edit __variable__ Limits", {
                                    variable: '"' + e.model.dependent + '"'
                                })
                            },
                            onTap: function() {
                                return e.onEditLimit("min")
                            }
                        }, o.createElement(l.default, {
                            latex: function() {
                                return c.getDisplaySliderMin(e.model)
                            }
                        })), o.createElement(a.default, {
                            min: function() {
                                return c.getSliderMin(e.model)
                            },
                            max: function() {
                                return c.getSliderMax(e.model)
                            },
                            step: function() {
                                return c.getSliderStep(e.model)
                            },
                            value: function() {
                                return c.getSliderValue(e.model)
                            },
                            ariaLabel: function() {
                                return '"' + e.model.dependent + '"'
                            },
                            onGrab: e.bindFn(e.onGrab),
                            onDrop: e.bindFn(e.onDrop),
                            onDragUpdate: e.bindFn(e.onDragUpdate),
                            onKeyboardUpdate: e.bindFn(e.onKeyboardUpdate),
                            onUpPress: function() {
                                return e.controller.dispatch({
                                    type: "on-special-key-pressed",
                                    key: "Up"
                                })
                            },
                            onDownPress: function() {
                                return e.controller.dispatch({
                                    type: "on-special-key-pressed",
                                    key: "Down"
                                })
                            },
                            onEnterPress: function() {
                                return e.controller.dispatch({
                                    type: "on-special-key-pressed",
                                    key: "Enter"
                                })
                            },
                            isFocused: e.bindFn(e.isSliderThumbFocused),
                            onFocusedChanged: function(t) {
                                t ? e.controller.dispatch({
                                    type: "set-focus-location",
                                    location: {
                                        type: "slider-thumb",
                                        id: e.id
                                    }
                                }) : e.controller.dispatch({
                                    type: "blur-focus-location",
                                    location: {
                                        type: "slider-thumb",
                                        id: e.id
                                    }
                                })
                            }
                        }), o.createElement("div", {
                            class: o.const("dcg-maxLabel dcg-template-maxlabelhtml"),
                            onTap: function() {
                                return e.onEditLimit("max")
                            }
                        }, o.createElement(l.default, {
                            latex: function() {
                                return c.getDisplaySliderMax(e.model)
                            }
                        })))
                    }), o.createElement(u, {
                        predicate: function() {
                            return e.shouldShowLimitInputs()
                        }
                    }, function() {
                        return o.createElement(s.default, {
                            model: e.props.model,
                            controller: e.props.controller
                        })
                    }))
                }, t.prototype.onGrab = function() {
                    this.dispatchIsDraggingIfChanged(!0)
                }, t.prototype.onDrop = function() {
                    this.controller.dispatch({
                        type: "set-none-selected"
                    }), this.dispatchIsPlayingIfChanged(!1), this.dispatchIsDraggingIfChanged(!1)
                }, t.prototype.onKeyboardUpdate = function(e) {
                    this.controller.dispatch({
                        type: "adjust-slider-by-keyboard",
                        id: this.id,
                        adjustment: e
                    })
                }, t.prototype.onDragUpdate = function(e) {
                    this.controller.dispatch({
                        type: "adjust-slider-by-dragging-thumb",
                        id: this.model.id,
                        target: e
                    })
                }, t.prototype.onEditLimit = function(e) {
                    this.controller.dispatch({
                        type: "set-focus-location",
                        location: {
                            type: "slider-limit",
                            id: this.id,
                            location: e
                        }
                    })
                }, t.prototype.dispatchIsPlayingIfChanged = function(e) {
                    this.model.slider.isPlaying !== e && this.controller.dispatch({
                        type: "set-slider-isplaying",
                        id: this.id,
                        isPlaying: e
                    })
                }, t.prototype.dispatchIsDraggingIfChanged = function(e) {
                    this.model.sliderDragging !== e && this.controller.dispatch({
                        type: "set-slider-dragging",
                        id: this.id,
                        dragging: e
                    })
                }, t.prototype.shouldShowLimitInputs = function() {
                    if (this.controller.isInEditListMode()) return !0;
                    if (!c.isSliderMinValid(this.model)) return !0;
                    if (!c.isSliderMaxValid(this.model)) return !0;
                    if (!c.isSliderStepValid(this.model)) return !0;
                    var e = this.controller.getFocusLocation();
                    return !(!e || "slider-limit" !== e.type && "expression" !== e.type || e.id !== this.id)
                }, t.prototype.shouldShowSlider = function() {
                    return !this.shouldShowLimitInputs()
                }, t.prototype.isSliderThumbFocused = function() {
                    var e = this.controller.getFocusLocation();
                    return !(!e || "slider-thumb" !== e.type || e.id !== this.id)
                }, t.prototype.isSliderMinFocused = function() {
                    var e = this.controller.getFocusLocation();
                    return !(!e || "slider-limit" !== e.type || e.id !== this.id || "min" !== e.location)
                }, t.prototype.isSliderStepFocused = function() {
                    var e = this.controller.getFocusLocation();
                    return !(!e || "slider-limit" !== e.type || e.id !== this.id || "step" !== e.location)
                }, t
            }(o.Class);
        t.default = p
    }), define("loadcss!expressions/slider-speed-view", function() {}), define("expressions/slider_speed_view", ["require", "exports", "expressions/slider_loop_modes", "tslib", "underscore", "lib/aria", "dcgview", "graphing-calc/json/expression", "loadcss!./slider-speed-view"], function(e, t, n, r, i, o, a, s) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var l = [.05, .1, .15, .2, .35, .5, .75, 1, 1.5, 2, 3.5, 5, 7.5, 10, 15, 20],
            c = i.min(l),
            u = i.max(l),
            p = function(e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return r.__extends(t, e), t.prototype.init = function() {
                    this.controller = this.props.controller(), this.model = this.props.model()
                }, t.prototype.template = function() {
                    var e = this;
                    return a.createElement("div", {
                        class: a.const("dcg-slider-speed-container dcg-do-not-blur"),
                        handleEvent: a.const("true")
                    }, a.createElement("span", {
                        class: a.const("dcg-action-toggle-slider-loop-mode"),
                        onTap: function() {
                            return e.toggleLoopMode()
                        },
                        role: a.const("button"),
                        "aria-label": function() {
                            return e.getLoopModeAriaLabel()
                        },
                        "aria-hidden": function() {
                            return e.isHidden()
                        },
                        tabindex: function() {
                            return e.isHidden() ? -1 : 0
                        },
                        loopMode: function() {
                            return e.model.slider.loopMode
                        }
                    }, a.createElement("span", {
                        class: a.const("dcg-toggle-loop-mode-top")
                    }, a.createElement("i", {
                        class: a.const("dcg-icon-bottom-arrow")
                    })), a.createElement("span", {
                        class: a.const("dcg-toggle-loop-mode-bottom")
                    }, a.createElement("i", {
                        class: a.const("dcg-icon-bottom-arrow")
                    }))), a.createElement("span", {
                        class: function() {
                            return {
                                "dcg-action-slower": !0,
                                "dcg-disabled": e.isSlowerDisabled()
                            }
                        },
                        onTap: function() {
                            return e.animateSlower()
                        },
                        role: a.const("button"),
                        "aria-label": function() {
                            return e.getSlowerAriaLabel()
                        },
                        "aria-hidden": function() {
                            return e.isHidden()
                        },
                        tabindex: function() {
                            return e.isHidden() ? -1 : 0
                        },
                        "aria-disabled": function() {
                            return e.isSlowerDisabled()
                        }
                    }, a.const("«")), a.createElement("span", {
                        class: a.const("dcg-variable-speed")
                    }, this.bindFn(this.computeSpeed), a.const("x")), a.createElement("span", {
                        class: function() {
                            return {
                                "dcg-action-faster": !0,
                                "dcg-disabled": e.isFasterDisabled()
                            }
                        },
                        onTap: function() {
                            return e.animateFaster()
                        },
                        role: a.const("button"),
                        "aria-label": function() {
                            return e.getFasterAriaLabel()
                        },
                        "aria-hidden": function() {
                            return e.isHidden()
                        },
                        tabindex: function() {
                            return e.isHidden() ? -1 : 0
                        },
                        "aria-disabled": function() {
                            return e.isFasterDisabled()
                        }
                    }, a.const("»")))
                }, t.prototype.computeSpeed = function() {
                    var e = s.DEFAULT_SLIDER_PERIOD / this.model.slider.animationPeriod;
                    return e = Number(e.toFixed(3))
                }, t.prototype.isSlowerDisabled = function() {
                    return c >= this.computeSpeed()
                }, t.prototype.isFasterDisabled = function() {
                    return u <= this.computeSpeed()
                }, t.prototype.animateSlower = function() {
                    var e = this.computeSpeed(),
                        t = i.filter(l, function(t) {
                            return t < e
                        });
                    0 !== t.length && this.setPeriodFromSpeed(i.max(t))
                }, t.prototype.animateFaster = function() {
                    var e = this.computeSpeed(),
                        t = i.filter(l, function(t) {
                            return t > e
                        });
                    0 !== t.length && this.setPeriodFromSpeed(i.min(t))
                }, t.prototype.toggleLoopMode = function() {
                    var e;
                    e = this.model.slider.loopMode === n.LOOP_FORWARD_REVERSE ? n.LOOP_FORWARD : n.LOOP_FORWARD_REVERSE, this.controller.dispatch({
                        type: "set-slider-loopmode",
                        id: this.model.id,
                        loopMode: e
                    })
                }, t.prototype.setPeriodFromSpeed = function(e) {
                    var t = s.DEFAULT_SLIDER_PERIOD / e;
                    this.controller.dispatch({
                        type: "set-slider-animationperiod",
                        id: this.model.id,
                        animationPeriod: t
                    }), o.alert(this.controller.t("Animating at __speed__x", {
                        speed: e + ""
                    }))
                }, t.prototype.isHidden = function() {
                    return !this.model.slider.isPlaying
                }, t.prototype.getSlowerAriaLabel = function() {
                    this.controller.t("Animate __variable__ Slower", {
                        variable: this.model.dependent
                    })
                }, t.prototype.getFasterAriaLabel = function() {
                    this.controller.t("Animate __variable__ Faster", {
                        variable: this.model.dependent
                    })
                }, t.prototype.getLoopModeAriaLabel = function() {
                    return this.model.slider.loopMode === n.LOOP_FORWARD_REVERSE ? this.controller.t("Loop __variable__ Forward and Reverse", {
                        variable: this.model.dependent
                    }) : this.controller.t("Loop __variable__ Forward", {
                        variable: this.model.dependent
                    })
                }, t
            }(a.Class);
        t.default = p
    }), define("loadcss!prompt-sliders", function() {}), define("expressions/promptslider_view", ["require", "exports", "tslib", "graphing/label", "jquery", "lib/aria", "dcgview", "loadcss!prompt-sliders"], function(e, t, n, r, i, o, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var s = a.Components,
            l = s.For,
            c = s.If,
            u = function(e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return n.__extends(t, e), t.prototype.init = function() {
                    this.controller = this.props.controller(), this.model = this.props.model()
                }, t.prototype.template = function() {
                    var e = this;
                    return a.createElement("div", {
                        class: a.const("dcg-create-sliders dcg-action-createslider"),
                        handleEvent: a.const("true"),
                        onTap: this.bindFn(this.onCreateSlider)
                    }, a.createElement("span", {
                        class: a.const("dcg-msg")
                    }, function() {
                        return e.controller.t("add slider:")
                    }), a.createElement("span", {
                        class: a.const("btns")
                    }, a.createElement(l, {
                        each: function() {
                            return e.model.missingVariables.slice(0, 4)
                        }
                    }, a.createElement("span", null, function(t) {
                        return a.createElement("div", {
                            class: a.const("dcg-slider-btn-container"),
                            var_name: e.const(t)
                        }, a.createElement("div", {
                            role: a.const("button"),
                            tabindex: a.const("0"),
                            class: function() {
                                return {
                                    "dcg-btn-slider": !0,
                                    "dcg-btn-blue": 1 === e.model.missingVariables.length,
                                    "dcg-btn-light-gray": 1 !== e.model.missingVariables.length
                                }
                            },
                            didMount: function(e) {
                                e.innerHTML = r.identifierToHTML(t)
                            }
                        }))
                    })), a.createElement(c, {
                        predicate: function() {
                            return e.model.missingVariables.length > 1
                        }
                    }, function() {
                        return a.createElement("div", {
                            class: a.const("dcg-slider-btn-container dcg-all")
                        }, a.createElement("div", {
                            role: a.const("button"),
                            tabindex: a.const("0"),
                            class: a.const("dcg-btn-slider dcg-btn-blue")
                        }, function() {
                            return e.controller.t("all")
                        }))
                    })))
                }, t.prototype.onCreateSlider = function(e) {
                    if (this.controller.dispatch({
                            type: "set-none-selected"
                        }), e.target) {
                        var t = i(e.target).closest(".dcg-slider-btn-container");
                        if (t.length) {
                            var n = !1;
                            if (t.hasClass("dcg-all")) this.controller.dispatch({
                                type: "create-sliders-for-item",
                                id: this.model.id,
                                variables: this.model.missingVariables
                            }), n = !0;
                            else {
                                var r = [t.attr("var_name")];
                                this.controller.dispatch({
                                    type: "create-sliders-for-item",
                                    id: this.model.id,
                                    variables: r
                                }), n = 1 == this.model.missingVariables.length
                            }
                            if ("keyboard" === e.device) {
                                var o = this.model.id,
                                    a = this.props.controller().getItemSelectorById(o);
                                if (!a) return;
                                n ? this.controller.dispatch({
                                    type: "move-focus-to-item",
                                    id: o
                                }) : a.find(".dcg-btn-blue").focus()
                            }
                        }
                    }
                }, t.prototype.didMount = function() {
                    var e = this;
                    this.promptAlertTimeout && clearTimeout(this.promptAlertTimeout), this.promptAlertTimeout = setTimeout(function() {
                        for (var t = [], n = e.model.missingVariables, r = 0; r < n.length; r++) t.push('"' + n[r] + '"');
                        o.alert(e.controller.t("Add slider for __vars__", {
                            vars: t.join(",")
                        })), e.promptAlertTimeout = 0
                    }, 2e3)
                }, t.prototype.didUnmount = function() {
                    this.promptAlertTimeout && clearTimeout(this.promptAlertTimeout)
                }, t
            }(a.Class);
        t.default = u
    }), define("loadcss!dcgview-helpers/checkbox", function() {}), define("dcgview-helpers/checkbox", ["require", "exports", "tslib", "dcgview", "jquery", "loadcss!./checkbox"], function(e, t, n, r, i) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var o = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.template = function() {
                var e = this;
                return r.createElement("div", {
                    class: function() {
                        return {
                            "dcg-component-checkbox": !0,
                            "dcg-checked": e.props.checked(),
                            "dcg-disabled": e.props.disabled && e.props.disabled(),
                            "dcg-small": e.props.small && e.props.small(),
                            "dcg-green": e.props.green && e.props.green()
                        }
                    },
                    onTap: this.bindFn(this.onChange)
                }, r.createElement("span", {
                    tabindex: r.const(0),
                    class: r.const("dcg-checkbox"),
                    role: r.const("checkbox"),
                    "aria-label": this.props.ariaLabel,
                    "aria-disabled": function() {
                        return e.props.disabled && e.props.disabled()
                    },
                    "aria-checked": this.props.checked
                }, r.createElement("i", {
                    class: r.const("dcg-icon-check"),
                    "aria-hidden": r.const("true")
                })), r.createElement("span", {
                    class: r.const("dcg-checkbox-children")
                }, this.children))
            }, t.prototype.onChange = function(e) {
                e.target && i(e.target).attr("href") || this.props.disabled && this.props.disabled() || this.props.onChange(!this.props.checked())
            }, t
        }(r.Class);
        t.Checkbox = o
    }), define("math/interpolatedlabel", ["require", "exports", "parsenodes", "math/types", "graphing/label", "./policy"], function(e, t, n, r, i, o) {
        "use strict";

        function a(e) {
            return !(e.length < 2) && ("`" === e[0] && "`" === e[e.length - 1])
        }

        function s(e) {
            for (var t, n = ["[a-zA-Z][0-9]*", "[a-zA-Z]_[a-zA-Z0-9]+", "[a-zA-Z]_\\{[a-zA-Z0-9]+\\}"], r = "\\$({" + n.join("})|\\$({") + "})", i = new RegExp(r, "g"), o = [], a = 0, s = 0; t = i.exec(e);) {
                s = t.index, s > a && o.push(e.substr(a, s - a));
                var l = t[0],
                    c = l.replace(/[{}\$]/g, "").replace(/^([a-zA-Z])([0-9]+)$/, "$1_$2");
                o.push({
                    symbol: c,
                    str: l
                }), a = t.index + l.length
            }
            return a < e.length && o.push(e.substr(a)), {
                raw: e,
                parts: o
            }
        }

        function l(e, t) {
            return t ? "{" + i.truncatedLatexLabel(e, {
                bigCutoff: 1e7,
                digits: 8
            }) + "}" : i.truncatedPlainmathLabel(e, {
                bigCutoff: 1e7,
                digits: 8
            })
        }

        function c(e, t, i) {
            for (var s = [], c = a(e.raw), u = 0, p = e.parts; u < p.length; u++) {
                var d = p[u];
                if ("string" == typeof d) s.push(d);
                else {
                    var h = n.Identifier(d.symbol).tryGetConcreteTree(o.defaultPolicy, t);
                    if (h.valueType === r.Number) {
                        var f = h.asValue();
                        if ("number" == typeof f) {
                            s.push(l(f, c));
                            continue
                        }
                    } else if (h.valueType === r.ListOfNumber && h.args[i]) {
                        var f = h.args[i].asValue();
                        if ("number" == typeof f) {
                            s.push(l(f, c));
                            continue
                        }
                    }
                    c ? s.push("{?}") : s.push("?")
                }
            }
            return s.join("")
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.isMathLabel = a, t.parse = s, t.interpolate = c
    }), define("loadcss!expressions/label-dropdown-view", function() {}), define("expressions/label-dropdown-view", ["require", "exports", "tslib", "dcgview", "graphing-calc/models/expression", "graphing-calc/json/expression", "main/label-sizes", "graphing/dragmode", "main/label-orientations", "dcgview-helpers/checkbox", "math/interpolatedlabel", "loadcss!./label-dropdown-view"], function(e, t, n, r, i, o, a, s, l, c, u) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var p = r.Components,
            d = p.For,
            h = p.IfElse,
            f = p.If,
            m = function(e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return n.__extends(t, e), t.prototype.template = function() {
                    var e = this;
                    return this.controller = this.props.controller(), this.model = this.props.model(), this.id = this.model.id, r.createElement("div", {
                        class: r.const("dcg-label-dropdown-view dcg-popover dcg-left")
                    }, r.createElement("div", {
                        class: r.const("dcg-arrow")
                    }), r.createElement("div", {
                        class: r.const("dcg-label-group-container")
                    }, r.createElement("div", {
                        class: r.const("dcg-label-group")
                    }, r.createElement("div", {
                        role: r.const("heading"),
                        "aria-level": r.const(1),
                        class: r.const("dcg-label-group-title")
                    }, function() {
                        return e.controller.t("Label Position")
                    }), r.createElement(d, {
                        each: this.bindFn(this.getLabelOrientations)
                    }, r.createElement("div", {
                        role: r.const("group"),
                        "aria-label": function() {
                            return e.controller.t("Label Position")
                        },
                        class: r.const("dcg-label-options")
                    }, function(t) {
                        return r.createElement("a", {
                            role: r.const("button"),
                            tabindex: r.const(0),
                            class: function() {
                                return {
                                    "dcg-menu-option": !0,
                                    "dcg-label-position": !0,
                                    "dcg-menu-option-selected": e.isorientationSelected(t)
                                }
                            },
                            "aria-pressed": function() {
                                return e.isorientationSelected(t)
                            },
                            onTap: function() {
                                return e.setorientation(t)
                            },
                            "aria-label": function() {
                                return e.getOrientationText(t)
                            }
                        }, r.createElement("span", {
                            class: r.const("dcg-menu-option-icon")
                        }, r.createElement("i", {
                            class: r.const("dcg-icon-position-arrows")
                        }), r.createElement("span", {
                            class: function() {
                                var n;
                                return n = {
                                    "dcg-position-direction-icon": !0
                                }, n[e.getPositionIconClass(t)] = !0, n
                            }
                        }, h(function() {
                            return "default" === t
                        }, {
                            true: function() {
                                return r.createElement("div", {
                                    class: r.const("dcg-default-position")
                                })
                            },
                            false: function() {
                                return r.createElement("i", {
                                    class: r.const("dcg-icon-position-arrows-single")
                                })
                            }
                        }))), r.createElement("span", {
                            class: r.const("dcg-menu-option-label")
                        }, function() {
                            return e.getOrientationText(t)
                        }))
                    }))), r.createElement("div", {
                        class: r.const("dcg-label-group")
                    }, r.createElement("div", {
                        role: r.const("heading"),
                        "aria-level": r.const(1),
                        class: r.const("dcg-label-group-title")
                    }, function() {
                        return e.controller.t("Font Size")
                    }), r.createElement(d, {
                        each: this.bindFn(this.getLabelSizes)
                    }, r.createElement("div", {
                        role: r.const("group"),
                        "aria-label": function() {
                            return e.controller.t("Font Size")
                        },
                        class: r.const("dcg-label-options")
                    }, function(t) {
                        return r.createElement("a", {
                            role: r.const("button"),
                            tabindex: r.const(0),
                            class: function() {
                                var n;
                                return n = {
                                    "dcg-menu-option": !0,
                                    "dcg-menu-option-selected": e.isSizeSelected(t),
                                    "dcg-label-size": !0
                                }, n[e.getSizeClass(t)] = !0, n
                            },
                            "aria-pressed": function() {
                                return e.isSizeSelected(t)
                            },
                            onTap: function() {
                                return e.setLabelSize(t)
                            },
                            "aria-label": function() {
                                return e.getSizeText(t)
                            }
                        }, r.createElement("span", {
                            class: r.const("dcg-menu-option-icon")
                        }, r.const("A")), r.createElement("span", {
                            class: r.const("dcg-menu-option-label")
                        }, function() {
                            return e.getSizeText(t)
                        }))
                    })), r.createElement("div", {
                        class: r.const("dcg-label-group dcg-additional-group-in-column")
                    }, r.createElement("div", {
                        role: r.const("heading"),
                        "aria-level": r.const(1),
                        class: r.const("dcg-label-group-title")
                    }, function() {
                        return e.controller.t("Orientation")
                    }), r.createElement("div", {
                        role: r.const("group"),
                        "aria-label": function() {
                            return e.controller.t("Orientation")
                        }
                    }, r.createElement(c.Checkbox, {
                        checked: this.bindFn(this.getVerticalLabel),
                        onChange: this.bindFn(this.setVerticalLabel),
                        ariaLabel: this.const(this.controller.t("Vertical"))
                    }, function() {
                        return e.controller.t("Vertical")
                    }))), r.createElement(f, {
                        predicate: function() {
                            return e.controller.canUseAdvancedStyling()
                        }
                    }, function() {
                        return r.createElement("div", {
                            class: r.const("dcg-label-group dcg-additional-group-in-column")
                        }, r.createElement("div", {
                            role: r.const("heading"),
                            "aria-level": r.const(1),
                            class: r.const("dcg-label-group-title")
                        }, function() {
                            return e.controller.t("Advanced")
                        }), r.createElement("div", {
                            role: r.const("group"),
                            "aria-label": function() {
                                return e.controller.t("Advanced")
                            }
                        }, r.createElement(f, {
                            predicate: function() {
                                return e.shouldShowInteractiveLabelCheckbox()
                            }
                        }, function() {
                            return r.createElement(c.Checkbox, {
                                checked: e.bindFn(e.getInteractiveLabel),
                                onChange: e.bindFn(e.setInteractiveLabel),
                                ariaLabel: e.const("Interactive Label")
                            }, r.const("Show on hover"))
                        }), r.createElement(f, {
                            predicate: e.bindFn(e.shouldShowEditableLabelToggle)
                        }, function() {
                            return r.createElement(c.Checkbox, {
                                checked: e.bindFn(e.getEditable),
                                onChange: e.bindFn(e.setEditable),
                                ariaLabel: e.const("Editable")
                            }, r.const("Editable"))
                        })))
                    }))))
                }, t.prototype.getLabelOrientations = function() {
                    return [l.LabelOrientation.DEFAULT, l.LabelOrientation.LEFT, l.LabelOrientation.RIGHT, l.LabelOrientation.ABOVE, l.LabelOrientation.BELOW]
                }, t.prototype.getOrientationText = function(e) {
                    switch (e) {
                        case l.LabelOrientation.DEFAULT:
                            return this.controller.t("Default");
                        case l.LabelOrientation.LEFT:
                            return this.controller.t("Left");
                        case l.LabelOrientation.RIGHT:
                            return this.controller.t("Right");
                        case l.LabelOrientation.ABOVE:
                            return this.controller.t("Above");
                        case l.LabelOrientation.BELOW:
                            return this.controller.t("Below");
                        default:
                            var t = e;
                            throw new Error("Unexpected label orientation: " + t)
                    }
                }, t.prototype.getLabelSizes = function() {
                    return [a.LabelSize.SMALL, a.LabelSize.MEDIUM, a.LabelSize.LARGE]
                }, t.prototype.getSizeText = function(e) {
                    switch (e) {
                        case a.LabelSize.SMALL:
                            return this.controller.t("Small");
                        case a.LabelSize.LARGE:
                            return this.controller.t("Large");
                        case a.LabelSize.MEDIUM:
                            return this.controller.t("Medium");
                        default:
                            var t = e;
                            throw new Error("Unexpected label size: " + t)
                    }
                }, t.prototype.getSizeClass = function(e) {
                    switch (e) {
                        case a.LabelSize.SMALL:
                            return "dcg-small-label";
                        case a.LabelSize.LARGE:
                            return "dcg-large-label";
                        case a.LabelSize.MEDIUM:
                            return "dcg-medium-label";
                        default:
                            var t = e;
                            throw new Error("Unexpected label size: " + t)
                    }
                }, t.prototype.isSizeSelected = function(e) {
                    return this.model.labelSize === e
                }, t.prototype.isorientationSelected = function(e) {
                    return this.model.labelOrientation === e
                }, t.prototype.getPositionIconClass = function(e) {
                    switch (e) {
                        case l.LabelOrientation.ABOVE:
                            return "dcg-position-icon-above";
                        case l.LabelOrientation.BELOW:
                            return "dcg-position-icon-below";
                        case l.LabelOrientation.LEFT:
                            return "dcg-position-icon-left";
                        case l.LabelOrientation.RIGHT:
                            return "dcg-position-icon-right";
                        case l.LabelOrientation.DEFAULT:
                            return "dcg-position-icon-default";
                        default:
                            var t = e;
                            throw new Error("Unexpected label orientation: " + t)
                    }
                }, t.prototype.setorientation = function(e) {
                    this.controller.dispatch({
                        type: "set-item-label-orientation",
                        id: this.id,
                        labelOrientation: e
                    })
                }, t.prototype.setVerticalLabel = function(e) {
                    this.controller.dispatch({
                        type: "set-item-vertical-label",
                        id: this.id,
                        verticalLabel: e
                    })
                }, t.prototype.getVerticalLabel = function() {
                    return !!this.model.verticalLabel
                }, t.prototype.setInteractiveLabel = function(e) {
                    this.controller.dispatch({
                        type: "set-item-interactive-label",
                        id: this.id,
                        interactiveLabel: e
                    })
                }, t.prototype.getInteractiveLabel = function() {
                    return !!this.model.interactiveLabel
                }, t.prototype.setEditable = function(e) {
                    if (e) {
                        var t = u.isMathLabel(this.model.label) ? o.EditableLabelMode.Math : o.EditableLabelMode.Text;
                        this.controller.dispatch({
                            type: "set-item-editable-label-mode",
                            id: this.id,
                            editableLabelMode: t
                        })
                    } else this.controller.dispatch({
                        type: "set-item-editable-label-mode",
                        id: this.id,
                        editableLabelMode: o.EditableLabelMode.None
                    })
                }, t.prototype.getEditable = function() {
                    return this.model.editableLabelMode !== o.EditableLabelMode.None
                }, t.prototype.getEditableLabelMode = function() {
                    return this.model.editableLabelMode
                }, t.prototype.shouldShowEditableLabelToggle = function() {
                    return i.isSinglePoint(this.model)
                }, t.prototype.setLabelSize = function(e) {
                    this.controller.dispatch({
                        type: "set-item-labelSize",
                        id: this.id,
                        labelSize: e
                    })
                }, t.prototype.getLabelSize = function() {
                    return this.model.labelSize
                }, t.prototype.shouldShowInteractiveLabelCheckbox = function() {
                    return this.model.reconciledDragMode === s.DragMode.NONE
                }, t
            }(r.Class);
        t.LabelDropdownView = m
    }), define("loadcss!expressions/label_view", function() {}), define("expressions/label_view", ["require", "exports", "tslib", "keys", "dcgview", "graphing-calc/models/expression", "./label-dropdown-view", "jquery", "../graphing-calc/json/expression", "loadcss!./label_view"], function(e, t, n, r, i, o, a, s, l) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var c = i.Components,
            u = c.Input,
            p = c.If,
            d = c.IfElse,
            h = function(e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return n.__extends(t, e), t.prototype.template = function() {
                    var e = this;
                    return this.controller = this.props.controller(), this.model = this.props.model(), this.id = this.model.id, i.createElement("div", {
                        class: function() {
                            return {
                                "dcg-label-visible": e.getShowLabel(),
                                "dcg-label-container": !0,
                                "dcg-do-blur": !0
                            }
                        },
                        tapboundary: i.const("true"),
                        handleEvent: i.const("true")
                    }, i.createElement("span", {
                        role: i.const("checkbox"),
                        "aria-checked": this.bindFn(this.getShowLabel),
                        tabindex: i.const("0"),
                        class: function() {
                            return {
                                "dcg-checkbox": !0,
                                "dcg-checkbox-label-colon": e.getShowLabel() && !e.hasEditableLabel()
                            }
                        },
                        "aria-label": function() {
                            return e.controller.t("Label")
                        },
                        onTap: this.bindFn(this.onCheckboxInput)
                    }, i.createElement("span", {
                        class: function() {
                            return {
                                "dcg-checkbox-box": !0,
                                "dcg-checked": e.getShowLabel()
                            }
                        }
                    }, i.createElement("i", {
                        class: i.const("dcg-icon-check")
                    })), i.const(" "), i.createElement("span", {
                        class: i.const("dcg-checkbox-label"),
                        "aria-hidden": i.const("true")
                    }, function() {
                        return e.controller.t("Label")
                    })), d(this.bindFn(this.hasEditableLabel), {
                        true: function() {
                            return i.createElement("div", {
                                class: i.const("dcg-editable-mode-toggle")
                            }, i.createElement("div", {
                                class: i.const("dcg-option-toggle-view")
                            }, i.createElement("div", {
                                class: i.const("dcg-toggle-container")
                            }, i.createElement("div", {
                                class: i.const("dcg-toggle")
                            }, i.createElement("div", {
                                class: function() {
                                    return {
                                        "dcg-toggle-option": !0,
                                        "dcg-selected-toggle": e.model.editableLabelMode === l.EditableLabelMode.Math
                                    }
                                },
                                role: i.const("button"),
                                tabindex: i.const(0),
                                "aria-pressed": function() {
                                    return e.model.editableLabelMode === l.EditableLabelMode.Math
                                },
                                "aria-label": function() {
                                    return e.controller.t("Editable label mode: Editable Math")
                                },
                                didMount: function(t) {
                                    void 0 !== e.lastToggleOption && "math" === e.lastToggleOption && (e.lastToggleOption = void 0, t.focus())
                                },
                                onTap: function() {
                                    e.lastToggleOption = "Editable Math", e.controller.dispatch({
                                        type: "set-item-editable-label-mode",
                                        id: e.id,
                                        editableLabelMode: l.EditableLabelMode.Math
                                    })
                                }
                            }, function() {
                                return e.controller.t("Editable Math")
                            }), i.createElement("div", {
                                class: function() {
                                    return {
                                        "dcg-toggle-option": !0,
                                        "dcg-selected-toggle": e.model.editableLabelMode === l.EditableLabelMode.Text
                                    }
                                },
                                role: i.const("button"),
                                tabindex: i.const(0),
                                "aria-pressed": function() {
                                    return e.model.editableLabelMode === l.EditableLabelMode.Text
                                },
                                "aria-label": function() {
                                    return e.controller.t("Editable label mode: Editable Text")
                                },
                                didMount: function(t) {
                                    void 0 !== e.lastToggleOption && "text" === e.lastToggleOption && (e.lastToggleOption = void 0, t.focus())
                                },
                                onTap: function() {
                                    e.lastToggleOption = "Editable Text", e.controller.dispatch({
                                        type: "set-item-editable-label-mode",
                                        id: e.id,
                                        editableLabelMode: l.EditableLabelMode.Text
                                    })
                                }
                            }, function() {
                                return e.controller.t("Editable Text")
                            })))))
                        },
                        false: function() {
                            return i.createElement(u, {
                                class: function() {
                                    return {
                                        "dcg-label-input": !0,
                                        "dcg-disabled-input": e.getIsDisabled(),
                                        "dcg-disabled-editable-input": e.hasEditableLabel()
                                    }
                                },
                                "aria-label": function() {
                                    return e.controller.t("Label Text")
                                },
                                "aria-disabled": function() {
                                    return e.getIsDisabled() || e.hasEditableLabel()
                                },
                                value: e.bindFn(e.getLabel),
                                onInput: e.bindFn(e.onLabelInput)
                            })
                        }
                    }), i.createElement("span", {
                        class: function() {
                            return {
                                "dcg-dropdown-container": !0,
                                "dcg-no-label": !e.getShowLabel()
                            }
                        },
                        didMount: function(t) {
                            return e.$dropdownContainer = s(t)
                        }
                    }, i.createElement("span", {
                        class: i.const("dcg-dropdown-wrench-container"),
                        role: i.const("button"),
                        tabindex: i.const(0),
                        "aria-label": function() {
                            return e.controller.t("Label Settings")
                        },
                        onTap: this.bindFn(this.toggleDropdown),
                        selected: this.bindFn(this.showLabelDropdown),
                        "aria-expanded": this.bindFn(this.showLabelDropdown)
                    }, i.createElement("i", {
                        class: i.const("dcg-icon-wrench")
                    })), i.createElement(p, {
                        predicate: this.bindFn(this.showLabelDropdown)
                    }, function() {
                        return i.createElement(a.LabelDropdownView, {
                            controller: e.props.controller,
                            model: e.props.model
                        })
                    })))
                }, t.prototype.showLabelDropdown = function() {
                    return this.model.labelDropdownOpen
                }, t.prototype.showDropdown = function(e) {
                    var t = this,
                        n = s(e.target);
                    s(document).on("mousedown.dcg-" + this.id + " touchstart.dcg-" + this.id + " pointerdown.dcg-" + this.id, function(e) {
                        t.showLabelDropdown() && (s(e.target).closest(t.$dropdownContainer).length > 0 || t.hideDropdown())
                    }), s(document).on("keydown.dcg-" + this.id, function(e) {
                        r.lookup(e) === r.ESCAPE && (t.hideDropdown(), n.focus())
                    }), this.controller.dispatch({
                        type: "set-item-label-dropdown-open",
                        id: this.id,
                        open: !0
                    })
                }, t.prototype.hideDropdown = function() {
                    s(document).off(".dcg-" + this.id), this.controller.dispatch({
                        type: "set-item-label-dropdown-open",
                        id: this.id,
                        open: !1
                    })
                }, t.prototype.toggleDropdown = function(e) {
                    this.showLabelDropdown() ? this.hideDropdown() : this.showDropdown(e)
                }, t.prototype.getLabel = function() {
                    return this.model.label || ""
                }, t.prototype.hasEditableLabel = function() {
                    return o.hasEditableLabel(this.model)
                }, t.prototype.getShowLabel = function() {
                    return !!this.model.showLabel
                }, t.prototype.getIsDisabled = function() {
                    return 0 === this.getLabel().length && !this.getShowLabel()
                }, t.prototype.onLabelInput = function(e) {
                    var t = e;
                    this.controller.dispatch({
                        type: "set-item-label",
                        id: this.id,
                        label: t
                    }), this.controller.dispatch({
                        type: "set-item-showlabel",
                        id: this.id,
                        showLabel: !!t
                    })
                }, t.prototype.onCheckboxInput = function() {
                    this.controller.dispatch({
                        type: "set-item-showlabel",
                        id: this.id,
                        showLabel: !this.getShowLabel()
                    })
                }, t
            }(i.Class);
        t.default = h
    }), define("loadcss!expressions/cdf-footer-view", function() {}), define("expressions/cdf-footer-view", ["require", "exports", "tslib", "dcgview", "graphing-calc/models/expression", "dcgview-helpers/mathquill-view", "./evaluation-view", "dcgview-helpers/checkbox", "loadcss!./cdf-footer-view"], function(e, t, n, r, i, o, a, s) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var l = r.Components.If,
            c = function(e) {
                function t() {
                    var t = null !== e && e.apply(this, arguments) || this;
                    return t.focusedValues = {}, t
                }
                return n.__extends(t, e), t.prototype.template = function() {
                    var e = this;
                    return this.controller = this.props.controller(), this.model = this.props.model(), this.id = this.model.id, r.createElement("div", {
                        class: r.const("dcg-cdf-footer-container dcg-do-blur"),
                        tapboundary: r.const("true"),
                        handleEvent: r.const("true")
                    }, r.createElement(s.Checkbox, {
                        checked: function() {
                            return i.shouldShowCDFFooter(e.model)
                        },
                        disabled: function() {
                            return i.isListValuedDistribution(e.model)
                        },
                        onChange: function(t) {
                            e.controller.dispatch({
                                type: "set-show-cdf",
                                id: e.model.id,
                                showCDF: t
                            })
                        },
                        ariaLabel: function() {
                            return e.controller.t("Find Cumulative Probability (CDF)")
                        }
                    }, function() {
                        return e.controller.t("Find Cumulative Probability (CDF)")
                    }), r.createElement(l, {
                        predicate: function() {
                            return i.shouldShowCDFFooter(e.model)
                        }
                    }, function() {
                        return r.createElement("div", null, r.createElement("span", {
                            class: r.const("dcg-cdf-limit-name")
                        }, function() {
                            return e.controller.t("Min:")
                        }), r.createElement(o.default, {
                            latex: function() {
                                return i.getCDFMin(e.model)
                            },
                            hasError: function() {
                                return !i.isCDFMinValid(e.model)
                            },
                            isFocused: function() {
                                return e.isInputFocused("min")
                            },
                            onFocusedChanged: function(t) {
                                return e.handleFocusedChanged("min", t)
                            },
                            config: e.const({}),
                            getAriaLabel: function() {
                                return e.controller.t("Min")
                            },
                            getAriaPostLabel: function() {
                                return ""
                            },
                            placeholder: function() {
                                return i.getCDFMinPlaceholder(e.model)
                            },
                            onUserPressedKey: function(t, n) {
                                return e.handlePressedKey(t, n, "min")
                            },
                            onUserChangedLatex: e.bindFn(e.updateCDFMin),
                            capExpressionSize: function() {
                                return !!e.model.controller.getGraphSettings().config.capExpressionSize
                            }
                        }), r.createElement("span", {
                            class: r.const("dcg-cdf-limit-name")
                        }, function() {
                            return e.controller.t("Max:")
                        }), r.createElement(o.default, {
                            latex: function() {
                                return i.getCDFMax(e.model)
                            },
                            hasError: function() {
                                return !i.isCDFMaxValid(e.model)
                            },
                            isFocused: function() {
                                return e.isInputFocused("max")
                            },
                            onFocusedChanged: function(t) {
                                return e.handleFocusedChanged("max", t)
                            },
                            config: e.const({}),
                            getAriaLabel: function() {
                                return e.controller.t("Max")
                            },
                            getAriaPostLabel: function() {
                                return ""
                            },
                            placeholder: function() {
                                return i.getCDFMaxPlaceholder(e.model)
                            },
                            onUserPressedKey: function(t, n) {
                                return e.handlePressedKey(t, n, "max")
                            },
                            onUserChangedLatex: e.bindFn(e.updateCDFMax),
                            capExpressionSize: function() {
                                return !!e.model.controller.getGraphSettings().config.capExpressionSize
                            }
                        }), r.createElement(l, {
                            predicate: e.bindFn(e.showEvaluation)
                        }, function() {
                            return r.createElement("div", {
                                class: r.const("dcg-cdf-evaluation-container")
                            }, r.createElement(a.default, {
                                val: function() {
                                    return i.getCDFEvaluation(e.model)
                                },
                                controller: e.props.controller,
                                dependent: e.const(""),
                                id: function() {
                                    return e.model.id
                                },
                                focusable: e.const(!0)
                            }))
                        }))
                    }))
                }, t.prototype.handlePressedKey = function(e, t, n) {
                    if ("Esc" === e) return void this.controller.dispatch({
                        type: "set-focus-location",
                        location: void 0
                    });
                    if ("Enter" === e) return this.controller.dispatch({
                        type: "on-special-key-pressed",
                        key: "Enter"
                    });
                    var r = o.default.getFocusedMathquill();
                    r && (r.keystroke(e, t), "min" === n && i.getCDFMin(this.model) !== r.latex() && this.updateCDFMin(r.latex()), "max" === n && i.getCDFMax(this.model) !== r.latex() && this.updateCDFMax(r.latex()))
                }, t.prototype.updateCDFMax = function(e) {
                    this.controller.dispatch({
                        type: "set-cdf-max",
                        id: this.model.id,
                        latex: e
                    })
                }, t.prototype.updateCDFMin = function(e) {
                    this.controller.dispatch({
                        type: "set-cdf-min",
                        id: this.model.id,
                        latex: e
                    })
                }, t.prototype.showEvaluation = function() {
                    return !!i.isCDFMaxValid(this.model) && !!i.isCDFMinValid(this.model)
                }, t.prototype.isInputFocused = function(e) {
                    var t = this.controller.getFocusLocation();
                    return !(!t || "cdf-limit" !== t.type || t.id !== this.id) && t.location === e
                }, t.prototype.handleFocusedChanged = function(e, t) {
                    t ? this.controller.dispatch({
                        type: "set-focus-location",
                        location: {
                            type: "cdf-limit",
                            id: this.id,
                            location: e
                        }
                    }) : this.controller.dispatch({
                        type: "blur-focus-location",
                        location: {
                            type: "cdf-limit",
                            id: this.id,
                            location: e
                        }
                    })
                }, t
            }(r.Class);
        t.default = c
    }), define("loadcss!expressions/parameter_suggestions_view", function() {}), define("expressions/parameters_suggestions_view", ["require", "exports", "tslib", "dcgview", "graphing-calc/models/expression", "loadcss!./parameter_suggestions_view"], function(e, t, n, r, i) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var o = r.Components,
            a = o.If,
            s = o.For,
            l = o.SwitchUnion,
            c = function(e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return n.__extends(t, e), t.prototype.init = function() {
                    this.controller = this.props.controller(), this.model = this.props.model(), this.id = this.model.id
                }, t.prototype.template = function() {
                    var e = this;
                    return l(this.bindFn(this.getSuggestionType), {
                        list: function() {
                            return r.createElement(s, {
                                each: e.bindFn(e.getListOfParameters)
                            }, r.createElement("div", {
                                class: r.const("dcg-parameter-suggestion-container")
                            }, function(t) {
                                return r.createElement("span", {
                                    class: r.const("dcg-parameter-name")
                                }, function() {
                                    return e.getParamName(t)
                                })
                            }))
                        },
                        listWithDefault: function() {
                            return r.createElement(s, {
                                each: e.bindFn(e.getListOfParameters)
                            }, r.createElement("div", {
                                class: r.const("dcg-parameter-suggestion-container"),
                                onTap: e.bindFn(e.fillInDefaults)
                            }, function(t) {
                                return r.createElement("span", {
                                    class: r.const("dcg-parameter-name")
                                }, function() {
                                    return e.getParamName(t)
                                }, r.createElement(a, {
                                    predicate: function() {
                                        return e.shouldShowDefaultValue(t)
                                    }
                                }, function() {
                                    return r.createElement("span", {
                                        class: r.const("dcg-default-marker")
                                    }, r.const("= "), function() {
                                        return e.getDefaultValue(t)
                                    })
                                }))
                            }))
                        },
                        individual: function() {
                            return r.createElement("div", {
                                class: r.const("dcg-parameter-suggestion-container")
                            }, e.bindFn(e.getMissingRequiredParamText))
                        },
                        none: function() {}
                    })
                }, t.prototype.getExtractedAndDefaultArgString = function(e) {
                    var t = e.params,
                        n = e.values,
                        r = e.defaults;
                    return t.map(function(e, t) {
                        var i = n[e],
                            o = r[t];
                        return i || o || ""
                    }).join(",")
                }, t.prototype.fillInDefaults = function() {
                    var e = i.parseToplevelFunction(this.model);
                    if (e) {
                        var t = e.symbol,
                            n = e.span,
                            r = n.input,
                            o = n.start,
                            a = n.end,
                            s = this.getExtractedAndDefaultArgString(e),
                            l = "\\operatorname{" + t + "}\\left(" + s + "\\right)",
                            c = "" + r.slice(0, o) + l + r.slice(a);
                        this.controller.dispatch({
                            type: "set-item-latex",
                            id: this.id,
                            latex: c
                        }), this.controller.dispatch({
                            type: "set-focus-location",
                            location: {
                                type: "expression",
                                id: this.id
                            }
                        }), this.controller.dispatch({
                            type: "keypad/press-key",
                            key: "Left"
                        })
                    }
                }, t.prototype.isMissingDefault = function() {
                    if (!i.isPrimaryLatexValid(this.model)) return !1;
                    var e = i.parseToplevelFunction(this.model);
                    if (!e) return !1;
                    for (var t = 0; t < e.params.length; t++)
                        if (this.shouldShowDefaultValue(e.params[t])) return !0;
                    return !1
                }, t.prototype.getSuggestionType = function() {
                    return this.getListOfParameters().length > 1 ? this.isMissingDefault() ? "listWithDefault" : "list" : this.missingRequiredParam() ? "individual" : "none"
                }, t.prototype.missingRequiredParam = function() {
                    var e = i.parseToplevelFunction(this.model);
                    if (e && 1 === e.params.length) {
                        var t = e.params[0];
                        if (!this.getDefaultValue(t) && !this.getParameterExtractedValue(t)) return t
                    }
                }, t.prototype.getMissingRequiredParamText = function() {
                    var e = this.missingRequiredParam();
                    return e ? this.controller.t("Enter the __param__.", {
                        param: this.getParamName(e)
                    }) : ""
                }, t.prototype.getDefaultValue = function(e) {
                    var t = i.parseToplevelFunction(this.model);
                    if (!t || !t.params) return "";
                    for (var n = 0; n < t.params.length; n++)
                        if (t.params[n] === e) return t.defaults[n] || "";
                    return ""
                }, t.prototype.getParameterExtractedValue = function(e) {
                    var t = i.parseToplevelFunction(this.model);
                    return t ? t.values[e] || "" : ""
                }, t.prototype.shouldShowDefaultValue = function(e) {
                    return !this.getParameterExtractedValue(e) && !!this.getDefaultValue(e)
                }, t.prototype.getListOfParameters = function() {
                    var e = i.parseToplevelFunction(this.model);
                    return e ? e.params : []
                }, t.prototype.getParamName = function(e) {
                    switch (e) {
                        case "mean":
                            return this.controller.t("Mean");
                        case "stdev":
                            return this.controller.t("Standard Deviation");
                        case "dof":
                            return this.controller.t("Degrees of Freedom");
                        case "probsuccess":
                            return this.controller.t("Success Probability");
                        case "trials":
                            return this.controller.t("Trials");
                        case "data":
                            return this.controller.t("Data Set");
                        case "binwidth":
                            return this.controller.t("Bin Width");
                        case "min":
                            return this.controller.t("Minimum");
                        case "max":
                            return this.controller.t("Maximum");
                        case "height":
                        case "offset":
                        case "data":
                            return e;
                        default:
                            return e
                    }
                }, t
            }(r.Class);
        t.ParametersSuggestionsView = c
    }), define("loadcss!expressions/distribution_parameters_view", function() {}), define("expressions/distribution_parameters_view", ["require", "exports", "tslib", "dcgview", "graphing-calc/models/expression", "expressions/cdf-footer-view", "./parameters_suggestions_view", "loadcss!./distribution_parameters_view"], function(e, t, n, r, i, o, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var s = r.Components.If,
            l = function(e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return n.__extends(t, e), t.prototype.template = function() {
                    var e = this;
                    return this.controller = this.props.controller(), this.model = this.props.model(), this.id = this.model.id, r.createElement("div", {
                        class: r.const("dcg-distribution-parameters-container dcg-do-blur"),
                        tapboundary: r.const("true"),
                        handleEvent: r.const("true")
                    }, r.createElement(a.ParametersSuggestionsView, {
                        model: this.props.model,
                        controller: this.props.controller
                    }), r.createElement(s, {
                        predicate: function() {
                            return i.shouldShowCDFCheckbox(e.model)
                        }
                    }, function() {
                        return r.createElement(o.default, {
                            model: e.props.model,
                            controller: e.props.controller
                        })
                    }))
                }, t
            }(r.Class);
        t.default = l
    }), define("loadcss!expressions/visualization_parameters_view", function() {}), define("expressions/visualization_parameters_view", ["require", "exports", "tslib", "dcgview", "graphing-calc/models/expression", "dcgview-helpers/mathquill-view", "./parameters_suggestions_view", "loadcss!./visualization_parameters_view"], function(e, t, n, r, i, o, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var s = r.Components.For,
            l = r.Components,
            c = l.SwitchUnion,
            u = l.If,
            p = function(e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return n.__extends(t, e), t.prototype.template = function() {
                    var e = this;
                    return r.createElement("div", {
                        class: r.const("dcg-toggle-container")
                    }, r.createElement("div", {
                        class: r.const("dcg-expression-footer-title")
                    }, this.props.title, r.createElement(u, {
                        predicate: function() {
                            return !!e.props.helpLink
                        }
                    }, function() {
                        return r.createElement("a", {
                            "aria-label": function() {
                                return e.props.controller().t("Help")
                            },
                            class: r.const("dcg-expression-footer-title-help"),
                            target: r.const("_blank"),
                            href: e.props.helpLink
                        }, r.createElement("i", {
                            class: r.const("dcg-icon-question-sign")
                        }))
                    })), r.createElement(s, {
                        each: this.props.options,
                        key: function(e) {
                            return e.name
                        }
                    }, r.createElement("div", {
                        class: r.const("dcg-toggle")
                    }, function(t) {
                        return r.createElement("div", {
                            class: function() {
                                return {
                                    "dcg-toggle-option": !0,
                                    "dcg-selected-toggle": e.isSelected(t.name)
                                }
                            },
                            role: r.const("button"),
                            tabindex: r.const(0),
                            "aria-label": function() {
                                return e.props.title() + ": " + t.displayName
                            },
                            "aria-pressed": function() {
                                return e.isSelected(t.name)
                            },
                            onTap: function() {
                                return e.props.controller().dispatch({
                                    type: "set-visualization-prop",
                                    id: e.props.model().id,
                                    prop: e.props.vizProp(),
                                    latex: t.name
                                })
                            }
                        }, function() {
                            return t.displayName
                        })
                    })))
                }, t.prototype.isSelected = function(e) {
                    return i.getVizPropLatex(this.props.model(), this.props.vizProp()) === e
                }, t
            }(r.Class),
            d = function(e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return n.__extends(t, e), t.prototype.template = function() {
                    var e = this;
                    return this.controller = this.props.controller(), this.model = this.props.model(), this.id = this.model.id, r.createElement("div", {
                        class: r.const("dcg-visualization-parameters-container dcg-do-blur"),
                        tapboundary: r.const("true"),
                        handleEvent: r.const("true")
                    }, r.createElement(a.ParametersSuggestionsView, n.__assign({}, this.props)), r.createElement("div", {
                        class: r.const("dcg-smaller-font")
                    }, c(function() {
                        return e.getVisualizationType()
                    }, {
                        boxplot: function() {
                            return r.createElement("div", null, r.createElement("div", {
                                class: r.const("dcg-expression-footer-title")
                            }, function() {
                                return e.controller.t("Display Properties")
                            }), e.makeMQInput({
                                prop: "axisOffset",
                                default: "1",
                                name: function() {
                                    return e.controller.t("Offset")
                                }
                            }), e.makeMQInput({
                                prop: "breadth",
                                default: "1",
                                name: function() {
                                    return "y" === i.getVizPropLatex(e.model, "alignedAxis") ? e.controller.t("Width") : e.controller.t("Height")
                                }
                            }))
                        },
                        dotplot: function() {
                            return r.createElement(u, {
                                predicate: function() {
                                    return i.needsDotplotXMode(e.model)
                                }
                            }, function() {
                                return r.createElement("div", {
                                    class: r.const("dcg-toggles-container")
                                }, r.createElement(p, n.__assign({}, e.props, {
                                    vizProp: function() {
                                        return "dotplotXMode"
                                    },
                                    options: function() {
                                        return [{
                                            name: "exact",
                                            displayName: e.controller.t("Exact")
                                        }, {
                                            name: "bin",
                                            displayName: e.controller.t("Binned")
                                        }]
                                    },
                                    title: function() {
                                        return e.controller.t("X Values")
                                    }
                                })), r.createElement(p, n.__assign({}, e.props, {
                                    vizProp: function() {
                                        return "binAlignment"
                                    },
                                    options: function() {
                                        return [{
                                            name: "center",
                                            displayName: e.controller.t("Center")
                                        }, {
                                            name: "left",
                                            displayName: e.controller.t("Left")
                                        }]
                                    },
                                    title: function() {
                                        return e.controller.t("Bin Alignment")
                                    }
                                })))
                            })
                        },
                        histogram: function() {
                            return r.createElement("div", {
                                class: r.const("dcg-toggles-container")
                            }, r.createElement(p, n.__assign({}, e.props, {
                                vizProp: function() {
                                    return "histogramMode"
                                },
                                options: function() {
                                    return [{
                                        name: "",
                                        displayName: e.controller.t("Count")
                                    }, {
                                        name: "relative",
                                        displayName: e.controller.t("Relative")
                                    }, {
                                        name: "density",
                                        displayName: e.controller.t("Density")
                                    }]
                                },
                                title: function() {
                                    return e.controller.t("Bar Heights")
                                },
                                helpLink: e.const("https://support.desmos.com/hc/en-us/articles/360022405991")
                            })), r.createElement(p, n.__assign({}, e.props, {
                                vizProp: function() {
                                    return "binAlignment"
                                },
                                options: function() {
                                    return [{
                                        name: "center",
                                        displayName: e.controller.t("Center")
                                    }, {
                                        name: "left",
                                        displayName: e.controller.t("Left")
                                    }]
                                },
                                title: function() {
                                    return e.controller.t("Bin Alignment")
                                }
                            })))
                        },
                        none: function() {
                            return r.createElement("span", null)
                        }
                    })))
                }, t.prototype.makeMQInput = function(e) {
                    var t = this;
                    return r.createElement("span", null, r.createElement("span", {
                        class: r.const("dcg-parameter-name")
                    }, e.name, r.const(":")), r.createElement(o.default, {
                        latex: function() {
                            return i.getVizPropLatex(t.model, e.prop)
                        },
                        hasError: function() {
                            return !i.isVizPropValid(t.model, e.prop)
                        },
                        isFocused: function() {
                            return t.isInputFocused(e.prop)
                        },
                        onFocusedChanged: function(n) {
                            return t.handleFocusedChanged(e.prop, n)
                        },
                        placeholder: function() {
                            return e.default
                        },
                        config: this.const({}),
                        getAriaLabel: e.name,
                        onUserPressedKey: function(n, r) {
                            return t.handlePressedKey(n, r, e.prop)
                        },
                        getAriaPostLabel: function() {
                            return ""
                        },
                        onUserChangedLatex: function(n) {
                            return t.handleLatexChanged(e.prop, n)
                        },
                        capExpressionSize: function() {
                            return !!t.model.controller.getGraphSettings().config.capExpressionSize
                        }
                    }))
                }, t.prototype.handlePressedKey = function(e, t, n) {
                    if ("Esc" === e) return void this.controller.dispatch({
                        type: "set-focus-location",
                        location: void 0
                    });
                    if ("Enter" === e) return this.controller.dispatch({
                        type: "on-special-key-pressed",
                        key: "Enter"
                    });
                    var r = o.default.getFocusedMathquill();
                    r && (r.keystroke(e, t), this.handleLatexChanged(n, r.latex()))
                }, t.prototype.isInputFocused = function(e) {
                    var t = this.controller.getFocusLocation();
                    return !(!t || "visualization-prop" !== t.type || t.id !== this.id) && t.location === e
                }, t.prototype.handleFocusedChanged = function(e, t) {
                    t ? this.controller.dispatch({
                        type: "set-focus-location",
                        location: {
                            type: "visualization-prop",
                            id: this.id,
                            location: e
                        }
                    }) : this.controller.dispatch({
                        type: "blur-focus-location",
                        location: {
                            type: "visualization-prop",
                            id: this.id,
                            location: e
                        }
                    })
                }, t.prototype.handleLatexChanged = function(e, t) {
                    i.getVizPropLatex(this.model, e) !== t && this.controller.dispatch({
                        type: "set-visualization-prop",
                        id: this.id,
                        prop: e,
                        latex: t
                    })
                }, t.prototype.getVisualizationType = function() {
                    return i.isPrimaryLatexValid(this.model) ? i.isBoxPlot(this.model) ? "boxplot" : i.isDotPlot(this.model) ? "dotplot" : i.isHistogram(this.model) ? "histogram" : "none" : "none"
                }, t
            }(r.Class);
        t.default = d
    }), define("loadcss!expressions/ttest_footer_view", function() {}), define("expressions/ttest_footer_view", ["require", "exports", "tslib", "dcgview", "graphing-calc/models/expression", "lib/number-to-latex", "dcgview-helpers/static-mathquill-view", "loadcss!./ttest_footer_view"], function(e, t, n, r, i, o, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var s = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.init = function() {
                this.controller = this.props.controller(), this.model = this.props.model(), this.id = this.model.id
            }, t.prototype.template = function() {
                var e = this;
                return r.createElement("div", {
                    class: r.const("dcg-ttest-footer-container dcg-do-blur"),
                    handleEvent: r.const("true")
                }, r.createElement("table", null, r.createElement("tr", null, r.createElement("td", null, r.createElement("div", {
                    class: r.const("dcg-value"),
                    role: r.const("textbox"),
                    "aria-readonly": r.const("true"),
                    tabindex: r.const("0"),
                    "aria-label": function() {
                        return "Less than: " + e.getLessThan()
                    }
                }, r.createElement("span", {
                    class: r.const("dcg-operator")
                }, r.createElement(a.default, {
                    latex: this.const("<")
                })), r.createElement("span", {
                    class: r.const("dcg-evaluation")
                }, r.createElement(a.default, {
                    latex: function() {
                        return e.getLessThan()
                    }
                }))))), r.createElement("tr", null, r.createElement("td", null, r.createElement("div", {
                    class: r.const("dcg-value"),
                    role: r.const("textbox"),
                    "aria-readonly": r.const("true"),
                    tabindex: r.const("0"),
                    "aria-label": function() {
                        return "Greater than: " + e.getGreaterThan()
                    }
                }, r.createElement("span", {
                    class: r.const("dcg-operator")
                }, r.createElement(a.default, {
                    latex: this.const(">")
                })), r.createElement("span", {
                    class: r.const("dcg-evaluation")
                }, r.createElement(a.default, {
                    latex: function() {
                        return e.getGreaterThan()
                    }
                }))))), r.createElement("tr", null, r.createElement("td", null, r.createElement("div", {
                    class: r.const("dcg-value"),
                    role: r.const("textbox"),
                    "aria-readonly": r.const("true"),
                    tabindex: r.const("0"),
                    "aria-label": function() {
                        return "Not equal: " + e.getNotEqual()
                    }
                }, r.createElement("span", {
                    class: r.const("dcg-operator")
                }, r.createElement(a.default, {
                    latex: this.const("≠")
                })), r.createElement("span", {
                    class: r.const("dcg-evaluation")
                }, r.createElement(a.default, {
                    latex: function() {
                        return e.getNotEqual()
                    }
                })))))))
            }, t.prototype.getLessThan = function() {
                var e = i.getTTestResults(this.model);
                return e ? o.numberToStatsConfidenceLatex(e.lessThan, 5) : ""
            }, t.prototype.getGreaterThan = function() {
                var e = i.getTTestResults(this.model);
                return e ? o.numberToStatsConfidenceLatex(e.greaterThan, 5) : ""
            }, t.prototype.getNotEqual = function() {
                var e = i.getTTestResults(this.model);
                return e ? o.numberToStatsConfidenceLatex(e.notEqual, 5) : ""
            }, t
        }(r.Class);
        t.default = s
    }), define("loadcss!expressions/stats_footer_view", function() {}), define("expressions/stats_footer_view", ["require", "exports", "tslib", "dcgview", "graphing-calc/models/expression", "dcgview-helpers/static-mathquill-view", "lib/number-to-latex", "loadcss!./stats_footer_view"], function(e, t, n, r, i, o, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var s = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.template = function() {
                var e = this;
                return this.controller = this.props.controller(), this.model = this.props.model(), this.id = this.model.id, r.createElement("div", {
                    class: r.const("dcg-stats-footer-container dcg-do-blur"),
                    handleEvent: r.const("true")
                }, r.createElement("table", null, r.createElement("tr", null, r.createElement("td", null, r.createElement("div", {
                    class: r.const("dcg-value"),
                    role: r.const("textbox"),
                    "aria-readonly": r.const("true"),
                    tabindex: r.const("0"),
                    "aria-label": function() {
                        return "Min: " + e.getMin()
                    }
                }, r.createElement("span", {
                    class: r.const("dcg-row-header")
                }, r.const("Min")), r.createElement("span", {
                    class: r.const("dcg-evaluation")
                }, r.createElement(o.default, {
                    latex: this.bindFn(this.getMin)
                }))))), r.createElement("tr", null, r.createElement("td", null, r.createElement("div", {
                    class: r.const("dcg-value"),
                    role: r.const("textbox"),
                    "aria-readonly": r.const("true"),
                    tabindex: r.const("0"),
                    "aria-label": function() {
                        return "Q1: " + e.getQ1()
                    }
                }, r.createElement("span", {
                    class: r.const("dcg-row-header")
                }, r.const("Q1")), r.createElement("span", {
                    class: r.const("dcg-evaluation")
                }, r.createElement(o.default, {
                    latex: this.bindFn(this.getQ1)
                }))))), r.createElement("tr", null, r.createElement("td", null, r.createElement("div", {
                    class: r.const("dcg-value"),
                    role: r.const("textbox"),
                    "aria-readonly": r.const("true"),
                    tabindex: r.const("0"),
                    "aria-label": function() {
                        return "Median: " + e.getMedian()
                    }
                }, r.createElement("span", {
                    class: r.const("dcg-row-header")
                }, r.const("Median")), r.createElement("span", {
                    class: r.const("dcg-evaluation")
                }, r.createElement(o.default, {
                    latex: this.bindFn(this.getMedian)
                }))))), r.createElement("tr", null, r.createElement("td", null, r.createElement("div", {
                    class: r.const("dcg-value"),
                    role: r.const("textbox"),
                    "aria-readonly": r.const("true"),
                    tabindex: r.const("0"),
                    "aria-label": function() {
                        return "Q3: " + e.getQ3()
                    }
                }, r.createElement("span", {
                    class: r.const("dcg-row-header")
                }, r.const("Q3")), r.createElement("span", {
                    class: r.const("dcg-evaluation")
                }, r.createElement(o.default, {
                    latex: this.bindFn(this.getQ3)
                }))))), r.createElement("tr", null, r.createElement("td", null, r.createElement("div", {
                    class: r.const("dcg-value"),
                    role: r.const("textbox"),
                    "aria-readonly": r.const("true"),
                    tabindex: r.const("0"),
                    "aria-label": function() {
                        return "Max: " + e.getMax()
                    }
                }, r.createElement("span", {
                    class: r.const("dcg-row-header")
                }, r.const("Max")), r.createElement("span", {
                    class: r.const("dcg-evaluation")
                }, r.createElement(o.default, {
                    latex: this.bindFn(this.getMax)
                })))))))
            }, t.prototype.getMin = function() {
                var e = i.getStatsResults(this.model);
                return e ? a.numberToDecimalString(e.min) : ""
            }, t.prototype.getQ1 = function() {
                var e = i.getStatsResults(this.model);
                return e ? a.numberToDecimalString(e.q1) : ""
            }, t.prototype.getMedian = function() {
                var e = i.getStatsResults(this.model);
                return e ? a.numberToDecimalString(e.median) : ""
            }, t.prototype.getQ3 = function() {
                var e = i.getStatsResults(this.model);
                return e ? a.numberToDecimalString(e.q3) : ""
            }, t.prototype.getMax = function() {
                var e = i.getStatsResults(this.model);
                return e ? a.numberToDecimalString(e.max) : ""
            }, t
        }(r.Class);
        t.default = s
    }), define("loadcss!expressions/expression-edit-actions", function() {}), define("expressions/expression-edit-actions", ["require", "exports", "tslib", "jquery", "dcgview", "lib/tooltip", "graphing/dragmode", "expressions/styles", "graphing-calc/models/expression", "lib/aria", "loadcss!./expression-edit-actions"], function(e, t, n, r, i, o, a, s, l, c) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var u = i.Components.If,
            p = function(e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return n.__extends(t, e), t.prototype.init = function() {
                    this.controller = this.props.controller()
                }, t.prototype.template = function() {
                    var e = this;
                    return i.createElement(u, {
                        predicate: function() {
                            return e.controller.isInEditListMode()
                        }
                    }, function() {
                        return i.createElement("span", {
                            class: function() {
                                return {
                                    "dcg-expression-edit-actions": !0,
                                    "dcg-limited-height": e.limitedHeight()
                                }
                            },
                            style: function() {
                                return {
                                    background: e.controller.getBackgroundColor()
                                }
                            },
                            didMount: function() {
                                e.controller.isInEditListMode() && c.alert(e.controller.t("Edit list mode on."))
                            },
                            didUnmount: function() {
                                e.controller.isInEditListMode() || c.alert(e.controller.t("Edit list mode off."))
                            }
                        }, i.createElement(u, {
                            predicate: function() {
                                return !e.controller.hasBackgroundColor()
                            }
                        }, function() {
                            return i.createElement("span", {
                                class: i.const("dcg-graphic"),
                                handleEvent: i.const("true ")
                            })
                        }), i.createElement(u, {
                            predicate: e.bindFn(e.canConvertToTable)
                        }, function() {
                            return i.createElement(o.Tooltip, {
                                tooltip: function() {
                                    return e.controller.t("Convert to Table")
                                },
                                gravity: e.const("s")
                            }, i.createElement("span", {
                                class: i.const("dcg-action-createtable dcg-exp-action-button"),
                                handleEvent: i.const("true"),
                                role: i.const("button"),
                                tabindex: i.const("0"),
                                "aria-label": function() {
                                    return e.controller.t("Convert to Table")
                                },
                                onTap: e.bindFn(e.onCreateTable)
                            }, i.createElement("i", {
                                class: i.const("dcg-icon-table")
                            })))
                        }), i.createElement(u, {
                            predicate: e.bindFn(e.canDuplicate)
                        }, function() {
                            return i.createElement(o.Tooltip, {
                                tooltip: function() {
                                    return e.controller.t("Duplicate")
                                },
                                gravity: e.const("s")
                            }, i.createElement("span", {
                                class: i.const("dcg-duplicate-btn dcg-exp-action-button"),
                                handleEvent: i.const("true"),
                                role: i.const("button"),
                                tabindex: i.const("0"),
                                "aria-label": function() {
                                    return e.controller.t("Duplicate")
                                },
                                onTap: e.bindFn(e.onDuplicateWithoutFocus)
                            }, i.createElement("i", {
                                class: i.const("dcg-icon-duplicate")
                            })))
                        }), i.createElement(o.Tooltip, {
                            tooltip: function() {
                                return e.controller.t("Delete")
                            },
                            gravity: e.const("sw")
                        }, i.createElement("span", {
                            class: i.const("dcg-delete-btn dcg-exp-action-button"),
                            handleEvent: i.const("true"),
                            role: i.const("button"),
                            tabindex: i.const("0"),
                            "aria-label": function() {
                                return e.controller.t("Delete")
                            },
                            onTap: e.bindFn(e.onDelete)
                        }, i.createElement("i", {
                            class: i.const("dcg-icon-remove")
                        }))))
                    })
                }, t.prototype.model = function() {
                    return this.controller.getItemModel(this.props.id())
                }, t.prototype.canConvertToTable = function() {
                    var e = this.model();
                    return !(!e || "expression" !== e.type || !e.isTableable)
                }, t.prototype.canDuplicate = function() {
                    var e = this.model();
                    return !(!e || "expression" !== e.type || this.isSlider())
                }, t.prototype.limitedHeight = function() {
                    var e = this.model();
                    return e && ("image" === e.type || this.isSlider())
                }, t.prototype.isSlider = function() {
                    var e = this.model();
                    return e && "expression" === e.type && e.sliderExists
                }, t.prototype.onCreateTable = function() {
                    var e = this.model();
                    if (e && "expression" === e.type) {
                        var t = e.formula;
                        if (e.isTableable) {
                            var n, r = t.table_info,
                                i = e.index,
                                o = [],
                                c = [];
                            if (r.values)
                                for (n = 0; n < r.values.length; n++) {
                                    var u = r.values[n][0];
                                    o.push(isNaN(u) ? "" : u + "");
                                    var p = r.values[n][1];
                                    c.push(isNaN(p) ? "" : p + "")
                                } else
                                    for (n = -2; n <= 2; n++) o.push(n + ""), c.push("");
                            var d = {
                                    id: this.controller.generateId(),
                                    type: "table",
                                    columns: [{
                                        id: this.controller.generateId(),
                                        latex: r.independent_variable,
                                        color: this.controller.getNextColor(),
                                        hidden: !1,
                                        values: o,
                                        points: !0,
                                        lines: !1,
                                        dragMode: a.DragMode.NONE,
                                        pointStyle: s.PointStyle.POINT,
                                        lineStyle: s.LineStyle.SOLID
                                    }, {
                                        id: this.controller.generateId(),
                                        latex: r.dependent_column,
                                        color: e.color,
                                        hidden: !1,
                                        values: c,
                                        points: !0,
                                        lines: !(l.isPointOrPointList(e) || e.hidden),
                                        dragMode: a.DragMode.NONE,
                                        pointStyle: s.PointStyle.POINT,
                                        lineStyle: s.LineStyle.SOLID
                                    }]
                                },
                                h = this.controller;
                            this.controller.dispatch({
                                type: "set-edit-list-mode",
                                isEditListMode: !1,
                                focusExpressionList: !1
                            }), r.by_reference ? this.controller.dispatch({
                                type: "insert-item-at-index",
                                index: i + 1,
                                state: d,
                                folderId: e.folderId,
                                focus: !0
                            }) : this.controller.dispatch({
                                type: "replace-item-at-index",
                                index: i,
                                state: d,
                                focus: !0
                            });
                            var f = function() {
                                h.dispatch({
                                    type: "undo"
                                }), h.dispatch({
                                    type: "set-edit-list-mode",
                                    isEditListMode: !0,
                                    focusExpressionList: !1
                                })
                            };
                            this.controller.dispatch({
                                type: "toast/show",
                                toast: {
                                    message: this.controller.t("Table created."),
                                    undoCallback: f
                                }
                            })
                        }
                    }
                }, t.prototype.onDelete = function(e) {
                    var t = this,
                        n = ':input, [role="textbox"], .dcg-edit-list-mathquill, [tabindex="0"]',
                        i = r(e.target).closest(".dcg-expressionitem"),
                        o = i.next(),
                        a = i.prev();
                    this.controller.dispatch({
                        type: "delete-item-and-animate-out",
                        id: this.props.id(),
                        setFocusAfterDelete: !1
                    }), "keyboard" === e.device && this.controller.runAfterDispatch(function() {
                        var e;
                        e = o.length ? o.find(n).first() : a.length ? a.find(n).first() : t.controller.find$(".dcg-action-toggle-edit"), e.focus()
                    })
                }, t.prototype.onDuplicateWithoutFocus = function() {
                    this.controller.dispatch({
                        type: "duplicate-expression",
                        id: this.props.id()
                    })
                }, t
            }(i.Class);
        t.ExpressionEditActions = p
    }), define("loadcss!expressions/suggested-zoom-view", function() {}), define("expressions/suggested-zoom-view", ["require", "exports", "tslib", "dcgview", "lib/tooltip", "loadcss!./suggested-zoom-view"], function(e, t, n, r, i) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var o = r.Components.If,
            a = function(e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return n.__extends(t, e), t.prototype.init = function() {
                    this.controller = this.props.controller(), this.model = this.props.model()
                }, t.prototype.template = function() {
                    var e = this;
                    return r.createElement(o, {
                        predicate: function() {
                            return e.controller.shouldExpressionZoomFit(e.model)
                        }
                    }, function() {
                        return r.createElement("div", {
                            class: r.const("dcg-suggested-zoom-view dcg-do-blur"),
                            handleEvent: r.const(!0)
                        }, r.createElement(i.Tooltip, {
                            tooltip: e.bindFn(e.getZoomText),
                            gravity: function() {
                                return "e"
                            }
                        }, r.createElement("i", {
                            onTap: e.bindFn(e.onZoom),
                            role: r.const("button"),
                            "aria-label": e.bindFn(e.getZoomText),
                            class: r.const("dcg-icon-zoom-fit")
                        })))
                    })
                }, t.prototype.getZoomText = function() {
                    return this.controller.t("Zoom Fit")
                }, t.prototype.onZoom = function() {
                    this.controller.dispatch({
                        type: "expression-zoom-fit",
                        id: this.model.id
                    })
                }, t
            }(r.Class);
        t.SuggestedZoomView = a
    }), define("loadcss!expressions/clickable_info_view", function() {}), define("expressions/clickable_info_view", ["require", "exports", "tslib", "dcgview", "graphing-calc/models/expression", "graphing-calc/models/image", "dcgview-helpers/mathquill-view", "loadcss!./clickable_info_view"], function(e, t, n, r, i, o, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var s = r.Components.Input,
            l = function(e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return n.__extends(t, e), t.prototype.init = function() {
                    this.controller = this.props.controller(), this.model = this.props.model(), this.id = this.model.id
                }, t.prototype.template = function() {
                    var e = this;
                    return r.createElement("div", {
                        class: r.const("dcg-clickable-info-container dcg-do-blur"),
                        tapboundary: r.const("true"),
                        handleEvent: r.const("true")
                    }, r.createElement("div", {
                        class: r.const("dcg-smaller-font")
                    }, r.createElement("div", {
                        role: r.const("group"),
                        "aria-label": function() {
                            return e.controller.t("Clickable Properties")
                        }
                    }, r.createElement("div", {
                        role: r.const("heading"),
                        "aria-level": r.const("2"),
                        class: r.const("dcg-expression-footer-title")
                    }, function() {
                        return e.controller.t("Clickable Properties")
                    }), this.const(this.controller.t("set")), this.makeMQInput({
                        prop: "assignment",
                        name: function() {
                            return e.controller.t("Assignment")
                        }
                    }), this.const(this.controller.t("to")), this.makeMQInput({
                        prop: "expression",
                        name: function() {
                            return e.controller.t("Expression")
                        }
                    })), r.createElement(s, {
                        "aria-label": function() {
                            return e.controller.t("Screen reader label")
                        },
                        placeholder: function() {
                            return e.controller.t("Add screen reader label")
                        },
                        value: function() {
                            return e.model.clickableInfo.description
                        },
                        onInput: function(t) {
                            return e.controller.dispatch({
                                type: "set-clickableinfo-prop",
                                id: e.model.id,
                                prop: "description",
                                value: t
                            })
                        }
                    })))
                }, t.prototype.makeMQInput = function(e) {
                    var t = this;
                    return r.createElement(a.default, {
                        latex: function() {
                            return t.getClickableInfoPropLatex(e.prop)
                        },
                        hasError: function() {
                            return t.isClickableInfoPropInvalid(e.prop)
                        },
                        isFocused: function() {
                            return t.isInputFocused(e.prop)
                        },
                        onFocusedChanged: function(n) {
                            return t.handleFocusedChanged(e.prop, n)
                        },
                        config: this.const({}),
                        getAriaLabel: e.name,
                        onUserPressedKey: function(n, r) {
                            return t.handlePressedKey(n, r, e.prop)
                        },
                        getAriaPostLabel: function() {
                            return ""
                        },
                        onUserChangedLatex: function(n) {
                            return t.handleLatexChanged(e.prop, n)
                        },
                        capExpressionSize: function() {
                            return !!t.model.controller.getGraphSettings().config.capExpressionSize
                        }
                    })
                }, t.prototype.handlePressedKey = function(e, t, n) {
                    if ("Esc" === e) return void this.controller.dispatch({
                        type: "set-focus-location",
                        location: void 0
                    });
                    if ("Enter" === e) return this.controller.dispatch({
                        type: "on-special-key-pressed",
                        key: "Enter"
                    });
                    var r = a.default.getFocusedMathquill();
                    r && (r.keystroke(e, t), this.handleLatexChanged(n, r.latex()))
                }, t.prototype.isInputFocused = function(e) {
                    var t = this.controller.getFocusLocation();
                    return !(!t || "clickableinfo-prop" !== t.type || t.id !== this.id) && t.location === e
                }, t.prototype.handleFocusedChanged = function(e, t) {
                    t ? this.controller.dispatch({
                        type: "set-focus-location",
                        location: {
                            type: "clickableinfo-prop",
                            id: this.id,
                            location: e
                        }
                    }) : this.controller.dispatch({
                        type: "blur-focus-location",
                        location: {
                            type: "clickableinfo-prop",
                            id: this.id,
                            location: e
                        }
                    })
                }, t.prototype.getClickableInfoPropLatex = function(e) {
                    return "image" === this.model.type ? o.getClickableInfoPropLatex(this.model, e) : i.getClickableInfoPropLatex(this.model, e)
                }, t.prototype.isClickableInfoPropInvalid = function(e) {
                    return "image" === this.model.type ? !o.isClickableInfoPropValid(this.model, e) : !i.isClickableInfoPropValid(this.model, e)
                }, t.prototype.handleLatexChanged = function(e, t) {
                    if (this.getClickableInfoPropLatex(e) !== t)
                        if ("assignment" === e) this.controller.dispatch({
                            type: "set-clickableinfo-prop",
                            id: this.id,
                            prop: e,
                            value: t
                        });
                        else {
                            if ("expression" !== e) {
                                var n = e;
                                return n
                            }
                            this.controller.dispatch({
                                type: "set-clickableinfo-prop",
                                id: this.id,
                                prop: e,
                                value: t
                            })
                        }
                }, t
            }(r.Class);
        t.ClickableInfoView = l
    }), define("loadcss!expressions/expression-footer", function() {}), define("expressions/expression_view", ["require", "exports", "config", "tslib", "browser", "jquery", "./abstract-item-view", "dcgview-helpers/mathquill-view", "dcgview-helpers/static-mathquill-view", "lib/conditional_blur", "./expression-icon-view", "./evaluation-view", "expressions/unresolved_view", "expressions/domain_view", "expressions/regression_view", "expressions/slider_view", "expressions/slider_speed_view", "expressions/promptslider_view", "expressions/label_view", "expressions/distribution_parameters_view", "expressions/visualization_parameters_view", "expressions/ttest_footer_view", "expressions/stats_footer_view", "graphing-calc/models/expression", "graphing/label", "./expression-edit-actions", "./suggested-zoom-view", "dcgview", "./clickable_info_view", "jquery.handleevent", "loadcss!./expression-footer"], function(e, t, n, r, i, o, a, s, l, c, u, p, d, h, f, m, g, y, v, b, x, w, _, S, E, M, I, T, C) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var k = T.Components,
            D = k.If,
            P = k.SwitchUnion,
            L = function(e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return r.__extends(t, e), t.prototype.didMount = function() {
                    this.onItemViewMounted()
                }, t.prototype.didMountRootNode = function(e) {
                    this.rootNode = e
                }, t.prototype.willUnmount = function() {
                    this.onItemViewUnmounted(), clearTimeout(this.dispatchBlurTimeout)
                }, t.prototype.didUpdate = function() {
                    this.wasMainLatexFocusedLastUpdate = this.isFocused()
                }, t.prototype.template = function() {
                    var e = this;
                    return T.createElement("div", {
                        class: function() {
                            return {
                                "dcg-do-not-blur": !0,
                                "dcg-expressionitem": !0,
                                "dcg-mathitem": !0,
                                "dcg-inFolder": !!e.model.folderId,
                                "dcg-selected": e.controller.isItemSelected(e.id) && !e.controller.isInEditListMode(),
                                "dcg-dragging": !!e.controller.isItemBeingDragged(e.id),
                                "dcg-isPlaying": e.isSliderPlaying(),
                                "dcg-hasSlider": e.hasSlider(),
                                "dcg-hasEvaluation": e.controller.shouldShowEvaluationForItem(e.id),
                                "dcg-hasRegression": e.hasRegression(),
                                "dcg-hasDomain": e.hasDomain()
                            }
                        },
                        "expr-id": function() {
                            return e.model.id
                        },
                        didMount: this.bindFn(this.didMountRootNode)
                    }, T.createElement("div", {
                        class: T.const("dcg-fade-container"),
                        onTapStart: this.bindFn(this.onMouseSelect),
                        onTap: this.bindFn(this.onMouseSelect)
                    }, T.createElement("div", {
                        class: T.const("dcg-main")
                    }, T.createElement(D, {
                        predicate: function() {
                            return !e.controller.isInEditListMode()
                        }
                    }, function() {
                        return T.createElement(s.default, {
                            latex: function() {
                                return S.getDisplayLatex(e.model)
                            },
                            getAriaLabel: e.bindFn(e.getAriaLabel),
                            getAriaPostLabel: e.bindFn(e.getFormulaAria),
                            isFocused: function() {
                                return e.isFocused()
                            },
                            capExpressionSize: function() {
                                return !!e.controller.getGraphSettings().config.capExpressionSize
                            },
                            config: e.const({}),
                            hasError: e.const(!1),
                            onUserPressedKey: function(t, n) {
                                return e.handlePressedKey(t, n)
                            },
                            onUserChangedLatex: function(t) {
                                return e.handleLatexChanged(t)
                            },
                            onFocusedChanged: function(t, n) {
                                return e.handleMQFocusedChanged(t, n)
                            }
                        }, T.createElement("div", {
                            class: T.const("dcg-expression-mathquill")
                        }))
                    }), T.createElement(D, {
                        predicate: function() {
                            return e.controller.isInEditListMode()
                        }
                    }, function() {
                        return T.createElement("div", {
                            class: T.const("dcg-edit-list-mathquill"),
                            tabindex: T.const("0"),
                            onTap: e.bindFn(e.exitEditListMode)
                        }, T.createElement(l.default, {
                            latex: function() {
                                return S.getDisplayLatex(e.model)
                            },
                            getAriaLabel: e.bindFn(e.getAriaLabel)
                        }))
                    })), T.createElement("i", {
                        class: T.const("dcg-icon-remove dcg-top-level-delete"),
                        handleEvent: T.const("true"),
                        onTap: this.bindFn(this.onDelete)
                    }), T.createElement(D, {
                        predicate: this.bindFn(this.hasSlider)
                    }, function() {
                        return T.createElement(g.default, {
                            model: e.props.model,
                            controller: e.props.controller
                        })
                    }), T.createElement(D, {
                        predicate: this.bindFn(this.shouldShowFooter)
                    }, function() {
                        return T.createElement("div", {
                            class: e.getFooterClass()
                        }, P(function() {
                            return e.getFooterType()
                        }, {
                            none: function() {},
                            regression: function() {
                                return T.createElement(f.default, {
                                    model: e.props.model,
                                    controller: e.props.controller
                                })
                            },
                            label: function() {
                                return T.createElement(v.default, {
                                    model: e.props.model,
                                    controller: e.props.controller
                                })
                            },
                            slider: function() {
                                return T.createElement(m.default, {
                                    model: e.props.model,
                                    controller: e.props.controller
                                })
                            },
                            domain: function() {
                                return T.createElement(h.default, {
                                    model: e.props.model,
                                    controller: e.props.controller
                                })
                            },
                            evaluation: function() {
                                return T.createElement(p.default, {
                                    id: function() {
                                        return e.props.model().id
                                    },
                                    dependent: function() {
                                        return e.model.dependent || ""
                                    },
                                    val: function() {
                                        return e.controller.getEvaluationValueForItem(e.id)
                                    },
                                    controller: e.props.controller,
                                    focusable: e.const(!1)
                                })
                            },
                            distribution: function() {
                                return T.createElement(b.default, {
                                    model: e.props.model,
                                    controller: e.props.controller
                                })
                            },
                            visualization: function() {
                                return T.createElement(x.default, {
                                    model: e.props.model,
                                    controller: e.props.controller
                                })
                            },
                            ttest: function() {
                                return T.createElement(w.default, {
                                    model: e.props.model,
                                    controller: e.props.controller
                                })
                            },
                            stats: function() {
                                return T.createElement(_.default, {
                                    model: e.props.model,
                                    controller: e.props.controller
                                })
                            },
                            unresolved: function() {
                                return T.createElement(d.default, {
                                    controller: e.props.controller
                                })
                            }
                        }), T.createElement(D, {
                            predicate: e.bindFn(e.shouldShowClickableProperties)
                        }, function() {
                            return T.createElement(C.ClickableInfoView, {
                                controller: function() {
                                    return e.props.controller()
                                },
                                model: function() {
                                    return e.model
                                }
                            })
                        }), T.createElement(D, {
                            predicate: e.bindFn(e.shouldShowSliderPrompt)
                        }, function() {
                            return T.createElement(y.default, {
                                model: e.props.model,
                                controller: e.props.controller
                            })
                        }))
                    })), T.createElement("span", {
                        class: T.const("dcg-tab dcg-action-drag dcg-action-icon-touch"),
                        handleevent: T.const("true"),
                        tapboundary: T.const("true"),
                        disablescroll: T.const("true"),
                        style: T.const("touch-action:none"),
                        onTapStart: this.bindFn(this.onDragPending)
                    }, T.createElement("span", {
                        class: T.const("dcg-num")
                    }, function() {
                        return e.model.displayIndex
                    }), T.createElement("div", {
                        class: T.const("dcg-tab-interior dcg-action-icon-mouse")
                    }, T.createElement(u.default, {
                        model: this.props.model,
                        controller: this.props.controller
                    })), T.createElement(I.SuggestedZoomView, {
                        model: this.props.model,
                        controller: this.props.controller
                    })), T.createElement(M.ExpressionEditActions, {
                        controller: this.props.controller,
                        id: function() {
                            return e.model.id
                        }
                    }))
                }, t.prototype.shouldShowFooter = function() {
                    return !!this.shouldShowSliderPrompt() || (!!this.shouldShowClickableProperties() || "none" !== this.getFooterType())
                }, t.prototype.shouldShowClickableProperties = function() {
                    return !!this.controller.canAuthorClickableObjects() && (!!S.isClickableAllowed(this.model) && this.model.clickableInfo.enabled)
                }, t.prototype.getFooterType = function() {
                    return this.hasRegression() ? "regression" : this.shouldShowLabelView() ? "label" : this.hasSlider() ? "slider" : this.hasDomain() ? "domain" : this.isTTest() ? "ttest" : this.isStats() ? "stats" : this.controller.shouldShowEvaluationForItem(this.id) ? "evaluation" : this.isToplevelDistribution() ? "distribution" : this.isVisualization() ? "visualization" : this.model.unresolved ? "unresolved" : "none"
                }, t.prototype.getFooterClass = function() {
                    return this.isFirstRender() ? this.const("dcg-expression-bottom dcg-indent-in-folder") : this.const("dcg-expression-bottom dcg-indent-in-folder dcg-fadein-bottom")
                }, t.prototype.onCreateSliders = function(e) {
                    this.controller.dispatch({
                        type: "create-sliders-for-item",
                        id: this.id,
                        variables: e
                    })
                }, t.prototype.shouldShowLabelView = function() {
                    return n.get("labels") && S.isPointOrPointList(this.model)
                }, t.prototype.shouldShowSliderPrompt = function() {
                    return this.model.missingVariables.length > 0
                }, t.prototype.hasRegression = function() {
                    return !(!this.model.formula || !this.model.formula.is_regression)
                }, t.prototype.hasDomain = function() {
                    return S.hasDomain(this.model)
                }, t.prototype.isToplevelDistribution = function() {
                    return S.isToplevelDistribution(this.model)
                }, t.prototype.isVisualization = function() {
                    return S.isVisualization(this.model)
                }, t.prototype.isTTest = function() {
                    return S.isTTest(this.model)
                }, t.prototype.isStats = function() {
                    return S.isStats(this.model)
                }, t.prototype.hasSlider = function() {
                    return !!this.model.sliderExists
                }, t.prototype.isSliderPlaying = function() {
                    return !(!this.model.sliderExists || !this.model.slider.isPlaying)
                }, t.prototype.getLabelOptions = function() {
                    return this.controller.getEvaluationLabelOptionsForItem(this.model.id)
                }, t.prototype.getAriaLabel = function() {
                    if (this.shouldShowLabelView()) {
                        var e;
                        e = this.model.label && "" !== this.model.label ? this.model.label : this.controller.t("Label");
                        return this.model.showLabel ? e : this.controller.t("Hidden __label__", {
                            label: e
                        })
                    }
                    return this.controller.t("Expression __index__", {
                        index: this.model.displayIndex
                    })
                }, t.prototype.getFormulaAria = function() {
                    var e = this.model.formula,
                        t = "";
                    if (!e) return t;
                    if (S.isEmpty(this.model)) return t;
                    if (this.controller.shouldShowEvaluationForItem(this.id)) {
                        t = "equals ";
                        var n = e.zero_values && e.zero_values.length ? e.zero_values[0].val : e.constant_value;
                        Array.isArray(n) ? t += n.length + " element list." : t += E.truncatedAriaLabel(n, this.getLabelOptions())
                    } else e.error && !this.shouldShowSliderPrompt() ? t = this.controller.unpack(e.error) : S.isToplevelDistribution(this.model) ? t = this.controller.t("is distribution. ") : this.isTTest() && (t = this.controller.t("is T test. To access statistics, press Tab."));
                    if (this.model.shouldGraph && (e.is_graphable || e.is_regression)) {
                        e.is_graphable && e.is_regression ? t += this.controller.t("Has graph and regression. To access statistics, press Tab.") : e.is_regression ? t += this.controller.t("Has regression. To access statistics, press Tab.") : t += this.controller.t("Has graph.");
                        var r = this.controller.getAudioGraph();
                        r && r.agNavigator.canTrace(this.model) && (i.IS_APPLE ? t += this.controller.t(" To audio trace, press OPTION+T.") : t += this.controller.t(" To audio trace, press ALT+T."))
                    }
                    return t
                }, t.prototype.handlePressedKey = function(e, t) {
                    var n = s.default.getFocusedMathquill();
                    if (n) {
                        if ("Esc" === e) return c.default(), void(this.hasSlider() && this.controller.dispatch({
                            type: "set-focus-location",
                            location: {
                                type: "slider-thumb",
                                id: this.model.id
                            }
                        }));
                        if ("Up" === e || "Down" === e) {
                            return s.default.applyArrowKeyAndReturnIfWasAtBounds(n, e, t) ? this.controller.dispatch({
                                type: "on-special-key-pressed",
                                key: e
                            }) : void 0
                        }
                        if ("Delete" === e || "Backspace" === e) {
                            if (S.isEmpty(this.model)) return this.controller.dispatch({
                                type: "on-special-key-pressed",
                                key: e
                            })
                        } else if ("Enter" === e) return t && (t.preventDefault(), t.stopPropagation()), this.controller.dispatch({
                            type: "on-special-key-pressed",
                            key: "Enter"
                        });
                        n.keystroke(e, t), this.handleLatexChanged(n.latex())
                    }
                }, t.prototype.handleLatexChanged = function(e) {
                    e !== this.model.latex && this.controller.dispatch({
                        type: "set-item-latex",
                        id: this.id,
                        latex: e
                    })
                }, t.prototype.doesNodeBelongToSliderLimit = function(e) {
                    return !!e && (!!this.rootNode.contains(e) && !!o(e).closest("[data-dcg-limit]").length)
                }, t.prototype.handleMQFocusedChanged = function(e, t) {
                    e ? this.controller.dispatch({
                        type: "set-focus-location",
                        location: {
                            type: "expression",
                            id: this.id
                        }
                    }) : this.doesNodeBelongToSliderLimit(t.relatedTarget) || this.controller.dispatch({
                        type: "blur-focus-location",
                        location: {
                            type: "expression",
                            id: this.id
                        }
                    })
                }, t.prototype.onMouseSelect = function(e) {
                    "keyboard" !== e.device && ("dcg-tap" === e.type && "mouse" === e.device || "dcg-tapstart" === e.type && "touch" === e.device || e.wasHandled() || (e.handle(), this.controller.dispatch({
                        type: "set-focus-location",
                        location: {
                            type: "expression",
                            id: this.id
                        }
                    })))
                }, t.prototype.isFocused = function() {
                    var e = this.controller.getFocusLocation();
                    return !!e && ("expression" === e.type && e.id === this.id)
                }, t.prototype.isSliderThumbFocused = function() {
                    var e = this.controller.getFocusLocation();
                    return !!e && ("slider-thumb" === e.type && e.id === this.id)
                }, t
            }(a.default);
        t.default = L
    }), define("loadcss!expressions/smart_textarea", function() {}), define("expressions/smart_textarea", ["require", "exports", "tslib", "keys", "browser", "dcgview", "jquery", "lib/conditional_blur", "jquery.handleevent", "loadcss!./smart_textarea"], function(e, t, n, r, i, o, a, s) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var l = o.Components.Textarea,
            c = function(e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return n.__extends(t, e), t.prototype.template = function() {
                    var e = this;
                    return o.createElement("div", {
                        class: o.const("dcg-smart-textarea-container")
                    }, o.createElement("div", {
                        class: o.const("dcg-displayTextarea dcg-fixed-width-element"),
                        didMount: this.bindFn(this.didMountDisplay)
                    }), o.createElement(l, {
                        class: function() {
                            return {
                                "dcg-do-blur": !0,
                                "dcg-fixed-width-element": !0,
                                "dcg-smart-textarea": !0,
                                "dcg-empty": !e.props.text()
                            }
                        },
                        "aria-label": function() {
                            return e.props.ariaLabel ? e.props.ariaLabel() : void 0
                        },
                        placeholder: this.props.placeholder,
                        readonly: function() {
                            return !!e.props.readonly() || void 0
                        },
                        value: this.props.text,
                        onInput: this.props.onInput,
                        didMount: this.bindFn(this.didMountTextarea),
                        onKeydown: this.bindFn(this.onKeydownEvent)
                    }))
                }, t.prototype.getDisplayTextHTML = function() {
                    var e = this.props.text() || "";
                    if (e = e.replace(/</g, "&lt;").replace(/>/g, "&gt;"), !this.props.showLinks()) return e;
                    var t = /(\b(https?|ftp):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi;
                    return e = e.replace(t, "<a href='$1' target ='_blank'>$1</a>")
                }, t.prototype.willUnmount = function() {
                    this.textareaNode = void 0
                }, t.prototype.didMountDisplay = function(e) {
                    this.displayNode = e, a(e).on("touchend", function(e) {
                        e.preventDefault()
                    }), a(e).on("dcg-tap dcg-tapstart", "a", function(e) {
                        e.handle()
                    }), this.renderDisplayText()
                }, t.prototype.didMountTextarea = function(e) {
                    var t = this;
                    this.textareaNode = e, a(e).on("dcg-tapstart", function(e) {
                        e.handle()
                    }), a(e).on("focusin focusout", function() {
                        return t.onFocusEvent()
                    }), this.updateFocused()
                }, t.prototype.didUpdate = function() {
                    this.updateFocused(), this.renderDisplayText()
                }, t.prototype.onFocusEvent = function() {
                    if (this.textareaNode) {
                        var e = document.activeElement === this.textareaNode;
                        this.shouldBeFocused() !== e && this.props.onFocusChange(e)
                    }
                }, t.prototype.renderDisplayText = function() {
                    if (this.displayNode) {
                        var e = this.getDisplayTextHTML();
                        this.lastDisplayTextHTML !== e && (this.lastDisplayTextHTML = e, this.displayNode.innerHTML = e)
                    }
                }, t.prototype.isFocused = function() {
                    return document.activeElement === this.textareaNode
                }, t.prototype.shouldBeFocused = function() {
                    return this.props.shouldFocus()
                }, t.prototype.updateFocused = function() {
                    if (this.textareaNode) {
                        var e = this.isFocused(),
                            t = this.shouldBeFocused();
                        if (e !== t)
                            if (t) {
                                if (i.IS_IPAD && i.IS_IN_IFRAME) return;
                                this.textareaNode.focus(), this.textareaNode.selectionStart = this.textareaNode.selectionEnd = this.textareaNode.value.length
                            } else this.textareaNode.blur()
                    }
                }, t.prototype.onKeydownEvent = function(e) {
                    var t = this.textareaNode;
                    if (t) {
                        var n = r.lookup(e);
                        if (this.props.readonly() && void 0 !== this.props.readonlyAction) return void(e.altKey || e.ctrlKey || e.metaKey || e.shiftKey || n !== r.ENTER && n !== r.SPACEBAR || (e.preventDefault(), this.props.readonlyAction()));
                        n !== r.ENTER || e.metaKey ? n === r.ESCAPE ? s.default() : n === r.UP ? 0 === t.selectionStart && 0 === t.selectionEnd && (e.preventDefault(), this.props.onSpecialKey("Up")) : n === r.DOWN ? t.selectionStart === t.value.length && t.selectionEnd === t.value.length && (e.preventDefault(), this.props.onSpecialKey("Down")) : n === r.BACKSPACE ? 0 === t.value.length && (e.preventDefault(), this.props.onSpecialKey("Backspace")) : n === r.DELETE && 0 === t.value.length && (e.preventDefault(), this.props.onSpecialKey("Delete")) : (e.preventDefault(), this.props.onSpecialKey("Enter")), this.props.onKeydown && this.props.onKeydown(e)
                    }
                }, t
            }(o.Class);
        t.default = c
    }), define("expressions/text_view", ["require", "exports", "tslib", "./abstract-item-view", "./smart_textarea", "dcgview", "./expression-edit-actions", "jquery.handleevent"], function(e, t, n, r, i, o, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var s = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.didMount = function() {
                this.onItemViewMounted()
            }, t.prototype.willUnmount = function() {
                this.onItemViewUnmounted()
            }, t.prototype.template = function() {
                var e = this;
                return o.createElement("div", {
                    class: function() {
                        return {
                            "dcg-do-not-blur": !0,
                            "dcg-expressionitem": !0,
                            "dcg-expressiontext": !0,
                            "dcg-inFolder": !!e.model.folderId,
                            "dcg-selected": !!e.controller.isItemSelected(e.id),
                            "dcg-dragging": !!e.controller.isItemBeingDragged(e.id)
                        }
                    },
                    "expr-id": function() {
                        return e.model.id
                    },
                    onTapStart: this.bindFn(this.onMouseSelect),
                    onTap: this.bindFn(this.onMouseSelect)
                }, o.createElement("div", {
                    class: o.const("dcg-fade-container")
                }, o.createElement("div", {
                    class: o.const("dcg-main")
                }, o.createElement(i.default, {
                    shouldFocus: this.bindFn(this.isFocused),
                    text: function() {
                        return e.model.text
                    },
                    placeholder: function() {
                        return e.controller.t("Enter a note...")
                    },
                    showLinks: function() {
                        return e.controller.areLinksEnabled()
                    },
                    onInput: this.bindFn(this.onInput),
                    onFocusChange: this.bindFn(this.onFocusChange),
                    onSpecialKey: this.bindFn(this.onSpecialKey),
                    readonly: function() {
                        return e.controller.isInEditListMode()
                    },
                    readonlyAction: this.bindFn(this.exitEditListMode)
                })), o.createElement("i", {
                    class: o.const("dcg-icon-remove dcg-top-level-delete"),
                    handleEvent: o.const("true"),
                    onTap: this.bindFn(this.onDelete)
                })), o.createElement("span", {
                    class: o.const("dcg-tab dcg-action-drag"),
                    handleevent: o.const("true"),
                    tapboundary: o.const("true"),
                    disablescroll: o.const("true"),
                    style: o.const("touch-action:none"),
                    onTapStart: this.bindFn(this.onDragPending)
                }, o.createElement("span", {
                    class: o.const("dcg-num")
                }, function() {
                    return e.model.displayIndex
                }), o.createElement("div", {
                    class: o.const("dcg-tab-interior")
                }), o.createElement("i", {
                    class: o.const("dcg-icon-text")
                })), o.createElement(a.ExpressionEditActions, {
                    controller: this.props.controller,
                    id: function() {
                        return e.model.id
                    }
                }))
            }, t.prototype.onInput = function(e) {
                this.controller.dispatch({
                    type: "set-note-text",
                    id: this.id,
                    text: e
                })
            }, t.prototype.onFocusChange = function(e) {
                e ? this.controller.dispatch({
                    type: "set-focus-location",
                    location: {
                        type: "text",
                        id: this.id
                    }
                }) : this.controller.dispatch({
                    type: "blur-focus-location",
                    location: {
                        type: "text",
                        id: this.id
                    }
                })
            }, t.prototype.onSpecialKey = function(e) {
                return this.controller.dispatch({
                    type: "on-special-key-pressed",
                    key: e
                })
            }, t.prototype.isFocused = function() {
                var e = this.controller.getFocusLocation();
                return !(!e || "text" !== e.type || e.id !== this.id)
            }, t
        }(r.default);
        t.default = s
    }), define("expressions/tables/table_icon_view", ["require", "exports", "tslib", "dcgview", "dcgview-helpers/tooltipped-error", "../circular-icon-view", "jquery.handleevent"], function(e, t, n, r, i, o) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var a = r.Components.SwitchUnion,
            s = function(e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return n.__extends(t, e), t.prototype.init = function() {
                    this.model = this.props.model(), this.controller = this.props.controller()
                }, t.prototype.template = function() {
                    var e = this;
                    return r.createElement("div", {
                        class: r.const("dcg-table-icon-container")
                    }, a(this.bindFn(this.typeOfIcon), {
                        error: function() {
                            return r.createElement(i.TooltippedError, {
                                error: function() {
                                    return e.controller.unpack(e.model.error)
                                },
                                gravity: e.const("se")
                            })
                        },
                        none: function() {
                            return r.createElement("span", null)
                        },
                        icon: function() {
                            return r.createElement("div", {
                                class: r.const("dcg-circular-icon-container"),
                                role: r.const("button"),
                                handleevent: r.const("true"),
                                onTap: function(t) {
                                    if (!t.wasHandled("dragdrop") && !t.wasLongheld()) return e.myOptionsOpen() ? e.toggleOptions() : e.controller.isInEditListMode() ? e.toggleOptions() : void e.toggleGraphShown()
                                },
                                didMount: function(t) {
                                    return e.rootElt = t
                                },
                                onLongHold: function(t) {
                                    t.handle("dcg-longhold"), t.handle("dcg-tap"), e.toggleOptions()
                                }
                            }, r.createElement(o.CircularIconView, {
                                iconType: e.bindFn(e.getIcon),
                                backgroundColor: function() {
                                    return e.model.color
                                }
                            }))
                        }
                    }))
                }, t.prototype.myOptionsOpen = function() {
                    var e = this.controller.getOpenItemMenu();
                    return !!e && e.model === this.model
                }, t.prototype.toggleOptions = function() {
                    this.controller.dispatch({
                        type: "toggle-item-settings-menu",
                        menu: {
                            type: "table-column",
                            model: this.model,
                            icon: this.rootElt,
                            focusFirstOption: !1
                        }
                    })
                }, t.prototype.didMountRoot = function(e) {
                    this.rootElt = e
                }, t.prototype.toggleGraphShown = function() {
                    this.controller.dispatch({
                        type: "toggle-tablecolumn-hidden",
                        tableId: this.model.table.id,
                        columnId: this.model.id
                    })
                }, t.prototype.hasError = function() {
                    return !!this.model.error
                }, t.prototype.getIcon = function() {
                    return this.model.shouldGraph ? this.controller.isInEditListMode() ? "none" : this.model.points && this.model.lines ? "table-points-and-lines" : this.model.points && !this.model.lines ? "table-points" : !this.model.points && this.model.lines ? "table-lines" : "none" : "hidden"
                }, t.prototype.typeOfIcon = function() {
                    return "" === this.model.latex ? "none" : this.controller.getGraphSettings().config.graphpaper ? this.model.error ? "error" : 0 === this.model.index ? "none" : "icon" : "none"
                }, t
            }(r.Class);
        t.default = s
    }), define("expressions/tables/header-view", ["require", "exports", "tslib", "browser", "dcgview", "./table_icon_view", "dcgview-helpers/mathquill-view", "dcgview-helpers/static-mathquill-view", "underscore", "graphing-calc/models/table", "graphing/dragmode"], function(e, t, n, r, i, o, a, s, l, c, u) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var p = i.Components.If,
            d = function(e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return n.__extends(t, e), t.prototype.init = function() {
                    this.model = this.props.model(), this.controller = this.props.controller(), this.table = this.model.table
                }, t.prototype.isRightSide = function() {
                    return this.lookupCellPosition().column >= this.table.columnModels.length - 1
                }, t.prototype.template = function() {
                    var e = this;
                    return i.createElement("div", {
                        role: i.const("columnheader"),
                        class: function() {
                            return {
                                "dcg-cell": !0,
                                "dcg-table-header": !0,
                                "dcg-do-not-blur": !0,
                                "dcg-left": 0 === e.model.index,
                                "dcg-right": e.isRightSide(),
                                "dcg-selected": e.shouldFocus(),
                                "dcg-error": !!e.model.error
                            }
                        },
                        index: function() {
                            return e.model.index
                        },
                        onTapStart: this.bindFn(this.focusThisCell)
                    }, i.createElement("div", {
                        class: i.const("dcg-inner-border")
                    }), i.createElement(p, {
                        predicate: function() {
                            return !e.isRightSide()
                        }
                    }, function() {
                        return i.createElement(o.default, {
                            model: e.props.model,
                            controller: e.props.controller
                        })
                    }), i.createElement(p, {
                        predicate: function() {
                            return !e.controller.isInEditListMode()
                        }
                    }, function() {
                        return i.createElement(a.default, {
                            latex: function() {
                                return e.model.latex || ""
                            },
                            isFocused: e.bindFn(e.shouldFocus),
                            capExpressionSize: function() {
                                return !!e.controller.getGraphSettings().config.capExpressionSize
                            },
                            config: e.const({}),
                            getAriaLabel: e.bindFn(e.getAriaLabel),
                            getAriaPostLabel: e.bindFn(e.getAriaPostLabel),
                            hasError: e.const(!1),
                            onUserPressedKey: function(t, n) {
                                return e.handlePressedKey(t, n)
                            },
                            onUserChangedLatex: function(t) {
                                return e.handleLatexChanged(t)
                            },
                            onFocusedChanged: function(t) {
                                return e.handleMQFocusedChanged(t)
                            },
                            selectOnFocus: e.const(!0)
                        }, i.createElement("span", {
                            class: i.const("dcg-math-field dcg-cell-math-content")
                        }))
                    }), i.createElement(p, {
                        predicate: function() {
                            return e.controller.isInEditListMode()
                        }
                    }, function() {
                        return i.createElement(s.default, {
                            latex: function() {
                                return e.model.latex || ""
                            },
                            getAriaLabel: e.bindFn(e.getAriaLabel)
                        }, i.createElement("span", {
                            class: i.const("dcg-math-field dcg-cell-math-content"),
                            role: i.const("textbox"),
                            "aria-roledescription": i.const("cell"),
                            "aria-readonly": i.const("true"),
                            tabindex: i.const("-1")
                        }))
                    }), i.createElement(p, {
                        predicate: function() {
                            return e.model.dragMode !== u.DragMode.NONE && !e.model.error
                        }
                    }, function() {
                        return i.createElement("span", {
                            class: i.const("dcg-drag-icon"),
                            "dcg-drag-mode": function() {
                                return e.model.dragMode
                            },
                            style: function() {
                                return {
                                    color: e.model.color
                                }
                            }
                        }, i.createElement("i", {
                            class: function() {
                                return {
                                    "dcg-icon-move": e.model.dragMode === u.DragMode.XY,
                                    "dcg-icon-move-horizontal": e.model.dragMode === u.DragMode.X,
                                    "dcg-icon-move-vertical": e.model.dragMode === u.DragMode.Y
                                }
                            }
                        }))
                    }), i.createElement("div", {
                        class: i.const("dcg-empty-line")
                    }), i.createElement(p, {
                        predicate: function() {
                            return e.isRightSide()
                        }
                    }, function() {
                        return i.createElement("span", {
                            class: i.const("dcg-fade-right")
                        })
                    }))
                }, t.prototype.focusThisCell = function(e) {
                    e.wasHandled() || (e.handle(), this.shouldFocus() || this.controller.dispatch({
                        type: "set-focus-location",
                        location: {
                            type: "table",
                            id: this.table.id,
                            location: this.lookupCellPosition()
                        }
                    }))
                }, t.prototype.lookupCellPosition = function() {
                    return {
                        row: 0,
                        column: this.model.index
                    }
                }, t.prototype.getAriaLabel = function() {
                    var e = this.lookupCellPosition();
                    return this.controller.t("Column header __column__", {
                        column: e.column + 1
                    })
                }, t.prototype.getAriaPostLabel = function() {
                    var e = "",
                        t = this.model;
                    return t.shouldGraph && (t.points || t.lines) && !c.isColumnEmpty(t) && (e = this.controller.t("Has graph."), r.IS_APPLE ? e += " " + this.controller.t("To audio trace, press OPTION+T.") : e += " " + this.controller.t(" To audio trace, press ALT+T.")), e
                }, t.prototype.handlePressedKey = function(e, t) {
                    var n = a.default.getFocusedMathquill();
                    if (n) {
                        a.default.handleKeystrokeAndDecideIfSpecialEvent(n, e, t) ? this.controller.dispatch({
                            type: "navigate-table-by-key",
                            id: this.table.id,
                            key: e
                        }) : this.handleLatexChanged(n.latex())
                    }
                }, t.prototype.handleLatexChanged = function(e) {
                    this.model.latex !== e && this.controller.dispatch({
                        type: "set-tablecell-latex",
                        tableId: this.table.id,
                        cell: this.lookupCellPosition(),
                        latex: e
                    })
                }, t.prototype.shouldFocus = function() {
                    return !this.controller.isInEditListMode() && l.isEqual(this.lookupCellPosition(), c.getSelectedCell(this.table))
                }, t.prototype.handleMQFocusedChanged = function(e) {
                    e ? this.controller.dispatch({
                        type: "set-focus-location",
                        location: {
                            type: "table",
                            id: this.table.id,
                            location: this.lookupCellPosition()
                        }
                    }) : this.controller.dispatch({
                        type: "blur-focus-location",
                        location: {
                            type: "table",
                            id: this.table.id,
                            location: this.lookupCellPosition()
                        }
                    })
                }, t
            }(i.Class);
        t.default = d
    }), define("expressions/tables/cell-view", ["require", "exports", "tslib", "keys", "dcgview", "dcgview-helpers/mathquill-view", "dcgview-helpers/static-mathquill-view", "underscore", "graphing-calc/models/table", "../../dcgview-helpers/tooltipped-error", "lib/conditional_blur"], function(e, t, n, r, i, o, a, s, l, c, u) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var p = i.Components.If,
            d = function(e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return n.__extends(t, e), t.prototype.init = function() {
                    this.model = this.props.model(), this.controller = this.props.controller(), this.table = this.model.column.table
                }, t.prototype.template = function() {
                    var e = this;
                    return i.createElement("div", {
                        role: i.const("gridcell"),
                        class: function() {
                            return {
                                "dcg-cell": !0,
                                "dcg-do-not-blur": !0,
                                "dcg-empty": e.isEmpty(),
                                "dcg-non-editable": !!e.model.column.disabled,
                                "dcg-error": !!e.hasError(),
                                "dcg-selected": e.shouldFocus()
                            }
                        },
                        onTapStart: this.bindFn(this.focusThisCell)
                    }, i.createElement("div", {
                        class: i.const("dcg-inner-border")
                    }), i.createElement(p, {
                        predicate: this.bindFn(this.hasError)
                    }, function() {
                        return i.createElement("span", {
                            class: i.const("dcg-table-icon-error-container")
                        }, i.createElement(c.TooltippedError, {
                            error: e.bindFn(e.getErrorMessage),
                            gravity: e.const("se"),
                            size: e.const("small")
                        }))
                    }), i.createElement(p, {
                        predicate: function() {
                            return !!e.model.column.disabled || e.controller.isInEditListMode()
                        }
                    }, function() {
                        return i.createElement(a.default, {
                            getAriaLabel: e.bindFn(e.getAriaLabel),
                            latex: function() {
                                return e.getValue()
                            }
                        }, i.createElement("span", {
                            class: i.const("dcg-math-field dcg-cell-math-content dcg-mathquill-input-span"),
                            role: i.const("textbox"),
                            "aria-roledescription": i.const("computed cell"),
                            "aria-readonly": i.const("true"),
                            tabindex: function() {
                                return e.controller.isInEditListMode() || e.isEmpty() ? -1 : 0
                            },
                            onKeyDown: e.bindFn(e.handleKeydownOnReadonlyCell),
                            manageFocus: e.const({
                                shouldBeFocused: e.bindFn(e.shouldFocusReadonlyCell),
                                onFocusedChanged: e.bindFn(e.handleFocusedChanged)
                            })
                        }))
                    }), i.createElement(p, {
                        predicate: function() {
                            return !e.model.column.disabled && !e.controller.isInEditListMode()
                        }
                    }, function() {
                        return i.createElement(o.default, {
                            latex: function() {
                                return e.getValue()
                            },
                            isFocused: e.bindFn(e.shouldFocusEditableCell),
                            capExpressionSize: function() {
                                return !!e.controller.getGraphSettings().config.capExpressionSize
                            },
                            config: e.const({}),
                            getAriaLabel: e.bindFn(e.getAriaLabel),
                            getAriaPostLabel: e.bindFn(e.getErrorMessage),
                            hasError: e.const(!1),
                            onUserPressedKey: function(t, n) {
                                return e.handlePressedKey(t, n)
                            },
                            onUserChangedLatex: function(t) {
                                return e.handleLatexChanged(t)
                            },
                            onFocusedChanged: function(t) {
                                return e.handleFocusedChanged(t)
                            },
                            selectOnFocus: e.const(!0)
                        }, i.createElement("span", {
                            class: i.const("dcg-math-field dcg-cell-math-content")
                        }))
                    }), i.createElement("div", {
                        class: i.const("dcg-empty-line")
                    }))
                }, t.prototype.focusThisCell = function(e) {
                    e.wasHandled() || (e.handle(), this.shouldFocus() || this.controller.dispatch({
                        type: "set-focus-location",
                        location: {
                            type: "table",
                            id: this.table.id,
                            location: this.lookupCellPosition()
                        }
                    }))
                }, t.prototype.handlePressedKey = function(e, t) {
                    var n = o.default.getFocusedMathquill();
                    if (n) {
                        var i = o.default.handleKeystrokeAndDecideIfSpecialEvent(n, e, t);
                        e === r.ESCAPE && u.default(), i ? this.controller.dispatch({
                            type: "navigate-table-by-key",
                            id: this.table.id,
                            key: e
                        }) : this.handleLatexChanged(n.latex())
                    }
                }, t.prototype.handleKeydownOnReadonlyCell = function(e) {
                    var t = r.lookup(e);
                    "Tab" !== t && (e.preventDefault(), "Esc" === t && u.default(), t && this.controller.dispatch({
                        type: "navigate-table-by-key",
                        id: this.table.id,
                        key: t
                    }))
                }, t.prototype.handleLatexChanged = function(e) {
                    this.getValue() !== e && this.controller.dispatch({
                        type: "set-tablecell-latex",
                        tableId: this.table.id,
                        cell: this.lookupCellPosition(),
                        latex: e
                    })
                }, t.prototype.shouldFocus = function() {
                    return s.isEqual(this.lookupCellPosition(), l.getSelectedCell(this.table))
                }, t.prototype.shouldFocusReadonlyCell = function() {
                    return !this.controller.isInEditListMode() && !!this.model.column.disabled && this.shouldFocus()
                }, t.prototype.shouldFocusEditableCell = function() {
                    return !this.model.column.disabled && this.shouldFocus()
                }, t.prototype.handleFocusedChanged = function(e) {
                    e ? this.controller.dispatch({
                        type: "set-focus-location",
                        location: {
                            type: "table",
                            id: this.table.id,
                            location: this.lookupCellPosition()
                        }
                    }) : this.controller.dispatch({
                        type: "blur-focus-location",
                        location: {
                            type: "table",
                            id: this.table.id,
                            location: this.lookupCellPosition()
                        }
                    })
                }, t.prototype.lookupCellPosition = function() {
                    return {
                        row: this.model.row.index,
                        column: this.model.column.index
                    }
                }, t.prototype.getPackedError = function() {
                    return this.model.column.packedErrors[this.model.row.index - 1]
                }, t.prototype.hasError = function() {
                    return !!this.getPackedError()
                }, t.prototype.getErrorMessage = function() {
                    var e = this.getPackedError();
                    return e ? this.controller.unpack(e) : ""
                }, t.prototype.getValue = function() {
                    var e = this.model.column.index,
                        t = this.model.row.index - 1;
                    return this.model.column.disabled ? this.model.column.computedValues[t] || "" : this.table.columns[e].values[t] || ""
                }, t.prototype.isEmpty = function() {
                    return "" === this.getValue()
                }, t.prototype.getAriaLabel = function() {
                    var e = this.lookupCellPosition(),
                        t = e.row,
                        n = e.column + 1;
                    return this.controller.t("Row __row__ Col __column__", {
                        row: t.toString(),
                        column: n.toString()
                    })
                }, t
            }(i.Class);
        t.default = d
    }), define("loadcss!expressions/table-view", function() {}), define("expressions/table-view", ["require", "exports", "tslib", "keys", "lib/aria", "./abstract-item-view", "dcgview", "./tables/header-view", "./tables/cell-view", "graphing-calc/models/table", "vendor/mathquill", "jquery", "./expression-edit-actions", "expressions/measure-expressions", "./suggested-zoom-view", "loadcss!./table-view", "jquery.handleevent"], function(e, t, n, r, i, o, a, s, l, c, u, p, d, h, f) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var m = a.Components.For,
            g = function(e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return n.__extends(t, e), t.prototype.didMount = function() {
                    this.onItemViewMounted()
                }, t.prototype.willUnmount = function() {
                    this.onItemViewUnmounted()
                }, t.prototype.template = function() {
                    var e = this;
                    return a.createElement("div", {
                        class: function() {
                            return {
                                "dcg-expressionitem": !0,
                                "dcg-expressiontable": !0,
                                "dcg-inFolder": !!e.model.folderId,
                                "dcg-selected": !!e.controller.isItemSelected(e.id),
                                "dcg-dragging": !!e.controller.isItemBeingDragged(e.id),
                                "dcg-no-faded-h": e.isRightFocused(),
                                "dcg-no-faded-v": e.isBottomFocused()
                            }
                        },
                        "expr-id": function() {
                            return e.model.id
                        },
                        didMount: this.bindFn(this.didMountContainer),
                        onKeydown: this.bindFn(this.onKeydown)
                    }, a.createElement("div", {
                        class: a.const("dcg-fade-container dcg-disable-horizontal-scroll-to-cursor")
                    }, a.createElement("div", {
                        class: a.const("dcg-main")
                    }, a.createElement("div", {
                        class: a.const("dcg-table-container"),
                        tabindex: function() {
                            return e.controller.isInEditListMode() ? 0 : -1
                        },
                        "aria-label": function() {
                            return e.controller.t("Expression __index__ table", {
                                index: e.model.displayIndex
                            })
                        },
                        didMount: this.bindFn(this.didMountContainer)
                    }, a.createElement("div", {
                        class: a.const("dcg-table-sliding-container"),
                        style: function() {
                            return {
                                transform: "translateX(" + e.computeScrolledX() + "px)"
                            }
                        }
                    }, a.createElement(m, {
                        each: function() {
                            return e.getVisibleRowModels()
                        },
                        key: function(t) {
                            return "blank-row" === t.type ? "blank-row-" + t.guid + "-" + t.rows + "-" + e.getCols() : t.guid
                        }
                    }, a.createElement("div", {
                        role: a.const("grid"),
                        class: function() {
                            return {
                                "dcg-tabledata": !0,
                                "dcg-focus-in-bottom-row": e.isBottomFocused(),
                                "dcg-focus-in-right-column": e.isRightFocused()
                            }
                        }
                    }, function(t) {
                        return "show-more" === t.type ? a.createElement("tr", {
                            role: a.const("row"),
                            class: a.const("dcg-show-more-row")
                        }, a.createElement("td", {
                            colspan: e.bindFn(e.getCols)
                        }, e.bindFn(e.missingRowMessage), a.createElement("div", {
                            tabindex: a.const(0),
                            role: a.const("button"),
                            class: a.const("dcg-show-more"),
                            onTap: function() {
                                return e.controller.dispatch({
                                    type: "table-show-more-rows",
                                    id: e.id
                                })
                            }
                        }, function() {
                            return e.controller.t("Show all")
                        }))) : "blank-row" === t.type ? a.createElement("tr", {
                            role: a.const("row"),
                            class: a.const("dcg-blank-row")
                        }, a.createElement("td", {
                            colspan: e.bindFn(e.getCols),
                            style: function() {
                                return {
                                    height: t.rows * e.getRowHeight() + "px"
                                }
                            }
                        })) : a.createElement(m, {
                            each: function() {
                                return t.cells
                            },
                            key: function(e) {
                                return e.guid
                            }
                        }, a.createElement("tr", {
                            role: a.const("row"),
                            "aria-rowindex": function() {
                                return t.index
                            },
                            class: a.const("dcg-row")
                        }, function(t) {
                            return "header" === t.type ? a.createElement(s.default, {
                                controller: e.props.controller,
                                model: e.const(t)
                            }) : a.createElement(l.default, {
                                controller: e.props.controller,
                                model: e.const(t)
                            })
                        }))
                    }))))), a.createElement("i", {
                        class: a.const("dcg-icon-remove dcg-top-level-delete"),
                        handleEvent: a.const("true"),
                        onTap: this.bindFn(this.onDelete)
                    })), a.createElement("span", {
                        class: a.const("dcg-tab dcg-action-drag"),
                        handleevent: a.const("true"),
                        tapboundary: a.const("true"),
                        disablescroll: a.const("true"),
                        style: a.const("touch-action:none"),
                        onTapStart: this.bindFn(this.onDragPending)
                    }, a.createElement("span", {
                        class: a.const("dcg-num")
                    }, function() {
                        return e.model.displayIndex
                    }), a.createElement("div", {
                        class: a.const("dcg-tab-interior")
                    }), a.createElement(f.SuggestedZoomView, {
                        model: this.props.model,
                        controller: this.props.controller
                    })), a.createElement(d.ExpressionEditActions, {
                        controller: this.props.controller,
                        id: function() {
                            return e.model.id
                        }
                    }))
                }, t.prototype.getCols = function() {
                    return this.model.rowModels[0].cells.length - 1
                }, t.prototype.getRowHeight = function() {
                    return this.controller.getGraphSettings().config.projectorMode ? 38 : 33
                }, t.prototype.getVisibleRowModels = function() {
                    var e = this.model.rowModels;
                    if (e.length <= 25) return e;
                    var t = c.getCollapsedRange(this.model);
                    if (void 0 !== t) {
                        var n = e.slice(0, t.min);
                        return n = n.concat({
                            type: "show-more",
                            guid: "show-more"
                        }), n.concat(e.slice(t.max))
                    }
                    var r = h.getExppanelRect(this.controller),
                        i = r ? r.height : 0,
                        o = p(this.node).offset(),
                        a = (o ? o.top : 0) - (r ? r.top : 0),
                        s = p(this.node).find(".dcg-row:eq(0)").height(),
                        l = this.getRowHeight();
                    if (i / l > e.length) return e;
                    for (var u = [], d = (-a - s) / l, f = (i - a) / l, m = 0; m < e.length; m++) {
                        var g = c.getSelectedCell(this.model);
                        if (0 === m || m === e.length - 2 || g && g.row === m) u.push(e[m]);
                        else if (m > f || m < d) {
                            var y = u[u.length - 1];
                            y && "blank-row" === y.type ? y.rows++ : u.push({
                                type: "blank-row",
                                guid: e[m].guid,
                                rows: 1
                            })
                        } else u.push(e[m])
                    }
                    return u
                }, t.prototype.missingRowMessage = function() {
                    var e = c.getCollapsedRange(this.model);
                    return void 0 === e ? "" : this.controller.t("__rowCount__ more rows", {
                        rowCount: e.max - e.min
                    })
                }, t.prototype.didMountContainer = function(e) {
                    this.node = e, p(e).on("scroll", function() {
                        return e.scrollLeft = 0
                    })
                }, t.prototype.getSelectedCell = function() {
                    return c.getSelectedCell(this.model)
                }, t.prototype.computeScrolledX = function() {
                    if (!this.getSelectedCell() || !this.node) return 0;
                    var e = this.node.children[0],
                        t = this.node.querySelector(".dcg-selected");
                    if (null === e || null === t) return 0;
                    var n = this.node.getBoundingClientRect(),
                        r = t.getBoundingClientRect(),
                        i = r.left - e.getBoundingClientRect().left,
                        o = n.width - i - r.width - 80,
                        a = Math.min(0, n.width - e.scrollWidth - 30);
                    return o = Math.max(o, a), Math.min(0, o)
                }, t.prototype.isBottomFocused = function() {
                    var e = this.getSelectedCell();
                    return !!e && e.row === this.model.columnModels[0].cells.length
                }, t.prototype.isRightFocused = function() {
                    var e = this.getSelectedCell();
                    return !!e && e.column === this.model.columnModels.length - 1
                }, t.prototype.isFocused = function() {
                    return !!this.getSelectedCell()
                }, t.prototype.onKeydown = function(e) {
                    this.controller.isInEditListMode() || !e.ctrlKey || e.shiftKey || e.altKey || e.metaKey || ("Up" === r.lookup(e) ? (e.preventDefault(), e.stopPropagation(), this.moveToFirstCellInColumn()) : "Down" === r.lookup(e) ? (e.preventDefault(), e.stopPropagation(), this.moveToLastCellInColumn()) : "Left" === r.lookup(e) ? (e.preventDefault(), e.stopPropagation(), this.moveToFirstCellInRow()) : "Right" === r.lookup(e) ? (e.preventDefault(), e.stopPropagation(), this.moveToLastCellInRow()) : "H" === r.lookupChar(e) && (e.preventDefault(), e.stopPropagation(), this.speakColumnHeader()))
                }, t.prototype.moveToFirstCellInColumn = function() {
                    var e = this.getSelectedCell();
                    e && this.controller.dispatch({
                        type: "set-focus-location",
                        location: {
                            type: "table",
                            id: this.id,
                            location: {
                                row: 0,
                                column: e.column
                            }
                        }
                    })
                }, t.prototype.moveToLastCellInColumn = function() {
                    var e = this.getSelectedCell();
                    e && this.controller.dispatch({
                        type: "set-focus-location",
                        location: {
                            type: "table",
                            id: this.id,
                            location: {
                                row: this.model.rowModels.length - 1,
                                column: e.column
                            }
                        }
                    })
                }, t.prototype.moveToFirstCellInRow = function() {
                    var e = this.getSelectedCell();
                    e && this.controller.dispatch({
                        type: "set-focus-location",
                        location: {
                            type: "table",
                            id: this.id,
                            location: {
                                row: e.row,
                                column: 0
                            }
                        }
                    })
                }, t.prototype.moveToLastCellInRow = function() {
                    var e = this.getSelectedCell();
                    e && this.controller.dispatch({
                        type: "set-focus-location",
                        location: {
                            type: "table",
                            id: this.id,
                            location: {
                                row: e.row,
                                column: this.model.columnModels[0].cells.length - 1
                            }
                        }
                    })
                }, t.prototype.speakColumnHeader = function() {
                    var e = this.controller.t("No column header"),
                        t = this.getSelectedCell();
                    if (t) {
                        var n = this.model.rowModels[0].cells[t.column];
                        if (n && "header" === n.type && n.latex && "" !== n.latex) {
                            e = u.MQ.StaticMath(p("<span>" + n.latex + "</span>")[0]).mathspeak()
                        }
                    }
                    i.alert(e)
                }, t
            }(o.default);
        t.default = g
    }), define("loadcss!expressions/folder-view", function() {}), define("expressions/folder-view", ["require", "exports", "tslib", "browser", "keys", "lib/aria", "./expression-edit-actions", "./abstract-item-view", "./smart_textarea", "dcgview", "./circular-icon-view", "jquery.handleevent", "loadcss!./folder-view"], function(e, t, n, r, i, o, a, s, l, c, u) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var p = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.didMount = function() {
                this.onItemViewMounted()
            }, t.prototype.willUnmount = function() {
                this.onItemViewUnmounted()
            }, t.prototype.template = function() {
                var e = this;
                return c.createElement("div", {
                    class: function() {
                        return {
                            "dcg-do-not-blur": !0,
                            "dcg-expressionitem": !0,
                            "dcg-expressionfolder": !0,
                            "dcg-inFolder": !!e.model.folderId,
                            "dcg-selected": e.controller.isItemSelected(e.id),
                            "dcg-dragging": !!e.controller.isItemBeingDragged(e.id),
                            "dcg-collapsed": !!e.model.collapsed,
                            "dcg-hidden": !!e.model.hidden,
                            "dcg-has-items": e.controller.getNumberOfItemsInFolder(e.id) > 0,
                            "dcg-secretFolder": e.model.secret && !e.controller.canAdministerSecretFolders()
                        }
                    },
                    "expr-id": function() {
                        return e.model.id
                    },
                    onTapStart: this.bindFn(this.onMouseSelect),
                    onTap: this.bindFn(this.onMouseSelect)
                }, c.createElement("div", {
                    class: c.const("dcg-fade-container")
                }, c.createElement("div", {
                    class: c.const("dcg-main")
                }, c.createElement("div", {
                    role: c.const("button"),
                    tabindex: c.const("0"),
                    "aria-pressed": function() {
                        return e.model.collapsed
                    },
                    "aria-label": function() {
                        return e.controller.t("Collapse Folder")
                    },
                    class: c.const("dcg-caret-container dcg-action-toggle-folder-collapsed dcg-do-not-blur"),
                    handleEvent: c.const("true"),
                    onTap: this.bindFn(this.toggleCollapsed)
                }, c.createElement("i", {
                    class: c.const("dcg-icon-caret-down")
                })), c.createElement(l.default, {
                    shouldFocus: this.bindFn(this.isFocused),
                    text: function() {
                        return e.model.title
                    },
                    placeholder: function() {
                        return e.controller.t("Enter a note...")
                    },
                    showLinks: function() {
                        return e.controller.areLinksEnabled()
                    },
                    onInput: this.bindFn(this.onInput),
                    onFocusChange: this.bindFn(this.onFocusChange),
                    onSpecialKey: this.bindFn(this.onSpecialKey),
                    ariaLabel: this.bindFn(this.getAriaLabel),
                    readonly: function() {
                        return e.controller.isInEditListMode()
                    },
                    readonlyAction: this.bindFn(this.exitEditListMode)
                }), c.createElement("div", {
                    role: c.const("checkbox"),
                    "aria-checked": function() {
                        return e.model.secret
                    },
                    "aria-label": function() {
                        return e.controller.t("Hide this folder from students")
                    },
                    class: function() {
                        return {
                            "dcg-action-toggle-secret-folder": !0,
                            "dcg-do-not-blur": !0,
                            "dcg-checked": e.model.secret
                        }
                    },
                    style: function() {
                        return {
                            display: e.controller.canAdministerSecretFolders() ? void 0 : "none"
                        }
                    },
                    handleEvent: c.const("true"),
                    onTap: this.bindFn(this.toggleSecret)
                }, c.createElement("span", {
                    class: c.const("dcg-checkbox-box")
                }, c.createElement("i", {
                    class: c.const("dcg-icon-check")
                })), c.createElement("span", {
                    class: c.const("dcg-checkbox-label")
                }, function() {
                    return e.controller.t("Hide this folder from students.")
                }))), c.createElement("i", {
                    class: c.const("dcg-icon-remove dcg-top-level-delete"),
                    handleEvent: c.const("true"),
                    onTap: this.bindFn(this.onDelete)
                })), c.createElement("span", {
                    class: c.const("dcg-tab dcg-action-drag"),
                    handleevent: c.const("true"),
                    tapboundary: c.const("true"),
                    disablescroll: c.const("true"),
                    style: c.const("touch-action:none"),
                    onTapStart: this.bindFn(this.onDragPending)
                }, c.createElement("span", {
                    class: c.const("dcg-num")
                }, function() {
                    return e.model.displayIndex
                }), c.createElement("div", {
                    class: c.const("dcg-tab-interior")
                }, c.createElement("span", {
                    role: c.const("button"),
                    tabindex: c.const("0"),
                    "aria-pressed": function() {
                        return !!e.model.hidden
                    },
                    "aria-label": function() {
                        return e.controller.t("Hide Folder")
                    },
                    class: c.const("dcg-circular-icon-container dcg-expression-icon-container"),
                    onTap: this.bindFn(this.toggleHidden)
                }, c.createElement(u.CircularIconView, {
                    iconType: function() {
                        return e.model.hidden ? "hidden" : "folder"
                    },
                    whiteIcon: function() {
                        return e.controller.isItemSelected(e.model.id) || e.controller.isItemBeingDragged(e.model.id)
                    }
                })))), c.createElement(a.ExpressionEditActions, {
                    controller: this.props.controller,
                    id: function() {
                        return e.model.id
                    }
                }))
            }, t.prototype.toggleHidden = function() {
                this.controller.dispatch({
                    type: "toggle-item-hidden",
                    id: this.id
                })
            }, t.prototype.toggleSecret = function() {
                this.controller.dispatch({
                    type: "set-item-secret",
                    id: this.id,
                    isSecret: !this.model.secret
                })
            }, t.prototype.toggleCollapsed = function() {
                this.controller.dispatch({
                    type: "set-folder-collapsed",
                    id: this.id,
                    isCollapsed: !this.model.collapsed
                })
            }, t.prototype.onInput = function(e) {
                this.controller.dispatch({
                    type: "set-folder-title",
                    id: this.id,
                    title: e
                })
            }, t.prototype.onFocusChange = function(e) {
                e ? this.controller.dispatch({
                    type: "set-focus-location",
                    location: {
                        type: "folder",
                        id: this.id
                    }
                }) : this.controller.dispatch({
                    type: "blur-focus-location",
                    location: {
                        type: "folder",
                        id: this.id
                    }
                })
            }, t.prototype.onSpecialKey = function(e) {
                return this.controller.dispatch({
                    type: "on-special-key-pressed",
                    key: e
                })
            }, t.prototype.onKeydown = function(e) {
                var t = e.altKey && !e.metaKey && !e.ctrlKey && !e.shiftKey,
                    n = e.metaKey && !e.altKey && !e.shiftKey && !e.ctrlKey;
                (r.IS_APPLE ? n : t) && i.lookup(e) === i.UP && (e.preventDefault(), e.stopPropagation(), this.controller.dispatch({
                    type: "set-folder-collapsed",
                    id: this.id,
                    isCollapsed: !this.model.collapsed
                }), this.model.collapsed ? o.alert(this.controller.t("folder collapsed")) : o.alert(this.controller.t("folder expanded")))
            }, t.prototype.isFocused = function() {
                var e = this.controller.getFocusLocation();
                return !(!e || "folder" !== e.type || e.id !== this.id)
            }, t.prototype.getAriaLabel = function() {
                var e = "";
                this.model.hidden || this.model.collapsed || this.model.secret ? !this.model.hidden || this.model.collapsed || this.model.secret ? this.model.hidden || !this.model.collapsed || this.model.secret ? this.model.hidden || this.model.collapsed || !this.model.secret ? this.model.hidden && this.model.collapsed && !this.model.secret ? e = this.controller.t("Hidden Collapsed Folder") : this.model.hidden && !this.model.collapsed && this.model.secret ? e = this.controller.t("Hidden Secret Folder") : !this.model.hidden && this.model.collapsed && this.model.secret ? e = this.controller.t("Collapsed Secret Folder") : this.model.hidden && this.model.collapsed && this.model.secret && (e = this.controller.t("Hidden Collapsed Secret Folder")) : e = this.controller.t("Secret Folder") : e = this.controller.t("Collapsed Folder") : e = this.controller.t("Hidden Folder") : e = this.controller.t("Folder");
                var t = this.controller.getNumberOfItemsInFolder(this.id);
                return t > 0 ? this.controller.t("__folder__ has __count__ items", {
                    folder: e,
                    count: t
                }) : e
            }, t
        }(s.default);
        t.default = p
    }), define("loadcss!expressions/image-icon-view", function() {}), define("expressions/image-icon-view", ["require", "exports", "tslib", "dcgview", "../dcgview-helpers/tooltipped-error", "./circular-icon-view", "jquery.handleevent", "loadcss!./image-icon-view"], function(e, t, n, r, i, o) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var a = r.Components.SwitchUnion,
            s = function(e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return n.__extends(t, e), t.prototype.init = function() {
                    this.model = this.props.model(), this.controller = this.props.controller()
                }, t.prototype.template = function() {
                    var e = this;
                    return r.createElement("div", {
                        class: r.const("dcg-expression-icon-container dcg-image-icon-container")
                    }, a(this.bindFn(this.typeOfIcon), {
                        error: function() {
                            return r.createElement(i.TooltippedError, {
                                error: function() {
                                    return e.controller.unpack(e.model.error)
                                },
                                isWhite: e.bindFn(e.isSelected),
                                gravity: e.const("se")
                            })
                        },
                        failed: function() {
                            return r.createElement("span", null)
                        },
                        loading: function() {
                            return r.createElement(o.CircularIconView, {
                                iconType: e.const("loading")
                            })
                        },
                        hidden: function() {
                            return e.buildIconView()
                        },
                        image: function() {
                            return e.buildIconView()
                        }
                    }))
                }, t.prototype.buildIconView = function() {
                    var e = this;
                    return r.createElement("div", {
                        class: r.const("dcg-circular-icon-container"),
                        role: r.const("button"),
                        onTap: function(t) {
                            if (!t.wasHandled("dragdrop") && !t.wasLongheld()) return e.myOptionsOpen() ? e.toggleOptions() : e.controller.isInEditListMode() ? e.toggleOptions() : void e.toggleImageShown()
                        },
                        didMount: function(t) {
                            return e.rootElt = t
                        },
                        onLongHold: function(t) {
                            t.handle("dcg-longhold"), t.handle("dcg-tap"), e.toggleOptions()
                        }
                    }, r.createElement(o.CircularIconView, {
                        iconType: function() {
                            return "hidden" === e.typeOfIcon() ? "hidden" : "background"
                        },
                        backgroundImage: this.bindFn(this.getBackgroundImage),
                        backgroundOpacity: this.const(1),
                        whiteIcon: this.bindFn(this.isSelected)
                    }))
                }, t.prototype.isSelected = function() {
                    return this.controller.isItemSelected(this.model.id) || this.controller.isItemBeingDragged(this.model.id)
                }, t.prototype.typeOfIcon = function() {
                    return "loading" === this.model.loadStatus ? "loading" : "failed" === this.model.loadStatus ? "failed" : this.hasError() ? "error" : this.model.shouldGraph ? "image" : "hidden"
                }, t.prototype.myOptionsOpen = function() {
                    var e = this.controller.getOpenItemMenu();
                    return !!e && e.model === this.model
                }, t.prototype.toggleOptions = function() {
                    this.controller.dispatch({
                        type: "toggle-item-settings-menu",
                        menu: {
                            type: "image",
                            model: this.model,
                            icon: this.rootElt,
                            focusFirstOption: !1
                        }
                    })
                }, t.prototype.hasError = function() {
                    return !!this.model.error
                }, t.prototype.getBackgroundImage = function() {
                    return this.model.image_url === this.lastURL ? this.lastEncodedURL : (this.lastURL = this.model.image_url, this.lastEncodedURL = "url(" + encodeURI(this.model.image_url) + ")", this.lastEncodedURL)
                }, t.prototype.toggleImageShown = function() {
                    this.controller.dispatch({
                        type: "toggle-item-hidden",
                        id: this.model.id
                    })
                }, t
            }(r.Class);
        t.default = s
    }), define("expressions/image-upload-view", ["require", "exports", "tslib", "dcgview", "jquery", "main/manage-focus-helper"], function(e, t, n, r, i, o) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var a = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.init = function() {
                this.controller = this.props.controller()
            }, t.prototype.template = function() {
                return r.createElement("div", {
                    class: r.const("dcg-do-not-blur"),
                    onTap: this.bindFn(this.newImage),
                    handleEvent: r.const("true"),
                    role: r.const("button"),
                    tabindex: r.const(0),
                    "aria-label": this.props.ariaLabel,
                    manageFocus: this.const(this.props.location ? o.manageFocusHelper({
                        controller: this.controller,
                        location: this.props.location()
                    }) : void 0)
                }, this.children, r.createElement("input", {
                    type: r.const("file"),
                    accept: r.const("image/*"),
                    style: r.const("display: none"),
                    didMount: this.bindFn(this.didMountFileInput)
                }))
            }, t.prototype.didMountFileInput = function(e) {
                var t = this;
                this.fileInputNode = e, i(e).on("change", function() {
                    t.props.onFileChange(e.files), i(e).val("")
                })
            }, t.prototype.newImage = function() {
                this.fileInputNode.click()
            }, t
        }(r.Class);
        t.ImageUploadView = a
    }), define("loadcss!expressions/clickable_image_info_view", function() {}), define("expressions/clickable_image_info_view", ["require", "exports", "tslib", "dcgview", "./circular-icon-view", "../lib/tooltip", "./image-upload-view", "./clickable_info_view", "loadcss!./clickable_image_info_view"], function(e, t, n, r, i, o, a, s) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var l = r.Components.Switch,
            c = function(e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return n.__extends(t, e), t.prototype.init = function() {
                    this.controller = this.props.controller(), this.model = this.props.model(), this.id = this.model.id
                }, t.prototype.template = function() {
                    var e = this;
                    return r.createElement("div", {
                        class: r.const("dcg-do-blur dcg-indent-in-folder"),
                        tapboundary: r.const("true"),
                        handleEvent: r.const("true")
                    }, r.createElement(s.ClickableInfoView, {
                        controller: function() {
                            return e.props.controller()
                        },
                        model: function() {
                            return e.model
                        }
                    }), r.createElement("div", {
                        class: r.const("dcg-clickable-image-info-view"),
                        role: r.const("group"),
                        "aria-label": function() {
                            return e.controller.t("Clickable Image Options")
                        }
                    }, r.createElement("div", {
                        role: r.const("heading"),
                        "aria-level": r.const("2"),
                        class: r.const("dcg-clickable-image-label")
                    }, r.const("Hovered:")), r.createElement(o.Tooltip, {
                        tooltip: function() {
                            return e.tooltip("hovered")
                        },
                        gravity: this.const("s")
                    }, r.createElement(a.ImageUploadView, {
                        controller: function() {
                            return e.controller
                        },
                        ariaLabel: function() {
                            return e.tooltip("hovered")
                        },
                        onFileChange: function(t) {
                            return e.updateImage("hovered", t)
                        }
                    }, r.createElement(l, {
                        key: this.bindFn(this.hoveredStatus)
                    }, function() {
                        return r.createElement(i.CircularIconView, {
                            iconType: e.bindFn(e.hoveredStatus),
                            backgroundImage: e.const("background" === e.hoveredStatus() ? "url(" + e.model.clickableInfo.hoveredImage + ")" : "")
                        })
                    }))), r.createElement("div", {
                        role: r.const("heading"),
                        "aria-level": r.const("2"),
                        class: r.const("dcg-clickable-image-label")
                    }, r.const("Depressed:")), r.createElement(o.Tooltip, {
                        tooltip: function() {
                            return e.tooltip("depressed")
                        },
                        gravity: this.const("s")
                    }, r.createElement(a.ImageUploadView, {
                        controller: function() {
                            return e.controller
                        },
                        ariaLabel: function() {
                            return e.tooltip("depressed")
                        },
                        onFileChange: function(t) {
                            return e.updateImage("depressed", t)
                        }
                    }, r.createElement(l, {
                        key: this.bindFn(this.depressedStatus)
                    }, function() {
                        return r.createElement(i.CircularIconView, {
                            iconType: function() {
                                return e.depressedStatus()
                            },
                            backgroundImage: e.const("background" === e.depressedStatus() ? "url(" + e.model.clickableInfo.depressedImage + ")" : "")
                        })
                    })))))
                }, t.prototype.hoveredStatus = function() {
                    return this.hoveredUploading ? "loading" : this.model.clickableInfo.hoveredImage ? "background" : "hidden"
                }, t.prototype.depressedStatus = function() {
                    return this.depressedUploading ? "loading" : this.model.clickableInfo.depressedImage ? "background" : "hidden"
                }, t.prototype.tooltip = function(e) {
                    return ("hovered" === e ? this.model.clickableInfo.hoveredImage : this.model.clickableInfo.depressedImage) ? "depressed" === e ? this.controller.t("Change Depressed Image") : this.controller.t("Change Hovered Image") : "depressed" === e ? this.controller.t("Add Depressed Image") : this.controller.t("Add Hovered Image")
                }, t.prototype.updateImage = function(e, t) {
                    var n = this;
                    if (t && t[0]) {
                        var r = t[0];
                        "hovered" === e && (this.hoveredUploading = !0), "depressed" === e && (this.depressedUploading = !0), this.controller.getGraphSettings().config.imageUploadCallback(r, function(t, r) {
                            "hovered" === e && (n.hoveredUploading = !1), "depressed" === e && (n.depressedUploading = !1), !t && r && ("hovered" === e ? n.controller.dispatch({
                                type: "set-hovered-image",
                                id: n.model.id,
                                url: r
                            }) : n.controller.dispatch({
                                type: "set-depressed-image",
                                id: n.model.id,
                                url: r
                            }))
                        })
                    }
                }, t
            }(r.Class);
        t.ClickableImageInfoView = c
    }), define("loadcss!expressions/image-view", function() {}), define("expressions/image-view", ["require", "exports", "tslib", "./abstract-item-view", "./smart_textarea", "dcgview", "dcgview-helpers/mathquill-view", "lib/conditional_blur", "expressions/promptslider_view", "./image-icon-view", "./clickable_image_info_view", "graphing-calc/models/image", "./expression-edit-actions", "jquery.handleevent", "loadcss!./image-view"], function(e, t, n, r, i, o, a, s, l, c, u, p, d) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var h = o.Components,
            f = h.If,
            m = h.SwitchUnion,
            g = function(e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return n.__extends(t, e), t.prototype.init = function() {
                    this.model = this.props.model(), this.controller = this.props.controller()
                }, t.prototype.template = function() {
                    var e = this;
                    return o.createElement("div", {
                        class: o.const("dcg-image-input-mathquill")
                    }, o.createElement(a.default, {
                        latex: function() {
                            return e.model[e.props.name()]
                        },
                        isFocused: function() {
                            return e.props.focusedInput() === e.props.name()
                        },
                        capExpressionSize: function() {
                            return !!e.controller.getGraphSettings().config.capExpressionSize
                        },
                        selectOnFocus: this.const(!0),
                        config: this.const({}),
                        getAriaLabel: function() {
                            return e.controller.t(e.props.name())
                        },
                        getAriaPostLabel: this.const(""),
                        hasError: this.const(!1),
                        onUserPressedKey: function(t, n) {
                            return e.handlePressedKey(t, n)
                        },
                        onUserChangedLatex: this.bindFn(this.handleLatexChanged),
                        onFocusedChanged: this.bindFn(this.handleMQFocusedChanged)
                    }, o.createElement("span", {
                        class: function() {
                            return {
                                "dcg-focus": e.props.focusedInput() === e.props.name(),
                                "dcg-invalid": p.hasInputError(e.model, e.props.name())
                            }
                        }
                    })))
                }, t.prototype.handlePressedKey = function(e, t) {
                    var n = this.props.name(),
                        r = a.default.getFocusedMathquill(),
                        i = this.controller.canUseAdvancedStyling() ? ["center", "angle", "opacity", "width", "height"] : ["center", "angle", "width", "height"],
                        o = i.indexOf(n);
                    if (r) {
                        if (!this.controller.isInEditListMode()) {
                            if ("Enter" === e) return this.controller.dispatch({
                                type: "on-special-key-pressed",
                                key: "Enter"
                            });
                            if ("Esc" === e) return void s.default()
                        }
                        var l = -1;
                        "Up" === e && (l = o - 1), "Down" === e && (l = o + 1), "Left" === e && (l = o - 2), "Right" === e && (l = o + 2);
                        var c = e;
                        if (l >= 0 && l < i.length) return void(a.default.applyArrowKeyAndReturnIfWasAtBounds(r, c, t) && this.focusInput(i[l]));
                        r.keystroke(e, t), this.handleLatexChanged(r.latex())
                    }
                }, t.prototype.focusInput = function(e) {
                    this.controller.dispatch({
                        type: "set-focus-location",
                        location: {
                            type: "image",
                            id: this.model.id,
                            location: e
                        }
                    })
                }, t.prototype.handleLatexChanged = function(e) {
                    var t = this.props.name();
                    this.model.draggingOnGraphpaper || p.getMQAttribute(this.model, t) !== e && this.controller.dispatch({
                        type: "set-image-mq-attribute",
                        id: this.model.id,
                        attribute: t,
                        latex: e
                    })
                }, t.prototype.handleMQFocusedChanged = function(e) {
                    var t = this.props.name();
                    e ? this.props.focusedInput() !== t && this.controller.dispatch({
                        type: "set-focus-location",
                        location: {
                            type: "image",
                            id: this.model.id,
                            location: t
                        }
                    }) : this.controller.dispatch({
                        type: "blur-focus-location",
                        location: {
                            type: "image",
                            id: this.model.id,
                            location: t
                        }
                    })
                }, t
            }(o.Class),
            y = function(e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return n.__extends(t, e), t.prototype.didMount = function() {
                    this.onItemViewMounted()
                }, t.prototype.willUnmount = function() {
                    this.onItemViewUnmounted()
                }, t.prototype.template = function() {
                    var e = this;
                    return o.createElement("div", {
                        class: function() {
                            return {
                                "dcg-do-not-blur": !0,
                                "dcg-expressionitem": !0,
                                "dcg-expressionimage": !0,
                                "dcg-inFolder": !!e.model.folderId,
                                "dcg-selected": e.controller.isItemSelected(e.id),
                                "dcg-dragging": !!e.controller.isItemBeingDragged(e.id),
                                "dcg-input-focused": e.getFocusedInput() && "name" !== e.getFocusedInput()
                            }
                        },
                        "expr-id": function() {
                            return e.model.id
                        },
                        onTapStart: this.bindFn(this.onMouseSelect),
                        onTap: this.bindFn(this.onMouseSelect)
                    }, o.createElement("div", {
                        class: o.const("dcg-fade-container")
                    }, o.createElement("div", {
                        class: o.const("dcg-main")
                    }, m(function() {
                        return e.model.loadStatus
                    }, {
                        failed: function() {
                            return o.createElement("div", null, o.createElement("div", {
                                class: o.const("dcg-image-failed")
                            }, function() {
                                return e.controller.t("Failed to load image.")
                            }), o.createElement("div", {
                                role: o.const("button"),
                                tabindex: o.const(0),
                                class: o.const("dcg-retry-loading-image"),
                                onTap: e.bindFn(e.onRetryLoad)
                            }, function() {
                                return e.controller.t("Retry.")
                            }))
                        },
                        loading: function() {
                            return o.createElement("div", null, o.createElement("div", {
                                class: o.const("dcg-image-loading")
                            }, function() {
                                return e.controller.t("Loading image...")
                            }), o.createElement("div", {
                                role: o.const("button"),
                                tabindex: o.const(0),
                                class: o.const("dcg-retry-loading-image"),
                                onTap: e.bindFn(e.onRetryLoad)
                            }, function() {
                                return e.controller.t("Retry.")
                            }))
                        },
                        loaded: function() {
                            return o.createElement("div", {
                                class: o.const("dcg-image-loaded")
                            }, o.createElement(i.default, {
                                shouldFocus: function() {
                                    return "name" === e.getFocusedInput()
                                },
                                text: function() {
                                    return e.model.name
                                },
                                placeholder: function() {
                                    return e.controller.t("Enter a note...")
                                },
                                showLinks: function() {
                                    return e.controller.areLinksEnabled()
                                },
                                onInput: e.bindFn(e.onNameInput),
                                onFocusChange: e.bindFn(e.onNameFocusChange),
                                onSpecialKey: e.bindFn(e.onNameSpecialKey),
                                readonly: e.const(!1)
                            }), o.createElement("div", {
                                class: o.const("dcg-do-blur dcg-image-input-grid"),
                                handleEvent: o.const("true")
                            }, o.createElement("div", {
                                class: o.const("dcg-image-input-name")
                            }, function() {
                                return e.controller.t("Center:")
                            }), o.createElement(g, {
                                name: e.const("center"),
                                controller: function() {
                                    return e.controller
                                },
                                model: function() {
                                    return e.model
                                },
                                focusedInput: e.bindFn(e.getFocusedInput)
                            }), o.createElement("div", {
                                class: o.const("dcg-image-input-name")
                            }, function() {
                                return e.controller.t("Width:")
                            }), o.createElement(g, {
                                name: e.const("width"),
                                controller: function() {
                                    return e.controller
                                },
                                model: function() {
                                    return e.model
                                },
                                focusedInput: e.bindFn(e.getFocusedInput)
                            }), o.createElement("div", {
                                class: o.const("dcg-image-input-name")
                            }, function() {
                                return e.controller.t("Angle:")
                            }), o.createElement(g, {
                                name: e.const("angle"),
                                controller: function() {
                                    return e.controller
                                },
                                model: function() {
                                    return e.model
                                },
                                focusedInput: e.bindFn(e.getFocusedInput)
                            }), o.createElement("div", {
                                class: o.const("dcg-image-input-name")
                            }, function() {
                                return e.controller.t("Height:")
                            }), o.createElement(g, {
                                name: e.const("height"),
                                controller: function() {
                                    return e.controller
                                },
                                model: function() {
                                    return e.model
                                },
                                focusedInput: e.bindFn(e.getFocusedInput)
                            }), o.createElement(f, {
                                predicate: function() {
                                    return e.controller.canUseAdvancedStyling()
                                }
                            }, function() {
                                return o.createElement("div", {
                                    class: o.const("dcg-image-input-name")
                                }, function() {
                                    return e.controller.t("Opacity:")
                                })
                            }), o.createElement(f, {
                                predicate: function() {
                                    return e.controller.canUseAdvancedStyling()
                                }
                            }, function() {
                                return o.createElement(g, {
                                    name: e.const("opacity"),
                                    controller: function() {
                                        return e.controller
                                    },
                                    model: function() {
                                        return e.model
                                    },
                                    focusedInput: e.bindFn(e.getFocusedInput)
                                })
                            })))
                        }
                    })), o.createElement("span", {
                        class: o.const("dcg-fadeout")
                    }), o.createElement("i", {
                        class: o.const("dcg-icon-remove dcg-top-level-delete"),
                        handleEvent: o.const("true"),
                        onTap: this.bindFn(this.onDelete)
                    }), o.createElement(f, {
                        predicate: function() {
                            return e.shouldShowClickableProperties()
                        }
                    }, function() {
                        return o.createElement(u.ClickableImageInfoView, {
                            controller: function() {
                                return e.props.controller()
                            },
                            model: function() {
                                return e.model
                            }
                        })
                    }), o.createElement(f, {
                        predicate: function() {
                            return e.model.missingVariables.length > 0
                        }
                    }, function() {
                        return o.createElement("div", {
                            class: e.getFooterClass()
                        }, o.createElement(l.default, {
                            model: e.props.model,
                            controller: e.props.controller
                        }))
                    })), o.createElement("span", {
                        class: o.const("dcg-tab dcg-action-drag dcg-action-icon-touch"),
                        handleevent: o.const("true"),
                        tapboundary: o.const("true"),
                        disablescroll: o.const("true"),
                        style: o.const("touch-action:none"),
                        onTapStart: this.bindFn(this.onDragPending)
                    }, o.createElement("span", {
                        class: o.const("dcg-num")
                    }, function() {
                        return e.model.displayIndex
                    }), o.createElement("div", {
                        class: o.const("dcg-tab-interior dcg-action-icon-mouse")
                    }, o.createElement(c.default, {
                        model: this.props.model,
                        controller: this.props.controller
                    }))), o.createElement(d.ExpressionEditActions, {
                        controller: this.props.controller,
                        id: function() {
                            return e.model.id
                        }
                    }))
                }, t.prototype.getFooterClass = function() {
                    return this.isFirstRender() ? this.const("dcg-expression-bottom dcg-indent-in-folder") : this.const("dcg-expression-bottom dcg-fadein-bottom dcg-indent-in-folder")
                }, t.prototype.onNameInput = function(e) {
                    this.controller.dispatch({
                        type: "set-image-name",
                        id: this.id,
                        name: e
                    })
                }, t.prototype.onNameFocusChange = function(e) {
                    e ? this.controller.dispatch({
                        type: "set-focus-location",
                        location: {
                            type: "image",
                            id: this.id,
                            location: "name"
                        }
                    }) : "name" === this.getFocusedInput() && this.controller.dispatch({
                        type: "blur-focus-location",
                        location: {
                            type: "image",
                            id: this.id,
                            location: "name"
                        }
                    })
                }, t.prototype.onNameSpecialKey = function(e) {
                    return this.controller.dispatch({
                        type: "on-special-key-pressed",
                        key: e
                    })
                }, t.prototype.getFocusedInput = function() {
                    var e = this.controller.getFocusLocation();
                    if (e && "image" === e.type && e.id === this.model.id) return e.location
                }, t.prototype.onRetryLoad = function() {
                    this.controller.dispatch({
                        type: "image-retry-loading",
                        id: this.id
                    })
                }, t.prototype.shouldShowClickableProperties = function() {
                    return !!this.controller.canAuthorClickableObjects() && this.model.clickableInfo.enabled
                }, t.prototype.onMouseSelect = function(e) {
                    "dcg-tap" === e.type && "mouse" === e.device || "dcg-tapstart" === e.type && "touch" === e.device || e.wasHandled() || (e.handle(), this.controller.dispatch({
                        type: "set-selected-id",
                        id: this.id
                    }))
                }, t
            }(r.default);
        t.default = y
    }), define("expressions/shell_view", ["require", "exports", "tslib", "dcgview", "./abstract-item-view"], function(e, t, n, r, i) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var o = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.didMount = function() {
                this.onItemViewMounted()
            }, t.prototype.willUnmount = function() {
                this.onItemViewUnmounted()
            }, t.prototype.template = function() {
                var e = "";
                return this.model.cachedRenderHeight && (e = "height:" + this.model.cachedRenderHeight + "px"), r.createElement("div", {
                    class: r.const("dcg-do-not-blur dcg-expressionitem dcg-shell"),
                    "expr-id": this.const(this.model.id),
                    onTap: this.bindFn(this.onMouseSelect),
                    style: r.const(e)
                })
            }, t
        }(i.default);
        t.default = o
    }), define("expressions/drag_container_view", ["require", "exports", "tslib", "dcgview"], function(e, t, n, r) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var i = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.init = function() {
                this.controller = this.props.controller()
            }, t.prototype.template = function() {
                var e = this;
                return r.createElement("div", {
                    class: r.const("dcg-drag-container"),
                    style: function() {
                        return {
                            top: e.getTopPx()
                        }
                    }
                }, this.children)
            }, t.prototype.getTopPx = function() {
                var e = this.controller.getRawDragState();
                if (e) return e.itemTop + "px"
            }, t
        }(r.Class);
        t.default = i
    }), define("vendor/papaparse", ["require", "jquery"], function(e) {
        "use strict";

        function t(e, t) {
            var n = s(t);
            if ("string" == typeof e) {
                if (!n.download) {
                    return new o(n).parse(e)
                }
                var a = new r(n);
                a.stream(e)
            } else if (e instanceof File)
                if (n.step || n.chunk) {
                    var a = new i(n);
                    a.stream(e)
                } else {
                    new o(n);
                    reader = new FileReader, reader.onload = function(e) {
                        var t = new o(n);
                        t.parse(e.target.result)
                    }, reader.onerror = function() {
                        c(n.error) && n.error(reader.error, e)
                    }, reader.readAsText(e, n.encoding)
                }
        }

        function n(e, t) {
            function n(e) {
                if ("object" != typeof e) return [];
                var t = [];
                for (var n in e) t.push(n);
                return t
            }

            function r(e, t) {
                var n = "";
                "string" == typeof e && (e = JSON.parse(e)), "string" == typeof t && (t = JSON.parse(t));
                var r = e instanceof Array && e.length > 0,
                    o = !(t[0] instanceof Array);
                if (r) {
                    for (var a = 0; a < e.length; a++) a > 0 && (n += s), n += i(e[a], a);
                    t.length > 0 && (n += l)
                }
                for (var c = 0; c < t.length; c++) {
                    for (var u = r ? e.length : t[c].length, p = 0; p < u; p++) {
                        p > 0 && (n += s);
                        var d = r && o ? e[p] : p;
                        n += i(t[c][d], p)
                    }
                    c < t.length - 1 && (n += l)
                }
                return n
            }

            function i(e, t) {
                return void 0 === e || null === e ? "" : (e = e.toString().replace(/"/g, '""'), "boolean" == typeof a && a || a instanceof Array && a[t] || o(e, d.BAD_DELIMITERS) || e.indexOf(s) > -1 || " " == e.charAt(0) || " " == e.charAt(e.length - 1) ? '"' + e + '"' : e)
            }

            function o(e, t) {
                for (var n = 0; n < t.length; n++)
                    if (e.indexOf(t[n]) > -1) return !0;
                return !1
            }
            var a = !1,
                s = ",",
                l = "\r\n";
            if (function() {
                    "object" == typeof t && ("string" == typeof t.delimiter && 1 == t.delimiter.length && -1 == d.BAD_DELIMITERS.indexOf(t.delimiter) && (s = t.delimiter), ("boolean" == typeof t.quotes || t.quotes instanceof Array) && (a = t.quotes), "string" == typeof t.newline && (l = t.newline))
                }(), "string" == typeof e && (e = JSON.parse(e)), e instanceof Array) {
                if (!e.length || e[0] instanceof Array) return r(null, e);
                if ("object" == typeof e[0]) return r(n(e[0]), e)
            } else if ("object" == typeof e) return "string" == typeof e.data && (e.data = JSON.parse(e.data)), e.data instanceof Array && (e.fields || (e.fields = e.data[0] instanceof Array ? e.fields : n(e.data[0])), e.data[0] instanceof Array || "object" == typeof e.data[0] || (e.data = [e.data])), r(e.fields || [], e.data || []);
            throw "exception: Unable to serialize unrecognized input"
        }

        function r(e) {
            e = e || {}, e.chunkSize || (e.chunkSize = d.RemoteChunkSize);
            var t, n, r = 0,
                i = 0,
                a = "",
                s = "",
                u = new o(l(e));
            this.stream = function(o) {
                function l() {
                    if (t = new XMLHttpRequest, t.onload = p, t.onerror = d, t.open("GET", o, !0), e.step) {
                        var n = r + e.chunkSize - 1;
                        i && n > i && (n = i), t.setRequestHeader("Range", "bytes=" + r + "-" + n)
                    }
                    t.send(), r += e.chunkSize
                }

                function p() {
                    if (4 == t.readyState) {
                        if (t.status < 200 || t.status >= 400) return void d();
                        a += s + t.responseText, s = "";
                        var i = !e.step || r > h(t);
                        if (!i) {
                            var o = a.lastIndexOf("\n");
                            if (o < 0 && (o = a.lastIndexOf("\r")), !(o > -1)) return void n();
                            s = a.substring(o + 1), a = a.substring(0, o)
                        }
                        var l = u.parse(a);
                        a = "", c(e.chunk) && (e.chunk(l), l = void 0), i || l.meta.paused || n()
                    }
                }

                function d() {
                    c(e.error) && e.error(t.statusText)
                }

                function h(e) {
                    var t = e.getResponseHeader("Content-Range");
                    return parseInt(t.substr(t.lastIndexOf("/") + 1))
                }(n = function() {
                    l()
                })()
            }
        }

        function i(e) {
            e = e || {}, e.chunkSize || (e.chunkSize = d.LocalChunkSize);
            var t, n = 0,
                r = "",
                i = "",
                a = new o(l(e)),
                s = "function" == typeof FileReader;
            this.stream = function(o) {
                function l() {
                    n < o.size && u()
                }

                function u() {
                    var r = Math.min(n + e.chunkSize, o.size),
                        i = t.readAsText(h.call(o, n, r), e.encoding);
                    s || p({
                        target: {
                            result: i
                        }
                    })
                }

                function p(t) {
                    n += e.chunkSize, r += i + t.target.result, i = "";
                    var s = n >= o.size;
                    if (!s) {
                        var u = r.lastIndexOf("\n");
                        if (u < 0 && (u = r.lastIndexOf("\r")), !(u > -1)) return void l();
                        i = r.substring(u + 1), r = r.substring(0, u)
                    }
                    var p = a.parse(r);
                    r = "", c(e.chunk) && (e.chunk(p, o), p = void 0), s || p.meta.paused || l()
                }

                function d() {
                    c(e.error) && e.error(t.error, o)
                }
                var h = o.slice || o.webkitSlice || o.mozSlice;
                s ? (t = new FileReader, t.onload = p, t.onerror = d) : t = new FileReaderSync, l()
            }
        }

        function o(e) {
            function t() {
                return b && f && (u("Delimiter", "UndetectableDelimiter", "Unable to auto-detect delimiting character; defaulted to '" + d.DefaultDelimiter + "'"), f = !1), n() && r(), i()
            }

            function n() {
                return e.header && 0 == v.length
            }

            function r() {
                if (b) {
                    for (var e = 0; n() && e < b.data.length; e++)
                        for (var t = 0; t < b.data[e].length; t++) v.push(b.data[e][t]);
                    b.data.splice(0, 1)
                }
            }

            function i() {
                if (!b || !e.header && !e.dynamicTyping) return b;
                for (var t = 0; t < b.data.length; t++) {
                    for (var n = {}, r = 0; r < b.data[t].length; r++) {
                        if (e.dynamicTyping) {
                            var i = b.data[t][r];
                            b.data[t][r] = "true" == i || "false" != i && s(i)
                        }
                        e.header && (r >= v.length ? (n.__parsed_extra || (n.__parsed_extra = []), n.__parsed_extra.push(b.data[t][r])) : n[v[r]] = b.data[t][r])
                    }
                    e.header && (b.data[t] = n, r > v.length ? u("FieldMismatch", "TooManyFields", "Too many fields: expected " + v.length + " fields but parsed " + r, t) : r < v.length && u("FieldMismatch", "TooFewFields", "Too few fields: expected " + v.length + " fields but parsed " + r, t))
                }
                return e.header && b.meta && (b.meta.fields = v), b
            }

            function o(t) {
                for (var n, r, i, o = [",", "\t", "|", ";", d.RECORD_SEP, d.UNIT_SEP], s = 0; s < o.length; s++) {
                    var l = o[s],
                        c = 0,
                        u = 0;
                    i = void 0;
                    for (var p = new a({
                            delimiter: l,
                            preview: 10
                        }).parse(t), h = 0; h < p.data.length; h++) {
                        var f = p.data[h].length;
                        u += f, void 0 !== i ? f > 1 && (c += Math.abs(f - i), i = f) : i = f
                    }
                    u /= p.data.length, (void 0 === r || c < r) && u > 1.99 && (r = c, n = l)
                }
                return e.delimiter = n, {
                    successful: !!n,
                    bestDelimiter: n
                }
            }

            function s(e) {
                return m.test(e) ? parseFloat(e) : e
            }

            function u(e, t, n, r) {
                b.errors.push({
                    type: e,
                    code: t,
                    message: n,
                    row: r
                })
            }
            var p, h, f, m = /^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,
                g = this,
                y = !1,
                v = [],
                b = {
                    data: [],
                    errors: [],
                    meta: {}
                };
            e = l(e), this.parse = function(r) {
                if (f = !1, !e.delimiter) {
                    var i = o(r);
                    i.successful ? e.delimiter = i.bestDelimiter : (f = !0, e.delimiter = d.DefaultDelimiter), b.meta.delimiter = e.delimiter
                }
                if (c(e.step)) {
                    var s = e.step;
                    e.step = function(e) {
                        b = e, n() ? t() : s(t(), g)
                    }
                }
                return e.preview && e.header && e.preview++, p = r, h = new a(e), b = h.parse(p), t(), c(e.complete) && !y && e.complete(b), y ? {
                    meta: {
                        paused: !0
                    }
                } : b
            }, this.pause = function() {
                y = !0, h.abort(), p = p.substr(h.getCharIndex())
            }, this.resume = function() {
                y = !1, h = new a(e), h.parse(p), c(e.complete) && !y && e.complete(b)
            }, this.abort = function() {
                h.abort(), c(e.complete) && e.complete(b), p = ""
            }
        }

        function a(e) {
            function t() {
                for (; P < M.length && !j && !(k > 0 && R >= k);) '"' == D ? i() : L ? o() : a(), n();
                return r()
            }

            function n() {
                P++, D = M[P]
            }

            function r() {
                if (j && w("Abort", "ParseAbort", "Parsing was aborted by the user's step function"), L && w("Quotes", "MissingQuotes", "Unescaped or mismatched quotes"), f(), !c(C)) return E()
            }

            function i() {
                b() && !v() ? L = !L : (u(), L && v() ? P++ : w("Quotes", "UnexpectedQuotes", "Unexpected quotes"))
            }

            function o() {
                (g(P) || y(P)) && A++, u()
            }

            function a() {
                D == I ? p() : g(P) ? (h(), n()) : y(P) ? h() : s() ? l() : u()
            }

            function s() {
                return !!T && ((0 == P || y(P - 1) || g(P - 2)) && M[P] === T)
            }

            function l() {
                for (; !g(P) && !y(P) && P < M.length;) n()
            }

            function u() {
                O[q][N] += D
            }

            function p() {
                O[q].push(""), N = O[q].length - 1
            }

            function h() {
                f(), A++, R++, O.push([]), q = O.length - 1, p()
            }

            function f() {
                m(), c(C) && (O[q] && C(E()), S())
            }

            function m() {
                1 == O[q].length && B.test(O[q][0]) && (e.keepEmptyRows ? O[q].splice(0, 1) : O.splice(q, 1), q = O.length - 1)
            }

            function g(e) {
                return e < M.length - 1 && ("\r" == M[e] && "\n" == M[e + 1] || "\n" == M[e] && "\r" == M[e + 1])
            }

            function y(e) {
                return "\r" == M[e] || "\n" == M[e]
            }

            function v() {
                return !b() && P < M.length - 1 && '"' == M[P + 1]
            }

            function b() {
                return !L && x(P - 1) || x(P + 1)
            }

            function x(e) {
                "number" != typeof e && (e = P);
                var t = M[e];
                return e <= -1 || e >= M.length || t == I || "\r" == t || "\n" == t
            }

            function w(e, t, n) {
                F.push({
                    type: e,
                    code: t,
                    message: n,
                    line: A,
                    row: q,
                    index: P
                })
            }

            function _(e) {
                M = e, L = !1, P = 0, R = 0, A = 1, S(), O = [
                    [""]
                ], D = M[P]
            }

            function S() {
                O = [], F = [], q = 0, N = 0
            }

            function E() {
                return {
                    data: O,
                    errors: F,
                    meta: {
                        lines: A,
                        delimiter: I,
                        aborted: j,
                        truncated: k > 0 && P < M.length
                    }
                }
            }
            var M, I, T, C, k, D, P, L, A, O, F, q, N, R, B = /^\s*$/,
                j = !1;
            e = e || {}, I = e.delimiter, T = e.comments, C = e.step, k = e.preview, ("string" != typeof I || 1 != I.length || d.BAD_DELIMITERS.indexOf(I) > -1) && (I = ","), !0 === T ? T = "#" : ("string" != typeof T || 1 != T.length || d.BAD_DELIMITERS.indexOf(T) > -1 || T == I) && (T = !1), this.parse = function(e) {
                if ("string" != typeof e) throw "Input must be a string";
                return _(e), t()
            }, this.abort = function() {
                j = !0
            }, this.getCharIndex = function() {
                return P
            }
        }

        function s(e) {
            "object" != typeof e && (e = {});
            var t = l(e);
            return ("string" != typeof t.delimiter || 1 != t.delimiter.length || d.BAD_DELIMITERS.indexOf(t.delimiter) > -1) && (t.delimiter = p.delimiter), "boolean" != typeof t.header && (t.header = p.header), "boolean" != typeof t.dynamicTyping && (t.dynamicTyping = p.dynamicTyping), "number" != typeof t.preview && (t.preview = p.preview), "function" != typeof t.step && (t.step = p.step), "function" != typeof t.complete && (t.complete = p.complete), "function" != typeof t.error && (t.error = p.error), "string" != typeof t.encoding && (t.encoding = p.encoding), "boolean" != typeof t.download && (t.download = p.download), "boolean" != typeof t.keepEmptyRows && (t.keepEmptyRows = p.keepEmptyRows), t
        }

        function l(e) {
            if ("object" != typeof e) return e;
            var t = e instanceof Array ? [] : {};
            for (var n in e) t[n] = l(e[n]);
            return t
        }

        function c(e) {
            return "function" == typeof e
        }
        var u = e("jquery"),
            p = {
                delimiter: "",
                header: !1,
                dynamicTyping: !1,
                preview: 0,
                step: void 0,
                encoding: "",
                comments: !1,
                complete: void 0,
                error: void 0,
                download: !1,
                chunk: void 0,
                keepEmptyRows: !1
            },
            d = {};
        return d.parse = t, d.unparse = n, d.RECORD_SEP = String.fromCharCode(30), d.UNIT_SEP = String.fromCharCode(31), d.BYTE_ORDER_MARK = "\ufeff", d.BAD_DELIMITERS = ["\r", "\n", '"', d.BYTE_ORDER_MARK], d.LocalChunkSize = 10485760, d.RemoteChunkSize = 5242880, d.DefaultDelimiter = ",", d.Parser = a, d.ParserHandle = o, d.NetworkStreamer = r, d.FileStreamer = i, u.fn.parse = function(e) {
            function t() {
                if (0 != o.length) {
                    var t = o[0];
                    if (c(e.before)) {
                        var i = e.before(t.file, t.inputElem);
                        if ("object" == typeof i) {
                            if ("abort" == i.action) return void n("AbortError", t.file, t.inputElem, i.reason);
                            if ("skip" == i.action) return void r();
                            "object" == typeof i.config && (t.instanceConfig = u.extend(t.instanceConfig, i.config))
                        } else if ("skip" == i) return void r()
                    }
                    var a = t.instanceConfig.complete;
                    t.instanceConfig.complete = function(e) {
                        c(a) && a(e, t.file, t.inputElem), r()
                    }, d.parse(t.file, t.instanceConfig)
                }
            }

            function n(t, n, r, i) {
                c(e.error) && e.error({
                    name: t
                }, n, r, i)
            }

            function r() {
                o.splice(0, 1), t()
            }
            var i = e.config || {},
                o = [];
            return this.each(function(e) {
                if ("INPUT" != u(this).prop("tagName").toUpperCase() || "file" != u(this).attr("type").toLowerCase() || !window.FileReader || !this.files || 0 == this.files.length) return !0;
                for (var t = 0; t < this.files.length; t++) o.push({
                    file: this.files[t],
                    inputElem: this,
                    instanceConfig: u.extend({}, i)
                })
            }), t(), this
        }, d
    }), define("classifier/classify", ["require", "exports", "tslib", "math/parser/latex-lexer"], function(e, t, n, r) {
        "use strict";

        function i(e) {
            for (var t = [], n = r.lex(e); !r.isDone(n);) t.push(r.peek(n).type), n = r.advance(n);
            return t
        }

        function o(e) {
            var t = e.join(" ");
            return l[t] || 0
        }

        function a(e) {
            for (var t = i(e), n = -50, r = 0, a = [1, 2]; r < a.length; r++)
                for (var s = a[r], l = 0; l < t.length - (s - 1); l++) n += o(t.slice(l, l + s));
            return n > 0 ? "text" : "latex"
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var s = {
                Letter: 2.156219035621851,
                Symbol: -1.3955973111865143,
                Digit: -2.0187663223829224,
                Left: -7.301023550701673,
                EscapedSymbol: -9.275703878032967,
                Right: -7.301023825347384,
                "^": -3.702774744662061,
                Frac: -8.235766712671952,
                "{": -5.193756353978961,
                "}": -5.2091412728184405,
                Cmd: -7.50431522952453,
                Sqrt: -8.586560878205761,
                "[": .03831036387053607,
                "]": .05570210658240527,
                _: -1.7156133278555172,
                Primes: 4.903727028603438,
                "Letter Symbol": -.587455596598396,
                "Symbol Digit": -2.342805435433473,
                "Digit Digit": -1.9386043709163656,
                "Digit Left": -10.697650284847587,
                "Left EscapedSymbol": -10.98041713966381,
                "EscapedSymbol Symbol": -8.5117449230521,
                "Digit Symbol": -1.8779763152981215,
                "Symbol Letter": -.1405240762419908,
                "Symbol Symbol": -.6475366838293403,
                "Digit Right": -8.311491735655617,
                "Right EscapedSymbol": -10.980416619794807,
                "EscapedSymbol Letter": -9.735492625122268,
                "EscapedSymbol Digit": -10.243800974521639,
                "Digit Letter": .269772262816565,
                "EscapedSymbol Left": -9.119999761194801,
                "Left Symbol": -6.561757865357271,
                "Letter ^": -2.278642569351918,
                "^ Digit": -4.132434723614744,
                "Right Symbol": -6.561759031337466,
                "Symbol ^": -5.036021881596493,
                "Symbol Left": -6.967910898703368,
                "Symbol Frac": -8.166757548038712,
                "Frac {": -8.235766712671952,
                "{ Left": -8.991807634715721,
                "Symbol }": -4.596921941829504,
                "} {": -6.754162171747737,
                "{ Digit": -6.048251708685925,
                "Digit }": -5.6813597584647075,
                "} Right": -7.12081343692023,
                "Digit Cmd": -8.720476643659573,
                "Cmd Letter": -7.0146829549360925,
                "Letter Cmd": -7.420424080237284,
                "Cmd Digit": -8.876029742533563,
                "{ Symbol": -4.582909223105274,
                "{ Letter": -3.5921906493779776,
                "Letter }": -3.609737593111089,
                "Cmd Symbol": -6.761368546579928,
                "Cmd Left": -8.80721391308075,
                "} Letter": -3.432792087414758,
                "} Sqrt": -5.74145896772395,
                "Sqrt {": -8.558004096883055,
                "} Symbol": -5.316686511513064,
                "Cmd Frac": -6.712095356064388,
                "Digit ^": -3.442002974722137,
                "Letter Left": -4.421537036182191,
                "Letter Right": -5.36130523753825,
                "Symbol Cmd": -5.960388282212457,
                "EscapedSymbol Frac": -7.562569839199085,
                "Cmd Cmd": -6.475569226325829,
                "Cmd Sqrt": -5.091083672473911,
                "} }": -7.218479057816111,
                "} Cmd": -6.318841943492862,
                "^ {": -5.444688757128561,
                "} Left": -6.467851007802071,
                "Symbol Right": -6.529432241317352,
                "Digit Frac": -7.173524841449775,
                "} Digit": -4.832392713235034,
                "Symbol Sqrt": -7.925378801801921,
                "Letter Letter": 5.573955833488698,
                "^ Letter": -.34821475407072777,
                "Letter Digit": 3.715128234020657,
                "Cmd ^": -4.893017335051469,
                "{ Cmd": -6.590644689725278,
                "Cmd }": -7.207298467808705,
                "Digit Sqrt": -7.325131774172862,
                "EscapedSymbol Right": -6.7683521840218885,
                "{ Frac": -6.166651132780269,
                "} Frac": -5.081272273013265,
                "EscapedSymbol Cmd": -7.28561342161958,
                "Cmd Right": -6.477941149516706,
                "EscapedSymbol Sqrt": -5.5587846150187685,
                "Sqrt [": -5.01665790523756,
                "[ Digit": -1.1565164295080437,
                "Digit ]": -.27253982970500096,
                "] {": -5.01665790523756,
                "Letter _": -2.169853996499765,
                "_ Letter": -.8680926855845452,
                "_ {": -5.321268907503729,
                "_ Digit": -2.475564458334699,
                "{ Sqrt": -5.698311290953599,
                "} ^": -5.814103144043405,
                "Cmd _": -4.441413614112532,
                "Letter Frac": -4.096008984739159,
                "Letter Sqrt": -3.7535258288937885,
                "EscapedSymbol ^": -.9689436791314612,
                "EscapedSymbol }": -4.330364208467625,
                "{ ^": 1.1866870009059214,
                "Letter Primes": 6.061019060617993,
                "Primes Letter": 5.698810630211005,
                "{ }": .2624280993825892,
                "Letter EscapedSymbol": 1.0043654441119667,
                "Symbol Primes": 2.713433197494908,
                "Digit Primes": 2.7784253362406206,
                "Cmd Primes": -.8545333279537168,
                "Left [": -4.20694054544644,
                "[ Left": -.22429997280434075,
                "Right ]": -4.20694054544644,
                "] Symbol": 2.1951677852481577,
                "[ Frac": -3.4323860902511614,
                "] ^": -3.6998956445203555,
                "[ Letter": 2.5281673462360192,
                "Letter ]": 3.9298285218194016,
                "] Left": -.9051770607724716,
                "] }": -1.4233827918360848,
                "[ Symbol": 2.7444529027957008,
                "] Letter": 3.4186545266860136,
                "Primes Cmd": -2.3657998283024604,
                "] Right": -1.7147345931768285,
                "Digit [": 3.3557407012754443,
                "[ Cmd": .7812218927977569,
                "Symbol ]": 3.62280348652449,
                "] [": 3.322218009236801,
                "} ]": 2.390659805231857,
                "} _": 2.3906598052318575,
                "Symbol [": 5.41108469137622,
                "Primes Symbol": 6.172004487017887,
                "^ Symbol": 3.9412572176430243,
                "} Primes": -.4227509115281791,
                "] Cmd": -.5360795968351822,
                "Primes Frac": 2.1029777327800763,
                "Cmd [": 1.8798341814658668,
                "Digit _": 4.941524422811655,
                "Cmd EscapedSymbol": -.8414612463863641,
                "EscapedSymbol Primes": -1.1928591332242529,
                "Letter [": 5.800907022413931,
                "Primes Left": .3112182635520215,
                "Symbol EscapedSymbol": 3.6434227737272256,
                "Digit EscapedSymbol": .39822964054165105,
                "EscapedSymbol [": 2.3906598052318575,
                "Cmd ]": 2.1029777327800763,
                "Primes Digit": 3.489272093899967,
                "Symbol _": 5.43518224295528,
                "{ _": -.2949175400182943,
                "EscapedSymbol EscapedSymbol": 1.2920475165637477,
                "_ Symbol": 5.7918571868940125,
                "[ Sqrt": 1.8798341814658668,
                "] Digit": 3.740586522180873,
                "Cmd {": 2.1029777327800763,
                "} EscapedSymbol": 1.697512624671912,
                "{ EscapedSymbol": 1.0043654441119667,
                "Primes }": 2.3906598052318575,
                "Letter {": 8.152711188012034,
                "Symbol {": 8.114244907184238,
                "^ ^": 7.532323361734517,
                "Primes Primes": 4.875566455019857,
                "_ _": 9.309355024252328,
                "Digit {": 6.054221451361504,
                "[ [": 5.098710006334067,
                "] ]": 5.098710006334067,
                "[ _": 5.686496671236187,
                "_ ]": 5.686496671236187,
                "{ [": 4.587884382568077,
                "} [": 6.197322295002177
            },
            l = n.__assign({}, s, {
                "_ {": -10 * s["Letter Letter"]
            });
        t.classify = a
    }), define("geometry/math/isNumber", ["require", "exports"], function(e, t) {
        "use strict";

        function n(e) {
            var t;
            if ("number" == typeof e) t = e + "";
            else {
                if ("string" != typeof e) return !1;
                t = e
            }
            return t.trim().match(/^-?[0-9]*\.?[0-9]*$/)
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.isNumber = n
    }), define("main/data_helpers", ["require", "exports", "vendor/papaparse", "underscore", "bugsnag", "classifier/classify", "geometry/math/isNumber"], function(e, t, n, r, i, o, a) {
        "use strict";

        function s(e) {
            var t = e.split(/\r?\n/),
                n = [],
                i = !1;
            if (!(t.length < 2)) {
                for (var s = 0; s < t.length; s++) {
                    var l = t[s];
                    if (l.trim()) {
                        var c = o.classify(t[s]);
                        s > 0 && ("text" === c || !a.isNumber(l.replace(/,(\d{3})/g, "$1"))) && (i = !0), "text" === c && n.length > 0 && "text" === n[n.length - 1].type ? n[n.length - 1].content += "\n" + l : n.push({
                            type: c,
                            content: l
                        })
                    }
                }
                if (!i) {
                    var u = r.pluck(n, "content").map(function(e) {
                        return e.replace(/,(\d{3})/g, "$1")
                    });
                    return a.isNumber(u[0]) || (u = u.slice(1)), [{
                        content: "\\left[" + u.join(",") + "\\right]",
                        type: "latex",
                        numberList: !0
                    }]
                }
                return n
            }
            if (e.length > 30 && "text" === o.classify(e)) return [{
                type: "text",
                content: e
            }]
        }

        function l(e) {
            if (!/^\s*$/.test(e)) {
                var t = n.parse(e, {
                        preview: 1e3
                    }),
                    r = [];
                if (t.errors.length && !t.data.length) return void i.notify("PapaParse.parse returned errors.", {
                    metaData: {
                        input: e,
                        output: t.errors
                    }
                });
                if (t.data.length && !(t.data.length < 2)) {
                    for (var o = t.data[0].length, a = 0; a < o; a++) r.push([]);
                    for (var s = 0; s < t.data.length; s++)
                        if (0 !== s || !isNaN(parseFloat(t.data[s][0]))) {
                            if (t.data[s].length < 2) return;
                            if (t.data[s][0] || t.data[s][1])
                                for (var a = 0; a < o; a++) {
                                    var l = (t.data[s][a] || "").replace(/,(\d{3})/g, "$1");
                                    if (l && isNaN(parseFloat(l))) return;
                                    r[a].push(l)
                                }
                        } if (!(r[0].length < 2)) return r
                }
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.getExpressions = s, t.parse = l
    }), define("loadcss!new_expression", function() {}), define("expressions/new_expression_view", ["require", "exports", "tslib", "dcgview", "loadcss!new_expression"], function(e, t, n, r) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var i = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.template = function() {
                return this.controller = this.props.controller(), r.createElement("div", {
                    class: r.const("dcg-expressionitem dcg-new-expression dcg-opened")
                }, r.createElement("div", {
                    class: r.const("dcg-new-math-div dcg-do-not-blur dcg-action-newmath"),
                    onTap: this.bindFn(this.newMath)
                }, r.createElement("div", {
                    class: r.const("dcg-new-expression-fade")
                })), r.createElement("span", {
                    class: r.const("dcg-tab")
                }, r.createElement("span", {
                    class: r.const("dcg-num dcg-variable-index")
                }, this.bindFn(this.getIndex)), r.createElement("div", {
                    class: r.const("dcg-tab-interior")
                })))
            }, t.prototype.getIndex = function() {
                return this.controller.getNextDisplayIndex()
            }, t.prototype.newMath = function() {
                this.controller.dispatch({
                    type: "new-expression-at-end"
                })
            }, t
        }(r.Class);
        t.default = i
    }), define("loadcss!add_expression", function() {}), define("expressions/add_expression_view", ["require", "exports", "tslib", "keys", "browser", "lib/tooltip", "dcgview", "jquery", "./image-upload-view", "main/manage-focus-helper", "loadcss!add_expression"], function(e, t, n, r, i, o, a, s, l, c) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var u = a.Components.If,
            p = function(e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return n.__extends(t, e), t.prototype.init = function() {
                    this.controller = this.props.controller()
                }, t.prototype.template = function() {
                    var e = this;
                    return a.createElement("div", {
                        class: a.const("dcg-add-expression-container")
                    }, a.createElement(o.Tooltip, {
                        tooltip: function() {
                            return e.controller.t("Add Item")
                        },
                        gravity: function() {
                            return e.controller.isNarrow() ? "ne" : "se"
                        }
                    }, a.createElement("span", {
                        class: function() {
                            return {
                                "dcg-icon-btn": !0,
                                "dcg-add-expression-btn": !0,
                                "dcg-action-add-expression": !0,
                                "dcg-do-blur": !0,
                                "dcg-active": e.controller.isAddExpressionOpen()
                            }
                        },
                        handleEvent: a.const("true"),
                        role: a.const("button"),
                        tabindex: a.const("0"),
                        "aria-haspopup": a.const("true"),
                        "aria-expanded": function() {
                            return e.controller.isAddExpressionOpen()
                        },
                        "aria-label": function() {
                            return e.controller.t("Add Item")
                        },
                        didMount: function(t) {
                            e.toggleButtonNode = t
                        },
                        onTap: this.bindFn(this.toggleAddExpression),
                        manageFocus: this.const(c.manageFocusHelper({
                            controller: this.controller,
                            location: {
                                type: "add-item-btn"
                            }
                        }))
                    }, a.createElement("i", {
                        class: a.const("dcg-icon-plus")
                    }))), a.createElement(u, {
                        predicate: function() {
                            return e.controller.isAddExpressionOpen()
                        }
                    }, function() {
                        return a.createElement("div", {
                            class: function() {
                                return {
                                    "dcg-add-expression-dropdown": !0,
                                    "dcg-popover": !0,
                                    "dcg-bottom": !e.controller.isNarrow(),
                                    "dcg-right": e.controller.isNarrow()
                                }
                            },
                            role: a.const("complementary"),
                            "aria-label": a.const("Add Item Menu"),
                            didMount: e.bindFn(e.didMountPopover),
                            didUnmount: e.bindFn(e.didUnmountPopover)
                        }, a.createElement("div", {
                            class: a.const("dcg-popover-interior")
                        }, a.createElement("div", {
                            class: a.const("dcg-new-item dcg-do-not-blur dcg-action-newexpression"),
                            role: a.const("button"),
                            tabindex: a.const(0),
                            "aria-label": function() {
                                return e.controller.t("Add Expression")
                            },
                            onTap: e.bindFn(e.newExpression),
                            handleEvent: a.const("true"),
                            manageFocus: e.const(c.manageFocusHelper({
                                controller: e.controller,
                                location: {
                                    type: "add-expression-btn"
                                }
                            }))
                        }, a.createElement("i", {
                            class: a.const("dcg-icon-new-expression dcg-expression-icon")
                        }), function() {
                            return e.controller.t("expression")
                        }), a.createElement(u, {
                            predicate: function() {
                                return e.controller.areNotesEnabled()
                            }
                        }, function() {
                            return a.createElement("div", {
                                class: a.const("dcg-new-item dcg-do-not-blur dcg-action-newtext"),
                                role: a.const("button"),
                                tabindex: a.const(0),
                                "aria-label": function() {
                                    return e.controller.t("Add Note")
                                },
                                onTap: e.bindFn(e.newText),
                                handleEvent: a.const("true")
                            }, a.createElement("i", {
                                class: a.const("dcg-icon-new-text dcg-expression-icon")
                            }), function() {
                                return e.controller.t("note")
                            })
                        }), a.createElement("div", {
                            class: a.const("dcg-new-item dcg-do-not-blur dcg-action-newtable"),
                            role: a.const("button"),
                            tabindex: a.const(0),
                            "aria-label": function() {
                                return e.controller.t("Add Table")
                            },
                            onTap: e.bindFn(e.newTable),
                            handleEvent: a.const("true"),
                            manageFocus: e.const(c.manageFocusHelper({
                                controller: e.controller,
                                location: {
                                    type: "add-table-btn"
                                }
                            }))
                        }, a.createElement("i", {
                            class: a.const("dcg-icon-new-table dcg-expression-icon")
                        }), function() {
                            return e.controller.t("table")
                        }), a.createElement(u, {
                            predicate: function() {
                                return e.controller.areFoldersEnabled()
                            }
                        }, function() {
                            return a.createElement("div", {
                                class: a.const("dcg-new-item dcg-do-not-blur dcg-action-newfolder"),
                                role: a.const("button"),
                                tabindex: a.const(0),
                                "aria-label": function() {
                                    return e.controller.t("Add Folder")
                                },
                                onTap: e.bindFn(e.newFolder),
                                handleEvent: a.const("true"),
                                manageFocus: e.const(c.manageFocusHelper({
                                    controller: e.controller,
                                    location: {
                                        type: "add-folder-btn"
                                    }
                                }))
                            }, a.createElement("i", {
                                class: a.const("dcg-icon-new-folder dcg-expression-icon")
                            }), function() {
                                return e.controller.t("folder")
                            })
                        }), a.createElement(u, {
                            predicate: function() {
                                return e.controller.areImagesEnabled()
                            }
                        }, function() {
                            return a.createElement(l.ImageUploadView, {
                                controller: function() {
                                    return e.controller
                                },
                                ariaLabel: function() {
                                    return e.controller.t("Add Image")
                                },
                                onFileChange: function(t) {
                                    return e.insertFiles(t)
                                },
                                location: e.const({
                                    type: "add-image-btn"
                                })
                            }, a.createElement("div", {
                                class: a.const("dcg-new-item dcg-action-newimage")
                            }, a.createElement("i", {
                                class: a.const("dcg-icon-new-image dcg-expression-icon")
                            }), function() {
                                return e.controller.t("image")
                            }))
                        })), a.createElement("span", {
                            class: a.const("dcg-arrow")
                        }))
                    }))
                }, t.prototype.didMountPopover = function(e) {
                    var t = this;
                    this.popoverNode = e, s(document).on("dcg-tapstart.add-expression-view wheel.add-expression-view", function(e) {
                        t.eventShouldClosePopover(e) && t.controller.dispatch({
                            type: "close-add-expression",
                            focusIconAfterClose: "keyboard" === e.device
                        })
                    }), s(document).on("keydown.add-expression-view", function(e) {
                        if ("Esc" === r.lookup(e) && t.controller.dispatch({
                                type: "close-add-expression",
                                focusIconAfterClose: !0
                            }), "Tab" === r.lookup(e) && !e.altKey && !e.metaKey && !e.ctrlKey) {
                            var n = t.controller.getFocusLocation();
                            if (!n) return;
                            var i = void 0;
                            i = t.controller.areImagesEnabled() ? {
                                type: "add-image-btn"
                            } : t.controller.areFoldersEnabled() ? {
                                type: "add-folder-btn"
                            } : {
                                type: "add-table-btn"
                            }, e.shiftKey || n.type !== i.type ? e.shiftKey && "add-item-btn" === n.type && (t.controller.dispatch({
                                type: "set-focus-location",
                                location: i
                            }), e.preventDefault(), e.stopPropagation()) : (t.controller.dispatch({
                                type: "set-focus-location",
                                location: {
                                    type: "add-item-btn"
                                }
                            }), e.preventDefault(), e.stopPropagation())
                        }
                    }), i.IS_IPAD && i.IS_IN_IFRAME && s(e).on("dcg-tapstart", function(e) {
                        return e.preventDefault()
                    }), s(e).find(".dcg-new-item").on("touchstart", function(e) {
                        return e.preventDefault()
                    })
                }, t.prototype.didUnmountPopover = function() {
                    s(document).off(".add-expression-view")
                }, t.prototype.toggleAddExpression = function(e) {
                    this.controller.dispatch({
                        type: "toggle-add-expression",
                        focusOnOpen: "keyboard" === e.device
                    })
                }, t.prototype.newExpression = function() {
                    this.controller.dispatch({
                        type: "new-expression"
                    })
                }, t.prototype.newText = function() {
                    this.controller.dispatch({
                        type: "new-text"
                    })
                }, t.prototype.newFolder = function() {
                    this.controller.dispatch({
                        type: "new-folder"
                    })
                }, t.prototype.newTable = function() {
                    this.controller.dispatch({
                        type: "new-table"
                    })
                }, t.prototype.insertFiles = function(e) {
                    this.controller.dispatch({
                        type: "new-images",
                        files: e
                    })
                }, t.prototype.eventShouldClosePopover = function(e) {
                    var t = !!s(e.target).closest(this.popoverNode).length,
                        n = !!s(e.target).closest(this.toggleButtonNode).length;
                    return !(t || n)
                }, t
            }(a.Class);
        t.default = p
    }), define("loadcss!expressions/expressions-header", function() {}), define("expressions/expressions-header", ["require", "exports", "tslib", "./add_expression_view", "dcgview", "lib/tooltip", "jquery", "loadcss!./expressions-header"], function(e, t, n, r, i, o, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var s = i.Components.If,
            l = function(e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return n.__extends(t, e), t.prototype.init = function() {
                    this.controller = this.props.controller()
                }, t.prototype.template = function() {
                    var e = this;
                    return i.createElement("div", {
                        class: function() {
                            return {
                                "dcg-expression-top-bar": !0,
                                "dcg-expressions-scrolled": e.props.expsScrolled()
                            }
                        },
                        role: i.const("toolbar"),
                        "aria-label": function() {
                            return e.controller.t("Expression Bar")
                        },
                        didMount: function(t) {
                            e.node = t
                        },
                        onTapStart: this.bindFn(this.clearSelectionOnMobile),
                        style: function() {
                            return {
                                background: e.controller.hasBackgroundColor() ? e.controller.getPillboxBackgroundColor() : void 0
                            }
                        }
                    }, i.createElement("div", {
                        class: i.const("dcg-left-buttons")
                    }, i.createElement(s, {
                        predicate: this.bindFn(this.showHamburger)
                    }, function() {
                        return i.createElement("span", {
                            class: i.const("dcg-action-opendrawer dcg-tooltip dcg-icon-btn dcg-in-api-action-opendrawer"),
                            handleEvent: i.const("true"),
                            tooltip: function() {
                                return e.controller.t("Open Graph (ctrl+o)")
                            },
                            role: i.const("button"),
                            tabindex: i.const("0"),
                            "aria-label": function() {
                                return e.controller.t("Open Graph")
                            },
                            onTap: function() {
                                return e.controller.dispatch({
                                    type: "open-drawer"
                                })
                            }
                        }, i.createElement("i", {
                            class: i.const("dcg-icon-hamburger")
                        }))
                    }), i.createElement(s, {
                        predicate: function() {
                            return !e.controller.isInEditListMode()
                        }
                    }, function() {
                        return i.createElement(r.default, {
                            controller: function() {
                                return e.props.controller()
                            }
                        })
                    }), i.createElement(s, {
                        predicate: this.bindFn(this.showRerandomize)
                    }, function() {
                        return i.createElement(o.Tooltip, {
                            tooltip: function() {
                                return e.controller.t("Randomize")
                            },
                            gravity: function() {
                                return e.controller.isNarrow() ? "n" : "s"
                            }
                        }, i.createElement("span", {
                            class: i.const("dcg-icon-btn"),
                            handleEvent: i.const("true"),
                            role: i.const("button"),
                            tabindex: i.const("0"),
                            "aria-label": function() {
                                return e.controller.t("Randomize")
                            },
                            onTap: function() {
                                return e.controller.dispatch({
                                    type: "re-randomize"
                                })
                            }
                        }, i.createElement("i", {
                            class: i.const("dcg-icon-randomize")
                        })))
                    }), i.createElement(s, {
                        predicate: function() {
                            return e.controller.isInEditListMode() && !e.controller.hasDefaultState()
                        }
                    }, function() {
                        return i.createElement("span", {
                            class: i.const("dcg-btn-red dcg-action-clearall"),
                            role: i.const("button"),
                            tabindex: i.const("0"),
                            onTap: function() {
                                return e.controller.dispatch({
                                    type: "clear-graph"
                                })
                            }
                        }, function() {
                            return e.controller.t("Delete All")
                        })
                    }), i.createElement(s, {
                        predicate: function() {
                            return e.controller.isInEditListMode() && e.controller.hasDefaultState()
                        }
                    }, function() {
                        return i.createElement("span", {
                            class: i.const("dcg-btn-red dcg-action-reset"),
                            role: i.const("button"),
                            tabindex: i.const("0"),
                            onTap: function() {
                                return e.controller.dispatch({
                                    type: "reset-graph"
                                })
                            }
                        }, function() {
                            return e.controller.t("Reset")
                        })
                    })), i.createElement("div", {
                        class: i.const("dcg-center-buttons")
                    }, i.createElement(o.Tooltip, {
                        tooltip: function() {
                            return e.controller.t("Undo (ctrl+z)")
                        },
                        gravity: function() {
                            return e.controller.isNarrow() ? "n" : "s"
                        },
                        disabled: function() {
                            return !e.controller.canUndo()
                        }
                    }, i.createElement("span", {
                        class: function() {
                            return {
                                "dcg-action-undo": !0,
                                "dcg-icon-btn": !0,
                                "dcg-disabled": !e.controller.canUndo()
                            }
                        },
                        role: i.const("button"),
                        tabindex: function() {
                            return e.controller.canUndo() ? 0 : -1
                        },
                        "aria-label": function() {
                            return e.controller.t("Undo")
                        },
                        onTap: function() {
                            return e.controller.dispatch({
                                type: "undo"
                            })
                        },
                        "aria-disabled": function() {
                            return !e.controller.canUndo()
                        }
                    }, i.createElement("i", {
                        class: i.const("dcg-icon-undo")
                    }))), i.createElement(o.Tooltip, {
                        tooltip: function() {
                            return e.controller.t("Redo (ctrl+y)")
                        },
                        gravity: function() {
                            return e.controller.isNarrow() ? "n" : "s"
                        },
                        disabled: function() {
                            return !e.controller.canRedo()
                        }
                    }, i.createElement("span", {
                        class: function() {
                            return {
                                "dcg-action-redo": !0,
                                "dcg-icon-btn": !0,
                                "dcg-disabled": !e.controller.canRedo()
                            }
                        },
                        role: i.const("button"),
                        tabindex: function() {
                            return e.controller.canRedo() ? 0 : -1
                        },
                        "aria-label": function() {
                            return e.controller.t("Redo")
                        },
                        onTap: function() {
                            return e.controller.dispatch({
                                type: "redo"
                            })
                        },
                        "aria-disabled": function() {
                            return !e.controller.canRedo()
                        }
                    }, i.createElement("i", {
                        class: i.const("dcg-icon-redo")
                    })))), i.createElement("div", {
                        class: i.const("dcg-right-buttons")
                    }, i.createElement(s, {
                        predicate: function() {
                            return !e.controller.isInEditListMode()
                        }
                    }, function() {
                        return i.createElement(o.Tooltip, {
                            tooltip: e.const("Edit List"),
                            gravity: function() {
                                return e.controller.isNarrow() ? "n" : "s"
                            }
                        }, i.createElement("span", {
                            class: i.const("dcg-icon-btn dcg-action-toggle-edit"),
                            handleEvent: i.const("true"),
                            role: i.const("button"),
                            tabindex: i.const("0"),
                            "aria-label": function() {
                                return e.controller.t("Edit Expression List")
                            },
                            onTap: e.bindFn(e.toggleEditListMode)
                        }, i.createElement("i", {
                            class: i.const("dcg-icon-settings")
                        })))
                    }), i.createElement(s, {
                        predicate: function() {
                            return e.controller.isInEditListMode()
                        }
                    }, function() {
                        return i.createElement("span", {
                            class: i.const("dcg-btn-blue dcg-action-toggle-edit dcg-do-not-blur"),
                            handleEvent: i.const("true"),
                            role: i.const("button"),
                            tabindex: i.const("0"),
                            onTap: e.bindFn(e.toggleEditListMode)
                        }, function() {
                            return e.controller.t("Done")
                        })
                    }), i.createElement(s, {
                        predicate: function() {
                            return !e.controller.isInEditListMode() && e.controller.getGraphSettings().config.graphpaper
                        }
                    }, function() {
                        return i.createElement(o.Tooltip, {
                            tooltip: e.const("Hide Expression List"),
                            gravity: function() {
                                return e.controller.isNarrow() ? "nw" : "sw"
                            }
                        }, i.const(" "), i.createElement("span", {
                            class: function() {
                                return {
                                    "dcg-resize-list-btn": !0,
                                    "dcg-action-hideexpressions": !0,
                                    "dcg-icon-btn": !0,
                                    "dcg-rotated": e.controller.isNarrow()
                                }
                            },
                            role: i.const("button"),
                            tabindex: i.const("0"),
                            "aria-label": function() {
                                return e.controller.t("Hide Expression List")
                            },
                            onTap: function() {
                                return e.controller.dispatch({
                                    type: "hide-expressions-list"
                                })
                            }
                        }, i.createElement("i", {
                            class: i.const("dcg-icon-hide")
                        })))
                    })))
                }, t.prototype.showRerandomize = function() {
                    return this.controller.anyItemDependsOnRandomSeed()
                }, t.prototype.showHamburger = function() {
                    return !!this.controller.getGraphSettings().config.showHamburger && (!this.controller.isInEditListMode() && !this.controller.isNarrow())
                }, t.prototype.clearSelectionOnMobile = function(e) {
                    e.wasHandled() || this.controller.dispatch({
                        type: "set-none-selected"
                    })
                }, t.prototype.toggleEditListMode = function(e) {
                    var t = this;
                    this.controller.dispatch({
                        type: "set-edit-list-mode",
                        isEditListMode: !this.controller.isInEditListMode(),
                        focusExpressionList: !1
                    }), "keyboard" === e.device && this.controller.runAfterDispatch(function() {
                        a(t.node).find(".dcg-action-toggle-edit").focus()
                    })
                }, t
            }(i.Class);
        t.default = l
    }), define("main/load-graph-from-link", ["require", "exports", "main/migrate_state", "jquery"], function(e, t, n, r) {
        "use strict";

        function i(e, t, i, o) {
            var a = !1;
            e.dispatch({
                type: "toast/show",
                toast: {
                    message: e.t("Importing graph..."),
                    hideAfter: 0,
                    toastStyle: "cover",
                    onHide: function() {
                        a = !0
                    }
                }
            });
            var s = e.getState(),
                l = function() {
                    a || e.dispatch({
                        type: "toast/show",
                        toast: {
                            message: e.t("Error importing graph. Check the URL?"),
                            toastStyle: "error",
                            hideAfter: 12e3
                        }
                    })
                },
                c = function(e) {
                    if (!e || !e.expressions || !e.expressions.list) return !1;
                    for (var t = e.expressions.list, n = 0; n < t.length; n++)
                        if ("folder" === t[n].type) return !1;
                    return !0
                },
                u = function(t, n) {
                    if (!a) {
                        var r = e.getSelectedItem();
                        if (!c(t)) return void e.dispatch({
                            type: "toast/show",
                            toast: {
                                message: e.t("Only graphs without folders can be inserted into a folder."),
                                toastStyle: "error",
                                hideAfter: 12e3
                            }
                        });
                        r && e.dispatch({
                            type: "set-folder-title",
                            id: r.id,
                            title: n
                        }), t.expressions.list.forEach(function(t) {
                            t.id = e.generateId()
                        }), e.dispatch({
                            type: "insert-several-expressions",
                            expressions: t.expressions.list
                        }), e.dispatch({
                            type: "toast/show",
                            toast: {
                                message: e.t("Graph imported!")
                            }
                        })
                    }
                },
                p = function(t) {
                    a || (e.dispatch({
                        type: "set-state",
                        state: t
                    }), e.dispatch({
                        type: "toast/show",
                        toast: {
                            message: e.t("Graph imported!"),
                            undoCallback: function() {
                                e.dispatch({
                                    type: "set-state",
                                    state: s
                                })
                            }
                        }
                    }))
                };
            r.getJSON(t).done(function(e) {
                var t = n.migrateToLatest(e.state);
                o(t, function(t, n) {
                    t || !n ? l() : "set-state" === i ? p(n) : u(n, e.title)
                })
            }).fail(l)
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = i
    }), define("lib/get-clipboard-data", ["require", "exports"], function(e, t) {
        "use strict";

        function n(e) {
            return window.clipboardData && window.clipboardData.getData ? window.clipboardData.getData("Text") : e && e.clipboardData && e.clipboardData.getData ? e.clipboardData.getData("text/plain") : void 0
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = n
    }), define("loadcss!expressions/exp-list-resizer", function() {}), define("expressions/exp-list-resizer", ["require", "exports", "tslib", "dcgview", "jquery", "underscore", "loadcss!./exp-list-resizer"], function(e, t, n, r, i, o) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var a = r.Components.If,
            s = function(e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return n.__extends(t, e), t.prototype.init = function() {
                    this.guid = o.uniqueId("dcg-exp-list-resize")
                }, t.prototype.template = function() {
                    var e = this;
                    return r.createElement(a, {
                        predicate: this.bindFn(this.isVisible)
                    }, function() {
                        return r.createElement("div", {
                            class: r.const("dcg-exp-list-resizer"),
                            onTapStart: e.bindFn(e.onTapStart)
                        })
                    })
                }, t.prototype.isVisible = function() {
                    return !this.props.controller().expressionsAreFullWidth() && this.props.controller().isListVisible()
                }, t.prototype.onTapStart = function(e) {
                    var t = this;
                    this.initialWidth = this.props.controller().getExpListWidth(), this.initialLeft = e.changedTouches[0].clientX, i(document).on("dcg-tapmove." + this.guid, function(e) {
                        if (void 0 !== t.initialLeft && void 0 !== t.initialWidth) {
                            var n = e.changedTouches[0].clientX - t.initialLeft + t.initialWidth;
                            t.props.controller().dispatch({
                                type: "resize-exp-list",
                                expListWidth: n
                            })
                        }
                    }), i(document).on("dcg-tapend." + this.guid, this.bindFn(this.onTapEnd)), i(document).on("dcg-tapcancel." + this.guid, this.bindFn(this.onTapEnd))
                }, t.prototype.onTapEnd = function() {
                    i(document).off("." + this.guid), this.initialLeft = void 0, this.initialWidth = void 0
                }, t
            }(r.Class);
        t.ExpListResizer = s
    }), define("loadcss!expressions/color-menu", function() {}), define("expressions/color-menu", ["require", "exports", "tslib", "dcgview", "underscore", "lib/color-helpers", "expressions/colors", "./circular-icon-view", "loadcss!./color-menu"], function(e, t, n, r, i, o, a, s) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var l = r.Components,
            c = l.For,
            u = l.If,
            p = l.Input,
            d = function(e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return n.__extends(t, e), t.prototype.init = function() {
                    this.controller = this.props.controller()
                }, t.prototype.template = function() {
                    var e = this;
                    return r.createElement("div", null, r.createElement(c, {
                        each: function() {
                            return i.values(e.controller.getColors())
                        }
                    }, r.createElement("div", {
                        class: r.const("dcg-color-menu dcg-do-not-blur")
                    }, function(t) {
                        return r.createElement("span", {
                            class: r.const("dcg-color-option"),
                            handleevent: r.const("true"),
                            role: r.const("button"),
                            tabindex: r.const(0),
                            "aria-label": function() {
                                return a.getColorName(e.controller, t)
                            },
                            onTap: function() {
                                return e.props.onColorSelected(t)
                            }
                        }, r.createElement(s.CircularIconView, {
                            iconType: function() {
                                return e.props.selectedColor() === t ? "check" : "none"
                            },
                            backgroundColor: function() {
                                return t
                            }
                        }))
                    })), r.createElement(u, {
                        predicate: function() {
                            return e.controller.canUseAdvancedStyling()
                        }
                    }, function() {
                        return r.createElement("div", {
                            class: r.const("dcg-advanced-color-styling")
                        }, r.const("Hex:"), r.createElement(p, {
                            class: function() {
                                return {
                                    "dcg-error": !o.isValidHexColor(e.props.selectedColor())
                                }
                            },
                            value: e.props.selectedColor,
                            onInput: function(t) {
                                e.props.onColorSelected(t)
                            }
                        }))
                    }))
                }, t
            }(r.Class);
        t.default = d
    }), define("loadcss!expressions/toggle-view", function() {}), define("expressions/toggle-view", ["require", "exports", "tslib", "dcgview", "loadcss!./toggle-view"], function(e, t, n, r) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var i = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.template = function() {
                var e = this;
                return r.createElement("div", {
                    class: function() {
                        return {
                            "dcg-toggle-view": !0,
                            "dcg-toggled": e.props.toggled()
                        }
                    },
                    role: r.const("checkbox"),
                    tabindex: r.const("0"),
                    toggled: function() {
                        return e.props.toggled()
                    },
                    onTap: this.bindFn(this.props.onChange)
                }, r.createElement("div", {
                    class: r.const("dcg-toggle-switch")
                }))
            }, t
        }(r.Class);
        t.default = i
    }), define("expressions/expression_options_view", ["require", "exports", "tslib", "dcgview", "underscore", "graphing/dragmode", "./color-menu", "math/expression-types", "graphing-calc/models/expression", "expressions/styles", "expressions/toggle-view", "dcgview-helpers/checkbox", "./circular-icon-view", "lib/aria", "dcgview-helpers/mathquill-view", "expressions/opacity"], function(e, t, n, r, i, o, a, s, l, c, u, p, d, h, f, m) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var g = r.Components,
            y = g.For,
            v = g.If,
            b = function(e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return n.__extends(t, e), t.prototype.init = function() {
                    this.controller = this.props.controller(), this.model = this.props.model(), this.id = this.model.id
                }, t.prototype.template = function() {
                    var e = this;
                    return r.createElement("div", {
                        class: function() {
                            return {
                                "dcg-exp-options-menu": !0,
                                "dcg-options-menu": !0,
                                "dcg-colors-only": 0 === e.sections().length
                            }
                        },
                        role: r.const("group"),
                        "aria-label": function() {
                            return e.controller.t("Options Menu")
                        },
                        didMount: function() {
                            h.alert(e.controller.t("Options menu open."))
                        },
                        didUnmount: function() {
                            h.alert(e.controller.t("Options menu closed."))
                        }
                    }, r.createElement("div", {
                        class: r.const("dcg-triangle")
                    }), r.createElement("div", {
                        class: r.const("dcg-options-menu-column-left")
                    }, r.createElement(v, {
                        predicate: function() {
                            return e.sections().indexOf("pointStyles") >= 0
                        }
                    }, function() {
                        return r.createElement("div", {
                            class: r.const("dcg-styles-div dcg-options-menu-section dcg-styles-section")
                        }, r.createElement("div", {
                            class: function() {
                                return {
                                    "dcg-styles-menu": !0,
                                    "dcg-dividing-line-after": e.hasNextSection("pointStyles")
                                }
                            },
                            role: r.const("group"),
                            "aria-label": function() {
                                return e.controller.t("Point Style Options")
                            }
                        }, r.createElement("span", {
                            role: r.const("heading"),
                            "aria-level": r.const("2"),
                            class: r.const("dcg-toggle-title")
                        }, function() {
                            return e.shouldPreventPointsToggle() ? e.controller.t("Style") : e.controller.t("Points")
                        }), r.createElement(v, {
                            predicate: function() {
                                return !e.shouldPreventPointsToggle()
                            }
                        }, function() {
                            return r.createElement(u.default, {
                                toggled: function() {
                                    return e.getDisplayProps().points
                                },
                                onChange: e.bindFn(e.onTogglePoints)
                            })
                        }), r.createElement(v, {
                            predicate: function() {
                                return e.getDisplayProps().points || e.shouldPreventPointsToggle()
                            }
                        }, function() {
                            return r.createElement(y, {
                                each: e.bindFn(e.getValidPointStyles)
                            }, r.createElement("div", {
                                class: r.const("dcg-style-icons")
                            }, function(t) {
                                return r.createElement("div", {
                                    class: r.const("dcg-style-icon-container"),
                                    onTap: function() {
                                        return e.onPointStyleSelected(t)
                                    },
                                    role: r.const("button"),
                                    tabindex: r.const("0"),
                                    "aria-label": function() {
                                        return t
                                    },
                                    "aria-pressed": function() {
                                        return e.model.pointStyle !== t
                                    }
                                }, r.createElement(d.CircularIconView, {
                                    backgroundColor: function() {
                                        return e.model.color
                                    },
                                    semiTransparent: function() {
                                        return e.model.pointStyle !== t
                                    },
                                    iconType: function() {
                                        return "CROSS" === t ? "point-cross" : "OPEN" === t ? "point-open" : "point-default"
                                    }
                                }))
                            }))
                        })))
                    }), r.createElement(v, {
                        predicate: function() {
                            return e.sections().indexOf("pointSizes") >= 0
                        }
                    }, function() {
                        return r.createElement("div", {
                            class: r.const("dcg-styles-div dcg-options-menu-section dcg-sizes-section")
                        }, r.createElement("div", {
                            class: function() {
                                return {
                                    "dcg-styles-menu": !0,
                                    "dcg-dividing-line-after": e.hasNextSection("pointSizes")
                                }
                            },
                            role: r.const("group"),
                            "aria-label": function() {
                                return e.controller.t("Size Options")
                            }
                        }, r.createElement("span", {
                            role: r.const("heading"),
                            "aria-level": r.const("2"),
                            class: r.const("dcg-toggle-title")
                        }, function() {
                            return e.controller.t("Size")
                        }), r.createElement(y, {
                            each: e.bindFn(e.getValidPointSizes)
                        }, r.createElement("div", {
                            class: r.const("dcg-style-icons")
                        }, function(t) {
                            return r.createElement("div", {
                                class: r.const("dcg-style-icon-container"),
                                onTap: function() {
                                    return e.onDotplotPointSizeSelected(t)
                                },
                                role: r.const("button"),
                                tabindex: r.const("0"),
                                "aria-label": function() {
                                    return t
                                },
                                "aria-pressed": function() {
                                    return e.model.vizProps.dotplotSize !== t
                                }
                            }, r.createElement(d.CircularIconView, {
                                backgroundColor: function() {
                                    return e.model.color
                                },
                                semiTransparent: function() {
                                    return e.model.vizProps.dotplotSize !== t
                                },
                                iconType: function() {
                                    return "CROSS" === e.model.pointStyle ? "point-cross" : "OPEN" === e.model.pointStyle ? "point-open" : "point-default"
                                },
                                iconModifier: function() {
                                    return "medium" === t ? "medium" : "large" === t ? "large" : "small"
                                }
                            }))
                        }))))
                    }), r.createElement(v, {
                        predicate: function() {
                            return e.sections().indexOf("lineStyles") >= 0
                        }
                    }, function() {
                        return r.createElement("div", {
                            class: r.const("dcg-styles-div dcg-options-menu-section dcg-lines-menu")
                        }, r.createElement("div", {
                            class: function() {
                                return {
                                    "dcg-styles-menu": !0,
                                    "dcg-dividing-line-after": e.hasNextSection("lineStyles")
                                }
                            },
                            role: r.const("group"),
                            "aria-label": function() {
                                return e.controller.t("Line Style Options")
                            }
                        }, r.createElement("span", {
                            role: r.const("heading"),
                            "aria-level": r.const("2"),
                            class: r.const("dcg-toggle-title")
                        }, function() {
                            return e.shouldShowLinesToggle() ? e.controller.t("Lines") : e.controller.t("Style")
                        }), r.createElement(v, {
                            predicate: function() {
                                return e.shouldShowLinesToggle()
                            }
                        }, function() {
                            return r.createElement(u.default, {
                                toggled: function() {
                                    return e.getDisplayProps().lines
                                },
                                onChange: e.bindFn(e.onToggleLines)
                            })
                        }), r.createElement(v, {
                            predicate: function() {
                                return e.shouldShowLineStyles()
                            }
                        }, function() {
                            return r.createElement(y, {
                                each: e.bindFn(e.getValidLineStyles)
                            }, r.createElement("div", {
                                class: r.const("dcg-style-icons")
                            }, function(t) {
                                return r.createElement("div", {
                                    class: r.const("dcg-style-icon-container"),
                                    onTap: function() {
                                        return e.onLineStyleSelected(t)
                                    },
                                    role: r.const("button"),
                                    tabindex: r.const("0"),
                                    "aria-label": function() {
                                        return t
                                    },
                                    "aria-pressed": function() {
                                        return e.model.lineStyle !== t
                                    }
                                }, r.createElement(d.CircularIconView, {
                                    backgroundColor: function() {
                                        return e.model.color
                                    },
                                    semiTransparent: function() {
                                        return e.model.lineStyle !== t
                                    },
                                    iconType: function() {
                                        return "DOTTED" === t ? "graph-dotted" : "DASHED" === t ? "graph-dashed" : "graph-default"
                                    }
                                }))
                            }))
                        }), r.createElement(v, {
                            predicate: function() {
                                return e.shouldShowLineStyles() && e.controller.canUseAdvancedStyling() && (e.model.lineStyle === c.LineStyle.SOLID || e.model.lineStyle === c.LineStyle.SINGLE_PIXEL)
                            }
                        }, function() {
                            return r.createElement("div", null, r.createElement(p.Checkbox, {
                                checked: function() {
                                    return e.model.lineStyle === c.LineStyle.SINGLE_PIXEL
                                },
                                onChange: function(t) {
                                    e.onLineStyleSelected(t ? c.LineStyle.SINGLE_PIXEL : c.LineStyle.SOLID)
                                },
                                ariaLabel: function() {
                                    return e.controller.t("1px wide")
                                }
                            }, function() {
                                return e.controller.t("1px wide")
                            }))
                        })))
                    }), r.createElement(v, {
                        predicate: function() {
                            return e.sections().indexOf("dragModes") >= 0
                        }
                    }, function() {
                        return r.createElement("div", {
                            class: function() {
                                return {
                                    "dcg-styles-menu": !0,
                                    "dcg-dividing-line-after": e.hasNextSection("dragModes")
                                }
                            },
                            role: r.const("group"),
                            "aria-label": function() {
                                return e.controller.t("Drag Options")
                            }
                        }, r.createElement("div", {
                            class: r.const("dcg-drag-menu")
                        }, r.createElement("span", {
                            role: r.const("heading"),
                            "aria-level": r.const("2"),
                            class: r.const("dcg-toggle-title")
                        }, function() {
                            return e.controller.t("Drag")
                        }), r.createElement(u.default, {
                            toggled: function() {
                                return e.model.reconciledDragMode !== o.DragMode.NONE
                            },
                            onChange: e.bindFn(e.onToggleDrag)
                        }), r.createElement(v, {
                            predicate: function() {
                                return e.model.reconciledDragMode !== o.DragMode.NONE
                            }
                        }, function() {
                            return r.createElement(y, {
                                each: function() {
                                    return e.getUIDragModes()
                                }
                            }, r.createElement("div", {
                                class: r.const("dcg-style-icons")
                            }, function(t) {
                                return r.createElement("div", {
                                    class: function() {
                                        return {
                                            "dcg-style-icon-container": !0,
                                            "dcg-disabled": e.isDisabled(t)
                                        }
                                    },
                                    onTap: function() {
                                        return e.onDragModeSelected(t)
                                    },
                                    role: r.const("button"),
                                    tabindex: function() {
                                        return e.isDisabled(t) ? -1 : 0
                                    },
                                    "aria-label": function() {
                                        return t
                                    },
                                    "aria-pressed": function() {
                                        return e.model.reconciledDragMode !== t
                                    }
                                }, r.createElement(d.CircularIconView, {
                                    backgroundColor: function() {
                                        return e.isDisabled(t) ? "#bbb" : e.model.color
                                    },
                                    semiTransparent: function() {
                                        return e.model.reconciledDragMode !== t
                                    },
                                    iconType: function() {
                                        return "X" === t ? "movable-horizontal" : "Y" === t ? "movable-vertical" : "movable-both"
                                    }
                                }))
                            }))
                        })))
                    }), r.createElement(v, {
                        predicate: function() {
                            return e.sections().indexOf("isFillable") >= 0
                        }
                    }, function() {
                        return r.createElement("div", {
                            class: r.const("dcg-styles-div dcg-options-menu-section")
                        }, r.createElement("div", {
                            class: r.const("dcg-styles-menu")
                        }, r.createElement(p.Checkbox, {
                            checked: function() {
                                return e.getDisplayProps().fill
                            },
                            onChange: e.bindFn(e.onToggleFill),
                            ariaLabel: function() {
                                return e.controller.t("Fill")
                            }
                        }, function() {
                            return e.controller.t("Fill")
                        }), r.createElement(v, {
                            predicate: function() {
                                return e.getDisplayProps().fill && e.controller.canUseAdvancedStyling()
                            }
                        }, function() {
                            return r.createElement("div", {
                                class: r.const("dcg-variable-opacity")
                            }, r.const("Opacity:"), r.createElement(f.default, {
                                latex: function() {
                                    return e.model.fillOpacity
                                },
                                placeholder: function() {
                                    return "" + m.DEFAULT
                                },
                                isFocused: function() {
                                    return "opacity" === e.getFocusedInput()
                                },
                                capExpressionSize: function() {
                                    return !!e.controller.getGraphSettings().config.capExpressionSize
                                },
                                selectOnFocus: e.const(!0),
                                config: e.const({}),
                                getAriaLabel: function() {
                                    return e.controller.t("Fill Opacity: ")
                                },
                                getAriaPostLabel: e.const(""),
                                hasError: function() {
                                    return !l.isFillOpacityValid(e.model)
                                },
                                onUserChangedLatex: function(t) {
                                    return e.dispatchOpacityLatexIfChanged(t)
                                },
                                onFocusedChanged: function(t) {
                                    return e.handleFocusedChanged(t)
                                },
                                dataLabelAttributeValue: e.const("fill-opacity")
                            }))
                        })))
                    }), r.createElement(v, {
                        predicate: function() {
                            return e.sections().indexOf("isClickable") >= 0
                        }
                    }, function() {
                        return r.createElement("div", null, r.createElement(p.Checkbox, {
                            checked: function() {
                                return !!e.model.clickableInfo.enabled
                            },
                            onChange: function(t) {
                                e.controller.dispatch({
                                    type: "set-clickableinfo-prop",
                                    id: e.model.id,
                                    prop: "enabled",
                                    value: t
                                })
                            },
                            ariaLabel: function() {
                                return e.controller.t("Clickable")
                            }
                        }, function() {
                            return e.controller.t("Clickable")
                        }))
                    })), r.createElement("div", {
                        class: r.const("dcg-options-menu-column-right")
                    }, r.createElement("div", {
                        class: r.const("dcg-colors-div dcg-options-menu-section"),
                        role: r.const("group"),
                        "aria-label": function() {
                            return e.controller.t("Color Options")
                        }
                    }, r.createElement("div", {
                        role: r.const("heading"),
                        "aria-level": r.const("2"),
                        class: r.const("dcg-title")
                    }, function() {
                        return e.controller.t("Color")
                    }), r.createElement(a.default, {
                        controller: function() {
                            return e.props.controller()
                        },
                        selectedColor: function() {
                            return e.model.color
                        },
                        onColorSelected: this.bindFn(this.onColorSelected)
                    }))))
                }, t.prototype.getFocusedInput = function() {
                    var e = this.controller.getFocusLocation();
                    if (e && "expression-menu" === e.type && e.id === this.id) return e.location
                }, t.prototype.handleFocusedChanged = function(e) {
                    e ? this.controller.dispatch({
                        type: "set-focus-location",
                        location: {
                            type: "expression-menu",
                            id: this.id,
                            location: "opacity"
                        }
                    }) : this.controller.dispatch({
                        type: "blur-focus-location",
                        location: {
                            type: "expression-menu",
                            id: this.id,
                            location: "opacity"
                        }
                    })
                }, t.prototype.dispatchOpacityLatexIfChanged = function(e) {
                    this.model.fillOpacity !== e && this.controller.dispatch({
                        type: "set-item-fillopacity",
                        id: this.id,
                        fillOpacity: e
                    })
                }, t.prototype.hasNextSection = function(e) {
                    var t = this.sections();
                    return t.indexOf(e) < t.length - 1
                }, t.prototype.sections = function() {
                    if (l.isToplevelDistribution(this.model)) return [];
                    var e = [];
                    return this.getValidPointStyles().length > 0 && e.push("pointStyles"), this.shouldShowDotplotPointSizes() && e.push("pointSizes"), this.getValidLineStyles().length > 0 && !l.isSinglePoint(this.model) && e.push("lineStyles"), this.getUIDragModes().length > 0 && e.push("dragModes"), (l.isPolygon(this.model) || l.isParametric(this.model)) && e.push("isFillable"), this.shouldShowClickable() && e.push("isClickable"), e
                }, t.prototype.getValidPointStyles = function() {
                    return l.isPointOrPointList(this.model) || l.isDotPlot(this.model) ? [c.PointStyle.POINT, c.PointStyle.OPEN, c.PointStyle.CROSS] : []
                }, t.prototype.getValidPointSizes = function() {
                    return l.isDotPlot(this.model) ? ["small", "medium", "large"] : []
                }, t.prototype.shouldShowDotplotPointSizes = function() {
                    return this.getValidPointSizes().length > 0
                }, t.prototype.shouldShowClickable = function() {
                    return !!this.controller.canAuthorClickableObjects() && l.isClickableAllowed(this.model)
                }, t.prototype.getUIDragModes = function() {
                    return this.model.formula.move_strategy ? [o.DragMode.X, o.DragMode.Y, o.DragMode.XY] : []
                }, t.prototype.getValidLineStyles = function() {
                    return l.isVisualization(this.model) ? [] : this.model.formula.is_inequality || l.isSinglePoint(this.model) ? [] : [c.LineStyle.SOLID, c.LineStyle.DASHED, c.LineStyle.DOTTED]
                }, t.prototype.shouldPreventPointsToggle = function() {
                    return l.isSinglePoint(this.model) || l.isDotPlot(this.model)
                }, t.prototype.onToggleFill = function() {
                    this.controller.dispatch({
                        type: "set-item-fill",
                        id: this.id,
                        fill: !this.getDisplayProps().fill
                    })
                }, t.prototype.onColorSelected = function(e) {
                    this.controller.dispatch({
                        type: "set-item-color",
                        id: this.id,
                        color: e
                    })
                }, t.prototype.shouldShowLinesToggle = function() {
                    return l.isPointOrPointList(this.model) || l.isParametric(this.model) || l.isPolygon(this.model)
                }, t.prototype.shouldShowLineStyles = function() {
                    return this.getDisplayProps().lines || !this.shouldShowLinesToggle()
                }, t.prototype.onTogglePoints = function() {
                    this.controller.dispatch({
                        type: "set-item-points",
                        id: this.id,
                        points: !this.getDisplayProps().points
                    })
                }, t.prototype.onPointStyleSelected = function(e) {
                    this.model.pointStyle !== e && this.controller.dispatch({
                        type: "set-item-pointstyle",
                        id: this.id,
                        pointStyle: e
                    })
                }, t.prototype.onDotplotPointSizeSelected = function(e) {
                    this.model.vizProps.dotplotSize !== e && this.controller.dispatch({
                        type: "set-visualization-prop",
                        id: this.id,
                        prop: "dotplotSize",
                        latex: e
                    })
                }, t.prototype.onToggleLines = function() {
                    this.controller.dispatch({
                        type: "set-item-lines",
                        id: this.id,
                        lines: !this.getDisplayProps().lines
                    })
                }, t.prototype.onLineStyleSelected = function(e) {
                    this.model.lineStyle !== e && this.controller.dispatch({
                        type: "set-item-linestyle",
                        id: this.id,
                        lineStyle: e
                    })
                }, t.prototype.isDisabled = function(e) {
                    var t = this.controller.getEnabledDragModesForItem(this.id);
                    return !i.contains(t, e)
                }, t.prototype.getDragMode = function() {
                    return this.model.reconciledDragMode || this.model.dragMode
                }, t.prototype.getDisplayProps = function() {
                    var e = this.model,
                        t = e.points,
                        n = e.lines,
                        r = e.fill;
                    return s.getReconciledExpressionProps(this.model.formula.expression_type, {
                        points: t,
                        lines: n,
                        fill: r
                    })
                }, t.prototype.onToggleDrag = function() {
                    var e = this.model.reconciledDragMode !== o.DragMode.NONE ? o.DragMode.NONE : o.DragMode.XY;
                    this.controller.dispatch({
                        type: "set-item-dragmode",
                        id: this.id,
                        dragMode: e
                    })
                }, t.prototype.onDragModeSelected = function(e) {
                    this.isDisabled(e) || this.controller.dispatch({
                        type: "set-item-dragmode",
                        id: this.id,
                        dragMode: e
                    })
                }, t
            }(r.Class);
        t.ExpressionOptionsMenuView = b
    }), define("expressions/image_options_view", ["require", "exports", "tslib", "dcgview", "dcgview-helpers/checkbox", "./circular-icon-view"], function(e, t, n, r, i, o) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var a = r.Components,
            s = a.For,
            l = a.If,
            c = function(e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return n.__extends(t, e), t.prototype.template = function() {
                    var e = this;
                    return this.controller = this.props.controller(), this.model = this.props.model(), this.id = this.model.id, r.createElement("div", {
                        class: r.const("dcg-exp-options-menu dcg-image-options-menu dcg-options-menu")
                    }, r.createElement("div", {
                        class: r.const("dcg-triangle")
                    }), r.createElement("div", {
                        class: r.const("dcg-opacities-menu dcg-dividing-line-after")
                    }, r.createElement("div", {
                        class: r.const("dcg-title")
                    }, function() {
                        return e.controller.t("Opacity")
                    }), r.createElement(s, {
                        each: function() {
                            return e.controller.getImageOpacities()
                        }
                    }, r.createElement("div", {
                        class: r.const("dcg-opacities-menu")
                    }, function(t) {
                        return r.createElement("span", {
                            class: r.const("dcg-opacity-option"),
                            role: r.const("button"),
                            tabindex: r.const(0),
                            "aria-label": function() {
                                return "opacity: " + t
                            },
                            handleevent: r.const("true"),
                            onTap: function() {
                                return e.onSelectOpacity(t)
                            }
                        }, r.createElement(o.CircularIconView, {
                            backgroundImage: e.const("url(" + encodeURI(e.model.image_url) + ")"),
                            iconType: function() {
                                return e.model.opacity === t ? "check" : "none"
                            },
                            backgroundOpacity: function() {
                                return parseFloat(t)
                            }
                        }))
                    }))), r.createElement("div", {
                        class: r.const("dcg-styles-div dcg-options-menu-section")
                    }, r.createElement("div", {
                        class: r.const("dcg-styles-menu")
                    }, r.createElement(i.Checkbox, {
                        checked: function() {
                            return !e.model.foreground
                        },
                        onChange: this.bindFn(this.onToggleForeground),
                        ariaLabel: function() {
                            return e.controller.t("Place behind graphs")
                        }
                    }, function() {
                        return e.controller.t("Place behind graphs")
                    })), r.createElement(l, {
                        predicate: this.bindFn(this.shouldShowClickable)
                    }, function() {
                        return r.createElement("div", null, r.createElement(i.Checkbox, {
                            checked: function() {
                                return !!e.model.clickableInfo.enabled
                            },
                            onChange: function(t) {
                                e.controller.dispatch({
                                    type: "set-clickableinfo-prop",
                                    id: e.model.id,
                                    prop: "enabled",
                                    value: t
                                })
                            },
                            ariaLabel: function() {
                                return e.controller.t("Clickable")
                            }
                        }, function() {
                            return e.controller.t("Clickable")
                        }))
                    })))
                }, t.prototype.onToggleForeground = function(e) {
                    this.controller.dispatch({
                        type: "set-image-in-foreground",
                        id: this.id,
                        foreground: !e
                    })
                }, t.prototype.onSelectOpacity = function(e) {
                    this.controller.dispatch({
                        type: "set-image-opacity",
                        id: this.id,
                        opacity: e
                    })
                }, t.prototype.shouldShowClickable = function() {
                    return !!this.controller.canAuthorClickableObjects()
                }, t
            }(r.Class);
        t.ImageOptionsView = c
    }), define("expressions/tables/table_column_menu_view", ["require", "exports", "tslib", "dcgview", "expressions/color-menu", "graphing/dragmode", "expressions/styles", "expressions/toggle-view", "../circular-icon-view"], function(e, t, n, r, i, o, a, s, l) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var c = r.Components,
            u = c.For,
            p = c.If,
            d = function(e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return n.__extends(t, e), t.prototype.template = function() {
                    var e = this;
                    return this.controller = this.props.controller(), this.model = this.props.model(), this.columnId = this.model.id, this.tableModel = this.model.table, this.tableId = this.tableModel.id, r.createElement("div", {
                        class: r.const("dcg-table-column-menu dcg-options-menu")
                    }, r.createElement("div", {
                        class: r.const("dcg-triangle")
                    }), r.createElement("div", {
                        class: r.const("dcg-options-menu-column-left")
                    }, r.createElement("div", {
                        class: r.const("dcg-options-menu-section")
                    }, r.createElement("span", {
                        class: r.const("dcg-toggle-title")
                    }, function() {
                        return e.controller.t("Points")
                    }), r.createElement(s.default, {
                        toggled: function() {
                            return e.model.points
                        },
                        onChange: function() {
                            return e.onTogglePoints(!e.model.points)
                        }
                    }), r.createElement(p, {
                        predicate: function() {
                            return e.model.points
                        }
                    }, function() {
                        return r.createElement(u, {
                            each: function() {
                                return e.controller.getPointStyles()
                            }
                        }, r.createElement("div", {
                            class: r.const("dcg-style-icons")
                        }, function(t) {
                            return r.createElement("div", {
                                class: r.const("dcg-style-icon-container"),
                                onTap: function() {
                                    return e.onPointStyleSelected(t)
                                }
                            }, r.createElement(l.CircularIconView, {
                                backgroundColor: function() {
                                    return e.model.color
                                },
                                semiTransparent: function() {
                                    return e.model.pointStyle !== t
                                },
                                iconType: function() {
                                    return "CROSS" === t ? "point-cross" : "OPEN" === t ? "point-open" : "point-default"
                                }
                            }))
                        }))
                    })), r.createElement("div", {
                        class: r.const("dcg-options-menu-section")
                    }, r.createElement("span", {
                        class: r.const("dcg-toggle-title")
                    }, function() {
                        return e.controller.t("Lines")
                    }), r.createElement(s.default, {
                        toggled: function() {
                            return e.model.lines
                        },
                        onChange: function() {
                            return e.onToggleLines(!e.model.lines)
                        }
                    }), r.createElement(p, {
                        predicate: function() {
                            return e.model.lines
                        }
                    }, function() {
                        return r.createElement("div", {
                            class: r.const("dcg-line-options")
                        }, r.createElement(u, {
                            each: function() {
                                return e.controller.getLineStyles()
                            }
                        }, r.createElement("div", {
                            class: r.const("dcg-style-icons")
                        }, function(t) {
                            return r.createElement("div", {
                                class: r.const("dcg-style-icon-container"),
                                onTap: function() {
                                    return e.onLineStyleSelected(t)
                                }
                            }, r.createElement(l.CircularIconView, {
                                backgroundColor: function() {
                                    return e.model.color
                                },
                                semiTransparent: function() {
                                    return e.model.lineStyle !== t
                                },
                                iconType: function() {
                                    return "DOTTED" === t ? "graph-dotted" : "DASHED" === t ? "graph-dashed" : "graph-default"
                                }
                            }))
                        })))
                    })), r.createElement(p, {
                        predicate: function() {
                            return e.model.draggable
                        }
                    }, function() {
                        return r.createElement("div", {
                            class: r.const("dcg-drag-div dcg-options-menu-section")
                        }, r.createElement("span", {
                            class: r.const("dcg-toggle-title")
                        }, function() {
                            return e.controller.t("Drag")
                        }), r.createElement(s.default, {
                            toggled: function() {
                                return e.model.dragMode !== o.DragMode.NONE
                            },
                            onChange: function() {
                                return e.onToggleDrag()
                            }
                        }), r.createElement(p, {
                            predicate: function() {
                                return e.model.dragMode !== o.DragMode.NONE
                            }
                        }, function() {
                            return r.createElement(u, {
                                each: function() {
                                    return e.controller.getUIDragModes()
                                }
                            }, r.createElement("div", {
                                class: r.const("dcg-style-icons")
                            }, function(t) {
                                return r.createElement("div", {
                                    class: r.const("dcg-style-icon-container"),
                                    onTap: function() {
                                        return e.onDragModeSelected(t)
                                    }
                                }, r.createElement(l.CircularIconView, {
                                    backgroundColor: function() {
                                        return e.model.color
                                    },
                                    semiTransparent: function() {
                                        return e.model.dragMode !== t
                                    },
                                    iconType: function() {
                                        return "X" === t ? "movable-horizontal" : "Y" === t ? "movable-vertical" : "movable-both"
                                    }
                                }))
                            }))
                        }))
                    })), r.createElement("div", {
                        class: r.const("dcg-options-menu-column-right")
                    }, r.createElement("div", {
                        class: r.const("dcg-colors-div dcg-options-menu-section")
                    }, r.createElement("div", {
                        class: r.const("dcg-toggle-title")
                    }, function() {
                        return e.controller.t("Color")
                    }), r.createElement(i.default, {
                        controller: function() {
                            return e.props.controller()
                        },
                        selectedColor: function() {
                            return e.model.color
                        },
                        onColorSelected: this.bindFn(this.onColorSelected)
                    }))))
                }, t.prototype.getPointStyleClass = function(e) {
                    switch (e) {
                        case a.PointStyle.CROSS:
                            return "dcg-graph-CROSS";
                        case a.PointStyle.OPEN:
                            return "dcg-graph-OPEN";
                        default:
                            return "dcg-graph-POINT"
                    }
                }, t.prototype.getLineStyleClass = function(e) {
                    switch (e) {
                        case a.LineStyle.DASHED:
                            return "dcg-graph-DASHED";
                        case a.LineStyle.DOTTED:
                            return "dcg-graph-DOTTED";
                        default:
                            return "dcg-graph-SOLID"
                    }
                }, t.prototype.onColorSelected = function(e) {
                    this.controller.dispatch({
                        type: "set-tablecolumn-color",
                        tableId: this.tableId,
                        columnId: this.columnId,
                        color: e
                    })
                }, t.prototype.onTogglePoints = function(e) {
                    this.controller.dispatch({
                        type: "set-tablecolumn-points",
                        tableId: this.tableId,
                        columnId: this.columnId,
                        bool: e
                    })
                }, t.prototype.onPointStyleSelected = function(e) {
                    this.controller.dispatch({
                        type: "set-tablecolumn-pointstyle",
                        tableId: this.tableId,
                        columnId: this.columnId,
                        pointStyle: e
                    })
                }, t.prototype.onToggleLines = function(e) {
                    this.controller.dispatch({
                        type: "set-tablecolumn-lines",
                        tableId: this.tableId,
                        columnId: this.columnId,
                        bool: e
                    })
                }, t.prototype.onLineStyleSelected = function(e) {
                    this.controller.dispatch({
                        type: "set-tablecolumn-linestyle",
                        tableId: this.tableId,
                        columnId: this.columnId,
                        lineStyle: e
                    })
                }, t.prototype.onToggleDrag = function() {
                    var e = this.columnId,
                        t = this.tableId,
                        n = this.model.dragMode === o.DragMode.NONE ? o.DragMode.XY : o.DragMode.NONE;
                    this.controller.dispatch({
                        type: "set-tablecolumn-dragmode",
                        tableId: t,
                        columnId: e,
                        dragMode: n
                    })
                }, t.prototype.onDragModeSelected = function(e) {
                    var t = this.columnId,
                        n = this.tableId;
                    this.model.dragMode !== e && this.controller.dispatch({
                        type: "set-tablecolumn-dragmode",
                        tableId: n,
                        columnId: t,
                        dragMode: e
                    })
                }, t
            }(r.Class);
        t.TableColumnMenuView = d
    }), define("loadcss!expressions/item-settings-view", function() {}), define("expressions/item-settings-view", ["require", "exports", "tslib", "dcgview", "keys", "underscore", "jquery", "./expression_options_view", "./image_options_view", "./tables/table_column_menu_view", "lib/animation-frame", "loadcss!./item-settings-view"], function(e, t, n, r, i, o, a, s, l, c, u) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var p = r.Components.Switch,
            d = function(e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return n.__extends(t, e), t.prototype.init = function() {
                    this.controller = this.props.controller()
                }, t.prototype.template = function() {
                    var e = this;
                    return r.createElement(p, {
                        key: this.bindFn(this.getActiveGuid)
                    }, function() {
                        var t = e.controller.getOpenItemMenu();
                        return t ? "expression" === t.type ? r.createElement("div", {
                            class: r.const("dcg-options-menu-container"),
                            didMount: e.bindFn(e.didMountView),
                            didUnmount: e.didUnmountView
                        }, r.createElement(s.ExpressionOptionsMenuView, {
                            controller: e.props.controller,
                            model: function() {
                                return t.model
                            }
                        })) : "image" === t.type ? r.createElement("div", {
                            class: r.const("dcg-options-menu-container"),
                            didMount: e.bindFn(e.didMountView),
                            didUnmount: e.didUnmountView
                        }, r.createElement(l.ImageOptionsView, {
                            controller: e.props.controller,
                            model: function() {
                                return t.model
                            }
                        })) : "table-column" === t.type ? r.createElement("div", {
                            class: r.const("dcg-options-menu-container"),
                            didMount: e.bindFn(e.didMountView),
                            didUnmount: e.didUnmountView
                        }, r.createElement(c.TableColumnMenuView, {
                            controller: e.props.controller,
                            model: function() {
                                return t.model
                            }
                        })) : t : r.createElement("span", null)
                    })
                }, t.prototype.getActiveGuid = function() {
                    var e = this.controller.getOpenItemMenu();
                    if (e) return e.model.guid
                }, t.prototype.getActiveIcon = function() {
                    var e = this.controller.getOpenItemMenu();
                    if (e) return a(e.icon)
                }, t.prototype.didMountView = function(e) {
                    var t = this,
                        n = this.controller.getOpenItemMenu();
                    this.guid = o.uniqueId("dcg-item-settings-view"), this.openView = e, this.positionMenu(), a(document).on("keydown." + this.guid, function(e) {
                        var n = t.getActiveIcon(),
                            r = i.lookup(e);
                        if ("Esc" === r) t.hideOptions(), void 0 !== n && t.controller.runAfterDispatch(function() {
                            n.focus()
                        });
                        else if ("Tab" === r && !e.altKey && !e.ctrlKey && !e.metaKey && void 0 !== n && void 0 !== t.openView) {
                            var o = a(t.openView),
                                s = o.find('[tabindex="0"]:visible:first'),
                                l = o.find('[tabindex="0"]:visible:last');
                            e.shiftKey ? e.shiftKey && (n.is(":focus") ? (e.preventDefault(), e.stopPropagation(), l.focus()) : s.is(":focus") && (e.preventDefault(), e.stopPropagation(), n.focus())) : n.is(":focus") ? (e.preventDefault(), e.stopPropagation(), s.focus()) : l.is(":focus") && (e.preventDefault(), e.stopPropagation(), n.focus())
                        }
                    }), u.requestAnimationFrame(function() {
                        if (t.openView) {
                            t.controller.getExppanelSelectorOrThrow().on("scroll." + t.guid, function() {
                                t.hideOptions()
                            })
                        }
                    }), a(document).on("dcg-tapstart." + this.guid, function(e) {
                        t.openView && (a(e.target).closest(t.getActiveIcon()).length || a(e.target).closest(t.openView).length || a(e.target).closest(".dcg-keypad,.dcg-show-keypad-container").length || t.hideOptions())
                    }), n && n.focusFirstOption && a(this.openView).find('[tabindex="0"]:visible:first').focus()
                }, t.prototype.didUnmountView = function() {
                    a(document).off("." + this.guid), this.openView = void 0
                }, t.prototype.open = function() {
                    return !!this.controller.getOpenItemMenu()
                }, t.prototype.hideOptions = function() {
                    this.open() && this.controller.dispatch({
                        type: "close-item-settings-menu"
                    })
                }, t.prototype.positionMenu = function() {
                    var e = this.getActiveIcon();
                    if (e && this.openView) {
                        var t = this.controller.getExppanelSelectorOrThrow(),
                            n = e.offset(),
                            r = {
                                top: n.top - t.closest(".dcg-container").offset().top,
                                left: n.left - t.closest(".dcg-container").offset().left
                            };
                        a(this.openView).css({
                            top: r.top + "px",
                            left: r.left + "px",
                            display: "block"
                        })
                    }
                }, t
            }(r.Class);
        t.ItemSettingsView = d
    }), define("loadcss!expressions/list-view", function() {}), define("loadcss!expressions", function() {}), define("expressions/list-view", ["require", "exports", "tslib", "touchtracking", "keys", "dcgview", "jquery", "underscore", "lib/conditional_blur", "./expression_view", "./text_view", "./table-view", "./folder-view", "./image-view", "./shell_view", "./drag_container_view", "main/data_helpers", "./new_expression_view", "./expressions-header", "main/load-graph-from-link", "lib/get-clipboard-data", "graphing-calc/models/abstract-item", "./exp-list-resizer", "./item-settings-view", "loadcss!./list-view", "loadcss!expressions", "jquery.handleevent"], function(e, t, n, r, i, o, a, s, l, c, u, p, d, h, f, m, g, y, v, b, x, w, _, S) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var E = o.Components,
            M = E.If,
            I = E.For,
            T = E.Switch,
            C = E.SwitchUnion,
            k = function(e) {
                function t() {
                    var t = null !== e && e.apply(this, arguments) || this;
                    return t.guid = s.uniqueId("listView"), t
                }
                return n.__extends(t, e), t.prototype.init = function() {
                    this.controller = this.props.controller()
                }, t.prototype.template = function() {
                    var e = this;
                    return o.createElement("div", {
                        didMount: this.bindFn(this.didMountContainer)
                    }, o.createElement("div", {
                        class: o.const("dcg-exppanel-outer"),
                        onDrop: this.bindFn(this.onDrop),
                        style: function() {
                            return e.computeExppanelOuterStyle()
                        }
                    }, o.createElement("div", {
                        class: function() {
                            return {
                                "dcg-exppanel-container": !0,
                                "dcg-add-shadow": e.controller.shouldRenderList()
                            }
                        },
                        style: function() {
                            return {
                                transform: e.controller.isListVisible() ? void 0 : e.controller.isNarrow() ? "translate(0, 100%)" : "translate(-100%, 0)"
                            }
                        }
                    }, o.createElement(M, {
                        predicate: function() {
                            return e.controller.isFileDraggedOver()
                        }
                    }, function() {
                        return o.createElement("div", {
                            class: o.const("dcg-drop-image")
                        }, o.createElement("span", null, function() {
                            return e.controller.t("Drop Image Here")
                        }))
                    }), o.createElement(M, {
                        predicate: function() {
                            return e.controller.shouldRenderList()
                        }
                    }, function() {
                        return o.createElement("div", {
                            class: function() {
                                return {
                                    "dcg-exppanel": !0,
                                    "dcg-disable-horizontal-scroll-to-cursor": !0,
                                    "dcg-isDragging": e.controller.isDragDropActive(),
                                    "dcg-has-background-color": e.controller.hasBackgroundColor()
                                }
                            },
                            style: function() {
                                return {
                                    background: e.controller.getBackgroundColor()
                                }
                            },
                            onPaste: e.bindFn(e.onPaste),
                            onTapStart: e.bindFn(e.onExppanelTapstart),
                            didMount: e.bindFn(e.didMountExppanel)
                        }, o.createElement(_.ExpListResizer, {
                            controller: e.props.controller
                        }), o.createElement("div", {
                            class: o.const("dcg-expressionlist"),
                            role: o.const("listbox"),
                            "aria-label": o.const("Expression List")
                        }, o.createElement(I, {
                            each: function() {
                                return e.controller.getAllItemModels()
                            },
                            key: function(e) {
                                return e.guid
                            }
                        }, o.createElement("span", {
                            role: o.const("option"),
                            class: o.const("dcg-template-expressioneach")
                        }, function(t) {
                            return C(function() {
                                return w.getDisplayState(t)
                            }, {
                                shell: function() {
                                    return e.makeShellViewForModel(t)
                                },
                                render: function() {
                                    return e.makeViewForModel(t)
                                },
                                none: function() {}
                            })
                        })), o.createElement(y.default, {
                            controller: function() {
                                return e.props.controller()
                            }
                        }), o.createElement(T, {
                            key: function() {
                                return e.controller.getDraggedItemId()
                            }
                        }, function(t) {
                            if (t) {
                                var n = e.controller.getItemModel(t);
                                return o.createElement(m.default, {
                                    controller: e.props.controller
                                }, e.makeDragCopyViewForModel(n))
                            }
                        }), o.createElement("div", {
                            class: o.const("dcg-expressions-branding"),
                            style: function() {
                                return {
                                    opacity: e.controller.isKeypadOpen() ? 0 : 1
                                }
                            }
                        }, o.createElement(M, {
                            predicate: function() {
                                return e.controller.canEditOnWeb()
                            }
                        }, function() {
                            return o.createElement("span", {
                                role: o.const("link"),
                                tabindex: o.const(0),
                                class: o.const("dcg-edit-branding"),
                                onTap: function() {
                                    return e.controller.dispatch({
                                        type: "open-on-web"
                                    })
                                }
                            }, o.createElement("div", {
                                class: o.const("dcg-powered-by"),
                                "aria-label": function() {
                                    return e.controller.t("Edit graph on Desmos")
                                }
                            }, function() {
                                return e.controller.t("edit graph on")
                            }), o.createElement("i", {
                                class: o.const("dcg-icon-desmos")
                            }))
                        }), o.createElement(M, {
                            predicate: function() {
                                return !e.controller.canEditOnWeb()
                            }
                        }, function() {
                            return o.createElement("span", {
                                class: o.const("dcg-noedit-branding")
                            }, o.createElement("div", {
                                class: o.const("dcg-powered-by"),
                                "aria-label": function() {
                                    return e.controller.t("powered by Desmos")
                                }
                            }, function() {
                                return e.controller.t("powered by")
                            }), o.createElement("i", {
                                class: o.const("dcg-icon-desmos")
                            }))
                        }))))
                    }), o.createElement(M, {
                        predicate: function() {
                            return e.controller.shouldRenderList()
                        }
                    }, function() {
                        return o.createElement(v.default, {
                            controller: e.props.controller,
                            expsScrolled: function() {
                                return !!e.exppanel && e.exppanel.scrollTop > 0
                            }
                        })
                    }))), o.createElement(S.ItemSettingsView, {
                        controller: this.props.controller
                    }))
                }, t.prototype.makeShellViewForModel = function(e) {
                    return o.createElement(f.default, {
                        controller: this.props.controller,
                        model: function() {
                            return e
                        },
                        onDragPending: function() {},
                        isDragCopy: function() {
                            return !1
                        }
                    })
                }, t.prototype.computeExppanelOuterStyle = function() {
                    this.getListBottomAndUpdateLastExpressionPadding();
                    var e = this.controller.computeMajorLayout().list,
                        t = e.top;
                    return e.top > 0 && !this.controller.isListVisible() && (t -= e.height), {
                        position: "absolute",
                        left: "0px",
                        top: t + "px",
                        width: e.width + "px",
                        height: e.height + "px"
                    }
                }, t.prototype.makeDragCopyViewForModel = function(e) {
                    return this.makeViewForModel(e, !0)
                }, t.prototype.makeViewForModel = function(e, t) {
                    var n = this;
                    void 0 === t && (t = !1);
                    var r;
                    if ("table" === e.type) r = o.createElement(p.default, {
                        controller: this.props.controller,
                        model: function() {
                            return e
                        },
                        onDragPending: function(t) {
                            return n.onDragPending(t, e.id)
                        },
                        isDragCopy: function() {
                            return t
                        }
                    });
                    else if ("folder" === e.type) r = o.createElement(d.default, {
                        controller: this.props.controller,
                        model: function() {
                            return e
                        },
                        onDragPending: function(t) {
                            return n.onDragPending(t, e.id)
                        },
                        isDragCopy: function() {
                            return t
                        }
                    });
                    else if ("text" === e.type) r = o.createElement(u.default, {
                        controller: this.props.controller,
                        model: function() {
                            return e
                        },
                        onDragPending: function(t) {
                            return n.onDragPending(t, e.id)
                        },
                        isDragCopy: function() {
                            return t
                        }
                    });
                    else if ("image" === e.type) r = o.createElement(h.default, {
                        controller: this.props.controller,
                        model: function() {
                            return e
                        },
                        onDragPending: function(t) {
                            return n.onDragPending(t, e.id)
                        },
                        isDragCopy: function() {
                            return t
                        }
                    });
                    else {
                        if ("expression" !== e.type) return;
                        r = o.createElement(c.default, {
                            controller: this.props.controller,
                            model: function() {
                                return e
                            },
                            onDragPending: function(t) {
                                return n.onDragPending(t, e.id)
                            },
                            isDragCopy: function() {
                                return t
                            }
                        })
                    }
                    return r
                }, t.prototype.didUnmount = function() {
                    a(document.documentElement).off("." + this.guid)
                }, t.prototype.didMountContainer = function(e) {
                    this.node = e, a(document.documentElement).on("keydown." + this.guid, this.bindFn(this.handleKeyDown))
                }, t.prototype.didMountExppanel = function(e) {
                    this.exppanel = e
                }, t.prototype.getListBottomAndUpdateLastExpressionPadding = function() {
                    var e = this.controller.getKeypadHeight(),
                        t = this.__listBottom || 0;
                    return this.__listBottom = e, 0 === e && 0 !== t && r.isTapActive() && this.padLastExpressionUntilTapEnd(t), e
                }, t.prototype.padLastExpression = function(e) {
                    a(this.node).find(".dcg-expressionitem.dcg-new-expression").css("margin-bottom", e + "px")
                }, t.prototype.unpadLastExpression = function() {
                    a(this.node).find(".dcg-expressionitem.dcg-new-expression").css("margin-bottom", "0")
                }, t.prototype.padLastExpressionUntilTapEnd = function(e) {
                    var t = this;
                    this.padLastExpression(e), a(document).on("dcg-tap.animating-bottom", function() {
                        t.unpadLastExpression(), a(document).off("dcg-tap.animating-bottom")
                    })
                }, t.prototype.handleKeyDown = function(e) {
                    if (!this.controller.inAudioTraceMode()) {
                        var t = i.lookup(e);
                        if (a(e.target).closest(this.node).length && this.controller.isInEditListMode() && 0 === this.controller.find$(".dcg-options-menu").length) {
                            if (!e.altKey && !e.ctrlKey && !e.metaKey) {
                                if (t === i.TAB) {
                                    var n = a(this.node).find(':input, [role="textbox"], .dcg-edit-list-mathquill, [tabindex="0"]').first(),
                                        r = a(this.node).find('[tabindex="0"]:last');
                                    e.shiftKey && n.is(":focus") ? (e.preventDefault(), e.stopPropagation(), r.focus()) : !e.shiftKey && r.is(":focus") && (e.preventDefault(), e.stopPropagation(), n.focus())
                                } else if (t === i.UP || t === i.DOWN) {
                                    var o, s = this.controller.getFocusLocation(),
                                        l = a(e.target).closest(".dcg-expressionitem");
                                    o = t === i.UP ? !s || "domain-limit" !== s.type && "slider-limit" !== s.type ? l.prev() : l : l.next(), o.length && (e.preventDefault(), e.stopPropagation(), this.controller.dispatch({
                                        type: "blur-focus-location",
                                        location: s
                                    }), this.controller.runAfterDispatch(function() {
                                        var e = o.find(":input[readonly]");
                                        e.length ? e.first().focus() : o.find(':input, [role="textbox"], .dcg-edit-list-mathquill, [tabindex="0"]').first().focus()
                                    }))
                                }
                            }
                        } else if ((!document.activeElement || !a.contains(document.body, document.activeElement)) && !a(e.target).closest(this.exppanel).length && a.contains(document.documentElement, e.target)) {
                            var c = this.controller.getSelectedItem();
                            if (c) switch (t) {
                                case i.UP:
                                    e.preventDefault(), this.controller.dispatch({
                                        type: "select-previous-expression"
                                    });
                                    break;
                                case i.DOWN:
                                    e.preventDefault(), this.controller.dispatch({
                                        type: "select-next-expression"
                                    });
                                    break;
                                case i.ESCAPE:
                                    e.preventDefault(), this.controller.dispatch({
                                        type: "set-none-selected"
                                    });
                                    break;
                                case i.RIGHT:
                                    e.preventDefault(), c && ("expression" === c.type && c.sliderExists ? (this.controller.dispatch({
                                        type: "adjust-slider-by-keyboard",
                                        id: c.id,
                                        adjustment: "up"
                                    }), this.controller.dispatch({
                                        type: "set-focus-location",
                                        location: {
                                            type: "slider-thumb",
                                            id: c.id
                                        }
                                    })) : this.controller.dispatch({
                                        type: "move-focus-to-item",
                                        id: c.id,
                                        where: "start"
                                    }));
                                    break;
                                case i.TAB:
                                    e.preventDefault(), c && this.controller.dispatch({
                                        type: "move-focus-to-item",
                                        id: c.id,
                                        where: "start"
                                    });
                                    break;
                                case i.LEFT:
                                    e.preventDefault(), c && ("expression" === c.type && c.sliderExists ? (this.controller.dispatch({
                                        type: "adjust-slider-by-keyboard",
                                        id: c.id,
                                        adjustment: "down"
                                    }), this.controller.dispatch({
                                        type: "set-focus-location",
                                        location: {
                                            type: "slider-thumb",
                                            id: c.id
                                        }
                                    })) : this.controller.dispatch({
                                        type: "move-focus-to-item",
                                        id: c.id,
                                        where: "end"
                                    }));
                                    break;
                                case i.BACKSPACE:
                                    e.preventDefault(), c && this.controller.dispatch({
                                        type: "upward-delete-selected-expression"
                                    });
                                    break;
                                case i.DELETE:
                                    e.preventDefault(), c && this.controller.dispatch({
                                        type: "downward-delete-selected-expression"
                                    });
                                    break;
                                case i.ENTER:
                                    e.wasHandled("create-expression-with-keyboard") || (e.preventDefault(), e.handle("create-expression-with-keyboard"), c && this.controller.dispatch({
                                        type: "on-special-key-pressed",
                                        key: "Enter"
                                    }));
                                    break;
                                default:
                                    if (e.metaKey || e.ctrlKey || t === i.SHIFT || t === i.SPACEBAR) return;
                                    c && ("table" === c.type || this.controller.dispatch({
                                        type: "move-focus-to-item",
                                        id: c.id,
                                        where: "end"
                                    }))
                            }
                        }
                    }
                }, t.prototype.onDragPending = function(e, t) {
                    var n = this;
                    e.preventDefault(), l.default();
                    var r = e.touches[0].clientY,
                        i = r,
                        o = setTimeout(function() {
                            a(document).off(".dragpending"), n.onDragStart(e, t, r, i)
                        }, 500);
                    a(document).on("dcg-tapmove.dragpending", function(s) {
                        i = s.touches[0].clientY, Math.abs(i - r) > 3 && (clearTimeout(o), a(document).off(".dragpending"), n.onDragStart(e, t, r, i))
                    }), a(document).on("dcg-tapend.dragpending", function() {
                        clearTimeout(o), a(document).off(".dragpending")
                    })
                }, t.prototype.onDragStart = function(e, t, n, r) {
                    1 === e.touches.length && (e.wasHandled("dcg-longhold") || this.controller.dispatch({
                        type: "start-dragdrop",
                        id: t,
                        grabY: n,
                        mouseY: r
                    }))
                }, t.prototype.onExppanelTapstart = function(e) {
                    "mouse" !== e.device && 0 === a(e.target).closest(".dcg-expressionitem").length && l.default()
                }, t.prototype.onPaste = function(e) {
                    var t = this,
                        n = this.controller.getGraphSettings().config,
                        r = x.default(e);
                    if (r) {
                        var i = /^\s*https?:\/\/([a-zA-Z0-9]*\.)?desmos\.com(:[0-9]+)?\/calculator\/./.test(r),
                            o = this.controller.getSelectedItem();
                        if (n.pasteGraphLink && o && "folder" === o.type && i && "" === o.title && 0 === this.controller.getNumberOfItemsInFolder(o.id)) return e.stopPropagation(), e.preventDefault(), void b.default(this.controller, r, "inject", function(e, t) {
                            return t(null, e)
                        });
                        if (!o || "text" !== o.type && "folder" !== o.type) {
                            if (n.pasteGraphLink && i) {
                                e.stopPropagation(), e.preventDefault();
                                var a = n.pasteGraphLinkCallback ? n.pasteGraphLinkCallback : function(e, t) {
                                    return t(null, e)
                                };
                                return void b.default(this.controller, r, "set-state", a)
                            }
                            if (n.pasteTableData) {
                                var s = g.parse(r);
                                if (void 0 !== s) return e.stopPropagation(), e.preventDefault(), this.controller.dispatch({
                                    type: "paste-table",
                                    data: s
                                })
                            }
                            var l = g.getExpressions(r);
                            if (void 0 !== l) {
                                e.stopPropagation(), e.preventDefault();
                                var c = [];
                                return void(1 === l.length && l[0].numberList ? this.controller.dispatch({
                                    type: "append-number-list",
                                    latex: l[0].content
                                }) : (l.forEach(function(e) {
                                    "latex" === e.type ? c.push({
                                        type: "expression",
                                        id: t.controller.generateId(),
                                        latex: e.content
                                    }) : c.push({
                                        type: "text",
                                        id: t.controller.generateId(),
                                        text: e.content
                                    })
                                }), this.controller.dispatch({
                                    type: "insert-several-expressions",
                                    expressions: c
                                })))
                            }
                        }
                    }
                }, t.prototype.onDrop = function(e) {
                    if (this.controller.areImagesEnabled()) {
                        var t = e.dataTransfer && e.dataTransfer.files;
                        t && this.controller.dispatch({
                            type: "new-images",
                            files: t
                        })
                    }
                }, t
            }(o.Class);
        t.default = k
    }), define("graphing-calc/keypads/dcgview-graphing", ["require", "exports", "tslib", "dcgview"], function(e, t, n, r) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var i = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.init = function() {
                this.controller = this.props.controller(), this.dispatch = this.controller.dispatch
            }, t
        }(r.Class);
        t.default = i
    }), define("loadcss!keypad/btn", function() {}), define("keypad/btn", ["require", "exports", "tslib", "dcgview", "loadcss!./btn"], function(e, t, n, r) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var i = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.template = function() {
                var e = this;
                return r.createElement("div", {
                    class: function() {
                        return {
                            "dcg-keypad-btn-container": !0,
                            "dcg-keypad-short-btn": "popover-short" === e.props.style()
                        }
                    },
                    style: function() {
                        return {
                            "flex-grow": e.getColSpan()
                        }
                    }
                }, r.createElement("span", {
                    role: r.const("button"),
                    class: this.bindFn(this.getClasses),
                    "dcg-command": this.props.command,
                    "aria-label": this.bindFn(this.getAriaLabel),
                    onTap: this.props.onTap
                }, r.createElement("span", {
                    class: r.const("dcg-keypad-btn-content")
                }, this.children)))
            }, t.prototype.getClasses = function() {
                var e = {
                        "dcg-keypad-btn": !0,
                        "dcg-keypad-btn-active": this.isActive()
                    },
                    t = this.props.style();
                switch (t) {
                    case "default":
                        e["dcg-btn-light-on-gray"] = !0;
                        break;
                    case "highlight":
                        e["dcg-btn-dark-on-gray"] = !0;
                        break;
                    case "popover-short":
                    case "popover":
                        e["dcg-btn-light-gray"] = !0;
                        break;
                    case "blue":
                        e["dcg-btn-short-blue"] = !0;
                        break;
                    case "tall-blue":
                        e["dcg-btn-tall-blue"] = !0;
                        break;
                    default:
                        return t
                }
                return e
            }, t.prototype.isActive = function() {
                return !!this.props.active && this.props.active()
            }, t.prototype.getAriaLabel = function() {
                return this.props.ariaLabel ? this.props.ariaLabel() : this.props.command()
            }, t.prototype.getColSpan = function() {
                return this.props.colspan ? this.props.colspan() : void 0
            }, t
        }(r.Class);
        t.default = i
    });
define("keypad/keys", ["require", "exports", "./btn", "dcgview-helpers/static-mathquill-view", "dcgview", "lib/i18n"], function(e, t, n, r, i, o) {
        "use strict";

        function a(e, t) {
            return void 0 === e ? i.const(t) : i.const(e)
        }

        function s(e) {
            return function(t, o, s) {
                return void 0 === s && (s = {}), i.createElement(n.default, {
                    command: i.const(e.command || e.typedText || e.keys[0]),
                    ariaLabel: i.const(e.ariaLabel || e.typedText || e.keys[0]),
                    colspan: a(s.colspan, 1),
                    style: function() {
                        return s.style || "default"
                    },
                    onTap: function() {
                        return o({
                            type: "keypad/type-text",
                            text: e.typedText || e.keys[0]
                        })
                    }
                }, m(function() {
                    return "{" === e.keys[0] || "[" === e.keys[0]
                }, {
                    true: function() {
                        return i.createElement("span", {
                            class: i.const("dcg-mq-math-mode"),
                            style: i.const("font-size: 120%")
                        }, i.const(e.keys[0]), i.const(" "), i.createElement("span", {
                            style: i.const("color: #999")
                        }, i.const(e.keys[1])))
                    },
                    false: function() {
                        return i.createElement("span", null, i.createElement(r.default, {
                            latex: i.const(e.keys[0])
                        }), i.createElement("span", {
                            style: i.const("color: #999")
                        }, i.createElement(r.default, {
                            latex: i.const(e.keys[1])
                        })))
                    }
                }))
            }
        }

        function l(e) {
            return function(t, o, s) {
                return void 0 === s && (s = {}), i.createElement(n.default, {
                    command: i.const(e.command || e.typedText || e.keys[1]),
                    ariaLabel: i.const(e.ariaLabel || e.typedText || e.keys[1]),
                    colspan: a(s.colspan, 1),
                    style: a(s.style, "default"),
                    onTap: function() {
                        return o({
                            type: "keypad/type-text",
                            text: e.typedText || e.keys[1]
                        })
                    }
                }, m(function() {
                    return "}" === e.keys[1] || "]" === e.keys[1]
                }, {
                    true: function() {
                        return i.createElement("span", {
                            class: i.const("dcg-mq-math-mode"),
                            style: i.const("font-size: 120%")
                        }, i.createElement("span", {
                            style: i.const("color: #999")
                        }, i.const(e.keys[0])), i.const(" "), i.const(e.keys[1]))
                    },
                    false: function() {
                        return i.createElement("span", null, i.createElement("span", {
                            style: i.const("color: #999")
                        }, i.createElement(r.default, {
                            latex: i.const(e.keys[0])
                        })), i.createElement(r.default, {
                            latex: i.const(e.keys[1])
                        }))
                    }
                }))
            }
        }

        function c(e) {
            return function(t, o, s) {
                return void 0 === s && (s = {}), i.createElement(n.default, {
                    command: i.const(e.command || t),
                    ariaLabel: i.const(e.ariaLabel || t),
                    colspan: a(s.colspan, 1),
                    style: function() {
                        return s.style || "default"
                    },
                    onTap: function() {
                        return o({
                            type: "keypad/type-text",
                            text: e.typedText || t
                        })
                    }
                }, i.createElement(r.default, {
                    latex: i.const(e.content || t)
                }))
            }
        }

        function u(e) {
            return function(t, r, o) {
                return void 0 === o && (o = {}), i.createElement(n.default, {
                    command: i.const(e.command || t),
                    ariaLabel: i.const(e.ariaLabel || t),
                    colspan: a(o.colspan, 1),
                    style: function() {
                        return o.style || "default"
                    },
                    onTap: function() {
                        return r({
                            type: "keypad/type-text",
                            text: e.typedText || t
                        })
                    }
                }, i.createElement("span", {
                    class: i.const("dcg-mq-math-mode")
                }, i.const(e.content || t)))
            }
        }

        function p(e) {
            return function(t, o, s) {
                return void 0 === s && (s = {}), i.createElement(n.default, {
                    command: i.const(t),
                    ariaLabel: i.const(e.ariaLabel || t),
                    colspan: a(s.colspan, 1),
                    style: function() {
                        return s.style || "default"
                    },
                    onTap: function() {
                        return o({
                            type: "keypad/type-text",
                            text: t + "("
                        })
                    }
                }, i.createElement(r.default, {
                    latex: i.const(t)
                }))
            }
        }

        function d(e) {
            return function(t, o, s) {
                return void 0 === s && (s = {}), i.createElement(n.default, {
                    command: i.const(e.command),
                    ariaLabel: i.const(e.ariaLabel || e.command),
                    colspan: a(s.colspan, 1),
                    style: function() {
                        return s.style || "default"
                    },
                    onTap: function() {
                        o({
                            type: "keypad/custom-command",
                            command: e.command
                        })
                    }
                }, i.createElement(r.default, {
                    latex: i.const(e.content)
                }))
            }
        }

        function h(e, t, n) {
            void 0 === n && (n = {});
            var r = e.dispatch;
            return g[t](t, r, n)
        }

        function f(e) {
            return void 0 === e && (e = 1), i.createElement("div", {
                style: i.const("flex-grow:" + e)
            })
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var m = i.Components.IfElse,
            g = {
                "{": u({
                    ariaLabel: o.t("Left Bracket")
                }),
                "}": u({
                    ariaLabel: o.t("Right Bracket")
                }),
                "(": c({
                    ariaLabel: o.t("Left Parenthesis")
                }),
                ")": c({
                    ariaLabel: o.t("Right Parenthesis")
                }),
                sqrt: c({
                    content: "\\sqrt{}",
                    ariaLabel: o.t("Square Root")
                }),
                "/": c({
                    content: "÷",
                    ariaLabel: o.t("Divide")
                }),
                "*": c({
                    content: "×",
                    ariaLabel: o.t("Times")
                }),
                "-": c({
                    ariaLabel: o.t("Minus")
                }),
                "+": c({
                    ariaLabel: o.t("Plus")
                }),
                ".": c({
                    ariaLabel: o.t("Decimal")
                }),
                ans: function(e, t, r) {
                    return void 0 === r && (r = {}), i.createElement(n.default, {
                        command: i.const(e),
                        ariaLabel: function() {
                            return o.t("Answer")
                        },
                        colspan: a(r.colspan, 1),
                        style: function() {
                            return r.style || "default"
                        },
                        onTap: function() {
                            return t({
                                type: "keypad/type-text",
                                text: e
                            })
                        }
                    }, i.const("ans"))
                },
                enter: function(e, t, r) {
                    return void 0 === r && (r = {}), i.createElement(n.default, {
                        command: i.const(e),
                        ariaLabel: function() {
                            return o.t("Enter")
                        },
                        colspan: a(r.colspan, 1),
                        style: function() {
                            return r.style || "default"
                        },
                        onTap: function() {
                            return t({
                                type: "keypad/press-key",
                                key: "Enter"
                            })
                        }
                    }, i.createElement("i", {
                        class: i.const("dcg-icon-arrow-enter")
                    }))
                },
                shift: function(e, t, r) {
                    return void 0 === r && (r = {}), i.createElement(n.default, {
                        command: i.const(e),
                        ariaLabel: function() {
                            return o.t("Shift")
                        },
                        colspan: a(r.colspan, 1),
                        style: function() {
                            return r.style || "default"
                        },
                        active: a(r.active, !1),
                        onTap: function() {
                            return t({
                                type: "keypad/shift"
                            })
                        }
                    }, i.createElement("i", {
                        class: i.const("dcg-icon-shift")
                    }))
                },
                left: function(e, t, r) {
                    return void 0 === r && (r = {}), i.createElement(n.default, {
                        command: i.const(e),
                        ariaLabel: function() {
                            return o.t("Left Arrow")
                        },
                        colspan: a(r.colspan, 1),
                        style: function() {
                            return r.style || "default"
                        },
                        onTap: function() {
                            return t({
                                type: "keypad/press-key",
                                key: "Left"
                            })
                        }
                    }, i.createElement("i", {
                        class: i.const("dcg-icon-arrow-left")
                    }))
                },
                right: function(e, t, r) {
                    return void 0 === r && (r = {}), i.createElement(n.default, {
                        command: i.const(e),
                        ariaLabel: function() {
                            return o.t("Right Arrow")
                        },
                        colspan: a(r.colspan, 1),
                        style: function() {
                            return r.style || "default"
                        },
                        onTap: function() {
                            return t({
                                type: "keypad/press-key",
                                key: "Right"
                            })
                        }
                    }, i.createElement("i", {
                        class: i.const("dcg-icon-arrow-right")
                    }))
                },
                123: function(e, t, r) {
                    return void 0 === r && (r = {}), i.createElement(n.default, {
                        command: i.const(e),
                        ariaLabel: function() {
                            return o.t("Toggle Numbers")
                        },
                        colspan: a(r.colspan, 1),
                        style: function() {
                            return r.style || "default"
                        },
                        onTap: function() {
                            return t({
                                type: "keypad/123"
                            })
                        }
                    }, i.const("1 2 3"))
                },
                ABC: function(e, t, r) {
                    return void 0 === r && (r = {}), i.createElement(n.default, {
                        command: i.const(e),
                        ariaLabel: function() {
                            return o.t("Toggle Letters")
                        },
                        colspan: a(r.colspan, 1),
                        style: function() {
                            return r.style || "default"
                        },
                        onTap: function() {
                            return t({
                                type: "keypad/abc"
                            })
                        }
                    }, i.const("A B C"))
                },
                backspace: function(e, t, r) {
                    return void 0 === r && (r = {}), i.createElement(n.default, {
                        command: i.const(e),
                        ariaLabel: function() {
                            return o.t("Backspace")
                        },
                        colspan: a(r.colspan, 1),
                        style: function() {
                            return r.style || "default"
                        },
                        onTap: function() {
                            return t({
                                type: "keypad/press-key",
                                key: "Backspace"
                            })
                        }
                    }, i.createElement("i", {
                        class: i.const("dcg-icon-delete")
                    }))
                },
                pi: c({
                    content: "\\pi",
                    ariaLabel: o.t("Pi")
                }),
                alpha: c({
                    content: "\\alpha",
                    ariaLabel: o.t("Alpha")
                }),
                beta: c({
                    content: "\\beta",
                    ariaLabel: o.t("Beta")
                }),
                theta: c({
                    content: "\\theta",
                    ariaLabel: o.t("Theta")
                }),
                tau: c({
                    content: "\\tau",
                    ariaLabel: o.t("Tau")
                }),
                "a^2": d({
                    command: "a^2",
                    content: "a^2",
                    ariaLabel: o.t("Squared")
                }),
                "a^3": d({
                    command: "a^3",
                    content: "a^3",
                    ariaLabel: o.t("Cubed")
                }),
                "x^3": d({
                    command: "a^3",
                    content: "x^3",
                    ariaLabel: o.t("Cubed")
                }),
                "a^b": c({
                    content: "a^b",
                    typedText: "^",
                    ariaLabel: o.t("Superscript")
                }),
                a_b: c({
                    content: "a_b",
                    typedText: "_",
                    ariaLabel: o.t("Subscript")
                }),
                "a/b": c({
                    content: "\\frac{a}{b}",
                    typedText: "/",
                    ariaLabel: o.t("A over B")
                }),
                "x^2": d({
                    command: "a^2",
                    content: "x^2",
                    ariaLabel: o.t("Squared")
                }),
                "x^y": c({
                    content: "x^y",
                    typedText: "^",
                    ariaLabel: o.t("Superscript")
                }),
                "x/y": c({
                    content: "\\frac{x}{y}",
                    typedText: "/",
                    ariaLabel: o.t("A over B")
                }),
                nthroot: d({
                    command: "nthroot",
                    content: "\\sqrt[n]{}",
                    ariaLabel: o.t("Nth Root")
                }),
                ythroot: d({
                    command: "nthroot",
                    content: "\\sqrt[y]{}",
                    ariaLabel: o.t("Yth Root")
                }),
                sin: p({
                    ariaLabel: o.t("Sine")
                }),
                cos: p({
                    ariaLabel: o.t("Cosine")
                }),
                tan: p({
                    ariaLabel: o.t("Tangent")
                }),
                sec: p({
                    ariaLabel: o.t("Secant")
                }),
                csc: p({
                    ariaLabel: o.t("Cosecant")
                }),
                cot: p({
                    ariaLabel: o.t("Cotangent")
                }),
                sinh: p({
                    ariaLabel: o.t("Hyperbolic Sine")
                }),
                cosh: p({
                    ariaLabel: o.t("Hyperbolic Cosine")
                }),
                tanh: p({
                    ariaLabel: o.t("Hyperbolic Tangent")
                }),
                sech: p({
                    ariaLabel: o.t("Hyperbolic Secant")
                }),
                csch: p({
                    ariaLabel: o.t("Hyperbolic Cosecant")
                }),
                coth: p({
                    ariaLabel: o.t("Hyperbolic Cotangent")
                }),
                arcsin: d({
                    command: "arcsin",
                    content: "sin^{-1}",
                    ariaLabel: o.t("Inverse Sine")
                }),
                arccos: d({
                    command: "arccos",
                    content: "cos^{-1}",
                    ariaLabel: o.t("Inverse Cosine")
                }),
                arctan: d({
                    command: "arctan",
                    content: "tan^{-1}",
                    ariaLabel: o.t("Inverse Tangent")
                }),
                arccsc: d({
                    command: "arccsc",
                    content: "csc^{-1}",
                    ariaLabel: o.t("Inverse Cosecant")
                }),
                arcsec: d({
                    command: "arcsec",
                    content: "sec^{-1}",
                    ariaLabel: o.t("Inverse Secant")
                }),
                arccot: d({
                    command: "arccot",
                    content: "cot^{-1}",
                    ariaLabel: o.t("Inverse Cotangent")
                }),
                "|a|": c({
                    typedText: "|",
                    ariaLabel: o.t("Absolute Value")
                }),
                "|x|": c({
                    typedText: "|",
                    ariaLabel: o.t("Absolute Value")
                }),
                ln: p({
                    ariaLabel: o.t("Natural Log")
                }),
                log: p({
                    ariaLabel: o.t("Log")
                }),
                quantile: p({
                    ariaLabel: o.t("Quantile")
                }),
                quartile: p({
                    ariaLabel: o.t("Quartile")
                }),
                var: p({}),
                varp: p({}),
                nCr: p({}),
                loga: d({
                    command: "loga",
                    content: "log_a",
                    ariaLabel: o.t("Log A")
                }),
                stdev: p({
                    ariaLabel: o.t("Standard Deviation")
                }),
                mad: p({}),
                nPr: p({}),
                total: p({}),
                length: p({}),
                min: p({}),
                max: p({}),
                cov: p({
                    ariaLabel: o.t("Co Variance")
                }),
                corr: p({
                    ariaLabel: o.t("Correlation")
                }),
                stats: p({
                    ariaLabel: o.t("Summary statistics")
                }),
                polygon: p({
                    ariaLabel: o.t("Polygon")
                }),
                mean: p({
                    ariaLabel: o.t("Mean")
                }),
                stdevp: p({
                    ariaLabel: o.t("Standard Deviation of Population")
                }),
                mod: p({}),
                "e^x": c({
                    typedText: "e^",
                    ariaLabel: o.t("Exponent")
                }),
                sum: c({
                    content: "\\sum",
                    ariaLabel: o.t("Sum")
                }),
                prod: c({
                    content: "\\prod",
                    ariaLabel: o.t("Product")
                }),
                floor: p({
                    ariaLabel: o.t("Floor")
                }),
                ceil: p({
                    ariaLabel: o.t("Ceiling")
                }),
                round: p({
                    ariaLabel: o.t("Round")
                }),
                abs: p({
                    ariaLabel: o.t("Absolute Value")
                }),
                "!": c({
                    ariaLabel: o.t("Factorial")
                }),
                "n!": c({
                    typedText: "!",
                    ariaLabel: o.t("Factorial")
                }),
                median: p({
                    ariaLabel: o.t("Median")
                }),
                lcm: p({}),
                gcd: p({}),
                gcf: p({}),
                ddx: d({
                    command: "ddx",
                    content: "\\frac{d}{dx}"
                }),
                int: c({
                    content: "\\int",
                    ariaLabel: o.t("Integral")
                }),
                "%": c({
                    content: "\\%",
                    ariaLabel: o.t("Percent Of")
                }),
                exp: c({}),
                sign: p({}),
                normaldist: p({
                    ariaLabel: o.t("Normal Distribution")
                }),
                poissondist: p({
                    ariaLabel: o.t("Poisson Distribution")
                }),
                binomialdist: p({
                    ariaLabel: o.t("Binomial Distribution")
                }),
                uniformdist: p({
                    ariaLabel: o.t("Uniform Distribution")
                }),
                erf: p({
                    ariaLabel: o.t("Error Function")
                }),
                histogram: p({
                    ariaLabel: o.t("Histogram")
                }),
                boxplot: p({
                    ariaLabel: o.t("Box Plot")
                }),
                dotplot: p({
                    ariaLabel: o.t("Dot Plot")
                }),
                tscore: p({
                    ariaLabel: o.t("T Score")
                }),
                ittest: p({
                    ariaLabel: o.t("Independent T Test")
                }),
                ttest: p({
                    ariaLabel: o.t("T Test")
                }),
                tdist: p({
                    ariaLabel: o.t("Student-t Distribution")
                }),
                pdf: p({
                    ariaLabel: o.t("Probability Density Function")
                }),
                cdf: p({
                    ariaLabel: o.t("Cumulative Density Function")
                }),
                random: p({
                    ariaLabel: o.t("Random Number")
                }),
                inversecdf: p({
                    ariaLabel: o.t("Inverse CDF function")
                }),
                "A^-1": d({
                    command: "A^-1",
                    content: "A^{-1}",
                    ariaLabel: o.t("Inverse")
                }),
                "A^T": d({
                    command: "A^T",
                    content: "A^T",
                    ariaLabel: o.t("Transpose")
                }),
                "A^2": d({
                    command: "A^2",
                    content: "A^2",
                    ariaLabel: o.t("Squared")
                }),
                det: p({
                    ariaLabel: "Determinant"
                }),
                "A^n": c({
                    content: "A^n",
                    typedText: "^",
                    ariaLabel: o.t("Exponent")
                }),
                a: c({}),
                b: c({}),
                c: c({}),
                d: c({}),
                e: c({}),
                f: c({}),
                g: c({}),
                h: c({}),
                i: c({}),
                j: c({}),
                k: c({}),
                l: c({}),
                m: c({}),
                n: c({}),
                o: c({}),
                p: c({}),
                q: c({}),
                r: c({}),
                s: c({}),
                t: c({}),
                u: c({}),
                v: c({}),
                w: c({}),
                x: c({}),
                boldX: c({
                    content: "x",
                    typedText: "x"
                }),
                y: c({}),
                boldY: c({
                    content: "y",
                    typedText: "y"
                }),
                z: c({}),
                A: c({}),
                B: c({}),
                C: c({}),
                D: c({}),
                E: c({}),
                F: c({}),
                G: c({}),
                H: c({}),
                I: c({}),
                J: c({}),
                K: c({}),
                L: c({}),
                M: c({}),
                N: c({}),
                O: c({}),
                P: c({}),
                Q: c({}),
                R: c({}),
                S: c({}),
                T: c({}),
                U: c({}),
                V: c({}),
                W: c({}),
                X: c({}),
                Y: c({}),
                Z: c({}),
                0: c({}),
                1: c({}),
                2: c({}),
                3: c({}),
                4: c({}),
                5: c({}),
                6: c({}),
                7: c({}),
                8: c({}),
                9: c({}),
                ",": c({}),
                "=": c({}),
                "[": c({}),
                "]": c({}),
                "{}_left": s({
                    keys: ["{", "}"]
                }),
                "{}_right": l({
                    keys: ["{", "}"]
                }),
                "()_left": s({
                    keys: ["(", ")"]
                }),
                "()_right": l({
                    keys: ["(", ")"]
                }),
                "[]_left": s({
                    keys: ["[", "]"]
                }),
                "[]_right": l({
                    keys: ["[", "]"]
                }),
                ",'_left": s({
                    keys: [",", "′"]
                }),
                ",'_right": l({
                    keys: [",", "′"],
                    typedText: "'"
                }),
                '"': c({}),
                "'": c({}),
                "~": c({}),
                ":": c({}),
                ">": c({}),
                "<": c({}),
                ">=": c({
                    content: "\\ge"
                }),
                "<=": c({
                    content: "\\le"
                }),
                "!%_left": s({
                    keys: ["!", "{}^{%}"]
                }),
                "!%_right": l({
                    keys: ["!", "{}^{%}"],
                    typedText: "%"
                }),
                "~:_left": s({
                    keys: ["~", "{}^{:}"]
                }),
                "~:_right": l({
                    keys: ["~", "{}^{:}"],
                    typedText: ":"
                })
            };
        t.view = h, t.spacer = f
    }), define("keypad/dcgview-keypad", ["require", "exports", "tslib", "dcgview"], function(e, t, n, r) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var i = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.init = function() {
                this.controller = this.props.controller()
            }, t
        }(r.Class);
        t.default = i
    }), define("loadcss!keypad/keypad", function() {}), define("keypad/keypad", ["require", "exports", "tslib", "dcgview", "./dcgview-keypad", "loadcss!./keypad"], function(e, t, n, r, i) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var o = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.template = function() {
                return r.createElement("div", {
                    class: r.const("dcg-basic-keypad dcg-do-not-blur")
                }, this.children)
            }, t
        }(i.default);
        t.default = o
    }), define("loadcss!keypad/row", function() {}), define("keypad/row", ["require", "exports", "tslib", "dcgview", "loadcss!./row"], function(e, t, n, r) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var i = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.template = function() {
                return r.createElement("div", {
                    class: r.const("dcg-keypad-row")
                }, this.children)
            }, t
        }(r.Class);
        t.default = i
    }), define("graphing-calc/keypads/qwerty", ["require", "exports", "tslib", "dcgview", "./dcgview-graphing", "keypad/keys", "keypad/keypad", "keypad/row"], function(e, t, n, r, i, o, a, s) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var l = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.template = function() {
                return r.createElement(a.default, {
                    controller: this.props.controller
                }, r.createElement(s.default, null, o.view(this, "q"), o.view(this, "w"), o.view(this, "e"), o.view(this, "r"), o.view(this, "t"), o.view(this, "y"), o.view(this, "u"), o.view(this, "i"), o.view(this, "o"), o.view(this, "p")), r.createElement(s.default, null, o.view(this, "a"), o.view(this, "s"), o.view(this, "d"), o.view(this, "f"), o.view(this, "g"), o.view(this, "h"), o.view(this, "j"), o.view(this, "k"), o.view(this, "l"), o.view(this, "theta")), r.createElement(s.default, null, o.view(this, "shift", {
                    colspan: 1.364,
                    style: "highlight"
                }), o.spacer(.136), o.view(this, "z"), o.view(this, "x"), o.view(this, "c"), o.view(this, "v"), o.view(this, "b"), o.view(this, "n"), o.view(this, "m"), o.spacer(.136), o.view(this, "backspace", {
                    colspan: 1.364,
                    style: "highlight"
                })), r.createElement(s.default, null, o.view(this, "123", {
                    colspan: 1.818,
                    style: "highlight"
                }), o.spacer(.182), o.view(this, "a_b"), o.view(this, "!%_left"), o.view(this, "[]_left"), o.view(this, "{}_left"), o.view(this, "~:_left"), o.view(this, ",'_left"), o.spacer(.182), o.view(this, "enter", {
                    colspan: 1.818,
                    style: "blue"
                })))
            }, t
        }(i.default);
        t.default = l
    }), define("graphing-calc/keypads/qwerty-capital", ["require", "exports", "tslib", "dcgview", "./dcgview-graphing", "keypad/keys", "keypad/keypad", "keypad/row"], function(e, t, n, r, i, o, a, s) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var l = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.template = function() {
                return r.createElement(a.default, {
                    controller: this.props.controller
                }, r.createElement(s.default, null, o.view(this, "Q"), o.view(this, "W"), o.view(this, "E"), o.view(this, "R"), o.view(this, "T"), o.view(this, "Y"), o.view(this, "U"), o.view(this, "I"), o.view(this, "O"), o.view(this, "P")), r.createElement(s.default, null, o.view(this, "A"), o.view(this, "S"), o.view(this, "D"), o.view(this, "F"), o.view(this, "G"), o.view(this, "H"), o.view(this, "J"), o.view(this, "K"), o.view(this, "L"), o.view(this, "tau")), r.createElement(s.default, null, o.view(this, "shift", {
                    colspan: 1.364,
                    active: !0,
                    style: "highlight"
                }), o.spacer(.136), o.view(this, "Z"), o.view(this, "X"), o.view(this, "C"), o.view(this, "V"), o.view(this, "B"), o.view(this, "N"), o.view(this, "M"), o.spacer(.136), o.view(this, "backspace", {
                    colspan: 1.364,
                    style: "highlight"
                })), r.createElement(s.default, null, o.view(this, "123", {
                    colspan: 1.818,
                    style: "highlight"
                }), o.spacer(.182), o.view(this, "a^b"), o.view(this, "!%_right"), o.view(this, "[]_right"), o.view(this, "{}_right"), o.view(this, "~:_right"), o.view(this, ",'_right"), o.spacer(.182), o.view(this, "enter", {
                    colspan: 1.818,
                    style: "blue"
                })))
            }, t
        }(i.default);
        t.default = l
    }), define("graphing-calc/keypads/numbers", ["require", "exports", "tslib", "dcgview", "./dcgview-graphing", "keypad/keys", "keypad/keypad", "keypad/row", "keypad/btn"], function(e, t, n, r, i, o, a, s, l) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var c = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.template = function() {
                var e = this;
                return r.createElement(a.default, {
                    controller: this.props.controller
                }, r.createElement(s.default, null, o.view(this, "boldX"), o.view(this, "boldY"), o.view(this, "a^2"), o.view(this, "a^b"), o.spacer(.5), o.view(this, "7", {
                    style: "highlight"
                }), o.view(this, "8", {
                    style: "highlight"
                }), o.view(this, "9", {
                    style: "highlight"
                }), o.view(this, "/"), o.spacer(.5), r.createElement(l.default, {
                    command: this.const("functions"),
                    ariaLabel: function() {
                        return e.controller.t("Functions")
                    },
                    colspan: this.const(2),
                    style: this.const("highlight"),
                    active: function() {
                        return e.controller.isKeypadFunctionsPopoverOpen()
                    },
                    onTap: function() {
                        return e.dispatch({
                            type: "keypad/functions"
                        })
                    }
                }, this.bindFn(this.getFuncsBtnText))), r.createElement(s.default, null, o.view(this, "("), o.view(this, ")"), o.view(this, "<"), o.view(this, ">"), o.spacer(.5), o.view(this, "4", {
                    style: "highlight"
                }), o.view(this, "5", {
                    style: "highlight"
                }), o.view(this, "6", {
                    style: "highlight"
                }), o.view(this, "*"), o.spacer(.5), o.view(this, "left", {
                    style: "highlight"
                }), o.view(this, "right", {
                    style: "highlight"
                })), r.createElement(s.default, null, o.view(this, "|a|"), o.view(this, ","), o.view(this, "<="), o.view(this, ">="), o.spacer(.5), o.view(this, "1", {
                    style: "highlight"
                }), o.view(this, "2", {
                    style: "highlight"
                }), o.view(this, "3", {
                    style: "highlight"
                }), o.view(this, "-"), o.spacer(1), o.view(this, "backspace", {
                    colspan: 1.5,
                    style: "highlight"
                })), r.createElement(s.default, null, o.view(this, "ABC", {
                    colspan: 2,
                    style: "highlight"
                }), o.view(this, "sqrt"), o.view(this, "pi"), o.spacer(.5), o.view(this, "0", {
                    style: "highlight"
                }), o.view(this, ".", {
                    style: "highlight"
                }), o.view(this, "="), o.view(this, "+"), o.spacer(.5), o.view(this, "enter", {
                    colspan: 2,
                    style: "blue"
                })))
            }, t.prototype.getFuncsBtnText = function() {
                return this.controller.isNarrow() ? this.controller.t("funcs") : this.controller.t("functions")
            }, t
        }(i.default);
        t.default = c
    }), define("graphing-calc/keypads/letters", ["require", "exports", "tslib", "dcgview", "./dcgview-graphing", "keypad/keys", "keypad/keypad", "keypad/row"], function(e, t, n, r, i, o, a, s) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var l = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.template = function() {
                return r.createElement(a.default, {
                    controller: this.props.controller
                }, r.createElement(s.default, null, o.view(this, "a"), o.view(this, "b"), o.view(this, "c"), o.view(this, "d"), o.view(this, "e"), o.view(this, "f"), o.view(this, "g"), o.view(this, "h"), o.view(this, "i")), r.createElement(s.default, null, o.view(this, "j"), o.view(this, "k"), o.view(this, "l"), o.view(this, "m"), o.view(this, "n"), o.view(this, "o"), o.view(this, "p"), o.view(this, "q"), o.view(this, "r")), r.createElement(s.default, null, o.view(this, "s"), o.view(this, "t"), o.view(this, "u"), o.view(this, "v"), o.view(this, "w"), o.view(this, "x"), o.view(this, "y"), o.view(this, "z"), o.view(this, "backspace", {
                    colspan: 1,
                    style: "highlight"
                })), r.createElement(s.default, null, o.view(this, "123", {
                    colspan: 1.75,
                    style: "highlight"
                }), o.spacer(.1), o.view(this, "a_b"), o.view(this, "()_left"), o.view(this, "[]_left"), o.view(this, "{}_left"), o.view(this, "~"), o.view(this, ","), o.spacer(.1), o.view(this, "enter", {
                    colspan: 1.75,
                    style: "highlight"
                })))
            }, t
        }(i.default);
        t.default = l
    }), define("graphing-calc/keypads/trig", ["require", "exports", "tslib", "dcgview", "./dcgview-graphing", "keypad/keys", "keypad/keypad"], function(e, t, n, r, i, o, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var s = r.Components.If,
            l = function(e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return n.__extends(t, e), t.prototype.template = function() {
                    var e = this;
                    return r.createElement(a.default, {
                        controller: this.props.controller
                    }, this.b("sin"), this.b("arcsin"), this.b("sinh"), this.b("cos"), this.b("arccos"), this.b("cosh"), this.b("tan"), this.b("arctan"), this.b("tanh"), r.createElement(s, {
                        predicate: this.bindFn(this.isNotRestricted)
                    }, function() {
                        return e.b("csc")
                    }), r.createElement(s, {
                        predicate: this.bindFn(this.isNotRestricted)
                    }, function() {
                        return e.b("arccsc")
                    }), r.createElement(s, {
                        predicate: this.bindFn(this.isNotRestricted)
                    }, function() {
                        return e.b("csch")
                    }), r.createElement(s, {
                        predicate: this.bindFn(this.isNotRestricted)
                    }, function() {
                        return e.b("sec")
                    }), r.createElement(s, {
                        predicate: this.bindFn(this.isNotRestricted)
                    }, function() {
                        return e.b("arcsec")
                    }), r.createElement(s, {
                        predicate: this.bindFn(this.isNotRestricted)
                    }, function() {
                        return e.b("sech")
                    }), r.createElement(s, {
                        predicate: this.bindFn(this.isNotRestricted)
                    }, function() {
                        return e.b("cot")
                    }), r.createElement(s, {
                        predicate: this.bindFn(this.isNotRestricted)
                    }, function() {
                        return e.b("arccot")
                    }), r.createElement(s, {
                        predicate: this.bindFn(this.isNotRestricted)
                    }, function() {
                        return e.b("coth")
                    }))
                }, t.prototype.b = function(e) {
                    return o.view(this, e, {
                        style: "popover"
                    })
                }, t.prototype.isNotRestricted = function() {
                    return !this.controller.areFunctionsRestricted()
                }, t
            }(i.default);
        t.default = l
    }), define("graphing-calc/keypads/stats", ["require", "exports", "tslib", "dcgview", "./dcgview-graphing", "keypad/keys", "keypad/keypad"], function(e, t, n, r, i, o, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var s = r.Components.If,
            l = function(e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return n.__extends(t, e), t.prototype.template = function() {
                    var e = this;
                    return r.createElement(a.default, {
                        controller: this.props.controller
                    }, this.b("total"), this.b("length"), this.b("mean"), this.b("median"), this.b("min"), this.b("max"), this.b("quartile"), this.b("quantile"), this.b("stdev"), this.b("stdevp"), r.createElement(s, {
                        predicate: this.bindFn(this.isNotRestricted)
                    }, function() {
                        return e.b("mad")
                    }), this.b("var"), this.b("varp"), r.createElement(s, {
                        predicate: this.bindFn(this.isNotRestricted)
                    }, function() {
                        return e.b("cov")
                    }), this.b("corr"), this.b("nCr"), this.b("nPr"), this.b("stats"), this.b("ttest"), this.b("tscore"), this.b("ittest"))
                }, t.prototype.b = function(e) {
                    return o.view(this, e, {
                        style: "popover-short"
                    })
                }, t.prototype.isNotRestricted = function() {
                    return !this.controller.areFunctionsRestricted()
                }, t
            }(i.default);
        t.default = l
    }), define("graphing-calc/keypads/misc", ["require", "exports", "tslib", "dcgview", "./dcgview-graphing", "keypad/keys", "keypad/keypad"], function(e, t, n, r, i, o, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var s = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.template = function() {
                return r.createElement(a.default, {
                    controller: this.props.controller
                }, this.b("lcm"), this.b("gcd"), this.b("mod"), this.b("ceil"), this.b("floor"), this.b("round"), this.b("sign"), this.b("%"), this.b("exp"), this.b("ln"), this.b("nthroot"), this.b("polygon"), this.b("log"), this.b("loga"), this.b("ddx"), this.b("int"), this.b("sum"), this.b("prod"))
            }, t.prototype.b = function(e) {
                return o.view(this, e, {
                    style: "popover"
                })
            }, t
        }(i.default);
        t.default = s
    }), define("graphing-calc/keypads/distributions", ["require", "exports", "tslib", "dcgview", "./dcgview-graphing", "keypad/keys", "keypad/keypad"], function(e, t, n, r, i, o, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var s = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.template = function() {
                return r.createElement(a.default, {
                    controller: this.props.controller
                }, r.createElement("div", {
                    class: r.const("dcg-section-heading")
                }, r.const("Visualizations"), r.createElement("a", {
                    href: r.const("https://support.desmos.com/hc/en-us/articles/360022405991"),
                    target: r.const("_blank")
                }, r.createElement("i", {
                    class: r.const("dcg-icon-question-sign")
                }))), this.b("histogram"), this.b("dotplot"), this.b("boxplot"), r.createElement("div", {
                    class: r.const("dcg-section-heading")
                }, r.const("Distributions"), r.createElement("a", {
                    href: r.const("https://support.desmos.com/hc/en-us/articles/360022401451#distributions"),
                    target: r.const("_blank")
                }, r.createElement("i", {
                    class: r.const("dcg-icon-question-sign")
                }))), this.b("normaldist"), this.b("tdist"), this.b("poissondist"), this.b("binomialdist"), this.b("uniformdist"), r.createElement("div", {
                    class: r.const("dcg-popover-section-separator")
                }), this.b("pdf"), this.b("cdf"), this.b("inversecdf"), this.b("random"))
            }, t.prototype.b = function(e) {
                return o.view(this, e, {
                    style: "popover-short"
                })
            }, t
        }(i.default);
        t.default = s
    }), define("loadcss!graphing-calc/keypads/functions-popover", function() {}), define("graphing-calc/keypads/functions-popover", ["require", "exports", "tslib", "dcgview", "./dcgview-graphing", "./trig", "./stats", "./misc", "./distributions", "loadcss!./functions-popover"], function(e, t, n, r, i, o, a, s, l) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var c = r.Components,
            u = c.SwitchUnion,
            p = c.If,
            d = function(e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return n.__extends(t, e), t.prototype.template = function() {
                    var e = this;
                    return r.createElement("div", {
                        class: r.const("dcg-functions-popover dcg-popover dcg-top")
                    }, r.createElement("div", {
                        class: r.const("dcg-popover-interior")
                    }, r.createElement("div", {
                        class: r.const("dcg-popover-header")
                    }, r.createElement("span", {
                        role: r.const("button"),
                        "dcg-command": r.const("trigTab"),
                        class: function() {
                            return {
                                "dcg-heading": !0,
                                "dcg-selected": "trig" === e.controller.getKeypadFunctionsTab()
                            }
                        },
                        onTap: function() {
                            e.dispatch({
                                type: "keypad/set-functions-tab",
                                tab: "trig"
                            })
                        }
                    }, r.const("trig")), r.createElement("span", {
                        role: r.const("button"),
                        "dcg-command": r.const("statsTab"),
                        class: function() {
                            return {
                                "dcg-heading": !0,
                                "dcg-selected": "stats" === e.controller.getKeypadFunctionsTab()
                            }
                        },
                        onTap: function() {
                            e.dispatch({
                                type: "keypad/set-functions-tab",
                                tab: "stats"
                            })
                        }
                    }, r.const("stats")), r.createElement(p, {
                        predicate: function() {
                            return e.controller.areDistributionsEnabled()
                        }
                    }, function() {
                        return r.createElement("span", {
                            role: r.const("button"),
                            "dcg-command": r.const("distTab"),
                            class: function() {
                                return {
                                    "dcg-heading": !0,
                                    "dcg-selected": "dist" === e.controller.getKeypadFunctionsTab()
                                }
                            },
                            onTap: function() {
                                e.dispatch({
                                    type: "keypad/set-functions-tab",
                                    tab: "dist"
                                })
                            }
                        }, r.const("dist"))
                    }), r.createElement("span", {
                        role: r.const("button"),
                        "dcg-command": r.const("miscTab"),
                        class: function() {
                            return {
                                "dcg-heading": !0,
                                "dcg-selected": "misc" === e.controller.getKeypadFunctionsTab()
                            }
                        },
                        onTap: function() {
                            e.dispatch({
                                type: "keypad/set-functions-tab",
                                tab: "misc"
                            })
                        }
                    }, r.const("misc"))), r.createElement("div", {
                        class: r.const("dcg-interior-buttons")
                    }, u(function() {
                        return e.controller.getKeypadFunctionsTab()
                    }, {
                        trig: function() {
                            return r.createElement(o.default, {
                                controller: e.props.controller
                            })
                        },
                        stats: function() {
                            return r.createElement(a.default, {
                                controller: e.props.controller
                            })
                        },
                        misc: function() {
                            return r.createElement(s.default, {
                                controller: e.props.controller
                            })
                        },
                        dist: function() {
                            return r.createElement(l.default, {
                                controller: e.props.controller
                            })
                        }
                    }))), r.createElement("div", {
                        class: r.const("dcg-arrow")
                    }))
                }, t
            }(i.default);
        t.default = d
    }), define("loadcss!graphing-calc/keypads/graphing-keypad-container", function() {}), define("graphing-calc/keypads/main", ["require", "exports", "tslib", "dcgview", "./dcgview-graphing", "./qwerty", "./qwerty-capital", "./numbers", "./letters", "./functions-popover", "jquery", "underscore", "../../lib/tooltip", "loadcss!./graphing-keypad-container"], function(e, t, n, r, i, o, a, s, l, c, u, p, d) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var h = r.Components,
            f = h.SwitchUnion,
            m = h.If,
            g = function(e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return n.__extends(t, e), t.prototype.template = function() {
                    var e = this;
                    return r.createElement("div", {
                        class: r.const("dcg-keypad"),
                        role: r.const("complementary"),
                        "aria-label": r.const("Keypad")
                    }, r.createElement("div", {
                        class: r.const("dcg-keys-container"),
                        style: this.bindFn(this.computeStyles),
                        didMount: this.bindFn(this.didMountContainer)
                    }, r.createElement("div", {
                        class: r.const("dcg-keys-background dcg-do-not-blur"),
                        style: function() {
                            return {
                                background: e.controller.getPillboxBackgroundColor()
                            }
                        }
                    }, r.createElement("div", {
                        class: r.const("dcg-keys")
                    }, f(function() {
                        return e.controller.getKeypadLayout()
                    }, {
                        letters: function() {
                            return r.createElement(o.default, {
                                controller: e.props.controller
                            })
                        },
                        capitalLetters: function() {
                            return r.createElement(a.default, {
                                controller: e.props.controller
                            })
                        },
                        mainNumbers: function() {
                            return r.createElement(s.default, {
                                controller: e.props.controller
                            })
                        },
                        noQwertyLetters: function() {
                            return r.createElement(l.default, {
                                controller: e.props.controller
                            })
                        }
                    }), r.createElement(m, {
                        predicate: function() {
                            return e.controller.isKeypadFunctionsPopoverOpen()
                        }
                    }, function() {
                        return r.createElement(c.default, {
                            controller: e.props.controller
                        })
                    })), r.createElement(m, {
                        predicate: this.bindFn(this.isHideKeypadButtonVisible)
                    }, function() {
                        return r.createElement("div", {
                            class: r.const("dcg-minimize-keypad-container")
                        }, r.createElement(d.Tooltip, {
                            tooltip: function() {
                                return e.controller.t("Hide Keypad")
                            },
                            gravity: e.const("ne"),
                            offset: e.const({
                                left: 6
                            })
                        }, r.createElement("div", {
                            role: r.const("button"),
                            "aria-label": function() {
                                return e.controller.t("Hide Keypad")
                            },
                            class: r.const("dcg-minimize-keypad"),
                            style: function() {
                                return {
                                    "border-bottom-color": e.controller.getPillboxBackgroundColor(),
                                    background: e.controller.getPillboxBackgroundColor()
                                }
                            },
                            onTap: function() {
                                e.controller.dispatch({
                                    type: "keypad/set-minimized",
                                    minimized: !0
                                })
                            }
                        }, r.createElement("i", {
                            class: r.const("dcg-icon-keyboard")
                        }), r.createElement("i", {
                            class: r.const("dcg-icon-caret-down")
                        }))))
                    }))), r.createElement(m, {
                        predicate: this.bindFn(this.isShowKeypadButtonVisible)
                    }, function() {
                        return r.createElement("div", {
                            class: r.const("dcg-show-keypad-container")
                        }, r.createElement(d.Tooltip, {
                            tooltip: function() {
                                return e.controller.t("Show Keypad")
                            },
                            gravity: e.const("ne")
                        }, r.createElement("div", {
                            role: r.const("button"),
                            "aria-label": function() {
                                return e.controller.t("Show Keypad")
                            },
                            class: r.const("dcg-btn-flat-gray dcg-show-keypad dcg-do-not-blur"),
                            style: function() {
                                return {
                                    background: e.controller.getPillboxBackgroundColor()
                                }
                            },
                            onTap: function() {
                                e.controller.dispatch({
                                    type: "keypad/set-minimized",
                                    minimized: !1
                                })
                            }
                        }, r.createElement("i", {
                            class: r.const("dcg-icon-keyboard")
                        }), r.createElement("i", {
                            class: r.const("dcg-icon-caret-up dcg-do-not-blur")
                        }))))
                    }))
                }, t.prototype.didMountContainer = function(e) {
                    this.containerElt = e
                }, t.prototype.isShowKeypadButtonVisible = function() {
                    return !this.controller.isKeypadOpen() && !this.controller.isNarrow() && !this.controller.isInEditListMode() && this.controller.isListVisible()
                }, t.prototype.isHideKeypadButtonVisible = function() {
                    return this.controller.isKeypadOpen() && !this.controller.isNarrow()
                }, t.prototype.didMount = function() {
                    this.updatePopoverPosition()
                }, t.prototype.didUpdate = function() {
                    this.updatePopoverPosition()
                }, t.prototype.computeStyles = function() {
                    var e = {};
                    return this.controller.isNarrow() || (e.transition = "transform .3s, opacity .3s"), this.controller.isKeypadOpen() || (e.opacity = "0", e.transform = "translate3d(0, 255px, 0)"), e
                }, t.prototype.updatePopoverPosition = function() {
                    if (!this.controller.isKeypadFunctionsPopoverOpen()) return void(this.__popoverCache = void 0);
                    var e = this.controller.computeMajorLayout(),
                        t = {
                            keypadTop: e.keypad.top,
                            keypadWidth: e.keypad.width,
                            keypadHeight: e.keypad.height,
                            showToLeft: e.grapher.height < 525
                        };
                    if (!p.isEqual(t, this.__popoverCache)) {
                        this.__popoverCache = t;
                        var n = u(this.containerElt),
                            r = n.find("[dcg-command=functions]"),
                            i = n.find(".dcg-functions-popover"),
                            o = n.find(".dcg-arrow");
                        if (t.showToLeft) {
                            i.removeClass("dcg-top").addClass("dcg-left");
                            var a = t.keypadHeight - (r.offset().top - n.offset().top),
                                s = a - r.outerHeight() / 2 - 2 - 10;
                            o.css({
                                left: "auto",
                                bottom: s
                            })
                        } else i.removeClass("dcg-left").addClass("dcg-top"), o.css({
                            left: i.width() - r.width() / 2,
                            bottom: "auto"
                        })
                    }
                }, t
            }(i.default);
        t.default = g
    }), define("loadcss!pillboxes", function() {}), define("main/graphpaper-branding-view", ["require", "exports", "tslib", "dcgview", "loadcss!pillboxes"], function(e, t, n, r) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var i = r.Components.SwitchUnion,
            o = function(e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return n.__extends(t, e), t.prototype.template = function() {
                    var e = this;
                    return this.controller = this.props.controller(), i(function() {
                        return e.controller.getBrandingMode()
                    }, {
                        "static-edit-link": function() {
                            return r.createElement("div", {
                                class: r.const("dcg-graphpaper-branding")
                            }, r.createElement("a", {
                                href: function() {
                                    return e.controller.getEditLink()
                                },
                                target: r.const("_blank")
                            }, r.createElement("span", {
                                class: r.const("dcg-powered-by"),
                                "aria-label": function() {
                                    return e.controller.t("Edit graph on Desmos")
                                }
                            }, function() {
                                return e.controller.t("edit graph on")
                            }), r.createElement("i", {
                                class: r.const("dcg-icon-desmos")
                            })))
                        },
                        "edit-link": function() {
                            return r.createElement("div", {
                                class: r.const("dcg-graphpaper-branding")
                            }, r.createElement("span", {
                                class: r.const("dcg-edit-branding"),
                                onTap: function() {
                                    return e.controller.dispatch({
                                        type: "open-on-web"
                                    })
                                }
                            }, r.createElement("span", {
                                class: r.const("dcg-powered-by"),
                                "aria-label": function() {
                                    return e.controller.t("Edit graph on Desmos")
                                }
                            }, function() {
                                return e.controller.t("edit graph on")
                            }), r.createElement("i", {
                                class: r.const("dcg-icon-desmos")
                            })))
                        },
                        "powered-by": function() {
                            return r.createElement("div", {
                                class: r.const("dcg-graphpaper-branding dcg-unclickable")
                            }, r.createElement("span", {
                                class: r.const("dcg-powered-by"),
                                "aria-label": function() {
                                    return e.controller.t("Powered by Desmos")
                                }
                            }, function() {
                                return e.controller.t("powered by")
                            }), r.createElement("i", {
                                class: r.const("dcg-icon-desmos")
                            }))
                        }
                    })
                }, t
            }(r.Class);
        t.default = o
    }), define("loadcss!main/settings-view", function() {}), define("main/settings-view", ["require", "exports", "tslib", "keys", "scroll_helpers", "lib/tooltip", "dcgview", "dcgview-helpers/static-mathquill-view", "dcgview-helpers/mathquill-view", "jquery", "graphing-calc/json/graph-settings", "lib/evaluate-single-expression", "graphing/viewport", "dcgview-helpers/checkbox", "main/manage-focus-helper", "loadcss!./settings-view"], function(e, t, n, r, i, o, a, s, l, c, u, p, d, h, f) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var m = a.Components,
            g = m.Input,
            y = m.If,
            v = function(e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return n.__extends(t, e), t.prototype.template = function() {
                    var e = this;
                    return a.createElement(l.default, {
                        isFocused: function() {
                            return e.props.parent().getFocusedLimit() === e.props.limit()
                        },
                        latex: function() {
                            return e.props.parent().getLimitLatex(e.props.limit())
                        },
                        capExpressionSize: function() {
                            return e.props.parent().getCapExpressionSize()
                        },
                        config: this.const({}),
                        getAriaLabel: function() {
                            return e.props.ariaLabel()
                        },
                        getAriaPostLabel: this.const(""),
                        onUserChangedLatex: function(t) {
                            return e.props.parent().setLimitLatex(e.props.limit(), t)
                        },
                        onFocusedChanged: function(t) {
                            return e.props.parent().onFocusedChanged(e.props.limit(), t)
                        },
                        hasError: this.const(!1),
                        selectOnFocus: this.const(!0)
                    }, a.createElement("span", {
                        class: function() {
                            return {
                                "dcg-math-field": !0,
                                "dcg-math-input": !0,
                                "dcg-invalid": e.props.parent().isLimitInvalid(e.props.limit()),
                                "dcg-focus": e.props.parent().getFocusedLimit() === e.props.limit()
                            }
                        },
                        "data-dcg-limit": function() {
                            return e.props.limit()
                        }
                    }))
                }, t
            }(a.Class),
            b = function(e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return n.__extends(t, e), t.prototype.template = function() {
                    var e = this;
                    return this.controller = this.props.controller(), a.createElement("div", {
                        class: a.const("dcg-settings-view-container")
                    }, a.createElement(o.Tooltip, {
                        tooltip: function() {
                            return e.controller.t("Graph Settings")
                        },
                        gravity: this.const("w")
                    }, a.createElement("div", {
                        class: a.const("dcg-btn-flat-gray dcg-settings-pillbox dcg-action-settings"),
                        role: a.const("button"),
                        tabindex: a.const("0"),
                        "aria-haspopup": a.const("true"),
                        "aria-expanded": function() {
                            return e.controller.isGraphSettingsOpen()
                        },
                        "aria-label": function() {
                            return e.controller.t("Graph Settings")
                        },
                        onTap: this.bindFn(this.onTapSettingsButton),
                        manageFocus: this.const(f.manageFocusHelper({
                            controller: this.controller,
                            location: {
                                type: "settings",
                                location: "icon"
                            }
                        })),
                        style: function() {
                            return {
                                background: e.controller.getPillboxBackgroundColor()
                            }
                        }
                    }, a.createElement("i", {
                        class: a.const("dcg-icon-wrench"),
                        "aria-hidden": a.const("true")
                    }))), a.createElement(y, {
                        predicate: function() {
                            return e.controller.isGraphSettingsOpen()
                        }
                    }, function() {
                        return a.createElement("div", {
                            class: a.const("dcg-settings-container dcg-left dcg-popover dcg-constrained-height-popover"),
                            style: e.bindFn(e.getContainerStyle),
                            didMount: e.bindFn(e.didMountContainer)
                        }, a.createElement("div", {
                            class: a.const("dcg-popover-interior"),
                            role: a.const("complementary"),
                            "aria-label": a.const("Graph Settings")
                        }, a.createElement("div", {
                            class: function() {
                                return {
                                    "dcg-modern-btn": !0,
                                    "dcg-action-projectormode": !0,
                                    "dcg-active": e.getProjectorMode()
                                }
                            },
                            role: a.const("button"),
                            tabindex: a.const("0"),
                            "aria-label": function() {
                                return e.controller.t("Projector Mode")
                            },
                            "aria-pressed": e.bindFn(e.getProjectorMode),
                            onTap: e.bindFn(e.toggleProjectorMode),
                            manageFocus: e.const(f.manageFocusHelper({
                                controller: e.controller,
                                location: {
                                    type: "settings",
                                    location: "projector-mode"
                                }
                            }))
                        }, function() {
                            return e.controller.t("Projector Mode")
                        }), a.createElement("div", {
                            class: a.const("dcg-top-section-flex")
                        }, a.createElement("div", {
                            class: a.const("dcg-grid-settings")
                        }, a.createElement(h.Checkbox, {
                            ariaLabel: function() {
                                return e.controller.t("Grid")
                            },
                            onChange: e.bindFn(e.toggleGrid),
                            checked: e.bindFn(e.getShowGrid),
                            green: e.const(!0)
                        }, function() {
                            return e.controller.t("Grid")
                        }), a.createElement(y, {
                            predicate: e.bindFn(e.getShowGrid)
                        }, function() {
                            return a.createElement("div", {
                                class: a.const("dcg-circle-icon-group dcg-grid-group")
                            }, a.createElement("div", {
                                class: function() {
                                    return {
                                        "dcg-circle-icon": !0,
                                        "dcg-action-cartesian": !0,
                                        "dcg-active": !e.getPolarMode()
                                    }
                                },
                                role: a.const("button"),
                                tabindex: a.const("0"),
                                ariaPressed: function() {
                                    return !e.getPolarMode()
                                },
                                "aria-label": function() {
                                    return e.controller.t("Cartesian Grid")
                                },
                                onTap: e.bindFn(e.setCartesianMode)
                            }), a.const(" "), a.createElement("div", {
                                class: function() {
                                    return {
                                        "dcg-circle-icon": !0,
                                        "dcg-action-polar": !0,
                                        "dcg-active": e.getPolarMode()
                                    }
                                },
                                role: a.const("button"),
                                tabindex: a.const("0"),
                                ariaPressed: function() {
                                    return e.getPolarMode()
                                },
                                "aria-label": function() {
                                    return e.controller.t("Polar Grid")
                                },
                                onTap: e.bindFn(e.setPolarMode)
                            }))
                        }), a.createElement(h.Checkbox, {
                            ariaLabel: function() {
                                return e.controller.t("Arrows")
                            },
                            onChange: e.bindFn(e.toggleArrows),
                            checked: function() {
                                return e.getAxisArrowMode() !== u.AxisArrowModes.NONE
                            },
                            green: e.const(!0)
                        }, function() {
                            return e.controller.t("Arrows")
                        }), a.createElement(y, {
                            predicate: function() {
                                return e.getAxisArrowMode() !== u.AxisArrowModes.NONE
                            }
                        }, function() {
                            return a.createElement("div", {
                                class: a.const("dcg-circle-icon-group dcg-arrow-group")
                            }, a.createElement("div", {
                                role: a.const("button"),
                                tabindex: a.const("0"),
                                class: function() {
                                    return {
                                        "dcg-circle-icon": !0,
                                        "dcg-arrows": !0,
                                        "dcg-active": e.getAxisArrowMode() === u.AxisArrowModes.BOTH
                                    }
                                },
                                "dcg-arrows": a.const("BOTH"),
                                "aria-label": function() {
                                    return e.controller.t("Show Both")
                                },
                                "aria-pressed": function() {
                                    return e.getAxisArrowMode() === u.AxisArrowModes.BOTH
                                },
                                onTap: function() {
                                    return e.setAxisArrowMode(u.AxisArrowModes.BOTH)
                                }
                            }, a.createElement("i", {
                                class: a.const("dcg-icon-arrows-two")
                            })), a.const(" "), a.createElement("div", {
                                role: a.const("button"),
                                tabindex: a.const("0"),
                                class: function() {
                                    return {
                                        "dcg-circle-icon": !0,
                                        "dcg-arrows": !0,
                                        "dcg-active": e.getAxisArrowMode() === u.AxisArrowModes.POSITIVE
                                    }
                                },
                                "dcg-arrows": a.const("POSITIVE"),
                                "aria-label": function() {
                                    return e.controller.t("Show Positive")
                                },
                                "aria-pressed": function() {
                                    return e.getAxisArrowMode() === u.AxisArrowModes.POSITIVE
                                },
                                onTap: function() {
                                    return e.setAxisArrowMode(u.AxisArrowModes.POSITIVE)
                                }
                            }, a.createElement("i", {
                                class: a.const("dcg-icon-arrows-one")
                            })))
                        })), a.createElement("div", {
                            class: a.const("dcg-top-checkboxes-container")
                        }, a.createElement(h.Checkbox, {
                            ariaLabel: function() {
                                return e.controller.t("Axis Numbers")
                            },
                            onChange: e.bindFn(e.toggleAxisNumbers),
                            checked: e.bindFn(e.getAxisNumbers),
                            small: e.const(!0),
                            green: e.const(!0)
                        }, function() {
                            return e.controller.t("Axis Numbers")
                        }), a.createElement(y, {
                            predicate: function() {
                                return e.getShowGrid() && !e.getPolarMode()
                            }
                        }, function() {
                            return a.createElement(h.Checkbox, {
                                ariaLabel: function() {
                                    return e.controller.t("Minor Gridlines")
                                },
                                onChange: e.bindFn(e.toggleMinorGridlines),
                                checked: e.bindFn(e.getMinorGridlines),
                                small: e.const(!0),
                                green: e.const(!0)
                            }, function() {
                                return e.controller.t("Minor Gridlines")
                            })
                        }), a.createElement(y, {
                            predicate: function() {
                                return e.controller.canUseAdvancedStyling() && !e.getPolarMode()
                            }
                        }, function() {
                            return a.createElement(h.Checkbox, {
                                checked: function() {
                                    return e.controller.getGraphSettings().restrictGridToFirstQuadrant
                                },
                                ariaLabel: e.const("One Quadrant"),
                                onChange: function(t) {
                                    return e.controller.dispatch({
                                        type: "set-graph-settings",
                                        restrictGridToFirstQuadrant: t
                                    })
                                },
                                small: e.const(!0),
                                green: e.const(!0)
                            }, a.const("One Quadrant"))
                        }), a.createElement(y, {
                            predicate: function() {
                                return !e.getSquareAxes()
                            }
                        }, function() {
                            return a.createElement("div", {
                                role: a.const("button"),
                                tabindex: a.const("0"),
                                class: a.const("dcg-action-zoom-square dcg-btn-light-gray"),
                                onTap: e.bindFn(e.zoomSquare)
                            }, function() {
                                return e.controller.t("Zoom Square")
                            })
                        }))), a.createElement("div", {
                            class: a.const("dcg-section-divider"),
                            "aria-hidden": a.const("true")
                        }), a.createElement("div", {
                            class: a.const("dcg-checkbox-title dcg-x-axis-title")
                        }, a.createElement(h.Checkbox, {
                            ariaLabel: function() {
                                return e.controller.t("X-Axis")
                            },
                            onChange: e.bindFn(e.toggleXAxis),
                            checked: e.bindFn(e.getShowXAxis),
                            green: e.const(!0)
                        }, function() {
                            return e.controller.t("X-Axis")
                        }), a.createElement(g, {
                            class: e.const("dcg-axis-label dcg-x-axis-label"),
                            placeholder: function() {
                                return e.controller.t("add a label")
                            },
                            "aria-label": function() {
                                return e.controller.t("add x-axis label")
                            },
                            disabled: function() {
                                return !e.getShowXAxis() || void 0
                            },
                            "aria-disabled": function() {
                                return !e.getShowXAxis() || void 0
                            },
                            onInput: e.bindFn(e.onXAxisLabelInput),
                            value: e.bindFn(e.getXAxisLabel)
                        })), a.createElement("div", {
                            class: a.const("dcg-editable-mathquill-container dcg-x-axis-options")
                        }, a.createElement(v, {
                            limit: e.const("xmin"),
                            ariaLabel: function() {
                                return e.controller.t("X Axis Minimum: ")
                            },
                            parent: e.const(e)
                        }), a.createElement(s.default, {
                            latex: e.const("\\le x\\le")
                        }, a.createElement("span", {
                            class: a.const("dcg-interval-interior")
                        })), a.createElement(v, {
                            limit: e.const("xmax"),
                            ariaLabel: function() {
                                return e.controller.t("X Axis Maximum: ")
                            },
                            parent: e.const(e)
                        }), a.createElement(y, {
                            predicate: function() {
                                return !e.getPolarMode()
                            }
                        }, function() {
                            return a.createElement("span", {
                                class: a.const("dcg-step-container")
                            }, a.createElement("span", {
                                class: a.const("dcg-step-label"),
                                "aria-hidden": a.const("true")
                            }, function() {
                                return e.controller.t("Step:")
                            }), a.createElement(v, {
                                limit: e.const("xstep"),
                                ariaLabel: function() {
                                    return e.controller.t("X Axis Step Size: ")
                                },
                                parent: e.const(e)
                            }))
                        })), a.createElement("div", {
                            class: a.const("dcg-checkbox-title dcg-y-axis-title")
                        }, a.createElement(h.Checkbox, {
                            ariaLabel: function() {
                                return e.controller.t("Y-Axis")
                            },
                            onChange: e.bindFn(e.toggleYAxis),
                            checked: e.bindFn(e.getShowYAxis),
                            green: e.const(!0)
                        }, function() {
                            return e.controller.t("Y-Axis")
                        }), a.createElement(g, {
                            class: e.const("dcg-axis-label dcg-y-axis-label"),
                            placeholder: function() {
                                return e.controller.t("add a label")
                            },
                            "aria-label": function() {
                                return e.controller.t("add y-axis label")
                            },
                            disabled: function() {
                                return !e.getShowYAxis() || void 0
                            },
                            "aria-disabled": function() {
                                return !e.getShowYAxis() || void 0
                            },
                            onInput: e.bindFn(e.onYAxisLabelInput),
                            value: e.bindFn(e.getYAxisLabel)
                        })), a.createElement("div", {
                            class: a.const("dcg-editable-mathquill-container dcg-y-axis-options")
                        }, a.createElement(v, {
                            limit: e.const("ymin"),
                            ariaLabel: function() {
                                return e.controller.t("Y Axis Minimum: ")
                            },
                            parent: e.const(e)
                        }), a.createElement(s.default, {
                            latex: e.const("\\le y\\le")
                        }, a.createElement("span", {
                            class: a.const("dcg-interval-interior")
                        })), a.createElement(v, {
                            limit: e.const("ymax"),
                            ariaLabel: function() {
                                return e.controller.t("Y Axis Maximum: ")
                            },
                            parent: e.const(e)
                        }), a.createElement(y, {
                            predicate: function() {
                                return !e.getPolarMode()
                            }
                        }, function() {
                            return a.createElement("span", {
                                class: a.const("dcg-step-container")
                            }, a.createElement("span", {
                                class: a.const("dcg-step-label"),
                                "aria-hidden": a.const("true")
                            }, function() {
                                return e.controller.t("Step:")
                            }), a.createElement(v, {
                                limit: e.const("ystep"),
                                ariaLabel: function() {
                                    return e.controller.t("Y Axis Step Size: ")
                                },
                                parent: e.const(e)
                            }))
                        })), a.createElement("div", {
                            class: a.const("dcg-section-divider"),
                            "aria-hidden": a.const("true")
                        }), a.createElement("div", {
                            class: a.const("dcg-radiangroup"),
                            role: a.const("group"),
                            "aria-label": function() {
                                return e.controller.t("Angle Settings")
                            }
                        }, a.createElement("div", {
                            class: function() {
                                return {
                                    "dcg-action-radianmode": !0,
                                    "dcg-modern-btn": !0,
                                    "dcg-active": !e.getDegreeMode()
                                }
                            },
                            "aria-pressed": function() {
                                return !e.getDegreeMode()
                            },
                            role: a.const("button"),
                            tabindex: a.const("0"),
                            "aria-label": function() {
                                return e.controller.t("Radians")
                            },
                            onTap: e.bindFn(e.setRadianMode)
                        }, function() {
                            return e.controller.t("Radians")
                        }), a.createElement("div", {
                            class: function() {
                                return {
                                    "dcg-action-degreemode": !0,
                                    "dcg-modern-btn": !0,
                                    "dcg-active": e.getDegreeMode()
                                }
                            },
                            "aria-pressed": e.bindFn(e.getDegreeMode),
                            role: a.const("button"),
                            tabindex: a.const("0"),
                            "aria-label": function() {
                                return e.controller.t("Degrees")
                            },
                            onTap: e.bindFn(e.setDegreeMode),
                            manageFocus: e.const(f.manageFocusHelper({
                                controller: e.controller,
                                location: {
                                    type: "settings",
                                    location: "degree-mode"
                                }
                            }))
                        }, function() {
                            return e.controller.t("Degrees")
                        })), a.createElement("div", {
                            class: a.const("dcg-arrow")
                        })))
                    }))
                }, t.prototype.didMountContainer = function(e) {
                    var t = this;
                    this.node = e, c(document).on("dcg-tapstart.settings-view wheel.settings-view", function(e) {
                        t.eventShouldClosePopover(e) && t.controller.dispatch({
                            type: "close-graph-settings",
                            focusIconAfterClose: "keyboard" === e.device
                        })
                    }), c(document).on("keydown.settings-view", function(e) {
                        if ("Esc" === r.lookup(e) && t.controller.dispatch({
                                type: "close-graph-settings",
                                focusIconAfterClose: !0
                            }), t.controller.isGraphSettingsOpen() && "Tab" === r.lookup(e) && !e.altKey && !e.metaKey && !e.ctrlKey) {
                            var n = t.controller.getFocusLocation();
                            if (!n || "settings" !== n.type) return;
                            e.shiftKey || "degree-mode" !== n.location ? e.shiftKey && "icon" === n.location && (t.controller.dispatch({
                                type: "set-focus-location",
                                location: {
                                    type: "settings",
                                    location: "degree-mode"
                                }
                            }), e.preventDefault(), e.stopPropagation()) : (t.controller.dispatch({
                                type: "set-focus-location",
                                location: {
                                    type: "settings",
                                    location: "icon"
                                }
                            }), e.preventDefault(), e.stopPropagation())
                        }
                    })
                }, t.prototype.didUnmount = function() {
                    c(document).off(".settings-view")
                }, t.prototype.didUpdate = function() {
                    if (this.controller.isGraphSettingsOpen()) {
                        var e = this.controller.getKeypadHeight();
                        e !== this.cachedKeypadHeight && document.activeElement && c(document.activeElement).closest(this.node).length && i.scrollVisible(c(document.activeElement), c(this.node).find(".dcg-popover-interior"), 50), this.cachedKeypadHeight = e
                    }
                }, t.prototype.eventShouldClosePopover = function(e) {
                    var t = c(e.target),
                        n = !!t.closest(this.node).length,
                        r = !!t.closest(".dcg-action-settings").length,
                        i = this.isMathquillFocused() && t.closest(".dcg-keypad").length,
                        o = !!t.closest(".dcg-action-undo").length || !!t.closest(".dcg-action-redo").length;
                    return !(n || r || i || o)
                }, t.prototype.onTapSettingsButton = function(e) {
                    this.controller.dispatch({
                        type: "toggle-graph-settings",
                        focusOnOpen: "keyboard" === e.device
                    })
                }, t.prototype.isMathquillFocused = function() {
                    return void 0 !== this.getFocusedLimit()
                }, t.prototype.getLimitLatex = function(e) {
                    return this.controller.getSettingsViewModel().limitLatex[e]
                }, t.prototype.setLimitLatex = function(e, t) {
                    t !== this.controller.getSettingsViewModel().limitLatex[e] && this.controller.dispatch({
                        type: "set-axis-limit-latex",
                        limit: e,
                        latex: t
                    })
                }, t.prototype.getFocusedLimit = function() {
                    var e = this.controller.getFocusLocation();
                    if (e && "settings" === e.type) return e.location
                }, t.prototype.getInvalidLimits = function() {
                    var e = !!this.controller.getGraphSettings().degreeMode,
                        t = p.default(this.getLimitLatex("xmin"), e),
                        n = p.default(this.getLimitLatex("xmax"), e),
                        r = p.default(this.getLimitLatex("ymin"), e),
                        i = p.default(this.getLimitLatex("ymax"), e),
                        o = "" === this.getLimitLatex("xstep") ? 0 : p.default(this.getLimitLatex("xstep"), e),
                        a = "" === this.getLimitLatex("ystep") ? 0 : p.default(this.getLimitLatex("ystep"), e),
                        s = {},
                        l = new d.Viewport(t, n, r, i);
                    return isFinite(t) && isFinite(n) ? (s.xmin = !l.isXValid(), s.xmax = s.xmin) : (s.xmin = !isFinite(t), s.xmax = !isFinite(n)), isFinite(r) && isFinite(i) ? (s.ymin = !l.isYValid(), s.ymax = s.ymin) : (s.ymin = !isFinite(r), s.ymax = !isFinite(i)), s.xstep = !isFinite(o) || o < 0, s.ystep = !isFinite(a) || a < 0, s
                }, t.prototype.isLimitInvalid = function(e) {
                    return this.getInvalidLimits()[e]
                }, t.prototype.onFocusedChanged = function(e, t) {
                    t ? this.controller.dispatch({
                        type: "set-focus-location",
                        location: {
                            type: "settings",
                            location: e
                        }
                    }) : this.controller.dispatch({
                        type: "blur-focus-location",
                        location: {
                            type: "settings",
                            location: e
                        }
                    })
                }, t.prototype.onXAxisLabelInput = function(e) {
                    this.controller.dispatch({
                        type: "set-graph-settings",
                        xAxisLabel: e
                    })
                }, t.prototype.onYAxisLabelInput = function(e) {
                    this.controller.dispatch({
                        type: "set-graph-settings",
                        yAxisLabel: e
                    })
                }, t.prototype.getXAxisLabel = function() {
                    return this.controller.getGraphSettings().xAxisLabel
                }, t.prototype.getYAxisLabel = function() {
                    return this.controller.getGraphSettings().yAxisLabel
                }, t.prototype.getShowXAxis = function() {
                    return !!this.controller.getGraphSettings().showXAxis
                }, t.prototype.toggleXAxis = function() {
                    this.controller.dispatch({
                        type: "set-graph-settings",
                        showXAxis: !this.getShowXAxis()
                    })
                }, t.prototype.getShowYAxis = function() {
                    return !!this.controller.getGraphSettings().showYAxis
                }, t.prototype.toggleYAxis = function() {
                    this.controller.dispatch({
                        type: "set-graph-settings",
                        showYAxis: !this.getShowYAxis()
                    })
                }, t.prototype.getAxisNumbers = function() {
                    return !!this.controller.getGraphSettings().xAxisNumbers
                }, t.prototype.toggleAxisNumbers = function() {
                    var e = this.getAxisNumbers();
                    this.controller.dispatch({
                        type: "set-graph-settings",
                        xAxisNumbers: !e,
                        yAxisNumbers: !e,
                        polarNumbers: !e
                    })
                }, t.prototype.getMinorGridlines = function() {
                    return 0 === this.controller.getGraphSettings().xAxisMinorSubdivisions
                }, t.prototype.toggleMinorGridlines = function() {
                    var e = this.getMinorGridlines() ? 1 : 0;
                    this.controller.dispatch({
                        type: "set-graph-settings",
                        yAxisMinorSubdivisions: e,
                        xAxisMinorSubdivisions: e
                    })
                }, t.prototype.getPolarMode = function() {
                    return !!this.controller.getGraphSettings().polarMode
                }, t.prototype.setPolarMode = function() {
                    this.controller.dispatch({
                        type: "set-graph-settings",
                        polarMode: !0
                    })
                }, t.prototype.setCartesianMode = function() {
                    this.controller.dispatch({
                        type: "set-graph-settings",
                        polarMode: !1
                    })
                }, t.prototype.getDegreeMode = function() {
                    return !!this.controller.getGraphSettings().degreeMode
                }, t.prototype.setRadianMode = function() {
                    this.controller.dispatch({
                        type: "set-graph-settings",
                        degreeMode: !1
                    })
                }, t.prototype.setDegreeMode = function() {
                    this.controller.dispatch({
                        type: "set-graph-settings",
                        degreeMode: !0
                    })
                }, t.prototype.getProjectorMode = function() {
                    return !!this.controller.getGraphSettings().config.projectorMode
                }, t.prototype.toggleProjectorMode = function() {
                    this.controller.getGraphSettings().config.setProperty("projectorMode", !this.getProjectorMode())
                }, t.prototype.getAxisArrowMode = function() {
                    return this.controller.getGraphSettings().xAxisArrowMode
                }, t.prototype.setAxisArrowMode = function(e) {
                    this.controller.dispatch({
                        type: "set-graph-settings",
                        xAxisArrowMode: e,
                        yAxisArrowMode: e
                    })
                }, t.prototype.getShowGrid = function() {
                    return this.controller.getGraphSettings().showGrid
                }, t.prototype.toggleGrid = function() {
                    this.controller.dispatch({
                        type: "set-graph-settings",
                        showGrid: !this.getShowGrid()
                    })
                }, t.prototype.toggleArrows = function() {
                    var e = this.getAxisArrowMode() === u.AxisArrowModes.NONE ? u.AxisArrowModes.BOTH : u.AxisArrowModes.NONE;
                    this.controller.dispatch({
                        type: "set-graph-settings",
                        xAxisArrowMode: e,
                        yAxisArrowMode: e
                    })
                }, t.prototype.getSquareAxes = function() {
                    return !!this.controller.getGraphSettings().squareAxes
                }, t.prototype.getContainerStyle = function() {
                    return this.controller.getKeypadHeight() ? "bottom: 0" : ""
                }, t.prototype.zoomSquare = function() {
                    this.controller.dispatch({
                        type: "zoom",
                        direction: "square"
                    })
                }, t.prototype.getCapExpressionSize = function() {
                    return !!this.controller.getGraphSettings().config.capExpressionSize
                }, t
            }(a.Class);
        t.default = b
    }), define("main/zoom-buttons-view", ["require", "exports", "tslib", "dcgview", "lib/tooltip", "loadcss!pillboxes"], function(e, t, n, r, i) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var o = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.init = function() {
                this.controller = this.props.controller()
            }, t.prototype.template = function() {
                var e = this;
                return r.createElement("div", {
                    class: r.const("dcg-zoom-container")
                }, r.createElement("div", {
                    class: r.const("dcg-zoominout-pillbox dcg-btn-flat-gray dcg-btn-flat-gray-group"),
                    style: function() {
                        return {
                            background: e.controller.getPillboxBackgroundColor()
                        }
                    }
                }, r.createElement(i.Tooltip, {
                    tooltip: function() {
                        return e.controller.t("Zoom In")
                    },
                    gravity: this.const("w")
                }, r.createElement("div", {
                    class: r.const("dcg-action-zoomin"),
                    role: r.const("button"),
                    tabindex: r.const("0"),
                    "aria-label": function() {
                        return e.controller.t("Zoom In")
                    },
                    onTap: this.bindFn(this.zoomIn),
                    style: function() {
                        return {
                            background: e.controller.getPillboxBackgroundColor()
                        }
                    }
                }, r.createElement("i", {
                    class: r.const("dcg-icon dcg-icon-plus"),
                    "aria-hidden": r.const("true")
                }))), r.createElement(i.Tooltip, {
                    tooltip: function() {
                        return e.controller.t("Zoom Out")
                    },
                    gravity: this.const("w")
                }, r.createElement("div", {
                    class: r.const("dcg-option dcg-action-zoomout dcg-tooltip-e"),
                    tooltip: function() {
                        return e.controller.t("Zoom Out")
                    },
                    role: r.const("button"),
                    tabindex: r.const("0"),
                    "aria-label": function() {
                        return e.controller.t("Zoom Out")
                    },
                    onTap: this.bindFn(this.zoomOut),
                    style: function() {
                        return {
                            background: e.controller.getPillboxBackgroundColor()
                        }
                    }
                }, r.createElement("i", {
                    class: r.const("dcg-icon dcg-icon-minus"),
                    "aria-hidden": r.const("true")
                })))), r.createElement(i.Tooltip, {
                    tooltip: function() {
                        return e.controller.t("Default Zoom")
                    },
                    gravity: this.const("w")
                }, r.createElement("div", {
                    class: function() {
                        return {
                            "dcg-btn-flat-gray": !0,
                            "dcg-option": !0,
                            "dcg-action-zoomrestore": !0,
                            "dcg-disabled": e.getZoomedDefault()
                        }
                    },
                    "aria-disabled": this.bindFn(this.getZoomedDefault),
                    role: r.const("button"),
                    tabindex: r.const("0"),
                    "aria-label": function() {
                        return e.controller.t("Restore Default Zoom")
                    },
                    onTap: this.bindFn(this.zoomRestore),
                    style: function() {
                        return {
                            background: e.controller.getPillboxBackgroundColor()
                        }
                    }
                }, r.createElement("i", {
                    class: r.const("dcg-icon dcg-icon-home"),
                    "aria-hidden": r.const("true")
                }))))
            }, t.prototype.zoomIn = function() {
                this.controller.dispatch({
                    type: "zoom",
                    direction: "in"
                })
            }, t.prototype.zoomOut = function() {
                this.controller.dispatch({
                    type: "zoom",
                    direction: "out"
                })
            }, t.prototype.zoomRestore = function() {
                this.controller.dispatch({
                    type: "zoom",
                    direction: "default"
                })
            }, t.prototype.getZoomedDefault = function() {
                return this.controller.getGraphSettings().zoomedDefault
            }, t
        }(r.Class);
        t.default = o
    }), define("main/reset-button-view", ["require", "exports", "tslib", "dcgview", "lib/tooltip", "loadcss!pillboxes"], function(e, t, n, r, i) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var o = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.init = function() {
                this.controller = this.props.controller()
            }, t.prototype.template = function() {
                var e = this;
                return r.createElement("div", {
                    class: r.const("dcg-reset-container")
                }, r.createElement(i.Tooltip, {
                    tooltip: function() {
                        return e.controller.t("Reset")
                    },
                    gravity: this.const("w")
                }, r.createElement("div", {
                    class: r.const("dcg-reset-pillbox dcg-action-reset dcg-btn-flat-gray"),
                    role: r.const("button"),
                    tabindex: r.const("0"),
                    "aria-label": function() {
                        return e.controller.t("Reset")
                    },
                    onTap: this.bindFn(this.reset),
                    style: function() {
                        return {
                            background: e.controller.getPillboxBackgroundColor()
                        }
                    }
                }, r.createElement("i", {
                    class: r.const("dcg-icon dcg-icon-reset"),
                    "aria-hidden": r.const("true")
                }))))
            }, t.prototype.reset = function() {
                this.controller.dispatch({
                    type: "reset-graph"
                })
            }, t
        }(r.Class);
        t.default = o
    }), define("main/pillbox-view", ["require", "exports", "tslib", "dcgview", "./graphpaper-branding-view", "./settings-view", "./zoom-buttons-view", "./reset-button-view", "loadcss!pillboxes"], function(e, t, n, r, i, o, a, s) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var l = r.Components.If,
            c = function(e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return n.__extends(t, e), t.prototype.init = function() {
                    this.controller = this.props.controller()
                }, t.prototype.template = function() {
                    var e = this;
                    return r.createElement("div", null, r.createElement(l, {
                        predicate: this.bindFn(this.shouldShowContainer)
                    }, function() {
                        return r.createElement("div", {
                            class: r.const("dcg-pillbox-container"),
                            role: r.const("group"),
                            "aria-label": function() {
                                return e.controller.t("Graph Settings Controls")
                            }
                        }, r.createElement("div", {
                            class: r.const("dcg-overgraph-pillbox-elements"),
                            style: e.bindFn(e.getContainerStyle)
                        }, r.createElement(l, {
                            predicate: e.bindFn(e.shouldShowSettings)
                        }, function() {
                            return r.createElement(o.default, {
                                controller: e.props.controller
                            })
                        }), r.createElement(l, {
                            predicate: e.bindFn(e.shouldShowResetButton)
                        }, function() {
                            return r.createElement(s.default, {
                                controller: e.props.controller
                            })
                        }), r.createElement(l, {
                            predicate: e.bindFn(e.shouldShowZoomButtons)
                        }, function() {
                            return r.createElement(a.default, {
                                controller: e.props.controller
                            })
                        })))
                    }), r.createElement(i.default, {
                        controller: function() {
                            return e.props.controller()
                        }
                    }))
                }, t.prototype.getContainerStyle = function() {
                    var e = this.controller.isKeypadOpen() ? this.controller.getKeypadHeight() : 0;
                    return this.controller.isGraphSettingsOpen() ? "bottom: " + e + "px;" : "bottom: auto"
                }, t.prototype.shouldShowContainer = function() {
                    return this.shouldShowSettings() || this.shouldShowZoomButtons() || this.shouldShowResetButton()
                }, t.prototype.shouldShowSettings = function() {
                    return this.controller.getGraphSettings().config.settingsMenu
                }, t.prototype.shouldShowZoomButtons = function() {
                    return this.controller.getGraphSettings().config.zoomButtons
                }, t.prototype.shouldShowResetButton = function() {
                    return this.controller.getGraphSettings().config.showResetButtonOnGraphpaper && this.controller.hasDefaultState()
                }, t
            }(r.Class);
        t.default = c
    }), define("loadcss!main/toast-view", function() {}), define("main/toast-view", ["require", "exports", "tslib", "dcgview", "loadcss!./toast-view"], function(e, t, n, r) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var i = r.Components.If,
            o = function(e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return n.__extends(t, e), t.prototype.template = function() {
                    var e = this;
                    return r.createElement("span", {
                        class: r.const("dcg-toast")
                    }, r.createElement("i", {
                        class: r.const("dcg-icon-error")
                    }), r.createElement(i, {
                        predicate: function() {
                            return !e.props.showUndo() && (!e.props.showClose || e.props.showClose())
                        }
                    }, function() {
                        return r.createElement("i", {
                            class: r.const("dcg-icon-remove"),
                            onTap: function() {
                                return e.props.onClose && e.props.onClose()
                            },
                            role: r.const("link"),
                            tabindex: r.const(0),
                            "aria-label": r.const("Dismiss Notice")
                        })
                    }), r.createElement("span", {
                        class: r.const("dcg-msg"),
                        "aria-atomic": function() {
                            return !e.props.noAria()
                        },
                        "aria-live": function() {
                            return e.props.noAria() ? "" : "assertive"
                        }
                    }, function() {
                        return e.props.t(e.props.message())
                    }), r.createElement(i, {
                        predicate: this.props.showUndo
                    }, function() {
                        return r.createElement("a", {
                            role: r.const("link"),
                            tabindex: r.const(0),
                            class: r.const("dcg-undo"),
                            onTap: function() {
                                return e.props.onUndo && e.props.onUndo()
                            }
                        }, function() {
                            return e.props.t("Undo")
                        })
                    }), r.createElement(i, {
                        predicate: this.props.showLearnMore
                    }, function() {
                        return r.createElement("a", {
                            role: r.const("link"),
                            tabindex: r.const(0),
                            class: r.const("dcg-learn-more-link"),
                            target: r.const("_blank"),
                            onTap: function() {
                                return e.props.onLearnMore && e.props.onLearnMore()
                            }
                        }, function() {
                            return e.props.t("Learn more")
                        })
                    }), r.createElement(i, {
                        predicate: function() {
                            return !!e.props.link && !!e.props.link()
                        }
                    }, function() {
                        return r.createElement("a", {
                            role: r.const("link"),
                            tabindex: r.const(0),
                            class: r.const("dcg-learn-more-link"),
                            target: r.const("_blank"),
                            href: function() {
                                return e.props.link().url
                            }
                        }, function() {
                            return e.props.link().text
                        })
                    }))
                }, t.prototype.shouldUpdate = function() {
                    return !!this.props.message()
                }, t
            }(r.Class),
            a = function(e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return n.__extends(t, e), t.prototype.template = function() {
                    var e = this;
                    return r.createElement("div", {
                        class: function() {
                            return {
                                "dcg-toast-view": !0,
                                "dcg-visible": !!e.props.message()
                            }
                        },
                        "toast-style": function() {
                            return e.props.toastStyle && e.props.toastStyle()
                        }
                    }, r.createElement(i, {
                        predicate: function() {
                            return !!e.props.message()
                        }
                    }, function() {
                        return r.createElement("div", {
                            class: r.const("dcg-toast-wrapper")
                        }, r.createElement("div", {
                            class: r.const("dcg-toast-cover")
                        }), r.createElement(o, n.__assign({}, e.props)))
                    }))
                }, t
            }(r.Class);
        t.ToastView = a
    }), define("main/disable-dragdrop-events", ["require", "exports"], function(e, t) {
        "use strict";

        function n(e) {
            e.on("drag dragend dragenter dragover dragleave drop", function(e) {
                e.preventDefault(), e.stopPropagation()
            })
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = n
    }), define("graphing-calc/views/main", ["require", "exports", "tslib", "touchtracking", "ipad.scrollfix", "dcgview", "jquery", "../../expressions/list-view", "graphing-calc/keypads/main", "main/pillbox-view", "main/toast-view", "main/disable-dragdrop-events", "lib/tooltip"], function(e, t, n, r, i, o, a, s, l, c, u, p, d) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var h = o.Components.If,
            f = function(e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return n.__extends(t, e), t.prototype.init = function() {
                    this.controller = this.props.controller()
                }, t.prototype.settings = function() {
                    return this.controller.getGraphSettings()
                }, t.prototype.template = function() {
                    var e = this;
                    return o.createElement("div", {
                        class: o.const("dcg-calculator-api-container"),
                        style: o.const("width: 100%; height: 100%; position: relative;")
                    }, o.createElement("div", {
                        class: function() {
                            return {
                                "dcg-container": !0,
                                "dcg-fullscreen": !e.controller.isListVisible(),
                                "dcg-narrow": e.controller.isNarrow(),
                                "dcg-PROJECTOR-MODE": e.settings().config.projectorMode,
                                "dcg-inverted-colors": !!e.settings().config.invertedColors,
                                "dcg-EDIT-LIST-MODE": e.controller.isInEditListMode(),
                                "dcg-no-graphpaper": !e.settings().config.graphpaper,
                                "dcg-no-branding": !e.settings().config.branding,
                                "dcg-no-expression-topbar": !e.settings().config.expressionsTopbar,
                                "dcg-default-border": !!e.settings().config.border,
                                "dcg-no-hyperlinks": !e.settings().config.links,
                                "dcg-has-background-color": e.controller.hasBackgroundColor()
                            }
                        },
                        style: function() {
                            return {
                                "font-size": e.settings().config.fontSize + "px",
                                background: e.getContainerBackgroundColor(),
                                color: e.controller.getTextColor()
                            }
                        },
                        role: o.const("application"),
                        "aria-label": function() {
                            return e.controller.t("Desmos Graphing Calculator")
                        },
                        "x-ms-format-detection": o.const("none"),
                        didMount: this.bindFn(this.didMountRoot)
                    }, o.createElement(h, {
                        predicate: function() {
                            return e.controller.getGraphSettings().config.expressions
                        }
                    }, function() {
                        return o.createElement(s.default, {
                            controller: e.props.controller
                        })
                    }), o.createElement(h, {
                        predicate: function() {
                            return e.controller.isListEnabled() && !e.controller.isListVisible()
                        }
                    }, function() {
                        return o.createElement("div", {
                            class: function() {
                                return {
                                    "dcg-overgraph-icon-container": !0,
                                    "dcg-bottom-right": e.controller.isNarrow()
                                }
                            }
                        }, o.createElement(d.Tooltip, {
                            tooltip: function() {
                                return e.controller.t("Show List")
                            },
                            gravity: function() {
                                return e.controller.isNarrow() ? "nw" : "se"
                            }
                        }, o.createElement("div", {
                            class: function() {
                                return {
                                    "dcg-show-expressions-tab": !0,
                                    "dcg-overgraph-icon": !0,
                                    "dcg-rotated": e.controller.isNarrow()
                                }
                            },
                            "aria-label": function() {
                                return e.controller.t("Show List")
                            },
                            role: o.const("button"),
                            tabindex: o.const("0"),
                            onTap: function() {
                                return e.controller.dispatch({
                                    type: "show-expressions-list"
                                })
                            }
                        }, o.createElement("i", {
                            class: o.const("dcg-icon-show")
                        }))))
                    }), o.createElement(h, {
                        predicate: this.bindFn(this.showHamburger)
                    }, function() {
                        return o.createElement("div", {
                            class: o.const("dcg-overgraph-icon-container")
                        }, o.createElement(d.Tooltip, {
                            tooltip: function() {
                                return e.controller.t("Open Graph")
                            },
                            gravity: e.const("se")
                        }, o.createElement("div", {
                            role: o.const("button"),
                            "aria-label": function() {
                                return e.controller.t("Open Graph")
                            },
                            class: o.const("dcg-action-opendrawer dcg-in-api-action-opendrawer dcg-overgraph-icon"),
                            onTap: function() {
                                return e.controller.dispatch({
                                    type: "open-drawer"
                                })
                            }
                        }, o.createElement("i", {
                            class: o.const("dcg-icon-hamburger")
                        }))))
                    }), o.createElement(c.default, {
                        controller: this.props.controller
                    }), o.createElement(u.ToastView, {
                        message: function() {
                            var t = e.controller.getToastData().message;
                            return t || ""
                        },
                        link: function() {
                            return e.controller.getToastData().link || void 0
                        },
                        showUndo: function() {
                            return !!e.controller.getToastData().undoCallback
                        },
                        showLearnMore: function() {
                            return !!e.controller.getToastData().learnMoreCallback
                        },
                        noAria: function() {
                            return !!e.controller.getToastData().noAria
                        },
                        toastStyle: function() {
                            return e.controller.getToastData().toastStyle
                        },
                        t: this.controller.t,
                        onUndo: function() {
                            return e.controller.dispatch({
                                type: "toast/undo"
                            })
                        },
                        onLearnMore: function() {
                            return e.controller.dispatch({
                                type: "toast/learn-more"
                            })
                        },
                        onClose: function() {
                            return e.controller.dispatch({
                                type: "toast/close"
                            })
                        }
                    }), o.createElement("div", {
                        class: o.const("dcg-grapher")
                    }), o.createElement(h, {
                        predicate: function() {
                            return e.controller.getGraphSettings().config.keypad
                        }
                    }, function() {
                        return o.createElement(l.default, {
                            controller: e.props.controller
                        })
                    })))
                }, t.prototype.showHamburger = function() {
                    return !!this.controller.getGraphSettings().config.showHamburger && (!this.controller.isInEditListMode() && this.controller.isNarrow())
                }, t.prototype.getContainerBackgroundColor = function() {
                    return this.controller.hasTransparentBackground() ? "none" : this.controller.getBackgroundColor()
                }, t.prototype.didMountRoot = function(e) {
                    r.monitor(e), this.controller.getGraphSettings().config.disableScrollFix || i.limitScrollOnElement(e), this.setupFileDragDrop(e)
                }, t.prototype.setupFileDragDrop = function(e) {
                    function t() {
                        i = a(), r.off(".filedraggedover"), o.controller.dispatch({
                            type: "file-is-not-dragged-over"
                        })
                    }
                    var n = this,
                        r = a(e);
                    p.default(r);
                    var i = a(),
                        o = this;
                    r.on("dragenter", function(e) {
                        n.controller.areImagesEnabled() && (0 === i.length && r.on("dcg-tapstart.filedraggedover", t), i = i.add(e.target), n.controller.dispatch({
                            type: "file-is-dragged-over"
                        }))
                    }).on("dragleave", function(e) {
                        i = i.not(e.target), 0 === i.length && t()
                    }).on("drop", t)
                }, t
            }(o.Class);
        t.default = f
    }), define("worker/workerpoolconnection", ["require", "pjs", "underscore_model"], function(e) {
        return e("pjs")(e("underscore_model").UnderscoreModel, function(e, t) {
            e.init = function(e) {
                t.init.call(this), this.workerPool = e, this.worker = e.allocateWorker(), this.worker.__connections[this.guid] = this
            }, e.destroy = function() {
                this.sendMessage({
                    type: "destroy"
                }), delete this.worker.__connections[this.guid]
            }, e.killWorker = function() {
                this.worker.__isFake || this.workerPool.killWorker(this.worker)
            }, e.onWorkerKilled = function() {}, e.onResponse = function(e) {}, e.sendMessage = function(e) {
                this.worker.__isFake ? this.worker.postMessage(e) : this.worker.postMessage({
                    connectionId: this.guid,
                    originalMessage: e
                })
            }
        })
    }), define("text!worker_src_underlying", [], function() {
        return 'var requirejs,require,define;!function(e){function t(e,t){return y.call(e,t)}function r(e,t){var r,n,i,a,s,o,u,c,l,p,f=t&&t.split("/"),h=m.map,d=h&&h["*"]||{};if(e&&"."===e.charAt(0))if(t){for(f=f.slice(0,f.length-1),e=f.concat(e.split("/")),c=0;c<e.length;c+=1)if("."===(p=e[c]))e.splice(c,1),c-=1;else if(".."===p){if(1===c&&(".."===e[2]||".."===e[0]))break;c>0&&(e.splice(c-1,2),c-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((f||d)&&h){for(r=e.split("/"),c=r.length;c>0;c-=1){if(n=r.slice(0,c).join("/"),f)for(l=f.length;l>0;l-=1)if((i=h[f.slice(0,l).join("/")])&&(i=i[n])){a=i,s=c;break}if(a)break;!o&&d&&d[n]&&(o=d[n],u=c)}!a&&o&&(a=o,s=u),a&&(r.splice(0,s,a),e=r.join("/"))}return e}function n(t,r){return function(){return l.apply(e,v.call(arguments,0).concat([t,r]))}}function i(e){return function(t){return r(t,e)}}function a(e){return function(t){h[e]=t}}function s(r){if(t(d,r)){var n=d[r];delete d[r],g[r]=!0,c.apply(e,n)}if(!t(h,r)&&!t(g,r))throw new Error("No "+r);return h[r]}function o(e){var t,r=e?e.indexOf("!"):-1;return r>-1&&(t=e.substring(0,r),e=e.substring(r+1,e.length)),[t,e]}function u(e){return function(){return m&&m.config&&m.config[e]||{}}}var c,l,p,f,h={},d={},m={},g={},y=Object.prototype.hasOwnProperty,v=[].slice;p=function(e,t){var n,a=o(e),u=a[0];return e=a[1],u&&(u=r(u,t),n=s(u)),u?e=n&&n.normalize?n.normalize(e,i(t)):r(e,t):(e=r(e,t),a=o(e),u=a[0],e=a[1],u&&(n=s(u))),{f:u?u+"!"+e:e,n:e,pr:u,p:n}},f={require:function(e){return n(e)},exports:function(e){var t=h[e];return void 0!==t?t:h[e]={}},module:function(e){return{id:e,uri:"",exports:h[e],config:u(e)}}},c=function(r,i,o,u){var c,l,m,y,v,b,x=[];if(u=u||r,"function"==typeof o){for(i=!i.length&&o.length?["require","exports","module"]:i,v=0;v<i.length;v+=1)if(y=p(i[v],u),"require"===(l=y.f))x[v]=f.require(r);else if("exports"===l)x[v]=f.exports(r),b=!0;else if("module"===l)c=x[v]=f.module(r);else if(t(h,l)||t(d,l)||t(g,l))x[v]=s(l);else{if(!y.p)throw new Error(r+" missing "+l);y.p.load(y.n,n(u,!0),a(l),{}),x[v]=h[l]}m=o.apply(h[r],x),r&&(c&&c.exports!==e&&c.exports!==h[r]?h[r]=c.exports:m===e&&b||(h[r]=m))}else r&&(h[r]=o)},requirejs=require=l=function(t,r,n,i,a){return"string"==typeof t?f[t]?f[t](r):s(p(t,r).f):(t.splice||(m=t,r.splice?(t=r,r=n,n=null):t=e),r=r||function(){},"function"==typeof n&&(n=i,i=a),i?c(e,t,r,n):setTimeout(function(){c(e,t,r,n)},4),l)},l.config=function(e){return m=e,m.deps&&l(m.deps,m.callback),l},define=function(e,r,n){r.splice||(n=r,r=[]),t(h,e)||t(d,e)||(d[e]=[e,r,n])},define.amd={jQuery:!0}}(),"undefined"!=typeof ALMOND_OVERRIDES&&ALMOND_OVERRIDES&&(define=ALMOND_OVERRIDES.define||define,require=ALMOND_OVERRIDES.require||require,requirejs=ALMOND_OVERRIDES.requirejs||requirejs),define("vendor/almond",function(){}),define("testbridge",["require"],function(e){function t(){window.consoleOverride=!0;var e=window.console.log;window.console.log=function(){for(var t=[],r=0;r<arguments.length;r++)t.push(arguments[r]);e.apply(window.console,[].concat([t.join(" ")],t))}}var r={ready:function(){try{window.TestBridge=r,parent.USING_SELENIUM&&t()}catch(e){}}};return r}),define("console",["require"],function(e){var t=function(){},r=["log","info","warn","error","assert","dir","clear","profile","profileEnd","time","timeEnd","group","groupCollapsed","groupEnd","trace"],n={},i=function(e){"undefined"!=typeof window&&window.console&&window.console[e]?n[e]=function(){Function.prototype.apply.call(window.console[e],window.console,arguments)}:n[e]=t};return r.forEach(i),n}),define("pjs",[],function(){return function(e,t,r){function n(e){return"object"==typeof e}function i(e){return"function"==typeof e}function a(){}function s(o,u){function c(){var e=new l;return i(e.init)&&e.init.apply(e,arguments),e}function l(){}u===r&&(u=o,o=Object),c.Bare=l;var p,f=a[e]=o[e],h=l[e]=c[e]=new a;return h.constructor=c,c.mixin=function(t){return l[e]=c[e]=s(c,t)[e],c},(c.open=function(e){if(p={},i(e)?p=e.call(c,h,f,c,o):n(e)&&(p=e),n(p))for(var r in p)t.call(p,r)&&(h[r]=p[r]);return i(h.init)||(h.init=o),c})(u)}return s}("prototype",{}.hasOwnProperty)}),function(){function e(e){function t(t,r,n,i,a,s){for(;a>=0&&a<s;a+=e){var o=i?i[a]:a;n=r(n,t[o],o,t)}return n}return function(r,n,i,a){n=b(n,a,4);var s=!D(r)&&v.keys(r),o=(s||r).length,u=e>0?0:o-1;return arguments.length<3&&(i=r[s?s[u]:u],u+=e),t(r,n,i,s,u,o)}}function t(e){return function(t,r,n){r=x(r,n);for(var i=w(t),a=e>0?0:i-1;a>=0&&a<i;a+=e)if(r(t[a],a,t))return a;return-1}}function r(e,t,r){return function(n,i,a){var s=0,o=w(n);if("number"==typeof a)e>0?s=a>=0?a:Math.max(a+o,s):o=a>=0?Math.min(a+1,o):a+o+1;else if(r&&a&&o)return a=r(n,i),n[a]===i?a:-1;if(i!==i)return a=t(l.call(n,s,o),v.isNaN),a>=0?a+s:-1;for(a=e>0?s:o-1;a>=0&&a<o;a+=e)if(n[a]===i)return a;return-1}}function n(e,t){var r=O.length,n=e.constructor,i=v.isFunction(n)&&n.prototype||o,a="constructor";for(v.has(e,a)&&!v.contains(t,a)&&t.push(a);r--;)(a=O[r])in e&&e[a]!==i[a]&&!v.contains(t,a)&&t.push(a)}var i=this,a=i._,s=Array.prototype,o=Object.prototype,u=Function.prototype,c=s.push,l=s.slice,p=o.toString,f=o.hasOwnProperty,h=Array.isArray,d=Object.keys,m=u.bind,g=Object.create,y=function(){},v=function(e){return e instanceof v?e:this instanceof v?void(this._wrapped=e):new v(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=v),exports._=v):i._=v,v.VERSION="1.8.3";var b=function(e,t,r){if(void 0===t)return e;switch(null==r?3:r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)};case 4:return function(r,n,i,a){return e.call(t,r,n,i,a)}}return function(){return e.apply(t,arguments)}},x=function(e,t,r){return null==e?v.identity:v.isFunction(e)?b(e,t,r):v.isObject(e)?v.matcher(e):v.property(e)};v.iteratee=function(e,t){return x(e,t,1/0)};var _=function(e,t){return function(r){var n=arguments.length;if(n<2||null==r)return r;for(var i=1;i<n;i++)for(var a=arguments[i],s=e(a),o=s.length,u=0;u<o;u++){var c=s[u];t&&void 0!==r[c]||(r[c]=a[c])}return r}},S=function(e){if(!v.isObject(e))return{};if(g)return g(e);y.prototype=e;var t=new y;return y.prototype=null,t},M=function(e){return function(t){return null==t?void 0:t[e]}},E=Math.pow(2,53)-1,w=M("length"),D=function(e){var t=w(e);return"number"==typeof t&&t>=0&&t<=E};v.each=v.forEach=function(e,t,r){t=b(t,r);var n,i;if(D(e))for(n=0,i=e.length;n<i;n++)t(e[n],n,e);else{var a=v.keys(e);for(n=0,i=a.length;n<i;n++)t(e[a[n]],a[n],e)}return e},v.map=v.collect=function(e,t,r){t=x(t,r);for(var n=!D(e)&&v.keys(e),i=(n||e).length,a=Array(i),s=0;s<i;s++){var o=n?n[s]:s;a[s]=t(e[o],o,e)}return a},v.reduce=v.foldl=v.inject=e(1),v.reduceRight=v.foldr=e(-1),v.find=v.detect=function(e,t,r){var n;if(void 0!==(n=D(e)?v.findIndex(e,t,r):v.findKey(e,t,r))&&-1!==n)return e[n]},v.filter=v.select=function(e,t,r){var n=[];return t=x(t,r),v.each(e,function(e,r,i){t(e,r,i)&&n.push(e)}),n},v.reject=function(e,t,r){return v.filter(e,v.negate(x(t)),r)},v.every=v.all=function(e,t,r){t=x(t,r);for(var n=!D(e)&&v.keys(e),i=(n||e).length,a=0;a<i;a++){var s=n?n[a]:a;if(!t(e[s],s,e))return!1}return!0},v.some=v.any=function(e,t,r){t=x(t,r);for(var n=!D(e)&&v.keys(e),i=(n||e).length,a=0;a<i;a++){var s=n?n[a]:a;if(t(e[s],s,e))return!0}return!1},v.contains=v.includes=v.include=function(e,t,r,n){return D(e)||(e=v.values(e)),("number"!=typeof r||n)&&(r=0),v.indexOf(e,t,r)>=0},v.invoke=function(e,t){var r=l.call(arguments,2),n=v.isFunction(t);return v.map(e,function(e){var i=n?t:e[t];return null==i?i:i.apply(e,r)})},v.pluck=function(e,t){return v.map(e,v.property(t))},v.where=function(e,t){return v.filter(e,v.matcher(t))},v.findWhere=function(e,t){return v.find(e,v.matcher(t))},v.max=function(e,t,r){var n,i,a=-1/0,s=-1/0;if(null==t&&null!=e){e=D(e)?e:v.values(e);for(var o=0,u=e.length;o<u;o++)(n=e[o])>a&&(a=n)}else t=x(t,r),v.each(e,function(e,r,n){((i=t(e,r,n))>s||i===-1/0&&a===-1/0)&&(a=e,s=i)});return a},v.min=function(e,t,r){var n,i,a=1/0,s=1/0;if(null==t&&null!=e){e=D(e)?e:v.values(e);for(var o=0,u=e.length;o<u;o++)(n=e[o])<a&&(a=n)}else t=x(t,r),v.each(e,function(e,r,n){((i=t(e,r,n))<s||i===1/0&&a===1/0)&&(a=e,s=i)});return a},v.shuffle=function(e){for(var t,r=D(e)?e:v.values(e),n=r.length,i=Array(n),a=0;a<n;a++)t=v.random(0,a),t!==a&&(i[a]=i[t]),i[t]=r[a];return i},v.sample=function(e,t,r){return null==t||r?(D(e)||(e=v.values(e)),e[v.random(e.length-1)]):v.shuffle(e).slice(0,Math.max(0,t))},v.sortBy=function(e,t,r){return t=x(t,r),v.pluck(v.map(e,function(e,r,n){return{value:e,index:r,criteria:t(e,r,n)}}).sort(function(e,t){var r=e.criteria,n=t.criteria;if(r!==n){if(r>n||void 0===r)return 1;if(r<n||void 0===n)return-1}return e.index-t.index}),"value")};var T=function(e){return function(t,r,n){var i={};return r=x(r,n),v.each(t,function(n,a){var s=r(n,a,t);e(i,n,s)}),i}};v.groupBy=T(function(e,t,r){v.has(e,r)?e[r].push(t):e[r]=[t]}),v.indexBy=T(function(e,t,r){e[r]=t}),v.countBy=T(function(e,t,r){v.has(e,r)?e[r]++:e[r]=1}),v.toArray=function(e){return e?v.isArray(e)?l.call(e):D(e)?v.map(e,v.identity):v.values(e):[]},v.size=function(e){return null==e?0:D(e)?e.length:v.keys(e).length},v.partition=function(e,t,r){t=x(t,r);var n=[],i=[];return v.each(e,function(e,r,a){(t(e,r,a)?n:i).push(e)}),[n,i]},v.first=v.head=v.take=function(e,t,r){if(null!=e)return null==t||r?e[0]:v.initial(e,e.length-t)},v.initial=function(e,t,r){return l.call(e,0,Math.max(0,e.length-(null==t||r?1:t)))},v.last=function(e,t,r){if(null!=e)return null==t||r?e[e.length-1]:v.rest(e,Math.max(0,e.length-t))},v.rest=v.tail=v.drop=function(e,t,r){return l.call(e,null==t||r?1:t)},v.compact=function(e){return v.filter(e,v.identity)};var P=function(e,t,r,n){for(var i=[],a=0,s=n||0,o=w(e);s<o;s++){var u=e[s];if(D(u)&&(v.isArray(u)||v.isArguments(u))){t||(u=P(u,t,r));var c=0,l=u.length;for(i.length+=l;c<l;)i[a++]=u[c++]}else r||(i[a++]=u)}return i};v.flatten=function(e,t){return P(e,t,!1)},v.without=function(e){return v.difference(e,l.call(arguments,1))},v.uniq=v.unique=function(e,t,r,n){v.isBoolean(t)||(n=r,r=t,t=!1),null!=r&&(r=x(r,n));for(var i=[],a=[],s=0,o=w(e);s<o;s++){var u=e[s],c=r?r(u,s,e):u;t?(s&&a===c||i.push(u),a=c):r?v.contains(a,c)||(a.push(c),i.push(u)):v.contains(i,u)||i.push(u)}return i},v.union=function(){return v.uniq(P(arguments,!0,!0))},v.intersection=function(e){for(var t=[],r=arguments.length,n=0,i=w(e);n<i;n++){var a=e[n];if(!v.contains(t,a)){for(var s=1;s<r&&v.contains(arguments[s],a);s++);s===r&&t.push(a)}}return t},v.difference=function(e){var t=P(arguments,!0,!0,1);return v.filter(e,function(e){return!v.contains(t,e)})},v.zip=function(){return v.unzip(arguments)},v.unzip=function(e){for(var t=e&&v.max(e,w).length||0,r=Array(t),n=0;n<t;n++)r[n]=v.pluck(e,n);return r},v.object=function(e,t){for(var r={},n=0,i=w(e);n<i;n++)t?r[e[n]]=t[n]:r[e[n][0]]=e[n][1];return r},v.findIndex=t(1),v.findLastIndex=t(-1),v.sortedIndex=function(e,t,r,n){r=x(r,n,1);for(var i=r(t),a=0,s=w(e);a<s;){var o=Math.floor((a+s)/2);r(e[o])<i?a=o+1:s=o}return a},v.indexOf=r(1,v.findIndex,v.sortedIndex),v.lastIndexOf=r(-1,v.findLastIndex),v.range=function(e,t,r){null==t&&(t=e||0,e=0),r=r||1;for(var n=Math.max(Math.ceil((t-e)/r),0),i=Array(n),a=0;a<n;a++,e+=r)i[a]=e;return i};var I=function(e,t,r,n,i){if(!(n instanceof t))return e.apply(r,i);var a=S(e.prototype),s=e.apply(a,i);return v.isObject(s)?s:a};v.bind=function(e,t){if(m&&e.bind===m)return m.apply(e,l.call(arguments,1));if(!v.isFunction(e))throw new TypeError("Bind must be called on a function");var r=l.call(arguments,2),n=function(){return I(e,n,t,this,r.concat(l.call(arguments)))};return n},v.partial=function(e){var t=l.call(arguments,1),r=function(){for(var n=0,i=t.length,a=Array(i),s=0;s<i;s++)a[s]=t[s]===v?arguments[n++]:t[s];for(;n<arguments.length;)a.push(arguments[n++]);return I(e,r,this,this,a)};return r},v.bindAll=function(e){var t,r,n=arguments.length;if(n<=1)throw new Error("bindAll must be passed function names");for(t=1;t<n;t++)r=arguments[t],e[r]=v.bind(e[r],e);return e},v.memoize=function(e,t){var r=function(n){var i=r.cache,a=""+(t?t.apply(this,arguments):n);return v.has(i,a)||(i[a]=e.apply(this,arguments)),i[a]};return r.cache={},r},v.delay=function(e,t){var r=l.call(arguments,2);return setTimeout(function(){return e.apply(null,r)},t)},v.defer=v.partial(v.delay,v,1),v.throttle=function(e,t,r){var n,i,a,s=null,o=0;r||(r={});var u=function(){o=!1===r.leading?0:v.now(),s=null,a=e.apply(n,i),s||(n=i=null)};return function(){var c=v.now();o||!1!==r.leading||(o=c);var l=t-(c-o);return n=this,i=arguments,l<=0||l>t?(s&&(clearTimeout(s),s=null),o=c,a=e.apply(n,i),s||(n=i=null)):s||!1===r.trailing||(s=setTimeout(u,l)),a}},v.debounce=function(e,t,r){var n,i,a,s,o,u=function(){var c=v.now()-s;c<t&&c>=0?n=setTimeout(u,t-c):(n=null,r||(o=e.apply(a,i),n||(a=i=null)))};return function(){a=this,i=arguments,s=v.now();var c=r&&!n;return n||(n=setTimeout(u,t)),c&&(o=e.apply(a,i),a=i=null),o}},v.wrap=function(e,t){return v.partial(t,e)},v.negate=function(e){return function(){return!e.apply(this,arguments)}},v.compose=function(){var e=arguments,t=e.length-1;return function(){for(var r=t,n=e[t].apply(this,arguments);r--;)n=e[r].call(this,n);return n}},v.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},v.before=function(e,t){var r;return function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=null),r}},v.once=v.partial(v.before,2);var C=!{toString:null}.propertyIsEnumerable("toString"),O=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];v.keys=function(e){if(!v.isObject(e))return[];if(d)return d(e);var t=[];for(var r in e)v.has(e,r)&&t.push(r);return C&&n(e,t),t},v.allKeys=function(e){if(!v.isObject(e))return[];var t=[];for(var r in e)t.push(r);return C&&n(e,t),t},v.values=function(e){for(var t=v.keys(e),r=t.length,n=Array(r),i=0;i<r;i++)n[i]=e[t[i]];return n},v.mapObject=function(e,t,r){t=x(t,r);for(var n,i=v.keys(e),a=i.length,s={},o=0;o<a;o++)n=i[o],s[n]=t(e[n],n,e);return s},v.pairs=function(e){for(var t=v.keys(e),r=t.length,n=Array(r),i=0;i<r;i++)n[i]=[t[i],e[t[i]]];return n},v.invert=function(e){for(var t={},r=v.keys(e),n=0,i=r.length;n<i;n++)t[e[r[n]]]=r[n];return t},v.functions=v.methods=function(e){var t=[];for(var r in e)v.isFunction(e[r])&&t.push(r);return t.sort()},v.extend=_(v.allKeys),v.extendOwn=v.assign=_(v.keys),v.findKey=function(e,t,r){t=x(t,r);for(var n,i=v.keys(e),a=0,s=i.length;a<s;a++)if(n=i[a],t(e[n],n,e))return n},v.pick=function(e,t,r){var n,i,a={},s=e;if(null==s)return a;v.isFunction(t)?(i=v.allKeys(s),n=b(t,r)):(i=P(arguments,!1,!1,1),n=function(e,t,r){return t in r},s=Object(s));for(var o=0,u=i.length;o<u;o++){var c=i[o],l=s[c];n(l,c,s)&&(a[c]=l)}return a},v.omit=function(e,t,r){if(v.isFunction(t))t=v.negate(t);else{var n=v.map(P(arguments,!1,!1,1),String);t=function(e,t){return!v.contains(n,t)}}return v.pick(e,t,r)},v.defaults=_(v.allKeys,!0),v.create=function(e,t){var r=S(e);return t&&v.extendOwn(r,t),r},v.clone=function(e){return v.isObject(e)?v.isArray(e)?e.slice():v.extend({},e):e},v.tap=function(e,t){return t(e),e},v.isMatch=function(e,t){var r=v.keys(t),n=r.length;if(null==e)return!n;for(var i=Object(e),a=0;a<n;a++){var s=r[a];if(t[s]!==i[s]||!(s in i))return!1}return!0};var A=function(e,t,r,n){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof v&&(e=e._wrapped),t instanceof v&&(t=t._wrapped);var i=p.call(e);if(i!==p.call(t))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t}var a="[object Array]"===i;if(!a){if("object"!=typeof e||"object"!=typeof t)return!1;var s=e.constructor,o=t.constructor;if(s!==o&&!(v.isFunction(s)&&s instanceof s&&v.isFunction(o)&&o instanceof o)&&"constructor"in e&&"constructor"in t)return!1}r=r||[],n=n||[];for(var u=r.length;u--;)if(r[u]===e)return n[u]===t;if(r.push(e),n.push(t),a){if((u=e.length)!==t.length)return!1;for(;u--;)if(!A(e[u],t[u],r,n))return!1}else{var c,l=v.keys(e);if(u=l.length,v.keys(t).length!==u)return!1;for(;u--;)if(c=l[u],!v.has(t,c)||!A(e[c],t[c],r,n))return!1}return r.pop(),n.pop(),!0};v.isEqual=function(e,t){return A(e,t)},v.isEmpty=function(e){return null==e||(D(e)&&(v.isArray(e)||v.isString(e)||v.isArguments(e))?0===e.length:0===v.keys(e).length)},v.isElement=function(e){return!(!e||1!==e.nodeType)},v.isArray=h||function(e){return"[object Array]"===p.call(e)},v.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},v.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){v["is"+e]=function(t){return p.call(t)==="[object "+e+"]"}}),v.isArguments(arguments)||(v.isArguments=function(e){return v.has(e,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(v.isFunction=function(e){return"function"==typeof e||!1}),v.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},v.isNaN=function(e){return v.isNumber(e)&&e!==+e},v.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"===p.call(e)},v.isNull=function(e){return null===e},v.isUndefined=function(e){return void 0===e},v.has=function(e,t){return null!=e&&f.call(e,t)},v.noConflict=function(){return i._=a,this},v.identity=function(e){return e},v.constant=function(e){return function(){return e}},v.noop=function(){},v.property=M,v.propertyOf=function(e){return null==e?function(){}:function(t){return e[t]}},v.matcher=v.matches=function(e){return e=v.extendOwn({},e),function(t){return v.isMatch(t,e)}},v.times=function(e,t,r){var n=Array(Math.max(0,e));t=b(t,r,1);for(var i=0;i<e;i++)n[i]=t(i);return n},v.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},v.now=Date.now||function(){return(new Date).getTime()};var L={"&":"&amp;","<":"&lt;",">":"&gt;",\'"\':"&quot;","\'":"&#x27;","`":"&#x60;"},N=v.invert(L),q=function(e){var t=function(t){return e[t]},r="(?:"+v.keys(e).join("|")+")",n=RegExp(r),i=RegExp(r,"g");return function(e){return e=null==e?"":""+e,n.test(e)?e.replace(i,t):e}};v.escape=q(L),v.unescape=q(N),v.result=function(e,t,r){var n=null==e?void 0:e[t];return void 0===n&&(n=r),v.isFunction(n)?n.call(e):n};var F=0;v.uniqueId=function(e){var t=++F+"";return e?e+t:t},v.templateSettings={evaluate:/<%([\\s\\S]+?)%>/g,interpolate:/<%=([\\s\\S]+?)%>/g,escape:/<%-([\\s\\S]+?)%>/g};var k=/(.)^/,V={"\'":"\'","\\\\":"\\\\","\\r":"r","\\n":"n","\\u2028":"u2028","\\u2029":"u2029"},B=/\\\\|\'|\\r|\\n|\\u2028|\\u2029/g,R=function(e){return"\\\\"+V[e]};v.template=function(e,t,r){!t&&r&&(t=r),t=v.defaults({},t,v.templateSettings);var n=RegExp([(t.escape||k).source,(t.interpolate||k).source,(t.evaluate||k).source].join("|")+"|$","g"),i=0,a="__p+=\'";e.replace(n,function(t,r,n,s,o){return a+=e.slice(i,o).replace(B,R),i=o+t.length,r?a+="\'+\\n((__t=("+r+"))==null?\'\':_.escape(__t))+\\n\'":n?a+="\'+\\n((__t=("+n+"))==null?\'\':__t)+\\n\'":s&&(a+="\';\\n"+s+"\\n__p+=\'"),t}),a+="\';\\n",t.variable||(a="with(obj||{}){\\n"+a+"}\\n"),a="var __t,__p=\'\',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,\'\');};\\n"+a+"return __p;\\n";try{var s=new Function(t.variable||"obj","_",a)}catch(e){throw e.source=a,e}var o=function(e){return s.call(this,e,v)};return o.source="function("+(t.variable||"obj")+"){\\n"+a+"}",o},v.chain=function(e){var t=v(e);return t._chain=!0,t};var j=function(e,t){return e._chain?v(t).chain():t};v.mixin=function(e){v.each(v.functions(e),function(t){var r=v[t]=e[t];v.prototype[t]=function(){var e=[this._wrapped];return c.apply(e,arguments),j(this,r.apply(v,e))}})},v.mixin(v),v.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=s[e];v.prototype[e]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!==e&&"splice"!==e||0!==r.length||delete r[0],j(this,r)}}),v.each(["concat","join","slice"],function(e){var t=s[e];v.prototype[e]=function(){return j(this,t.apply(this._wrapped,arguments))}}),v.prototype.value=function(){return this._wrapped},v.prototype.valueOf=v.prototype.toJSON=v.prototype.value,v.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return v})}.call(this),define("math/distance",["require","exports"],function(e,t){"use strict";function r(e,t){return e>0==t>0?e+.5*(t-e):.5*(e+t)}function n(e,t,r,n){return e*r+t*n}function i(e,r,i,a,s,o){var u=t.hypot(s-i,o-a);return 0===u?0:n((e-i)/u,(r-a)/u,(s-i)/u,(o-a)/u)}function a(e,t,r,n,a,s){var o=i(e,t,r,n,a,s);return o<=0?[r,n]:o>=1?[a,s]:[r+o*(a-r),n+o*(s-n)]}function s(e,r,n,i,s,o){var u=a(e,r,n,i,s,o);return t.hypot(e-u[0],r-u[1])}function o(e,t,r){if(void 0===r&&(r=1),r>50)throw new Error("Within "+(52-r)+" bits isn\'t really approximate any more");var n=Math.max(Math.max(Math.abs(e),Math.abs(t)),1);return n===n+(1===r?.5:Math.pow(.5,r))*Math.abs(t-e)}Object.defineProperty(t,"__esModule",{value:!0}),t.hypot=Math.hypot||function(e,t){if(0===e&&0===t)return 0;if(Math.abs(e)>Math.abs(t)){var r=t/e;return Math.abs(e)*Math.sqrt(r*r+1)}var r=e/t;return Math.abs(t)*Math.sqrt(r*r+1)},t.mean=r,t.pointToSegmentParameter=i,t.closestPointOnSegment=a,t.pointToSegment=s,t.approx=o}),define("lib/console",["require","exports","console"],function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.log=r.log,t.warn=r.warn}),define("math/poi-type",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.INTERSECTION=1001,t.ZERO=1002,t.INTERCEPT=1003,t.EXTREMUM=1004,t.EDGE=1005,t.DEFINITION=1006,t.TRACE=1007,t.LABEL=1008}),define("math/poi",["require","exports","./distance","lib/console","./poi-type"],function(e,t,r,n,i){"use strict";function a(e,t){var n;e>t&&(n=e,e=t,t=n);var i=e>0,a=t>0,s=Math.abs(e)>.01,o=Math.abs(t)>.01;if(s||o)return r.mean(e,t);if(0===e)return t*Math.abs(t);if(0===t)return e*Math.abs(e);if(i!==a)return 0;var u=i?Math.sqrt(e*t):-Math.sqrt(e*t);return u>=e&&t>=u?u:r.mean(e,t)}function s(e,t,r,i,s){if(isNaN(t)||isNaN(i)||t<0==i<0)return void n.log("bisectZero called with bad y values",[t,i]);for(;;){var u=a(e,r),c=s(u);if(!isFinite(c))return;if(u===e||u===r)return Math.abs(t)<=Math.abs(i)?[e,t]:[r,i];if(0===c)return o(e,t,u,c,r,i,s);t<0!=c<0?(r=u,i=c):(e=u,t=c)}}function o(e,t,r,n,i,s,o){var l;if(isFinite(n)){isFinite(t)||(l=u(e,t,r,n,o))&&(e=l[0],t=l[1]),isFinite(s)||(l=u(r,n,i,s,o))&&(i=l[0],s=l[1]);var p,f;p=t===n?[e,t]:c(e,t,r,n,o,n),f=s===n?[i,s]:c(r,n,i,s,o,n);var h;return p&&f&&(h=a(p[0],f[0])),void 0!==h?[h,o(h)]:void 0}}function u(e,t,r,i,s){if(isFinite(t)===isFinite(i))return void n.log("bisectFinite called with bad y values",[t,i]);for(;;){var o=a(e,r),u=s(o);if(o===e||o===r)return isFinite(t)?[e,t]:[r,i];isFinite(u)!==isFinite(t)?(r=o,i=u):(e=o,t=u)}}function c(e,t,r,i,s,o){if(t===o==(i===o))return void n.log("bisectConstant called with bad y values",[t,i,o]);for(;;){var u=a(e,r),c=s(u);if(u===e||u===r)return t===o?[e,t]:[r,i];c===o!=(t===o)?(r=u,i=c):(e=u,t=c)}}function l(e,t,r,i,s,u,c){if(!(e<r&&r<s))return void n.log("bisectExtremum called with bad x values",[e,r,s]);if(!(isFinite(t)&&isFinite(i)&&isFinite(u)&&t!==i&&i!==u&&i>t==i>u))return void n.log("bisectExtremum called with bad y values",[t,i,u]);for(;;){var l=a(e,r),p=c(l),f=a(r,s),h=c(f);if(!isFinite(p)||!isFinite(h))return;if(l===e||l===r||f===r||f===s)return p>i==i>t?[l,p]:h>i==i>t?[f,h]:[r,i];if(p===i||h===i)return o(e,t,r,i,s,u,c);p>t==i>t&&p>t==p>i?(s=r,u=i,r=l,i=p):h>u==i>u&&h>i==h>u?(e=r,t=i,r=f,i=h):(e=l,t=p,s=f,u=h)}}function p(e,t,r,n,i,a,s,o){var u=Math.abs(n-t),c=Math.abs(a-n),l=Math.abs(o-a);return u>c&&u>l?[[e,t],[r,n]]:l>c&&l>u?[[i,a],[s,o]]:[[r,n],[i,a]]}function f(e,t,n,i,s,o,c,l){if(l||(l=0),!((n-e)*(s-n)<=0)&&isFinite(e)&&isFinite(n)&&isFinite(s)&&isFinite(t)&&isFinite(o)){if(!isFinite(i)){var f=u(e,t,n,i,c),h=u(n,i,s,o,c);if(!f||!h)return;return[f,h]}if(!(Math.abs(i-((s-n)*t+(n-e)*o)/(s-e))<l))for(;;){var d=a(e,n),m=c(d),g=a(n,s),y=c(g),v=Math.abs(m-r.mean(t,i)),b=Math.abs(i-r.mean(m,y)),x=Math.abs(y-r.mean(i,o));if(v<=l&&b<=l&&x<=l)return;if(!isFinite(m)){var f=u(e,t,d,m,c),h=u(d,m,s,o,c);if(!f||!h)return;return[f,h]}if(!isFinite(y)){var f=u(e,t,g,y,c),h=u(g,y,s,o,c);if(!f||!h)return;return[f,h]}if(!(d!==e&&d!==n||g!==n&&g!==s))return Math.abs(i-t)>Math.abs(o-i)?[[e,t],[n,i]]:[[n,i],[s,o]];if(d===e||d===n)return p(e,t,n,i,g,y,s,o);if(g===n||g===s)return p(e,t,d,m,n,i,s,o);v>x&&v>=b?(s=n,o=i,n=d,i=m):x>v&&x>=b?(e=n,t=i,n=g,i=y):(e=d,t=m,s=g,o=y)}}}Object.defineProperty(t,"__esModule",{value:!0}),t.floatMiddle=a,t.default={bisectJump:f,bisectExtremum:l,bisectFinite:u,bisectZero:s,flatCenter:o,INTERSECTION:i.INTERSECTION,ZERO:i.ZERO,INTERCEPT:i.INTERCEPT,EXTREMUM:i.EXTREMUM,EDGE:i.EDGE,DEFINITION:i.DEFINITION,TRACE:i.TRACE,LABEL:i.LABEL}}),define("math/curve-accumulator",["require","exports","./distance"],function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){e?(this.xtolerance=e.xtolerance||e.tolerance||0,this.ytolerance=e.ytolerance||e.tolerance||0,this.map=e.map):this.xtolerance=this.ytolerance=0,this.segments=[],this.segment=[],this.pivotPoint=void 0,this.pendingPoint=void 0}return e.prototype.colinear=function(e,t,n){this.map&&(e=this.map(e),t=this.map(t),n=this.map(n));var i=r.pointToSegmentParameter(n[0],n[1],e[0],e[1],t[0],t[1]);if(i<1)return!1;var a=[e[0]+i*(t[0]-e[0]),e[1]+i*(t[1]-e[1])];return Math.abs(n[0]-a[0])<=this.xtolerance&&Math.abs(n[1]-a[1])<=this.ytolerance},e.prototype.addPoint=function(e){if(this.xtolerance<0&&this.ytolerance<0)return void this.segment.push(e[0],e[1]);if(!this.segment.length)return void this.segment.push(e[0],e[1]);var t=[this.segment[this.segment.length-2],this.segment[this.segment.length-1]];if(e[0]!==t[0]||e[1]!==t[1]){if(!this.pivotPoint||!this.pendingPoint)return this.pivotPoint=e,void(this.pendingPoint=e);(!this.colinear(t,this.pivotPoint,e)||r.hypot(t[0]-e[0],t[1]-e[1])<r.hypot(t[0]-this.pendingPoint[0],t[1]-this.pendingPoint[1]))&&(this.flushPending(),this.pivotPoint=e),this.pendingPoint=e}},e.prototype.flushPending=function(){this.pendingPoint&&(this.segment.push(this.pendingPoint[0],this.pendingPoint[1]),this.pivotPoint=void 0,this.pendingPoint=void 0)},e.prototype.breakSegment=function(){this.flushPending(),this.segment.length>2&&this.segments.push(this.segment),this.segment=[]},e.prototype.getSegments=function(){return this.breakSegment(),this.segments},e.prototype.finish=function(){return{segments:this.getSegments(),resolved:!0}},e}();t.default=n}),define("math/implicit-plotter",["require","exports","./distance","./curve-accumulator"],function(e,t,r,n){"use strict";function i(e,t){var r=a(e,t);return{segments:r.contours.strokeSegments,fillSegments:r.contours.fillSegments,resolved:r.quadTree.resolved}}function a(e,t){var r=Math.pow(2,-W),n=c(t,r),i=c(t,2*r),a=f(e,n,i),s=P(a.root,e,n);return{paddedDomain:n,rootDomain:i,quadTree:a,triangles:s,contours:j(s,e,n)}}function s(e,t,r){return{x:e,y:t,z:r}}function o(e,t,r){return{x:e,y:t,isZero:r}}function u(e,t,r){return{vertices:[e,t,r],visited:!1,next:void 0}}function c(e,t){var r=(1+t)*e.xmin-t*e.xmax,n=(1+t)*e.xmax-t*e.xmin;return{xmin:r,ymin:(1+t)*e.ymin-t*e.ymax,xmax:n,ymax:(1+t)*e.ymax-t*e.ymin,xtolerance:e.xtolerance,ytolerance:e.ytolerance}}function l(e,t){return{depth:e,vertices:t,children:void 0,center:void 0}}function p(e,t,r){e.center=E(e.vertices[0],e.vertices[1],e.vertices[2],e.vertices[3],t,r)}function f(e,t,r){var n=h(e,r),i=[],a=[];a.push(n);var s=1,o=!0;e:for(;a.length;){var u=i;i=a,a=u;for(var c=void 0;c=i.pop();)if(m(c,e,t)){if(d(c,e),!c.children){o=!1;break e}if(a.push(c.children[0]),a.push(c.children[1]),a.push(c.children[2]),a.push(c.children[3]),(s+=3)>=Y){o=!1;break e}}else p(c,e,t)}for(var l=0;l<i.length;l++)p(i[l],e,t);for(var l=0;l<a.length;l++)p(a[l],e,t);return{root:n,resolved:o}}function h(e,t){var r=t.xmin,n=t.xmax,i=t.ymin,a=t.ymax;return l(0,[_(r,a,e),_(n,a,e),_(n,i,e),_(r,i,e)])}function d(e,t){var r=e.depth+1,n=e.vertices[0],i=e.vertices[1],a=e.vertices[2],s=e.vertices[3],o=S(n,i,t),u=S(i,a,t),c=S(a,s,t),p=S(s,n,t),f=S(n,a,t);e.children=[l(r,[n,o,f,p]),l(r,[o,i,u,f]),l(r,[f,u,a,c]),l(r,[p,f,c,s])]}function m(e,t,r){if(e.depth<W)return!0;if(b(e,r))return!1;if(v(e,r))return!1;var n=e.vertices[0],i=e.vertices[1],a=e.vertices[2],s=e.vertices[3];if(isNaN(n.z)&&isNaN(i.z)&&isNaN(a.z)&&isNaN(s.z))return!1;if(isNaN(n.z)||isNaN(i.z)||isNaN(a.z)||isNaN(s.z))return!0;var o=E(n,i,a,s,t,r),u=M(n,i,t,r),c=M(i,a,t,r),l=M(a,s,t,r),p=M(s,n,t,r);return y(n,u,t)||y(i,u,t)||y(i,c,t)||y(a,c,t)||y(a,l,t)||y(s,l,t)||y(s,p,t)||y(n,p,t)||g(n,u,o,t,r)||g(u,i,o,t,r)||g(i,c,o,t,r)||g(c,a,o,t,r)||g(a,l,o,t,r)||g(l,s,o,t,r)||g(s,p,o,t,r)||g(p,n,o,t,r)}function g(e,t,n,i,a){if(e.z>0==t.z>0&&t.z>0==n.z>0)return!1;var s,o,u,c;if(e.z>0==t.z>0){if(s=S(e,t,i),s.z>0!=e.z>0)return!0;o=D(e,n,i,a),u=D(t,n,i,a),c=D(s,n,i,a)}else if(t.z>0==n.z>0){if(s=S(t,n,i),s.z>0!=t.z>0)return!0;o=D(t,e,i,a),u=D(n,e,i,a),c=D(s,e,i,a)}else{if(s=S(n,e,i),s.z>0!=n.z>0)return!0;o=D(n,t,i,a),u=D(e,t,i,a),c=D(s,t,i,a)}var l=a.xtolerance,p=a.ytolerance;return r.pointToSegment(p*c.x,l*c.y,p*o.x,l*o.y,p*u.x,l*u.y)>l*p}function y(e,t,r){if(isNaN(e.z)&&isNaN(t.z))return!1;if(isNaN(e.z)||isNaN(t.z))return e.z>0||t.z>0;var n=S(e,t,r),i=4*n.z-t.z-3*e.z,a=(r(.9999*e.x+1e-4*t.x,.9999*e.y+1e-4*t.y)-e.z)/1e-4,s=Math.max(Math.abs(e.z),Math.abs(t.z));return Math.abs(i-a)>.125*s}function v(e,t){return e.vertices[1].x-e.vertices[0].x<10*t.xtolerance||e.vertices[0].y-e.vertices[3].y<10*t.ytolerance}function b(e,t){return e.vertices[0].x<t.xmin||e.vertices[0].y>t.ymax||e.vertices[2].x>t.xmax||e.vertices[2].y<t.ymin}function x(e,t){return e.x<t.xmin||e.x>t.xmax||e.y<t.ymin||e.y>t.ymax}function _(e,t,r){return s(e,t,r(e,t))}function S(e,t,r){return _(.5*(e.x+t.x),.5*(e.y+t.y),r)}function M(e,t,r,n){if(x(e,n)||x(t,n))return S(e,t,r);if(isNaN(e.z)||isNaN(t.z))return T(e,t,r,n);if(e.z>0!=t.z>0)return S(e,t,r);var i=r(.99*e.x+.01*t.x,.99*e.y+.01*t.y)-e.z,a=t.z-r(.01*e.x+.99*t.x,.01*e.y+.99*t.y);return isNaN(i)||isNaN(a)?S(e,t,r):i>0==a>0?S(e,t,r):w(s(e.x,e.y,i),s(t.x,t.y,a),r)}function E(e,t,r,n,i,a){var s=M(e,r,i,a);return e.z>0==r.z>0&&s.z>0!=e.z>0?s:(s=M(t,n,i,a),t.z>0==n.z>0&&s.z>0!=t.z>0?s:S(e,r,i))}function w(e,t,r){if(isNaN(e.z))return t;if(isNaN(t.z))return e;if(isFinite(e.z)||isFinite(t.z)){if(isFinite(e.z)){if(isFinite(t.z)){var n=1-e.z/t.z,i=1-t.z/e.z;return _(e.x/n+t.x/i,e.y/n+t.y/i,r)}return e}return t}return S(e,t,r)}function D(e,t,r,n){var i=e.x,a=t.x,u=e.y,c=t.y,l=e.z,p=t.z,f=n.xtolerance,h=n.ytolerance;if(x(e,n)||x(t,n)){var d=S(e,t,r);return o(d.x,d.y,!1)}for(;Math.abs(i-a)>f||Math.abs(u-c)>h;){var m=.5*(i+a),g=.5*(u+c),y=r(m,g);y>0==l>0?(i=m,u=g,l=y):(a=m,c=g,p=y)}if(isNaN(l))return o(a,c,!1);if(isNaN(p))return o(i,u,!1);var v=w(s(i,u,l),s(a,c,p),r),b=0===l||0===p||0===v.z||v.z>=l==p>=v.z&&Math.abs(v.z)<1e250;return o(v.x,v.y,b)}function T(e,t,r,n){if(isNaN(e.z)===isNaN(t.z))return S(e,t,r);if(isNaN(e.z)){var i=e;e=t,t=i}for(var a=e.x,o=t.x,u=e.y,c=t.y,l=e.z,p=n.xtolerance,f=n.ytolerance;Math.abs(a-o)>p||Math.abs(u-c)>f;){var h=.5*(a+o),d=.5*(u+c),m=r(h,d);isNaN(m)===isNaN(l)?(a=h,u=d,l=m):(o=h,c=d)}return s(a,u,l)}function P(e,t,r){var n={triangles:[],edgeCache:{},domain:r,fn:t};return I(e,n),n.triangles}function I(e,t){e.children&&(I(e.children[0],t),I(e.children[1],t),I(e.children[2],t),I(e.children[3],t),C(e.children[0],e.children[1],t),C(e.children[3],e.children[2],t),O(e.children[1],e.children[2],t),O(e.children[0],e.children[3],t))}function C(e,t,r){e.children&&t.children?(C(e.children[1],t.children[0],r),C(e.children[2],t.children[3],r)):e.children?(C(e.children[1],t,r),C(e.children[2],t,r)):t.children?(C(e,t.children[0],r),C(e,t.children[3],r)):A(e,t,r)}function O(e,t,r){e.children&&t.children?(O(e.children[2],t.children[1],r),O(e.children[3],t.children[0],r)):e.children?(O(e.children[2],t,r),\nO(e.children[3],t,r)):t.children?(O(e,t.children[1],r),O(e,t.children[0],r)):L(e,t,r)}function A(e,t,r){if(e.center&&t.center){var n,i;e.depth>=t.depth?(n=M(e.vertices[1],e.vertices[2],r.fn,r.domain),i=N(e.vertices[1],t.center,e.vertices[2],e.center,n)):(n=M(t.vertices[0],t.vertices[3],r.fn,r.domain),i=N(t.vertices[0],t.center,t.vertices[3],e.center,n)),k(i,r.edgeCache,r.domain);for(var a=0;a<4;a++)r.triangles.push(i[a])}}function L(e,t,r){if(e.center&&t.center){var n,i;e.depth>=t.depth?(n=M(e.vertices[3],e.vertices[2],r.fn,r.domain),i=N(e.vertices[2],t.center,e.vertices[3],e.center,n)):(n=M(t.vertices[1],t.vertices[0],r.fn,r.domain),i=N(t.vertices[1],t.center,t.vertices[0],e.center,n)),k(i,r.edgeCache,r.domain);for(var a=0;a<4;a++)r.triangles.push(i[a])}}function N(e,t,r,n,i){return[u(e,i,t),u(t,i,r),u(r,i,n),u(n,i,e)]}function q(e,t,r){return e.z>0&&!x(e,r)&&(!(t.z>0)||x(t,r))}function F(e,t){return e.x+","+e.y+","+t.x+","+t.y}function k(e,t,r){V(e[0],e[1],e[2],F(e[1].vertices[2],e[1].vertices[0]),t,r),V(e[1],e[2],e[3],F(e[2].vertices[0],e[2].vertices[2]),t,r),V(e[2],e[3],e[0],F(e[3].vertices[2],e[3].vertices[0]),t,r),V(e[3],e[0],e[1],F(e[0].vertices[0],e[0].vertices[2]),t,r)}function V(e,t,r,n,i,a){var s=t.vertices[0],o=t.vertices[1],u=t.vertices[2];q(o,u,a)&&(t.next=r),q(s,o,a)&&(t.next=e),q(u,s,a)&&R(t,n,i),q(s,u,a)&&B(t,n,i)}function B(e,t,r){r[t]?r[t].next=e:r[t]=e}function R(e,t,r){r[t]?e.next=r[t]:r[t]=e}function j(e,t,r){for(var i={fillAccumulator:new n.default(r),strokeAccumulator:new n.default(r),fn:t,domain:r},a=0;a<e.length;a++){var s=e[a];s.next&&!s.visited&&z(s,i)}return{strokeSegments:i.strokeAccumulator.finish().segments,fillSegments:i.fillAccumulator.finish().segments}}function z(e,t){for(;;){var r=e.vertices[0],n=e.vertices[1],i=e.vertices[2];if(G(r,n,t),G(n,i,t),G(i,r,t),e.visited)break;if(!e.next)break;e.visited=!0,e=e.next}t.strokeAccumulator.breakSegment(),t.fillAccumulator.breakSegment()}function G(e,t,r){if(q(e,t,r.domain)){var n=D(e,t,r.fn,r.domain);r.fillAccumulator.addPoint([n.x,n.y]),n.isZero?r.strokeAccumulator.addPoint([n.x,n.y]):r.strokeAccumulator.breakSegment()}}function U(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];t.push([n.vertices[0].x,n.vertices[0].y,n.vertices[1].x,n.vertices[1].y,n.vertices[2].x,n.vertices[2].y,n.vertices[0].x,n.vertices[0].y])}return t}Object.defineProperty(t,"__esModule",{value:!0});var W=5,Y=Math.pow(2,14);t.sampleImplicit=i,t.sampleImplicitDiagnostic=a,t.buildQuadTree=f,t.triangulate=P,t.traceContours=j,t.displayTriangles=U}),define("worker/workerconfig",[],function(){return{pointsOfInterest:!0,plotSingleVariableImplicitEquations:!0}}),function(){var e,t,r,n,i,a,s,o,u,c,l,p,f,h,d,m,g={};!function(e){function t(e,t){return function(r,n){return e[r]=t?t(r,n):n}}var r="object"==typeof g?g:"object"==typeof self?self:"object"==typeof this?this:{};"function"==typeof define&&define.amd?define("tslib",["exports"],function(n){e(t(r,t(n)))}):e("object"==typeof module&&"object"==typeof module.exports?t(r,t(module.exports)):t(r))}(function(g){var y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};e=function(e,t){function r(){this.constructor=e}y(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},r=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&(r[n[i]]=e[n[i]]);return r},n=function(e,t,r,n){var i,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(a<3?i(s):a>3?i(t,r,s):i(t,r))||s);return a>3&&s&&Object.defineProperty(t,r,s),s},i=function(e,t){return function(r,n){t(r,n,e)}},a=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(e,t,r,n){return new(r||(r=Promise))(function(i,a){function s(e){try{u(n.next(e))}catch(e){a(e)}}function o(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(s,o)}u((n=n.apply(e,t||[])).next())})},o=function(e,t){function r(e){return function(t){return n([e,t])}}function n(r){if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,a&&(s=a[2&r[0]?"return":r[0]?"throw":"next"])&&!(s=s.call(a,r[1])).done)return s;switch(a=0,s&&(r=[0,s.value]),r[0]){case 0:case 1:s=r;break;case 4:return u.label++,{value:r[1],done:!1};case 5:u.label++,a=r[1],r=[0];continue;case 7:r=u.ops.pop(),u.trys.pop();continue;default:if(s=u.trys,!(s=s.length>0&&s[s.length-1])&&(6===r[0]||2===r[0])){u=0;continue}if(3===r[0]&&(!s||r[1]>s[0]&&r[1]<s[3])){u.label=r[1];break}if(6===r[0]&&u.label<s[1]){u.label=s[1],s=r;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(r);break}s[2]&&u.ops.pop(),u.trys.pop();continue}r=t.call(e,u)}catch(e){r=[6,e],a=0}finally{i=s=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var i,a,s,o,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o},u=function(e,t){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])},c=function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}},l=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,a=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return s},p=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(l(arguments[t]));return e},f=function(e){return this instanceof f?(this.v=e,this):new f(e)},h=function(e,t,r){function n(e){l[e]&&(c[e]=function(t){return new Promise(function(r,n){p.push([e,t,r,n])>1||i(e,t)})})}function i(e,t){try{a(l[e](t))}catch(e){u(p[0][3],e)}}function a(e){e.value instanceof f?Promise.resolve(e.value.v).then(s,o):u(p[0][2],e)}function s(e){i("next",e)}function o(e){i("throw",e)}function u(e,t){e(t),p.shift(),p.length&&i(p[0][0],p[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var c,l=r.apply(e,t||[]),p=[];return c={},n("next"),n("throw"),n("return"),c[Symbol.asyncIterator]=function(){return this},c},d=function(e){function t(t,i){e[t]&&(r[t]=function(r){return(n=!n)?{value:f(e[t](r)),done:"return"===t}:i?i(r):r})}var r,n;return r={},t("next"),t("throw",function(e){throw e}),t("return"),r[Symbol.iterator]=function(){return this},r},m=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator];return t?t.call(e):"function"==typeof c?c(e):e[Symbol.iterator]()},g("__extends",e),g("__assign",t),g("__rest",r),g("__decorate",n),g("__param",i),g("__metadata",a),g("__awaiter",s),g("__generator",o),g("__exportStar",u),g("__values",c),g("__read",l),g("__spread",p),g("__await",f),g("__asyncGenerator",h),g("__asyncDelegator",d),g("__asyncValues",m)})}(),define("math/poi-finding-accumulator",["require","exports","worker/workerconfig","tslib","./curve-accumulator","./poi"],function(e,t,r,n,i,a){"use strict";function s(e){return Math.abs(e)<5e-8}Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t,r,n){var i=e.call(this,t)||this;return i.domain=t,i.fn=r,i.derivative=n,i.poiData={zeros:{x:[],y:[]},intercept:{x:[],y:[]},extrema:{x:[],y:[]}},i.zeroBuffer=[],i.extremumBuffer=[],i}return n.__extends(t,e),t.prototype.getPOI=function(){return r.pointsOfInterest?(void 0!==this.fn&&(this.poiData.intercept=this.findIntercept(this.fn)),this.poiData):{zeros:{x:[],y:[]},intercept:{x:[],y:[]},extrema:{x:[],y:[]}}},t.prototype.addLinearZero=function(e){var t=-e[0]/e[1];this.isOutsideDomain(t)||(this.poiData.zeros={x:[t],y:[0]})},t.prototype.addLinearIntercept=function(e){this.isOutsideDomain(0)||(this.poiData.intercept={x:[0],y:[e[0]]})},t.prototype.isOutsideDomain=function(e){return!this.domain||void 0===this.domain.min||void 0===this.domain.max||(e<this.domain.min||e>this.domain.max||isNaN(e))},t.prototype.addPoint=function(t){0===this.segment.length&&s(t[1])&&(this.poiData.zeros.x.push(t[0]),this.poiData.zeros.y.push(t[1])),this.updateZeroBuffer(t),this.updateExtremumBuffer(t),e.prototype.addPoint.call(this,t)},t.prototype.updateZeroBuffer=function(e){if(this.fn){if(!isFinite(e[0])||!isFinite(e[1]))return void(this.zeroBuffer.length=0);switch(this.zeroBuffer.length){case 0:if(s(e[1]))return;return void this.zeroBuffer.push(e);case 1:if(0===e[1])return void this.zeroBuffer.push(e);if(e[1]>0!=this.zeroBuffer[0][1]>0){var t=a.default.bisectZero(this.zeroBuffer[0][0],this.zeroBuffer[0][1],e[0],e[1],this.fn);return t&&(this.poiData.zeros.x.push(t[0]),this.poiData.zeros.y.push(t[1])),this.zeroBuffer.length=0,void this.zeroBuffer.push(e)}return this.zeroBuffer.length=0,void this.zeroBuffer.push(e);case 2:if(0===e[1])return;if(e[1]>0!=this.zeroBuffer[0][1]>0){var t=a.default.flatCenter(this.zeroBuffer[0][0],this.zeroBuffer[0][1],this.zeroBuffer[1][0],this.zeroBuffer[1][1],e[0],e[1],this.fn);return t&&(this.poiData.zeros.x.push(t[0]),this.poiData.zeros.y.push(t[1])),this.zeroBuffer.length=0,void this.zeroBuffer.push(e)}return this.zeroBuffer.length=0,void this.zeroBuffer.push(e)}}},t.prototype.updateExtremumBuffer=function(e){if(this.fn){if(!isFinite(e[0])||!isFinite(e[1]))return void(this.zeroBuffer.length=0);switch(this.extremumBuffer.length){case 0:return void this.extremumBuffer.push(e);case 1:return e[1]===this.extremumBuffer[0][1]&&(this.extremumBuffer.length=0),void this.extremumBuffer.push(e);case 2:if(e[1]===this.extremumBuffer[1][1])return void this.extremumBuffer.push(e);if(e[1]>this.extremumBuffer[1][1]!=this.extremumBuffer[1][1]>this.extremumBuffer[0][1]){var t=this.bisectExtremumUsingDerivative(this.extremumBuffer[0][0],this.extremumBuffer[0][1],this.extremumBuffer[1][0],this.extremumBuffer[1][1],e[0],e[1]);if(t){this.poiData.extrema.x.push(t[0]),this.poiData.extrema.y.push(t[1]);!!!a.default.bisectJump(this.extremumBuffer[0][0],this.extremumBuffer[0][1],t[0],t[1],e[0],e[1],this.fn,this.ytolerance)&&t[0]>this.segment[this.segment.length-2]&&(this.pendingPoint=t)}return this.extremumBuffer.shift(),void this.extremumBuffer.push(e)}return this.extremumBuffer.shift(),void this.extremumBuffer.push(e);case 3:if(e[1]===this.extremumBuffer[1][1])return;if(e[1]>this.extremumBuffer[1][1]!=this.extremumBuffer[1][1]>this.extremumBuffer[0][1]){var t=void 0,r=.5*(this.extremumBuffer[1][0]+this.extremumBuffer[2][0]),n=this.fn(r);return t=n===this.extremumBuffer[1][1]?a.default.flatCenter(this.extremumBuffer[0][0],this.extremumBuffer[0][1],this.extremumBuffer[1][0],this.extremumBuffer[1][1],e[0],e[1],this.fn):this.bisectExtremumUsingDerivative(this.extremumBuffer[1][0],this.extremumBuffer[1][1],r,n,this.extremumBuffer[2][0],this.extremumBuffer[2][1]),t&&(this.poiData.extrema.x.push(t[0]),this.poiData.extrema.y.push(t[1])),this.extremumBuffer.shift(),this.extremumBuffer.shift(),void this.extremumBuffer.push(e)}return this.extremumBuffer.shift(),this.extremumBuffer.shift(),void this.extremumBuffer.push(e)}}},t.prototype.bisectExtremumUsingDerivative=function(e,t,r,n,i,s){if(this.fn){var o;if(this.derivative){var u=this.derivative(e),c=this.derivative(i);if(!isNaN(u)&&!isNaN(c)&&u<0!=c<0){var l=a.default.bisectZero(e,u,i,c,this.derivative);l&&(o=[l[0],this.fn(l[0])])}}return o||(o=a.default.bisectExtremum(e,t,r,n,i,s,this.fn)),o}},t.prototype.breakSegment=function(){this.zeroBuffer.length=0,this.extremumBuffer.length=0,this.flushPending(),this.segment.length>2&&(this.segments.push(this.segment),s(this.segment[this.segment.length-1])&&(this.poiData.zeros.x.push(this.segment[this.segment.length-2]),this.poiData.zeros.y.push(this.segment[this.segment.length-1]))),this.segment=[]},t.prototype.findIntercept=function(e){if(!e)return{x:[],y:[]};var t=e(0);return isFinite(t)?{x:[0],y:[e(0)]}:{x:[],y:[]}},t.prototype.finish=function(){return{segments:this.getSegments(),resolved:!0,poi:this.getPOI()}},t}(i.default);t.default=o}),define("graphing/graphmode",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.X=1,t.Y=2,t.XYPOINT=3,t.XYPOINT_MOVABLE=4,t.PARAMETRIC=5,t.POLAR=6,t.POLYGONFILL=7,t.IMPLICIT=8,t.NONE=10,t.VISUALIZATION=11}),define("math/domaintypes",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.emptyDomain=function(){return{type:"empty"}},t.unknownDomain=function(){return{type:"unknown"}},t.knownDomain=function(e){return isNaN(e[0])||isNaN(e[1])||e[1]<e[0]?t.emptyDomain():{type:"known",bounds:e}},t.allReals=function(){return t.knownDomain([-1/0,1/0])},t.intersectDomains=function(e,r){if("empty"===e.type||"empty"===r.type)return t.emptyDomain();if("unknown"===e.type||"unknown"===r.type)return t.unknownDomain();if(e.bounds&&r.bounds){var n=[Math.max(e.bounds[0],r.bounds[0]),Math.min(e.bounds[1],r.bounds[1])];return t.knownDomain(n)}return t.emptyDomain()}}),define("math/plotter",["require","exports","./distance","./poi","./implicit-plotter","./curve-accumulator","./poi-finding-accumulator","graphing/graphmode","./domaintypes"],function(e,t,r,n,i,a,s,o,u){"use strict";function c(e,t){for(var r,n=new s.default(t,e),i=t.min;i<=t.max+t.step/2;i+=t.step)r=e(i),isFinite(r)?n.addPoint([i,r]):n.breakSegment();return n.finish()}function l(e,t){var r=new s.default(t),n=e[0]+t.min*e[1],i=e[0]+t.max*e[1];return isFinite(n)&&isFinite(i)?(r.addPoint([t.min,n]),r.addPoint([t.max,i]),r.addLinearZero(e),r.addLinearIntercept(e),r.finish()):r.finish()}function p(e,t){var r=l(e[0],t),n=l(e[1],t);return r.segments.length&&n.segments.length&&4===r.segments[0].length&&4===n.segments[0].length?{segments:[[r.segments[0][1],n.segments[0][1],r.segments[0][3],n.segments[0][3]]],resolved:!0}:{segments:[],resolved:!0}}function f(e,t){var r=e(t),n=r[0],i=r[1];return{segments:[[n,i,n,i]],resolved:!0}}function h(e,t,i){var a=i.fn,s=i.jumpTolerance,o=e[0],u=e[1],c=t[0],l=t[1],p=r.mean(o,c),f=a(p);return n.default.bisectJump(o,u,p,f,c,l,a,s)}function d(e,t,r){var n=t,i=e(n);return isFinite(i)||(n=t+r,i=e(n)),isFinite(i)||(n=t-r,i=e(n)),[n,i]}function m(e,t,r){var i,a,s,o,u,c,l,p=new I(e,t,r),f=t.step/10,h=t.min;i=d(e,h,f),l=i[0],c=i[1];var m=[l,c];isFinite(c)&&p.accumulator.addPoint([l,c]);for(var g=Math.ceil((t.max-t.min)/t.step),y=1;y<=g;y++)h=(g-y)/g*t.min+y/g*t.max,a=d(e,h,f),l=a[0],c=a[1],isFinite(c)&&isFinite(m[1])?(s=P(m,[l,c],p),l=s[0],c=s[1],p.accumulator.addPoint([l,c])):isFinite(c)&&!isFinite(m[1])?(u=n.default.bisectFinite(m[0],m[1],l,c,e))&&(u[0]!==l&&p.accumulator.addPoint(u),o=P(u,[l,c],p),l=o[0],c=o[1],p.accumulator.addPoint([l,c])):!isFinite(c)&&isFinite(m[1])&&(u=n.default.bisectFinite(m[0],m[1],l,c,e))&&(u=P(m,u,p),u[0]!==m[0]&&p.accumulator.addPoint(u),p.accumulator.breakSegment()),m=[l,c];return p.accumulator.finish()}function g(e){for(var t=e.fn,r=e.domain,n=r.min,i=r.max,a=Math.floor(n),s=Math.ceil(i),o=[],u=a;u<=s;u++){var c=t(u);isFinite(u)&&isFinite(c)&&o.push([u,c])}return{segments:o,resolved:!0}}function y(e,t,r,n){function i(e,t){var i=t%2==0?1:-1;if(!n&&-1===i)return!1;for(var a=t*(Math.PI/r),s=[u,u+1,u+2,u+3],o=!1,c=0,p=s.length;c<p;c++){var f=e(s[c]),h=e(s[c]+a);if(isFinite(f)&&isFinite(h)&&(o=!0),isFinite(f)!==isFinite(h)||Math.abs(f-i*h)>l)return!1}return!!o}var a,s,o,u=t.min,c=t.max-t.min,l=t.xtolerance&&t.ytolerance?Math.min(t.xtolerance,t.ytolerance):t.tolerance?t.tolerance:0,p=Math.floor(c/(Math.PI/r));for(a=1;a<=p;a++)if(i(e,a)){for(o=a,s=2;s*a<=p;s++)i(e,s*a)||(o=void 0);if(o)break}return o?o*(Math.PI/r):null}function v(e){return[e[1]*Math.cos(e[0]),e[1]*Math.sin(e[0])]}function b(e,t){return t.map=v,m(e,t)}function x(e,t){for(var r=e.min,n=e.max,i=e.step,a=n-r,s=Math.ceil(a/i),o=a/s,u=0;u<s;u++)t(r+u*o);t(n)}function _(e,t){if(t.max<t.min)return{segments:[],resolved:!0};var r=new a.default(t),n=t.min,i=e(n);isFinite(i[0])&&isFinite(i[1])&&r.addPoint(i);var s;return x(t,function(t){s=e(t),S(e,n,i,t,s,10,r),n=t,i=s}),r.finish()}function S(e,t,n,i,a,s,o){if(i!==t){var u=o.xtolerance,c=o.ytolerance,l=r.mean(t,i),p=e(l),f=isFinite(n[0])&&isFinite(n[1]),h=isFinite(a[0])&&isFinite(a[1]),d=isFinite(p[0])&&isFinite(p[1]);if(0===s||l===t||l===i)return o.breakSegment(),void(h&&o.addPoint(a));if(f||h){if(f!==h){for(var m=t,g=i,y=n,v=a;t!==l&&l!==i;)d==f?(t=l,n=p,f=d):(i=l,a=p,h=d),l=t+(i-t)/2,p=e(l),d=isFinite(p[0])&&isFinite(p[1]);return void(f?(S(e,m,y,t,n,s-1,o),o.breakSegment()):(o.breakSegment(),o.addPoint(a),S(e,i,a,g,v,s-1,o)))}if(f&&d&&h){var b=r.pointToSegmentParameter(p[0],p[1],n[0],n[1],a[0],a[1]);if(b>.2&&b<.8&&Math.abs(p[0]-(n[0]+b*(a[0]-n[0])))<=u&&Math.abs(p[1]-(n[1]+b*(a[1]-n[1])))<=c)return void o.addPoint(a)}n[0]===p[0]&&n[1]===p[1]||S(e,t,n,l,p,s-1,o),a[0]===p[0]&&a[1]===p[1]||S(e,l,p,i,a,s-1,o)}}}function M(e){if(!e)return!1;var t=e.viewport.xmin,r=e.viewport.xmax,n=e.viewport.ymin,i=e.viewport.ymax;return!(!isFinite(t)||!isFinite(r)||r<=t)&&(!(!isFinite(n)||!isFinite(i)||i<=n)&&(!(!isFinite(e.screen.width)||e.screen.width<=0)&&!(!isFinite(e.screen.height)||e.screen.height<=0)))}function E(e,t,r){var n,i,a=e.viewport.xmin,s=e.viewport.xmax,c=e.viewport.ymin,l=e.viewport.ymax,p=e.trigAngleMultiplier||1,f=e.oversample||4,h=1/f*(s-a)/e.screen.width,d=1/f*(l-c)/e.screen.height,m=t.domainBound;switch(t.graphMode){case o.X:switch(n=u.intersectDomains(u.knownDomain([c,l]),m),n.type){case"empty":return!1;case"known":c=n.bounds[0],l=n.bounds[1]}i={min:c,max:l,xtolerance:d,ytolerance:h,step:d};break;case o.Y:switch(n=u.intersectDomains(u.knownDomain([a,s]),m),n.type){case"empty":return!1;case"known":a=n.bounds[0],s=n.bounds[1]}i={min:a,max:s,xtolerance:h,ytolerance:d,step:h};break;case o.POLAR:if(!t.domain)throw new Error("Expected polar graph to have domain");if(i={min:t.domain.min,max:t.domain.max,step:2*Math.PI/p/1e3,tolerance:Math.min(h,d)},!t.domain.isExplicit){var g=y(r,i,p,"="===t.operator);g&&(i.max=i.min+g)}i.step=Math.max(i.step,(i.max-i.min)/11999);break;case o.PARAMETRIC:var v=t.domain?t.domain.min:0,b=t.domain?t.domain.max:1,x=t.domain?t.domain.step:.01;switch(n=u.intersectDomains(u.knownDomain([v,b]),m),n.type){case"empty":return!1;case"known":v=n.bounds[0],b=n.bounds[1]}i={min:v,max:b,step:x,xtolerance:h,ytolerance:d};break;case o.IMPLICIT:i={xmin:a,xmax:s,ymin:c,ymax:l,xtolerance:h,ytolerance:d};break;default:return!1}return i}function w(e){var t,r,n,a=e.viewState,s=e.graphInfo,u=e.compiled,c=e.derivative,h=e.discrete,d=e.maxOverride,y=u.fn,v=E(a,s,y),x=s.graphMode;if(v){switch(x){case o.X:case o.Y:var S=c?c.fn:void 0;if(h){var M=v,w=M.min,D=M.max,T=M.step;t=g({fn:y,domain:{min:Math.max(w,0),max:void 0!==d?Math.min(d,D):D,step:T}})}else t=s.isLinear?l(s.linearCoefficients,v):m(y,v,S);break;case o.POLAR:t=b(y,v);break;case o.IMPLICIT:t=i.sampleImplicit(y,v);break;case o.PARAMETRIC:v.step||(v.step=(v.max-v.min)/1e3),t=v.max===v.min?f(y,v.min):s.isLinear?p(s.linearCoefficients,v):_(y,v);break;default:throw new Error("Programming Error: unexpected graphmode "+x)}n=t.poi}else t={segments:[],resolved:!0};if((!n||n.zeros.x.length+n.extrema.x.length+n.intercept.x.length>250)&&(n={zeros:{x:[],y:[]},extrema:{x:[],y:[]},intercept:{x:[],y:[]}}),x===o.X)for(var P in n)if(n.hasOwnProperty(P)){var I=P;r=n[I].y,n[I].y=n[I].x,n[I].x=r}var C={segments:t.segments,resolved:t.resolved,graphMode:x,color:s.color,style:h?s.pointStyle:s.lineStyle,operator:s.operator,poi:n,compiled:u};if(x===o.POLAR){var O=v;C.sampledDomain={min:O.min,max:O.max,step:O.step}}return t.fillSegments&&(C.fillSegments=t.fillSegments),C}function D(e,t,r){var n,i,a,s,u=[],c=null;switch(r){case o.POLAR:c=v;break;case o.X:c=function(e){return[e[1],e[0]]}}for(n=0;n<e.length;n++)for(s=e[n],i=0;i<s.length;i+=2)a=[s[i],s[i+1]],c&&(a=c(a)),u.push(a[0],a[1]);for(n=t.length-1;n>=0;n--)for(s=t[n],i=s.length-2;i>=0;i-=2)a=[s[i],s[i+1]],c&&(a=c(a)),u.push(a[0],a[1]);return u}function T(e,t,n){for(var i=function(e){var t=e[e.length-1];return t[t.length-2]},a=[],s=0,o=0,u=[],c=[],l=-1/0,p=-1/0;;){if(l<=p){if(s>=t.length)break;c.push(t[s++])}if(p<=l){if(o>=e.length)break;u.push(e[o++])}if(l=i(c),p=i(u),r.approx(l,p,4)){a.push(D(u,c,n)),c=[],u=[];var f=Math.max(l,p);l=f,p=f}}return a}Object.defineProperty(t,"__esModule",{value:!0});var P=function(e,t,r){var n=r.fn,i=r.jumpTolerance,a=r.accumulator;if(!isFinite(i)||i<=0)return t;var s=h(e,t,r);if(!s)return t;for(var o=(t[0]-e[0])/10,u=[-o,o],c=t,l=0;l<u.length;l++){var p=e[0]+u[l],f=n(p);isFinite(f)||(p=e[0],f=e[1],p=e[0],f=e[1]);var d=t[0]+u[l],m=n(d);if(isFinite(m)?c=[d,m]:(d=t[0],m=t[1]),h([p,f],[d,m],r)){var g=s[0],y=s[1];return a.addPoint(g),a.breakSegment(),a.addPoint(y),t}}return c},I=function(){function e(e,t,r){this.derivative=r,this.accumulator=new s.default(t,e,r),this.fn=e,this.jumpTolerance=t.ytolerance||t.tolerance||0}return e}();t.default={sampleXYNaive:c,sampleLinear:l,sampleXY:m,findPiPeriod:y,samplePolar:b,sampleParametricRecursive:_,subsampleParametricRecursive:S,validateViewState:M,computeDomain:E,computeGraphData:w,polygonsFromSegments:T}}),define("lib/worker-i18n",["require","exports"],function(e,t){"use strict";function r(e,t){return{msg:e,vars:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.t=r}),define("math/mathshim",["require"],function(e){var t={};return t.cosh=Math.cosh||function(e){return.5*(Math.exp(e)+Math.exp(-e))},t.sinh=Math.sinh&&0!==Math.sinh(1e-20)?Math.sinh:function(e){var r=e>0?1:-1;return e=e>0?e:-e,.5*-r*Math.exp(e)*t.expm1(-2*e)},t.tanh=Math.tanh&&0!==Math.tanh(1e-20)?Math.tanh:function(e){var r=e>0?1:-1;e=e>0?e:-e;var n=t.expm1(-2*e);return-r*n/(2+n)},t.acosh=Math.acosh||function(e){return e<1?NaN:Math.log(e+t.sqrtxsqm1(e))},t.asinh=Math.asinh&&0!==Math.asinh(1e-20)?Math.asinh:function(e){var r=e>0?1:-1;return e=e>0?e:-e,1+e*e==1?r*t.log1p(e):r*Math.log(e+t.sqrtxsqp1(e))},t.atanh=Math.atanh&&0!==Math.atanh(1e-20)?Math.atanh:function(e){return.5*(t.log1p(e)-t.log1p(-e))},t.expm1=Math.expm1||function(e){return e+.5*e*e===e?e:Math.exp(e)-1},t.log1p=Math.log1p||function(e){return e-.5*e*e===e?e:Math.log(1+e)},t.sqrtxsqp1=function(e){var t=e*e;return 1+t===1?1:1+t===t?Math.abs(e):Math.sqrt(t+1)},t.sqrtxsqm1=function(e){var t=e*e;return t<1?NaN:t-1===t?Math.abs(e):Math.sqrt(t-1)},t}),define("math/quadrature",["require","math/mathshim","math/poi"],function(e){"use strict";function t(e,t,r){return.5*(t*(2-r)+e*r)}function r(e,t,r){var n=.5*(t+r),i=l(t,e(t),n,e(n),r,e(r),e,0);return i?.5*(i[0][0]+i[1][0]):n}function n(e,t,r,n,i){return{x1:e,x2:t,value:r,error:n,minerror:i}}function i(e,r,n){var i=Math.abs(e(t(r,n,d))),a=Math.abs(e(t(r,n,2*d)));return!(i<d||a<d)&&i>1.95*a}function a(e,r,a){var s,o,u=t(a,r,v[0]),c=t(r,a,v[0]),l=e(u),f=e(c),h=t(r,a,1),d=e(h);if(isFinite(d)&&!isFinite(l)){if(s=p(u,l,h,d,e),Math.abs((s[0]-r)/(a-r))>g)return n(r,a,NaN,NaN,NaN);r=s[0],l=s[1]}if(isFinite(d)&&!isFinite(f)){if(o=p(h,d,c,f,e),Math.abs((o[0]-a)/(a-r))>g)return n(r,a,NaN,NaN,NaN);a=o[0],f=o[1]}if(isFinite(l)&&isFinite(f)&&!isFinite(d)){if(s=p(u,l,h,d,e),o=p(h,d,c,f,e),Math.abs((o[0]-s[0])/(a-r))>g)return n(r,a,NaN,NaN,NaN);d=.5*(s[1]+o[1])}if(i(e,r,a)||i(e,a,r))return n(r,a,NaN,NaN,NaN);for(var m=d,x=0,_=0,M=0,E=0,w=0,D=0,T=0;T<y;T+=4)w=e(t(r,a,v[T])),D=e(t(a,r,v[T])),E=Math.max(E,Math.abs(w),Math.abs(D)),x+=b[T]*(w+D),w=e(t(r,a,v[T+1])),D=e(t(a,r,v[T+1])),E=Math.max(E,Math.abs(w),Math.abs(D)),M+=b[T+1]*(w+D),w=e(t(r,a,v[T+2])),D=e(t(a,r,v[T+2])),E=Math.max(E,Math.abs(w),Math.abs(D)),_+=b[T+2]*(w+D),w=e(t(r,a,v[T+3])),D=e(t(a,r,v[T+3])),E=Math.max(E,Math.abs(w),Math.abs(D)),M+=b[T+3]*(w+D);var P,I=m+x,C=I+_,O=C+M,A=Math.abs(_-I),L=Math.abs(M-C),N=S*(a-r)*O,q=S*Math.abs(a-r)*E*b[0];return P=0===A?S*Math.abs(a-r)*L:S*Math.abs(a-r)*L*(L/A)*(L/A),P=Math.max(P,q),n(r,a,N,P,q)}function s(e){for(var t=-1/0,r=-1/0,n=-1,i=0,a=0;a<e.length;a++){var s=e[a];i+=s.value,s.error>t&&(t=s.error,n=a),s.minerror>r&&(r=s.minerror)}return{maxerror:t,maxminerror:r,maxindex:n,totalvalue:i}}function o(e,n,i,o){if(void 0===o&&(o=32),!isFinite(n)||!isFinite(i))return NaN;for(var u=[a(e,n,i)],c=s(u),l=1;l<o&&!(Math.abs(c.maxerror/c.totalvalue)<=32*m||c.maxerror<=32*m||c.maxerror<=32*c.maxminerror);l++){var p=u[u.length-1];u[u.length-1]=u[c.maxindex],u[c.maxindex]=p;var f=u.pop(),h=r(e,t(f.x2,f.x1,.125),t(f.x1,f.x2,.125));u.push(a(e,f.x1,h)),u.push(a(e,h,f.x2)),c=s(u)}return Math.abs(c.totalvalue)<=10*c.maxminerror?0:c.totalvalue}var u=e("math/mathshim"),c=e("math/poi").default,l=c.bisectJump,p=c.bisectFinite,f=3.154019550531224,h=Math.pow(2,-13),d=h*h,m=d*d,g=d,y=32,v=[],b=[];!function(e,t){for(var r=y;r>0;r--){var n=f/y*r,i=u.sinh(n),a=u.cosh(Math.PI/2*i),s=1/(Math.exp(Math.PI/2*i)*a),o=u.cosh(n)/(a*a);e.push(s),t.push(o)}}(v,b);for(var x=0,_=0;_<b.length;_++)x+=b[_];var S=1/(1+2*x);return{quad:o}}),define("math/tofraction",["require","exports"],function(e,t){"use strict";function r(e,t){if(void 0===t&&(t=1e6),e===1/0)return{n:1/0,d:1};if(e===-1/0)return{n:-1/0,d:1};if(!isFinite(e))return{n:NaN,d:1};for(var r,n,i,a=0,s=1,o=1,u=0;;){if(r=Math.floor(e),n=r*s+a,(i=r*u+o)>t)break;if(a=s,o=u,s=n,u=i,e===r)break;e=1/(e-r)}return{n:s,d:u}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r}),function(e){"use strict";function t(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function r(e,t){return e<<t|e>>>32-t}function n(e,n,i,a,s,o){return t(r(t(t(n,e),t(a,o)),s),i)}function i(e,t,r,i,a,s,o){return n(t&r|~t&i,e,t,a,s,o)}function a(e,t,r,i,a,s,o){return n(t&i|r&~i,e,t,a,s,o)}function s(e,t,r,i,a,s,o){return n(t^r^i,e,t,a,s,o)}function o(e,t,r,i,a,s,o){return n(r^(t|~i),e,t,a,s,o)}function u(e,r){e[r>>5]|=128<<r%32,e[14+(r+64>>>9<<4)]=r;var n,u,c,l,p,f=1732584193,h=-271733879,d=-1732584194,m=271733878;for(n=0;n<e.length;n+=16)u=f,c=h,l=d,p=m,f=i(f,h,d,m,e[n],7,-680876936),m=i(m,f,h,d,e[n+1],12,-389564586),d=i(d,m,f,h,e[n+2],17,606105819),h=i(h,d,m,f,e[n+3],22,-1044525330),f=i(f,h,d,m,e[n+4],7,-176418897),m=i(m,f,h,d,e[n+5],12,1200080426),d=i(d,m,f,h,e[n+6],17,-1473231341),h=i(h,d,m,f,e[n+7],22,-45705983),f=i(f,h,d,m,e[n+8],7,1770035416),m=i(m,f,h,d,e[n+9],12,-1958414417),d=i(d,m,f,h,e[n+10],17,-42063),h=i(h,d,m,f,e[n+11],22,-1990404162),f=i(f,h,d,m,e[n+12],7,1804603682),m=i(m,f,h,d,e[n+13],12,-40341101),d=i(d,m,f,h,e[n+14],17,-1502002290),h=i(h,d,m,f,e[n+15],22,1236535329),f=a(f,h,d,m,e[n+1],5,-165796510),m=a(m,f,h,d,e[n+6],9,-1069501632),d=a(d,m,f,h,e[n+11],14,643717713),h=a(h,d,m,f,e[n],20,-373897302),f=a(f,h,d,m,e[n+5],5,-701558691),m=a(m,f,h,d,e[n+10],9,38016083),d=a(d,m,f,h,e[n+15],14,-660478335),h=a(h,d,m,f,e[n+4],20,-405537848),f=a(f,h,d,m,e[n+9],5,568446438),m=a(m,f,h,d,e[n+14],9,-1019803690),d=a(d,m,f,h,e[n+3],14,-187363961),h=a(h,d,m,f,e[n+8],20,1163531501),f=a(f,h,d,m,e[n+13],5,-1444681467),m=a(m,f,h,d,e[n+2],9,-51403784),d=a(d,m,f,h,e[n+7],14,1735328473),h=a(h,d,m,f,e[n+12],20,-1926607734),f=s(f,h,d,m,e[n+5],4,-378558),m=s(m,f,h,d,e[n+8],11,-2022574463),d=s(d,m,f,h,e[n+11],16,1839030562),h=s(h,d,m,f,e[n+14],23,-35309556),f=s(f,h,d,m,e[n+1],4,-1530992060),m=s(m,f,h,d,e[n+4],11,1272893353),d=s(d,m,f,h,e[n+7],16,-155497632),h=s(h,d,m,f,e[n+10],23,-1094730640),f=s(f,h,d,m,e[n+13],4,681279174),m=s(m,f,h,d,e[n],11,-358537222),d=s(d,m,f,h,e[n+3],16,-722521979),h=s(h,d,m,f,e[n+6],23,76029189),f=s(f,h,d,m,e[n+9],4,-640364487),m=s(m,f,h,d,e[n+12],11,-421815835),d=s(d,m,f,h,e[n+15],16,530742520),h=s(h,d,m,f,e[n+2],23,-995338651),f=o(f,h,d,m,e[n],6,-198630844),m=o(m,f,h,d,e[n+7],10,1126891415),d=o(d,m,f,h,e[n+14],15,-1416354905),h=o(h,d,m,f,e[n+5],21,-57434055),f=o(f,h,d,m,e[n+12],6,1700485571),m=o(m,f,h,d,e[n+3],10,-1894986606),d=o(d,m,f,h,e[n+10],15,-1051523),h=o(h,d,m,f,e[n+1],21,-2054922799),f=o(f,h,d,m,e[n+8],6,1873313359),m=o(m,f,h,d,e[n+15],10,-30611744),d=o(d,m,f,h,e[n+6],15,-1560198380),h=o(h,d,m,f,e[n+13],21,1309151649),f=o(f,h,d,m,e[n+4],6,-145523070),m=o(m,f,h,d,e[n+11],10,-1120210379),d=o(d,m,f,h,e[n+2],15,718787259),h=o(h,d,m,f,e[n+9],21,-343485551),f=t(f,u),h=t(h,c),d=t(d,l),m=t(m,p);return[f,h,d,m]}function c(e){var t,r="",n=32*e.length;for(t=0;t<n;t+=8)r+=String.fromCharCode(e[t>>5]>>>t%32&255);return r}function l(e){var t,r=[];for(r[(e.length>>2)-1]=void 0,t=0;t<r.length;t+=1)r[t]=0;var n=8*e.length;for(t=0;t<n;t+=8)r[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return r}function p(e){return c(u(l(e),8*e.length))}function f(e,t){var r,n,i=l(e),a=[],s=[];for(a[15]=s[15]=void 0,i.length>16&&(i=u(i,8*e.length)),r=0;r<16;r+=1)a[r]=909522486^i[r],s[r]=1549556828^i[r];return n=u(a.concat(l(t)),512+8*t.length),c(u(s.concat(n),640))}function h(e){var t,r,n="0123456789abcdef",i="";for(r=0;r<e.length;r+=1)t=e.charCodeAt(r),i+=n.charAt(t>>>4&15)+n.charAt(15&t);return i}function d(e){return unescape(encodeURIComponent(e))}function m(e){return p(d(e))}function g(e){return h(m(e))}function y(e,t){return f(d(e),d(t))}function v(e,t){return h(y(e,t))}function b(e,t,r){return t?r?y(t,e):v(t,e):r?m(e):g(e)}"function"==typeof define&&define.amd?define("lib/md5",[],function(){return b}):"object"==typeof module&&module.exports?module.exports=b:e.md5=b}(this),define("math/builtin",["require","math/mathshim","math/distance","math/quadrature","math/tofraction","math/poi","lib/md5"],function(e){function t(e,t,r){return Math.max(t,Math.min(r,e))}function r(e){return!(e>1e12)&&Math.round(m*e)*Math.PI===e}function n(e){if(e>1e12)return!1;var t=Math.round(2*m*e);return t%2==1&&t*Math.PI==2*e}function i(e,t,r){return r<0?p.tcdf(-1/0,e,t):r>0?p.tcdf(-1/0,-e,t):2*p.tcdf(-1/0,-Math.abs(e),t)}var a=e("math/mathshim"),s=e("math/distance"),o=e("math/quadrature"),u=e("math/tofraction").default,c=e("math/poi").floatMiddle,l=e("lib/md5"),p={};p.cosh=a.cosh,p.sinh=a.sinh,p.tanh=a.tanh,p.acosh=a.acosh,p.asinh=a.asinh,p.atanh=a.atanh,p.expm1=a.expm1,p.log1p=a.log1p,p.sqrtxsqp1=a.sqrtxsqp1,p.sqrtxsqm1=a.sqrtxsqm1,p.mod=function(e,t){return e-t*Math.floor(e/t)},p.round=function(e,t){if(void 0===t&&(t=0),0===(t=Math.round(t)))return Math.round(e);var r=Math.pow(10,t);return Math.round(e*r)/r},p.sign=Math.sign||function(e){return 0===e?0:e>0?1:e<0?-1:NaN},p.lcm=function(e,t){e=Math.round(e),t=Math.round(t);var r=p.gcd(e,t);return Math.abs(e/r*t)},p.gcd=function(e,t){if(e=Math.round(e),t=Math.round(t),e<0&&(e=-e),t<0&&(t=-t),t>e){var r=t;t=e,e=r}if(0===t)return e;for(var n=e%t;n>0;)e=t,t=n,n=e%t;return t},p.listGCD=function(e){if(0===e.length)return NaN;for(var t=e[0],r=1;r<e.length;r++)t=p.gcd(t,e[r]);return t},p.listLCM=function(e){if(0===e.length)return NaN;for(var t=e[0],r=1;r<e.length;r++)t=p.lcm(t,e[r]);return t},p.nCr=function(e,t){if(e=Math.round(e),(t=Math.round(t))>e||e<0||t<0)return 0;if(t===1/0||e===1/0)return NaN;for(var r=1,n=0;n<t;n++)r*=(e-n)/(n+1);return r},p.nPr=function(e,t){if(e=Math.round(e),(t=Math.round(t))>e||e<0||t<0)return 0;if(t===1/0||e===1/0)return NaN;for(var r=1,n=0;n<t;n++)r*=e-n;return r},p.factorial=function(e){return p.gamma(e+1)},p.gamma=function(e){if(e<0)return Math.PI/(p.sin(Math.PI*e)*p.gamma(1-e));if(e>170)return 1/0;var t,r=Math.round(e)===e;return t=e<15?f(e):e<120?h(e):Math.exp(d(e)),r?Math.round(t):t};var f=function(e){var t=1+e*(4.077131788261185+e*(7.024675027156382+e*(6.657107767450176+e*(3.766266976716022+e*(1.2792371666711133+e*(.24304596436338005+.020049769312165774*e)))))),r=1+e*(4.154347453162709+e*(7.270007565107539+e*(6.97805297331391+e*(3.989651532924167+e*(1.367176195613119+e*(.26175627691546965+.021742722739397567*e))))));return Math.E*Math.pow((1+e)/Math.E,1+e)/(e*Math.sqrt(1+e))*(t/r)\n},h=function(e){var t=e-1;return Math.pow(t,t)*Math.exp(y(t)-t)*Math.sqrt(2*Math.PI*t)},d=function(e){var t=e-1;return t*(Math.log(t)-1)+.5*Math.log(2*Math.PI*t)+y(t)};p.lnGamma=function(e){return e<0?NaN:e<15?Math.log(f(e)):d(e)},p.bernoulliTable=[1/6,-1/30,1/42,-1/30,5/66,-691/2730,7/6,-3617/510,43867/798,-174611/330,854513/138,-236364091/2730,8553103/6,-23749461029/870],p.cotDerivative=function(e,t){if(e!==Math.floor(e))return NaN;if(e<0)return NaN;if(0===e)return 1/p.tan(t);var r=p.sin(t);if(1===e)return-1/(r*r);var n=p.cos(t);if(2===e)return 2*n/(r*r*r);var i,a,s,o,u,c=[0,2];for(a=3;a<=e;a++){for(i=[],s=0;s<a;s++)o=0,u=0,s>0&&(o=(a-s+1)*c[s-1]),s+2<a&&(u=(s+1)*c[s+1]),i.push(-(o+u));c=i}var l=0;for(s=e-1;s>=0;s--)l=i[s]+n*l;return l/Math.pow(r,e+1)},p.polyGamma=function(e,t){if(e<0)return NaN;if(e!==Math.floor(e))return NaN;var r=e%2==0?-1:1;if(t<0)return-r*p.polyGamma(e,1-t)-Math.pow(Math.PI,e+1)*p.cotDerivative(e,Math.PI*t);for(var n=p.factorial(e),i=0,a=Math.pow(t,-(e+1));t<10;)i+=a,t++,a=Math.pow(t,-(e+1));i+=0===e?-Math.log(t):a*t/e,i+=.5*a;for(var s=p.bernoulliTable,o=e+1,u=2,c=a*t*o/u,l=1/(t*t),f=1;f<=14;f++)c*=l,i+=c*s[f-1],o++,u++,c*=o/u,o++,u++,c*=o/u;return n*r*i},p.toFraction=u,p.log=function(e){var t=Math.log(e);return Math.exp(Math.round(t))===e?Math.round(t):t},p.log_base=function(e,t){if(0===t)return NaN;var r=Math.log(e)/Math.log(t);return Math.pow(t,Math.round(r))===e?Math.round(r):r},p.common_log=function(e){return p.log_base(e,10)},p.pow=function(e,t){if(!isFinite(e)&&0===t)return NaN;if(e>=0||t===Math.floor(t))return Math.pow(e,t);var r=p.toFraction(t,100);return s.approx(r.n/r.d,t,2)&&r.d%2==1?(r.n%2==0?1:-1)*Math.pow(-e,t):NaN},p.nthroot=function(e,t){return p.pow(e,1/t)};var m=1/Math.PI;p.sin=function(e){return r(Math.abs(e))?0:Math.sin(e)},p.cos=function(e){return n(Math.abs(e))?0:Math.cos(e)},p.tan=function(e){var t=Math.abs(e);return r(t)?0:n(t)?1/0:Math.tan(e)},p.sec=function(e){return n(Math.abs(e))?1/0:1/Math.cos(e)},p.csc=function(e){return r(Math.abs(e))?1/0:1/Math.sin(e)},p.cot=function(e){var t=Math.abs(e);return r(t)?1/0:n(t)?0:1/Math.tan(e)},p.acot=function(e){return Math.PI/2-Math.atan(e)},p.acsc=function(e){return Math.asin(1/e)},p.asec=function(e){return Math.acos(1/e)},p.sech=function(e){return 1/p.cosh(e)},p.csch=function(e){return 1/p.sinh(e)},p.coth=function(e){return 1/p.tanh(e)},p.asech=function(e){return p.acosh(1/e)},p.acsch=function(e){return p.asinh(1/e)},p.acoth=function(e){return p.atanh(1/e)},p.mean=function(e){for(var t=0,r=0;r<e.length;r++)t+=e[r];return t/e.length},p.total=function(e){for(var t=0,r=0;r<e.length;r++)t+=e[r];return t};var g=function(e){return e>50?Math.exp(.5*((1-e)*a.log1p(-1/(e-1))-1)+y(.5*(e-1))-y(.5*(e-2)))*Math.sqrt((1-1/e)/(2*Math.PI)):p.gamma((e+1)/2)/(p.gamma(e/2)*Math.sqrt(e*Math.PI))},y=function(e){var t=e*e;return(.08333333333333333-(.002777777777777778-(.0007936507936507937-(.0005952380952380953-.0008417508417508417/t)/t)/t)/t)/e};p.tpdf=function(e,t){return t<=0?NaN:g(t)*Math.pow(1+e*e/t,-(t+1)/2)};var v=function(e,t){if(t>0)return 1-v(e,-t);if(t===-1/0)return 0;var r=Math.sqrt(2*e/(e+1));if(Math.abs(t/r)<.001)return.5*(1+Math.sqrt(Math.PI)*g(e)*r*p.erf(t/r));if(t/e<-1e3){var n=t*t;return g(e)*Math.pow(e,.5*(e-1))*Math.pow(Math.abs(t),-e)*(1-e*e*(e+1)*(1/(2+e)+e*(e+3)/(4*(4+e)*n))/(2*n))}var i=Math.sqrt(t*t+e);return b((t+i)/(2*i),e/2,e/2)};p.tcdf=function(e,t,r){return r<=0?NaN:e===-1/0?v(r,t):e>0&&t>0?v(r,-e)-v(r,-t):v(r,t)-v(r,e)};var b=function(e,t,r){if(e<0||e>1)throw new RangeError("First argument must be between 0 and 1.");if(1===t&&1===r)return e;if(0===e)return 0;if(1===e)return 1;if(0===t)return 1;if(0===r)return 0;var n=Math.exp(p.lnGamma(t+r)-p.lnGamma(t)-p.lnGamma(r)+t*Math.log(e)+r*a.log1p(-e));return e<(t+1)/(t+r+2)?n*x(e,t,r)/t:1-n*x(1-e,r,t)/r},x=function(e,t,r){var n,i,a,s,o,u,c,l,p,f=1;for(c=t+r,p=t+1,l=t-1,a=1,s=1-c*e/p,Math.abs(s)<1e-30&&(s=1e-30),s=1/s,u=s;f<=100&&(n=2*f,i=f*(r-f)*e/((l+n)*(t+n)),s=1+i*s,Math.abs(s)<1e-30&&(s=1e-30),a=1+i/a,Math.abs(a)<1e-30&&(a=1e-30),s=1/s,u*=s*a,i=-(t+f)*(c+f)*e/((t+n)*(p+n)),s=1+i*s,Math.abs(s)<1e-30&&(s=1e-30),a=1+i/a,Math.abs(a)<1e-30&&(a=1e-30),s=1/s,o=s*a,u*=o,!(Math.abs(o-1)<3e-7));f++);return u},_=function(e,t,r){return(e-t)/(Math.SQRT2*Math.abs(r))},S=function(e){return e<0?.5*Math.exp(-e*e)*p.erfcx(-e):1-.5*Math.exp(-e*e)*p.erfcx(e)};p.normalcdf=function(e,t,r,n){var i=_(t,r,n);if(e===-1/0)return S(i);var a=_(e,r,n);return e>0&&t>0?S(-a)-S(-i):S(i)-S(a)},p.normalpdf=function(e,t,r){return 1/Math.sqrt(2*Math.PI*r*r)*Math.exp(-(e-t)*(e-t)/(2*r*r))},p.random=function(e){var t=l(e);return(4294967296*(2097151&parseInt(t.slice(0,8),16))+parseInt(t.slice(8,16),16))/9007199254740992},p.uniformSample=function(e,t,r){return p.random(e)*(r-t)+t},p.normalSample=function(e,t,r){var n,i,a,s,o=0;do{n=e+"::sc"+o,o+=1,i=2*p.uniformSample(n,0,1)-1,n=e+"::sc"+o,o+=1,a=2*p.uniformSample(n,0,1)-1,s=i*i+a*a}while(s>=1||0===s);return t+r*i*Math.sqrt(-2*Math.log(s)/s)},p.tSample=function(e,t){if(t<=0)return NaN;var r,n,i,a,s=0;do{r=e+"::sc"+s,s+=1,n=2*p.uniformSample(r,0,1)-1,r=e+"::sc"+s,s+=1,i=2*p.uniformSample(r,0,1)-1,a=n*n+i*i}while(a>1);var o=n*n/a,u=t*(Math.pow(a,-2/t)-1);return r=e+"::sc"+s,s+=1,(p.uniformSample(r,0,1)<.5?-1:1)*Math.sqrt(o*u)},p.binomSample=function(e,r,n){return(r=t(Math.round(r),0,1/0))===1/0?NaN:(n=t(n,0,1),p.invBinom(p.uniformSample(e,0,1),r,n))},p.poissonSample=function(e,t){return t<=0?NaN:p.invPoisson(p.uniformSample(e,0,1),t)};var M=function(e,t,r){if(e>=t)return 1;if(e<0)return 0;for(var n=r/(1-r),i=Math.pow(1-r,t),a=i,s=1;s<=Math.min(t,e);s++)i*=(t-s+1)/s*n,a+=i;return a};p.binomcdf=function(e,r,n,i){return(n=t(Math.round(n),0,1/0))===1/0?NaN:(i=t(i,0,1),r<0?0:(e=Math.ceil(e),r=Math.floor(r),e===-1/0?M(r,n,i):M(r,n,i)-M(e-1,n,i)))},p.binompdf=function(e,r,n){return e=Math.round(e),(r=t(Math.round(r),0,1/0))===1/0?NaN:(n=t(n,0,1),e<0||e>r?0:p.nCr(r,e)*Math.pow(n,e)*Math.pow(1-n,r-e))},p.poissonpdf=function(e,t){return t<=0?NaN:(e=Math.round(e),e<0?0:Math.exp(-t+e*Math.log(t)-p.lnGamma(e+1)))};var E=function(e,t){if(e===1/0)return 1;if(e<0)return 0;for(var r=1,n=1,i=1;i<=e;i++){r*=t/i;var a=n;if((n+=r)===a)break}return Math.exp(-t)*n};p.poissoncdf=function(e,t,r){return r<=0?NaN:(e=Math.ceil(e),t=Math.floor(t),t<0?0:e===-1/0?E(t,r):E(t,r)-E(e-1,r))},p.uniformpdf=function(e,t,r){return r<=t?NaN:e<t||e>r?0:1/(r-t)};var w=function(e,t,r){return r<=t?NaN:e<t?0:e>r?1:(e-t)/(r-t)};p.uniformcdf=function(e,t,r,n){return w(t,r,n)-w(e,r,n)},p.erf=function(e){var t=-e*e;if(t<-750)return e>=0?1:-1;if(e>=.065)return 1-Math.exp(t)*p.erfcx(e);if(e<=-.065)return Math.exp(t)*p.erfcx(-e)-1;return e*(1.1283791670955126+t*(.37612638903183754+t*(.11283791670955126+t*(.026866170645131252+.005223977625442188*t))))},p.erfcx=function(e){if(e<0)return e<-6.1?2*Math.exp(e*e):2*Math.exp(e*e)-p.erfcx(-e);if(e>50){var t=.5641895835477563,r=e*e;return e>5e7?t/e:t*(r*(r+4.5)+2)/(e*(r*(r+5)+3.75))}return(.9999999999999999+e*(2.224574423459406+e*(2.444115549920689+e*(1.7057986861852539+e*(.8257463703357973+e*(.28647031042892007+e*(.07124513844341643+e*(.012296749268608364+e*(.001347817214557592+7263959403471071e-20*e)))))))))/(1+e*(3.352953590554884+e*(5.227518529742423+e*(5.003720878235473+e*(3.266590890998987+e*(1.5255421920765353+e*(.5185887413188858+e*(.12747319185915415+e*(.02185979575963238+e*(.0023889438122503674+.00012875032817508128*e))))))))))},p.invNorm=function(e){var t,r,n;return e>.5?-p.invNorm(1-e):.5===e?0:e<0?NaN:0===e?-1/0:(e<.02425?(t=Math.sqrt(-2*Math.log(e)),n=(((((-.00778489400243029*t-.322396458041136)*t-2.40075827716184)*t-2.54973253934373)*t+4.37466414146497)*t+2.93816398269878)/((((.00778469570904146*t+.32246712907004)*t+2.445134137143)*t+3.75440866190742)*t+1)):(t=e-.5,r=t*t,n=(((((-39.6968302866538*r+220.946098424521)*r-275.928510446969)*r+138.357751867269)*r-30.6647980661472)*r+2.50662827745924)*t/(((((-54.4760987982241*r+161.585836858041)*r-155.698979859887)*r+66.8013118877197)*r-13.2806815528857)*r+1)),n-Math.sqrt(2*Math.PI)*(.5*p.erfcx(-n/Math.SQRT2)-Math.exp(.5*n*n)*e))},p.invPoisson=function(e,t){if(t<=0||e<0||e>1)return NaN;if(0===e)return 0;if(1===e)return 1/0;for(var r=1,n=1,i=1;Math.exp(-t)*n<e;){if(r*=t/i,n+r===n)return 1/0;n+=r,i+=1}return i-1},p.invBinom=function(e,t,r){if(t!==Math.round(t))return NaN;if(r<0||r>1)return NaN;if(e<0||e>1)return NaN;if(0===e)return 0;if(1===e)return t;if(0===t)return 0;if(1===r)return t;if(0===r)return 0;for(var n=r/(1-r),i=Math.pow(1-r,t),a=i,s=1;a<e;){if(i*=(t-s+1)/s*n,a+i===a)return t;if(s>t)return t;a+=i,s+=1}return s-1},p.invT=function(e,t){if(t<=0||e<0||e>1)return NaN;if(0===e)return-1/0;if(1===e)return 1/0;if(1===t||2===t||4===t)return D(t,e);var r,n;return.5===e?0:e>.5?(r=t>1?p.invNorm(e):D(1,e),n=t>1?D(1,e):Math.pow(p.tpdf(0,t)*Math.pow(t,(t-1)/2)/(1-e),1/t),T(t,e,r,n)):-p.invT(1-e,t)};var D=function(e,t){var r=4*t*(1-t);switch(e){case 1:return Math.tan(Math.PI*(t-.5));case 2:return 2*(t-.5)*Math.sqrt(2/r);case 4:var n=Math.cos(Math.acos(Math.sqrt(r))/3)/Math.sqrt(r);return 2*Math.sign(t-.5)*Math.sqrt(n-1);default:throw new Error("_invTSimple() must be called with 1, 2, or 4 df.")}},T=function(e,t,r,n){for(var i,a,s=r,o=n;;){if(i=c(s,o),a=v(e,i),i===s||i===o)return a>t?s:o;a<t?s=i:o=i}};return p.invUniform=function(e,t,r){return e<t||e>r||r<=t?NaN:t+e*(r-t)},p.tscore=function(e,t){var r=p.stdev(e);return(p.mean(e)-t)*Math.sqrt(e.length)/r},p.itscore=function(e,t){var r=e.length,n=p.mean(e),i=p.stdev(e),a=t.length,s=p.mean(t),o=p.stdev(t);return(n-s)/(Math.sqrt(((r-1)*i*i+(a-1)*o*o)/(r+a-2))*Math.sqrt(1/r+1/a))},p.ttest=function(e,t){1===arguments.length&&(t=0);var r=p.tscore(e,t),n=e.length-1;return{lessThan:i(r,n,-1),greaterThan:i(r,n,1),notEqual:i(r,n,0)}},p.ittest=function(e,t){var r=p.itscore(e,t),n=e.length+t.length-2;return{lessThan:i(r,n,-1),greaterThan:i(r,n,1),notEqual:i(r,n,0)}},p.stats=function(e){return{min:p.listMin(e),q1:p.quartile(e,1),median:p.median(e),q3:p.quartile(e,3),max:p.listMax(e)}},p.length=function(e){return e.length},p.listMin=function(e){if(e.length<1)return NaN;var t=e[0];if(isNaN(t))return NaN;for(var r=1;r<e.length;r++){if(isNaN(e[r]))return NaN;e[r]<t&&(t=e[r])}return t},p.listMax=function(e){if(e.length<1)return NaN;var t=e[0];if(isNaN(t))return NaN;for(var r=1;r<e.length;r++){if(isNaN(e[r]))return NaN;e[r]>=t&&(t=e[r])}return t},p.quantile=function(e,t){if(!isFinite(t)||t<0||t>1)return NaN;var r=e.length,n=p.sortPerm(e),i=t*(r-1);return Math.floor(i)===i?e[n[i]]:(Math.ceil(i)-i)*e[n[Math.floor(i)]]+(i-Math.floor(i))*e[n[Math.ceil(i)]]},p.quartile=function(e,t){if(!isFinite(t)||t<0||t>4)return NaN;var r=p.sortPerm(e),n=p.quartileIndex(e,t),i=Math.floor(n),a=Math.ceil(n);return(e[r[i]]+e[r[a]])/2},p.sortPerm=function(e){for(var t=e.length,r=[],n=0;n<t;n++)r.push(n);return r.sort(function(t,r){return e[t]-e[r]}),r},p.quartileIndex=function(e,t){t=Math.round(t);var r,n=e.length,i=n%2==1;return 1===n?0:(0===t&&(r=0),2===t&&(r=(n-1)/2),4===t&&(r=n-1),1===t&&(r=i?(n+1)/4-1:(n+2)/4-1),3===t&&(r=i?(3*n+3)/4-1:(3*n+2)/4-1),r)},p.upperQuantileIndex=function(e,t){return p.sortPerm(e)[Math.ceil(t*(e.length-1))]+1},p.lowerQuantileIndex=function(e,t){return p.sortPerm(e)[Math.floor(t*(e.length-1))]+1},p.upperQuartileIndex=function(e,t){return p.sortPerm(e)[Math.ceil(p.quartileIndex(e,t))]+1},p.lowerQuartileIndex=function(e,t){return p.sortPerm(e)[Math.floor(p.quartileIndex(e,t))]+1},p.median=function(e){return p.quantile(e,.5)},p.argMin=function(e){if(e.length<1)return 0;var t=e[0];if(isNaN(t))return 0;for(var r=0,n=1;n<e.length;n++){if(isNaN(e[n]))return 0;e[n]<t&&(r=n,t=e[n])}return r+1},p.argMax=function(e){if(e.length<1)return 0;var t=e[0];if(isNaN(t))return 0;for(var r=0,n=1;n<e.length;n++)if(e[n]>=t){if(isNaN(e[n]))return 0;r=n,t=e[n]}return r+1},p.varp=function(e){for(var t=p.mean(e),r=0,n=0;n<e.length;n++){var i=e[n]-t;r+=i*i}return r/e.length},p.mad=function(e){for(var t=p.mean(e),r=0,n=0;n<e.length;n++)r+=Math.abs(e[n]-t);return r/e.length},p.var=function(e){var t=e.length;return p.varp(e)*t/(t-1)},p.covp=function(e,t){if(e.length!==t.length)return NaN;for(var r=e.length,n=p.mean(e),i=p.mean(t),a=0,s=0;s<r;s++)a+=(e[s]-n)*(t[s]-i);return a/r},p.cov=function(e,t){if(e.length!==t.length)return NaN;var r=e.length;return p.covp(e,t)*r/(r-1)},p.corr=function(e,t){if(e.length!==t.length)return NaN;for(var r,n,i=e.length,a=p.mean(e),s=p.mean(t),o=0,u=0,c=0,l=0;l<i;l++)r=e[l]-a,n=t[l]-s,o+=r*r,u+=n*n,c+=r*n;return c/Math.sqrt(o*u)},p.stdev=function(e){return Math.sqrt(p.var(e))},p.stdevp=function(e){return Math.sqrt(p.varp(e))},p.quad=o.quad,p.distance=function(e,t){return s.hypot(t[0]-e[0],t[1]-e[1])},p.midpoint=function(e,t){return[.5*(e[0]+t[0]),.5*(e[1]+t[1])]},p}),define("math/functions",["require","math/builtin"],function(e){function t(e){for(var t=0;t<e.length;t++)e[t].compiled&&delete e[t].compiled.fn}function r(e){for(var t=0;t<e.length;t++){var r=e[t].compiled;r&&(r.fn=i(r.args,r.source))}}function n(e,t){for(var r=[],n=0;n<t;n++)r.push("values["+n+"]");return i(["values"],"return "+e(r))}function i(e,t){var r=e.join(","),n="return (function("+r+"){"+t+"})";return new Function(["BuiltIn"],n)(a)}var a=e("math/builtin");return{dehydrateGraphData:t,rehydrateGraphData:r,closureFunctionWithBuiltIn:i,createEvaluateFunction:n}}),define("math/parser/input-span",["require","exports"],function(e,t){"use strict";function r(e,t,r){return{input:e,start:t,end:r}}function n(e,t){return r(e,t,t)}function i(e,t){if(e.input!==t.input)throw new Error("Programming Error: cannot form a span on different inputs");return r(e.input,e.start,t.end)}function a(e){return e.input.slice(e.start,e.end)}Object.defineProperty(t,"__esModule",{value:!0}),t.Span=r,t.emptySpanAt=n,t.joinSpans=i,t.slice=a}),define("math/policy",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=["Sum","Product","Integral","List","Derivative","Piecewise","Exponent","PercentOf"];t.defaultPolicy={assignmentForbidden:function(e){return!0},graphingEnabled:function(){return!1},isValidSlider:function(e){return!1},sliderVariables:function(e){return[]},ansEnabled:function(){return!1},disabledFeatures:function(){return r}}}),define("math/parsenode/base",["require","pjs","math/functions","math/parser/input-span","math/policy"],function(e){var t=e("pjs"),r=e("math/functions"),n=e("math/parser/input-span"),i=e("math/policy").defaultPolicy;return t(function(e,t,a){e.init=function(){this._dependencies=[],this._dummyDependencies=[],this._exports=[]},e.exportPenalty=0;var s=0;e.tmpVar=function(){return"tmp"+s++},e.dependencies=function(){return this.getDependencies()},e.evaluateOnce=function(e){void 0===e&&(e={});var t=this.getConcreteTree(i,e),r=t.getEvaluationInfo();return r?r[0].val:NaN},e.setInputSpan=function(e){this._inputSpan=e},e.getInputString=function(){return void 0===this._inputSpan?"":n.slice(this._inputSpan)},e.getInputSpan=function(){return this._inputSpan},e.shouldExportAns=function(){return!1},e.getAnsVariable=function(){return this.shouldExportAns()&&this.userData&&this.userData.hasOwnProperty("index")?["ans_"+this.userData.index]:[]},e.addDependency=function(e){this.dependsOn(e)||this._dependencies.push(e)},e.addDependencies=function(e){for(var t=0;t<e.length;t++)this.addDependency(e[t])},e.addDummyDependency=function(e){-1===this._dummyDependencies.indexOf(e)&&this._dummyDependencies.push(e)},e.addDummyDependencies=function(e){for(var t=0;t<e.length;t++)this.addDummyDependency(e[t])},e.mergeDependencies=function(){for(var e=0;e<arguments.length;e++)this.addDependencies(arguments[e].getDependencies()),this.addDummyDependencies(arguments[e].getDummyDependencies())},e.getDependencies=function(){return this._dependencies},e.getDummyDependencies=function(){return this._dummyDependencies},e.removeDependency=function(e){var t=this._dependencies.indexOf(e);t>=0&&this._dependencies.splice(t,1)},e.dependsOn=function(e){return this._dependencies.indexOf(e)>-1},e.getExports=function(){return(this._exports||[]).concat(this.getAnsVariable())},e.getLegalExports=function(e){return this.getExports().filter(function(t){return!e.assignmentForbidden(t)})},e.exportsSymbol=function(e){return this._exports.indexOf(e)>-1},e.exportTo=function(e,t,r){for(var n=this.getLegalExports(e),i=0;i<n.length;i++){var a=n[i];if(r[a])return;r[a]=t.blocksExport?t:this}},e.getOperator=function(){return this.operator||"="},e.isInequality=function(){return!1},e.isShadeBetween=function(){return!1},e.getAllIds=function(){return this.userData?[this.userData.id]:[]},e.getEvaluationInfo=function(){return!1},e.shouldPromoteToSlider=function(e){return!1},e.getSliderVariables=function(e,t){return e.sliderVariables(t.getDependencies())},e.getCompiledFunction=function(e){var t=this.getEvalStrings(),n=t.statements.join(";")+";return "+t.expression;if(void 0===e){e=this.getDependencies();var i=e.indexOf("x");if(-1!==i){var a=e[0];e[0]=e[i],e[i]=a}}return{args:e,source:n,fn:r.closureFunctionWithBuiltIn(e,n)}},e.getCompiledDerivative=function(){var e=this.getDependencies();return this.takeDerivative(e[0]||"x").getCompiledFunction()},e.asValue=function(){}})}),define("math/parsenode/error",["require","pjs","./base"],function(e){return e("pjs")(e("./base"),function(e,t){e.init=function(e){t.init.call(this),this._msg=e,this._sliderVariables=[],this.blocksExport=!0},e.evaluateOnce=function(e){return this._msg},e.isError=!0,e.getError=function(){return this._msg},e.setDependencies=function(e){return this._dependencies=e,this},e.allowExport=function(){return this.blocksExport=!1,this}})}),define("bugsnag",["require","exports","tslib"],function(e,t,r){"use strict";function n(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})}function i(){return window.Desmos&&window.Desmos.commit}function a(){var e="production";if(location&&location.hostname){var t=location.hostname,r=t.split("."),n=r.slice(0,r.length-2).join(".");"desmos.com"===r.slice(r.length-2).join(".")&&(e=n&&"www"!==n?n:"production")}return e}function s(e){if(!l){var t=0,r=n();l=e({apiKey:"7f7807097671acbc4557e64bbf5eb529",maxBreadcrumbs:40,appVersion:i(),releaseStage:a(),consoleBreadcrumbsEnabled:!1,beforeSend:function(e){if(e.errorClass)for(var n=0,i=f;n<i.length;n++){var a=i[n];if(-1!==e.errorClass.indexOf(a))return void e.ignore()}if(e.errorMessage)for(var s=0,o=f;s<o.length;s++){var a=o[s];if(-1!==e.errorMessage.indexOf(a))return void e.ignore()}p&&p(e),e.isIgnored()||(t+=1,e.metaData.errorNumber=t,e.metaData.pageLoadId=r)}})}}function o(e,t){l&&l.notify(e,t)}function u(e,t,n,i){if(t){t=r.__assign({},t);for(var a in t)try{t[a]=JSON.stringify(t[a],null,2)}catch(e){t[a]="[[could not stringify]]"}}l&&l.leaveBreadcrumb(e,t,n,i)}function c(e){p=e}Object.defineProperty(t,"__esModule",{value:!0});var l,p,f=["UnhandledRejection","lnrAppboy","socratic","MyAppGet","SymBrowser_","mobincube_","_avast_submit","Cannot redefine property: googletag","jcarousel","SyntaxError: Unexpected identifier \'script\'","__gCrWeb.autofill.extractForms","BrowseITEXT","Can\'t find variable: removeAllHighlights","aAttribruteValue.parentNode.getAttribute","vid_mate_check","GetImageTagSrcFromPoint","Can\'t find variable: didEnterViewPort","tinyMCE is not defined"];t.init=s,t.notify=o,t.leaveBreadcrumb=u,t.setBeforeSendCB=c}),define("graphing/label",["require","exports","underscore","math/distance","math/tofraction","bugsnag"],function(e,t,r,n,i,a){"use strict";function s(e,t){if(void 0===t&&(t=e),isNaN(e)||!isFinite(e))return{ariaString:"undefined",string:"undefined",value:e};if(0===e)return{ariaString:"0",string:"0",value:e};Math.abs(e)>Math.abs(t)&&(t=e);var r,a,s,o=i.default(e/Math.PI,24);if(d(t)&&n.approx(o.n/o.d*Math.PI,e,3))return r=0===o.n?"0":1===o.n?"π":-1===o.n?"-π":o.n.toString()+"π",a=1===o.d?"":"/"+o.d.toString(),s=r+a,{ariaString:c(s),string:s,value:o.n/o.d*Math.PI};if(d(t))return s=h(p(e.toFixed(m(t)))),{ariaString:c(s),string:s,value:parseFloat(s)};var u=f(e.toExponential(m(t/e))).split("e"),l=u[0]+"×10",g=u[1].replace("+","");return s=f(e.toExponential(m(t/e))).replace("+",""),{ariaString:c(s),string:s,mantissa:l,superscript:g,value:parseFloat(s)}}function o(e){return P["["+e+"]"]}function u(e){return e[0]+e.slice(1).split("").join(" ")}function c(e){return e.replace(C,u).replace(I,o).replace(/ +/gi," ").trim()}function l(e,t,r,n){var i=s(e,t);return[i,s(n(i.value),r)]}function p(e){return-1===e.indexOf(".")?e:e.replace(O,"")}function f(e){var t=/\\.?0+e/;return e.replace(t,"e")}function h(e){return"-0"===e?"0":e}function d(e){return 1e-4<(e=Math.abs(e))&&e<1e7}function m(e){return e=Math.abs(e),e=Math.max(e,1e-16),Math.max(3,Math.floor(4.5-Math.log(e)/Math.LN10))}function g(e){return 1e6/Math.sqrt(Math.abs(e))}function y(e){var t=g(e);if(t<1)return!1;if(t>1e12)return!1;var r=i.default(e,t),n=r.n,a=r.d;return 1!==a&&e===e+Math.pow(2,-3)*Math.abs(n/a-e)}function v(e,t){if(t=t||{},isNaN(e)||!isFinite(e))return{type:"undefined"};if(0===e||t.zeroCutoff&&Math.abs(e)<t.zeroCutoff)return{type:"decimal",value:"0"};"number"!=typeof e&&(a.notify("non-number passed to numericLabel",{metaData:{type:typeof e,value:e}}),e=parseFloat(e));var r=t.smallCutoff||.001,n=t.bigCutoff||1e6,s=t.digits||10,o=f(e.toExponential(s-2)),u=o.match(/([\\d\\.\\-]+)e\\+?([\\d\\-]+)/);if(!u)return{type:"undefined"};var c=parseInt(u[2],10)>=s,l=y(e);if(Math.abs(e)>n||Math.abs(e)<r||c)return{type:"scientific",mantissa:u[1],exponent:u[2]};if(l&&t.displayAsFraction){var h=i.default(e,g(e));return{type:"fraction",numerator:h.n.toString(),denominator:h.d.toString()}}var d=p(e.toPrecision(s));return e!==Number(d)&&t.addEllipses&&(d+="..."),{type:"decimal",value:d}}function b(e,t){var r=v(e,t);switch(r.type){case"undefined":return"undefined";case"decimal":return r.value;case"scientific":return r.mantissa+"<span class=\'dcg-cross\'>×</span>10<sup>"+r.exponent+"</sup>";case"fraction":return"1"===r.denominator?r.numerator:r.numerator+"/"+r.denominator;default:return r}}function x(e,t){var r=v(e,t);switch(r.type){case"undefined":return"undefined";case"decimal":return r.value;case"scientific":return r.mantissa+" * 10^"+r.exponent;case"fraction":return"1"===r.denominator?r.numerator:r.numerator+"/"+r.denominator;default:return r}}function _(e,t){var r=v(e,t);switch(r.type){case"undefined":return"undefined";case"decimal":return r.value;case"scientific":return r.mantissa+"\\\\times10^{"+r.exponent+"}";case"fraction":return"1"===r.denominator?r.numerator:"-"===r.numerator[0]?"-\\\\frac{"+r.numerator.slice(1)+"}{"+r.denominator+"}":"\\\\frac{"+r.numerator+"}{"+r.denominator+"}";default:return r}}function S(e,t){var r=v(e,t);switch(r.type){case"undefined":return"undefined";case"decimal":return c(r.value);case"scientific":return c(r.mantissa+"e"+r.exponent);case"fraction":return c(r.numerator+"/"+r.denominator);default:return r}}function M(e){e=e.replace("\\\\","");var t={pi:"π",tau:"τ",theta:"θ",phi:"ϕ",div:"÷",cdot:"⋅",times:"×",lt:"<",gt:">",le:"≤",ge:"≥",sim:"∼",ldots:"…",prime:"′",approx:"≈"};return t.hasOwnProperty(e)?t[e]:e}function E(e){var t=e.split("_"),r="";return t[0].length>1&&(r+="\\\\"),r+=t[0],t[1]&&(1===t[1].length?r+="_"+t[1]:r+="_{"+t[1]+"}"),r}function w(e){if(!e)return"";var t=e.split("_").map(M).map(r.escape),n=t[0];return t[1]&&(n+="<sub>"+t[1]+"</sub>"),n}function D(e){return e=e.replace(/\\\\operatorname\\{(.*)\\}/,"$1"),e.replace(/[{}\\\\]/g,"")}function T(e){return e.replace(/^(\\\\ | |\\\\space)+/,"").replace(/(\\\\ | |\\\\space)+$/,"")}Object.defineProperty(t,"__esModule",{value:!0}),t.value=s;var P={"[e]":" times 10 to the ","[+]":" plus ","[-]":" minus ","[*]":" times ","[/]":" over ","[π]":" pi ","[τ]":" tau ","[θ]":" theta ","[ϕ]":" phi "},I=new RegExp(Object.keys(P).join("|"),"gi"),C=/\\.\\d+/g;t.point=l;var O=/\\.?0+$/;t.canDisplayAsFraction=y,t.numericLabel=v,t.truncatedHTMLLabel=b,t.truncatedPlainmathLabel=x,t.truncatedLatexLabel=_,t.truncatedAriaLabel=S,t.formatSymbol=M,t.identifierToLatex=E,t.identifierToHTML=w,t.latexToIdentifier=D,t.trimLatex=T}),define("math/types",["require","lib/worker-i18n"],function(e){function t(e){switch(e){case u:return"Any";case c:return"Number";case l:return"Bool";case p:return"Point";case f:return"Distribution";case h:return"ListOfAny";case d:return"ListOfNumber";case m:return"ListOfBool";case g:return"ListOfPoint";case y:return"ListOfDistribution";case v:return"ErrorType";case b:return"SeedType";default:throw new Error("Invalid type")}}function r(e){switch(e){case u:return o.t("an unknown object");case c:return o.t("a number");case l:return o.t("a true/false value");case p:return o.t("a point");case f:return o.t("a distribution");case h:return o.t("a list of unknown objects");case d:return o.t("a list of numbers");case m:return o.t("a list of true/false values");case g:return o.t("a list of points");case y:return o.t("a list of distributions");case v:return o.t("an error object");case b:return o.t("a string");default:throw new Error("Invalid type")}}function n(e){switch(e){case h:case d:case m:case g:case y:return!0;default:return!1}}function i(e){switch(e){case h:return u;case d:return c;case m:return l;case g:return p;case y:return f;default:return u}}function a(e){switch(e){case u:return h;case c:return d;case l:return m;case p:return g;case f:return y;default:throw new Error("Type "+t(e)+" does not implement listType.")}}function s(e){switch(e){case u:case c:case l:case p:case f:return!0;default:return!1}}var o=e("lib/worker-i18n"),u=0,c=1,l=2,p=3,f=4,h=5,d=6,m=7,g=8,y=9,v=10,b=11;return{Any:u,Number:c,Bool:l,Point:p,Distribution:f,ListOfAny:h,ListOfNumber:d,ListOfBool:m,ListOfPoint:g,ListOfDistribution:y,ErrorType:v,SeedType:b,repr:t,prettyPrint:r,isList:n,elementType:i,listType:a,hasListType:s}}),define("math/errormsg",["require","lib/worker-i18n","math/parsenode/error","graphing/label","math/types"],function(e){var t=e("lib/worker-i18n"),r=e("math/parsenode/error"),n=e("graphing/label"),i=e("math/types");return{parseError:function(){return r(t.t("Sorry, I don\'t understand this."))},unrecognizedSymbol:function(e){return e=n.formatSymbol(e),r(t.t("Sorry, I don\'t understand the \'__symbol__\' symbol.",{symbol:e}))},unexpectedInequality:function(){return r(t.t("Cannot use an inequality here."))},unexpectedSymbol:function(e){return e=n.formatSymbol(e),r(t.t("Sorry, I don\'t understand the way that \'__symbol__\' is used here.",{symbol:e}))},addTypeError:function(e){return r(t.t("Cannot add __symbol1__ and __symbol2__.",{symbol1:e[0],symbol2:e[1]})).allowExport()},subtractTypeError:function(e){return r(t.t("Cannot subtract __symbol2__ from __symbol1__.",{symbol1:e[0],symbol2:e[1]})).allowExport()},multiplyTypeError:function(e){return r(t.t("Cannot multiply __symbol1__ by __symbol2__.",{symbol1:e[0],symbol2:e[1]})).allowExport()},divideTypeError:function(e){return r(t.t("Cannot divide __symbol1__ by __symbol2__.",{symbol1:e[0],symbol2:e[1]})).allowExport()},exponentTypeError:function(e){return r(t.t("Cannot raise __symbol1__ to __symbol2__.",{symbol1:e[0],symbol2:e[1]})).allowExport()},negativeTypeError:function(e){return r(t.t("Cannot negate __symbol__.",{symbol:e[0]})).allowExport()},comparatorTypeError:function(e){return r(t.t("Cannot compare __symbol1__ to __symbol2__.",{symbol1:e[0],symbol2:e[1]})).allowExport()},andTypeError:function(e){return r(t.t("Cannot apply __symbol__ to __symbol1__ and __symbol2__.",{symbol:"and",symbol1:e[0],symbol2:e[1]})).allowExport()},listTypeError:function(e){return r(t.t("Cannot store __symbol1__ in a list.",{symbol1:e[0]})).allowExport()},pointTypeError:function(e){return r(t.t("Cannot use __symbol1__ and __symbol2__ as the coordinates of __symbol3__.",{symbol1:e[0],symbol2:e[1],symbol3:i.prettyPrint(i.Point)})).allowExport()},indexTypeError:function(e){return r(t.t("Cannot index __symbol1__ with __symbol2__.",{symbol1:e[0],symbol2:e[1]})).allowExport()},orderedPairAccessTypeError:function(e){return r(t.t("Cannot access a coordinate of __symbol__.",{symbol:e[0]})).allowExport()},functionTypeError:function(e,i){switch(i.length){case 1:return r(t.t("Function \'__fn__\' cannot be applied to __arg__.",{fn:n.formatSymbol(e),arg:i[0]})).allowExport();case 2:return r(t.t("Function \'__fn__\' cannot be applied to __arg1__ and __arg2__.",{fn:n.formatSymbol(e),arg1:i[0],arg2:i[1]})).allowExport();default:return r(t.t("Function \'__fn__\' cannot be applied to these arguments.",{fn:n.formatSymbol(e)})).allowExport()}},illegalDotCall:function(e){return r(t.t("Function \'__symbol__\' cannot be called with dot notation.",{symbol:n.formatSymbol(e)}))},dotLHSTypeError:function(e,i){return r(t.t("Cannot call \'__symbol__\' on __type__.",{symbol:n.formatSymbol(e),type:i}))},sumLowerBoundTypeError:function(e){return r(t.t("Lower bound of a sum cannot be __symbol__.",{symbol:e[0]})).allowExport()},sumUpperBoundTypeError:function(e){return r(t.t("Upper bound of a sum cannot be __symbol__.",{symbol:e[0]})).allowExport()},sumArgumentTypeError:function(e){return r(t.t("Cannot take the sum of __symbol__.",{symbol:e[0]})).allowExport()},productLowerBoundTypeError:function(e){return r(t.t("Lower bound of a product cannot be __symbol__.",{symbol:e[0]})).allowExport()},productUpperBoundTypeError:function(e){return r(t.t("Upper bound of a product cannot be __symbol__.",{symbol:e[0]})).allowExport()},productArgumentTypeError:function(e){return r(t.t("Cannot take the product of __symbol__.",{symbol:e[0]})).allowExport()},integralLowerBoundTypeError:function(e){return r(t.t("Lower bound of an integral cannot be __symbol__.",{symbol:e[0]})).allowExport()},integralUpperBoundTypeError:function(e){return r(t.t("Upper bound of an integral cannot be __symbol__.",{symbol:e[0]})).allowExport()},integralArgumentTypeError:function(e){return r(t.t("Cannot take the integral of __symbol__.",{symbol:e[0]})).allowExport()},derivativeTypeError:function(e){return r(t.t("Cannot take the derivative of __symbol__.",{symbol:e[0]})).allowExport()},derivativeVariableTypeError:function(e,i){return r(t.t("Cannot take derivative with respect to \'__symbol1__\' because it is __symbol2__.",{symbol1:n.formatSymbol(e),symbol2:i[0]}))},piecewiseConditionTypeError:function(e){return r(t.t("The condition in a piecewise expression must be __symbol1__ but was __symbol2__.",{symbol1:i.prettyPrint(i.Bool),symbol2:e[0]})).allowExport()},piecewiseBranchTypeError:function(e){return r(t.t("Cannot use __symbol__ as a branch of a piecewise expression.",{symbol:e[0]})).allowExport()},tableHeaderTypeError:function(e){return r(t.t("Table header cannot be __symbol__.",{symbol:e[0]}))},tableEntryTypeError:function(e){return r(t.t("Table entry cannot be __symbol__.",{symbol:e[0]}))},regressionTypeError:function(e){return r(t.t("Cannot regress __symbol1__ against __symbol2__.",{symbol1:e[0],symbol2:e[1]}))},heterogeneousList:function(){return r(t.t("All elements of a list must have the same type.")).allowExport()},deeplyNested:function(){return r(t.t("Definitions are nested too deeply.")).allowExport()},polygonListTypeError:function(e){return r(t.t("A single argument to polygon should be a point list, not __type__.",{type:e[0]}))},polygonPointArgsError:function(){return r(t.t("Some of your arguments are not points."))},polygonTwoNumbersError:function(){return r(t.t("Cannot make a polygon from two numbers."))},binCenterInvalid:function(){return r(t.t("Invalid bin center. Try using any number."))},boxplotOffsetInvalid:function(){return r(t.t("Invalid offset. Try using any number."))},boxplotBreadthInvalid:function(){return r(t.t("Invalid height. Try using any number."))},tooManyArguments:function(e,n){return r(t.t("\'__symbol__\' accepts at most __max__ arguments.",{symbol:e,max:n}))},pdfWrongArity:function(){var e=t.t("For example, try typing: D.pdf(x) where D=normaldist()."),n=t.t("\'pdf\' should be called on a distribution with a number. __recommendation__",{recommendation:e});return r(n)},cdfRequiresArguments:function(){\nvar e=t.t("For example, try typing: D.cdf(x) where D=normaldist()."),n=t.t("\'cdf\' should be called on a distribution with at least one number. __recommendation__",{recommendation:e});return r(n)},cdfTooManyArguments:function(){var e=t.t("For example, try typing: D.cdf(-1,1) where D=normaldist()."),n=t.t("\'cdf\' should be called on a distribution with at most two numbers. __recommendation__",{recommendation:e});return r(n)},tdistWrongArity:function(){return r(t.t("\'tdist\' requires 1 argument. For example, try typing: tdist(1)."))},randomArity:function(){var e=t.t("\'random\' should be called with no arguments, or an optional number of samples. For example, try random() or random(10).");return r(e)},randomFromBroadcastDistribution:function(){return r(t.t("Cannot sample from a list of distributions"))},wrongArity:function(e,i,a){e=n.formatSymbol(e);var s,o;if(1===i)o=t.t("For example, try typing: __dependency__(x).",{dependency:e}),s=a>1?t.t("Function \'__dependency__\' requires only 1 argument. __supplement__",{dependency:e,supplement:o}):t.t("Function \'__dependency__\' requires an argument. __supplement__",{dependency:e,supplement:o});else{for(var u=[],c=0;c<i;c++)u[c]=c+1;var l=n.formatSymbol(e)+"("+u.join(", ")+")";o=t.t("For example, try typing: __recommendation__.",{recommendation:l}),s=t.t("Function \'__dependency__\' requires __assignment_arity__ arguments. __supplement__",{dependency:e,assignment_arity:i,supplement:o})}return r(s)},wrongParametrizedReducerArity:function(e){return r(t.t("Function \'__symbol__\' requires 2 arguments. For example, try typing: __recommendation__.",{symbol:n.formatSymbol(e),recommendation:n.formatSymbol(e)+"([1,2,3], 1)"}))},wrongDoubleReducerArity:function(e){return r(t.t("Function \'__symbol__\' requires 2 arguments. For example, try typing: __recommendation__.",{symbol:n.formatSymbol(e),recommendation:n.formatSymbol(e)+"([1,2,3], [3,2,1])"}))},primedFunctionArity:function(){return r(t.t("Prime notation can only be used for functions of a single argument."))},zeroArgReducer:function(e){return r(t.t("Function \'__symbol__\' requires at least one argument. For example, try typing: __symbol__(1, 2).",{symbol:n.formatSymbol(e)}))},missingRHS:function(e){return e=n.formatSymbol(e),r(t.t("What do you want \'__symbol__\' to equal?",{symbol:e}))},malformedPoint:function(){return r(t.t("Points are written like this: (1, 2)."))},nonPairTuple:function(){return r(t.t("Points may only have 2 coordinates."))},badImplicitCall:function(e){return e=n.formatSymbol(e),r(t.t("Use parentheses around the argument of \'__symbol__\'.",{symbol:e}))},adjacentNumbers:function(e,n){return r(t.t("Sorry, I don\'t know what to do with adjacent numbers \'__left__\' and \'__right__\'. Try using parentheses or a \'*\' symbol.",{left:e,right:n}))},identifierAsFunction:function(e){return e=n.formatSymbol(e),r(t.t("\'__symbol__\' is a function. Try using parentheses.",{symbol:e}))},binaryOperatorMissingOperand:function(e){return e=n.formatSymbol(e),"%"===e&&(e="% of"),r(t.t("You need something on both sides of the \'__symbol__\' symbol.",{symbol:e}))},unaryOperatorMissingLeft:function(e){return e=n.formatSymbol(e),r(t.t("You need something before the \'__symbol__\' symbol.",{symbol:e}))},unaryOperatorMissingRight:function(e){return e=n.formatSymbol(e),r(t.t("You need something after the \'__symbol__\' symbol.",{symbol:e}))},fractionMissingNumerator:function(){return r(t.t("You need a numerator for the top of your fraction."))},fractionMissingDenominator:function(){return r(t.t("You need a denominator for the bottom of your fraction."))},fractionEmpty:function(){return r(t.t("You need a numerator and denominator for your fraction."))},emptySubscript:function(){return r(t.t("Subscripts cannot be empty."))},emptySuperscript:function(){return r(t.t("Superscripts cannot be empty."))},invalidSubscript:function(e){return e=n.formatSymbol(e),r(t.t("Subscripts may only contain letters and digits. \'__symbol__\' is not allowed.",{symbol:e}))},invalidOperatorName:function(){return r(t.t("Operator names may only contain letters."))},unexpectedSubscript:function(){return r(t.t("Only functions and variables may have subscripts."))},superscriptWithPrime:function(){return r(t.t("Superscripts and primes cannot be combined."))},unexpectedPrime:function(){return r(t.t("Sorry, I don\'t understand this use of prime notation."))},primeWithoutParen:function(){return r(t.t("Primed function calls must use parentheses."))},emptyRadical:function(){return r(t.t("Radical cannot be empty."))},emptyRadicand:function(){return r(t.t("Radicand cannot be empty."))},emptyParen:function(){return r(t.t("Parentheses cannot be empty."))},emptySquareBracket:function(){return r(t.t("Square brackets cannot be empty."))},emptyPipe:function(){return r(t.t("Absolute value symbol cannot be empty."))},badTrigExponent:function(e){var n=e+"^2",i=e+"^-1";return r(t.t("Only __form1__ and __form2__ are supported. Otherwise, use parens.",{form1:n,form2:i}))},badLogExponent:function(e){var n=e+"^2";return r(t.t("Only __form__ is supported. Otherwise, use parens.",{form:n}))},inequalityChainTooLong:function(){return r(t.t("Cannot chain more than 2 inequalities."))},piecewiseMissingCondition:function(){return r(t.t("A piecewise expression must have at least one condition."))},piecewisePartMissingCondition:function(){return r(t.t("Every part of a piecewise expression must have a condition except the last."))},colonMissingCondition:function(){return r(t.t("The left side of a \':\' must be a condition, like \'x>1\'."))},blankExpression:function(){return r(t.t("You haven\'t written anything yet."))},functionNotDefined:function(e){return e=n.formatSymbol(e),r(t.t("Function \'__dependency__\' is not defined.",{dependency:e}))},parameterAlreadyDefined:function(e){return e=n.formatSymbol(e),r(t.t("You can\'t use \'__dependency__\' as a parameter of this function because \'__dependency__\' is already defined.",{dependency:e}))},cannotRedefine:function(e,i){return e=n.formatSymbol(e),r(void 0===i?t.t("You can\'t redefine \'__symbol__\' because it\'s already defined.",{symbol:e}):t.t("You can\'t define \'__symbol__\' because \'__symbolRoot__\' is already defined.",{symbol:e,symbolRoot:i}))},cannotSubscript:function(e){return e=n.formatSymbol(e),r(t.t("\'__symbol__\' cannot have a subscript.",{symbol:e}))},multiplyDefined:function(e){return e=n.formatSymbol(e),r(t.t("You\'ve defined \'__dependency__\' in more than one place. Try deleting some of the definitions of \'__dependency__\'.",{dependency:e}))},shadowedIndex:function(e){return e=n.formatSymbol(e),r(t.t("You can\'t use \'__symbol__\' as an index because it\'s already defined.",{symbol:e}))},cycle:function(e){e=e.map(n.formatSymbol);var i=e.pop();return r(t.t("\'__symbols__\' and \'__lastSymbol__\' can\'t be defined in terms of each other.",{symbols:e.join("\', \'"),lastSymbol:i}))},selfReferentialFunction:function(e){return r(t.t("The definition of function \'__symbol__\' cannot depend on \'__symbol__\'.",{symbol:n.formatSymbol(e)}))},sliderLimitReferencesExport:function(e){return r(t.t("Slider limits cannot depend on the slider variable \'__symbol__\'.",{symbol:n.formatSymbol(e)}))},sliderMinInvalid:function(){return r(t.t("Invalid slider min. Try using any number."))},sliderMaxInvalid:function(){return r(t.t("Invalid slider max. Try using any number."))},sliderMaxLessThanMin:function(){return r(t.t("Invalid slider limits. Min should be less than max."))},sliderStepInvalid:function(){return r(t.t("Invalid slider step. Try using any number."))},domainMinInvalid:function(){return r(t.t("Invalid domain min. Try using any number."))},domainMaxInvalid:function(){return r(t.t("Invalid domain max. Try using any number."))},domainMaxLessThanMin:function(){return r(t.t("Invalid domain limits. Min should be less than max."))},cdfMinInvalid:function(){return r(t.t("Invalid cdf min. Try using any number."))},cdfMaxInvalid:function(){return r(t.t("Invalid cdf max. Try using any number."))},cdfMaxLessThanMin:function(){return r(t.t("Invalid cdf limits. Min should be less than max."))},tooManyVariables:function(e){if(e=e.map(n.formatSymbol),0===e.length)return r(t.t("Too many variables, I don\'t know what to do with this."));var i=e.pop();return r(t.t("Too many variables. Try defining \'__variables__\'.",{variables:(e.length?e.join("\', \'")+"\' or \'":"")+i}))},addArgumentsToDefinition:function(e,i,a){e=e.map(n.formatSymbol),i=n.formatSymbol(i),a=a.map(n.formatSymbol);var s=i+"("+a.join(",")+","+e.join(",")+")",o=e.pop(),u={symbols:e.join("\', \'"),lastSymbol:o,newSignature:s};return r(e.length?t.t("Try including \'__symbols__\' and \'__lastSymbol__\' as arguments by defining the function as \'__newSignature__\'.",u):t.t("Try including \'__lastSymbol__\' as an argument by defining the function as \'__newSignature__\'.",u))},invalidLHS:function(e){return e=n.formatSymbol(e),r(t.t("Sorry, you can\'t graph __symbol__ as a function of anything yet.",{symbol:e}))},unplottablePolarFunction:function(){return r(t.t("We can\'t plot θ as a function of r. Try plotting r(θ) instead."))},invalidInequalityVariables:function(){return r(t.t("We only plot inequalities of x and y, or r and θ."))},invalidImplicitVariables:function(){return r(t.t("We only support implicit equations of x and y."))},singleVariableImplicitEquationsDisabled:function(){return r(t.t("Plotting single-variable implicit equations is disabled."))},complicatedImplicitInequality:function(){return r(t.t("We can only plot inequalities when one variable is quadratic or linear."))},complicatedPolarImplicit:function(){return r(t.t("Polar equations must be linear in r."))},invalidDoubleInequalityVariables:function(){return r(t.t("We only plot double inequalities of x and y."))},mismatchedDoubleInequality:function(){return r(t.t("Double inequalities must both go the same way, e.g. 1 < y < 2."))},complicatedDoubleInequality:function(){return r(t.t("We only support solved double inequalities. Try deleting one side of the inequality."))},equationRequired:function(e){return e?(e=n.formatSymbol(e),r(t.t("Try adding \'__lhs__\' to the beginning of this equation.",{lhs:e+"="}))):r(t.t("Try adding an equals sign to turn this into an equation."))},variableAsFunction:function(e){return e=n.formatSymbol(e),r(t.t("Variable \'__dependency__\' can\'t be used as a function.",{dependency:e}))},distributionAsFunction:function(e){return e=n.formatSymbol(e),r(t.t("Cannot call distribution \'__symbol__\' as a function. Try \'__symbol__.pdf(x)\'.",{symbol:e}))},emptyList:function(){return r(t.t("Empty lists are not allowed."))},invalidTableHeader:function(e){return r(t.t("Table headers must be simple expressions. __supplement__",{supplement:e}))},invalidTableEntry:function(e){return r(t.t("Table entries must be simple expressions. __supplement__",{supplement:e}))},invalidFirstTableColumn:function(){return r(t.t("First column may not be __most__ or __last__.",{most:"\'y\', \'r\',",last:"\'θ\'"}))},invalidDependentFirstTableColumn:function(){return r(t.t("This column header can\'t be defined elsewhere in the calculator."))},invalidRegressionParameter:function(e){return r(t.t("\'__symbol__\' may not be used as a regression parameter.",{symbol:n.formatSymbol(e)}))},optimizationError:function(){return r(t.t("We couldn\'t find any region where this model is defined."))},badListInReducer:function(e){return r(t.t("When __symbol__ is called with more than two arguments, no argument can be a list.",{symbol:n.formatSymbol(e)})).allowExport()},nonListDoubleReducer:function(e){return r(t.t("Both arguments of \'__symbol__\' must be lists. For example, try typing: __recommendation__.",{symbol:n.formatSymbol(e),recommendation:n.formatSymbol(e)+"([1,2,3], [3,2,1])"})).allowExport()},nonListParametrizedReducer:function(e){return r(t.t("The first argument of \'__symbol__\' must be a list. For example, try typing: __recommendation__.",{symbol:n.formatSymbol(e),recommendation:n.formatSymbol(e)+"([1,2,3], 1)"})).allowExport()},methodRequiresList:function(e){return r(t.t("\'__symbol__\' requires a list. For example, try typing: __recommendation__.",{symbol:n.formatSymbol(e),recommendation:n.formatSymbol(e)+"([1,2,3])"})).allowExport()},variableRange:function(e){return r(t.t("Range cannot depend on free variable \'__symbol__\'.",{symbol:n.formatSymbol(e[0])})).setDependencies(e).allowExport()},nonArithmeticRange:function(e){return r(t.t("Ranges must be arithmetic sequences.")).allowExport()},sumMissingBound:function(){return r(t.t("Sums must have upper and lower bounds."))},productMissingBound:function(){return r(t.t("Products must have upper and lower bounds."))},incorrectSumLowerBound:function(){return r(t.t("Lower bound of a sum must set a variable equal to a number. Try n=1."))},incorrectProductLowerBound:function(){return r(t.t("Lower bound of a product must set a variable equal to a number. Try n=1."))},integralMissingBound:function(){return r(t.t("Integrals must have upper and lower bounds."))},integralMissingDifferential:function(){return r(t.t("Integrand must end with an integration variable, like dx."))},differentialWithSuperscript:function(){return r(t.t("Integration variable cannot have a superscript."))},sumMissingBody:function(){return r(t.t("What do you want to take the sum of?"))},productMissingBody:function(){return r(t.t("What do you want to take the product of?"))},integralMissingBody:function(){return r(t.t("What do you want to take the integral of?"))},derivativeMissingBody:function(){return r(t.t("What do you want to take the derivative of?"))},mismatchedBraces:function(e,i){return e=n.formatSymbol(e),i=n.formatSymbol(i),r(t.t("Expected \'__symbol1__\' to match \'__symbol2__\'.",{symbol1:e,symbol2:i}))},shadowedIntegrationVariable:function(e){return r(t.t("You can\'t use \'__symbol__\' as an integration variable because it\'s already defined.",{symbol:n.formatSymbol(e)}))},badIntegralBoundDependency:function(e){return r(t.t("Integration bounds can\'t depend on integration variable \'__symbol__\'.",{symbol:n.formatSymbol(e)}))},percentMissingOf:function(){return r(t.t("\'%\' must be used with \'of\'. Try \'25% of 12\'."))},illegalBinWidth:function(e){return e=n.formatSymbol(e),r(t.t("The second argument to \'__symbol__\' must be a positive number.",{symbol:e}))},ttestListTooShort:function(e){return e=n.formatSymbol(e),r(t.t("Lists for \'__symbol__\' must have at least 2 elements.",{symbol:e}))},badSampleSize:function(){return r(t.t("Sample size must be at least 1."))},variableSampleSize:function(e){return r(t.t("Sample size cannot depend on free variable \'__symbol__\'.",{symbol:n.formatSymbol(e[0])})).setDependencies(e).allowExport()},variableSeed:function(e){return r(t.t("Random seed cannot depend on free variable \'__symbol__\'.",{symbol:n.formatSymbol(e[0])})).setDependencies(e).allowExport()},badAnsContext:function(){return r(t.t("You can\'t use \'ans\' in this context."))},ansUndefined:function(){return r(t.t("The previous expression didn\'t define any value for ans."))},variablesUnsupported:function(e){return r(t.t("This calculator does not support variables like \'__variable__\'.",{variable:n.formatSymbol(e)}))},functionUnsupported:function(e){return r(t.t("This calculator does not support the \'__symbol__\' function.",{symbol:n.formatSymbol(e)}))},logbaseUnsupported:function(){return r(t.t("This calculator does not support specifying the base of a logarithm. Try \'log\' or \'ln\'."))},constantUnsupported:function(e){return r(t.t("This calculator does not support the constant \'__symbol__\'.",{symbol:n.formatSymbol(e)}))},assignmentsUnsupported:function(){return r(t.t("This calculator does not support defining variables."))},functionDefinitionsUnsupported:function(){return r(t.t("This calculator does not support function definitions."))},equationsUnsupported:function(){return r(t.t("This calculator does not support this type of equation."))},inequalitiesUnsupported:function(){return r(t.t("This calculator does not support inequalities."))},regressionsUnsupported:function(){return r(t.t("This calculator does not support regressions."))},pointsUnsupported:function(){return r(t.t("This calculator does not support points."))},featureUnavailable:function(){return r(t.t("This feature is not available in the current calculator."))},nonSquareDeterminant:function(){return r(t.t("Only square matrices have a determinant."))},nonSquareInverse:function(){return r(t.t("Only square matrices have an inverse."))},singularInverse:function(){return r(t.t("Singular matrices do not have an inverse."))},matrixAssignment:function(){return r(t.t("This calculator does not support this type of variable definition. Try using \'New Matrix\'."))},matrixAddDimensions:function(){return r(t.t("Cannot add matrices with different dimensions."))},matrixSubtractDimensions:function(){return r(t.t("Cannot subtract matrices with different dimensions."))},matrixMultiplyDimensions:function(){return r(t.t("Cannot multiply matrices with incompatible dimensions."))},matrixFractionalPower:function(){return r(t.t("A matrix can only be raised to integer powers."))},matrixPowerDimensions:function(){return r(t.t("Only square matrices can be raised to a power."))},matrixElementTypeError:function(e){return r(t.t("Cannot use __arg__ as an element of a matrix.",{arg:e[0]}))},matrixInvalidVariable:function(e){return r(t.t("Cannot use \'__symbol__\' as a variable.",{symbol:n.formatSymbol(e)}))}}}),define("math/parsenode/expression",["require","pjs","./base","math/errormsg","math/types"],function(e){var t=e("pjs"),r=e("./base"),n=e("math/errormsg"),i=e("math/types");return t(r,function(e,t){e.init=function(e){if(!Array.isArray(e))throw new TypeError("Argument to expression constructor must be an Array.");t.init.call(this),this.args=e,this.valueType=this._getValueType(e),this.registerDependencies(),this.computeTreeSize()},e._getValueType=function(e){return i.Any},e.shouldExportAns=function(){return!0},e.registerDependencies=function(){for(var e=0;e<this.args.length;e++)this.mergeDependencies(this.args[e])},e.computeTreeSize=function(){for(var e=0,t=0;t<this.args.length;t++)this.args[t].treeSize&&(e+=this.args[t].treeSize);if(this.treeSize=e+1,e>1e4)throw n.deeplyNested()},e.copyWithArgs=function(e){return new this.constructor(e)}})}),define("math/parsenode/scalarexpression",["require","pjs","./expression"],function(e){return e("pjs")(e("./expression"),function(e,t){e.init=function(e){t.init.call(this,e)},e.getEvalStrings=function(){for(var e=[],t=[],r=0;r<this.args.length;r++){var n=this.args[r].getEvalStrings();e=e.concat(n.statements),t.push(n.expression)}return{statements:e,expression:this.scalarEvalExpression(t)}}})}),define("math/parsenode/expressionTypes",["require","pjs","./scalarexpression"],function(e){var t=e("pjs"),r=e("./scalarexpression"),n={Add:t(r,{}),Subtract:t(r,{}),Multiply:t(r,{}),Divide:t(r,{}),Exponent:t(r,{}),Negative:t(r,{}),And:t(r,{isInequality:function(){return this.args[0].isInequality()&&this.args[1].isInequality()}}),PercentOf:t(r,{})};return n.RawExponent=t(n.Exponent,{}),n}),define("math/maybe-rational",["require","exports","math/builtin"],function(e,t,r){"use strict";function n(e,t){return{n:e,d:t}}function i(e){return"object"==typeof e&&"number"==typeof e.n&&"number"==typeof e.d}function a(e){var t=e.match(/^(-)?(\\d*)?(?:\\.(\\d*))?$/);if(!t)return NaN;var r=t[1],n=t[2],i=t[3];if(!n&&!i)return NaN;var a=!!r;if(i){var s=i.replace(/0+$/,""),u=s.length,c=Math.pow(10,u),l=parseInt(n||"0",10)*c+parseInt(s||"0",10);return l>_||c>_?parseFloat(e):o(a?-l:l,c)}var l=parseInt(n,10);return l>_?parseFloat(e):o(a?-l:l,1)}function s(e){return i(e)?e.n/e.d:e}function o(e,t){if(!isFinite(e)||!isFinite(t)||0===t||Math.floor(e)!==e||Math.floor(t)!==t||Math.abs(e)>_||Math.abs(t)>_)return e/t;t<0&&(e=-e,t=-t);var i=r.gcd(e,t);return n(e/i,t/i)}function u(e){return i(e)?n(-e.n,e.d):-e}function c(e){return i(e)?n(Math.abs(e.n),Math.abs(e.d)):Math.abs(e)}function l(e){return i(e)?0===e.n?e.d/e.n:n(e.n<0?-e.d:e.d,Math.abs(e.n)):1/e}function p(e,t){if(!i(e)||!i(t))return s(e)+s(t);var n=r.gcd(e.d,t.d);return o(e.n*(t.d/n)+t.n*(e.d/n),e.d/n*t.d)}function f(e,t){if(!i(e)||!i(t))return s(e)*s(t);var n=r.gcd(e.n,t.d),a=r.gcd(t.n,e.d);return o(e.n/n*(t.n/a),e.d/a*(t.d/n))}function h(e,t){return p(e,u(t))}function d(e,t){return i(e)&&i(t)?f(e,l(t)):s(e)/s(t)}function m(e,t){var n=e,a=t;if(t.n<0&&(a=u(t),n=l(e)),!i(n)||!i(a))return r.pow(s(e),s(t));if(e=n,t=a,1===t.d)return o(Math.pow(e.n,t.n),Math.pow(e.d,t.n));var c=e.n<0;if(c&&t.d%2!=1)return NaN;var p=c?-1:1,f=p*Math.round(Math.pow(Math.abs(e.n),1/t.d)),h=Math.round(Math.pow(Math.abs(e.d),1/t.d));return Math.pow(f,t.d)!==e.n||Math.pow(h,t.d)!==e.d?r.pow(s(e),s(t)):o(Math.pow(f,t.n),Math.pow(h,t.n))}function g(e,t){if(!i(e)||!i(t))return r.pow(s(e),s(t));var n=m(e,t);return i(n)?n:r.pow(s(e),s(t))}function y(e){if(!i(e))return Math.sqrt(e);var t=Math.round(Math.sqrt(e.n)),r=Math.round(Math.sqrt(e.d));return t*t!==e.n||r*r!==e.d?Math.sqrt(s(e)):o(t,r)}function v(e,t){return g(e,l(t))}function b(e,t){if(!i(e)||!i(t)){var r=s(e),a=s(t);return r-a*Math.floor(r/a)}return h(e,f(t,n(Math.floor(s(d(e,t))),1)))}function x(e){for(var t=n(0,1),r=0,i=e;r<i.length;r++){t=p(t,i[r])}return t}Object.defineProperty(t,"__esModule",{value:!0}),t.isRational=i;var _=Math.pow(2,53)-1;t.fromDecimalString=a,t.asFloat=s,t.maybeRational=o,t.neg=u,t.abs=c,t.reciprocal=l,t.add=p,t.mul=f,t.sub=h,t.div=d,t.pow=g,t.sqrt=y,t.nthroot=v,t.mod=b,t.total=x}),define("math/parsenode/constant",["require","pjs","./scalarexpression","math/maybe-rational","math/types"],function(e){var t=e("pjs"),r=e("./scalarexpression"),n=e("math/maybe-rational"),i=e("math/types");return t(r,function(e,t){e.init=function(e){"number"==typeof e&&(e=n.maybeRational(e,1)),this._constantValue=e,t.init.call(this,[])},e.isConstant=!0,e.getEvalStrings=function(){return{statements:[],expression:this.scalarExprString()}},e.asValue=function(){return"boolean"==typeof this._constantValue?this._constantValue:n.asFloat(this._constantValue)},e.asMaybeRationalValue=function(){return"boolean"==typeof this._constantValue?NaN:this._constantValue},e.scalarExprString=function(){return this.asValue()>0?String(this.asValue()):"("+String(this.asValue())+")"},e.getEvaluationInfo=function(){return[{val:this.asValue()}]},e.isNaN=function(){return"number"==typeof this.asValue()&&isNaN(this.asValue())},e._getValueType=function(){switch(typeof this.asValue()){case"number":return i.Number;case"boolean":return i.Bool;default:throw new Error("Constant node expects value of type number or boolean, but saw "+typeof value)}}})}),define("math/parsenode/mixednumber",["require","pjs","./constant"],function(e){return e("pjs")(e("./constant"),function(e,t){e.init=function(e){t.init.call(this,e)},e.is_mixed_number=!0})}),define("math/parsenode/identifier",["require","pjs","./expression","graphing/label","math/parser/input-span"],function(e){var t=e("pjs"),r=e("./expression"),n=e("graphing/label"),i=e("math/parser/input-span");return t(r,function(e,t,r){e.init=function(e){t.init.call(this,[]),this._symbol=n.latexToIdentifier(e),this.setInputSpan(new i.Span(e,0,e.length)),this.addDependency(this._symbol)},e.evaluate=function(){throw"Cannot evaluate undefined variable "+this._symbol}})}),define("math/parsenode/ans",["require","pjs","./identifier"],function(e){return e("pjs")(e("./identifier"),function(e,t,r){})}),define("math/parsenode/freevariable",["require","pjs","./scalarexpression"],function(e){return e("pjs")(e("./scalarexpression"),function(e,t){e.init=function(e){t.init.call(this,[]),this.addDependency(e),this._symbol=e},e.isFreeVariable=!0,e.scalarEvalExpression=function(e){return this._symbol},e.copyWithArgs=function(e){return this}})}),define("math/parsenode/dummyindex",["require","pjs","./freevariable"],function(e){return e("pjs")(e("./freevariable"),function(){})}),define("math/parsenode/list",["require","pjs","./expression","math/errormsg","math/types"],function(e){var t=e("pjs"),r=e("./expression"),n=e("math/errormsg"),i=e("math/types");return t(r,function(e,t,r){function a(e){for(var t=1/0,r=0;r<e.length;r++)(e[r].isList||e[r].isBroadcast)&&(t=Math.min(t,e[r].length));return t}e.init=function(e){if(t.init.call(this,e),this.length=e.length,0===this.length)throw n.emptyList()},e.isList=!0,e.getEvalStrings=function(){for(var e=[],t=[],r=0;r<this.args.length;r++){var n=this.args[r].getEvalStrings();Array.prototype.push.apply(e,n.statements),t.push(n.expression)}return{statements:e,expression:"["+t.join(",")+"]"}},e.asValue=function(){for(var e=[],t=0;t<this.args.length;t++)e.push(this.args[t].asValue());return e},e.asMaybeRationalValue=function(){for(var e=[],t=0;t<this.args.length;t++)e.push(this.args[t].asMaybeRationalValue());return e},e.getEvaluationInfo=function(){if(this.args.every(function(e){return e.isConstant}))return[{val:this.args.map(function(e){return e.asValue()})}]},r.eachArgs=function(e,t){var r=a(e);if(!isFinite(r))return void t(e);for(var n=0;n<r;n++){for(var s=[],o=0;o<e.length;o++)s.push(e[o].isList||i.isList(e[o].valueType)?e[o].elementAt(n):e[o]);t(s)}},r.mapArgs=function(e,t){var n=[];return r.eachArgs(e,function(e){n.push(t(e))}),n},r.wrap=function(e){return e.isList||i.isList(e.valueType)?e:r([e])}})}),define("math/parsenode/range",["require","pjs","./expression"],function(e){return e("pjs")(e("./expression"),function(e,t,r){e.init=function(e){t.init.call(this,e),this.beginning=e[0],this.end=e[1]}})}),define("math/parsenode/broadcast",["require","pjs","./expression"],function(e){return e("pjs")(e("./expression"),function(e,t,r){e.init=function(e,r){if(t.init.call(this,r),this._replacedSymbols=e,this._expression=r[0],this._lists=r.slice(1),!e.length)throw new Error("Cannot construct a broadcast node with no replaced symbols");for(var n=0;n<e.length;n++)this.removeDependency(e[n]);for(var i=1/0,a=0;a<this._lists.length;a++){if(!this._lists[a].isList)throw new Error("List arguments of broadcast must be list literals");i=Math.min(i,this._lists[a].length)}this.length=i},e.isBroadcast=!0,e.copyWithArgs=function(e){return new this.constructor(this._replacedSymbols,e)},e.evaluate=function(e){for(var t=this._expression.getCompiledFunction(this._replacedSymbols).fn,r=[],n=0;n<this.length;n++){for(var i=[],a=0;a<e.length;a++)i.push(e[a][n]);r.push(t.apply(void 0,i))}return r},e.getEvalStrings=function(){var e=[],t=this._expression.getEvalStrings();Array.prototype.push.apply(e,t.statements);var r,n=[],i=[];for(r=0;r<this._lists.length;r++){var a=this._lists[r].getEvalStrings();Array.prototype.push.apply(e,a.statements);var s=this.tmpVar();i.push(s),n.push("var "+s+" = "+a.expression)}var o=this.tmpVar(),u=this.tmpVar();n.push("var "+o+" = []");var c=[];for(r=0;r<i.length;r++)c.push("var "+this._replacedSymbols[r]+" = "+i[r]+"["+u+"]");return n.push("for (var "+u+" = 0; "+u+" < "+this.length+"; "+u+"++) {\\n  "+c.join(";\\n  ")+";\\n  "+o+".push("+t.expression+");\\n}"),{statements:e.concat(n),expression:o}}})}),define("math/parsenode/listaccess",["require","pjs","./expression"],function(e){return e("pjs")(e("./expression"),function(e,t){e.init=function(e){t.init.call(this,e),this.list=e[0],this.index=e[1]},e.getEvalStrings=function(){var e=this.index.getEvalStrings(),t=this.list.getEvalStrings(),r=e.statements.concat(t.statements),n=this.tmpVar();r.push(n+" = "+t.expression);var i=this.tmpVar();return r.push(i+" = Math.floor("+e.expression+") - 1"),{statements:r,expression:"("+i+" >= 0 && "+i+" < "+n+".length ? "+n+"["+i+"] : NaN)"}}})}),define("math/parsenode/dotaccess",["require","pjs","./expression"],function(e){return e("pjs")(e("./expression"),{})}),define("math/parsenode/dotaccessexponent",["require","pjs","./expression"],function(e){return e("pjs")(e("./expression"),{})}),define("math/parsenode/orderedpair",["require","pjs","./scalarexpression"],function(e){return e("pjs")(e("./scalarexpression"),function(e,t,r){e.asArray=function(){return[+this.args[0].asValue(),+this.args[1].asValue()]},e.asValue=e.asArray,e.getSliderVariables=function(e,t){return e.sliderVariables(t.getDependencies()).filter(function(t){return!e.validParametricVariable(t)})},e.getEvalStrings=function(){for(var e=[],t=[],r=0;r<this.args.length;r++){var n=this.args[r].getEvalStrings();e=e.concat(n.statements),t.push(n.expression)}return{statements:e,expression:"["+t.join(",")+"]"}}})}),define("math/parsenode/movablepoint",["require","pjs","./orderedpair"],function(e){return e("pjs")(e("./orderedpair"),function(e,t){e.init=function(e,r,n){t.init.call(this,e),this.moveStrategy=r,this.defaultDragMode=n},e.isMovablePoint=!0})}),define("math/parsenode/orderedpairaccess",["require","pjs","./scalarexpression"],function(e){return e("pjs")(e("./scalarexpression"),function(e,t){e.init=function(e){t.init.call(this,e),this.point=e[0],this.index=e[1]},e.getEvalStrings=function(){var e=this.index.getEvalStrings(),t=this.point.getEvalStrings(),r=[];return Array.prototype.push.apply(r,e.statements),Array.prototype.push.apply(r,t.statements),{statements:r,expression:t.expression+"["+e.expression+"-1]"}}})}),define("math/parsenode/polygon",["require","pjs","./expression"],function(e){return e("pjs")(e("./expression"),function(e,t){e.init=function(e){t.init.call(this,e),this._symbol="polygon"}})}),define("math/comparators",["require","exports"],function(e,t){"use strict";function r(e,t){switch(t){case-1:return e?"<=":"<";case 0:return e?"=":"!=";case 1:return e?">=":">";default:throw"Programming error.  Comparators must have a direction of -1, 0, or 1"}}Object.defineProperty(t,"__esModule",{value:!0}),t.table={"<":{inclusive:!1,direction:-1},"!=":{inclusive:!1,direction:0},">":{inclusive:!1,direction:1},"<=":{inclusive:!0,direction:-1},"=":{inclusive:!0,direction:0},">=":{inclusive:!0,direction:1}},t.get=r}),define("math/parsenode/basecomparator",["require","pjs","./scalarexpression","./expressionTypes","math/comparators","math/functions"],function(e){var t=e("pjs"),r=e("./scalarexpression"),n=e("./expressionTypes").Subtract,i=e("math/comparators").table,a=e("math/functions");return t(r,function(e,r,s){s.create=function(e,r){return r=r||e,t(s,function(t,n){t.operator=e,t.isInequality=function(){return 0!==i[e].direction},t.compiledOperator=r,t.scalarEvalExpression=function(e){return e.join(r)},t.evaluate=a.createEvaluateFunction(t.scalarEvalExpression,2)})},e.init=function(e){r.init.call(this,e),this._difference=n(-1===i[this.operator].direction?[e[1],e[0]]:[e[0],e[1]])}})}),define("math/parsenode/comparator",["require","math/parsenode/basecomparator"],function(e){var t=e("math/parsenode/basecomparator");return{"<":t.create("<"),">":t.create(">"),"<=":t.create("<="),">=":t.create(">="),"=":t.create("=","===")}}),define("math/parsenode/doubleinequality",["require","pjs","./base","math/comparators","./comparator"],function(e){var t=e("pjs"),r=e("./base"),n=e("math/comparators"),i=e("./comparator");return t(r,function(e,t){e.init=function(e){t.init.call(this),this.args=e,this._symbol=e[2]._symbol,this._operators=[e[1],e[3]],this._expressions=[e[0],e[4]];var r=n.get(n.table[e[1]].inclusive&&n.table[e[3]].inclusive,n.table[e[1]].direction);this._indicator=i[r]([e[0],e[4]]),this.addDependency(this._symbol),this.mergeDependencies(this._expressions[0],this._expressions[1])},e.isInequality=function(){return!0},e.isShadeBetween=function(){return!0}})}),define("math/parsenode/repeatedoperator",["require","pjs","./scalarexpression","./dummyindex"],function(e){var t=e("pjs"),r=e("./scalarexpression"),n=e("./dummyindex");return t(r,function(e,t){e.init=function(e){t.init.call(this,e),this._index=e[0],this.addDummyDependency(this._index._symbol),this._index instanceof n&&this.removeDependency(this._index._symbol)},e.getEvalStrings=function(){var e=[],t=this.tmpVar(),r=this._index._symbol,n=this.tmpVar(),i=this.tmpVar(),a=this.args[1].getEvalStrings(),s=this.args[2].getEvalStrings(),o=this.args[3].getEvalStrings();Array.prototype.push.apply(e,a.statements),e.push("var "+n+" = Math.round("+a.expression+")"),Array.prototype.push.apply(e,s.statements),\ne.push("var "+i+" = Math.round("+s.expression+")"),e.push("var "+t+"="+this.starting_value);var u="for (var "+r+"="+n+";"+r+"<="+i+";"+r+"++) {"+o.statements.join(";")+";"+t+this.in_place_operator+o.expression+"};",c="if(!isFinite("+i+"-"+n+")) {"+t+"=("+i+"<"+n+"?"+this.starting_value+":NaN);}else{"+u+"}";return e.push(c),{statements:e,expression:t}},e.evaluate=function(e,t,r){var n=r.getCompiledFunction([this._index._symbol]).fn;if(t=Math.round(t),e=Math.round(e),!isFinite(t-e))return t<e?this.starting_value:NaN;for(var i=this.starting_value,a=e;a<=t;a++)i=this.update(i,n(a));return i}})}),define("math/parsenode/sum",["require","pjs","./repeatedoperator"],function(e){return e("pjs")(e("./repeatedoperator"),function(e,t){e.in_place_operator="+=",e.starting_value=0,e.evaluateConstant=function(e){var t=1+Math.round(e[1])-Math.round(e[0]);return t<=0?this.starting_value:t*e[2]},e.update=function(e,t){return e+t}})}),define("math/parsenode/product",["require","pjs","./repeatedoperator"],function(e){return e("pjs")(e("./repeatedoperator"),function(e,t){e.in_place_operator="*=",e.starting_value=1,e.evaluateConstant=function(e){var t=1+Math.round(e[1])-Math.round(e[0]);return t<=0?this.starting_value:Math.pow(e[2],t)},e.update=function(e,t){return e*t}})}),define("math/parsenode/integral",["require","pjs","./scalarexpression","./dummyindex","math/builtin"],function(e){var t=e("pjs"),r=e("./scalarexpression"),n=e("./dummyindex"),i=e("math/builtin");return t(r,function(e,t){e.init=function(e){t.init.call(this,e),this._differential=e[0],this.addDummyDependency(this._differential._symbol),this._differential instanceof n&&this.removeDependency(this._differential._symbol)},e.getEvalStrings=function(){var e=this.args[0],t=this.args[1],r=this.args[2],n=this.args[3],i=[],a=this.tmpVar(),s=e._symbol,o=this.tmpVar(),u=this.tmpVar(),c=t.getEvalStrings(),l=r.getEvalStrings(),p=n.getEvalStrings();return Array.prototype.push.apply(i,c.statements),Array.prototype.push.apply(i,l.statements),i.push("var "+o+" = "+c.expression),i.push("var "+u+" = "+l.expression),i.push("var "+a+" = function ("+s+") { "+p.statements.join("; ")+"; return "+p.expression+";}"),{statements:i,expression:"BuiltIn.quad("+[a,o,u].join(", ")+")"}},e.evaluate=function(e,t,r){var n=this.args[0],a=r.getCompiledFunction([n._symbol]).fn;return i.quad(a,e,t)}})}),define("math/parsenode/functioncall",["require","pjs","./expression","./identifier"],function(e){var t=e("pjs"),r=e("./expression"),n=e("./identifier");return t(r,function(e,t){e.init=function(e,r){"string"==typeof e&&(e=n(e)),this._identifier=e,this._symbol=e._symbol,t.init.call(this,r),this.addDependency(this._symbol)},e.copyWithArgs=function(e){return new this.constructor(n(this._symbol),e)}})}),define("math/parsenode/seededfunctioncall",["require","pjs","./functioncall"],function(e){return e("pjs")(e("./functioncall"),function(e,t){e.init=function(e,r){t.init.call(this,e,r),this.seed=r[0]}})}),define("math/parsenode/functionexponent",["require","pjs","./expression"],function(e){return e("pjs")(e("./expression"),function(e,t){})}),define("math/parsenode/functionfactorial",["require","pjs","./expression"],function(e){return e("pjs")(e("./expression"),function(e,t){})}),define("math/parsenode/prime",["require","pjs","./expression"],function(e){return e("pjs")(e("./expression"),function(e,t){e.init=function(e,r){t.init.call(this,r),this.order=e},e.copyWithArgs=function(e){return new this.constructor(this.order,e)}})}),define("math/parsenode/piecewise",["require","pjs","./scalarexpression","./constant","math/maybe-rational"],function(e){var t=e("pjs"),r=e("./scalarexpression"),n=e("./constant"),i=e("math/maybe-rational").maybeRational,a=t(r,{});return a.chain=function(e){for(var t,r=n(NaN);e.length;)t=e.pop(),r=a([t.condition,t.if_expr,r]);return r},a.empty=function(){return a([n(!0),n(i(1,1)),n(NaN)])},a}),define("math/parsenode/derivative",["require","pjs","./scalarexpression","./identifier"],function(e){var t=e("pjs"),r=e("./scalarexpression"),n=e("./identifier");return t(r,function(e,t){e.init=function(e,r){this._symbol=e instanceof n?e._symbol:n(e)._symbol,t.init.call(this,r)}})}),define("math/parsenode/nativefunction",["require","pjs","./scalarexpression","math/functions"],function(e){var t=e("pjs"),r=e("./scalarexpression"),n=e("math/functions");return t(r,function(e,r,i){e.init=function(e,t){if(e.length>=this._requiredArity)for(;e.length<this._maxArity;)e.push(this._optionalArguments[e.length-this._requiredArity]);this._errorSymbol="logbase"===this._symbol?"log":t||this._symbol,r.init.call(this,e)},e.copyWithArgs=function(e){var t=r.copyWithArgs.call(this,e);return t._errorSymbol=this._errorSymbol,t},e.scalarEvalExpression=function(e){return this.head+"("+e.join(",")+")"},i.create=function(e,r,i,a){return t(this,function(t,s,o){o.isFunction=!0,t._symbol=e,t.head=r,t._requiredArity=i,t._optionalArguments=a||[],t._maxArity=t._requiredArity+t._optionalArguments.length,t.evaluate=n.createEvaluateFunction(t.scalarEvalExpression.bind(t),t._maxArity),o.getConcreteInvocationTree=function(e,t,r,n,i){return o(r,n).getConcreteTree(e,t,i)},o.getCacheKeys=function(){return[]}})}})}),define("math/parsenode/typedfunction",["require","pjs","./nativefunction"],function(e){return e("pjs")(e("./nativefunction"),function(e,t,r,n){r.create=function(e,t,r,i){var a=r.length,s=n.create.call(this,e,t,a);return s.prototype._inputTypes=r,s.prototype._outputType=i,s}})}),define("math/parsenode/trigfunction",["require","pjs","./nativefunction","./expressionTypes","math/errormsg"],function(e){var t=e("pjs"),r=e("./nativefunction"),n=e("./expressionTypes").Multiply,i=e("math/errormsg");return t(r,function(e,t,r,a){r.create=function(e,t){var r=a.create(e,t,1);return r.getConcreteInvocationTree=function(e,t,a,s,o){if(a.length<1)throw i.wrongArity(s,1,a.length);var u=t.trigAngleMultiplier?[n([a[0],t.trigAngleMultiplier])].concat(a.slice(1)):a;return r(u,s).getConcreteTree(e,t,o)},r.getCacheKeys=function(){return["trigAngleMultiplier"]},r}})}),define("math/parsenode/inversetrigfunction",["require","pjs","./nativefunction","./expressionTypes"],function(e){var t=e("pjs"),r=e("./nativefunction"),n=e("./expressionTypes").Divide;return t(r,function(e,t,r,i){r.create=function(e,t,r){var a=i.create(e,t,1,r);return a.getConcreteInvocationTree=function(e,t,r,i,s){var o=a(r,i);return(t.trigAngleMultiplier?n([o,t.trigAngleMultiplier]):o).getConcreteTree(e,t,s)},a.getCacheKeys=function(){return["trigAngleMultiplier"]},a}})}),define("math/parsenode/distribution",["require","pjs","./scalarexpression","math/errormsg"],function(e){var t=e("pjs"),r=e("./scalarexpression"),n=e("math/errormsg");return t(r,function(e,r,i){e.init=function(e,t){var i="tdist"===this._symbol;if(e.length<this._requiredArity){if(i)throw n.tdistWrongArity();throw n.wrongArity(t,this._requiredArity,e.length)}if(e.length>this._maxArity){if(i)throw n.tdistWrongArity();throw n.wrongArity(this._symbol,this._maxArity,e.length)}for(;e.length<this._maxArity;)e.push(this._optionalArguments[e.length-this._requiredArity]);r.init.call(this,e)},e.scalarEvalExpression=function(e){return this.head+"("+e.join(",")+")"},i.create=function(e,r,n){return t(this,function(t,i,a){a.isFunction=!0,t._symbol=e,t._requiredArity=r,t._optionalArguments=n||[],t._maxArity=t._requiredArity+t._optionalArguments.length,a.getConcreteInvocationTree=function(e,t,r,n,i){return a(r,n)},a.getCacheKeys=function(){return[]}})}})}),define("math/parsenode/reducerfunction",["require","pjs","./expression","math/functions","math/errormsg","./distribution","math/types"],function(e){var t=e("pjs"),r=e("./expression"),n=e("math/functions"),i=e("math/errormsg"),a=e("./distribution"),s=e("math/types");return t(r,function(e,r,o){e.init=function(e,t){if(0===e.length)throw i.zeroArgReducer(t);if(e[0]instanceof a&&!e[0][this._symbol])throw i.functionTypeError(this._symbol,[s.prettyPrint(this.args[0].valueType)]);r.init.call(this,e)},e.evalExpression=function(e){return this.head+"("+e+")"},e.getEvalStrings=function(){var e=this.args[0].getEvalStrings();return{statements:e.statements,expression:this.evalExpression(e.expression)}},o.create=function(e,r){return t(o,function(t,i,a){t._symbol=e,t.head=r,t._arity=1,a.isFunction=!0,a.allowDotCalls=!0,a.dotMinArity=0,a.dotMaxArity=0,t.evaluate=n.createEvaluateFunction(t.evalExpression.bind(t),t._arity),a.getConcreteInvocationTree=function(e,t,r,n,i){return a(r,n).getConcreteTree(e,t,i)},a.getCacheKeys=function(){return[]}})}})}),define("math/parsenode/doublereducerfunction",["require","pjs","./expression","math/functions","math/errormsg"],function(e){var t=e("pjs"),r=e("./expression"),n=e("math/functions"),i=e("math/errormsg");return t(r,function(e,r,a){e.init=function(e,t){if(r.init.call(this,e),2!==this.args.length)throw i.wrongDoubleReducerArity(t)},e.evalExpression=function(e){return this.head+"("+e.join(",")+")"},e.getEvalStrings=function(){for(var e=[],t=[],r=Math.min(this.args[0].length,this.args[1].length),n=0;n<this.args.length;n++){var i=this.args[n],a=i.getEvalStrings();Array.prototype.push.apply(e,a.statements),t.push(i.length===r?a.expression:a.expression+".slice(0,"+r+")")}return{statements:e,expression:this.evalExpression(t)}},a.create=function(e,r){return t(a,function(t,i,a){t._symbol=e,t.head=r,t._arity=2,a.isFunction=!0,t.evaluate=n.createEvaluateFunction(t.evalExpression.bind(t),t._arity),a.getConcreteInvocationTree=function(e,t,r,n,i){return a(r,n).getConcreteTree(e,t,i)},a.getCacheKeys=function(){return[]}})}})}),define("math/parsenode/parametrizedreducerfunction",["require","pjs","./expression","math/functions","math/errormsg","./distribution","math/types"],function(e){var t=e("pjs"),r=e("./expression"),n=e("math/functions"),i=e("math/errormsg"),a=e("./distribution"),s=e("math/types");return t(r,function(e,r,o){e.init=function(e,t){if(e.length<2&&void 0!==this._optionalArgument&&e.push(this._optionalArgument),2!==e.length)throw i.wrongParametrizedReducerArity(t);if(e[0]instanceof a&&!e[0][this._symbol])throw i.functionTypeError(t,[s.prettyPrint(this.args[0].valueType)]);r.init.call(this,e)},e.evalExpression=function(e){return this.head+"("+e.join(",")+")"},e.getEvalStrings=function(){var e=[],t=this.args[0].getEvalStrings(),r=this.args[1].getEvalStrings();return Array.prototype.push.apply(e,t.statements),Array.prototype.push.apply(e,r.statements),{statements:e,expression:this.evalExpression([t.expression,r.expression])}},o.create=function(e,r,i){return t(o,function(t,a,s){t._symbol=e,t.head=r,t._optionalArgument=i,t._arity=2,s.isFunction=!0,s.allowDotCalls=!0,s.dotMinArity=void 0===i?1:0,s.dotMaxArity=1,t.evaluate=n.createEvaluateFunction(t.evalExpression.bind(t),t._arity),s.getConcreteInvocationTree=function(e,t,r,n,i){return s(r,n).getConcreteTree(e,t,i)},s.getCacheKeys=function(){return[]}})}})}),define("math/parsenode/toplevelfunction",["require","pjs","./nativefunction","math/errormsg"],function(e){var t=e("pjs"),r=e("./nativefunction"),n=e("math/errormsg");return t(r,function(e,r,i,a){i.create=function(e){return t(i,function(e,t,r){r.isFunction=!0,r.getConcreteInvocationTree=function(e,t,r,i,a){throw n.unexpectedSymbol(i)},r.getCacheKeys=function(){return[]}})}})}),define("math/parsenode/builtinfunction",["require","math/parsenode/nativefunction","math/parsenode/typedfunction","math/parsenode/trigfunction","math/parsenode/inversetrigfunction","math/parsenode/reducerfunction","math/parsenode/doublereducerfunction","math/parsenode/parametrizedreducerfunction","math/parsenode/distribution","math/parsenode/toplevelfunction","math/types","math/maybe-rational","math/parsenode/constant"],function(e){var t=e("math/parsenode/nativefunction"),r=e("math/parsenode/typedfunction"),n=e("math/parsenode/trigfunction"),i=e("math/parsenode/inversetrigfunction"),a=e("math/parsenode/reducerfunction"),s=e("math/parsenode/doublereducerfunction"),o=e("math/parsenode/parametrizedreducerfunction"),u=e("math/parsenode/distribution"),c=e("math/parsenode/toplevelfunction"),l=e("math/types"),p=e("math/maybe-rational").maybeRational,f=e("math/parsenode/constant"),h=f(p(1,1)),d=f(p(0,1)),m=f(p(1,2));return{sin:n.create("sin","BuiltIn.sin"),cos:n.create("cos","BuiltIn.cos"),tan:n.create("tan","BuiltIn.tan"),cot:n.create("cot","BuiltIn.cot"),sec:n.create("sec","BuiltIn.sec"),csc:n.create("csc","BuiltIn.csc"),arcsin:i.create("arcsin","Math.asin"),arccos:i.create("arccos","Math.acos"),arctan:i.create("arctan","Math.atan2",[h]),arccot:i.create("arccot","BuiltIn.acot"),arcsec:i.create("arcsec","BuiltIn.asec"),arccsc:i.create("arccsc","BuiltIn.acsc"),sinh:t.create("sinh","BuiltIn.sinh",1),cosh:t.create("cosh","BuiltIn.cosh",1),tanh:t.create("tanh","BuiltIn.tanh",1),coth:t.create("coth","BuiltIn.coth",1),sech:t.create("sech","BuiltIn.sech",1),csch:t.create("csch","BuiltIn.csch",1),arcsinh:t.create("arcsinh","BuiltIn.asinh",1),arccosh:t.create("arccosh","BuiltIn.acosh",1),arctanh:t.create("arctanh","BuiltIn.atanh",1),arccoth:t.create("arccoth","BuiltIn.acoth",1),arcsech:t.create("arcsech","BuiltIn.asech",1),arccsch:t.create("arccsch","BuiltIn.acsch",1),sqrt:t.create("sqrt","Math.sqrt",1),rtxsqpone:t.create("rtxsqpone","BuiltIn.sqrtxsqp1",1),rtxsqmone:t.create("rtxsqmone","BuiltIn.sqrtxsqm1",1),nthroot:t.create("nthroot","BuiltIn.nthroot",2),log:t.create("log","BuiltIn.common_log",1),logbase:t.create("logbase","BuiltIn.log_base",2),ln:t.create("ln","BuiltIn.log",1),exp:t.create("exp","Math.exp",1),floor:t.create("floor","Math.floor",1),ceil:t.create("ceil","Math.ceil",1),round:t.create("round","BuiltIn.round",1,[d]),abs:t.create("abs","Math.abs",1),sign:t.create("sign","BuiltIn.sign",1),mod:t.create("mod","BuiltIn.mod",2),nCr:t.create("nCr","BuiltIn.nCr",2),nPr:t.create("nPr","BuiltIn.nPr",2),factorial:t.create("factorial","BuiltIn.factorial",1),polyGamma:t.create("polyGamma","BuiltIn.polyGamma",2),lcm:a.create("lcm","BuiltIn.listLCM"),gcd:a.create("gcd","BuiltIn.listGCD"),mean:a.create("mean","BuiltIn.mean"),total:a.create("total","BuiltIn.total"),stdev:a.create("stdev","BuiltIn.stdev"),stdevp:a.create("stdevp","BuiltIn.stdevp"),mad:a.create("mad","BuiltIn.mad"),length:a.create("length","BuiltIn.length"),min:a.create("min","BuiltIn.listMin"),max:a.create("max","BuiltIn.listMax"),argmin:a.create("argmin","BuiltIn.argMin"),argmax:a.create("argmax","BuiltIn.argMax"),median:a.create("median","BuiltIn.median"),var:a.create("var","BuiltIn.var"),varp:a.create("varp","BuiltIn.varp"),cov:s.create("cov","BuiltIn.cov"),covp:s.create("covp","BuiltIn.covp"),corr:s.create("corr","BuiltIn.corr"),quantile:o.create("quantile","BuiltIn.quantile"),quartile:o.create("quartile","BuiltIn.quartile"),upperQuantileIndex:o.create("upperQuantileIndex","BuiltIn.upperQuantileIndex"),lowerQuantileIndex:o.create("lowerQuantileIndex","BuiltIn.lowerQuantileIndex"),quartileIndex:o.create("quartileIndex","BuiltIn.quartileIndex"),upperQuartileIndex:o.create("upperQuartileIndex","BuiltIn.upperQuartileIndex"),lowerQuartileIndex:o.create("lowerQuartileIndex","BuiltIn.lowerQuartileIndex"),normalcdf:t.create("normalcdf","BuiltIn.normalcdf",2,[d,h]),normalpdf:t.create("normalpdf","BuiltIn.normalpdf",1,[d,h]),normalSample:r.create("normalSample","BuiltIn.normalSample",[l.SeedType,l.Number,l.Number],l.Number),uniformSample:r.create("uniformSample","BuiltIn.uniformSample",[l.SeedType,l.Number,l.Number],l.Number),tSample:r.create("tSample","BuiltIn.tSample",[l.SeedType,l.Number],l.Number),poissonSample:r.create("poissonSample","BuiltIn.poissonSample",[l.SeedType,l.Number],l.Number),binomSample:r.create("binomSample","BuiltIn.binomSample",[l.SeedType,l.Number,l.Number],l.Number),binomcdf:t.create("binomcdf","BuiltIn.binomcdf",3,[m]),binompdf:t.create("binompdf","BuiltIn.binompdf",2,[m]),poissoncdf:t.create("poissoncdf","BuiltIn.poissoncdf",3),poissonpdf:t.create("poissonpdf","BuiltIn.poissonpdf",2),uniformcdf:t.create("uniformcdf","BuiltIn.uniformcdf",2,[d,h]),uniformpdf:t.create("uniformpdf","BuiltIn.uniformpdf",1,[d,h]),invNorm:t.create("invNorm","BuiltIn.invNorm",1),invT:t.create("invT","BuiltIn.invT",2),invPoisson:t.create("invPoisson","BuiltIn.invPoisson",2),invBinom:t.create("invBinom","BuiltIn.invBinom",3),invUniform:t.create("invUniform","BuiltIn.invUniform",3),erf:t.create("erf","BuiltIn.erf",1),tpdf:t.create("tpdf","BuiltIn.tpdf",2),tcdf:t.create("tcdf","BuiltIn.tcdf",3),tscore:o.create("tscore","BuiltIn.tscore",d),distance:r.create("distance","BuiltIn.distance",[l.Point,l.Point],l.Number),midpoint:r.create("midpoint","BuiltIn.midpoint",[l.Point,l.Point],l.Point),normaldist:u.create("normaldist",0,[d,h]),tdist:u.create("tdist",1),binomialdist:u.create("binomialdist",1,[m]),poissondist:u.create("poissondist",1),uniformdist:u.create("uniformdist",0,[d,h]),pdf:r.create("pdf","BuiltIn.normpdf",[l.Distribution,l.Number],l.Number).open(function(e,t,r){r.allowDotCalls=!0,r.dotMinArity=1,r.dotMaxArity=1}),cdf:r.create("cdf","BuiltIn.normcdf",[l.Distribution,l.Number,l.Number],l.Number).open(function(e,t,r){r.allowDotCalls=!0,r.dotMinArity=1,r.dotMaxArity=2}),random:t.create("random","BuiltIn.random",2).open(function(e,t,r){r.allowDotCalls=!0,r.dotMinArity=1,r.dotMaxArity=3}),polygon:c.create("polygon"),histogram:c.create("histogram"),dotplot:c.create("dotplot"),boxplot:c.create("boxplot"),ttest:c.create("ttest"),ittest:c.create("ittest"),stats:c.create("stats")}}),define("math/parsenode/histogram",["require","pjs","./expression"],function(e){return e("pjs")(e("./expression"),function(e,t){e.init=function(e){t.init.call(this,e),this._symbol="histogram"}})}),define("math/parsenode/dotplot",["require","pjs","./expression"],function(e){return e("pjs")(e("./expression"),function(e,t){e.init=function(e){t.init.call(this,e),this._symbol="dotplot"}})}),define("math/parsenode/boxplot",["require","pjs","./expression"],function(e){return e("pjs")(e("./expression"),function(e,t){e.init=function(e){t.init.call(this,e),this._symbol="boxplot"}})}),define("math/parsenode/ttest",["require","pjs","./expression"],function(e){return e("pjs")(e("./expression"),function(e,t){e.init=function(){t.init.apply(this,arguments),this._symbol="ttest"}})}),define("math/parsenode/independent-ttest",["require","pjs","./expression"],function(e){return e("pjs")(e("./expression"),function(e,t){e.init=function(){t.init.apply(this,arguments),this._symbol="ittest"}})}),define("math/parsenode/stats",["require","pjs","./expression"],function(e){return e("pjs")(e("./expression"),function(e,t){e.init=function(){t.init.apply(this,arguments),this._symbol="stats"}})}),define("math/parsenode/equation",["require","./base","pjs","./expressionTypes","math/parsenode/comparator"],function(e){var t=e("./base"),r=e("pjs"),n=e("./expressionTypes").Subtract,i=e("math/parsenode/comparator");return r(t,function(e,t){e.init=function(e,r){t.init.call(this),this.mergeDependencies(e,r),this._lhs=e,this._rhs=r,this._difference=n([this._lhs,this._rhs])},e.asComparator=function(){return i["="]([this._lhs,this._rhs])}})}),define("math/parsenode/assignment",["require","./base","./equation","./identifier","pjs"],function(e){var t=e("./base"),r=e("./equation"),n=e("./identifier");return e("pjs")(t,function(e,t){e.init=function(e,r){t.init.call(this),e=e._symbol,this.mergeDependencies(r),this._expression=r,this._symbol=e,this._exports=this.computeExports()},e.shouldExportAns=function(){return!0},e.computeExports=function(){for(var e=this._symbol,t=this.getDependencies(),r=0;r<t.length;r++)if(t[r]===e)return[];return[e]},e.isEquation=function(e){return-1!==e.getDependencies().indexOf(this._symbol)},e.asEquation=function(){var e=r(n(this._symbol),this._expression);return e.userData=this.userData,e.metaData=this.metaData,e},e.shouldPromoteToSlider=function(e){return!!this._expression.isConstant&&!this._expression.is_mixed_number&&"number"==typeof this._expression.asValue()&&!!isFinite(this._expression.asValue())&&e.isValidSlider(this._symbol)}})}),define("math/parsenode/functiondefinition",["require","pjs","./base","math/errormsg","./equation","./identifier","./functioncall"],function(e){var t=e("pjs"),r=e("./base"),n=e("math/errormsg"),i=e("./equation"),a=e("./identifier"),s=e("./functioncall");return t(r,function(e,t){e.init=function(e,r,n){t.init.call(this),e=e._symbol,this._argSymbols=r.map(function(e){return e._symbol}),this._symbol=e,this._exports=[e],this._expression=n,this.addDependencies(this._argSymbols),this.addDummyDependencies(this._argSymbols),this.mergeDependencies(this._expression)},e.isFunction=!0,e.getConcreteInvocationTree=function(e,t,r,i,a){if(r.length!==this._argSymbols.length)throw n.wrongArity(i,this._argSymbols.length,r.length);for(var s=Object.create(t),o=0;o<this._argSymbols.length;o++)s[this._argSymbols[o]]=r[o];return this._expression.getConcreteTree(e,s,a)},e.getSliderVariables=function(e,t){var r=this._argSymbols;return e.sliderVariables(t.getDependencies()).filter(function(e){return-1===r.indexOf(e)})},e.asEquation=function(){var e=this._argSymbols.map(function(e){return a(e)}),t=i(s(a(this._symbol),e),this._expression);return t.userData=this.userData,t.metaData=this.metaData,t}})}),define("numeric",[],function(){"use strict";var e="undefined"==typeof exports?function(){}:exports;return"undefined"!=typeof global&&(global.numeric=e),e.version="1.2.6",e._myIndexOf=function(e){var t,r=this.length;for(t=0;t<r;++t)if(this[t]===e)return t;return-1},e.myIndexOf=Array.prototype.indexOf?Array.prototype.indexOf:e._myIndexOf,e.precision=4,e.largeArray=50,e.compile=function(){var t=Array.prototype.slice.call(arguments),r=t.pop();return r="return function ("+t.join(",")+") {"+r+"}",new Function(["numeric"],r)(e)},e._dim=function(e){for(var t=[];"object"==typeof e;)t.push(e.length),e=e[0];return t},e.dim=function(t){var r,n;return"object"==typeof t?(r=t[0],"object"==typeof r?(n=r[0],"object"==typeof n?e._dim(t):[t.length,r.length]):[t.length]):[]},e.mapreduce=function(t,r){return e.compile("x","accum","_s","_k",\'if(typeof accum === "undefined") accum = \'+r+\';\\nif(typeof x === "number") { var xi = x; \'+t+\'; return accum; }\\nif(typeof _s === "undefined") _s = numeric.dim(x);\\nif(typeof _k === "undefined") _k = 0;\\nvar _n = _s[_k];\\nvar i,xi;\\nif(_k < _s.length-1) {\\n    for(i=_n-1;i>=0;i--) {\\n        accum = arguments.callee(x[i],accum,_s,_k+1);\\n    }    return accum;\\n}\\nfor(i=_n-1;i>=1;i-=2) { \\n    xi = x[i];\\n    \'+t+";\\n    xi = x[i-1];\\n    "+t+";\\n}\\nif(i === 0) {\\n    xi = x[i];\\n    "+t+"\\n}\\nreturn accum;")},e.mapreduce2=function(t,r){return e.compile("x","var n = x.length;\\nvar i,xi;\\n"+r+"\\nfor(i=n-1;i!==-1;--i) { \\n    xi = x[i];\\n    "+t+"\\n}\\nreturn accum;")},e.rep=function(t,r,n){void 0===n&&(n=0);var i,a=t[n],s=Array(a);if(n===t.length-1){for(i=a-2;i>=0;i-=2)s[i+1]=r,s[i]=r;return-1===i&&(s[0]=r),s}for(i=a-1;i>=0;i--)s[i]=e.rep(t,r,n+1);return s},e.dotMMsmall=function(e,t){var r,n,i,a,s,o,u,c,l,p,f;for(a=e.length,s=t.length,o=t[0].length,u=Array(a),r=a-1;r>=0;r--){for(c=Array(o),l=e[r],i=o-1;i>=0;i--){for(p=l[s-1]*t[s-1][i],n=s-2;n>=1;n-=2)f=n-1,p+=l[n]*t[n][i]+l[f]*t[f][i];0===n&&(p+=l[0]*t[0][i]),c[i]=p}u[r]=c}return u},e._getCol=function(e,t,r){var n,i=e.length;for(n=i-1;n>0;--n)r[n]=e[n][t],--n,r[n]=e[n][t];0===n&&(r[0]=e[0][t])},e.dotMMbig=function(t,r){var n,i,a,s=e._getCol,o=r.length,u=Array(o),c=t.length,l=r[0].length,p=new Array(c),f=e.dotVV;for(--o,--c,i=c;-1!==i;--i)p[i]=Array(l);for(--l,i=l;-1!==i;--i)for(s(r,i,u),a=c;-1!==a;--a)0,n=t[a],p[a][i]=f(n,u);return p},e.dotMV=function(t,r){var n,i=t.length,a=(r.length,Array(i)),s=e.dotVV;for(n=i-1;n>=0;n--)a[n]=s(t[n],r);return a},e.dotVM=function(e,t){var r,n,i,a,s,o,u;for(i=e.length,a=t[0].length,s=Array(a),n=a-1;n>=0;n--){for(o=e[i-1]*t[i-1][n],r=i-2;r>=1;r-=2)u=r-1,o+=e[r]*t[r][n]+e[u]*t[u][n];0===r&&(o+=e[0]*t[0][n]),s[n]=o}return s},e.dotVV=function(e,t){var r,n,i=e.length,a=e[i-1]*t[i-1];for(r=i-2;r>=1;r-=2)n=r-1,a+=e[r]*t[r]+e[n]*t[n];return 0===r&&(a+=e[0]*t[0]),a},e.dot=function(t,r){var n=e.dim;switch(1e3*n(t).length+n(r).length){case 2002:return r.length<10?e.dotMMsmall(t,r):e.dotMMbig(t,r);case 2001:return e.dotMV(t,r);case 1002:return e.dotVM(t,r);case 1001:return e.dotVV(t,r);case 1e3:return e.mulVS(t,r);case 1:return e.mulSV(t,r);case 0:return t*r;default:throw new Error("numeric.dot only works on vectors and matrices")}},e.diag=function(e){var t,r,n,i,a=e.length,s=Array(a);for(t=a-1;t>=0;t--){for(i=Array(a),r=t+2,n=a-1;n>=r;n-=2)i[n]=0,i[n-1]=0;for(n>t&&(i[n]=0),i[t]=e[t],n=t-1;n>=1;n-=2)i[n]=0,i[n-1]=0;0===n&&(i[0]=0),s[t]=i}return s},e.getDiag=function(e){var t,r=Math.min(e.length,e[0].length),n=Array(r);for(t=r-1;t>=1;--t)n[t]=e[t][t],--t,n[t]=e[t][t];return 0===t&&(n[0]=e[0][0]),n},e.identity=function(t){return e.diag(e.rep([t],1))},e.pointwise=function(t,r,n){void 0===n&&(n="");var i,a,s=[],o=/\\[i\\]$/,u="",c=!1;for(i=0;i<t.length;i++)o.test(t[i])?(a=t[i].substring(0,t[i].length-3),u=a):a=t[i],"ret"===a&&(c=!0),s.push(a);return s[t.length]="_s",s[t.length+1]="_k",s[t.length+2]=\'if(typeof _s === "undefined") _s = numeric.dim(\'+u+\');\\nif(typeof _k === "undefined") _k = 0;\\nvar _n = _s[_k];\\nvar i\'+(c?"":", ret = Array(_n)")+";\\nif(_k < _s.length-1) {\\n    for(i=_n-1;i>=0;i--) ret[i] = arguments.callee("+t.join(",")+",_s,_k+1);\\n    return ret;\\n}\\n"+n+"\\nfor(i=_n-1;i!==-1;--i) {\\n    "+r+"\\n}\\nreturn ret;",e.compile.apply(null,s)},e.pointwise2=function(t,r,n){void 0===n&&(n="");var i,a,s=[],o=/\\[i\\]$/,u="",c=!1;for(i=0;i<t.length;i++)o.test(t[i])?(a=t[i].substring(0,t[i].length-3),u=a):a=t[i],"ret"===a&&(c=!0),s.push(a);return s[t.length]="var _n = "+u+".length;\\nvar i"+(c?"":", ret = Array(_n)")+";\\n"+n+"\\nfor(i=_n-1;i!==-1;--i) {\\n"+r+"\\n}\\nreturn ret;",e.compile.apply(null,s)},e._biforeach=function e(t,r,n,i,a){if(i===n.length-1)return void a(t,r);var s,o=n[i];for(s=o-1;s>=0;s--)e("object"==typeof t?t[s]:t,"object"==typeof r?r[s]:r,n,i+1,a)},e._biforeach2=function e(t,r,n,i,a){if(i===n.length-1)return a(t,r);var s,o=n[i],u=Array(o);for(s=o-1;s>=0;--s)u[s]=e("object"==typeof t?t[s]:t,"object"==typeof r?r[s]:r,n,i+1,a);return u},e._foreach=function e(t,r,n,i){if(n===r.length-1)return void i(t);var a,s=r[n];for(a=s-1;a>=0;a--)e(t[a],r,n+1,i)},e._foreach2=function e(t,r,n,i){if(n===r.length-1)return i(t);var a,s=r[n],o=Array(s);for(a=s-1;a>=0;a--)o[a]=e(t[a],r,n+1,i);return o},e.ops2={add:"+",sub:"-",mul:"*",div:"/",mod:"%",and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">=",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"},e.opseq={addeq:"+=",subeq:"-=",muleq:"*=",diveq:"/=",modeq:"%=",lshifteq:"<<=",rshifteq:">>=",rrshifteq:">>>=",bandeq:"&=",boreq:"|=",bxoreq:"^="},e.mathfuns=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan","isNaN","isFinite"],e.mathfuns2=["atan2","pow","max","min"],e.ops1={neg:"-",not:"!",bnot:"~",clone:""},e.mapreducers={any:["if(xi) return true;","var accum = false;"],all:["if(!xi) return false;","var accum = true;"],sum:["accum += xi;","var accum = 0;"],prod:["accum *= xi;","var accum = 1;"],norm2Squared:["accum += xi*xi;","var accum = 0;"],norminf:["accum = max(accum,abs(xi));","var accum = 0, max = Math.max, abs = Math.abs;"],norm1:["accum += abs(xi);","var accum = 0, abs = Math.abs;"],sup:["accum = max(accum,xi);","var accum = -Infinity, max = Math.max;"],inf:["accum = min(accum,xi);","var accum = Infinity, min = Math.min;"]},function(){var t,r;for(t=0;t<e.mathfuns2.length;++t)r=e.mathfuns2[t],e.ops2[r]=r;for(t in e.ops2)if(e.ops2.hasOwnProperty(t)){r=e.ops2[t];var n,i,a="";-1!==e.myIndexOf.call(e.mathfuns2,t)?(a="var "+r+" = Math."+r+";\\n",n=function(e,t,n){return e+" = "+r+"("+t+","+n+")"},i=function(e,t){return e+" = "+r+"("+e+","+t+")"}):(n=function(e,t,n){return e+" = "+t+" "+r+" "+n},i=e.opseq.hasOwnProperty(t+"eq")?function(e,t){return e+" "+r+"= "+t}:function(e,t){return e+" = "+e+" "+r+" "+t}),e[t+"VV"]=e.pointwise2(["x[i]","y[i]"],n("ret[i]","x[i]","y[i]"),a),e[t+"SV"]=e.pointwise2(["x","y[i]"],n("ret[i]","x","y[i]"),a),e[t+"VS"]=e.pointwise2(["x[i]","y"],n("ret[i]","x[i]","y"),a),e[t]=e.compile("var n = arguments.length, i, x = arguments[0], y;\\nvar VV = numeric."+t+"VV, VS = numeric."+t+"VS, SV = numeric."+t+\'SV;\\nvar dim = numeric.dim;\\nfor(i=1;i!==n;++i) { \\n  y = arguments[i];\\n  if(typeof x === "object") {\\n      if(typeof y === "object") x = numeric._biforeach2(x,y,dim(x),0,VV);\\n      else x = numeric._biforeach2(x,y,dim(x),0,VS);\\n  } else if(typeof y === "object") x = numeric._biforeach2(x,y,dim(y),0,SV);\\n  else \'+i("x","y")+"\\n}\\nreturn x;\\n"),e[r]=e[t],e[t+"eqV"]=e.pointwise2(["ret[i]","x[i]"],i("ret[i]","x[i]"),a),e[t+"eqS"]=e.pointwise2(["ret[i]","x"],i("ret[i]","x"),a),e[t+"eq"]=e.compile("var n = arguments.length, i, x = arguments[0], y;\\nvar V = numeric."+t+"eqV, S = numeric."+t+\'eqS\\nvar s = numeric.dim(x);\\nfor(i=1;i!==n;++i) { \\n  y = arguments[i];\\n  if(typeof y === "object") numeric._biforeach(x,y,s,0,V);\\n  else numeric._biforeach(x,y,s,0,S);\\n}\\nreturn x;\\n\')}for(t=0;t<e.mathfuns2.length;++t)r=e.mathfuns2[t],delete e.ops2[r];for(t=0;t<e.mathfuns.length;++t)r=e.mathfuns[t],e.ops1[r]=r;for(t in e.ops1)e.ops1.hasOwnProperty(t)&&(a="",r=e.ops1[t],-1!==e.myIndexOf.call(e.mathfuns,t)&&Math.hasOwnProperty(r)&&(a="var "+r+" = Math."+r+";\\n"),e[t+"eqV"]=e.pointwise2(["ret[i]"],"ret[i] = "+r+"(ret[i]);",a),e[t+"eq"]=e.compile("x",\'if(typeof x !== "object") return \'+r+"x\\nvar i;\\nvar V = numeric."+t+"eqV;\\nvar s = numeric.dim(x);\\nnumeric._foreach(x,s,0,V);\\nreturn x;\\n"),e[t+"V"]=e.pointwise2(["x[i]"],"ret[i] = "+r+"(x[i]);",a),e[t]=e.compile("x",\'if(typeof x !== "object") return \'+r+"(x)\\nvar i;\\nvar V = numeric."+t+"V;\\nvar s = numeric.dim(x);\\nreturn numeric._foreach2(x,s,0,V);\\n"));for(t=0;t<e.mathfuns.length;++t)r=e.mathfuns[t],delete e.ops1[r];for(t in e.mapreducers)e.mapreducers.hasOwnProperty(t)&&(r=e.mapreducers[t],e[t+"V"]=e.mapreduce2(r[0],r[1]),e[t]=e.compile("x","s","k",r[1]+\'if(typeof x !== "object") {    xi = x;\\n\'+r[0]+\'\\n    return accum;\\n}if(typeof s === "undefined") s = numeric.dim(x);\\nif(typeof k === "undefined") k = 0;\\nif(k === s.length-1) return numeric.\'+t+"V(x);\\nvar xi;\\nvar n = x.length, i;\\nfor(i=n-1;i!==-1;--i) {\\n   xi = arguments.callee(x[i]);\\n"+r[0]+"\\n}\\nreturn accum;\\n"))}(),e.inv=function(t){var r,n,i,a,s,o,u,t,c=e.dim(t),l=Math.abs,p=c[0],f=c[1],h=e.clone(t),d=e.identity(p);for(o=0;o<f;++o){var m=-1,g=-1;for(s=o;s!==p;++s)(u=l(h[s][o]))>g&&(m=s,g=u);for(n=h[m],h[m]=h[o],h[o]=n,a=d[m],d[m]=d[o],d[o]=a,t=n[o],u=o;u!==f;++u)n[u]/=t;for(u=f-1;-1!==u;--u)a[u]/=t;for(s=p-1;-1!==s;--s)if(s!==o){for(r=h[s],i=d[s],t=r[o],u=o+1;u!==f;++u)r[u]-=n[u]*t;for(u=f-1;u>0;--u)i[u]-=a[u]*t,--u,i[u]-=a[u]*t;0===u&&(i[0]-=a[0]*t)}}return d},e.det=function(t){var r=e.dim(t);if(2!==r.length||r[0]!==r[1])throw new Error("numeric: det() only works on square matrices");var n,i,a,s,o,u,c,l,p=r[0],f=1,h=e.clone(t);for(i=0;i<p-1;i++){for(a=i,n=i+1;n<p;n++)Math.abs(h[n][i])>Math.abs(h[a][i])&&(a=n);for(a!==i&&(c=h[a],h[a]=h[i],h[i]=c,f*=-1),s=h[i],n=i+1;n<p;n++){for(o=h[n],u=o[i]/s[i],a=i+1;a<p-1;a+=2)l=a+1,o[a]-=s[a]*u,o[l]-=s[l]*u;a!==p&&(o[a]-=s[a]*u)}if(0===s[i])return 0;f*=s[i]}return f*h[i][i]},e.transpose=function(e){var t,r,n,i,a,s=e.length,o=e[0].length,u=Array(o);for(r=0;r<o;r++)u[r]=Array(s);for(t=s-1;t>=1;t-=2){for(i=e[t],n=e[t-1],r=o-1;r>=1;--r)a=u[r],a[t]=i[r],a[t-1]=n[r],--r,a=u[r],a[t]=i[r],a[t-1]=n[r];0===r&&(a=u[0],a[t]=i[0],a[t-1]=n[0])}if(0===t){for(n=e[0],r=o-1;r>=1;--r)u[r][0]=n[r],--r,u[r][0]=n[r];0===r&&(u[0][0]=n[0])}return u},e.negtranspose=function(e){var t,r,n,i,a,s=e.length,o=e[0].length,u=Array(o);for(r=0;r<o;r++)u[r]=Array(s);for(t=s-1;t>=1;t-=2){for(i=e[t],n=e[t-1],r=o-1;r>=1;--r)a=u[r],a[t]=-i[r],a[t-1]=-n[r],--r,a=u[r],a[t]=-i[r],a[t-1]=-n[r];0===r&&(a=u[0],a[t]=-i[0],a[t-1]=-n[0])}if(0===t){for(n=e[0],r=o-1;r>=1;--r)u[r][0]=-n[r],--r,u[r][0]=-n[r];0===r&&(u[0][0]=-n[0])}return u},e.norm2=function(t){return Math.sqrt(e.norm2Squared(t))},e.linspace=function(e,t,r){if(void 0===r&&(r=Math.max(Math.round(t-e)+1,1)),\nr<2)return 1===r?[e]:[];var n,i=Array(r);for(r--,n=r;n>=0;n--)i[n]=(n*t+(r-n)*e)/r;return i},e.getBlock=function(t,r,n){function i(e,t){var s,o=r[t],u=n[t]-o,c=Array(u);if(t===a.length-1){for(s=u;s>=0;s--)c[s]=e[s+o];return c}for(s=u;s>=0;s--)c[s]=i(e[s+o],t+1);return c}var a=e.dim(t);return i(t,0)},e.setBlock=function(t,r,n,i){function a(e,t,i){var o,u=r[i],c=n[i]-u;if(i===s.length-1)for(o=c;o>=0;o--)e[o+u]=t[o];for(o=c;o>=0;o--)a(e[o+u],t[o],i+1)}var s=e.dim(t);return a(t,i,0),t},e.getRange=function(e,t,r){var n,i,a,s,o=t.length,u=r.length,c=Array(o);for(n=o-1;-1!==n;--n)for(c[n]=Array(u),a=c[n],s=e[t[n]],i=u-1;-1!==i;--i)a[i]=s[r[i]];return c},e.blockMatrix=function(t){var r=e.dim(t);if(r.length<4)return e.blockMatrix([t]);var n,i,a,s,o,u=r[0],c=r[1];for(n=0,i=0,a=0;a<u;++a)n+=t[a][0].length;for(s=0;s<c;++s)i+=t[0][s][0].length;var l=Array(n);for(a=0;a<n;++a)l[a]=Array(i);var p,f,h,d,m,g=0;for(a=0;a<u;++a){for(p=i,s=c-1;-1!==s;--s)for(o=t[a][s],p-=o[0].length,h=o.length-1;-1!==h;--h)for(m=o[h],f=l[g+h],d=m.length-1;-1!==d;--d)f[p+d]=m[d];g+=t[a][0].length}return l},e.tensor=function(t,r){if("number"==typeof t||"number"==typeof r)return e.mul(t,r);var n=e.dim(t),i=e.dim(r);if(1!==n.length||1!==i.length)throw new Error("numeric: tensor product is only defined for vectors");var a,s,o,u,c=n[0],l=i[0],p=Array(c);for(s=c-1;s>=0;s--){for(a=Array(l),u=t[s],o=l-1;o>=3;--o)a[o]=u*r[o],--o,a[o]=u*r[o],--o,a[o]=u*r[o],--o,a[o]=u*r[o];for(;o>=0;)a[o]=u*r[o],--o;p[s]=a}return p},e.epsilon=2.220446049250313e-16,e.LU=function(t,r){r=r||!1;var n,i,a,s,o,u,c,l,p,f=Math.abs,h=t.length,d=h-1,m=new Array(h);for(r||(t=e.clone(t)),a=0;a<h;++a){for(c=a,u=t[a],p=f(u[a]),i=a+1;i<h;++i)s=f(t[i][a]),p<s&&(p=s,c=i);for(m[a]=c,c!=a&&(t[a]=t[c],t[c]=u,u=t[a]),o=u[a],n=a+1;n<h;++n)t[n][a]/=o;for(n=a+1;n<h;++n){for(l=t[n],i=a+1;i<d;++i)l[i]-=l[a]*u[i],++i,l[i]-=l[a]*u[i];i===d&&(l[i]-=l[a]*u[i])}}return{LU:t,P:m}},e.LUsolve=function(t,r){var n,i,a,s,o,u=t.LU,c=u.length,l=e.clone(r),p=t.P;for(n=c-1;-1!==n;--n)l[n]=r[n];for(n=0;n<c;++n)for(a=p[n],p[n]!==n&&(o=l[n],l[n]=l[a],l[a]=o),s=u[n],i=0;i<n;++i)l[n]-=l[i]*s[i];for(n=c-1;n>=0;--n){for(s=u[n],i=n+1;i<c;++i)l[n]-=l[i]*s[i];l[n]/=s[n]}return l},e.solve=function(t,r,n){return e.LUsolve(e.LU(t,n),r)},e.svd=function(t){function r(e,t){return e=Math.abs(e),t=Math.abs(t),e>t?e*Math.sqrt(1+t*t/e/e):0==t?e:t*Math.sqrt(1+e*e/t/t)}var n,i=e.epsilon,a=1e-64/i,s=0,o=0,u=0,c=0,l=0,p=e.clone(t),f=p.length,h=p[0].length;if(f<h)throw"Need more rows than columns";var d=new Array(h),m=new Array(h);for(o=0;o<h;o++)d[o]=m[o]=0;var g=e.rep([h,h],0),y=0,v=0,b=0,x=0,_=0,S=0,M=0;for(o=0;o<h;o++){for(d[o]=v,M=0,l=o+1,u=o;u<f;u++)M+=p[u][o]*p[u][o];if(M<=a)v=0;else for(y=p[o][o],v=Math.sqrt(M),y>=0&&(v=-v),b=y*v-M,p[o][o]=y-v,u=l;u<h;u++){for(M=0,c=o;c<f;c++)M+=p[c][o]*p[c][u];for(y=M/b,c=o;c<f;c++)p[c][u]+=y*p[c][o]}for(m[o]=v,M=0,u=l;u<h;u++)M+=p[o][u]*p[o][u];if(M<=a)v=0;else{for(y=p[o][o+1],v=Math.sqrt(M),y>=0&&(v=-v),b=y*v-M,p[o][o+1]=y-v,u=l;u<h;u++)d[u]=p[o][u]/b;for(u=l;u<f;u++){for(M=0,c=l;c<h;c++)M+=p[u][c]*p[o][c];for(c=l;c<h;c++)p[u][c]+=M*d[c]}}_=Math.abs(m[o])+Math.abs(d[o]),_>x&&(x=_)}for(o=h-1;-1!=o;o+=-1){if(0!=v){for(b=v*p[o][o+1],u=l;u<h;u++)g[u][o]=p[o][u]/b;for(u=l;u<h;u++){for(M=0,c=l;c<h;c++)M+=p[o][c]*g[c][u];for(c=l;c<h;c++)g[c][u]+=M*g[c][o]}}for(u=l;u<h;u++)g[o][u]=0,g[u][o]=0;g[o][o]=1,v=d[o],l=o}for(o=h-1;-1!=o;o+=-1){for(l=o+1,v=m[o],u=l;u<h;u++)p[o][u]=0;if(0!=v){for(b=p[o][o]*v,u=l;u<h;u++){for(M=0,c=l;c<f;c++)M+=p[c][o]*p[c][u];for(y=M/b,c=o;c<f;c++)p[c][u]+=y*p[c][o]}for(u=o;u<f;u++)p[u][o]=p[u][o]/v}else for(u=o;u<f;u++)p[u][o]=0;p[o][o]+=1}for(i*=x,c=h-1;-1!=c;c+=-1)for(var E=0;E<50;E++){var w=!1;for(l=c;-1!=l;l+=-1){if(Math.abs(d[l])<=i){w=!0;break}if(Math.abs(m[l-1])<=i)break}if(!w){s=0,M=1;var D=l-1;for(o=l;o<c+1&&(y=M*d[o],d[o]=s*d[o],!(Math.abs(y)<=i));o++)for(v=m[o],b=r(y,v),m[o]=b,s=v/b,M=-y/b,u=0;u<f;u++)_=p[u][D],S=p[u][o],p[u][D]=_*s+S*M,p[u][o]=-_*M+S*s}if(S=m[c],l==c){if(S<0)for(m[c]=-S,u=0;u<h;u++)g[u][c]=-g[u][c];break}if(E>=49)throw"Error: no convergence.";for(x=m[l],_=m[c-1],v=d[c-1],b=d[c],y=((_-S)*(_+S)+(v-b)*(v+b))/(2*b*_),v=r(y,1),y=y<0?((x-S)*(x+S)+b*(_/(y-v)-b))/x:((x-S)*(x+S)+b*(_/(y+v)-b))/x,s=1,M=1,o=l+1;o<c+1;o++){for(v=d[o],_=m[o],b=M*v,v*=s,S=r(y,b),d[o-1]=S,s=y/S,M=b/S,y=x*s+v*M,v=-x*M+v*s,b=_*M,_*=s,u=0;u<h;u++)x=g[u][o-1],S=g[u][o],g[u][o-1]=x*s+S*M,g[u][o]=-x*M+S*s;for(S=r(y,b),m[o-1]=S,s=y/S,M=b/S,y=s*v+M*_,x=-M*v+s*_,u=0;u<f;u++)_=p[u][o-1],S=p[u][o],p[u][o-1]=_*s+S*M,p[u][o]=-_*M+S*s}d[l]=0,d[c]=y,m[c]=x}for(o=0;o<m.length;o++)m[o]<i&&(m[o]=0);for(o=0;o<h;o++)for(u=o-1;u>=0;u--)if(m[u]<m[o]){for(s=m[u],m[u]=m[o],m[o]=s,c=0;c<p.length;c++)n=p[c][o],p[c][o]=p[c][u],p[c][u]=n;for(c=0;c<g.length;c++)n=g[c][o],g[c][o]=g[c][u],g[c][u]=n;o=u}return{U:p,S:m,V:g}},e}),define("math/parsenode/optimizedregression",["require","pjs","./base"],function(e){return e("pjs")(e("./base"),function(e,t){e.init=function(e,r,n,i,a){t.init.call(this),this.parameters=e,this.residuals=r,this.statistics=n,this.model=i,this.isModelValid=a.isModelValid,this.residualVariable=a.residualVariable,this.residualSuggestionId=a.residualSuggestionId,this.shouldSuggestLogMode=a.shouldSuggestLogMode,this._exports=[this.residualVariable];for(var s in e)e.hasOwnProperty(s)&&this._exports.push(s);this.mergeDependencies(i)},e.getCompiledFunction=function(){return this.model.getCompiledFunction.apply(this.model,arguments)},e.getCompiledDerivative=function(){return this.model.getCompiledDerivative.apply(this.model,arguments)},e.evaluate=function(){return this.model.evaluate.apply(this.model,arguments)}})}),define("math/parsenode/regression",["require","pjs","./base","numeric","math/distance","math/builtin","graphing/label","math/errormsg","./error","./optimizedregression","./list","./functioncall","./identifier","./constant","./freevariable","./expressionTypes","math/types"],function(e){var t=e("pjs"),r=e("./base"),n=e("numeric"),i=e("math/distance"),a=e("math/builtin"),s=e("graphing/label"),o=e("math/errormsg"),u=e("./error"),c=e("./optimizedregression"),l=e("./list"),p=e("./functioncall"),f=e("./identifier"),h=e("./constant"),d=e("./freevariable"),m=e("./expressionTypes"),g=e("math/types"),y=m.Subtract;return t(r,function(e,t,r){function m(e,t){for(var r=0,n=e.apply(void 0,t),i=0;i<n.length;i++){var a=n[i];r+=a*a}return r/n.length}function v(e,t){return e.apply(void 0,t)}function b(e,t){for(var r=[],n=0;n<e.length;n++){var i=e[n].apply(void 0,t);r.push(i)}return r}function x(e){for(var t=e.getDependencies(),r={},n=0;n<t.length;n++)r[t[n]]=e.boundDomain(t[n]);return r}function _(e,t,r,i,a){for(var s=[],o=0;o<t.length;o++)s.push(0);for(var u=b(t,s),c=n.LU(n.dot(u,n.transpose(u)),!0),l=s,p=0;p<2;p++){var f=v(e,s),h=n.neg(n.LUsolve(c,n.dot(u,f)));if(!n.all(n.isFinite(h)))return w(e,t,r,{},i,a);s=n.add(l,h),l=s}return{solution:s,MSE:m(e,s)}}function S(e,t,r,i){for(var a=r,s=m(e,a),o=.001,u=[],c=0;c<t.length;c++)u.push(1);for(var l=0,p=!1,f=b(t,a),h=a,d=s;l<i&&!p;){var g=v(e,a),y=n.transpose(f),x=n.dot(f,y);if(!n.all(n.isFinite(g)))break;if(!n.all(n.isFinite(x)))break;for(var _=!1;l<i&&!p&&!_;){l+=1;var S=n.LU(n.add(x,n.diag(n.mul(o,u))),!0),M=n.neg(n.LUsolve(S,n.dot(f,g))),E=M;if(a=n.add(h,E),s=m(e,a),p=n.all(n.eq(a,h))){h=a,d=s;break}var w;if(isFinite(s)&&s<=d&&(w=b(t,a),_=n.all(n.isFinite(w))),_){f=w,h=a,d=s,o*=.1,o=Math.max(1e-64,o);break}o*=2}}return{solution:h,MSE:m(e,h)}}function M(e,t){if(!t)return e;if("known"!==t.type)return e;var r=t.bounds;if(r[0]===-1/0&&r[1]===1/0)return e;if(r[0]===-1/0)return r[1]-Math.exp(-e);if(r[1]===1/0)return r[0]+Math.exp(e);var n=2*e/(1+i.hypot(1,2*e));return.5*(r[1]*(n+1)-r[0]*(n-1))}function E(e,t,r){for(var n=[],i=0;i<e.length;i++){for(var a=e[i],s=[],o=0;o<a.length;o++)s.push(M(a[o],r[t[o]]));n.push(s)}return n}function w(e,t,r,n,a,s){var o,u=[];for(a||(a={}),s||(s={}),o=0;o<r.length;o++){var c=r[o];s[c]&&isFinite(s[c].asValue())?u.push(+s[c].asValue()):a.hasOwnProperty(c)&&isFinite(a[c])?u.push(+a[c]):u.push(1)}var l=E(A(30,r),r,n),p=L(e,t,l,3,5),f=L(e,t,p,60,1),h=S(e,t,f[0],250),d=S(e,t,u,100);return isFinite(d.MSE)?d.MSE<h.MSE?d:i.approx(d.MSE,h.MSE,8)?d:h:h}function D(e,t,r,n){var i,a,s=t.getDependencies();for(a=0;a<s.length;a++)if(!e.validRegressionParameter(s[a]))throw o.invalidRegressionParameter(s[a]);var u=t.getCompiledFunction(s).fn;if(s.length){var c={};for(a=1;a<s.length;a++)c[s[a]]=d(s[0]);var l=t.substitute(c).isLinear(s[0]),p=[];for(a=0;a<s.length;a++)p.push(t.takeDerivative(s[a]).getCompiledFunction(s).fn);i=l?_(u,p,s,r,n):w(u,p,s,x(t),r,n)}else i={solution:[],MSE:m(u,[])};var f={};for(a=0;a<s.length;a++)f[s[a]]=h(i.solution[a]);return f}function T(e,t){return _(function(r,n){for(var i=[],a=0;a<e.length;a++)i.push(t[a]-(r*e[a]+n));return i},[function(){return e.map(function(e){return-e})},function(){return e.map(function(){return-1})}],[0,0])}function P(e,t){var r=e.length,n=e[0],a=t[0],s=e[r-1],o=t[r-1];if(!(isFinite(n)&&isFinite(s)&&isFinite(a)&&isFinite(o)))return!1;if(o-a==0)return!1;var u=s-n;if(0===u)return!1;for(var c=1;c<r-1;c++){var l=e[c],p=t[c],f=(o*(l-n)+a*(s-l))/u;if(!i.approx(p,f,5))return!1}return!0}function I(e,t,r,n){var i=Object.create(r);for(var a in n)n.hasOwnProperty(a)&&(i[a]=n[a]);return l.wrap(t.getConcreteTree(e,i))}e.init=function(e,r){t.init.call(this),this._lhs=e,this.isLhsSimple=e instanceof f||e instanceof l,this._logLhs=p("ln",[e]),this._rhs=r,this._difference=y([e,r]),this._logDifference=y([p("ln",[e]),p("ln",[r])]),this.mergeDependencies(e,r)},e.isRegression=!0,e.chooseResidualVariable=function(e){if(this.userData&&this.userData.residualVariable){var t=s.latexToIdentifier(this.userData.residualVariable);if(!e[t])return t}for(var r,n=this.getDependencies(),i=0;i<n.length;i++){var a=n[i].match(/_(.*)/);if(a&&(r="e_"+a[1],!e[r]))return r}for(var o=1;;){if(r="e_"+o,!e[r])return r;o++}},e.getRHSModel=function(e,t,r){function n(e,t,r){for(var n=0;n<i.length;n++)if(i[n].node===this)return i[n].tmpVar;var s=d(this.tmpVar()),o=this.getConcreteTree(e,t);return o.getDependencies().length&&(a=!1),i.push({node:this,tmpVar:s,symbol:s._symbol,concrete:o}),s}var i=[],a=!0,s={List:n,TableColumn:n,Range:n},o=this._rhs.tryGetConcreteTree(e,t,s);return{node:o,substituted:o.isError?o:o.substitute(r),replacedNodes:i,isValid:a}};var C=[18.9,.105,.0113,.089,4.414,34.32,8.61,.373,.06,.149,1.84,9.26,5,.7,.2,1.13,2.61,1.89,1,.007,30,120,1500,4e-4,7.23,-1,-.0081,-.03,-28.6,-1.71,-.4,-6.94,-.777],O=function(e){return C[503*e%C.length]},A=function(e,t){for(var r,n=[],i=t.length,a=0;a<e;a++){r=[];for(var s=0;s<i;s++)r[s]=0===a?0:1===a?1:O(a*i+s);n.push(r)}return n},L=function(e,t,r,n,i){for(var a=[],s=0;s<r.length;s++)a.push({soln:S(e,t,r[s],n),startingVals:r[s]});a.sort(function(e,t){return isNaN(e.soln.MSE)?1:isNaN(t.soln.MSE)?-1:e.soln.MSE-t.soln.MSE});for(var o=[],u=0;u<i;u++)o.push(a[u].startingVals);return o};e.computeStatistics=function(e,t,r,n,s){if(r.getDependencies().length)throw o.optimizationError();var u=0;r.eachElement(function(e){var t=e.asValue();u+=t*t});var c=u/r.length;if(!isFinite(c))throw o.optimizationError();if(e.getDependencies().length>0)return{RMSE:Math.sqrt(c)};var p=g.isList(e.valueType)?a.varp(e.asValue()):0;if(e.getDependencies().length||!isFinite(p)||p<=0||!this.isLhsSimple)return{RMSE:Math.sqrt(c)};var f=1-c/p;if(t.isValid&&1===t.replacedNodes.length){var h=[],d=[],m=n&&(s===N.LINLOG||s===N.LOGLOG);l.eachArgs([t.replacedNodes[0].concrete,e],function(e){h.push(m?Math.log(e[0].asValue()):+e[0].asValue()),d.push(+e[1].asValue())});var y=a.corr(h,d);if(i.approx(T(h,d).MSE,c,8))return{r:y,rsquared:y*y}}return{Rsquared:f}},e.getResidualSuggestionId=function(e,t){var r,n=this._rhs.getDependencies();for(var i in t)if(t.hasOwnProperty(i)&&t[i].concreteTree.isTable&&t[i].concreteTree.columns[0]){var a=t[i].rawTree.columns;if(a&&a.length){var s=a[0].getExports();if(1===s.length&&-1!==n.indexOf(s[0])){for(var o=1;o<a.length;o++)if(-1!==a[o].getDependencies().indexOf(e))return;r=r||i}}}return r||void 0};var N={NONE:0,LOGLIN:1,LOGLOG:2,LINLOG:3};e.linearizingTransformation=function(e,t){if(!this.isLhsSimple)return N.NONE;var r=t.substituted;if(r.isError)return N.NONE;if(r.valueType!==g.Number)return N.NONE;var n=r.getDependencies();if(1!==n.length)return N.NONE;if(isFinite(t.node.polynomialOrder(n[0])))return N.NONE;var i=r.getCompiledFunction(n).fn,a=t.replacedNodes[0].concrete;if(r.valueType!==g.Number)return N.NONE;var s=a.mapElements(function(e){return+e.asValue()});if(s.length<3)return N.NONE;s.sort(function(e,t){return e-t});var o=s.map(i),u=o.map(Math.log),c=s.map(Math.log),p=!0;return l.wrap(e).eachElement(function(e){isFinite(Math.log(+e.asValue()))||(p=!1)}),P(s,u)&&p?N.LOGLIN:P(c,u)&&p?N.LOGLOG:P(c,o)?N.LINLOG:N.NONE},e.optimize=function(e,t,r,n,i){var a=this._lhs.getConcreteTree(e,t),o=this._rhs.getConcreteTree(e,t);this.typeCheck([a,o]);var u,p=l.wrap(this._difference.getConcreteTree(e,t)),f=D(e,p,this.userData.regressionParameters,n),h=this.getRHSModel(e,t,f),d=I(e,this._difference,t,f),m=this.linearizingTransformation(a,h);if(!this.userData.isLogModeRegression||m!==N.LOGLIN&&m!==N.LOGLOG)u=this.computeStatistics(a,h,d,this.userData.isLogModeRegression,m);else{var g=this._logDifference.getConcreteTree(e,t),y=this._logLhs.getConcreteTree(e,t);f=D(e,g,this.userData.regressionParamters,n),h=this.getRHSModel(e,t,f),d=I(e,this._difference,t,f);var v=I(e,this._logDifference,t,f);u=this.computeStatistics(y,h,v,this.userData.isLogModeRegression,m)}var b=this.chooseResidualVariable(r),x=this.getResidualSuggestionId(b,i);return this.userData.residualVariable=s.identifierToLatex(b),c(f,d,u,h.substituted,{isModelValid:h.isValid,residualVariable:b,residualSuggestionId:x,shouldSuggestLogMode:m!==N.NONE})},e.tryOptimize=function(){try{return this.optimize.apply(this,arguments)}catch(e){if(e instanceof u)return e;throw e}},e.exportTo=function(e,t,r){if(!t.isError){for(var n in t.parameters)t.parameters.hasOwnProperty(n)&&(e.assignmentForbidden(n)||(r[n]=r[n]?o.multiplyDefined(n):t.parameters[n]));e.assignmentForbidden(t.residualVariable)||(r[t.residualVariable]=t.residuals)}},e.getSliderVariables=function(){return[]}})}),define("math/parsenode/image",["require","pjs","./base"],function(e){return e("pjs")(e("./base"),function(e,t,r,n){e.isImage=!0,e.init=function(e,r){t.init.call(this),this.center=e.center,this.radianAngle=e.radianAngle,this.width=e.width,this.height=e.height,this.opacity=e.opacity,this.moveStrategy=r,this.mergeDependencies(this.center,this.radianAngle,this.width,this.height,this.opacity)}})}),define("math/parsenode/slider",["require","pjs","./assignment","./identifier"],function(e){var t=e("pjs"),r=e("./assignment"),n=e("./identifier");return t(r,function(e,t,r,i){e.isSlider=!0,e.init=function(e,r){t.init.call(this,n(e._symbol),e._expression),this.setInputSpan(e._inputSpan),this.sliderAssignment=e,this.sliderMin=r.sliderMin,this.sliderMax=r.sliderMax,this.sliderStep=r.sliderStep,this.sliderMin&&this.mergeDependencies(this.sliderMin),this.sliderMax&&this.mergeDependencies(this.sliderMax),this.sliderStep&&this.mergeDependencies(this.sliderStep)},e.shouldPromoteToSlider=function(e){return!1}})}),define("math/parsenode/table",["require","pjs","./base"],function(e){return e("pjs")(e("./base"),function(e,t){e.init=function(e){t.init.call(this),this.columns=e,this._exports=[],this.mergeDependencies.apply(this,e);for(var r=0;r<e.length;r++)Array.prototype.push.apply(this._exports,e[r].getExports())},e.exportPenalty=1,e.isTable=!0,e.exportTo=function(e,t,r){for(var n=0;n<this.columns.length;n++){var i=this.columns[n].getExports();if(i.length){var a=i[0];e.assignmentForbidden(a)||r[a]||(t.isError?r[a]=t:this.columns[n].exportTo(e,t.columns[n],r))}}},e.getAllIds=function(){return this.columns.map(function(e){return e.header.userData.id})}})}),define("math/parsenode/tablecolumn",["require","pjs","./base","./list","./constant","./identifier"],function(e){var t=e("pjs"),r=e("./base"),n=e("./list"),i=e("./constant"),a=e("./identifier");return t(r,function(e,t){function s(e){return e.isError?i(NaN):e}e.init=function(e,r,n){t.init.call(this),this.header=e,this.length=r,this.values=n,this.isIndependent=!1,this.registerDependencies(),this._exports=this.computeExports()},e.registerDependencies=function(){this.mergeDependencies(this.header),this.mergeDependencies.apply(this,this.values)},e.computeExports=function(){return this.header instanceof a?[this.header._symbol]:[]},e.isDiscrete=function(e){return 1!==this.header.getDependencies().length||1!==e.header.getDependencies().length||this.header.getDependencies()[0]!==e.header.getDependencies()[0]},e._exportSymbolsTo=function(e,t,i){if(e.length){var a=e[0];if(t.isError)i[a]=t;else try{i[a]=n(t.values.map(s))}catch(e){if(!(e instanceof r))throw e;i[a]=e}}},e.exportTo=function(e,t,r){var n=this.getLegalExports(e);this._exportSymbolsTo(n,t,r)},e.exportToLocal=function(e,t){this._exportSymbolsTo(this.getExports(),e,t)}})}),define("math/parsenode/solvedequation",["require","pjs","./base"],function(e){return e("pjs")(e("./base"),function(e,t){e.init=function(e,r){t.init.call(this),this._symbol=e,this._expression=r,this.mergeDependencies(r)},e.getCompiledFunction=function(){return this._expression.getCompiledFunction.apply(this._expression,arguments)},e.getCompiledDerivative=function(){return this._expression.getCompiledDerivative.apply(this._expression,arguments)},e.evaluate=function(){return this._expression.evaluate.apply(this._expression,arguments)}})}),define("math/parsenode/seed",["require","pjs","./expression"],function(e){return e("pjs")(e("./expression"),function(e,t){e.init=function(e){"string"!=typeof e&&(e=""+e),this._stringValue=e,t.init.call(this,[])},e.isString=!0,e.getEvalStrings=function(){return{statements:[],expression:"\'"+this.asValue()+"\'"}},e.asValue=function(){return this._stringValue}})}),define("math/parsenode/extendseed",["require","pjs","./expression"],function(e){return e("pjs")(e("./expression"),function(e,t){e.init=function(e,r){t.init.call(this,r),this.seed=r[0],this.userSeed=r[1],this.tag=e},e.getEvalStrings=function(){var e=this.seed.getEvalStrings(),t=this.userSeed.getEvalStrings(),r=[];return Array.prototype.push.apply(r,e.statements),Array.prototype.push.apply(r,t.statements),{statements:r,expression:"("+e.expression+") + \'::"+this.tag+"\' + ("+t.expression+")"}},e.copyWithArgs=function(e){return new this.constructor(this.tag,e)}})}),define("parsenodes",["require","math/parsenode/expressionTypes","math/parsenode/base","math/parsenode/expression","math/parsenode/scalarexpression","math/parsenode/error","math/parsenode/constant","math/parsenode/mixednumber","math/parsenode/identifier","math/parsenode/ans","math/parsenode/freevariable","math/parsenode/dummyindex","math/parsenode/list","math/parsenode/range","math/parsenode/broadcast","math/parsenode/listaccess","math/parsenode/dotaccess","math/parsenode/dotaccessexponent","math/parsenode/orderedpair","math/parsenode/movablepoint","math/parsenode/orderedpairaccess","math/parsenode/polygon","math/parsenode/basecomparator","math/parsenode/comparator","math/parsenode/doubleinequality","math/parsenode/repeatedoperator","math/parsenode/sum","math/parsenode/product","math/parsenode/integral","math/parsenode/functioncall","math/parsenode/seededfunctioncall","math/parsenode/functionexponent","math/parsenode/functionfactorial","math/parsenode/prime","math/parsenode/piecewise","math/parsenode/derivative","math/parsenode/builtinfunction","math/parsenode/nativefunction","math/parsenode/typedfunction","math/parsenode/reducerfunction","math/parsenode/parametrizedreducerfunction","math/parsenode/doublereducerfunction","math/parsenode/toplevelfunction","math/parsenode/distribution","math/parsenode/histogram","math/parsenode/dotplot","math/parsenode/boxplot","math/parsenode/ttest","math/parsenode/independent-ttest","math/parsenode/stats","math/parsenode/assignment","math/parsenode/functiondefinition","math/parsenode/equation","math/parsenode/regression","math/parsenode/image","math/parsenode/slider","math/parsenode/table","math/parsenode/tablecolumn","math/parsenode/solvedequation","math/parsenode/optimizedregression","math/parsenode/seed","math/parsenode/extendseed"],function(e){var t=e("math/parsenode/expressionTypes"),r={Base:e("math/parsenode/base"),Expression:e("math/parsenode/expression"),ScalarExpression:e("math/parsenode/scalarexpression"),Error:e("math/parsenode/error"),Constant:e("math/parsenode/constant"),MixedNumber:e("math/parsenode/mixednumber"),Identifier:e("math/parsenode/identifier"),Ans:e("math/parsenode/ans"),FreeVariable:e("math/parsenode/freevariable"),DummyIndex:e("math/parsenode/dummyindex"),List:e("math/parsenode/list"),Range:e("math/parsenode/range"),Broadcast:e("math/parsenode/broadcast"),ListAccess:e("math/parsenode/listaccess"),DotAccess:e("math/parsenode/dotaccess"),DotAccessExponent:e("math/parsenode/dotaccessexponent"),OrderedPair:e("math/parsenode/orderedpair"),MovablePoint:e("math/parsenode/movablepoint"),OrderedPairAccess:e("math/parsenode/orderedpairaccess"),Polygon:e("math/parsenode/polygon"),BaseComparator:e("math/parsenode/basecomparator"),Comparator:e("math/parsenode/comparator"),DoubleInequality:e("math/parsenode/doubleinequality"),RepeatedOperator:e("math/parsenode/repeatedoperator"),Sum:e("math/parsenode/sum"),Product:e("math/parsenode/product"),Integral:e("math/parsenode/integral"),FunctionCall:e("math/parsenode/functioncall"),SeededFunctionCall:e("math/parsenode/seededfunctioncall"),FunctionExponent:e("math/parsenode/functionexponent"),FunctionFactorial:e("math/parsenode/functionfactorial"),Prime:e("math/parsenode/prime"),Piecewise:e("math/parsenode/piecewise"),Derivative:e("math/parsenode/derivative"),BuiltInFunction:e("math/parsenode/builtinfunction"),NativeFunction:e("math/parsenode/nativefunction"),TypedFunction:e("math/parsenode/typedfunction"),ReducerFunction:e("math/parsenode/reducerfunction"),ParametrizedReducerFunction:e("math/parsenode/parametrizedreducerfunction"),DoubleReducerFunction:e("math/parsenode/doublereducerfunction"),TopLevelFunction:e("math/parsenode/toplevelfunction"),Distribution:e("math/parsenode/distribution"),Histogram:e("math/parsenode/histogram"),DotPlot:e("math/parsenode/dotplot"),BoxPlot:e("math/parsenode/boxplot"),TTest:e("math/parsenode/ttest"),IndependentTTest:e("math/parsenode/independent-ttest"),Stats:e("math/parsenode/stats"),Assignment:e("math/parsenode/assignment"),FunctionDefinition:e("math/parsenode/functiondefinition"),Equation:e("math/parsenode/equation"),Regression:e("math/parsenode/regression"),Image:e("math/parsenode/image"),Slider:e("math/parsenode/slider"),Table:e("math/parsenode/table"),TableColumn:e("math/parsenode/tablecolumn"),SolvedEquation:e("math/parsenode/solvedequation"),OptimizedRegression:e("math/parsenode/optimizedregression"),Seed:e("math/parsenode/seed"),ExtendSeed:e("math/parsenode/extendseed")};for(var n in t)r[n]=t[n];for(var i in r)r.hasOwnProperty(i)&&"Comparator"!==i&&"BuiltInFunction"!==i&&(r[i].prototype.type=i);for(var a in r.Comparator)r.Comparator.hasOwnProperty(a)&&(r.Comparator[a].prototype.type="Comparator[\'"+a+"\']");for(var s in r.BuiltInFunction)r.BuiltInFunction.hasOwnProperty(s)&&(r.BuiltInFunction[s].prototype.type="BuiltInFunction[\'"+s+"\']");return r}),define("math/parser/char-codes",["require","exports"],function(e,t){"use strict";function r(e){return 48<=e&&e<=57}function n(e){return 97<=e&&e<=122}function i(e){return 65<=e&&e<=90}function a(e){return n(e)||i(e)}function s(e){return 92===e}function o(e){return 46===e}function u(e){return 39===e}function c(e){if(9<=e&&e<=13)return!0;if(8192<=e&&e<=8202)return!0;switch(e){case 32:case 160:case 5760:case 8232:case 8233:case 8239:case 8287:case 12288:case 65279:return!0;default:return!1}}Object.defineProperty(t,"__esModule",{value:!0}),t.isDigit=r,t.isLowerCaseLetter=n,t.isUpperCaseLetter=i,t.isLetter=a,t.isBackslash=s,t.isDot=o,t.isSingleQuote=u,t.isWhitespace=c}),define("math/parser/latex-lexer",["require","exports","./char-codes","./input-span"],function(e,t,r,n){"use strict";function i(e,t){return n.joinSpans(e.token.span,t.prevSpan)}function a(e,t,r){return{type:e,span:t,val:r}}function s(e,t,r,n){return{input:e,prevSpan:t,pos:r,token:n}}function o(e){return u(e,0,n.emptySpanAt(e,0))}function u(e,t,n){for(;r.isWhitespace(e.charCodeAt(t));)t+=1;return s(e,n,t,d(e,t))}function c(e){return u(e.input,e.token.span.end,e.token.span)}function l(e){return e.token}function p(e,t){if(l(e).type!==t)throw"Parse Error: expected "+t+".";return c(e)}function f(e,t){return l(e).type===t}function h(e){return e.pos>=e.input.length}function d(e,t){var i=t;if(t>=e.length)return a("End",n.emptySpanAt(e,t),"");var s=e.charCodeAt(t);if(r.isDigit(s)){var o=n.Span(e,i,t+1);return a("Digit",o,e.charAt(i))}if(r.isLetter(s)){var o=n.Span(e,i,t+1);return a("Letter",o,e.charAt(i))}if(r.isBackslash(s)){if(t+=1,r.isLetter(e.charCodeAt(t))){for(;r.isLetter(e.charCodeAt(t));)t+=1;var o=n.Span(e,i,t),u=n.slice(o),c=m[u]||"Cmd";return a(c,o,u)}t+=1;var o=n.Span(e,i,t),u=n.slice(o);return a("EscapedSymbol",o,u)}if(r.isSingleQuote(s)){for(t+=1;r.isSingleQuote(e.charCodeAt(t));)t+=1;if("^"===e.charAt(t)){t+=1;var o=n.Span(e,i,t),u=n.slice(o);return a("Primes^",o,u)}var o=n.Span(e,i,t),u=n.slice(o);return a("Primes",o,u)}var o=n.Span(e,i,t+1),u=e.charAt(i),c=g[u]||"Symbol";return a(c,o,u)}Object.defineProperty(t,"__esModule",{value:!0}),t.spanStates=i,t.LatexToken=a,t.lex=o,t.advance=c,t.peek=l,t.eat=p,t.isAt=f,t.isDone=h;var m={"\\\\left":"Left","\\\\right":"Right","\\\\sqrt":"Sqrt","\\\\frac":"Frac","\\\\operatorname":"OperatorName"},g={"[":"[","]":"]","{":"{","}":"}","^":"^",_:"_"}}),define("math/parser/latex-node",["require","exports"],function(e,t){"use strict";function r(e,t){return{type:"Group",span:e,args:t}}function n(e,t,r){return{type:"Sqrt",span:e,optArg:t,arg:r}}function i(e,t,r){return{type:"Frac",span:e,num:t,den:r}}function a(e,t,r,n){return{type:"SupSub",span:e,sup:t,sub:r,nprimes:n}}function s(e,t,r,n){return{type:"LeftRight",span:e,left:t,right:r,arg:n}}function o(e,t){return{type:"OperatorName",span:e,arg:t}}function u(e,t){return{type:"Symbol",span:e,val:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.Group=r,t.Sqrt=n,t.Frac=i,t.SupSub=a,t.LeftRight=s,t.OperatorName=o,t.Symbol=u}),define("math/parser/latex-parser",["require","exports","./latex-lexer","./input-span","./latex-node"],function(e,t,r,n,i){"use strict";function a(e){switch(e){case"Frac":return 2;case"^":case"_":case"Primes^":case"Left":case"Frac":case"Sqrt":case"OperatorName":return 1;default:return 0}}function s(e){var t=u(r.lex(e),!1),i=t.state,a=t.tree;if(!r.isDone(i))throw"Parse error: unexpected "+n.slice(r.peek(i).span)+".";return a}function o(e,t){return{state:e,tree:t}}function u(e,t){var n,a=e,s=[];e:for(;!r.isDone(e);){var u=r.peek(e);switch(u.type){case"Cmd":case"EscapedSymbol":case"Letter":case"Digit":case"Symbol":case"[":case"{":case"^":case"_":case"Primes":case"Primes^":case"Left":case"Frac":case"Sqrt":case"OperatorName":case"]":if("]"===u.type&&t)break e;var l=void 0;if(n=c(e),e=n.state,l=n.tree,"Group"===l.type)for(var p=0,f=l.args;p<f.length;p++){var h=f[p];s.push(h)}else s.push(l);break;case"}":case"Right":case"End":break e;default:var d=u.type;throw"Unexpected token type "+d+"."}}var m=r.spanStates(a,e);return o(e,i.Group(m,s))}function c(e){var t,n=r.peek(e);switch(n.type){case"Cmd":case"EscapedSymbol":case"Letter":case"Digit":case"Symbol":return e=r.advance(e),o(e,n);case"[":case"]":return e=r.advance(e),o(e,i.Symbol(n.span,n.val));case"{":e=r.advance(e);var a=void 0;return t=u(e,!1),e=t.state,a=t.tree,e=r.eat(e,"}"),o(e,a);case"^":case"_":case"Primes":case"Primes^":return d(e);case"Left":return h(e);case"Frac":return f(e);case"Sqrt":return p(e);case"OperatorName":return l(e);case"}":case"Right":throw"Parse Error: unexpected "+n.val+".";case"End":throw"Parse Error: unexpected end.";default:throw"Unexpected token type "+n.type+"."}}function l(e){var t,n=e,a=r.peek(e);e=r.eat(e,"OperatorName");var s;t=m(e,a),e=t.state,s=t.tree;var u=r.spanStates(n,e);return o(e,i.OperatorName(u,s))}function p(e){var t,n,a=e,s=r.peek(e);e=r.eat(e,"Sqrt");var u;r.isAt(e,"[")&&(t=g(e),e=t.state,u=t.tree);var c;n=m(e,s),e=n.state,c=n.tree;var l=r.spanStates(a,e);return o(e,i.Sqrt(l,u,c))}function f(e){var t,n,a=e,s=r.peek(e);e=r.eat(e,"Frac");var u;t=m(e,s),e=t.state,u=t.tree;var c;n=m(e,s),e=n.state,c=n.tree;var l=r.spanStates(a,e);return o(e,i.Frac(l,u,c))}function h(e){var t,n=e;e=r.eat(e,"Left");var a=r.peek(e);e=r.advance(e);var s;t=u(e,!1),e=t.state,s=t.tree,e=r.eat(e,"Right");var c=r.peek(e);e=r.advance(e);var l=r.spanStates(n,e);return o(e,i.LeftRight(l,a,c,s))}function d(e){var t,n,a,s,u,c=e,l=0;e:for(;!r.isDone(e);){var p=r.peek(e);switch(p.type){case"^":if(e=r.advance(e),s)throw"Parse Error: double superscript.";t=m(e,p),e=t.state,s=t.tree;break;case"_":if(e=r.advance(e),u)throw"Parse Error: double subscript.";n=m(e,p),e=n.state,u=n.tree;break;case"Primes":if(e=r.advance(e),l>0)throw"Parse Error: double primes.";l=p.val.length;break;case"Primes^":if(e=r.advance(e),l>0)throw"Parse Error: double primes.";if(s)throw"Parse Error: double superscript";l=p.val.length-1,a=m(e,p),e=a.state,s=a.tree;break;default:break e}}var f=r.spanStates(c,e);return o(e,i.SupSub(f,s,u,l))}function m(e,t){var s,u,l=a(t.type);if(l<=0)throw new Error("Programming Error: greediness must be greater than 0.");var p=a(r.peek(e).type);if(p>0&&p<=l){var f=n.slice(t.span);throw"Parse Error: can\'t use "+n.slice(r.peek(e).span)+" as argument of "+f+". Use {}."}return s=c(e),e=s.state,u=s.tree,"Group"!==u.type&&(u=i.Group(u.span,[u])),o(e,u)}function g(e){var t;e=r.eat(e,"[");var n;return t=u(e,!0),e=t.state,n=t.tree,e=r.eat(e,"]"),o(e,n)}Object.defineProperty(t,"__esModule",{value:!0}),t.parse=s}),define("math/parser/command-aliases",["require","exports","./char-codes"],function(e,t,r){"use strict";function n(e){for(var t=0;r.isBackslash(e.charCodeAt(t));)t+=1;return t>0&&(e=e.slice(t)),i[e]||e}Object.defineProperty(t,"__esModule",{value:!0});var i={mcd:"gcd",gcf:"gcd",mcm:"lcm",signum:"sign",stdDevP:"stdevp",stddevp:"stdevp",stdDev:"stdev",stddev:"stdev",variance:"var",TTest:"ttest",TScore:"tscore",IndependentTTest:"ittest",iTTest:"ittest",inverseCdf:"quantile",inversecdf:"quantile"};t.translateCmd=n}),define("math/parser/surface-node",["require","exports","./command-aliases"],function(e,t,r){"use strict";function n(e,t){return{type:"Equals",span:e,args:t}}function i(e,t,r){return{type:"Inequality",span:e,symbol:t,args:r}}function a(e,t,r){return{type:"TrailingInequalityPiece",span:e,symbol:t,args:r}}function s(e,t,r){return{type:"InequalityChain",span:e,first:t,chain:r}}function o(e,t){return{type:"Tilde",span:e,args:t}}function u(e,t){return{type:"Pos",span:e,args:t}}function c(e,t){return{type:"Neg",span:e,args:t}}function l(e,t){return{type:"Add",span:e,args:t}}function p(e,t){return{type:"Sub",span:e,args:t}}function f(e,t){return{type:"Mul",span:e,args:t}}function h(e,t){return{type:"Div",span:e,args:t}}function d(e,t){return{type:"Bang",span:e,args:t}}function m(e,t){return{type:"Call",span:e,args:t}}function g(e,t){return{type:"ImplicitCall",span:e,args:t}}function y(e,t){return{type:"Index",span:e,args:t}}function v(e,t){return{type:"Paren",span:e,args:t}}function b(e,t){return{type:"List",span:e,args:t}}function x(e,t){return{type:"Pipes",span:e,args:t}}function _(e,t){return{type:"Subscript",span:e,args:t}}function S(e,t){return{type:"Superscript",span:e,args:t}}function M(e,t,r){return{type:"Prime",span:e,nprimes:t,args:r}}function E(e,t){return{type:"Seq",span:e,args:t}}function w(e,t){return{type:"Sqrt",span:e,args:t}}function D(e,t){return{type:"Nthroot",span:e,args:t}}function T(e,t){return{type:"Frac",span:e,args:t}}function P(e,t){return{type:"Derivative",span:e,args:t}}function I(e,t){return{type:"Integral",span:e,args:t}}function C(e,t){return{type:"EmptyIntegral",span:e,\nargs:t}}function O(e,t){return{type:"Sum",span:e,args:t}}function A(e,t){return{type:"Product",span:e,args:t}}function L(e,t){return{type:"Piecewise",span:e,args:t}}function N(e){return{type:"EmptyPiecewise",span:e}}function q(e,t){return{type:"Colon",span:e,args:t}}function F(e,t){return{type:"Ellipsis",span:e,args:t}}function k(e,t){return{type:"Dot",span:e,args:t}}function V(e,t){return{type:"PercentOf",span:e,args:t}}function B(e,t){return{type:"Juxt",span:e,args:t}}function R(e,t){return{type:"Letter",span:e,val:t}}function j(e,t){return{type:"Decimal",span:e,val:t}}function z(e,t){return{type:"Cmd",span:e,val:r.translateCmd(t)}}function G(e,t){return{type:"Alphanumeric",span:e,val:t}}function U(e,t,r,n){return{type:"MixedNumber",span:e,whole:t,num:r,den:n}}function W(e){if("Subscript"===e.type){if("Alphanumeric"!==e.args[1].type)return!1;e=e.args[0]}switch(e.type){case"Cmd":case"Letter":return!0;default:return!1}}function Y(e){return"Superscript"===e.type&&W(e.args[0])}function X(e,t){if("Letter"!==e.type||"d"!==e.val)return!1;if("Juxt"!==t.type)return!1;var r=t.args,n=r[0],i=r[1];return"Letter"===n.type&&"d"===n.val&&W(i)}function Q(e){return"Seq"===e.type?e.args:[e]}Object.defineProperty(t,"__esModule",{value:!0}),t.Equals=n,t.Inequality=i,t.TrailingInequalityPiece=a,t.InequalityChain=s,t.Tilde=o,t.Pos=u,t.Neg=c,t.Add=l,t.Sub=p,t.Mul=f,t.Div=h,t.Bang=d,t.Call=m,t.ImplicitCall=g,t.Index=y,t.Paren=v,t.List=b,t.Pipes=x,t.Subscript=_,t.Superscript=S,t.Prime=M,t.Seq=E,t.Sqrt=w,t.Nthroot=D,t.Frac=T,t.Derivative=P,t.Integral=I,t.EmptyIntegral=C,t.Sum=O,t.Product=A,t.Piecewise=L,t.EmptyPiecewise=N,t.Colon=q,t.Ellipsis=F,t.Dot=k,t.PercentOf=V,t.Juxt=B,t.Letter=R,t.Decimal=j,t.Cmd=z,t.Alphanumeric=G,t.MixedNumber=U,t.isIdentifier=W,t.isSuperscriptedIdentifier=Y,t.isDerivative=X,t.unwrapSeq=Q}),define("math/parser/surface-node-error",["require","exports"],function(e,t){"use strict";function r(e,t){return{type:"Err",span:e,error:t}}function n(){return{type:"UnexpectedParseError"}}function i(){return{type:"EmptyInput"}}function a(){return{type:"EmptyGroup"}}function s(){return{type:"EmptySubscript"}}function o(){return{type:"EmptySuperscript"}}function u(){return{type:"EmptyRadical"}}function c(){return{type:"EmptySquareBracket"}}function l(){return{type:"EmptyPipe"}}function p(){return{type:"EmptyRadicand"}}function f(){return{type:"UnexpectedEnd"}}function h(e){return{type:"BinaryOperatorMissingRight",val:e}}function d(e){return{type:"BinaryOperatorMissingLeft",val:e}}function m(e){return{type:"UnaryOperatorMissingRight",val:e}}function g(e){return{type:"UnaryOperatorMissingLeft",val:e}}function y(e,t){return{type:"MissingCloseDelimiter",open:e,close:t}}function v(e,t){return{type:"UnexpectedCloseDelimiter",open:e,close:t}}function b(){return{type:"UnexpectedDifferential"}}function x(e){return{type:"UnrecognizedSymbol",val:e}}function _(e){return{type:"InvalidOperatorName",val:e}}function S(e){return{type:"InvalidSubscript",val:e}}function M(e){return{type:"UnexpectedSubscript",base:e}}function E(e){return{type:"FunctionMissingArgument",val:e}}function w(){return{type:"PercentMissingOf"}}function D(){return{type:"PrimeWithoutParen"}}function T(){return{type:"SuperscriptWithPrime"}}function P(){return{type:"UnexpectedPrime"}}function I(){return{type:"SumMissingBound"}}function C(){return{type:"ProductMissingBound"}}function O(){return{type:"MissingBound"}}function A(){return{type:"IntegralMissingBound"}}function L(){return{type:"SumMissingBody"}}function N(){return{type:"ProductMissingBody"}}function q(){return{type:"IntegralMissingBody"}}function F(){return{type:"DerivativeMissingBody"}}function k(){return{type:"IntegralMissingDifferential"}}function V(){return{type:"DifferentialWithSuperscript"}}function B(){return{type:"FractionMissingNumerator"}}function R(){return{type:"FractionMissingDenominator"}}function j(){return{type:"FractionEmpty"}}function z(e){return{type:"AdjacentNumbers",args:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Err=r,t.UnexpectedParseError=n,t.EmptyInput=i,t.EmptyGroup=a,t.EmptySubscript=s,t.EmptySuperscript=o,t.EmptyRadical=u,t.EmptySquareBracket=c,t.EmptyPipe=l,t.EmptyRadicand=p,t.UnexpectedEnd=f,t.BinaryOperatorMissingRight=h,t.BinaryOperatorMissingLeft=d,t.UnaryOperatorMissingRight=m,t.UnaryOperatorMissingLeft=g,t.MissingCloseDelimiter=y,t.UnexpectedCloseDelimiter=v,t.UnexpectedDifferential=b,t.UnrecognizedSymbol=x,t.InvalidOperatorName=_,t.InvalidSubscript=S,t.UnexpectedSubscript=M,t.FunctionMissingArgument=E,t.PercentMissingOf=w,t.PrimeWithoutParen=D,t.SuperscriptWithPrime=T,t.UnexpectedPrime=P,t.SumMissingBound=I,t.ProductMissingBound=C,t.MissingBound=O,t.IntegralMissingBound=A,t.SumMissingBody=L,t.ProductMissingBody=N,t.IntegralMissingBody=q,t.DerivativeMissingBody=F,t.IntegralMissingDifferential=k,t.DifferentialWithSuperscript=V,t.FractionMissingNumerator=B,t.FractionMissingDenominator=R,t.FractionEmpty=j,t.AdjacentNumbers=z}),define("math/parser/expression-token-tables",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={"+":!0,"-":!0,"*":!0,"/":!0,"!":!0,"(":!0,")":!0,"\\\\{":!0,"\\\\}":!0,"(|":!0,"|)":!0,"[":!0,"]":!0,",":!0,"...":!0,":":!0,"=":!0,">":!0,"<":!0,">=":!0,"<=":!0,"~":!0,"%":!0,".":!0,Letter:!0,Decimal:!0,Cmd:!0,Differential:!0,End:!0,Trig:!0,Ln:!0,Log:!0,Int:!0,Sum:!0,Prod:!0,Err:!0};t.commandTable={"\\\\lt":"<","\\\\gt":">","\\\\le":"<=","\\\\ge":">=","\\\\ldots":"...","\\\\sim":"~","\\\\cdot":"*","\\\\times":"*","\\\\div":"/","\\\\ln":"Ln","\\\\log":"Log","\\\\int":"Int","\\\\sum":"Sum","\\\\prod":"Prod","\\\\backslash":"Err"};for(var n=["sin","cos","tan","cot","sec","csc"],i=0,a=n;i<a.length;i++){var s=a[i];t.commandTable["\\\\"+s]="Trig",t.commandTable["\\\\"+s+"h"]="Trig",t.commandTable["\\\\arc"+s]="Trig",t.commandTable["\\\\arc"+s+"h"]="Trig"}t.symbolTable={"+":"+","-":"-","*":"*","/":"/","!":"!","(":"(",")":")","[":"[","]":"]",",":",","...":"...",":":":","=":"=",">=":">=","<=":"<=",">":">","<":"<","~":"~",".":"."},t.escapedSymbolTable={"\\\\{":"\\\\{","\\\\}":"\\\\}","\\\\%":"%"},t.leftTable={"|":"(|","\\\\{":"\\\\{","[":"[","(":"("},t.rightTable={"|":"|)","\\\\}":"\\\\}","]":"]",")":")"},t.allTokenTypes=Object.keys(r)}),define("math/parser/expression-lexer",["require","exports","./expression-token-tables","./input-span","./input-span","./surface-node"],function(e,t,r,n,i,a){"use strict";function s(e,t,r,n,i,a,s,o){return{opts:e,input:t,prevSpan:r,startIndex:n,endIndex:i,token:a,mode:s,parent:o}}function o(e,t){return n.joinSpans(e.token.span,t.prevSpan)}function u(e,t){return n.joinSpans(e,t.prevSpan)}function c(e){return n.emptySpanAt(e.token.span.input,e.token.span.start)}function l(e,t){return{type:"Differential",span:e,val:t}}function p(e,t,r){return{type:e,span:t,val:r}}function f(e,t){return h(t,e,0,n.emptySpanAt(e.span.input,e.span.start),void 0,void 0)}function h(e,t,n,i,a,o){var u=t.args;if(n>u.length&&o)return m(o,i);n=P(u,n);var c=M(t,n,a),l=c.token,f=c.endIndex;if("End"===l.type&&o){var h=o.input.args[o.startIndex];if("LeftRight"===h.type){var d=h.right;return s(e,t,i,n,f,p(r.rightTable[d.val]||"Err",d.span,d.val),a,o)}}else"Int"===l.type?a=y(a):"Differential"===l.type&&(a=v(a));return s(e,t,i,n,f,l,a,o)}function d(e){var t=e.input.args[e.startIndex],r=e.token.span;return t&&"LeftRight"===t.type?h(e.opts,t.arg,0,r,e.mode,e):m(e,r)}function m(e,t){var r=e.input,n=e.endIndex,i=e.mode,a=e.parent;return h(e.opts,r,n+1,t,i,a)}function g(e){return e.token}function y(e){return{type:"integral",parent:e}}function v(e){if(!e||"integral"!==e.type)throw new Error("Programming Error: expected lexer to be in integral mode.");return e.parent}function b(e,t){return g(e).type===t}function x(e){return e.startIndex>=e.input.args.length}function _(e,t){return t.token.span.start>e.token.span.start}function S(e,t){return{token:t,endIndex:e}}function M(e,t,i){if(t>=e.args.length)return S(t,p("End",n.emptySpanAt(e.span.input,e.span.end),""));var a=e.args[t];switch(a.type){case"Sqrt":case"Frac":case"SupSub":return S(t,a);case"Letter":if(!i||"integral"!==i.type)return S(t,a);if("d"!=a.val)return S(t,a);var s=M(e,t+1,i),o=s.endIndex,u=s.token;if("Letter"===u.type||"Cmd"===u.type){return S(o,l(n.joinSpans(a.span,u.span),u.val))}return S(t,a);case"LeftRight":var c=a.left;return S(t,p(r.leftTable[c.val]||"Err",n.joinSpans(a.span,c.span),c.val));case"OperatorName":for(var f=[],h=0,d=a.arg.args;h<d.length;h++){var m=d[h];if("Letter"!==m.type)return S(t,p("Err",a.span,n.slice(a.arg.span)));f.push(m.val)}var g="\\\\"+f.join("");return S(t,p(r.commandTable[g]||"Cmd",a.span,g));case"Cmd":return S(t,p(r.commandTable[a.val]||"Cmd",a.span,a.val));case"EscapedSymbol":return S(t,p(r.escapedSymbolTable[a.val]||"Err",a.span,a.val));case"Symbol":if(I(a))return E(e,t);return S(t,p(r.symbolTable[a.val]||"Err",a.span,a.val));case"Digit":return w(e,t);default:throw"Unexpected atom "+a.type+"."}}function E(e,t){var i=e.args[t];if("Symbol"!==i.type||"."!==i.val)throw new Error("Programming Error: expected \'.\'");if(t+2<e.args.length&&I(e.args[t+1])&&I(e.args[t+2])){var a=n.joinSpans(i.span,e.args[t+2].span);return S(t+2,p("...",a,n.slice(a)))}var s=P(e.args,t+1);return s<e.args.length&&"Digit"===e.args[s].type?w(e,t):S(t,p(r.symbolTable[i.val]||"Err",i.span,i.val))}function w(e,t){var r=D(e,t);if(r)return r;for(var i=e.args,a=e.args[t].span,s=[],o=!1,u=!1;t<i.length;t++){var c=P(i,t);if(c>=i.length)break;var l=i[c];if("Digit"===l.type)t=c,o=!0,s.push(l.val);else{if(u||!I(l))break;if(c+1<i.length&&I(e.args[c+1]))break;t=c,u=!0,s.push(".")}}if(!o)throw new Error("Programming Error: decimals must have at least one digit.");return S(t-1,p("Decimal",n.joinSpans(a,e.args[t-1].span),s.join("")))}function D(e,t){for(var r=e.args,i=r[t].span,s=[];t<r.length;t++){var o=P(r,t);if(o>=r.length)break;var u=r[o];if("Digit"!==u.type)break;t=o,s.push(u.val)}if(!((t=P(r,t))>=r.length)){var c=r[t];if("Frac"===c.type){for(var l=[],p=[],f=0,h=c.num.args;f<h.length;f++){var u=h[f];if(!T(u)){if("Digit"!==u.type)return;l.push(u.val)}}for(var d=0,m=c.den.args;d<m.length;d++){var u=m[d];if(!T(u)){if("Digit"!==u.type)return;p.push(u.val)}}var g=n.joinSpans(i,c.span);return S(t,a.MixedNumber(g,s.join(""),l.join(""),p.join("")))}}}function T(e){switch(e.type){case"Sqrt":case"Frac":case"SupSub":case"LeftRight":case"OperatorName":case"Symbol":case"Letter":case"Digit":return!1;case"Cmd":return"\\\\space"===e.val;case"EscapedSymbol":return"\\\\ "===e.val||"\\\\:"===e.val||"\\\\,"===e.val||"\\\\;"===e.val;default:throw"Unexpected atom "+e.type+"."}}function P(e,t){for(;t<e.length&&T(e[t]);)t+=1;return t}function I(e){return"Symbol"===e.type&&"."===e.val}Object.defineProperty(t,"__esModule",{value:!0}),t.Span=i.Span,t.spanStates=o,t.joinState=u,t.emptySpanAtState=c,t.lex=f,t.lexAt=h,t.advance=d,t.peek=g,t.beginIntegral=y,t.endIntegral=v,t.isAt=b,t.isDone=x,t.didAdvance=_}),define("math/parser/precspec",["require","exports","./expression-token-tables"],function(e,t,r){"use strict";function n(e){return{type:"initial",tokenType:e}}function i(e){return{type:"l",tokenType:e}}function a(e){return{type:"r",tokenType:e}}function s(e){return{type:"la",tokenType:e}}function o(e){return{type:"ra",tokenType:e}}function u(e,t){for(var n=0,i=r.allTokenTypes;n<i.length;n++){var a=i[n];if(void 0===t[a])throw new Error("Programming Error: token "+a+" must be a assigned a "+e+" precedence")}}function c(e,t,r,n){if(void 0!==t[r])throw new Error("Programming Error: duplicate "+e+" entry for token "+r+".");t[r]=n}function l(e){function t(e){return s[e]}function r(e){return a[e]}function n(e){var r=i[e];return void 0===r?t(e):r}for(var i={},a={},s={},o=0;o<e.length;o++)for(var l=e[o],p=0,f=l;p<f.length;p++){var h=f[p],d=h.type,m=h.tokenType;switch(d){case"initial":c("initial",i,m,o);break;case"l":c("left",a,m,o);break;case"r":c("right",s,m,o);break;case"la":c("left",a,m,o),c("right",s,m,o);break;case"ra":c("left",a,m,o),c("right",s,m,o-1)}}return u("left",a),u("right",s),{rightPrec:t,leftPrec:r,initialPrec:n}}Object.defineProperty(t,"__esModule",{value:!0}),t.initial=n,t.l=i,t.r=a,t.la=s,t.ra=o,t.precSpec=l}),define("math/parser/expression-parser",["require","exports","tslib","./surface-node","./surface-node-error","./input-span","./expression-lexer","./precspec"],function(e,t,r,n,i,a,s,o){"use strict";function u(e,t){var n=t?r.__assign({},A,t):A,a=c(e,n);return"Err"===a.type&&"EmptyGroup"===a.error.type?i.Err(a.span,i.EmptyInput()):a}function c(e,t){var r=s.lex(e,t);if(s.isDone(r))return i.Err(s.spanStates(r,r),i.EmptyGroup());var n=p(r,0),a=n.state,o=n.tree;return"Err"===o.type||s.isDone(a)?o:w(a).tree}function l(e,t){return{state:e,tree:t}}function p(e,t){var r,n,i,a=e;if(r=h(e),e=r.state,i=r.tree,"Err"===i.type)return l(e,i);if(!s.didAdvance(a,e))throw new Error("Programming Error: parseInitial did not advance state.");for(;!s.isDone(e);){var o=void 0;if(o=s.isAt(e,"(")&&!m(i)?C("("):I(s.peek(e).type),t>=o)break;var u=e;if(n=d(e,i),e=n.state,i=n.tree,"Err"===i.type)return l(e,i);if(!s.didAdvance(u,e))throw new Error("Programming Error: parseSuccessor did not advance state.")}return l(e,i)}function f(e){return"UnexpectedDifferential"===e.type||"UnexpectedCloseDelimiter"===e.type||"UnexpectedEnd"===e.type||"BinaryOperatorMissingLeft"===e.type}function h(e){var t,r,a,o,u,h,d,m,g,y,b,D,T,P,C,A,L,N,q,F=e,k=s.peek(e),V=O(k.type);switch(k.type){case"+":if(e=s.advance(e),t=p(e,V),e=t.state,q=t.tree,"Err"===q.type){if(!f(q.error))return l(e,q);var B=s.spanStates(F,e),R=i.Err(B,i.UnaryOperatorMissingRight(k.val));return l(e,R)}return l(e,n.Pos(s.spanStates(F,e),[q]));case"-":if(e=s.advance(e),r=p(e,V),e=r.state,q=r.tree,"Err"===q.type){if(!f(q.error))return l(e,q);var B=s.spanStates(F,e),R=i.Err(B,i.UnaryOperatorMissingRight(k.val));return l(e,R)}return l(e,n.Neg(s.spanStates(F,e),[q]));case"(":return S(e);case"\\\\{":return e=s.advance(e),s.isAt(e,"\\\\}")?(e=s.advance(e),l(e,n.EmptyPiecewise(s.spanStates(F,e)))):(a=p(e,V),e=a.state,q=a.tree,o=E(F,e,q,"\\\\{","\\\\}"),e=o.state,q=o.tree,"Err"===q.type?l(e,q):l(e,n.Piecewise(s.spanStates(F,e),[q])));case"[":if(e=s.advance(e),s.isAt(e,"]")){e=s.advance(e);var B=s.spanStates(F,e);return l(e,i.Err(B,i.EmptySquareBracket()))}return u=p(e,V),e=u.state,q=u.tree,h=E(F,e,q,"[","]"),e=h.state,q=h.tree,"Err"===q.type?l(e,q):l(e,n.List(s.spanStates(F,e),[q]));case"(|":if(e=s.advance(e),s.isAt(e,"|)")){e=s.advance(e);var B=s.spanStates(F,e);return l(e,i.Err(B,i.EmptyPipe()))}return d=p(e,V),e=d.state,q=d.tree,m=E(F,e,q,"(|","|)"),e=m.state,q=m.tree,"Err"===q.type?l(e,q):l(e,n.Pipes(s.spanStates(F,e),[q]));case"Frac":e=s.advance(e);var j=c(k.num,e.opts),z=c(k.den,e.opts);if("Err"===j.type&&"EmptyGroup"===j.error.type&&"Err"===z.type&&"EmptyGroup"===z.error.type){var B=s.spanStates(F,e),R=i.Err(B,i.FractionEmpty());return l(e,R)}if("Err"===j.type&&"EmptyGroup"===j.error.type){var B=s.spanStates(F,e),R=i.Err(B,i.FractionMissingNumerator());return l(e,R)}if("Err"===z.type&&"EmptyGroup"===z.error.type){var B=s.spanStates(F,e),R=i.Err(B,i.FractionMissingDenominator());return l(e,R)}if("Err"===j.type)return l(e,j);if("Err"===z.type)return l(e,z);if(n.isDerivative(j,z)&&"Juxt"===z.type){var G=z.args[1],U=void 0;if(g=p(e,I("*")-1),e=g.state,U=g.tree,"Err"===U.type){if(f(U.error)){var B=s.spanStates(F,e);return l(e,i.Err(B,i.DerivativeMissingBody()))}return l(e,U)}return l(e,n.Derivative(s.spanStates(F,e),[G,U]))}return l(e,n.Frac(s.spanStates(F,e),[j,z]));case"Sqrt":if(e=s.advance(e),k.optArg){var W=c(k.optArg,e.opts);if("Err"===W.type)return"EmptyGroup"===W.error.type?l(e,i.Err(W.span,i.EmptyRadicand())):l(e,W);var Y=c(k.arg,e.opts);return"Err"===Y.type?"EmptyGroup"===Y.error.type?l(e,i.Err(Y.span,i.EmptyRadical())):l(e,Y):l(e,n.Nthroot(s.spanStates(F,e),[W,Y]))}var Y=c(k.arg,e.opts);return"Err"===Y.type?"EmptyGroup"===Y.error.type?l(e,i.Err(Y.span,i.EmptyRadical())):l(e,Y):l(e,n.Sqrt(s.spanStates(F,e),[Y]));case"Trig":case"Ln":e=s.advance(e);var X=n.Cmd(s.spanStates(F,e),k.val),Q=0,H=s.peek(e);if("SupSub"===H.type){if(e=s.advance(e),H.sub){var B=s.spanStates(F,e),R=i.Err(B,i.UnexpectedSubscript(X.val));return l(e,R)}var K=x(H,e.opts);if(K){if("Err"===K.type)return l(e,K);X=n.Superscript(s.spanStates(F,e),[X,K])}Q=H.nprimes}var Z=s.isAt(e,"(");if(Z){if(y=S(e),e=y.state,q=y.tree,"Err"===q.type)return l(e,q);q=n.Call(s.spanStates(F,e),[X,q.args[0]])}else{if(b=p(e,V-1),e=b.state,q=b.tree,"Err"===q.type)return f(q.error)?l(e,i.Err(s.spanStates(F,e),i.FunctionMissingArgument(k.val))):l(e,q);q=n.ImplicitCall(s.spanStates(F,e),[X,q])}if(Q>0){var B=s.spanStates(F,e);if(!Z){var R=i.Err(B,i.PrimeWithoutParen());return l(e,R)}q=n.Prime(B,Q,[q])}return l(e,q);case"Log":e=s.advance(e);var X=n.Cmd(s.spanStates(F,e),k.val),Q=0,J=void 0,K=void 0,H=s.peek(e);if("SupSub"===H.type&&(e=s.advance(e),J=v(H,e.opts),K=x(H,e.opts),Q=H.nprimes),J&&"Err"===J.type)return l(e,J);if(K&&"Err"===K.type)return l(e,K);var Z=s.isAt(e,"(");if(Z){if(D=S(e),e=D.state,q=D.tree,"Err"===q.type)return l(e,q);q=q.args[0]}else if(T=p(e,V-1),e=T.state,q=T.tree,"Err"===q.type)return f(q.error)?l(e,i.Err(s.spanStates(F,e),i.FunctionMissingArgument(k.val))):l(e,q);var $=J?n.Seq(s.spanStates(F,e),n.unwrapSeq(q).concat(J)):q,ee=J?n.Cmd(s.spanStates(F,e),"\\\\logbase"):X;if(K&&(ee=n.Superscript(s.spanStates(F,e),[ee,K])),q=Z?n.Call(s.spanStates(F,e),[ee,$]):n.ImplicitCall(s.spanStates(F,e),[ee,$]),Q>0){var B=s.spanStates(F,e);if(!Z){var R=i.Err(B,i.PrimeWithoutParen());return l(e,R)}q=n.Prime(B,Q,[q])}return l(e,q);case"Int":e=s.advance(e);var H=s.peek(e);e=s.advance(e);var te=_(H,F,e);if("Err"===te.type)return"MissingBound"===te.error.type?l(e,i.Err(te.span,i.IntegralMissingBound())):l(e,te);var K=te.sup,J=te.sub,G=void 0;if(s.isAt(e,"Differential"))return P=M(e),e=P.state,G=P.tree,"Err"===G.type?l(e,G):l(e,n.EmptyIntegral(s.spanStates(F,e),[G,J,K]));if(C=p(e,V),e=C.state,q=C.tree,"Err"===q.type)return f(q.error)?l(e,i.Err(q.span,i.IntegralMissingBody())):l(e,q);var re=q;return s.isAt(e,"Differential")?(A=M(e),e=A.state,G=A.tree,"Err"===G.type?l(e,G):l(e,n.Integral(s.spanStates(F,e),[G,J,K,re]))):l(e,i.Err(s.spanStates(F,e),i.IntegralMissingDifferential()));case"Sum":e=s.advance(e);var H=s.peek(e);e=s.advance(e);var te=_(H,F,e);if("Err"===te.type)return"MissingBound"===te.error.type?l(e,i.Err(te.span,i.SumMissingBound())):l(e,te);var K=te.sup,J=te.sub;return L=p(e,V),e=L.state,q=L.tree,"Err"===q.type?f(q.error)?l(e,i.Err(q.span,i.SumMissingBody())):l(e,q):l(e,n.Sum(s.spanStates(F,e),[q,J,K]));case"Prod":e=s.advance(e);var H=s.peek(e);e=s.advance(e);var te=_(H,F,e);if("Err"===te.type)return"MissingBound"===te.error.type?l(e,i.Err(te.span,i.ProductMissingBound())):l(e,te);var K=te.sup,J=te.sub;return N=p(e,V),e=N.state,q=N.tree,"Err"===q.type?f(q.error)?l(e,i.Err(q.span,i.ProductMissingBody())):l(e,q):l(e,n.Product(s.spanStates(F,e),[q,J,K]));case"Cmd":return e=s.advance(e),q=n.Cmd(s.spanStates(F,e),k.val),l(e,q);case"Letter":return e=s.advance(e),q=n.Letter(s.spanStates(F,e),k.val),l(e,q);case"Decimal":e=s.advance(e);var ne=n.Decimal(s.spanStates(F,e),k.val),H=e.token;if("Decimal"===H.type||"MixedNumber"===H.type){var ie=e;e=s.advance(e);var B=s.spanStates(F,e),ae="MixedNumber"===H.type?H:n.Decimal(s.spanStates(ie,e),H.val);return l(e,i.Err(B,i.AdjacentNumbers([ne,ae])))}return l(e,ne);case"MixedNumber":return e=s.advance(e),l(e,k);case"*":case"/":case",":case"=":case">":case"<":case">=":case"<=":case"~":case":":case"...":case"%":case".":e=s.advance(e);var B=s.spanStates(F,e),R=i.Err(B,i.BinaryOperatorMissingLeft(k.val));return l(e,R);case"!":e=s.advance(e);var B=s.spanStates(F,e),R=i.Err(B,i.UnaryOperatorMissingLeft(k.val));return l(e,R);case"SupSub":e=s.advance(e);var se="supsub";k.sub?se="subscript":k.sup?se="superscript":k.nprimes>0&&(se="prime");var B=s.spanStates(F,e),R=i.Err(B,i.UnaryOperatorMissingLeft(se));return l(e,R);case")":case"\\\\}":case"]":case"|)":case"Differential":return w(e);case"Err":e=s.advance(e);var B=s.spanStates(F,e),R=i.Err(B,i.UnrecognizedSymbol(k.val));return l(e,R);case"End":var B=s.spanStates(F,e),R=i.Err(B,i.UnexpectedEnd());return l(e,R);default:throw"Unexpected token type "+k.type+"."}}function d(e,t){var r,a,o,u,c,h,d,m,v,_,M,T,P,I,O,A=s.peek(e),L=C(A.type);switch(A.type){case"+":case"-":case"*":case"/":case"=":case"~":case":":case".":if(e=s.advance(e),r=p(e,L),e=r.state,O=r.tree,"Err"===O.type){if(f(O.error)){var N=s.joinState(t.span,e),q=i.Err(N,i.BinaryOperatorMissingRight(A.val));return l(e,q)}return l(e,O)}return l(e,g(A.type,s.joinState(t.span,e),[t,O]));case"%":e=s.advance(e);var F=s.peek(e);if("Cmd"!==F.type||"of"!==F.val&&"\\\\of"!==F.val){var q=i.Err(A.span,i.PercentMissingOf());return l(e,q)}if(e=s.advance(e),a=p(e,L),e=a.state,O=a.tree,"Err"===O.type){if(f(O.error)){var N=s.joinState(t.span,e),q=i.Err(N,i.BinaryOperatorMissingRight(A.val));return l(e,q)}return l(e,O)}return l(e,n.PercentOf(s.joinState(t.span,e),[t,O]));case">=":case"<=":case">":case"<":var k=A.type;if(e=s.advance(e),o=y(e,k),e=o.state,k=o.symbol,u=p(e,L),e=u.state,O=u.tree,"Err"===O.type){if(f(O.error)){var N=s.joinState(t.span,e),q=i.Err(N,i.BinaryOperatorMissingRight(A.val));return l(e,q)}return l(e,O)}for(var V=n.Inequality(s.joinState(t.span,e),k,[t,O]),B=[],R=s.peek(e).type;">="===R||"<="===R||">"===R||"<"===R;){var j=e;if(k=R,e=s.advance(e),c=y(e,k),e=c.state,k=c.symbol,h=p(e,L),e=h.state,O=h.tree,"Err"===O.type){if(f(O.error)){var N=s.joinState(t.span,e),q=i.Err(N,i.BinaryOperatorMissingRight(A.val));return l(e,q)}return l(e,O)}B.push(n.TrailingInequalityPiece(s.spanStates(j,e),k,[O])),R=s.peek(e).type}return B.length?l(e,n.InequalityChain(s.joinState(t.span,e),V,B)):l(e,V);case"!":return e=s.advance(e),l(e,n.Bang(s.joinState(t.span,e),[t]));case"[":var j=e;if(e=s.advance(e),s.isAt(e,"]")){e=s.advance(e);var N=s.spanStates(j,e);return l(e,i.Err(N,i.EmptySquareBracket()))}return d=p(e,L),e=d.state,O=d.tree,m=E(j,e,O,"[","]"),e=m.state,O=m.tree,"Err"===O.type?l(e,O):l(e,n.Index(s.joinState(t.span,e),[t,O]));case"Sqrt":case"Frac":case"Letter":case"Cmd":case"Trig":case"Ln":case"Log":case"Sum":case"Int":case"Prod":case"Decimal":case"MixedNumber":case"\\\\{":case"(|":return v=p(e,L),e=v.state,O=v.tree,"Err"===O.type?l(e,O):l(e,n.Juxt(s.joinState(t.span,e),[t,O]));case"(":if(n.isIdentifier(t)){if(_=S(e),e=_.state,O=_.tree,"Err"===O.type)return l(e,O);var N=s.joinState(t.span,e);return l(e,n.Call(N,[t,O.args[0]]))}if("Prime"===t.type&&n.isIdentifier(t.args[0])){if(M=S(e),e=M.state,O=M.tree,"Err"===O.type)return l(e,O);var N=s.joinState(t.span,e);return l(e,n.Prime(N,t.nprimes,[n.Call(N,[t.args[0],O.args[0]])]))}return T=p(e,L),e=T.state,O=T.tree,"Err"===O.type?l(e,O):l(e,n.Juxt(s.joinState(t.span,e),[t,O]));case"SupSub":e=s.advance(e);var z=b(A),G=x(A,e.opts);if(z&&"Err"===z.type)return l(e,z);if(G&&"Err"===G.type)return l(e,G);if(z&&(t=n.Subscript(s.joinState(t.span,e),[t,z])),G&&(t=n.Superscript(s.joinState(t.span,e),[t,G])),A.nprimes>0){var N=s.joinState(t.span,e);if(!n.isIdentifier(t)){var q=i.Err(N,i.UnexpectedPrime());return l(e,q)}t=n.Prime(N,A.nprimes,[t])}return l(e,t);case",":for(var U=[t];s.isAt(e,",")&&(e=s.advance(e),!s.isAt(e,"..."))&&(!e.opts.trailingComma||!D(e));){if(P=p(e,L),e=P.state,O=P.tree,"Err"===O.type){if(f(O.error)){var N=s.joinState(t.span,e),q=i.Err(N,i.BinaryOperatorMissingRight(A.val));return l(e,q)}return l(e,O)}U.push(O)}return l(e,n.Seq(s.joinState(t.span,e),U));case"...":if(e=s.advance(e),s.isAt(e,",")&&(e=s.advance(e)),I=p(e,L),e=I.state,O=I.tree,"Err"===O.type){if(f(O.error)){var N=s.joinState(t.span,e),q=i.Err(N,i.BinaryOperatorMissingRight(A.val));return l(e,q)}return l(e,O)}return l(e,n.Ellipsis(s.joinState(t.span,e),[t,O]));case"]":case")":case"\\\\}":case"|)":case"Differential":return w(e);case"Err":return p(e,L);case"End":var N=s.spanStates(e,e),q=i.Err(N,i.UnexpectedEnd());return l(e,q);default:throw"Unexpected token type "+A.type+"."}}function m(e){return!!n.isIdentifier(e)||!("Prime"!==e.type||!n.isIdentifier(e.args[0]))}function g(e,t,r){switch(e){case"+":return n.Add(t,r);case"-":return n.Sub(t,r);case"*":return n.Mul(t,r);case"/":return n.Div(t,r);case"=":return n.Equals(t,r);case"~":return n.Tilde(t,r);case":":return n.Colon(t,r);case".":return n.Dot(t,r);default:throw"Unexpected token type "+e+"."}}function y(e,t){if(!s.isAt(e,"="))return{state:e,symbol:t};switch(t){case">":e=s.advance(e),t=">=";break;case"<":e=s.advance(e),t="<="}return{state:e,symbol:t}}function v(e,t){if(e.sub){var r=e.sub,n=c(r,t);return"Err"===n.type&&"EmptyGroup"===n.error.type?i.Err(n.span,i.EmptySubscript()):n}}function b(e){if(e.sub){var t=e.sub;if(0===t.args.length)return i.Err(t.span,i.EmptySubscript());for(var r=[],s=0,o=t.args;s<o.length;s++){var u=o[s];if("Digit"!==u.type&&"Letter"!==u.type){var c=u.span;return i.Err(c,i.InvalidSubscript(a.slice(c)))}r.push(u.val)}return n.Alphanumeric(t.span,r.join(""))}}function x(e,t){if(e.sup){var r=c(e.sup,t);return"Err"===r.type?"EmptyGroup"===r.error.type?i.Err(r.span,i.EmptySuperscript()):r:e.nprimes>0?i.Err(e.span,i.SuperscriptWithPrime()):r}}function _(e,t,r){if("SupSub"!==e.type){var n=s.spanStates(t,r);return i.Err(n,i.MissingBound())}if(e.nprimes>0){var n=s.spanStates(t,r);return i.Err(n,i.UnexpectedPrime())}var a=v(e,r.opts),o=x(e,r.opts);if(!a||"Err"===a.type&&"EmptySubscript"===a.error.type||!o||"Err"===o.type&&"EmptySuperscript"===o.error.type){var n=s.spanStates(t,r);return i.Err(n,i.MissingBound())}return"Err"===a.type?a:"Err"===o.type?o:{type:"Bounds",sup:o,sub:a}}function S(e){var t,r,i=e,a=s.peek(e),o=O(a.type);if(!s.isAt(e,"("))throw new Error("Programming Error: expected \'(\' at start of parseParen.");if(e=s.advance(e),s.isAt(e,")")){var u=n.Seq(s.emptySpanAtState(e),[]);e=s.advance(e);var c=s.spanStates(i,e);return l(e,n.Paren(c,[u]))}var f;return t=p(e,o),e=t.state,f=t.tree,r=E(i,e,f,"(",")"),e=r.state,f=r.tree,"Err"===f.type?l(e,f):l(e,n.Paren(s.spanStates(i,e),[f]))}function M(e){var t=e,r=s.peek(e);if("Differential"!==r.type)throw new Error("Programming Error: expected differential");e=s.advance(e);var a=n.Cmd(r.span,r.val),o=s.peek(e);if("SupSub"===o.type){e=s.advance(e);var u=s.spanStates(t,e),c=b(o);if(c){if("Err"===c.type)return l(e,c);a=n.Subscript(u,[a,c])}if(o.sup)return l(e,i.Err(u,i.DifferentialWithSuperscript()));if(o.nprimes>0)return l(e,i.Err(u,i.UnexpectedPrime()))}return l(e,a)}function E(e,t,r,n,a){if("Err"===r.type&&"UnexpectedEnd"!==r.error.type)return l(t,r);if("Err"===r.type||!s.isAt(t,a)){var o=s.spanStates(e,t);return l(t,i.Err(o,i.MissingCloseDelimiter(n,a)))}return t=s.advance(t),l(t,r)}function w(e){var t=e;switch(s.peek(e).type){case")":e=s.advance(e);var r=s.spanStates(t,e);return l(e,i.Err(r,i.UnexpectedCloseDelimiter("(",")")));case"]":e=s.advance(e);var r=s.spanStates(t,e);return l(e,i.Err(r,i.UnexpectedCloseDelimiter("[","]")));case"\\\\}":e=s.advance(e);var r=s.spanStates(t,e);return l(e,i.Err(r,i.UnexpectedCloseDelimiter("\\\\{","\\\\}")));case"|)":e=s.advance(e);var r=s.spanStates(t,e);return l(e,i.Err(r,i.UnexpectedCloseDelimiter("|","|")));case"Differential":e=s.advance(e);var r=s.spanStates(t,e);return l(e,i.Err(r,i.UnexpectedDifferential()));default:e=s.advance(e);var r=s.spanStates(t,e);return l(e,i.Err(r,i.UnexpectedParseError()))}}function D(e){return s.isAt(e,")")||s.isAt(e,"]")||s.isAt(e,"\\\\}")}Object.defineProperty(t,"__esModule",{value:!0});var T=[[o.initial("("),o.la(")"),o.initial("\\\\{"),o.la("\\\\}"),o.r("["),o.la("]"),o.initial("(|"),o.la("|)"),o.la("Differential"),o.la("End")],[o.ra("...")],[o.la(",")],[o.ra(":")],[o.la("="),o.la(">"),o.la("<"),o.la(">="),o.la("<="),o.la("~")],[o.la("+"),o.la("-")],[o.la("*"),o.la("/"),o.la("Decimal"),o.la("MixedNumber"),o.la("Letter"),o.la("Cmd"),o.la("%"),o.r("("),o.la("\\\\{"),o.la("(|"),o.la("Frac"),o.la("Sqrt"),o.la("Trig"),o.la("Ln"),o.la("Log"),o.ra("Int"),o.ra("Sum"),o.ra("Prod")],[o.initial("+"),o.initial("-")],[o.la("!")],[o.la("SupSub")],[o.l("["),o.la(".")],[o.l("(")],[o.la("Err")]],P=o.precSpec(T),I=P.leftPrec,C=P.rightPrec,O=P.initialPrec,A={trailingComma:!1};t.parse=u}),define("math/inverses",[],function(){var e={};return["sin","cos","tan","cot","sec","csc","sinh","cosh","tanh","coth","sech","csch"].forEach(function(t){e[t]="arc"+t,e["arc"+t]=t}),e}),define("math/parser/lower",["require","exports","math/inverses","math/errormsg","tslib","./input-span","./surface-node","../maybe-rational"],function(e,t,r,n,i,a,s,o){"use strict";function u(e,t){return l(e,t)}function c(e,t){for(var r=[],n=0;n<t.length;n++)r.push(h(e,t[n]));return r}function l(e,t){return e.setInput(p(e,t),t.span)}function p(e,t){var r=e.nodes;switch(t.type){case"Equals":var i=t.args,a=i[0],o=i[1];if("Call"===a.type){var u=a.args,l=u[0],p=u[1],m=s.unwrapSeq(p);if(s.isIdentifier(l)&&m.every(s.isIdentifier))return r.FunctionDefinition(h(e,l),c(e,m),h(e,o))}else if(s.isIdentifier(a))return r.Assignment(h(e,a),h(e,o));return r.Equation(h(e,a),h(e,o));case"Tilde":var g=c(e,t.args),a=g[0],o=g[1];return r.Regression(a,o);case"Inequality":return S(e,t);case"InequalityChain":if(t.chain.length>1)throw n.inequalityChainTooLong();var y=t.first,v=y.symbol,b=y.args,x=b[0],_=b[1],M=t.chain[0],E=M.symbol,w=M.args[0];return s.isIdentifier(_)?r.DoubleInequality([h(e,x),v,h(e,_),E,h(e,w)]):S(e,t);case"Seq":if(!t.args.every(f))throw n.malformedPoint();return r.List(c(e,t.args));case"Call":var D=t.args,T=D[0],P=D[1];if("Cmd"===T.type)switch(T.val){case"polygon":return r.Polygon(c(e,s.unwrapSeq(P)));case"histogram":return r.Histogram(c(e,s.unwrapSeq(P)));case"dotplot":return r.DotPlot(c(e,s.unwrapSeq(P)));case"boxplot":return r.BoxPlot(c(e,s.unwrapSeq(P)));case"ttest":return r.TTest(c(e,s.unwrapSeq(P)));case"ittest":return r.IndependentTTest(c(e,s.unwrapSeq(P)));case"stats":return r.Stats(c(e,s.unwrapSeq(P)));default:return d(e,t)}return d(e,t);default:return d(e,t)}}function f(e){if("Paren"!==e.type)return!1;var t=e.args[0];return"Seq"===t.type&&2===t.args.length}function h(e,t){return e.setInput(d(e,t),t.span)}function d(e,t){var r=e.nodes;switch(t.type){case"Pos":return d(e,t.args[0]);case"Neg":for(var i=-1,u=t.args[0];;)if("Pos"===u.type||"Paren"===u.type)u=u.args[0];else{if("Neg"!==u.type)break;u=u.args[0],i*=-1}switch(u.type){case"Decimal":var l=E(u);return r.Constant(-1===i?o.neg(l):l);case"MixedNumber":var l=w(u);return r.MixedNumber(-1===i?o.neg(l):l);default:return-1===i?r.Negative([h(e,u)]):d(e,u)}case"Add":return r.Add(c(e,t.args));case"Sub":return r.Subtract(c(e,t.args));case"Mul":return r.Multiply(c(e,t.args));case"Div":return r.Divide(c(e,t.args));case"Bang":var p=t.args[0];return"Call"===p.type?r.FunctionFactorial(c(e,p.args)):r.FunctionCall("\\\\factorial",c(e,t.args));case"PercentOf":return r.PercentOf(c(e,t.args));case"Call":return b(e,t);case"ImplicitCall":return M(t),b(e,t);case"Dot":var f=t.args[1],m=c(e,t.args),g=m[0],y=m[1];if("Cmd"===f.type&&"random"===f.val){var v=a.emptySpanAt(f.span.input,f.span.end),_=e.setInput(I(e),v);y=e.setInput(r.SeededFunctionCall(y,[_]),f.span)}return r.DotAccess([g,y]);case"Prime":var S=t.args[0];if("Call"===S.type){var P=S.args,O=P[0],A=P[1],L=s.unwrapSeq(A).length;if("Cmd"===O.type&&"logbase"===O.val){if(2!==L)throw n.primedFunctionArity()}else if(1!==L)throw n.primedFunctionArity();return r.Prime(t.nprimes,c(e,t.args))}throw"ImplicitCall"===S.type?n.primeWithoutParen():n.unexpectedPrime();case"Index":return r.ListAccess(c(e,t.args));case"Paren":var N=t.args[0];if("Seq"===N.type){if(2===N.args.length)return r.OrderedPair(c(e,N.args));throw 0===N.args.length?n.emptyParen():n.nonPairTuple()}return d(e,N);case"List":var q=t.args[0];if("Ellipsis"===q.type){var F=q.args,k=F[0],V=F[1];return r.Range([r.List(c(e,s.unwrapSeq(k))),r.List(c(e,s.unwrapSeq(V)))])}return r.List(c(e,s.unwrapSeq(q)));case"Pipes":return r.FunctionCall("\\\\abs",c(e,t.args));case"Subscript":var B=t.args,R=B[0],j=B[1];if(0===j.val.length)throw n.emptySubscript();var z=void 0;switch(R.type){case"Letter":case"Cmd":z=R.val;break;default:throw n.unexpectedSubscript()}return r.Identifier(z+"_"+j.val);case"Superscript":\nvar G=t.args,R=G[0],U=G[1];return"Call"!==R.type||"Seq"===R.args[1].type||D(R)?"Dot"===R.type?r.DotAccessExponent(c(e,[R.args[0],R.args[1],U])):r.Exponent(c(e,t.args)):r.FunctionExponent(c(e,[R.args[0],R.args[1],U]));case"Sqrt":return r.FunctionCall("sqrt",c(e,t.args));case"Nthroot":return r.FunctionCall("nthroot",c(e,[t.args[1],t.args[0]]));case"Frac":return r.Divide(c(e,t.args));case"Derivative":var W=c(e,t.args);if(!s.isIdentifier(t.args[0]))throw n.parseError();return r.Derivative(W[0],[W[1]]);case"Integral":var Y=t.args,X=Y[0],Q=Y[1],H=Y[2],K=Y[3],W=c(e,[X,Q,H,K]);return r.Integral(W);case"EmptyIntegral":var Z=c(e,t.args),X=Z[0],J=Z[1],H=Z[2],K=r.Constant(o.maybeRational(1,1));return r.Integral([X,J,H,K]);case"Sum":var $=t.args,ee=$[0],te=$[1],H=$[2];if("Equals"!=te.type)throw n.incorrectSumLowerBound();if(!s.isIdentifier(te.args[0]))throw n.incorrectSumLowerBound();var W=c(e,[te.args[0],te.args[1],H]),re=h(C(e,W[0]),ee);return r.Sum(W.concat(re));case"Product":var ne=t.args,ee=ne[0],ie=ne[1],H=ne[2];if("Equals"!=ie.type)throw n.incorrectProductLowerBound();if(!s.isIdentifier(ie.args[0]))throw n.incorrectProductLowerBound();var W=c(e,[ie.args[0],ie.args[1],H]),re=h(C(e,W[0]),ee);return r.Product(W.concat(re));case"Juxt":return r.Multiply(c(e,t.args));case"Letter":return r.Identifier(t.val);case"Cmd":var ae=t.val;if("ans"===ae){if(void 0===e.currentIndex)throw n.badAnsContext();return r.Ans("ans_{"+(e.currentIndex-1)+"}")}if("approx"===ae)throw n.unrecognizedSymbol(ae);return r.Identifier(ae);case"Decimal":return r.Constant(E(t));case"MixedNumber":return r.MixedNumber(w(t));case"Piecewise":return x(e,t);case"EmptyPiecewise":if(!r.Piecewise.empty)throw n.featureUnavailable();return r.Piecewise.empty();case"Equals":throw n.unexpectedSymbol("=");case"Inequality":case"InequalityChain":throw n.unexpectedInequality();case"Tilde":throw n.unexpectedSymbol("~");case"Seq":throw n.unexpectedSymbol(",");case"Colon":throw n.unexpectedSymbol(":");case"Ellipsis":throw n.unexpectedSymbol("...");case"Err":throw T(t.error);default:throw"Unexpected surface node "+t.type+"."}}function m(e){return r.hasOwnProperty(e)}function g(e){return"ln"===e||"log"===e||"logbase"===e}function y(e){return"Decimal"===e.type&&"2"===e.val}function v(e){return"Neg"===e.type&&(e=e.args[0],"Decimal"===e.type&&"1"===e.val)}function b(e,t){var i=e.nodes,o=t.args,u=o[0],l=o[1],p=h(e,u),f=s.unwrapSeq(l),d=c(e,f);if("Cmd"===u.type&&"random"===u.val){var b=a.emptySpanAt(l.span.input,l.span.start),x=e.setInput(I(e),b);return i.SeededFunctionCall(p,[x].concat(d))}if(s.isIdentifier(u))return i.FunctionCall(p,d);if("Superscript"===u.type){var _=u.args,S=_[0],M=_[1];if("Cmd"===S.type){var E=S.val;if(m(E)||g(E)){if(y(M))return i.Exponent([i.FunctionCall(E,d),h(e,M)]);if(v(M)&&void 0!==r[E])return i.FunctionCall(r[E],d);throw m(E)?n.badTrigExponent(E):n.badLogExponent("logbase"===E?"log":E)}}}return i.Multiply([p,h(e,l)])}function x(e,t){var r,i=e.nodes,a=t.args[0],u=s.unwrapSeq(a),c=[];e:for(r=0;r<u.length;r++){var l=u[r];switch(l.type){case"Colon":var p=l.args,f=p[0],d=p[1];if(!_(f))throw n.colonMissingCondition();c.push({condition:S(e,f),if_expr:h(e,d)});break;case"Equals":case"Inequality":case"InequalityChain":c.push({condition:S(e,l),if_expr:i.Constant(o.maybeRational(1,1))});break;default:break e}}if(0===r)throw n.piecewiseMissingCondition();if(r<u.length-1)throw n.piecewisePartMissingCondition();if(r===u.length-1&&c.push({condition:i.Constant(!0),if_expr:h(e,u[r])}),!i.Piecewise.chain)throw n.featureUnavailable();return i.Piecewise.chain(c)}function _(e){return"Equals"===e.type||"Inequality"===e.type||"InequalityChain"===e.type}function S(e,t){var r=e.nodes;switch(t.type){case"Equals":return r.Comparator["="](c(e,t.args));case"Inequality":return r.Comparator[t.symbol](c(e,t.args));case"InequalityChain":if(t.chain.length>1)throw n.inequalityChainTooLong();var i=t.first,o=i.symbol,u=i.args,l=u[0],p=u[1],f=t.chain[0],h=f.symbol,d=f.args[0],m=a.emptySpanAt(t.span.input,t.span.start);return r.And([S(e,s.Inequality(m,o,[l,p])),S(e,s.Inequality(m,h,[p,d]))]);default:throw n.parseError()}}function M(e){var t=e.args,r=t[0],i=t[1];if("Superscript"===r.type&&(r=r.args[0]),"Cmd"===r.type&&"logbase"===r.val&&"Seq"===i.type&&2===i.args.length){if(!P(i.args[0]))throw n.badImplicitCall("log")}else if(!P(i)){if("Cmd"===r.type)throw n.badImplicitCall(r.val);throw n.parseError()}}function E(e){return o.fromDecimalString(e.val)}function w(e){var t=o.fromDecimalString(e.whole),r=o.fromDecimalString(e.num),n=o.fromDecimalString(e.den);return o.add(t,o.div(r,n))}function D(e){if("Call"!==e.type)return!1;for(var t=e.args[0];"Superscript"===t.type||"Subscript"===t.type||"Prime"===t.type;)t=t.args[0];return"Cmd"===t.type&&(m(t.val)||g(t.val))}function T(e){switch(e.type){case"UnexpectedParseError":case"MissingBound":case"EmptyGroup":case"UnexpectedDifferential":case"UnexpectedEnd":return n.parseError();case"InvalidOperatorName":return n.invalidOperatorName();case"UnexpectedCloseDelimiter":case"MissingCloseDelimiter":return n.mismatchedBraces(e.open,e.close);case"UnrecognizedSymbol":return"."===e.val?n.unexpectedSymbol(e.val):n.unrecognizedSymbol(e.val);case"EmptyInput":return n.blankExpression();case"BinaryOperatorMissingRight":case"BinaryOperatorMissingLeft":return n.binaryOperatorMissingOperand("%"===e.val?"% of":e.val);case"UnaryOperatorMissingLeft":return n.unaryOperatorMissingLeft(e.val);case"UnaryOperatorMissingRight":return n.unaryOperatorMissingRight(e.val);case"UnexpectedSubscript":return n.cannotSubscript(e.base);case"PercentMissingOf":return n.percentMissingOf();case"SumMissingBound":return n.sumMissingBound();case"ProductMissingBound":return n.productMissingBound();case"IntegralMissingBound":return n.integralMissingBound();case"SumMissingBody":return n.sumMissingBody();case"ProductMissingBody":return n.productMissingBody();case"IntegralMissingBody":return n.integralMissingBody();case"DerivativeMissingBody":return n.derivativeMissingBody();case"IntegralMissingDifferential":return n.integralMissingDifferential();case"DifferentialWithSuperscript":return n.differentialWithSuperscript();case"FractionMissingNumerator":return n.fractionMissingNumerator();case"FractionMissingDenominator":return n.fractionMissingDenominator();case"FractionEmpty":return n.fractionEmpty();case"EmptySuperscript":return n.emptySuperscript();case"EmptySubscript":return n.emptySubscript();case"InvalidSubscript":return n.invalidSubscript(e.val);case"SuperscriptWithPrime":return n.superscriptWithPrime();case"PrimeWithoutParen":return n.primeWithoutParen();case"UnexpectedPrime":return n.unexpectedPrime();case"EmptyRadical":return n.emptyRadical();case"EmptyRadicand":return n.emptyRadicand();case"EmptySquareBracket":return n.emptySquareBracket();case"EmptyPipe":return n.emptyPipe();case"FunctionMissingArgument":return n.wrongArity(e.val,1,0);case"AdjacentNumbers":var t=e.args[0].val,r=void 0;switch(e.args[1].type){case"Decimal":r=e.args[1].val;break;case"MixedNumber":r=e.args[1].whole+" "+e.args[1].num+"/"+e.args[1].den;break;default:throw"Unexpected type "+e.args[1].type+" as right member of AdjacentNumbers."}return n.adjacentNumbers(t,r);default:throw"Unexpected surface node "+e.type+"."}}function P(e){switch(e.type){case"Letter":case"Decimal":case"MixedNumber":case"Cmd":case"EmptyPiecewise":return!0;case"Neg":for(var t=e.args[0];;)if("Pos"===t.type||"Paren"===t.type)t=t.args[0];else{if("Neg"!==t.type)break;t=t.args[0]}return"Decimal"===t.type||"MixedNumber"===t.type;case"Pos":case"Paren":return P(e.args[0]);case"Juxt":case"Mul":case"Div":return P(e.args[0])&&P(e.args[1]);case"Subscript":return P(e.args[0]);case"Superscript":case"Frac":case"Add":case"Sub":return P(e.args[0])&&P(e.args[1]);case"Piecewise":var t=e.args[0];return"Equals"===t.type||"Inequality"===t.type||"InequalityChain"===t.type;case"Call":var r=e.args,n=r[0],i=r[1];return!s.isIdentifier(n)&&!s.isSuperscriptedIdentifier(n)&&(P(n)&&P(i));case"Derivative":case"Sqrt":case"Nthroot":case"Pipes":case"Bang":return!1;case"Neg":case"Equals":case"Inequality":case"InequalityChain":case"Tilde":case"ImplicitCall":case"Index":case"List":case"Seq":case"Integral":case"EmptyIntegral":case"Sum":case"Product":case"Colon":case"Ellipsis":case"Dot":case"PercentOf":case"Prime":return!1;default:throw"Unexpected surface node "+e.type+"."}}function I(e){var t=e.nodes.ExtendSeed("",[e.nodes.Identifier("globalRandomSeed"),e.nodes.Seed(e.nextSeed())]);if(!e.seedExtensions)return t;for(var r=0,n=e.seedExtensions;r<n.length;r++){var i=n[r];t=e.nodes.ExtendSeed("ro",[t,i])}return t}function C(e,t){var r=e.seedExtensions||[];return i.__assign({},e,{seedExtensions:r.concat(t)})}Object.defineProperty(t,"__esModule",{value:!0}),t.lower=u}),define("math/baseparser",["require","exports","math/errormsg","parsenodes","math/parser/latex-parser","math/parser/expression-parser","math/parser/lower"],function(e,t,r,n,i,a,s){"use strict";function o(){throw r.featureUnavailable()}function u(e,t){return e.setInputSpan(t),e}function c(e,t){if("string"!=typeof e)throw new Error("Type Error: parse can only be called with strings");t=t||{};var c=n;if(t.disabledFeatures){c=Object.create(c);for(var l=0,p=t.disabledFeatures;l<p.length;l++){var f=p[l];if(!c[f])throw new Error("Programming Error: "+f+" cannot be disabled because it is not a parsenode.");c[f]=o}}var h=void 0===t.seedPrefix?"":t.seedPrefix,d=0,m=function(){var e=h+"::vc"+d;return d+=1,e},g={nodes:c,currentIndex:t.index,setInput:u,nextSeed:m},y=void 0!==t.trailingComma?{trailingComma:t.trailingComma}:{};try{var v=i.parse(e),b=a.parse(v,y);return s.lower(g,b)}catch(e){return e instanceof n.Error?e:"string"==typeof e?n.Error(e):r.parseError()}}Object.defineProperty(t,"__esModule",{value:!0}),t.parse=c}),define("math/rational-arithmetic-sequence",["require","math/distance","math/builtin"],function(e){function t(e,t){var i=n.toFraction(e),a=n.toFraction(t);if(r.approx(i.n/i.d,e)&&r.approx(a.n/a.d,t)){var s=n.lcm(i.d,a.d),o=i.n*(s/i.d);return{nstart:o,nstep:a.n*(s/a.d)-o,lcm:s}}}var r=e("math/distance"),n=e("math/builtin");return t}),define("math/sliders",["require","exports"],function(e,t){"use strict";function r(e,t){var r=Math.round(1e6*e)/1e6;return Math.abs(r-e)<t?r:e}function n(e){var t=!0,r=!0,n=!0;if(void 0!==e.hardMin&&e.target<e.hardMin&&(t=!1),void 0!==e.hardMax&&e.target>e.hardMax&&(r=!1),e.step){i({target:e.target,step:e.step,hardMin:t?e.hardMin:void 0,hardMax:r?e.hardMax:void 0})!==e.target&&(n=!1)}return{min:t,max:r,step:n}}function i(e){var t=e.target,n=e.hardMin,i=e.hardMax,a=e.step,s=1e-10;if(void 0!==n&&void 0!==i&&(s=Math.min(s,Math.abs(i-n)/1e3)),a&&(s=Math.min(s,a/10)),void 0!==n&&(n=r(n,s)),void 0!==i&&(i=r(i,s)),n>i)return n;if(t<=n)return n;if(t>=i)return i;if(a){var o=void 0!==n?n:0;t=a*Math.round((t-o)/a)+o}var u=r(t,s);return a?t=u:n===u?t=u:i===u&&(t=u),t<=n?n:t>=i?i:t}Object.defineProperty(t,"__esModule",{value:!0}),t.roundToReasonableDecimal=r,t.determineWhichLimitsAreCompatibleWithValue=n,t.constrainSliderValueLikeEvaluator=i}),define("math/features/getConcreteTree",["require","parsenodes","math/errormsg","math/types","graphing/label","math/distance","math/maybe-rational","math/rational-arithmetic-sequence","math/sliders"],function(e){function t(e,t,r,n){for(var i=[],a=0;a<e.length;a++)i.push(e[a].getConcreteTree(t,r,n));return i}function r(){return this.getDependencies().concat([this._symbol])}function n(e){return e===d.Distribution||d.isList(e)}function i(e,t,r,i){var a=i.length-1,s=e[t];if(!s)throw h.unexpectedSymbol(".");if(s.isError)throw s;if(!s.isFunction)throw h.unexpectedSymbol(".");if(!s.allowDotCalls)throw h.illegalDotCall(r);var o,u="random"===t;if(o=u?i[1].valueType:i[0].valueType,!n(o))throw h.dotLHSTypeError("."+r,d.prettyPrint(o));if(a<s.dotMinArity){if(u)throw h.randomArity();throw h.wrongArity("."+r,s.dotMinArity,a)}if(a>s.dotMaxArity){if(u)throw h.randomArity();throw h.wrongArity("."+r,s.dotMaxArity,a)}}function a(e,r,n,a,s,o){var u=t(n,a,s,o);return i(s,e,r,u),s[e].getConcreteInvocationTree(a,s,u,r,o)}function s(e,t){return e.isError?e:-1===t.indexOf(e.valueType)?h.parseError():e}function o(e,t,r){if(!t)return void(r.valids[e]=!0);var n=t.getDependencies();if(t.isError)r.errors[e]=!0;else if(n.length>0){r.errors[e]=!0;for(var i=0;i<n.length;i++)n[i]===r.exportedSymbol?r.errors.cycle=!0:r.missingVars.push(n[i])}else r.values[e]=t.asValue();r.valids[e]=isFinite(r.values[e]),r.valids[e]||(r.values[e]=void 0)}function u(e,t,r,n,i){if(r<e.length&&!g.approx(i,e.elementAt(r).asValue(),10))throw h.nonArithmeticRange();if(n-r<=t.length&&n-r>1&&!g.approx(i,t.elementAt(t.length-n+r).asValue(),10))throw h.nonArithmeticRange()}function c(e,t){for(var r=!1,n=!1,i=0;i<e.length;i++){var a=e[i];(a.isList||a.isBroadcast)&&(n=!0);for(var s=a.getDependencies(),o=0;o<s.length;o++)if(-1!==t.indexOf(s[o])){if(a.isList||a.isBroadcast)return"list"}else r=!0}return n?r?"broadcast":"list":"none"}function l(e){var t,r=[],n=[],i=[];for(t=0;t<e.length;t++){var a,s=e[t];if(s.isList){for(var o=!1,u=0;u<i.length;u++)if(s===i[u]){o=!0,a=f.DummyIndex(n[u]),a.valueType=d.elementType(s.valueType),r.push(a);break}if(!o){var c=f.Base.prototype.tmpVar();n.push(c),i.push(s),a=f.DummyIndex(c),a.valueType=d.elementType(s.valueType),r.push(a)}}else s.isBroadcast?(Array.prototype.push.apply(n,s._replacedSymbols),Array.prototype.push.apply(i,s._lists),r.push(s._expression)):r.push(s)}return{replacedArgs:i,concreteArgs:r,replacedSymbols:n}}function p(e,t,r){if(r&&r[this.type])return r[this.type].call(this,e,t,r);if(!t[this._symbol])throw h.functionUnsupported(this._symbol);var n=this.args.map(function(r){return r.getConcreteTree(e,t)});if(n.length>0){if(1===n.length&&n.push(f.Constant(1)),n[1].getDependencies().length)throw h.illegalBinWidth(this._symbol).setDependencies(n[1].getDependencies());if(n[1].valueType!==d.Number)throw h.illegalBinWidth(this._symbol);var i=n[1].asValue();if(!isFinite(i)||i<=0)throw h.illegalBinWidth(this._symbol)}return this.typeCheck(n),new this.constructor(n)}var f=e("parsenodes"),h=e("math/errormsg"),d=e("math/types"),m=e("graphing/label"),g=e("math/distance"),y=e("math/maybe-rational"),v=y.maybeRational,b=e("math/rational-arithmetic-sequence"),x=f.List,_=f.OrderedPair,S=f.ScalarExpression,M=f.Constant,E=f.ExtendSeed,w=f.Multiply,D=f.Identifier,T=f.DummyIndex,P=f.BuiltInFunction,I=e("math/sliders");f.Base.prototype.tryGetConcreteTree=function(){var e;try{e=this.getConcreteTree.apply(this,arguments)}catch(t){e=t instanceof f.Base?t:h.parseError()}return e},f.Base.prototype.getConcreteTree=function(e,t,r){if(r)return this._getConcreteTree(e,t,r);if(this.isConcreteTreeCacheValid(t))return this.__cachedConcreteTree.value;for(var n=this._getConcreteTree(e,t,r),i={},a=this.getCacheKeys().slice();;){if(!a.length)break;var s=a.pop();if(!i.hasOwnProperty(s)){var o=t[s];i[s]=o,o&&Array.prototype.push.apply(a,o.getCacheKeys())}}return this.__cachedConcreteTree={keys:i,value:n},n},f.Base.prototype.getCacheKeys=function(){return this.getDependencies()},f.Histogram.prototype.getCacheKeys=r,f.DotPlot.prototype.getCacheKeys=r,f.BoxPlot.prototype.getCacheKeys=r,f.TTest.prototype.getCacheKeys=r,f.IndependentTTest.prototype.getCacheKeys=r,f.Base.prototype.isConcreteTreeCacheValid=function(e){if(!this.__cachedConcreteTree)return!1;for(var t in this.__cachedConcreteTree.keys)if(this.__cachedConcreteTree.keys.hasOwnProperty(t)&&e[t]!==this.__cachedConcreteTree.keys[t])return!1;return!0},f.PercentOf.prototype._getConcreteTree=function(e,t,r){return r&&r[this.type]?r[this.type].call(this,e,t,r):f.Divide([f.Multiply(this.args),f.Constant(v(100,1))]).getConcreteTree(e,t,r)},f.Assignment.prototype._getConcreteTree=function(e,t,r){return r&&r[this.type]?r[this.type].call(this,e,t,r):this._expression.getConcreteTree(e,t,r)},f.Identifier.prototype._getConcreteTree=function(e,t,r){if(r&&r[this.type])return r[this.type].call(this,e,t,r);var n=m.latexToIdentifier(this.getInputString()),i=t[this._symbol];if(i){if(i.isError)throw i;if(i.isFunction)throw h.identifierAsFunction(n);return i.getConcreteTree(e,t,r)}if(P.hasOwnProperty(this._symbol))throw h.functionUnsupported(n);return f.FreeVariable(this._symbol)},f.Ans.prototype._getConcreteTree=function(e,t,r){if(r&&r[this.type])return r[this.type].call(this,e,t,r);if(void 0===t[this._symbol])throw h.ansUndefined();return D.prototype._getConcreteTree.call(this,e,t,r)},f.Equation.prototype._getConcreteTree=function(e,t,r){return r&&r[this.type]?r[this.type].call(this,e,t,r):this.asComparator().getConcreteTree(e,t,r)},f.Constant.prototype._getConcreteTree=function(e,t,r){return r&&r[this.type]?r[this.type].call(this,e,t,r):new this.constructor(this._constantValue)},f.Seed.prototype._getConcreteTree=function(e,t,r){return r&&r[this.type]?r[this.type].call(this,e,t,r):new this.constructor(this._stringValue)},f.Derivative.prototype._getConcreteTree=function(e,t,r){if(r&&r[this.type])return r[this.type].call(this,e,t,r);var n;if(t[this._symbol]){var i=Object.create(t);i[this._symbol]=f.FreeVariable(this._symbol);var a=t[this._symbol].getConcreteTree(e,t,r);if(a.valueType!==d.Number&&a.valueType!==d.ListOfNumber)throw h.derivativeVariableTypeError(this._symbol,[d.prettyPrint(a.valueType)]);var s={};return s[this._symbol]=a,n=this.args[0].getConcreteTree(e,i,r),this.typeCheck([n]),n.takeDerivative(this._symbol).substitute(s).getConcreteTree(e,t,r)}return n=this.args[0].getConcreteTree(e,t,r),this.typeCheck([n]),n.takeDerivative(this._symbol).getConcreteTree(e,t,r)},f.DoubleInequality.prototype._getConcreteTree=function(e,t,r){return r&&r[this.type]?r[this.type].call(this,e,t,r):new this.constructor([f.Piecewise([this._indicator,this._expressions[0],M(NaN)]).getConcreteTree(e,t,r),this._operators[0],D(this._symbol),this._operators[1],f.Piecewise([this._indicator,this._expressions[1],M(NaN)]).getConcreteTree(e,t,r)])},f.Expression.prototype._getConcreteTree=function(e,r,n){if(n&&n[this.type])return n[this.type].call(this,e,r,n);var i=t(this.args,e,r,n);return this.typeCheck(i),this._constantCollapsedCopy(i)},f.Error.prototype._getConcreteTree=function(e,t,r){return r&&r[this.type]?r[this.type].call(this,e,t,r):this},f.FreeVariable.prototype._getConcreteTree=function(e,t,r){return r&&r[this.type]?r[this.type].call(this,e,t,r):this},f.FunctionCall.prototype._getConcreteTree=function(e,r,n){if(n&&n[this.type])return n[this.type].call(this,e,r,n);var i="logbase"===this._symbol?"log":m.latexToIdentifier(this._identifier.getInputString()),a=r[this._symbol];if(a&&a.isError)throw a;if(!a||!a.isFunction){if(P.hasOwnProperty(this._symbol))throw"logbase"===this._symbol&&r.ln&&r.log?h.logbaseUnsupported():h.functionUnsupported(i);if(a&&a.getConcreteTree(e,r,n).valueType===d.Distribution)throw h.distributionAsFunction(a._symbol);if(1==this.args.length){var s=[D(this._symbol),this.args[0]];return w(s).getConcreteTree(e,r,n)}if(a)throw h.variableAsFunction(i);throw h.functionNotDefined(i)}var o=t(this.args,e,r,n);return a.getConcreteInvocationTree(e,r,o,i,n)},f.DotAccess.prototype._getConcreteTree=function(e,t,r){if(r&&r[this.type])return r[this.type].call(this,e,t,r);var n,i,s=this.args[0],o=this.args[1];if(o instanceof f.Identifier)return"x"===o._symbol?f.OrderedPairAccess([s,f.Constant(1)]).getConcreteTree(e,t,r):"y"===o._symbol?f.OrderedPairAccess([s,f.Constant(2)]).getConcreteTree(e,t,r):(i=m.latexToIdentifier(o.getInputString()),n=[s],a(o._symbol,i,n,e,t,r));if(o instanceof f.SeededFunctionCall)return i=m.latexToIdentifier(o._identifier.getInputString()),n=[o.seed,s].concat(o.args.slice(1)),a(o._symbol,i,n,e,t,r);if(o instanceof f.FunctionCall)return"x"===o._symbol&&1===o.args.length?f.Multiply([f.OrderedPairAccess([s,f.Constant(1)]),o.args[0]]).getConcreteTree(e,t,r):"y"===o._symbol&&1===o.args.length?f.Multiply([f.OrderedPairAccess([s,f.Constant(2)]),o.args[0]]).getConcreteTree(e,t,r):(i=m.latexToIdentifier(o._identifier.getInputString()),n=[s].concat(o.args),a(o._symbol,i,n,e,t,r));throw h.unexpectedSymbol(".")},f.DotAccessExponent.prototype._getConcreteTree=function(e,t,r){return r&&r[this.type]?r[this.type].call(this,e,t,r):"FunctionCall"!==this.args[1].type||1!==this.args[1].args.length||t[this.args[1]._symbol]&&t[this.args[1]._symbol].isFunction?f.Exponent([f.DotAccess([this.args[0],this.args[1]]),this.args[2]]).getConcreteTree(e,t,r):f.Multiply([f.DotAccess([this.args[0],f.Identifier(this.args[1]._symbol)]),f.Exponent([this.args[1].args[0],this.args[2]])]).getConcreteTree(e,t,r)},f.FunctionExponent.prototype._getConcreteTree=function(e,t,r){if(r&&r[this.type])return r[this.type].call(this,e,t,r);var n=this.args[0]._symbol;return t[n]&&t[n].isFunction?f.Exponent([f.FunctionCall(n,[this.args[1]]),this.args[2]]).getConcreteTree(e,t,r):w([this.args[0],f.Exponent([this.args[1],this.args[2]])]).getConcreteTree(e,t,r)},f.FunctionFactorial.prototype._getConcreteTree=function(e,t,r){if(r&&r[this.type])return r[this.type].call(this,e,t,r);var n=this.args[0]._symbol;return t[n]&&t[n].isFunction?f.FunctionCall("\\\\factorial",[f.FunctionCall(n,[this.args[1]])]).getConcreteTree(e,t,r):w([this.args[0],f.FunctionCall("\\\\factorial",[this.args[1]])]).getConcreteTree(e,t,r)},f.FunctionDefinition.prototype._getConcreteTree=function(e,t,r){if(r&&r[this.type])return r[this.type].call(this,e,t,r);for(var n=0;n<this._argSymbols.length;n++){if(t[this._argSymbols[n]])throw h.parameterAlreadyDefined(this._argSymbols[n]);if(this._argSymbols[n]===this._symbol)throw h.parameterAlreadyDefined(this._argSymbols[n])}return this._expression.getConcreteTree(e,t,r)},f.Image.prototype._getConcreteTree=function(e,t,r){if(r&&r[this.type])return r[this.type].call(this,e,t,r);var n=this.center.tryGetConcreteTree(e,t,r),i=this.radianAngle.tryGetConcreteTree(e,t,r),a=this.width.tryGetConcreteTree(e,t,r),o=this.height.tryGetConcreteTree(e,t,r),u=this.opacity.tryGetConcreteTree(e,t,r),c=[d.Point,d.ListOfPoint],l=[d.Number,d.ListOfNumber];return n=s(n,c),i=s(i,l),a=s(a,l),o=s(o,l),u=s(u,l),f.Image({center:n,radianAngle:i,width:a,height:o,opacity:u},this.moveStrategy)},f.Slider.prototype._getConcreteTree=function(e,t,r){if(r&&r[this.type])return r[this.type].call(this,e,t,r);var n=this._expression.getConcreteTree(e,t,r),i=this.sliderMin&&this.sliderMin.tryGetConcreteTree(e,t,r),a=this.sliderMax&&this.sliderMax.tryGetConcreteTree(e,t,r),s=this.sliderStep&&this.sliderStep.tryGetConcreteTree(e,t,r),u={exportedSymbol:this._symbol,errors:{},values:{},valids:{},missingVars:[],errMsg:void 0};if(o("min",i,u),o("max",a,u),o("step",s,u),s&&u.valids.step&&(0===u.values.step?delete u.values.step:u.values.step=Math.abs(u.values.step)),u.errors.cycle?n=h.sliderLimitReferencesExport(u.exportedSymbol):(u.errors.min||!u.valids.min?u.errMsg=h.sliderMinInvalid():u.errors.max||!u.valids.max?u.errMsg=h.sliderMaxInvalid():!u.errors.step&&u.valids.step||(u.errMsg=h.sliderStepInvalid()),u.values.min>u.values.max&&(u.valids.min=!1,u.valids.max=!1,u.errMsg||(u.errMsg=h.sliderMaxLessThanMin()))),n.isConstant){var c=I.constrainSliderValueLikeEvaluator({target:n.asValue(),hardMin:u.values.min,hardMax:u.values.max,step:u.values.step}),l=y.fromDecimalString(c.toString()),p=isFinite(y.asFloat(l))?l:c;n=M(p)}return n.sliderInfo=u,n},f.Integral.prototype._getConcreteTree=function(e,t,r){if(r&&r[this.type])return r[this.type].call(this,e,t,r);if(t[this._differential._symbol])throw h.shadowedIntegrationVariable(this._differential._symbol);var n=this.args[0],i=this.args[1],a=this.args[2];if(i.dependsOn(n._symbol)||a.dependsOn(n._symbol))throw h.badIntegralBoundDependency(n._symbol);var s=Object.create(t);return s[this._differential._symbol]=T(this._differential._symbol),S.prototype._getConcreteTree.call(this,e,s,r)},f.ListAccess.prototype._getConcreteTree=function(e,t,r){if(r&&r[this.type])return r[this.type].call(this,e,t,r);var n=this.index.getConcreteTree(e,t,r),i=this.list.getConcreteTree(e,t,r),a=[i,n];return this.typeCheck(a),this._constantCollapsedCopy(a)},f.List.prototype._getConcreteTree=function(e,r,n){if(n&&n[this.type])return n[this.type].call(this,e,r,n);var i=t(this.args,e,r,n);return this.typeCheck(i),new this.constructor(i)},f.ParametrizedReducerFunction.prototype._getConcreteTree=function(e,r,n){if(n&&n[this.type])return n[this.type].call(this,e,r,n);if(this.args[0]instanceof f.List&&this.args[0].valueType===d.ListOfDistribution)return f.List(f.List.mapArgs([this.args[0]],function(t){return this.copyWithArgs([t[0],this.args[1]]).getConcreteTree(e,r,n)}.bind(this)));if(this.args[0]instanceof f.Distribution)return this.args[0][this._symbol](this.args.slice(1)).getConcreteTree(e,r,n);var i=t(this.args,e,r,n);switch(c([i[1]],this.getDummyDependencies())){case"none":return this.typeCheck(i),this._constantCollapsedCopy(i);case"list":return f.List(f.List.mapArgs([i[1]],function(e){return e=[i[0]].concat(e),this.typeCheck(e),this._constantCollapsedCopy(e)}.bind(this)));case"broadcast":var a=l([i[1]]),s=[i[0]].concat(a.concreteArgs);return this.typeCheck(s),f.Broadcast(a.replacedSymbols,[this.copyWithArgs(s)].concat(a.replacedArgs))}},f.Prime.prototype._getConcreteTree=function(e,t,r){if(r&&r[this.type])return r[this.type].call(this,e,t,r);var n=this.args[0],i=n.args[0];if(!t[n._symbol])throw h.functionNotDefined(n._symbol);var a,s=this.tmpVar();if("logbase"===n._symbol){if(2!==n.args.length)throw h.primedFunctionArity();a=[D(s),n.args[1]]}else{if(1!==n.args.length)throw h.primedFunctionArity();a=[D(s)]}for(var o=n.copyWithArgs(a).getConcreteTree(e,t,r),u=0;u<this.order;u++)o=o.takeDerivative(s);var c={};return c[s]=i,o.substitute(c).getConcreteTree(e,t,r)},f.Range.prototype._getConcreteTree=function(e,t,r){if(r&&r[this.type])return r[this.type].call(this,e,t,r);var n=this.beginning.getConcreteTree(e,t,r),i=this.end.getConcreteTree(e,t,r);if(n.getDependencies().length)throw h.variableRange(n.getDependencies());if(i.getDependencies().length)throw h.variableRange(i.getDependencies());if(!n.isList||!i.isList)throw new Error("Programming Error: range bounds must be List nodes.");var a,s,o=n.elementAt(0).asValue(),c=i.elementAt(i.length-1).asValue(),l=c-o;if(1===n.length)a=l>=0?1:-1;else{var p=n.elementAt(1).asValue();s=b(o,p),a=n.elementAt(1).asValue()-o}var f=Math.round(l/a)+1;if(!isFinite(f)||f<n.length||f<i.length)throw h.nonArithmeticRange();var d,m,g=[];if(s){var y=s.nstart;for(d=0;d<f;d++)u(n,i,d,f,y/s.lcm),g.push(M(v(y,s.lcm))),y+=s.nstep}else for(g.push(M(o)),d=1;d<f;d++)m=o+d*a,u(n,i,d,f,m),g.push(M(v(m,1)));return x(g)},f.ReducerFunction.prototype._getConcreteTree=function(e,r,n){if(n&&n[this.type])return n[this.type].call(this,e,r,n);if(this.args[0]instanceof f.List&&this.args[0].valueType===d.ListOfDistribution)return f.List(f.List.mapArgs(this.args,function(t){return this.copyWithArgs(t).getConcreteTree(e,r,n)}.bind(this)));if(this.args[0]instanceof f.Distribution)return this.args[0][this._symbol]().getConcreteTree(e,r,n);var i=t(this.args,e,r,n);if(1===this.args.length)return i=[f.List.wrap(i[0])],this.typeCheck(i),this._constantCollapsedCopy(i);switch(c(i,this.getDummyDependencies())){case"none":return i=[f.List(i)],this.typeCheck(i),this._constantCollapsedCopy(i);case"list":return f.List(f.List.mapArgs(i,function(e){return e=[f.List(e)],this.typeCheck(e),this._constantCollapsedCopy(e)}.bind(this)));case"broadcast":var a=l(i);return i=[f.List(a.concreteArgs)],this.typeCheck(i),f.Broadcast(a.replacedSymbols,[this.copyWithArgs(i)].concat(a.replacedArgs))}},f.RepeatedOperator.prototype._getConcreteTree=function(e,t,r){if(r&&r[this.type])return r[this.type].call(this,e,t,r);if(t[this._index._symbol])throw h.shadowedIndex(this._index._symbol);var n=Object.create(t);return n[this._index._symbol]=T(this._index._symbol),S.prototype._getConcreteTree.call(this,e,n,r)},f.ScalarExpression.prototype._getConcreteTree=function(e,r,n){if(n&&n[this.type])return n[this.type].call(this,e,r,n);var i=t(this.args,e,r,n);switch(c(i,this.getDummyDependencies())){case"none":return this.typeCheck(i),this._constantCollapsedCopy(i);case"list":return f.List(f.List.mapArgs(i,function(e){return this.typeCheck(e),this._constantCollapsedCopy(e)}.bind(this)));case"broadcast":var a=l(i);return this.typeCheck(a.concreteArgs),f.Broadcast(a.replacedSymbols,[this.copyWithArgs(a.concreteArgs)].concat(a.replacedArgs))}},f.Regression.prototype._getConcreteTree=function(e,t,r){return r&&r[this.type]?r[this.type].call(this,e,t,r):new this.constructor(this._lhs,this._rhs)},f.Polygon.prototype._getConcreteTree=function(e,t,r){if(r&&r[this.type])return r[this.type].call(this,e,t,r);var n=this.args.map(function(r){return r.getConcreteTree(e,t)});return this.typeCheck(n),1===n.length&&n[0].valueType===d.ListOfPoint?new this.constructor(n):n.every(function(e){return e.valueType===d.Point})?new this.constructor([x(n)]):2===n.length?new this.constructor([_(this.args).getConcreteTree(e,t)]):h.parseError()},f.Histogram.prototype._getConcreteTree=p,f.DotPlot.prototype._getConcreteTree=p,f.BoxPlot.prototype._getConcreteTree=function(e,t,r){if(r&&r[this.type])return r[this.type].call(this,e,t,r);if(!t[this._symbol])throw h.functionUnsupported(this._symbol);var n=this.args.map(function(r){return r.getConcreteTree(e,t)});return this.typeCheck(n),1===n.length&&n[0].valueType===d.ListOfNumber?new this.constructor(n):h.parseError()},f.TTest.prototype._getConcreteTree=function(e,t,r){if(r&&r[this.type])return r[this.type].call(this,e,t,r);if(!t[this._symbol])throw h.functionUnsupported(this._symbol);var n=this.args.map(function(r){return r.getConcreteTree(e,t)});return this.typeCheck(n),new this.constructor(n)},f.IndependentTTest.prototype._getConcreteTree=function(e,t,r){if(r&&r[this.type])return r[this.type].call(this,e,t,r);if(!t[this._symbol])throw h.functionUnsupported(this._symbol);var n=this.args.map(function(r){return r.getConcreteTree(e,t)});return this.typeCheck(n),new this.constructor(n)},f.SolvedEquation.prototype._getConcreteTree=function(e,t,r){return r&&r[this.type]?r[this.type].call(this,e,t,r):new this.constructor(this._symbol,this._expression.getConcreteTree(e,t,r))},f.Table.prototype._getConcreteTree=function(e,t,r){if(r&&r[this.type])return r[this.type].call(this,e,t,r);for(var n=[],i=Object.create(t),a=0;a<this.columns.length;a++){var s=this.columns[a].getConcreteTree(e,i,t,r);s.isIndependent&&this.columns[a].exportToLocal(s,i),n.push(s)}return new this.constructor(n)},f.TableColumn.prototype._getConcreteTree=function(e,t,r){var n,i,a=this.header.getConcreteTree(e,t);if(a.isFreeVariable){n=[];for(var s=0;s<this.values.length;s++)if(this.values[s].tableError())n.push(h.invalidTableEntry(this.values[s].tableError()));else{var o=this.values[s].tryGetConcreteTree(e,t);o.isError?n.push(o):o.tableError()?n.push(h.invalidTableEntry(o.tableError())):o.valueType===d.Number?n.push(o):n.push(h.tableEntryTypeError([d.prettyPrint(o.valueType)]))}return i=new this.constructor(a,this.length,n),i.isIndependent=!0,i}if(a.isConstant){for(var u=[],c=0;c<this.length;c++)u.push(a);n=u}else n=a.isList?a.args:[];return a=this.header.getConcreteTree(e,r),a.isError||a.valueType===d.Number||a.valueType===d.ListOfNumber||(a=h.tableHeaderTypeError([d.prettyPrint(a.valueType)])),i=new this.constructor(a,this.length,n)},f.BuiltInFunction.pdf.prototype._getConcreteTree=function(e,t,r){if(r&&r[this.type])return r[this.type].call(this,e,t,r);if(this.args[0]instanceof x)return f.List(f.List.mapArgs(this.args,function(n){return this.copyWithArgs(n).getConcreteTree(e,t,r)}.bind(this)));if(this.typeCheck(this.args),!(this.args[0]instanceof f.Distribution))throw h.functionTypeError(this._symbol,[d.prettyPrint(this.args[0].valueType)]);return this.args[0].pdf([this.args[1]]).getConcreteTree(e,t,r)},f.BuiltInFunction.cdf.prototype._getConcreteTree=function(e,t,r){if(r&&r[this.type])return r[this.type].call(this,e,t,r);var n=this.args;if(2===n.length&&(n=[n[0],f.Constant(-1/0),n[1]]),n[0]instanceof f.List)return f.List(f.List.mapArgs(n,function(n){return this.copyWithArgs(n).getConcreteTree(e,t,r)\n}.bind(this)));if(this.typeCheck(n),!(n[0]instanceof f.Distribution))throw h.functionTypeError(this._symbol,[d.prettyPrint(n[0].valueType)]);return n[0].cdf(n.slice(1)).getConcreteTree(e,t,r)},f.BuiltInFunction.random.prototype._getConcreteTree=function(e,t,r){if(r&&r[this.type])return r[this.type].call(this,e,t,r);var n=this.args;(n.length<=1||!(n[1]instanceof f.Distribution)&&!(n[1]instanceof f.List)&&n.length<4)&&(n=[n[0],P.uniformdist([])].concat(n.slice(1)));var i=n[0],a=n[1],s=n[2],o=n[3];if(this.typeCheck(n.slice(1)),s&&s.getDependencies().length)throw h.variableSampleSize(s.getDependencies());if(o&&o.getDependencies().length)throw h.variableSeed(o.getDependencies());if(o&&(i=E("us",[i,o])),s){var u=s.asValue();if(u<1)throw h.badSampleSize();u=Math.round(u);for(var c,l=[],p=0;p<u;p++)c=E("lc",[i,M(v(p,1))]),l.push(a.sample([c]).getConcreteTree(e,t,r));return x(l)}return a.sample([i]).getConcreteTree(e,t,r)}}),define("math/features/getValueType",["require","parsenodes","math/types"],function(e){function t(){return o.Number}function r(){return o.Bool}function n(){return o.Point}function i(){return o.Distribution}function a(){return o.Any}var s=e("parsenodes"),o=e("math/types"),u={Add:t,Multiply:t,Divide:t,Subtract:t,Exponent:t,Negative:t,And:r,Piecewise:function(e){return e[1].valueType},BaseComparator:r,RepeatedOperator:t,List:function(e){if(0===e.length)return o.ListOfAny;for(var t=e[0].valueType,r=1;r<e.length;r++)if(e[r].valueType!==t)return o.ListOfAny;return o.hasListType(t)?o.listType(t):o.ListOfAny},ListAccess:function(e){return o.elementType(e[0].valueType)},Broadcast:function(e){return o.listType(e[0].valueType)},Seed:function(e){return o.SeedType},ExtendSeed:function(e){return o.SeedType},OrderedPairAccess:t,OrderedPair:n,NativeFunction:t,ReducerFunction:t,DoubleReducerFunction:t,ParametrizedReducerFunction:t,Distribution:i,DummyIndex:t,FreeVariable:t,TypedFunction:function(){return this._outputType},Derivative:t,Integral:t,Identifier:a};for(var c in u)s[c].prototype._getValueType=u[c]}),define("math/features/typeCheck",["require","parsenodes","math/types","math/errormsg"],function(e){function t(e){for(var t=[],r=0;r<e.length;r++)t.push(a.prettyPrint(e[r].valueType));return t}function r(e,r){return function(n){for(var i=0;i<n.length;i++)if(n[i].valueType!==e[i])throw r(t(n))}}function n(e){var t=e.length;if(t<2)throw s.methodRequiresList(this._symbol);if(e[0].valueType!==a.ListOfNumber)throw s.methodRequiresList(this._symbol);if(t>2)throw s.tooManyArguments(this._symbol,2)}var i=e("parsenodes"),a=e("math/types"),s=e("math/errormsg"),o={Add:r([a.Number,a.Number],s.addTypeError),Multiply:r([a.Number,a.Number],s.multiplyTypeError),Divide:r([a.Number,a.Number],s.divideTypeError),Subtract:r([a.Number,a.Number],s.subtractTypeError),Exponent:r([a.Number,a.Number],s.exponentTypeError),Negative:r([a.Number],s.negativeTypeError),BaseComparator:r([a.Number,a.Number],s.comparatorTypeError),And:r([a.Bool,a.Bool],s.andTypeError),ExtendSeed:function(e){if(2!==e.length||e[0].valueType!==a.SeedType||e[1].valueType!==a.SeedType&&e[1].valueType!==a.Number)throw s.functionUnsupported("random")},List:function(e){if(0!==e.length){var t=e[0].valueType;if(!a.hasListType(t))throw s.listTypeError([a.prettyPrint(t)]);for(var r=0;r<e.length;r++){var n=e[r].valueType;if(!a.hasListType(n))throw s.listTypeError([a.prettyPrint(n)]);if(n!==t)throw s.heterogeneousList()}}},Broadcast:function(e){},Distribution:function(e){},OrderedPair:r([a.Number,a.Number],s.pointTypeError),Piecewise:function(e){if(e[0].valueType!==a.Bool)throw s.piecewiseConditionTypeError(t(e));if(e[1].valueType!==a.Number)throw s.piecewiseBranchTypeError([a.prettyPrint(e[1].valueType)]);if(e[2].valueType!==a.Number)throw s.piecewiseBranchTypeError([a.prettyPrint(e[2].valueType)])},ListAccess:function(e){if(!a.isList(e[0].valueType)||e[1].valueType!==a.Number)throw s.indexTypeError(t(e))},OrderedPairAccess:r([a.Point,a.Number],s.orderedPairAccessTypeError),Sum:function(e){if(e[1].valueType!==a.Number)throw s.sumLowerBoundTypeError([a.prettyPrint(e[1].valueType)]);if(e[2].valueType!==a.Number)throw s.sumUpperBoundTypeError([a.prettyPrint(e[2].valueType)]);if(e[3].valueType!==a.Number)throw s.sumArgumentTypeError([a.prettyPrint(e[3].valueType)])},Product:function(e){if(e[1].valueType!==a.Number)throw s.productLowerBoundTypeError([a.prettyPrint(e[1].valueType)]);if(e[2].valueType!==a.Number)throw s.productUpperBoundTypeError([a.prettyPrint(e[2].valueType)]);if(e[3].valueType!==a.Number)throw s.productArgumentTypeError([a.prettyPrint(e[3].valueType)])},Integral:function(e){if(e[1].valueType!==a.Number)throw s.integralLowerBoundTypeError([a.prettyPrint(e[1].valueType)]);if(e[2].valueType!==a.Number)throw s.integralUpperBoundTypeError([a.prettyPrint(e[2].valueType)]);if(e[3].valueType!==a.Number)throw s.integralArgumentTypeError([a.prettyPrint(e[3].valueType)])},NativeFunction:function(e){var r=this._errorSymbol,n=e.length,i="logbase"===this._symbol?1:0;if(n<this._requiredArity)throw s.wrongArity(r,this._requiredArity-i,n-i);if(n>this._maxArity)throw s.wrongArity(r,this._maxArity-i,n-i);for(var o=0;o<e.length;o++){if(e[o].valueType!==a.Number)throw s.functionTypeError(r,t(e))}},ReducerFunction:function(e){if(e[0].valueType!==a.ListOfNumber)throw s.functionTypeError(this._symbol,t(e))},DoubleReducerFunction:function(e){if(!a.isList(e[0].valueType)||!a.isList(e[1].valueType))throw s.nonListDoubleReducer(this._symbol);if(e[0].valueType!==a.ListOfNumber||e[1].valueType!==a.ListOfNumber)throw s.functionTypeError(this._symbol,t(e))},ParametrizedReducerFunction:function(e){if(e[0].valueType!==a.ListOfNumber)throw s.nonListParametrizedReducer(this._symbol);if(e[1].valueType!==a.Number)throw s.functionTypeError(this._symbol,t(e))},TypedFunction:function(e){var r=this._errorSymbol,n=e.length,i="pdf"===this._symbol,a="cdf"===this._symbol;if(n<this._requiredArity){if(i)throw s.pdfWrongArity();if(a)throw s.cdfRequiresArguments();throw s.wrongArity(r,this._requiredArity,n)}if(n>this._maxArity){if(i)throw s.pdfWrongArity();if(a)throw s.cdfTooManyArguments();throw s.wrongArity(r,this._maxArity,n)}for(var o=0;o<e.length;o++)if(e[o].valueType!==this._inputTypes[o])throw s.functionTypeError(r,t(e))},Derivative:function(e){if(e[0].valueType!==a.Number&&e[0].valueType!==a.ListOfNumber)throw s.derivativeTypeError(t(e))},Regression:function(e){if(e[0].valueType!==a.Number&&e[0].valueType!==a.ListOfNumber||e[1].valueType!==a.Number&&e[1].valueType!==a.ListOfNumber)throw s.regressionTypeError(t(e))},Polygon:function(e){if(1===e.length&&e[0].valueType!==a.ListOfPoint)throw s.polygonListTypeError(t(e));if(2===e.length&&e[0].valueType===a.Number&&e[1].valueType===a.Number)throw s.polygonTwoNumbersError();if(e.length>2&&!e.every(function(e){return e.valueType===a.Point}))throw s.polygonPointArgsError()},Histogram:n,DotPlot:n,BoxPlot:function(e){var t=e.length,r=e[0];if(0===t)throw s.methodRequiresList(this._symbol);if(r.valueType!==a.ListOfNumber)throw s.methodRequiresList(this._symbol);if(t>1)throw s.methodRequiresList(this._symbol)},TTest:function(e){var r=this._symbol;if(0===e.length)throw s.methodRequiresList(r);if(e[0].valueType!==a.ListOfNumber)throw s.methodRequiresList(r);if(e.length>2)throw s.tooManyArguments(r,2);if(e[0].length<2)throw s.ttestListTooShort(r);if(e[1]&&e[1].valueType!==a.Number)throw s.functionTypeError(r,t(e))},IndependentTTest:function(e){var r=this._symbol;if(2!==e.length)throw s.wrongDoubleReducerArity(r);if(!a.isList(e[0].valueType)||!a.isList(e[1].valueType))throw s.nonListDoubleReducer(r);if(e[0].valueType!==a.ListOfNumber||e[1].valueType!==a.ListOfNumber)throw s.functionTypeError(r,t(e));if(e[0].args.length<2||e[1].args.length<2)throw s.ttestListTooShort("ittest")},Stats:function(e){var t=e.length,r=e[0];if(0===t)throw s.methodRequiresList(this._symbol);if(r.valueType!==a.ListOfNumber)throw s.methodRequiresList(this._symbol);if(t>1)throw s.methodRequiresList(this._symbol)}};for(var u in o)i[u].prototype.typeCheck=o[u];i.BuiltInFunction.random.prototype.typeCheck=function(e){var t=e.length,r=e[0],n=e[1],o=e[2];if(t>3)throw s.randomArity();if(!r)throw s.randomArity();if(!(r instanceof i.Distribution||r instanceof i.List))throw s.randomArity();if(r instanceof i.Distribution&&r.args&&(r.args[0]instanceof i.List||r.args[1]instanceof i.List))throw s.randomFromBroadcastDistribution();if(n&&n.valueType!==a.Number)throw s.randomArity();if(o&&o.valueType!==a.Number)throw s.randomArity()}}),define("math/features/repr",["require","parsenodes"],function(e){var t=e("parsenodes"),r=function(e,t,r){r=r||0;var n=Array(r+1).join("  "),i=n+"  ";return"[\\n"+i+e.map(function(e){return e.repr(t,r+1)}).join(",\\n"+i)+"\\n"+n+"]"},n=function(e,t){return""+(t=t||"")+e};t.Expression.prototype.repr=function(e,t){return n(this.type,e)+"("+r(this.args,e,t)+")"},t.DoubleInequality.prototype.repr=function(e,t){t=t||0;var r=Array(t+1).join("  "),i=r+"  ";return n(this.type,e)+"([\\n"+i+this.args[0].repr(e,t+1)+",\\n"+i+"\'"+this.args[1]+"\',\\n"+i+this.args[2].repr(e,t+1)+",\\n"+i+"\'"+this.args[3]+"\',\\n"+i+this.args[4].repr(e,t+1)+"\\n"+r+"])"},t.Identifier.prototype.repr=t.FreeVariable.prototype.repr=function(e){return n(this.type,e)+"(\'"+this._symbol+"\')"},t.Constant.prototype.repr=function(e){return n(this.type,e)+"("+this.asValue()+")"},t.ExtendSeed.prototype.repr=function(e,t){return n(this.type,e)+"(\'"+this.tag+"\', "+r(this.args,e,t)+")"},t.Seed.prototype.repr=function(e){return n(this.type,e)+"("+this.asValue()+")"},t.FunctionCall.prototype.repr=function(e,t){return n(this.type,e)+"(\'"+this._symbol+"\', "+r(this.args,e,t)+")"},t.Assignment.prototype.repr=function(e,r){return n(this.type,e)+"("+t.Identifier(this._symbol).repr(e,r)+", "+this._expression.repr(e,r)+")"},t.Regression.prototype.repr=t.Equation.prototype.repr=function(e,t){return n(this.type,e)+"("+this._lhs.repr(e,t)+", "+this._rhs.repr(e,t)+")"},t.FunctionDefinition.prototype.repr=function(e,i){return n(this.type,e)+"("+t.Identifier(this._symbol).repr(e,i)+", "+r(this._argSymbols.map(function(e){return t.Identifier(e)}),e,i)+", "+this._expression.repr(e,i)+")"},t.Error.prototype.repr=function(e,t){return n(this.type,e)+"(\'"+this._msg+"\')"},t.Derivative.prototype.repr=function(e,t){return n(this.type,e)+"(\'"+this._symbol+"\', "+r(this.args,e,t)+")"},t.SolvedEquation.prototype.repr=function(e,t){return n(this.type,e)+"(\'"+this._symbol+"\', "+this._expression.repr(e,t)+")"},t.OptimizedRegression.prototype.repr=function(e,t){return n(this.type,e)+"("+JSON.stringify(this.parameters)+", "+JSON.stringify(this.residuals)+", "+JSON.stringify(this.statistics)+", "+this.model.repr(e,t+1)+", "+JSON.stringify({isModelValid:this.isModelValid,residualVariable:this.residualVariable,residualSuggestionId:this.residualSuggestionId,shouldSuggestLogMode:this.shouldSuggestLogMode})+")"},t.Table.prototype.repr=function(e,t){return n(this.type,e)+"("+r(this.columns,e,t)+")"},t.TableColumn.prototype.repr=function(e,t){return n(this.type,e)+"("+this.header.repr(e,t)+", "+this.length+", "+r(this.values,e,t)+")"},t.Image.prototype.repr=function(e,t){var r=Array(t+1).join("  "),i=r+"  ";return n(this.type,e)+"({\\n"+i+"center: "+this.center.repr(e,t+1)+",\\n"+i+"radianAngle: "+this.radianAngle.repr(e,t+1)+",\\n"+i+"width: "+this.width.repr(e,t+1)+",\\n"+i+"height: "+this.height.repr(e,t+1)+"},\\n"+i+"opacity: "+this.opacity.repr(e,t+1)+",\\n"+i+JSON.stringify(this.moveStrategy)+"\\n"+r+")"},t.Slider.prototype.repr=function(e,t){var r=Array(t+1).join("  "),i=r+"  ";return n(this.type,e)+"({\\n"+i+"sliderAssignment: "+this.sliderAssignment.repr(e,t+1)+",\\n"+i+"sliderMin: "+(this.sliderMin&&this.sliderMin.repr(e,t+1))+",\\n"+i+"sliderMax: "+(this.sliderMax&&this.sliderMax.repr(e,t+1))+",\\n"+i+"sliderStep: "+(this.sliderStep&&this.sliderStep.repr(e,t+1))+"},\\n"+r+")"},t.Broadcast.prototype.repr=function(e,t){return n(this.type,e)+"([\'"+this._replacedSymbols.join("\', ")+"\'], "+r(this.args,e,t)+")"}}),define("math/features/scalarEvalExpression",["require","parsenodes","math/functions"],function(e){var t=e("parsenodes"),r=e("math/functions"),n={Add:function(e){return"("+e.join("+")+")"},Multiply:function(e){return"("+e.join("*")+")"},Divide:function(e){return"("+e.join("/")+")"},Subtract:function(e){return"("+e.join("-")+")"},Exponent:function(e){return"BuiltIn.pow("+e.join(",")+")"},RawExponent:function(e){return"Math.pow("+e.join(",")+")"},Negative:function(e){return"(-"+e[0]+")"},And:function(e){return e.join("&&")},Piecewise:function(e){return"("+e[0]+"?"+e[1]+":"+e[2]+")"}},i={Add:2,Multiply:2,Divide:2,Subtract:2,Exponent:2,RawExponent:2,Negative:1,And:2,Piecewise:3};for(var a in n){var s=t[a].prototype;s.scalarEvalExpression=n[a],s.evaluate=r.createEvaluateFunction(s.scalarEvalExpression,i[a])}}),define("math/reconstitute-node",["require","parsenodes","math/types"],function(e){function t(e,i){if(n.isList(e)){for(var a=[],s=0;s<i.length;s++)a.push(t(n.elementType(e),i[s]));var o=r.List(a);return o.valueType=e,o}switch(e){case n.Number:case n.Bool:return r.Constant(i);case n.Point:return r.OrderedPair([r.Constant(i[0]),r.Constant(i[1])]);default:throw new Error("Cannot reconstitute value of a "+n.prettyPrint(e)+".")}}var r=e("parsenodes"),n=e("math/types");return t}),define("math/features/constantcollapsedcopy",["require","parsenodes","math/reconstitute-node","math/maybe-rational"],function(e){var t=e("parsenodes"),r=t.Constant,n=t.Multiply,i=t.Subtract,a=t.RawExponent,s=t.Seed,o=t.BuiltInFunction,u=e("math/reconstitute-node"),c=e("math/maybe-rational"),l={Expression:function(e){return this.copyWithArgs(e)},FreeVariable:function(e){return this},ScalarExpression:function(e){for(var t=[],n=0;n<e.length;n++){if(!e[n].isConstant&&!e[n].isString)return this.copyWithArgs(e);t.push(e[n].asValue())}return r(this.evaluate(t))},OrderedPair:function(e){return this.copyWithArgs(e)},Add:function(e){return e[0].isConstant&&e[1].isConstant?r(c.add(e[0].asMaybeRationalValue(),e[1].asMaybeRationalValue())):0===e[0].asValue()?e[1]:0===e[1].asValue()?e[0]:this.copyWithArgs(e)},Multiply:function(e){return e[0].isConstant&&e[1].isConstant?r(c.mul(e[0].asMaybeRationalValue(),e[1].asMaybeRationalValue())):1===e[0].asValue()?e[1]:1===e[1].asValue()?e[0]:this.copyWithArgs(e)},Subtract:function(e){return e[0].isConstant&&e[1].isConstant?r(c.sub(e[0].asMaybeRationalValue(),e[1].asMaybeRationalValue())):0===e[0].asValue()?t.Negative([e[1]]):0===e[1].asValue()?e[0]:this.copyWithArgs(e)},Divide:function(e){return e[0].isConstant&&e[1].isConstant?r(c.div(e[0].asMaybeRationalValue(),e[1].asMaybeRationalValue())):1===e[1].asValue()?e[0]:this.copyWithArgs(e)},Exponent:function(e){if(e[0].isConstant&&e[1].isConstant)return r(c.pow(e[0].asMaybeRationalValue(),e[1].asMaybeRationalValue()));if(e[0].isConstant){if(e[0].asValue()===Math.E)return o.exp([e[1]]);if(e[0].asValue()>0)return a(e)}if(e[1].isConstant){var t=e[1].asValue();if(1===t)return e[0];if(t===Math.floor(t))return a(e);var i=e[1].asMaybeRationalValue();return c.isRational(i)?i.d%2==1?n([i.n%2==0?r(c.maybeRational(1,1)):o.sign([e[0]]),a([o.abs([e[0]]),e[1]])]):a(e):this.copyWithArgs(e)}return this.copyWithArgs(e)},RawExponent:function(e){return e[0].isConstant&&e[1].isConstant?r(c.pow(e[0].asMaybeRationalValue(),e[1].asMaybeRationalValue())):this.copyWithArgs(e)},Negative:function(e){return e[0].isConstant?r(c.neg(e[0].asMaybeRationalValue())):e[0]instanceof t.Negative?e[0].args[0]:this.copyWithArgs(e)},And:function(e){return e[0].isConstant&&e[1].isConstant?r(e[0].asValue()&&e[1].asValue()):e[0].isConstant&&!0===e[0]?e[1]:e[0].isConstant&&!1===e[0]?r(!1):e[1].isConstant&&!0===e[1]?e[0]:e[1].isConstant&&!1===e[1]?r(!1):this.copyWithArgs(e)},Piecewise:function(e){return e[0].isConstant&&!0===e[0].asValue()?e[1]:e[0].isConstant&&!1===e[0].asValue()?e[2]:this.copyWithArgs(e)},Integral:function(e){var t=e[0],a=e[1],s=e[2],o=e[3],u=o.getDependencies();if(a.isConstant&&s.isConstant){var c=s.asValue()-a.asValue();if(o.isConstant)return r(o.asValue()*c);if(!o.dependsOn(t._symbol))return n([o,r(c)]);if(1===u.length&&u[0]===t._symbol)return r(this.evaluate(a.asValue(),s.asValue(),o))}else if(!o.dependsOn(t._symbol))return n([o,i([s,a])]);return this.copyWithArgs(e)},ListAccess:function(e){return e[1].isConstant?e[0].elementAt(e[1].asValue()-1):this.copyWithArgs(e)},OrderedPairAccess:function(e){return e[1].isConstant&&e[0]instanceof t.OrderedPair?e[0].elementAt(e[1].asValue()-1):this.copyWithArgs(e)},Broadcast:function(e){var t=e[0].getDependencies();for(r=0;r<t.length;r++)if(-1===this._replacedSymbols.indexOf(t[r]))return this.copyWithArgs(e);for(var r=1;r<e.length;r++)if(0!==e[r].getDependencies().length)return this.copyWithArgs(e);return u(this.valueType,this.evaluate(e.slice(1).map(function(e){return e.asValue()})))},ReducerFunction:function(e){return 0===e[0].getDependencies().length?u(this.valueType,this.evaluate([e[0].asValue()])):this.copyWithArgs(e)},DoubleReducerFunction:function(e){if(0===e[0].getDependencies().length&&0===e[1].getDependencies().length){var t=Math.min(e[0].length,e[1].length);return u(this.valueType,this.evaluate([e[0].asValue().slice(0,t),e[1].asValue().slice(0,t)]))}return this.copyWithArgs(e)},ParametrizedReducerFunction:function(e){var t=e[0],r=e[1];return r.isConstant&&0===t.getDependencies().length?u(this.valueType,this.evaluate([t.asValue(),r.asValue()])):this.copyWithArgs(e)},RepeatedOperator:function(e){if(e[1].isConstant&&e[2].isConstant){var t=e[1].asValue(),n=e[2].asValue(),i=e[3];if(i.isConstant)return r(this.evaluateConstant([t,n,i.asValue()]));var a=i.getDependencies();if(0===a.length||1===a.length&&a[0]===e[0]._symbol)return r(this.evaluate(t,n,i))}return this.copyWithArgs(e)},ExtendSeed:function(e){var t=e[0],r=e[1];return 0===t.getDependencies().length&&0===r.getDependencies().length?s(t.asValue()+"::"+this.tag+r.asValue()):this.copyWithArgs(e)}};for(var p in l)t[p].prototype._constantCollapsedCopy=l[p];o.mod.prototype._constantCollapsedCopy=function(e){return e[0].isConstant&&e[1].isConstant?r(c.mod(e[0].asMaybeRationalValue(),e[1].asMaybeRationalValue())):this.copyWithArgs(e)},o.sqrt.prototype._constantCollapsedCopy=function(e){return e[0].isConstant?r(c.sqrt(e[0].asMaybeRationalValue())):this.copyWithArgs(e)},o.nthroot.prototype._constantCollapsedCopy=function(e){return e[0].isConstant&&e[1].isConstant?r(c.nthroot(e[0].asMaybeRationalValue(),e[1].asMaybeRationalValue())):this.copyWithArgs(e)},o.abs.prototype._constantCollapsedCopy=function(e){return e[0].isConstant?r(c.abs(e[0].asMaybeRationalValue())):this.copyWithArgs(e)},o.total.prototype._constantCollapsedCopy=function(e){if(!e[0].isList)return this.copyWithArgs(e);for(var t=e[0].args,n=0;n<t.length;n++)if(!t[n].isConstant)return this.copyWithArgs(e);return r(c.total(e[0].asMaybeRationalValue()))},o.distance.prototype._constantCollapsedCopy=function(e){return 0===e[0].getDependencies().length&&0===e[1].getDependencies().length?r(this.evaluate([e[0].asArray(),e[1].asArray()])):this.copyWithArgs(e)},o.midpoint.prototype._constantCollapsedCopy=function(e){if(0===e[0].getDependencies().length&&0===e[1].getDependencies().length){var n=this.evaluate([e[0].asArray(),e[1].asArray()]);return t.OrderedPair([r(n[0]),r(n[1])])}return this.copyWithArgs(e)}}),define("math/features/polynomialorder",["require","parsenodes"],function(e){var t=e("parsenodes"),r={Expression:"this.dependsOn(symbol) ? Infinity : 0",FreeVariable:"(symbol === this._symbol ? 1 : 0)",Constant:"0",Add:"Math.max(order0, order1)",Subtract:"Math.max(order0, order1)",Multiply:"order0 + order1",Negative:"order0",Divide:"order1 > 0 ? Infinity : order0"};for(var n in r){var i=r[n];t[n].prototype.polynomialOrder=function(e){return e=e.replace("order0","this.args[0].polynomialOrder(symbol)"),e=e.replace("order1","this.args[1].polynomialOrder(symbol)"),new Function(["symbol"],"return "+e)}(i)}t.Exponent.prototype.polynomialOrder=function(e){var t=this.args[0].polynomialOrder(e),r=this.args[1].polynomialOrder(e);if(0===t&&0===r)return 0;var n=this.args[1];return n.isConstant&&n.asValue()===Math.round(n.asValue())&&n.asValue()>0?t*n.asValue():1/0},t.Piecewise.prototype.polynomialOrder=function(e){return this.dependsOn(e)?this.args[2].isConstant&&this.args[2].isNaN()?this.args[1].polynomialOrder(e):1/0:0},t.List.prototype.polynomialOrder=function(e){return 1/0}}),define("math/features/polynomialcoefficients",["require","parsenodes","math/maybe-rational"],function(e){var t=e("parsenodes"),r=e("math/maybe-rational").maybeRational,n=t.Constant(r(0,1)),i=t.Constant(r(1,1));t.FreeVariable.prototype.getPolynomialCoefficients=function(e){return e===this._symbol?[n,i]:[this]},t.Constant.prototype.getPolynomialCoefficients=function(e){return[this]},t.Add.prototype.getPolynomialCoefficients=function(e){for(var r=this.args[0].getPolynomialCoefficients(e),n=this.args[1].getPolynomialCoefficients(e),i=r.length-1,a=n.length-1,s=[],o=0;o<=Math.max(i,a);o++)i>=o&&a>=o?s.push(t.Add([r[o],n[o]])):s.push(i>a?r[o]:n[o]);return s},t.Subtract.prototype.getPolynomialCoefficients=function(e){for(var r=this.args[0].getPolynomialCoefficients(e),n=this.args[1].getPolynomialCoefficients(e),i=r.length-1,a=n.length-1,s=[],o=0;o<=Math.max(i,a);o++)i>=o&&a>=o?s.push(t.Subtract([r[o],n[o]])):s.push(i>a?r[o]:t.Negative([n[o]]));return s},t.Negative.prototype.getPolynomialCoefficients=function(e){for(var r=this.args[0].getPolynomialCoefficients(e),n=[],i=0;i<r.length;i++)n.push(t.Negative([r[i]]));return n},t.Exponent.prototype.getPolynomialCoefficients=function(e){var r=this.args[0].getPolynomialCoefficients(e),i=this.args[1].getPolynomialCoefficients(e),a=r.length-1;if(i.length-1>0)throw"can\'t solve for variable in exponent";if(0===a)return[t.Exponent([r[0],i[0]])];if(this.args[1].isConstant){switch(this.args[1].asValue()){case 0:return[n];case 1:return r;case 2:return t.Multiply([this.args[0],this.args[0]]).getPolynomialCoefficients(e)}}throw"Unable to compile polynomial representation"},t.Multiply.prototype.getPolynomialCoefficients=function(e){for(var r=this.args[0].getPolynomialCoefficients(e),n=this.args[1].getPolynomialCoefficients(e),i=r.length-1,a=n.length-1,s=[],o=0;o<=i;o++)for(var u=0;u<=a;u++){var c=t.Multiply([r[o],n[u]]),l=s[o+u];s[o+u]=void 0===l?c:t.Add([l,c])}return s},t.Divide.prototype.getPolynomialCoefficients=function(e){var r=this.args[0].getPolynomialCoefficients(e),n=this.args[1].getPolynomialCoefficients(e),i=n.length-1,a=[];if(i>0)throw"Can\'t solve for variable in denominator";for(var s=0;s<r.length;s++)a.push(t.Divide([r[s],n[0]]));return a},t.Expression.prototype.getPolynomialCoefficients=function(e){if(this.dependsOn(e))throw"Unimplemented polynomialCoefficient call";return[this]},t.Piecewise.prototype.getPolynomialCoefficients=function(e){return this.dependsOn(e)?this.args[1].getPolynomialCoefficients(e):[this]}}),define("math/features/extractconditions",["require","parsenodes"],function(e){var t=e("parsenodes");t.Expression.prototype.extractConditions=function(e,t){if(!this.dependsOn(e))return t;for(var r=0;r<this.args.length;r++){t=this.args[r].extractConditions(e,t)}return t},t.Piecewise.prototype.extractConditions=function(e,r){if(!this.dependsOn(e))return r;if(!this.args[0].dependsOn(e))return r=this.args[1].extractConditions(e,r),r=this.args[2].extractConditions(e,r);var n={};return n[e]=r,t.Piecewise([this.args[0].substitute(n),r,t.Constant(NaN)])}}),define("math/features/piecewiseDependsOn",["require","parsenodes"],function(e){var t=e("parsenodes");t.Expression.prototype.piecewiseDependsOn=function(e){if(!this.dependsOn(e))return!1;for(var t=0;t<this.args.length;t++){if(this.args[t].piecewiseDependsOn(e))return!0}return!1},t.Piecewise.prototype.piecewiseDependsOn=function(e){return this.dependsOn(e)}}),define("math/builtinconstants",["require","math/parsenode/constant","math/maybe-rational"],function(e){var t=e("math/parsenode/constant"),r=e("math/maybe-rational").maybeRational;return{pi:t(Math.PI),tau:t(2*Math.PI),e:t(Math.E),trigAngleMultiplier:t(r(1,1)),infty:t(1/0)}}),define("math/builtinframe",["require","math/builtinconstants","math/parsenode/builtinfunction"],function(e){var t,r=e("math/builtinconstants"),n=e("math/parsenode/builtinfunction"),i={};for(t in r)r.hasOwnProperty(t)&&(i[t]=r[t]);for(t in n)n.hasOwnProperty(t)&&(i[t]=n[t]);return i}),define("math/features/bounddomain",["require","parsenodes","math/builtinframe","math/domaintypes","math/comparators","math/maybe-rational","math/policy"],function(e){var t=e("parsenodes"),r=e("math/builtinframe"),n=e("math/domaintypes"),i=e("math/comparators").table,a=e("math/maybe-rational").maybeRational,s=e("math/policy").defaultPolicy,o=t.Constant(a(0,1));t.Base.prototype.boundDomain=function(e){return n.unknownDomain()},t.List.prototype.boundDomain=function(e){if(!this.dependsOn(e))return n.allReals();if(!this.args.length)return n.allReals();var t=this.args[0].boundDomain(e);if("known"!==t.type)return n.unknownDomain();for(var r=0;r<this.args.length;r++){var i=this.args[r].boundDomain(e);if("known"!==i.type)return n.unknownDomain();if(i.bounds[0]!==t.bounds[0]||i.bounds[1]!==t.bounds[1])return n.unknownDomain()}return t},t.Expression.prototype.boundDomain=function(e){for(var t=n.allReals(),r=0;r<this.args.length;r++)t=n.intersectDomains(t,this.args[r].boundDomain(e));return t},t.Constant.prototype.boundDomain=function(e){return this.isNaN()?n.emptyDomain():n.allReals()},t.Piecewise.prototype.boundDomain=function(e){return this.args[2].isConstant&&isNaN(this.args[2].asValue())?n.intersectDomains(this.args[0].boundDomain(e),this.args[1].boundDomain(e)):n.unknownDomain()},t.OrderedPair.prototype.boundDomain=function(e){return n.intersectDomains(this.args[0].boundDomain(e),this.args[1].boundDomain(e))},t.BaseComparator.prototype.boundDomain=function(e){if("="===this.operator)return n.unknownDomain();var t=this._difference,a=this._difference.boundDomain(e);if(t.polynomialOrder(e)>1)return n.unknownDomain();var u=t.getPolynomialCoefficients(e),c=u[1]?u[1].getConcreteTree(s,r):o,l=u[0]?u[0].getConcreteTree(s,r):o;if(!c.isConstant||!l.isConstant)return n.unknownDomain();if(isNaN(c.asValue())||isNaN(l.asValue()))return n.emptyDomain();if(0===c.asValue())return i[this.operator].inclusive?l.asValue()>=0?a:n.emptyDomain():l.asValue()>0?a:n.emptyDomain();var p=-l.asValue()/c.asValue(),f=c.asValue()<0?[-1/0,p]:[p,1/0];return n.intersectDomains(a,n.knownDomain(f))}}),define("math/features/derivative",["require","parsenodes","math/baseparser","math/builtinframe","math/parsenode/builtinfunction","math/maybe-rational","math/policy"],function(e){var t=e("parsenodes"),r=e("math/baseparser"),n=e("math/builtinframe"),i=e("math/parsenode/builtinfunction"),a=e("math/maybe-rational").maybeRational,s=e("math/policy").defaultPolicy,o=t.Constant(a(0,1)),u=t.Constant(a(1,1)),c=t.Constant(a(2,1)),l={FreeVariable:function(e){return e===this._symbol?u:o},Constant:function(e){return isFinite(this.asValue())?o:t.Constant(this.asValue())},Negative:function(e){return t.Negative([this.args[0].takeDerivative(e)])},Add:function(e){return t.Add([this.args[0].takeDerivative(e),this.args[1].takeDerivative(e)])},Subtract:function(e){return t.Subtract([this.args[0].takeDerivative(e),this.args[1].takeDerivative(e)])},Multiply:function(e){return t.Add([g(e,this.args[0],t.Multiply([this.args[0].takeDerivative(e),this.args[1]])),g(e,this.args[1],t.Multiply([this.args[0],this.args[1].takeDerivative(e)]))])},Divide:function(e){return t.Subtract([g(e,this.args[0],t.Divide([this.args[0].takeDerivative(e),this.args[1]])),g(e,this.args[1],t.Divide([t.Multiply([this.args[0],this.args[1].takeDerivative(e)]),t.Exponent([this.args[1],c])]))])},Exponent:function(e){return t.Add([g(e,this.args[0],t.Multiply([t.Multiply([this.args[1],t.Exponent([this.args[0],t.Subtract([this.args[1],u])])]),this.args[0].takeDerivative(e)])),g(e,this.args[1],t.Multiply([t.Piecewise([t.Comparator["="]([this.args[0],o]),t.Piecewise([t.Comparator[">"]([this.args[1],o]),o,t.Constant(NaN)]),t.Multiply([t.FunctionCall("\\\\ln",[this.args[0]]),t.Exponent([this.args[0],this.args[1]])])]),this.args[1].takeDerivative(e)]))]).getConcreteTree(s,n)},Sum:function(e){return this.copyWithArgs([this.args[0],this.args[1],this.args[2],this.args[3].takeDerivative(e)])},Product:function(e){var r=t.Sum([this.args[0],this.args[1],this.args[2],t.Piecewise([t.Comparator["="]([o,this.args[3]]),u,o])]),n=t.Multiply([t.Sum([this.args[0],this.args[1],this.args[2],t.Divide([this.args[3].takeDerivative(e),this.args[3]])]),t.Product(this.args)]),i=t.Product([this.args[0],this.args[1],this.args[2],t.Piecewise([t.Comparator["="]([o,this.args[3]]),this.args[3].takeDerivative(e),this.args[3]])]);return t.Piecewise([t.Comparator["="]([o,r]),n,t.Piecewise([t.Comparator["="]([u,r]),i,o])])},Piecewise:function(e){return 2===this.args.length?t.Piecewise([this.args[0],this.args[1].takeDerivative(e)]):3===this.args.length?t.Piecewise([this.args[0],this.args[1].takeDerivative(e),this.args[2].takeDerivative(e)]):void 0},List:function(e){return t.List(this.args.map(function(t){return t.takeDerivative(e)}))},ListAccess:function(e){return new this.constructor([this.args[0].takeDerivative(e),this.args[1]])},OrderedPair:function(e){return new this.constructor([this.args[0].takeDerivative(e),this.args[1].takeDerivative(e)])},OrderedPairAccess:function(e){return new this.constructor([this.args[0].takeDerivative(e),this.args[1]])},Integral:function(e){var r=this.args[0],n=this.args[1],i=this.args[2],a=this.args[3],s={};s[r._symbol]=i;var o={};return o[r._symbol]=n,t.Add([g(e,a,this.copyWithArgs([r,n,i,a.takeDerivative(e)])),t.Subtract([g(e,i,t.Multiply([a.substitute(s),i.takeDerivative(e)])),g(e,n,t.Multiply([a.substitute(o),n.takeDerivative(e)]))])])},SolvedEquation:function(e){return this._expression.takeDerivative(e)},OptimizedRegression:function(e){return this.model.takeDerivative(e)},Broadcast:function(e){for(var r=this._replacedSymbols.slice(),n=this.args.slice(1),i=this._expression.takeDerivative(e),a=0;a<this._replacedSymbols.length;a++){var s=this._replacedSymbols[a],o=this.args[a+1];if(o.dependsOn(e)){var u=this.tmpVar(),c=t.DummyIndex(u);r.push(u),n.push(o.takeDerivative(e)),i=t.Add([i,t.Multiply([this._expression.takeDerivative(s),c])])}}return t.Broadcast(r,[i].concat(n))},Seed:function(e){return t.Constant(NaN)}},p={exp:"\\\\exp(x)*x_1",ln:"\\\\{x >= 0: x_1/x \\\\}",log:"\\\\{ x >= 0: x_1/(x*\\\\ln(10)) \\\\}",sqrt:"x_1/(2*\\\\sqrt{x})",rtxsqpone:"x*x_1/\\\\rtxsqpone(x)",rtxsqmone:"x*x_1/\\\\rtxsqmone(x)",sin:"\\\\cos(x)*x_1",cos:"-\\\\sin(x)*x_1",tan:"\\\\sec(x)^2*x_1",arcsin:"x_1/\\\\sqrt{1 - x^2}",arccos:"-x_1/\\\\sqrt{1 - x^2}",sinh:"\\\\cosh(x)*x_1",cosh:"\\\\sinh(x)*x_1",tanh:"(\\\\sech(x))^2*x_1",arcsinh:"x_1/\\\\sqrt{x^2 + 1}",arccosh:"\\\\{ x > 0: x_1/\\\\rtxsqmone(x) \\\\}",arctanh:"\\\\{ \\\\abs(x) < 1: x_1/(1 - x^2) \\\\}",csc:"-\\\\cot(x)*\\\\csc(x)*x_1",sec:"\\\\tan(x)*\\\\sec(x)*x_1",cot:"-\\\\csc(x)^2*x_1",arccsc:"-x_1/(\\\\abs(x)*\\\\rtxsqmone(x))",arcsec:"x_1/(\\\\abs(x)*\\\\rtxsqmone(x))",arccot:"-x_1/(1+x^2)",csch:"-\\\\coth(x)*\\\\csch(x)*x_1",sech:"-\\\\tanh(x)*\\\\sech(x)*x_1",coth:"-(\\\\csch(x))^2*x_1",arccsch:"-x_1/(\\\\abs(x)*\\\\rtxsqpone(x))",arcsech:"\\\\{ x >= 0: -x_1/(x*\\\\sqrt{1 - x^2}) \\\\}",arccoth:"\\\\{ \\\\abs(x) > 1 : x_1/(1 - x^2) \\\\}",factorial:"(x)!*\\\\polyGamma(0, x + 1)*x_1",floor:"\\\\{ \\\\mod(x, 1) > 0: 0*x_1 \\\\}",ceil:"\\\\{ \\\\mod(x, 1) > 0: 0*x_1 \\\\}",abs:"\\\\{ \\\\abs(x) > 0: \\\\sign(x)*x_1 \\\\}",sign:"\\\\{ \\\\abs(x) > 0: 0*x_1 \\\\}",mean:"\\\\mean(x_1)",total:"\\\\total(x_1)",length:"0",var:"2*\\\\cov(x, x_1)",varp:"2*\\\\cov(x, x_1)*(\\\\length(x)-1)/\\\\length(x)",stdev:"\\\\cov(x, x_1)/\\\\stdev(x)",stdevp:"\\\\covp(x, x_1)/\\\\stdevp(x)",mad:"\\\\mean(\\\\sign(x-\\\\mean(x))*(x_1 - \\\\mean(x_1)))",min:"x_1[\\\\argmin(x)]",max:"x_1[\\\\argmax(x)]",median:"0.5*(x_1[\\\\lowerQuantileIndex(x, 0.5)] + x_1[\\\\upperQuantileIndex(x, 0.5)])",argmin:"0/0",argmax:"0/0",gcd:"0/0",lcm:"0/0",erf:"\\\\frac{2x_1}{\\\\sqrt{\\\\pi }}e^{-x^2}",invNorm:"\\\\frac{x_1}{\\\\pdf(\\\\normaldist(0,1),\\\\invNorm(x))}"},f={\nlogbase:["\\\\{x > 0: \\\\frac{x_1}{x*\\\\ln(y)}\\\\}","\\\\frac{-\\\\log_{y}(x)*y_1}{y*\\\\ln(y)}"],nthroot:["x^{1/y - 1}/y*x_1","-\\\\frac{x^{1/y}*\\\\ln(x)*y_1}{y^2}"],polyGamma:["0/0","\\\\polyGamma(1 + x, y)*y_1"],mod:["\\\\{ \\\\abs(\\\\mod(x, y)) > 0: x_1 \\\\}","\\\\{ \\\\mod(x/y, 1) > 0: -\\\\floor(x/y)*y_1 \\\\}"],round:["\\\\{ \\\\abs(\\\\mod(x, 1) - 0.5) > 0: 0*x_1 \\\\}","0/0"],cov:["\\\\cov(x_1, y)","\\\\cov(x, y_1)"],covp:["\\\\covp(x_1, y)","\\\\covp(x, y_1)"],corr:["(\\\\cov(x_1, y) - (\\\\cov(x, y)*\\\\cov(x, x_1)/\\\\var(x)))/(\\\\stdevp(x)\\\\stdevp(y))","(\\\\cov(x, y_1) - (\\\\cov(x, y)*\\\\cov(y, y_1)/\\\\var(y)))/(\\\\stdevp(x)\\\\stdevp(y))"],quantile:["\\\\{ \\\\floor(y*(\\\\length(x)-1)) = y*(\\\\length(x)-1) :   x_1[\\\\upperQuantileIndex(x, y)],  (\\\\ceil(y*(\\\\length(x)-1)) - y*(\\\\length(x)-1))*x_1[\\\\lowerQuantileIndex(x, y)] +   (y*(\\\\length(x)-1) - \\\\floor(y*(\\\\length(x)-1)))*x_1[\\\\upperQuantileIndex(x, y)]\\\\}","\\\\{ \\\\floor(y*(\\\\length(x)-1)) < y*(\\\\length(x)-1) :   (x[\\\\upperQuantileIndex(x, y)] - x[\\\\lowerQuantileIndex(x, y)])*y_1\\\\}"],quartile:["0.5*(x_1[\\\\lowerQuartileIndex(x, y)] + x_1[\\\\upperQuartileIndex(x, y)])","0/0"],tscore:["\\\\frac{\\\\sqrt{\\\\length(x)}(\\\\stdev(x)*\\\\mean(x_1)-(\\\\mean(x)-y)*\\\\frac{\\\\cov(x,x_1)}{\\\\stdev(x)})}{\\\\stdev(x)^2}","-y_1*\\\\sqrt{\\\\length(x)}/\\\\stdev(x)"],quartileIndex:["0/0","0/0"],upperQuartileIndex:["0/0","0/0"],lowerQuartileIndex:["0/0","0/0"],upperQuantileIndex:["0/0","0/0"],lowerQuantileIndex:["0/0","0/0"],nCr:["0/0","0/0"],nPr:["0/0","0/0"],arctan:["x_1*y/(y^2+x^2)","-y_1*x/(y^2+x^2)"],poissonpdf:["0/0","y_1\\\\frac{e^{-y}(\\\\floor(x)-y)y^{(\\\\floor(x)-1)}}{\\\\floor(x)!}"],invPoisson:["0/0","0/0"],tpdf:["x_1*\\\\pdf(\\\\tdist(y),x)*\\\\frac{-(y+1)*x}{y+x^2}","y_1*\\\\frac{1}{2}\\\\pdf(\\\\tdist(y),x)(  \\\\frac{x^2-1}{y + x^2} + \\\\ln(\\\\frac{y}{y + x^2}) +   \\\\polyGamma(0, \\\\frac{1+y}{2}) - \\\\polyGamma(0, y/2))"],invT:["x_1/\\\\pdf(\\\\tdist(y),\\\\invT(x, y))","0/0"]},h={tcdf:["-x_1*\\\\pdf(\\\\tdist(z),x)","y_1*\\\\pdf(\\\\tdist(z),y)","0/0"],poissoncdf:["0/0","0/0","z_1\\\\sum _{n=\\\\max(0,\\\\floor(\\\\min(x,y)))}^{\\\\floor(\\\\max(x,y))}\\\\frac{e^{-z}(n-z)z^{(n-1)}}{n!}"],normalpdf:["-x_1*\\\\frac{x-y}{z^2} \\\\pdf(\\\\normaldist(y,z),x)","y_1*\\\\frac{x-y}{z^2} \\\\pdf(\\\\normaldist(y,z),x)","z_1*(\\\\frac{(x-y-z)*(x-y+z)}{z^3}) \\\\pdf(\\\\normaldist(y,z),x)"],binompdf:["0/0","0/0","\\\\{0<=z<=1: z_1*\\\\pdf(\\\\binomialdist(y,z),x)*(\\\\frac{\\\\round(x)}{z}-\\\\frac{\\\\round(y)-\\\\round(x)}{1-z}), 0 \\\\}"],invBinom:["0/0","0/0","0/0"],uniformpdf:["0","\\\\{y<=x: \\\\frac{y_1}{(z-y)^2}, 0\\\\}","\\\\{z>=x: -\\\\frac{z_1}{(z-y)^2}, 0\\\\}"],invUniform:["\\\\{y<=x<=z: x_1*(z-y), 0\\\\}","\\\\{y<=x<=z: y_1*(1-x), 0\\\\}","\\\\{y<=x<=z: z_1*x, 0\\\\}"]},d={normalcdf:["-x_1\\\\pdf(\\\\normaldist(z,u), x)","y_1\\\\pdf(\\\\normaldist(z,u), y)","-z_1*(\\\\pdf(\\\\normaldist(z,u), y) - \\\\pdf(\\\\normaldist(z,u), x))","u_1*(  \\\\{\\\\abs(y)=1/0:0,\\\\frac{z-y}{u}\\\\pdf(\\\\normaldist(z,u),y)\\\\} -   \\\\{\\\\abs(x)=1/0:0,\\\\frac{z-x}{u}\\\\pdf(\\\\normaldist(z,u),x)\\\\})"],binomcdf:["0/0","0/0","0/0","\\\\{0<=u<=1: u_1*\\\\sum _{n=\\\\max(0,\\\\round(\\\\min(x,y)))}^{\\\\round(\\\\max(x,y))}(  \\\\pdf(\\\\binomialdist(z,u),n)*(\\\\frac{n}{u}-\\\\frac{\\\\round(z)-n}{1-u})), 0 \\\\}"],uniformcdf:["\\\\{z>u: 0/0, -x_1\\\\pdf(\\\\uniformdist(z,u), x)\\\\}","\\\\{z>u: 0/0, y_1\\\\pdf(\\\\uniformdist(z,u), y)\\\\}","\\\\{z>u: 0/0, z_1*(\\\\frac{\\\\{z<x<u:u-x,0\\\\} + \\\\{z<y<u:y-u,0\\\\}}{(u-z)^2})\\\\}","\\\\{z>u: 0/0, u_1*(\\\\frac{\\\\{z<x<u:x-z,0\\\\} + \\\\{z<y<u:z-y,0\\\\}}{(u-z)^2})\\\\}"]};for(var m in p)i[m].prototype.takeDerivative=function(e){return function(t){var r=this.args,i={x:r[0],x_1:r[0].takeDerivative(t)};return g(t,r[0],e.substitute(i)).getConcreteTree(s,n)}}(r.parse(p[m]));for(m in f)i[m].prototype.takeDerivative=function(e,r){return function(i){var a=this.args,o={x:a[0],x_1:a[0].takeDerivative(i),y:a[1],y_1:a[1].takeDerivative(i)};return t.Add([g(i,a[0],e.substitute(o)),g(i,a[1],r.substitute(o))]).getConcreteTree(s,n)}}(r.parse(f[m][0]),r.parse(f[m][1]));for(m in h)i[m].prototype.takeDerivative=function(e,r,i){return function(a){var o=this.args,u={x:o[0],x_1:o[0].takeDerivative(a),y:o[1],y_1:o[1].takeDerivative(a),z:o[2],z_1:o[2].takeDerivative(a)};return t.Add([t.Add([g(a,o[0],e.substitute(u)),g(a,o[1],r.substitute(u))]),g(a,o[2],i.substitute(u))]).getConcreteTree(s,n)}}(r.parse(h[m][0]),r.parse(h[m][1]),r.parse(h[m][2]));for(m in d)i[m].prototype.takeDerivative=function(e,r,i,a){return function(o){var u=this.args,c={x:u[0],x_1:u[0].takeDerivative(o),y:u[1],y_1:u[1].takeDerivative(o),z:u[2],z_1:u[2].takeDerivative(o),u:u[3],u_1:u[3].takeDerivative(o)};return t.Add([t.Add([g(o,u[0],e.substitute(c)),g(o,u[1],r.substitute(c))]),t.Add([g(o,u[2],i.substitute(c)),g(o,u[3],a.substitute(c))])]).getConcreteTree(s,n)}}(r.parse(d[m][0]),r.parse(d[m][1]),r.parse(d[m][2]),r.parse(d[m][3]));i.distance.prototype.takeDerivative=function(e){var r=this.args[0],a=this.args[1],o=t.OrderedPairAccess([r,u]),l=t.OrderedPairAccess([r,c]),p=t.OrderedPairAccess([a,u]),f=t.OrderedPairAccess([a,c]),h=g(e,o,o.takeDerivative(e)),d=g(e,l,l.takeDerivative(e)),m=g(e,p,p.takeDerivative(e)),y=g(e,f,f.takeDerivative(e));return g(e,this,t.Divide([t.Add([t.Add([t.Subtract([t.Multiply([h,o]),t.Multiply([h,p])]),t.Subtract([t.Multiply([m,p]),t.Multiply([m,o])])]),t.Add([t.Subtract([t.Multiply([d,l]),t.Multiply([d,f])]),t.Subtract([t.Multiply([y,f]),t.Multiply([y,l])])])]),i.distance([this.args[0],this.args[1]])])).getConcreteTree(s,n)},i.midpoint.prototype.takeDerivative=function(e){var r=this.args[0],a=this.args[1],o=t.OrderedPairAccess([r,u]),l=t.OrderedPairAccess([r,c]),p=t.OrderedPairAccess([a,u]),f=t.OrderedPairAccess([a,c]),h=g(e,o,o.takeDerivative(e)),d=g(e,l,l.takeDerivative(e)),m=g(e,p,p.takeDerivative(e)),y=g(e,f,f.takeDerivative(e));return t.OrderedPair([i.mean([h,m]),i.mean([d,y])]).getConcreteTree(s,n)};var g=function(e,t,r){return t.dependsOn(e)?r:o};for(var y in l){var v=l[y];t[y].prototype.takeDerivative=v}["tSample","poissonSample","uniformSample","normalSample","binomSample"].forEach(function(e){i[e].prototype.takeDerivative=function(e){for(var r=0;r<this.args.length;r++)if(this.args[r].dependsOn(e))return t.Constant(NaN);return o}})}),define("math/features/substitute",["require","parsenodes"],function(e){var t=e("parsenodes"),r={Identifier:function(e){return e[this._symbol]?e[this._symbol]:this},FreeVariable:function(e){return e[this._symbol]?e[this._symbol]:this},Constant:function(e){return this},Expression:function(e){return this.copyWithArgs(this.args.map(function(t){return t.substitute(e)}))},List:function(e){return t.List(this.args.map(function(t){return t.substitute(e)}))},SolvedEquation:function(e){return new this.constructor(this._symbol,this._expression.substitute(e))},OptimizedRegression:function(e){return new this.constructor(this.model.substitute(e),this.parameters,this.residualVariables,this.residuals,this.statistics)}};for(var n in r)t[n].prototype.substitute=r[n]}),define("math/features/solve",["require","math/baseparser","parsenodes","math/errormsg","math/builtinframe","worker/workerconfig","math/maybe-rational","math/policy"],function(e){function t(e){var t=Object.create(m);return t.a=e[2]?e[2].tryGetConcreteTree(v,m):b,t.b=e[1]?e[1].tryGetConcreteTree(v,m):b,t.c=e[0]?e[0].tryGetConcreteTree(v,m):b,t}function r(e){return 0===e.a.asValue()?0===e.b.asValue()?0:1:2}function n(e,n,i,a){for(var s,o,u=[],c=[],l=0;l<i.length;l++){var p=i[l],f=0;h.eachArgs([n],function(e){var t=e[0];f=Math.max(f,t.polynomialOrder(p))});var d=f>2,m=i.length>1&&!e.validSolvedVariable(p),g=a&&n.piecewiseDependsOn(p);d||m||g?(c[l]={},u[l]=1/0):(c[l]=[],u[l]=0,h.eachArgs([n],function(e){var n=e[0];o=t(n.getPolynomialCoefficients(p)),c[l].push(o),u[l]=Math.max(u[l],r(o))}))}var y;if(1===i.length)o=c[0],s=i[0],y=u[0];else{var v;v=0===u[0]?1:0===u[1]?0:u[0]<u[1]?0:1,o=c[v],s=i[v],y=u[v]}return{localFrame:o,variableOfInterest:s,effectiveOrder:y}}function i(e,t){return t?P.inequality:P.generalEquation}function a(e){e.f=x.getConcreteTree(v,e),e.g=_.getConcreteTree(v,e),e.p=S.getConcreteTree(v,e),e.q=M.getConcreteTree(v,e),e.m=c(y(1e305,1))}var s=e("math/baseparser"),o=e("parsenodes"),u=o.Base,c=o.Constant,l=o.Equation,p=o.SolvedEquation,f=o.BaseComparator,h=o.List,d=e("math/errormsg"),m=e("math/builtinframe"),g=e("worker/workerconfig"),y=e("math/maybe-rational").maybeRational,v=e("math/policy").defaultPolicy,b=c(y(0,1)),x=s.parse("b*b"),_=s.parse("4*a*c"),S=s.parse("(-b+\\\\sqrt{b*b-4*a*c})/(2*a)"),M=s.parse("(-b-\\\\sqrt{b*b-4*a*c})/(2*a)"),E=s.parse("[\\\\{\\\\abs(b)>0:-c/b\\\\}]"),w=s.parse("[\\\\{\\\\abs(a)>0:-b/(2*a)\\\\}]"),D=s.parse("[\\\\{a=0:\\\\{b<0:-c/b\\\\},q\\\\},\\\\{a=0:\\\\{b>0:-c/b\\\\},p\\\\}]"),T=s.parse("[\\\\{a=0:\\\\{b<0:-c/b\\\\},a>0:q\\\\},\\\\{a=0:\\\\{b=0:\\\\{c>0:-m\\\\}\\\\},a>0:\\\\{f<g:-m\\\\},p\\\\},\\\\{a=0:\\\\{b=0:\\\\{c>0:m\\\\}\\\\},a>0:\\\\{f<g:m\\\\},q\\\\},\\\\{a=0:\\\\{b>0:-c/b\\\\},a>0:p\\\\}]"),P={inequality:function(e){return a(e),T.getConcreteTree(v,e)},generalEquation:function(e){return a(e),e.a.isConstant&&0===e.a.asValue()?E.getConcreteTree(v,e):e.f.isConstant&&e.g.isConstant&&e.f.asValue()-e.g.asValue()==0?w.getConcreteTree(v,e):D.getConcreteTree(v,e)}};u.prototype.trySolve=function(e,t){try{return this.solve(e,t)}catch(e){if(e instanceof o.Error)return e;throw e}},l.prototype.solve=function(e,t){return this.asComparator().solve(e,t)},f.prototype.solve=function(e,t){var r=this.tryGetConcreteTree(e,t);if(r.isError)return r;if(r.isConstant)return r;var a="="!==this.getOperator(),s=this._difference.tryGetConcreteTree(e,t);s.isBroadcast&&(s=h(s.mapElements(function(e){return e})));var o=s.getDependencies();if(0===o.length)return s.isList?h(s.args.map(function(e){return c(0===e.asValue())})):c(0===s.asValue());if(1===o.length&&s.isList&&!a)return s;if(1===o.length&&!a&&!g.plotSingleVariableImplicitEquations)return d.singleVariableImplicitEquationsDisabled();var u=h.wrap(s);if(o.length>2)return d.tooManyVariables(this.getSliderVariables(e,r)).setDependencies(o);if(a&&!e.validInequalityVariables(o))return d.invalidInequalityVariables().setDependencies(o);var l=n(e,u,o,a),f=l.localFrame,m=l.effectiveOrder,y=l.variableOfInterest;if(e.complicatedPolarImplicit(y,m))return d.complicatedPolarImplicit().setDependencies(o);if(!e.validImplicitVariables(o))return d.invalidImplicitVariables();if(m>2)return s;for(var v=i(o,a),b=[],x=0;x<f.length;x++){var _=v(f[x]);if(_.isError)return _;if(_.isConstant)b.push(_);else for(var S=0;S<_.args.length;S++){var M=_.args[S],E=u.args[x].extractConditions(y,M).getConcreteTree(e,t);b.push(E)}}return p(y,h(b))}}),define("math/distribution-spec",["require","exports","math/baseparser","tslib"],function(e,t,r,n){"use strict";function i(e){return a(r.parse(e,{trailingComma:!0}))}function a(e){var r=e,i=s[r.type];if(!i)switch("Assignment"===r.type&&(r=r._expression),r.type){case"FunctionCall":i=t.DistributionParameterDefaultsMap[r._symbol];break;default:return}if(i){for(var a={},o=i.params,u=r.args,c=0;c<o.length;c++){var l=u[c];a[o[c]]=l&&l.getInputString()||""}return n.__assign({},i,{span:r.getInputSpan(),values:a})}}Object.defineProperty(t,"__esModule",{value:!0}),t.DistributionParameterDefaultsMap={normaldist:{type:"distribution",symbol:"normaldist",params:["mean","stdev"],defaults:["0","1"],discrete:!1},tdist:{type:"distribution",symbol:"tdist",params:["dof"],defaults:[void 0],discrete:!1},binomialdist:{type:"distribution",symbol:"binomialdist",params:["trials","probsuccess"],defaults:[void 0,"0.5"],discrete:!0},poissondist:{type:"distribution",symbol:"poissondist",params:["mean"],defaults:[void 0],discrete:!0},uniformdist:{type:"distribution",symbol:"uniformdist",params:["min","max"],defaults:["0","1"],discrete:!1}};var s={Histogram:{type:"visualization",symbol:"histogram",params:["data","binwidth"],defaults:[void 0,"1"]},DotPlot:{type:"visualization",symbol:"dotplot",params:["data","binwidth"],defaults:[void 0,"1"]},BoxPlot:{type:"visualization",symbol:"boxplot",params:["data"],defaults:[void 0]}};t.parseToplevelFunction=i,t.getFunctionSpecFromTree=a}),define("math/evaluationstate",["require","graphing/graphmode","parsenodes","graphing/label","math/types","math/distribution-spec"],function(e){function t(e){return e.isError?e.getError():void 0===e.asValue()?"":+e.asValue()}function r(e,r,n){for(var i=[],a=0;a<r.columns.length;a++){var s=n.columns[a],o={dependent:!s.isIndependent,discrete:s.isIndependent};s.isError?(o.error=s.getError(),o.values=[]):o.values=s.values.map(t),i.push(o)}return{column_data:i}}function n(e,t,r){var n={variables:[],errorMap:{},dimensions:{}};return r.center.isError&&(n.errorMap.center=!0),r.radianAngle.isError&&(n.errorMap.angle=!0),r.width.isError&&(n.errorMap.width=!0),r.height.isError&&(n.errorMap.height=!0),r.opacity.isError&&(n.errorMap.opacity=!0),r.center.isError||r.radianAngle.isError||r.width.isError||r.height.isError||r.opacity.isError?(n.variables=t.getSliderVariables(e,r),n):(n.dimensions.x=[],n.dimensions.y=[],n.dimensions.radianAngle=[],n.dimensions.width=[],n.dimensions.height=[],n.dimensions.opacity=[],a.List.eachArgs([r.center,r.radianAngle,r.width,r.height,r.opacity],function(e){var t=e[0].asValue();n.dimensions.x.push(+t[0]),n.dimensions.y.push(+t[1]),n.dimensions.radianAngle.push(+e[1].asValue()),n.dimensions.width.push(+e[2].asValue()),n.dimensions.height.push(+e[3].asValue()),n.dimensions.opacity.push(Math.max(0,Math.min(1,e[4].asValue())))}),(e.graphingEnabled()?t.getGraphMode(e,r):i.NONE)!==i.NONE&&(n.is_graphable=!0),r.moveStrategy&&(n.move_strategy=r.moveStrategy),n)}var i=e("graphing/graphmode"),a=e("parsenodes"),s=e("graphing/label"),o=e("math/types"),u=e("math/distribution-spec").getFunctionSpecFromTree,c=function(){return{operator:"=",variables:[]}},l=function(e,t,l){if(t.isTable)return r(e,t,l);if(t.isImage)return n(e,t,l);var p=c();if(l.isError&&(!(t instanceof a.FunctionDefinition)||l.blocksExport))return p.error=l.getError(),p.variables=t.getSliderVariables(e,l),p.is_single_identifier=t instanceof a.Identifier,p;l.moveStrategy&&(p.move_strategy=l.moveStrategy,p.default_drag_mode=l.defaultDragMode),t.isInequality()&&(p.is_inequality=!0),p.operator=t.getOperator(),l instanceof a.SolvedEquation?!0!==l._expression.asValue()&&!1!==l._expression.asValue()&&(p.assignment=l._symbol):t instanceof a.Assignment&&(p.assignment=t._symbol);var f=e.graphingEnabled()?t.getGraphMode(e,l):i.NONE;if(f!==i.NONE){p.is_graphable=!0,p.expression_type=t.getExpressionType(f,l.valueType),l.isShadeBetween()&&(p.is_shade_between=!0);var h=t.tableInfo(e,l);h&&(p.is_tableable=!0,p.table_info=h)}o.isList(l.valueType)&&(p.is_concrete_list=!0),p.variables=p.is_graphable?[]:t.getSliderVariables(e,l),p.is_single_identifier=t instanceof a.Identifier,l.isConstant&&(p.constant_value=l.asValue());var d=l.getEvaluationInfo();if(!d||"="!==p.operator||t.isConstant||t.isFunction||(p.is_evaluable=!0,p.zero_values=d),l instanceof a.OptimizedRegression){var m={};for(var g in l.parameters)l.parameters.hasOwnProperty(g)&&(m[s.identifierToLatex(g)]=+l.parameters[g].asValue());p.is_regression=!0,p.regression={parameters:m,residualVariable:s.identifierToLatex(l.residualVariable),residualSuggestionId:l.residualSuggestionId,shouldSuggestLogMode:l.shouldSuggestLogMode,statistics:l.statistics}}var y=u(t);return y&&y.discrete&&(p.is_discrete_distribution=!0),p};return l.default=c,l}),define("math/statementanalysis",["require","math/evaluationstate","pjs","graphing/graphmode","worker/workerconfig"],function(e){var t=e("math/evaluationstate"),r=e("pjs"),n=e("graphing/graphmode"),i=e("worker/workerconfig");return r(function(e){e.init=function(e,r,n){this.policy=e,this.rawTree=r,this.concreteTree=n,this.evaluationState=t(e,r,n)},e.exportTo=function(e,t){this.rawTree.exportTo(e,this.concreteTree,t)},e.graph=function(e){return this.rawTree.graph(this.policy,this.concreteTree,e)},e.getGraphMode=function(){return this.rawTree.getGraphMode(this.policy,this.concreteTree)},e.getGraphInfo=function(){return this.rawTree.getGraphInfo(this.policy,this.concreteTree)},e.shouldIntersect=function(){if(!this.evaluationState.is_graphable)return!1;if(!this.rawTree.userData.shouldGraph)return!1;if(!i.pointsOfInterest)return!1;var e=this.getGraphMode();return e===n.X||e===n.Y}})}),define("math/expression-types",["require","exports"],function(e,t){"use strict";function r(e,r){if(void 0===e)return{points:!1,lines:!1,fill:!1};var n=t.EXPRESSION_PROP_DEFAULTS[e];switch(e){case i.SINGLE_POINT:return{points:!0,lines:!1,fill:!1};case i.POINT_LIST:case i.DOTPLOT:return{points:void 0===r.points?n.points:r.points,lines:void 0===r.lines?n.lines:r.lines,fill:!1};case i.PARAMETRIC:case i.POLYGON:case i.X_OR_Y:case i.POLAR:case i.IMPLICIT:case i.HISTOGRAM:case i.BOXPLOT:case i.TTEST:case i.STATS:return{points:!1,lines:void 0===r.lines?n.lines:r.lines,fill:void 0===r.fill?n.fill:r.fill};default:return e}}function n(e){if(void 0===e)return!1;switch(e){case i.SINGLE_POINT:case i.POINT_LIST:case i.PARAMETRIC:case i.POLYGON:case i.X_OR_Y:case i.POLAR:case i.IMPLICIT:return!0;case i.HISTOGRAM:case i.BOXPLOT:case i.DOTPLOT:case i.TTEST:case i.STATS:return!1;default:return e}}Object.defineProperty(t,"__esModule",{value:!0});var i;!function(e){e.X_OR_Y="X_OR_Y",e.SINGLE_POINT="SINGLE_POINT",e.POINT_LIST="POINT_LIST",e.PARAMETRIC="PARAMETRIC",e.POLAR="POLAR",e.IMPLICIT="IMPLICIT",e.POLYGON="POLYGON",e.HISTOGRAM="HISTOGRAM",e.DOTPLOT="DOTPLOT",e.BOXPLOT="BOXPLOT",e.TTEST="TTEST",e.STATS="STATS"}(i=t.ExpressionType||(t.ExpressionType={})),t.EXPRESSION_PROP_DEFAULTS={X_OR_Y:{points:!1,lines:!0,fill:!1},SINGLE_POINT:{points:!0,lines:!1,fill:!1},POINT_LIST:{points:!0,lines:!1,fill:!1},PARAMETRIC:{points:!1,lines:!0,fill:!1},POLAR:{points:!1,lines:!0,fill:!1},IMPLICIT:{points:!1,lines:!0,fill:!1},POLYGON:{points:!1,lines:!0,fill:!0},HISTOGRAM:{points:!1,lines:!0,fill:!0},DOTPLOT:{points:!0,lines:!1,fill:!1},BOXPLOT:{points:!1,lines:!0,fill:!1},TTEST:{points:!1,lines:!1,fill:!1},STATS:{points:!1,lines:!1,fill:!1}},t.getReconciledExpressionProps=r,t.isClickableExpressionType=n}),define("math/features/analyze",["require","underscore","parsenodes","math/statementanalysis","math/builtin","math/builtinframe","math/parsenode/builtinfunction","math/errormsg","math/comparators","math/types","graphing/graphmode","math/expression-types","math/distribution-spec"],function(e){function t(e,t,r,n){if(n.isError)return u(e,r,n);var i=n.getDependencies();switch(n.valueType){case d.Distribution:case d.ListOfDistribution:return u(e,r,n);case d.Point:case d.ListOfPoint:return i.length?e.validParametricVariables(i)?u(e,r,n):u(e,r,f.tooManyVariables(r.getSliderVariables(e,n)).setDependencies(i)):u(e,r,n);case d.Number:case d.ListOfNumber:switch(i.length){case 0:return u(e,r,n);case 1:return e.validExpressionVariable(i[0])?u(e,r,n):u(e,r,f.equationRequired(e.implicitDependency(i[0])).setDependencies(i));default:return e.validImplicitVariables(i)?u(e,r,f.equationRequired().setDependencies(i)):u(e,r,f.tooManyVariables(r.getSliderVariables(e,n)).setDependencies(i))}break;default:return u(e,r,f.parseError())}}function r(e){return p.pdf([e,o.FreeVariable("x")])}function n(e,t){var r=this.tryGetConcreteTree(e,t),n=r.getDependencies();return n.length?u(e,this,f.tooManyVariables(this.getSliderVariables(e,r)).setDependencies(n)):u(e,this,this.tryGetConcreteTree(e,t))}function i(e){return function(t,r){var n=this.tryGetConcreteTree(t,r),i=n.getDependencies();if(i.length)return u(t,this,f.tooManyVariables(this.getSliderVariables(t,n)).setDependencies(i));var a=u(t,this,this.tryGetConcreteTree(t,r));if(!n.isError){a.evaluationState.expression_type=g.TTEST;var s=n.args.map(function(e){return e.asValue()});a.evaluationState.ttest_results=e.apply(null,s)}return a}}function a(e,t){return e.filter(function(e){return!t[e]})}var s=e("underscore"),o=e("parsenodes"),u=e("math/statementanalysis"),c=e("math/builtin"),l=e("math/builtinframe"),p=e("math/parsenode/builtinfunction"),f=e("math/errormsg"),h=e("math/comparators"),d=e("math/types"),m=e("graphing/graphmode"),g=e("math/expression-types").ExpressionType,y=e("math/distribution-spec").DistributionParameterDefaultsMap;o.Base.prototype.analyze=function(e,t){return u(e,this,this.tryGetConcreteTree(e,t))},o.FunctionCall.prototype.analyze=function(e,n){var i=this.tryGetConcreteTree(e,n);return!i.isError&&y[this._symbol]&&0===i.getDependencies().length&&(i=r(i).tryGetConcreteTree(e,n)),t(e,n,this,i)},o.Expression.prototype.analyze=function(e,r){return t(e,r,this,this.tryGetConcreteTree(e,r))},o.FunctionDefinition.prototype.analyze=function(e,t){if(l[this._symbol])return this.asEquation().analyze(e,t);var r=this._symbol.split("_")[0];if(p[r])return u(e,this,f.cannotRedefine(this._symbol,r));var n=this.tryGetConcreteTree(e,t);if(n.isError)return u(e,this,n);var i=this._argSymbols,a=n.getDependencies();if(-1!==a.indexOf(this._symbol))return u(e,this,f.selfReferentialFunction(this._symbol));var s=a.filter(function(e){return-1===i.indexOf(e)});return e.unplottablePolarFunction(this._symbol,a)?u(e,this,f.unplottablePolarFunction()):s.some(e.assignmentForbidden)?u(e,this,f.addArgumentsToDefinition(s,this._symbol,i).setDependencies(a)):s.length?u(e,this,f.tooManyVariables(this.getSliderVariables(e,n)).setDependencies(a)):u(e,this,n)},o.Assignment.prototype.analyze=function(e,t,n){var i=this._symbol;if(!e.validLHS(i))return u(e,this,f.invalidLHS(i));if(l[i])return this.asEquation().analyze(e,t);var a=this.tryGetConcreteTree(e,t);if(!a.isError&&this._expression instanceof o.FunctionCall&&y[this._expression._symbol]&&0===a.getDependencies().length&&(a=r(a).tryGetConcreteTree(e,t)),a.isError)return u(e,this,a);var s=a.getDependencies();if(this.isEquation(a))return this.asEquation().analyze(e,t);if(s.length>1){var c=this.getSliderVariables(e,a);return c.length?u(e,this,f.tooManyVariables(c).allowExport().setDependencies(s)):u(e,this,a)}var p=this.getMoveStrategy(e,t,a,n);if(p){var h=this.getDefaultDragMode(p);return u(e,this,o.MovablePoint(a.args,p,h))}return u(e,this,a)},o.Regression.prototype.analyze=function(e,t,r,n,i){return u(e,this,this.tryOptimize(e,t,r,n,i))},o.Polygon.prototype.analyze=n,o.Histogram.prototype.analyze=n,o.DotPlot.prototype.analyze=n,o.BoxPlot.prototype.analyze=n,o.TTest.prototype.analyze=i(c.ttest),o.IndependentTTest.prototype.analyze=i(c.ittest),o.Stats.prototype.analyze=function(e,t){var r=this.tryGetConcreteTree(e,t),n=r.getDependencies();if(n.length)return u(e,this,f.tooManyVariables(this.getSliderVariables(e,r)).setDependencies(n));var i=u(e,this,this.tryGetConcreteTree(e,t));if(!r.isError){i.evaluationState.expression_type=g.STATS;var a=r.args.map(function(e){return e.asValue()});i.evaluationState.stats_results=c.stats.apply(null,a)}return i},o.Equation.prototype.analyze=o.BaseComparator.prototype.analyze=function(e,t){var r=this.trySolve(e,t);if(r.isError)return u(e,this,r);if(r instanceof o.SolvedEquation&&r.getDependencies().length){var n=r.getDependencies().concat(r._symbol);if(!e.validImplicitVariables(n))return u(e,this,f.invalidImplicitVariables().setDependencies(n))}return this.getGraphMode(e,r)!==m.IMPLICIT||e.validImplicitVariables(r.getDependencies())?u(e,this,r):u(e,this,f.invalidImplicitVariables().setDependencies(r.getDependencies()))},o.DoubleInequality.prototype.analyze=function(e,t){var r=this.tryGetConcreteTree(e,t);if(r.isError)return u(e,this,r);var n=r.getDependencies();return h.table[this._operators[0]].direction!==h.table[this._operators[1]].direction?u(e,this,f.mismatchedDoubleInequality()):e.validDoubleInequalitySymbol(r._symbol)&&e.validDoubleInequalityVariables(n)?n.length>2?u(e,this,f.tooManyVariables(this.getSliderVariables(e,r)).setDependencies(n)):-1!==r._expressions[0].getDependencies().indexOf(r._symbol)||-1!==r._expressions[1].getDependencies().indexOf(r._symbol)?u(e,this,f.complicatedDoubleInequality().setDependencies(n)):u(e,this,r):u(e,this,f.invalidDoubleInequalityVariables().setDependencies(n))},o.And.prototype.analyze=function(e,t){var r=this.tryGetConcreteTree(e,t);if(r.isError)return u(e,this,r);var n=r.getDependencies();return n.length?e.validDoubleInequalityVariables(n)?u(e,this,f.complicatedDoubleInequality().setDependencies(n)):u(e,this,f.tooManyVariables(this.getSliderVariables(e,r)).setDependencies(n)):u(e,this,r)},o.OrderedPair.prototype.analyze=function(e,r,n){var i=this.tryGetConcreteTree(e,r);if(i.isError)return u(e,this,i);var a=this.getMoveStrategy(e,r,i,n);if(a){var s=this.getDefaultDragMode(a);return u(e,this,o.MovablePoint(i.args,a,s))}return t(e,r,this,i)},o.Table.prototype.analyze=function(e,t){for(var r=Object.create(t),n=[],i=0;i<this.columns.length;i++){var s=this.columns[i].analyze(e,r,t);if(0===i&&(s.concreteTree.isIndependent?e.validFirstColumnVariable(s.concreteTree.header._symbol)?s.concreteTree.header._symbol:s=u(e,this.columns[i],f.invalidFirstTableColumn()):s=u(e,this.columns[i],f.invalidDependentFirstTableColumn())),s.concreteTree.isIndependent)s.rawTree.exportToLocal(s.concreteTree,r);else if(!s.concreteTree.isError){var c=s.concreteTree.header.getDependencies(),l=a(c,r);l.length&&(s=u(e,this.columns[i],f.tooManyVariables(l).setDependencies(l)))}n.push(s.concreteTree)}var p=o.Table(n),h=u(e,this,p);return h.evaluationState.is_graphable=!0,h},o.TableColumn.prototype.analyze=function(e,t,r){var n=this.header.tableError();if(n)return u(e,this,f.invalidTableHeader(n));var i=this.tryGetConcreteTree(e,t,r);if(i.isError)return u(e,this,i);if(i.header.isError)return u(e,this,i.header);if(i.values.isError)return u(e,this,i.values);for(var a=0;a<i.values.length;a++)if(!i.values[a].isError){var s=this.values[a]&&this.values[a].tableError();if(s)i.values[a]=f.invalidTableEntry(s);else{var o=i.values[a].getDependencies();o.length&&(i.values[a]=f.tooManyVariables(o).setDependencies(o))}}return u(e,this,i)},o.Image.prototype.analyze=function(e,t,r){var n=this.tryGetConcreteTree(e,t);if(n.radianAngle.isError||n.center.isError||n.width.isError||n.height.isError||n.opacity.isError)return u(e,this,n);var i=n.center.getDependencies(),a=n.radianAngle.getDependencies(),s=n.width.getDependencies(),c=n.height.getDependencies(),l=n.opacity.getDependencies();return i.length||a.length||s.length||c.length||l.length?u(e,this,o.Image({center:i.length?f.tooManyVariables(a).setDependencies(i):n.center,radianAngle:a.length?f.tooManyVariables(a).setDependencies(a):n.radianAngle,width:s.length?f.tooManyVariables(s).setDependencies(s):n.width,height:c.length?f.tooManyVariables(c).setDependencies(c):n.height,opacity:l.length?f.tooManyVariables(l).setDependencies(l):n.opacity})):(n.moveStrategy=this.getMoveStrategy(e,t,n,r),u(e,this,n))},o.Slider.prototype.analyze=function(e,t){var r,n=this.tryGetConcreteTree(e,t),i=n.sliderInfo;if(i.missingVars.length){var a=s.unique(i.missingVars);r=u(e,this,f.tooManyVariables(e.sliderVariables(a)).setDependencies(a).allowExport())}else r=u(e,this,n);var o=r.evaluationState;o.assignment=i.exportedSymbol,o.slider_min_number=i.values.min,o.slider_max_number=i.values.max,o.slider_step_number=i.values.step,o.slider_min_valid=i.valids.min,o.slider_max_valid=i.valids.max,o.slider_step_valid=i.valids.step;var c=o.slider_min_valid&&o.slider_max_valid&&o.slider_step_valid;return o.is_slider=!0,o.raw_slider_latex=this.getInputString(),o.is_slidable=c,o.is_animatable=o.is_slidable&&!o.is_graphable,delete o.is_evaluable,delete o.zero_values,i.errMsg&&(o.error=i.errMsg.getError()),r}}),define("math/features/analyzeFourFunction",["require","parsenodes","math/statementanalysis","math/errormsg","math/parsenode/builtinfunction","math/builtinconstants"],function(e){function t(e,t){return n(e,this,i.inequalitiesUnsupported())}var r=e("parsenodes"),n=e("math/statementanalysis"),i=e("math/errormsg"),a=e("math/parsenode/builtinfunction"),s=e("math/builtinconstants");r.Base.prototype.analyzeFourFunction=function(e,t){var r=this.tryGetConcreteTree(e,t);return r.isError?n(e,this,r):n(e,this,i.parseError())},r.Expression.prototype.analyzeFourFunction=function(e,t){var r=this.tryGetConcreteTree(e,t);if(r.isError)return n(e,this,r);var o=r.getDependencies();if(o.length>0){var u,c=o[0];return u=a.hasOwnProperty(c)?i.functionUnsupported(c):s.hasOwnProperty(c)?i.constantUnsupported(c):i.variablesUnsupported(c),n(e,this,u)}return n(e,this,r)},r.Assignment.prototype.analyzeFourFunction=function(e,t){return n(e,this,i.assignmentsUnsupported())},r.FunctionDefinition.prototype.analyzeFourFunction=function(e,t){return n(e,this,i.functionDefinitionsUnsupported())},r.Equation.prototype.analyzeFourFunction=function(e,t){return n(e,this,i.equationsUnsupported())},r.And.prototype.analyzeFourFunction=t,r.DoubleInequality.prototype.analyzeFourFunction=t,r.BaseComparator.prototype.analyzeFourFunction=t,r.Regression.prototype.analyzeFourFunction=function(e,t){return n(e,this,i.regressionsUnsupported())},r.OrderedPair.prototype.analyzeFourFunction=function(e,t){return n(e,this,i.pointsUnsupported())}}),define("math/features/analyzeScientific",["require","parsenodes","math/statementanalysis","math/errormsg","math/builtinframe"],function(e){function t(e,t){return n(e,this,i.inequalitiesUnsupported())}var r=e("parsenodes"),n=e("math/statementanalysis"),i=e("math/errormsg"),a=e("math/builtinframe");r.Base.prototype.analyzeScientific=function(e,t){var r=this.tryGetConcreteTree(e,t);return r.isError?n(e,this,r):n(e,this,i.parseError())},r.Expression.prototype.analyzeScientific=function(e,t){var r=this.tryGetConcreteTree(e,t);if(r.isError)return n(e,this,r);var a=r.getDependencies();return a.length>0?n(e,this,i.tooManyVariables(a)):n(e,this,r)},r.Assignment.prototype.analyzeScientific=function(e,t){var r=this._symbol;if(a[r])return n(e,this,i.cannotRedefine(r));var s=this.tryGetConcreteTree(e,t);if(s.isError)return n(e,this,s);var o=s.getDependencies();return this.isEquation(s)?n(e,this,i.equationsUnsupported()):o.length>0?n(e,this,i.tooManyVariables(o)):n(e,this,s)},r.FunctionDefinition.prototype.analyzeScientific=function(e,t){if(a[this._symbol])return n(e,this,i.cannotRedefine(this._symbol));var r=this.tryGetConcreteTree(e,t);if(r.isError)return n(e,this,r);var s=this._argSymbols,o=r.getDependencies();if(-1!==o.indexOf(this._symbol))return n(e,this,i.selfReferentialFunction(this._symbol));var u=o.filter(function(e){return-1===s.indexOf(e)});return u.length?n(e,this,i.addArgumentsToDefinition(u,this._symbol,s)):n(e,this,r)},r.Equation.prototype.analyzeScientific=function(e,t){return n(e,this,i.equationsUnsupported())},r.And.prototype.analyzeScientific=t,r.DoubleInequality.prototype.analyzeScientific=t,r.BaseComparator.prototype.analyzeScientific=t,r.Regression.prototype.analyzeScientific=function(e,t){return n(e,this,i.regressionsUnsupported())},r.OrderedPair.prototype.analyzeScientific=function(e,t){return n(e,this,i.pointsUnsupported())}}),define("math/features/analyzeSingleExpressionScientific",["require","parsenodes","math/statementanalysis","math/errormsg","math/parsenode/builtinfunction","math/builtinconstants"],function(e){function t(e,t){return n(e,this,i.inequalitiesUnsupported())}var r=e("parsenodes"),n=e("math/statementanalysis"),i=e("math/errormsg"),a=e("math/parsenode/builtinfunction"),s=e("math/builtinconstants");r.Base.prototype.analyzeSingleExpressionScientific=function(e,t){var r=this.tryGetConcreteTree(e,t);return r.isError?n(e,this,r):n(e,this,i.parseError())},r.Expression.prototype.analyzeSingleExpressionScientific=function(e,t){var r=this.tryGetConcreteTree(e,t);if(r.isError)return n(e,this,r);var o=r.getDependencies();if(o.length>0){var u,c=o[0];return u=a.hasOwnProperty(c)?i.functionUnsupported(c):s.hasOwnProperty(c)?i.constantUnsupported(c):i.variablesUnsupported(c),n(e,this,u)}return n(e,this,r)},r.Assignment.prototype.analyzeSingleExpressionScientific=function(e,t){return n(e,this,i.assignmentsUnsupported())},r.FunctionDefinition.prototype.analyzeSingleExpressionScientific=function(e,t){return n(e,this,i.functionDefinitionsUnsupported())},r.Equation.prototype.analyzeSingleExpressionScientific=function(e,t){return n(e,this,i.equationsUnsupported())},r.And.prototype.analyzeSingleExpressionScientific=t,r.DoubleInequality.prototype.analyzeSingleExpressionScientific=t,\nr.BaseComparator.prototype.analyzeSingleExpressionScientific=t,r.Regression.prototype.analyzeSingleExpressionScientific=function(e,t){return n(e,this,i.regressionsUnsupported())},r.OrderedPair.prototype.analyzeSingleExpressionScientific=function(e,t){return n(e,this,i.pointsUnsupported())}}),define("graphing/dragmode",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){e.NONE="NONE",e.X="X",e.Y="Y",e.XY="XY",e.AUTO="AUTO"}(t.DragMode||(t.DragMode={}))}),define("graphing/reconcileDragMode",["require","exports","graphing/dragmode"],function(e,t,r){"use strict";function n(e){return e?"none"===e[0].type&&"none"===e[1].type?r.DragMode.NONE:"none"===e[1].type?r.DragMode.X:"none"===e[0].type?r.DragMode.Y:r.DragMode.XY:r.DragMode.NONE}function i(e,t){var i=n(t);switch(e){case r.DragMode.NONE:return r.DragMode.NONE;case r.DragMode.AUTO:case r.DragMode.XY:return i;case r.DragMode.X:return i===r.DragMode.X||i===r.DragMode.XY?r.DragMode.X:r.DragMode.NONE;case r.DragMode.Y:return i===r.DragMode.Y||i===r.DragMode.XY?r.DragMode.Y:r.DragMode.NONE;default:return r.DragMode.NONE}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i}),define("math/features/getgraphmode",["require","parsenodes","graphing/graphmode","graphing/reconcileDragMode","graphing/dragmode","math/types"],function(e){function t(e,t){var r;return r=e&&e.hasOwnProperty("dragMode")?e.dragMode===u.AUTO?t.defaultDragMode:e.dragMode:t.defaultDragMode,o(r,t.moveStrategy)}function r(e,r){var n=r.getDependencies();switch(r.valueType){case c.Point:case c.ListOfPoint:return r.isMovablePoint&&t(this.userData,r)!==u.NONE?s.XYPOINT_MOVABLE:0===n.length?s.XYPOINT:e.validParametricVariables(n)?s.PARAMETRIC:s.NONE;case c.Number:case c.ListOfNumber:return 1===n.length?s.Y:s.NONE;default:return s.NONE}}function n(e,t){var r=t._expression.getDependencies();if(r.length>1)return s.NONE;if(t._expression.valueType!==c.Number&&t._expression.valueType!==c.ListOfNumber)return s.NONE;var n=t._symbol,i=r[0];return e.graphMode(n,i)}function i(e,t){return t.isError?s.NONE:s.VISUALIZATION}var a=e("parsenodes"),s=e("graphing/graphmode"),o=e("graphing/reconcileDragMode").default,u=e("graphing/dragmode").DragMode,c=e("math/types");a.Base.prototype.getGraphMode=function(e,t){return s.NONE},a.Expression.prototype.getGraphMode=r,a.Equation.prototype.getGraphMode=a.BaseComparator.prototype.getGraphMode=function(e,t){var r=t.getDependencies();return t.isConstant?s.NONE:t instanceof a.SolvedEquation?0===r.length?e.graphableAsConstant(t._symbol)?e.constantGraphMode(t._symbol):s.NONE:n(e,t):r.length<=2?s.IMPLICIT:s.NONE},a.DoubleInequality.prototype.getGraphMode=function(e,t){return e.constantGraphMode(t._symbol)},a.Assignment.prototype.getGraphMode=function(e,t){if(t instanceof a.SolvedEquation)return n(e,t);if(this.isEquation(t))return this.asEquation().getGraphMode(e,t);var i=t.getDependencies();switch(t.valueType){case c.Number:case c.ListOfNumber:switch(i.length){case 0:return e.graphableAsConstant(this._symbol)?e.constantGraphMode(this._symbol):s.NONE;case 1:return t.valueType!==c.ListOfNumber||e.graphableListVariables(this._symbol,i[0])?this.isSlider?s.NONE:e.graphMode(this._symbol,i[0]):s.NONE;default:return s.NONE}break;default:return r.call(this,e,t)}},a.FunctionDefinition.prototype.getGraphMode=function(e,t){if(1!==this._argSymbols.length)return s.NONE;var r=e.graphMode(this._symbol,this._argSymbols[0]),n=t.getDependencies();switch(t.valueType){case c.Number:case c.ListOfNumber:switch(n.length){case 0:return r;case 1:return n[0]!==this._argSymbols[0]?s.NONE:r;default:return s.NONE}break;default:return s.NONE}},a.Regression.prototype.getGraphMode=function(e,t){return this.isLhsSimple&&t.isModelValid?1!==t.model.getDependencies().length?s.NONE:s.Y:s.NONE},a.Polygon.prototype.getGraphMode=function(e,t){return t.isError?s.NONE:s.POLYGONFILL},a.Histogram.prototype.getGraphMode=i,a.DotPlot.prototype.getGraphMode=i,a.BoxPlot.prototype.getGraphMode=i,a.Image.prototype.getGraphMode=function(e,t){return this.userData.showPoints?this.center.isError||this.radianAngle.isError||this.width.isError||this.height.isError||this.opacity.isError?s.NONE:s.XYPOINT:s.NONE}}),define("math/features/getgraphinfo",["require","parsenodes","math/builtinframe","math/domaintypes","math/policy"],function(e){var t=e("parsenodes"),r=e("math/builtinframe"),n=e("math/domaintypes"),i=e("math/policy").defaultPolicy;t.Base.prototype.getGraphInfo=function(e,t){var r,i,a=t.getDependencies();switch(a.length){case 0:r=t.getLinearCoefficients(),i=t.boundDomain("x");break;case 1:i=t.boundDomain(a[0]),"known"===i.type&&(r=t.getLinearCoefficients());break;case 2:i=n.unknownDomain()}return{graphMode:this.getGraphMode(e,t),color:this.userData.color,pointStyle:this.userData.pointStyle,lineStyle:this.userData.lineStyle,operator:this.getOperator(),isLinear:!!r,linearCoefficients:r,domainBound:i}},t.Base.prototype.getLinearCoefficients=function(){var e=this.getDependencies();switch(e.length){case 0:return[+this.asValue(),0];case 1:if(this.polynomialOrder(e[0])>1)return;var t=this.getPolynomialCoefficients(e[0]);return[t[0]?+t[0].getConcreteTree(i,r).asValue():0,t[1]?+t[1].getConcreteTree(i,r).asValue():0];default:return}},t.OrderedPair.prototype.getLinearCoefficients=function(){var e=this.args[0].getLinearCoefficients(),t=this.args[1].getLinearCoefficients();if(e&&t)return[e,t]}}),define("math/features/getMoveStrategy",["require","parsenodes","math/types","math/maybe-rational","math/builtinframe"],function(e){function t(e){return{type:"none",inputString:e}}function r(e){return{type:"updateCoordinate",inputString:e}}function n(e,t,r){return{type:"updateSlider",inputString:e,id:t,coefficients:r}}function i(e,t,r,n,i,a){for(var s=t.getDependencies(),o=0;o<s.length;o++)if(i[s[o]])return!1;for(var u=s.length-1;u>=0;u--){var c=s[u];if(!a[c]){var l=n[c];if(void 0!==l){var p=r[c];if(1===p.order){var d=p.tree,m=d.getPolynomialCoefficients(c),g=m[1]?m[1].getConcreteTree(e,f):h,y=m[0]?m[0].getConcreteTree(e,f):h;if(y.isConstant&&g.isConstant&&isFinite(y.asValue())&&isFinite(g.asValue())&&0!==g.asValue()){return{symbol:c,id:l,coefficients:[-y.asValue()/g.asValue(),1/g.asValue()]}}}}}}return!1}function a(e){for(var t={},r=0;r<e.length;r++)t[e[r]]=!0;return t}function s(e,t){var r=a(e),n={};for(var i in t){var s=t[i].evaluationState.assignment;t[i].evaluationState.is_slidable&&r[s]&&(n[s]=i)}return n}function o(e,t,r,n){for(var i=[],a=0;a<r.length;a++){var s=r[a],o={};i.push(o);for(var u=0;u<n.length;u++){var l=n[u],p=Object.create(t);p[l]=c.FreeVariable(l);var f=s.tryGetConcreteTree(e,p);f.isError?o[l]={tree:f,order:1/0}:o[l]={tree:f,order:f.polynomialOrder(l)}}}return i}function u(e,t,r){for(var n=0;n<e.length;n++){var i=e[n];0!==t[i].order&&(r[i]=!0)}}var c=e("parsenodes"),l=e("math/types"),p=e("math/maybe-rational").maybeRational,f=e("math/builtinframe"),h=c.Constant(p(0,1));c.Base.prototype.getMoveStrategy=function(){},c.Assignment.prototype.getMoveStrategy=function(e,t,r,n){if(this._expression instanceof c.OrderedPair)return this._expression.getMoveStrategy(e,t,r,n)},c.OrderedPair.prototype.getMoveStrategy=function(e,a,c,p){if(c.valueType===l.Point&&0===c.getDependencies().length){for(var f=this.getDependencies(),h=s(f,p),d=Object.keys(h),m=this.args,g=o(e,a,m,d),y=[],v={},b={},x=0;x<2;x++){var _=m[x],S=_.getInputString();if(_.isConstant)y[x]=r(S);else{var M=i(e,_,g[x],h,v,b);M&&(y[x]=n(S,M.id,M.coefficients),v[M.symbol]=!0,u(d,g[x],b)),y[x]||(y[x]=t(S))}}if("none"!==y[0].type||"none"!==y[1].type)return y}},c.Image.prototype.getMoveStrategy=function(e,a,c,l){if((!this.userData||!1!==this.userData.shouldGraph)&&"OrderedPair"===c.center.type&&c.center.args[0].isConstant&&c.center.args[1].isConstant&&c.width.isConstant&&c.height.isConstant&&c.radianAngle.isConstant&&c.opacity.isConstant){var p=this.getDependencies(),f=s(p,l),h=Object.keys(f),d=[this.width,this.height];"OrderedPair"===this.center.type&&d.push(this.center.args[0],this.center.args[1]);for(var m=[],g={},y={},v=o(e,a,d,h),b=[2,3,0,1],x=0;x<b.length;x++){var _=b[x],S=d[_];if(S){var M=S.getInputString();if(S.isConstant)m[_]=r(M);else{var E=i(e,S,v[_],f,g,y);E&&(m[_]=n(M,E.id,E.coefficients),g[E.symbol]=!0,u(h,v[_],y)),m[_]||(m[_]=t(M))}}else m[_]=t("")}if("none"!==m[0].type||"none"!==m[1].type||"none"!==m[2].type||"none"!==m[3].type)return m}}}),define("math/features/getDefaultDragMode",["require","parsenodes","graphing/dragmode"],function(e){var t=e("parsenodes"),r=e("graphing/dragmode").DragMode;t.Base.prototype.getMoveStrategy=function(){return r.NONE},t.Assignment.prototype.getDefaultDragMode=function(e){return"none"!==e[0].type&&"none"!==e[1].type?r.XY:"none"!==e[0].type?r.X:"none"!==e[1].type?r.Y:r.NONE},t.OrderedPair.prototype.getDefaultDragMode=function(e){return"updateSlider"===e[0].type&&"updateSlider"===e[1].type?r.XY:"updateSlider"===e[0].type?r.X:"updateSlider"===e[1].type?r.Y:r.NONE}}),define("math/features/tableinfo",["require","parsenodes","math/types","graphing/label","math/distribution-spec"],function(e){var t=e("parsenodes"),r=t.List,n=e("math/types"),i=e("graphing/label"),a=e("math/distribution-spec").getFunctionSpecFromTree;t.Base.prototype.tableInfo=function(e,t){return!1},t.Identifier.prototype.tableInfo=function(e,t){return!!e.validFirstColumnVariable(this._symbol)&&{independent_variable:this._symbol,dependent_column:this.getInputString(),by_reference:!1}},t.Expression.prototype.tableInfo=function(e,t){var i=t.getDependencies();if(a(this))return!1;switch(t.valueType){case n.Point:case n.ListOfPoint:if(0!==i.length)return!1;if(t.isMovablePoint&&("updateSlider"===t.moveStrategy[0].type||"updateSlider"===t.moveStrategy[1].type))return!1;return{independent_variable:"x",dependent_column:"y",by_reference:!1,values:r.wrap(t).mapElements(function(e){return e.asArray()})};case n.Number:if(1!==i.length)return!1;var s=i[0];return!!e.validFirstColumnVariable(s)&&{independent_variable:s,dependent_column:this.getInputString(),by_reference:!1};default:return!1}},t.Assignment.prototype.tableInfo=function(e,r){if(r instanceof t.SolvedEquation)return!1;if(!this.getInputString().length)return!1;if(a(this))return!1;var n=r.getDependencies();if(n.length>1)return!1;var s;if(0===n.length){if(!e.tableableAsConstant(this._symbol))return!1;s=e.implicitIndependent(this._symbol)}else s=n[0];return!!e.validFirstColumnVariable(s)&&{independent_variable:s,dependent_column:e.assignmentForbidden(this._symbol)?i.trimLatex(this.getInputString().replace(/[^=]*=/,"")):i.trimLatex(this.getInputString().split("=")[0]),by_reference:!e.assignmentForbidden(this._symbol)}},t.FunctionDefinition.prototype.tableInfo=function(e,t){if(1!==this._argSymbols.length)return!1;if(!this.getInputString().length)return!1;if(t.getDependencies().length>1)return!1;var r=this._argSymbols[0];if(!e.validFirstColumnVariable(r))return!1;var n=e.assignmentForbidden(this._symbol);return{independent_variable:r,dependent_column:n?i.trimLatex(this.getInputString().replace(/[^=]*=/,"")):i.trimLatex(this.getInputString().split("=")[0]),by_reference:!n}},t.BaseComparator.prototype.tableInfo=function(e,t){return!1},t.DoubleInequality.prototype.tableInfo=function(e,t){return!1},t.Equation.prototype.tableInfo=function(e,t){return!1}}),define("math/features/tableerror",["require","parsenodes","lib/worker-i18n"],function(e){var t=e("parsenodes"),r=e("lib/worker-i18n");t.Base.prototype.tableError=function(){return this.isInequality()?r.t("Inequalities are not allowed."):!(this instanceof t.Expression)&&r.t("This type of expression is not allowed.")},t.List.prototype.tableError=function(){return r.t("Lists are not allowed.")},t.Equation.prototype.tableError=t.Assignment.prototype.tableError=function(){return r.t("Equations are not allowed.")},t.FunctionDefinition.prototype.tableError=function(){return r.t("Function definitions are not allowed.")},t.Regression.prototype.tableError=function(){return r.t("Regressions are not allowed.")}}),define("math/features/islinear",["require","parsenodes"],function(e){var t=e("parsenodes");t.Base.prototype.isLinear=function(e){return!1},t.Expression.prototype.isLinear=function(e){return this.polynomialOrder(e)<=1},t.List.prototype.isLinear=function(e){return this.args.every(function(t){return t.isLinear(e)})},t.Broadcast.prototype.isLinear=function(e){for(var r=this._replacedSymbols,n=this._expression,i=this._lists,a={},s=0;s<i.length;s++)if(i[s].dependsOn(e)){if(!i[s].isLinear(e))return!1;a[r[s]]=t.FreeVariable(e)}return n.substitute(a).isLinear(e)}}),define("lib/deepCopy",["require","exports"],function(e,t){"use strict";function r(e){var t=e;if(t&&"function"==typeof t.toJSON&&(t=t.toJSON()),!t)return t;if("object"!=typeof t)return t;if(Array.isArray(t))return t.map(r);var n={};for(var i in t)t.hasOwnProperty(i)&&(n[i]=r(t[i]));return n}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r}),define("expressions/styles",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){e.POINT="POINT",e.OPEN="OPEN",e.CROSS="CROSS"}(t.PointStyle||(t.PointStyle={}));!function(e){e.SOLID="SOLID",e.DASHED="DASHED",e.DOTTED="DOTTED",e.SINGLE_PIXEL="SINGLE_PIXEL"}(t.LineStyle||(t.LineStyle={}))}),define("math/cdf-branches",["require","exports","tslib","lib/deepCopy","math/plotter","math/domaintypes","expressions/styles"],function(e,t,r,n,i,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e,t){var n=e.segments,i=t.segments,a=n.concat(i);return r.__assign({},e,{segments:a})},u=function(e){var t=e.viewState,r=e.graphInfo,o=e.compiled,u=e.derivative,c=e.bounds,l=e.included,p=e.discrete,f=n.default(r),h=a.intersectDomains(r.domainBound,a.knownDomain(c));if("known"===h.type)return f.domainBound=h,p?f.pointStyle=l?s.PointStyle.POINT:s.PointStyle.OPEN:f.lineStyle=s.LineStyle.SOLID,i.default.computeGraphData({graphInfo:f,viewState:t,compiled:o,derivative:u,discrete:p})};t.makeCDFTopBranches=function(e){var t,r=e.viewState,n=e.graphInfo,a=e.compiled,s=e.derivative,c=e.bounds,l=e.discrete,p=e.maxOverride,f=c[0],h=c[1],d=[];if(l){f=Math.ceil(f),h=Math.floor(h);var m=void 0!==p?p:1/0;if(f===-1/0&&h>=m)t=u({bounds:[f,m],included:!0,viewState:r,graphInfo:n,compiled:a,derivative:s,discrete:l}),d.push(t);else if(f===-1/0&&h<1/0)t=u({bounds:[f,h],included:!0,viewState:r,graphInfo:n,compiled:a,derivative:s,discrete:l}),d.push(t),d.push(u({bounds:[h+1,m],included:!1,viewState:r,graphInfo:n,compiled:a,derivative:s,discrete:l}));else if(f>-1/0&&h>=m)t=u({bounds:[f,m],included:!0,viewState:r,graphInfo:n,compiled:a,derivative:s,discrete:l}),d.push(u({bounds:[-1/0,f-1],included:!1,viewState:r,graphInfo:n,compiled:a,derivative:s,discrete:l})),d.push(t);else{t=u({bounds:[f,h],included:!0,viewState:r,graphInfo:n,compiled:a,derivative:s,discrete:l});var g=u({bounds:[-1/0,f-1],included:!1,viewState:r,graphInfo:n,compiled:a,derivative:s,discrete:l}),y=u({bounds:[h+1,m],included:!1,viewState:r,graphInfo:n,compiled:a,derivative:s,discrete:l});d.push(t);var v=void 0;g&&y&&(v=o(g,y),d.push(v))}}else t=u({bounds:[f,h],included:!0,viewState:r,graphInfo:n,compiled:a,derivative:s,discrete:l}),d.push(i.default.computeGraphData({viewState:r,graphInfo:n,compiled:a,derivative:s}));return{cdfTopBranch:t,topBranches:d}}}),define("math/copy-defined-pois",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){for(var t=[],r=[],n=e.length,i=0;i<n;i++)t.push(e[i][0]),r.push(e[i][1]);return{defined:{x:t,y:r}}};t.default=r}),define("expressions/opacity",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LOW=.2,t.DEFAULT=.4,t.HIGH=.8}),define("main/label-sizes",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){e.SMALL="small",e.MEDIUM="medium",e.LARGE="large"}(t.LabelSize||(t.LabelSize={}))}),define("main/label-orientations",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){e.DEFAULT="default",e.LEFT="left",e.RIGHT="right",e.ABOVE="above",e.BELOW="below"}(t.LabelOrientation||(t.LabelOrientation={}))}),define("expressions/slider_loop_modes",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LOOP_FORWARD_REVERSE="LOOP_FORWARD_REVERSE",t.LOOP_FORWARD="LOOP_FORWARD"}),define("lib/default-spec",["require","exports","underscore","lib/deepCopy"],function(e,t,r,n){"use strict";function i(e,t){var n={};for(var i in t)t.hasOwnProperty(i)&&(r.isEqual(e[i],t[i])||(n[i]=t[i]));return n}function a(e,t){var n=void 0,i={};for(var a in t)t.hasOwnProperty(a)&&(r.isEqual(e[a],t[a])||(i[a]=t[a],n=i));return n}function s(e,t){t||(t={});var r={};for(var i in e)e.hasOwnProperty(i)&&!t.hasOwnProperty(i)&&(r[i]=n.default(e[i]));for(var i in t)t.hasOwnProperty(i)&&(r[i]=t[i]);return r}Object.defineProperty(t,"__esModule",{value:!0}),t.stripDefaults=i,t.stripDefaultsAndMaybeReturnUndefined=a,t.populateDefaults=s}),define("graphing-calc/json/expression",["require","exports","tslib","expressions/opacity","expressions/styles","graphing/dragmode","main/label-sizes","main/label-orientations","expressions/slider_loop_modes","lib/default-spec"],function(e,t,r,n,i,a,s,o,u,c){"use strict";function l(e){return r.__assign({},t.DEFAULTS,e,{slider:r.__assign({},t.SLIDER_DEFAULTS,e.slider),cdf:r.__assign({},t.CDF_DEFAULTS,e.cdf),vizProps:r.__assign({},t.VIZ_DEFAULTS,e.vizProps),clickableInfo:r.__assign({},t.CLICKABLEINFO_DEFAULTS,e.clickableInfo)})}function p(e){var n=c.stripDefaults(t.DEFAULTS,r.__assign({},e,{slider:c.stripDefaults(t.SLIDER_DEFAULTS,e.slider)})),i=c.stripDefaultsAndMaybeReturnUndefined(t.CDF_DEFAULTS,e.cdf);void 0===i?delete n.cdf:n.cdf=i;var a=c.stripDefaultsAndMaybeReturnUndefined(t.VIZ_DEFAULTS,e.vizProps);void 0===a?delete n.vizProps:n.vizProps=a;var s=c.stripDefaultsAndMaybeReturnUndefined(t.CLICKABLEINFO_DEFAULTS,e.clickableInfo);return void 0===s?delete n.clickableInfo:n.clickableInfo=s,n}function f(e){return{type:"statement",id:e.id,latex:e.latex,label:e.label,color:e.color,fill:e.fill,fillOpacity:e.fillOpacity,points:e.points,lines:e.lines,pointStyle:e.pointStyle,lineStyle:e.lineStyle,dragMode:e.dragMode,labelSize:e.labelSize,labelOrientation:e.labelOrientation,verticalLabel:e.verticalLabel,interactiveLabel:e.interactiveLabel,editableLabelMode:e.editableLabelMode,residualVariable:e.residualVariable,regressionParameters:e.regressionParameters,isLogModeRegression:e.isLogModeRegression,showLabel:e.showLabel,shouldGraph:e.hidden,slider:{min:e.slider.hardMin?e.slider.min:"",max:e.slider.hardMax?e.slider.max:"",step:e.slider.step},parametricDomain:e.parametricDomain,polarDomain:e.polarDomain,cdf:e.cdf,vizProps:e.vizProps,clickableInfo:e.clickableInfo}}Object.defineProperty(t,"__esModule",{value:!0}),t.CDF_DEFAULTS={show:!1,min:"",max:""},t.VIZ_DEFAULTS={breadth:"",axisOffset:"",alignedAxis:"x",binAlignment:"center",dotplotXMode:"exact",dotplotSize:"medium",histogramMode:""},t.CLICKABLEINFO_DEFAULTS={enabled:!1,description:"",assignment:"",expression:""};var h;!function(e){e.None="NONE",e.Math="MATH",e.Text="TEXT"}(h=t.EditableLabelMode||(t.EditableLabelMode={})),t.DEFAULT_SLIDER_PERIOD=4e3,t.DEFAULTS={folderId:"",latex:"",color:"",showLabel:!1,label:"",cdf:t.CDF_DEFAULTS,vizProps:t.VIZ_DEFAULTS,clickableInfo:t.CLICKABLEINFO_DEFAULTS,hidden:!1,secret:!1,dragMode:a.DragMode.AUTO,labelSize:s.LabelSize.MEDIUM,labelOrientation:o.LabelOrientation.DEFAULT,verticalLabel:!1,interactiveLabel:!1,editableLabelMode:h.None,residualVariable:"",isLogModeRegression:!1,pointStyle:i.PointStyle.POINT,lineStyle:i.LineStyle.SOLID,fillOpacity:""+n.DEFAULT,regressionParameters:{},displayEvaluationAsFraction:!1,slider:{},polarDomain:{min:"",max:""},parametricDomain:{min:"",max:""},points:void 0,lines:void 0,fill:void 0},t.SLIDER_DEFAULTS={hardMin:!1,hardMax:!1,animationPeriod:t.DEFAULT_SLIDER_PERIOD,loopMode:u.LOOP_FORWARD_REVERSE,playDirection:1,isPlaying:!1,min:"-10",max:"10",step:""},t.inflateDefaults=l,t.stripDefaults=p,t.computeParsableState=f}),define("math/features/graph",["require","underscore","parsenodes","math/plotter","graphing/graphmode","math/comparators","graphing/dragmode","math/expression-types","math/types","math/builtin","math/cdf-branches","math/copy-defined-pois","math/distribution-spec","graphing-calc/json/expression"],function(e){function t(e,t){for(var r=1/0,n=-1/0,i=1/0,a=-1/0,s=0;s<t.length;s++)for(var o=t[s],u=0;u<o.length;u+=2){var c=o[u],l=o[u+1];c<r&&(r=c),c>n&&(n=c),l<i&&(i=l),l>a&&(a=l)}if(isFinite(r)&&isFinite(i))return{type:e,xmin:r,ymin:i,xmax:n,ymax:a}}function r(e,t,r){var n={};r-=.5*t;for(var i=e.length-1;i>=0;i--){var a=e[i],s=Math.floor((a-r)/t);n[s]?n[s].data.push(a):n[s]={id:s,data:[a],min:s*t+r,max:s*t+r+t,center:s*t+r+t/2}}return n}function n(e){return Array.prototype.concat.apply([],e)}function i(e,t,r){return!!e&&(0===t&&0===r?"none"!==e[2].type||"none"!==e[3].type:0!==t&&0!==r?"none"!==e[0].type&&"none"!==e[1].type:0!==t?"none"!==e[0].type:0!==r&&"none"!==e[1].type)}var a=e("underscore"),s=e("parsenodes"),o=e("math/plotter").default,u=e("graphing/graphmode"),c=e("math/comparators"),l=e("graphing/dragmode").DragMode,p=e("math/expression-types").getReconciledExpressionProps,f=e("math/types"),h=s.List,d=e("math/builtin"),m=e("math/cdf-branches").makeCDFTopBranches,g=e("math/copy-defined-pois").default,y=e("math/distribution-spec").getFunctionSpecFromTree,v=e("graphing-calc/json/expression").EditableLabelMode;s.Base.prototype._graph=function(e,t,r,i){function c(e,t){if(e){var r,n,i,a,s,o,u,c,l=e.discrete?"discreteDistribution":"continuousDistribution";if("binomialdist"===e.symbol)return n=t.args[1].asValue(),i=t.args.length>2?t.args[2].asValue():.5,r=d.binompdf(i*n,n,i),{type:l,xmin:0,xmax:n,ymin:0,ymax:r};if("poissondist"===e.symbol)return a=t.args[1].asValue(),r=Math.max(d.poissonpdf(Math.floor(a),a),d.poissonpdf(Math.ceil(a),a)),{type:l,xmin:0,xmax:2.5*a,ymin:0,ymax:r};if("normaldist"===e.symbol)return a=t.args.length>1?t.args[1].asValue():0,s=t.args.length>2?t.args[2].asValue():1,r=d.normalpdf(a,a,s),{type:l,xmin:a-2*Math.abs(s),xmax:a+2*Math.abs(s),ymin:0,ymax:r};if("uniformdist"===e.symbol)return o=t.args.length>1?t.args[1].asValue():0,u=t.args.length>2?t.args[2].asValue():1,a=(o+u)/2,c=u-o,r=d.uniformpdf(a,o,u),{type:l,xmin:o-c/3,xmax:u+c/3,ymin:0,ymax:r};if("tdist"===e.symbol){var p=t.args[1].asValue();return r=d.tpdf(0,p),{type:l,xmin:-3,xmax:3,ymin:0,ymax:r}}}}function l(e){var t=e.editableLabelMode;return t===v.Text||t===v.Math}if(t instanceof s.SolvedEquation)return this._graph(e,t._expression,r,i);var b,x,_,S,M,E=this,w=t.getExpressionType(i.graphMode,t.valueType),D=p(w,{points:this.userData.points,lines:this.userData.lines,fill:this.userData.fill});switch(i.graphMode){case u.XYPOINT_MOVABLE:return b=[t.asArray()],_=this.userData.shouldGraph&&D.points,M=this.userData.showLabel&&!_,_?[{segments:[b],graphMode:i.graphMode,color:this.userData.color,style:this.userData.pointStyle,showLabel:!!this.userData.showLabel,labelSize:this.userData.labelSize,labelOrientation:this.userData.labelOrientation,verticalLabel:this.userData.verticalLabel,editableLabel:l(this.userData),labels:this.computedLabels||[],poi:g(b)}]:M?[{segments:[b],graphMode:u.XYPOINT,color:this.userData.color,style:this.userData.pointStyle,showLabel:!!this.userData.showLabel,nakedLabel:!0,labelSize:this.userData.labelSize,labelOrientation:this.userData.labelOrientation,verticalLabel:this.userData.verticalLabel,editableLabel:l(this.userData),labels:this.computedLabels||[],poi:g(b)}]:[];case u.XYPOINT:return x=[],b=h.wrap(t).mapElements(function(e){return e.asArray()}),_=this.userData.shouldGraph&&D.points,S=this.userData.shouldGraph&&D.lines,M=this.userData.showLabel&&!_&&!S,(this.userData.showLabel||_)&&x.push({segments:[b],graphMode:i.graphMode,color:this.userData.color,style:this.userData.pointStyle,showLabel:!!this.userData.showLabel,showPoint:_,labelSize:this.userData.labelSize,labelOrientation:this.userData.labelOrientation,verticalLabel:this.userData.verticalLabel,interactiveLabel:!!this.userData.interactiveLabel,editableLabel:l(this.userData),nakedLabel:M,labels:this.computedLabels||[],poi:g(b)}),S&&x.push({segments:[b].map(n),graphMode:u.PARAMETRIC,color:this.userData.color,style:this.userData.lineStyle,poi:[]}),x;case u.PARAMETRIC:var T=this.userData,P=[];if(x=h.wrap(t).mapElements(function(t){if(0===t.getDependencies().length)return b=[t.asArray()],{segments:[b],graphMode:u.XYPOINT,color:T.color,style:T.lineStyle,poi:g(b)};var n=t.getCompiledFunction(),a=E.getGraphInfo(e,t);return a.graphMode=i.graphMode,a.domain={min:E.metaData.evaluatedDomainMin,max:E.metaData.evaluatedDomainMax},a.style=E.userData.lineStyle,o.computeGraphData({viewState:r,graphInfo:a,compiled:n})}),D.fill){if(x.forEach(function(e){P.push({segments:e.segments,color:T.color,fillOpacity:E.metaData.computedFillOpacity,graphMode:u.POLYGONFILL,poi:[]})}),!D.lines)return P;x=x.concat(P)}return x;case u.X:case u.Y:case u.IMPLICIT:case u.POLAR:x=[];var I=t.valueType===f.Number;return h.wrap(t).eachElement(function(t){var n,s=i.graphMode===u.IMPLICIT?t.getCompiledFunction(["x","y"]):t.getCompiledFunction(),l=y(E),p=l&&l.discrete,f=c(l,t);try{n=t.getCompiledDerivative()}catch(e){}var h=E.getGraphInfo(e,t);h.graphMode=i.graphMode,h.style=E.userData.lineStyle,i.graphMode===u.POLAR&&(h.domain={min:E.metaData.evaluatedDomainMin,max:E.metaData.evaluatedDomainMax,isExplicit:E.metaData.isExplicitDomain});var d=E.metaData.evaluatedCDFMin,v=E.metaData.evaluatedCDFMax;if(isNaN(d)||isNaN(v)||!I){var b={viewState:r,graphInfo:h,compiled:s,derivative:n,discrete:p};l&&"binomialdist"===l.symbol&&(b.maxOverride=t.args[1].asValue());var _=o.computeGraphData(b);f&&(_.boundingBox=f),_.fillSegments?x.push(a.omit(_,"fillSegments")):p?x.push({graphMode:u.XYPOINT,segments:[_.segments],showPoint:E.userData.shouldGraph,color:E.userData.color,style:_.style,boundingBox:f,poi:g(_.segments)}):x.push(_),h.graphMode===u.IMPLICIT&&"="!==h.operator&&x.push({graphMode:u.POLYGONFILL,segments:_.fillSegments,poi:{}})}else{var S={viewState:r,graphInfo:h,compiled:s,derivative:n,bounds:[d,v],discrete:p};l&&"binomialdist"===l.symbol&&(S.maxOverride=t.args[1].asValue());var M=m(S),w=M.cdfTopBranch,D=a.each(M.topBranches,function(e){e&&(e.boundingBox=f)});if(a.every(D,function(e){return void 0!==e}))if(p){if(x=D.map(function(e){return{graphMode:u.XYPOINT,segments:[e.segments],showPoint:E.userData.shouldGraph,color:E.userData.color,style:e.style,poi:g(e.segments),boundingBox:f}}),w&&w.segments.length){var T=[];w.segments.forEach(function(e){T.push([e[0],0,e[0],e[1]])}),x.push({graphMode:u.PARAMETRIC,segments:T,boundingBox:f,poi:{}})}}else if(x=D,w&&w.segments.length){var P,C,O,A;for(P=0;P<w.segments.length;P++)if(C=w.segments[P],C.length>=4){O=C[0];break}for(P=w.segments.length-1;P>=0;P--)if(C=w.segments[P],C.length>=4){A=C[C.length-2];break}if(isFinite(O)&&isFinite(A)){var L=o.polygonsFromSegments(w.segments,[[O,0,A,0]],w.graphMode);x.push({graphMode:u.POLYGONFILL,segments:L,poi:{}})}}}}),x;default:return!1}},s.Base.prototype.graph=function(e,t,r){var n=this.getGraphInfo(e,t);return this._graph(e,t,r,n)},s.BaseComparator.prototype.graph=function(e,t,r){var n=this,i=this.getGraphInfo(e,t),a=i.graphMode;if(a===u.IMPLICIT)return this._graph(e,t,r,i);if(a===u.NONE)return!1;if(!(t instanceof s.SolvedEquation))return!1;var l=this.getOperator(),p=[],f=[],h=!0;t._expression.eachElement(function(e){p.push(e.getCompiledFunction());try{f.push(e.getCompiledDerivative())}catch(e){h=!1}}),h||(f=void 0);var d,m,g=[],y=[-1,0,0,1],v=p.length;for(m=0;m<v;m++){var b=this.getGraphInfo(e,t._expression.args[m]);b.graphMode=a,b.style=n.userData.lineStyle,i.graphMode===u.POLAR&&(b.domain={min:n.metaData.evaluatedDomainMin,max:n.metaData.evaluatedDomainMax,isExplicit:n.metaData.isExplicitDomain}),d=o.computeGraphData({viewState:r,graphInfo:b,compiled:p[m],derivative:f?f[m]:void 0}),d.operator=c.get(c.table[l].inclusive,y[m%4]),g.push(d)}for(m=0;m<v;m+=4){var x=o.polygonsFromSegments(g[m+1].segments,g[m+2].segments,a);g.push({graphMode:u.POLYGONFILL,segments:x,poi:{}})}return g},s.DoubleInequality.prototype.graph=function(e,t,r){var n=this.getGraphInfo(e,t);if(n.graphMode===u.NONE)return!1;var i=[],a=c.get(c.table[this._operators[0]].inclusive,0),s=c.get(c.table[this._operators[1]].inclusive,0),l=this.userData,p=this.metaData,f=this;return h.eachArgs(t._expressions,function(t){var c,h;t[0].userData=t[1].userData=l,t[0].metaData=t[1].metaData=p,c=f._graph(e,t[0],r,n)[0],c.operator=a,i.push(c),h=f._graph(e,t[1],r,n)[0],h.operator=s,i.push(h);var d=o.polygonsFromSegments(c.segments,h.segments,c.graphMode);i.push({graphMode:u.POLYGONFILL,segments:d,poi:{}})}),i},s.Regression.prototype.graph=function(e,t,r){var n=this.getGraphInfo(e,t);return this._graph(e,t.model,r,n)},s.Polygon.prototype.graph=function(e,t,r){for(var i=this.getGraphInfo(e,t),a=t.args[0].asValue(),s=[],o=void 0===this.userData.lines||this.userData.lines,c=void 0===this.userData.fill||this.userData.fill,l=[],p=[],f=0;f<a.length;f++){var h=a[f][0],d=a[f][1];isFinite(h)&&isFinite(d)?(o||c)&&p.push([h,d]):(o||c)&&(p.length>1&&l.push(p),p=[])}if(l.length||p.length){p.push([a[0][0],a[0][1]]),l.push(p);var m=l.map(n);c&&s.push({segments:m,graphMode:u.POLYGONFILL,poi:[],color:i.color,fillOpacity:this.metaData.computedFillOpacity,style:i.style}),o&&s.push({segments:m,graphMode:u.PARAMETRIC,poi:[],color:i.color,style:this.userData.lineStyle})}return s},s.Histogram.prototype.graph=function(e,n,i){var a=this.getGraphInfo(e,n),s=n.args[0].asValue(),o=n.args[1].asValue(),c=this.userData.vizProps&&"left"===this.userData.vizProps.binAlignment?o/2:0,l=r(s,o,c),p=1;this.userData.vizProps&&"density"===this.userData.vizProps.histogramMode?p=1/(s.length*o):this.userData.vizProps&&"relative"===this.userData.vizProps.histogramMode&&(p=1/s.length);var f=[],h=[];for(var d in l){var m=l[d],g=m.data.length;h.push([m.min,0*p,m.min,g*p,m.max,g*p,m.max,0*p]);var y=0;l[m.id+1]&&(y=l[m.id+1].data.length);var v=[m.min,0*p,m.min,g*p,m.max,g*p];y<g&&v.push(m.max,y*p),f.push(v)}var b=t("histogram",h);return b&&o&&(b.binWidth=o),[{segments:h,graphMode:u.POLYGONFILL,boundingBox:b,poi:[],color:a.color,fillOpacity:.4},{segments:f,graphMode:u.Y,poi:{zeros:{x:[],y:[]},extrema:{x:[],y:[]},intercept:{x:[],y:[]}},color:a.color}]},s.DotPlot.prototype.graph=function(e,n,i){var a,s,o,c,l=this.getGraphInfo(e,n),p=n.args[1].asValue(),f=this.userData.vizProps&&"left"===this.userData.vizProps.binAlignment?p/2:0,h=r(n.args[0].asValue(),p,f),d=!1,m=[];for(s in h){o=h[s];for(var y=o.data.length-1;y>=0;y--)o.center!==o.data[y]&&(d=!0)}if(this.userData.vizProps&&"exact"===this.userData.vizProps.dotplotXMode)for(s in h)for(o=h[s],c=o.data,c.reverse(),a=0;a<c.length;a++)m.push([c[a],a+1]);else for(s in h)for(o=h[s],c=o.data,a=0;a<c.length;a++)m.push([o.center,a+1]);var v=t("dotplot",m);return v&&p&&(v.ymin=0,v.xmin-=.5*p,v.xmax+=.5*p,v.binWidth=p),[{segments:[m],graphMode:u.XYPOINT,boundingBox:v,poi:g(m),color:l.color,style:this.userData.pointStyle,pointSize:this.userData.vizProps&&this.userData.vizProps.dotplotSize,showPoint:!0,needsDotplotXMode:d}]},s.BoxPlot.prototype.graph=function(e,r,n){var i=this.getGraphInfo(e,r),a=this.metaData.evaluatedAxisOffset,s=this.metaData.evaluatedBreadth,o=r.args[0].asValue();if(isNaN(s)||isNaN(a))return{};var c=Math.min.apply(null,o),l=Math.max.apply(null,o),p=d.quartile(o,1),f=d.quartile(o,2),h=d.quartile(o,3),m=a,g=m-s/2,y=m+s/2,v=s/10,b=[[p,g,h,g,h,y,p,y,p,g],[f,g,f,y],[p,m,c,m],[h,m,l,m],[c,m-v,c,m+v],[l,m-v,l,m+v]];if(this.userData.vizProps&&"y"===this.userData.vizProps.alignedAxis)for(var x=0;x<b.length;x++)for(var _=b[x],S=0;S<_.length;S+=2){var M=_[S];_[S]=_[S+1],_[S+1]=M}return[{segments:b,graphMode:u.PARAMETRIC,boundingBox:t("boxplot",b),poi:[],color:i.color}]},\ns.Table.prototype.isValueDraggable=function(e,t,r){if(!e.columns[t].isIndependent)return!1;var n=this.columns[t],i=n.values,a=i&&i[r];return!(!a||!isFinite(a.asValue())||0!==a._dependencies.length)},s.Table.prototype.graph=function(e,t,r){var i=[];if(t.columns[0].isError)return i;for(var a=t.columns[0],s=a.values,o=1;o<this.columns.length;o++){var c=t.columns[o];if(!c.isError){var p=this.columns[o].header.userData;if(!p.hidden){for(var f=p.dragMode,h=f===l.X||f===l.XY,d=f===l.Y||f===l.XY,m=!!p.points,y=!!p.lines,v=c.isDiscrete(a),b=y&&v,x=y&&!v,_=[],S=[],M=[],E=[],w=[],D=[],T=1/0,P=-1/0,I=1/0,C=-1/0,O=0;O<s.length;O++){var A=s[O],L=c.values[O];if(A&&L&&isFinite(A.asValue())&&isFinite(L.asValue())){var N=A.asValue(),q=L.asValue();if(m){var F=h&&this.isValueDraggable(t,0,O),k=d&&this.isValueDraggable(t,o,O);F||k?(M.push([N,q]),E.push({index:O,dragX:F,dragY:k})):S.push([N,q])}b&&D.push([N,q]),N<T&&(T=N),N>P&&(P=N),q<I&&(I=q),q>C&&(C=q)}else b&&(D.length>1&&w.push(D),D=[])}var V={type:"table",xmin:T,xmax:P,ymin:I,ymax:C};if(M.length&&_.push({graphMode:u.XYPOINT_MOVABLE,segments:[M],color:p.color,tableId:p.tableId,poi:g(M),movablePointInfo:E,boundingBox:V}),S.length&&_.push({segments:[S],graphMode:u.XYPOINT,showPoint:!0,poi:g(S),color:p.color,style:p.pointStyle,tableId:p.tableId,boundingBox:V}),(w.length||D.length)&&(w.push(D),_.push({segments:w.map(n),graphMode:u.PARAMETRIC,poi:[],color:p.color,style:p.lineStyle,tableId:p.tableId,boundingBox:V})),x){var B=this.columns[o].header.graph(e,t.columns[o].header,r);B.length&&Array.prototype.push.apply(_,B)}_.length&&(i[p.id]=_)}}}return i},s.Image.prototype.graph=function(e,t,r){var n=[];if(!("OrderedPair"===t.center.type&&t.center.args[0].isConstant&&t.center.args[1].isConstant&&t.radianAngle.isConstant&&t.width.isConstant&&t.height.isConstant&&t.opacity.isConstant))return n;for(var a=[],s=[],o=t.width.asValue()/2,c=t.height.asValue()/2,l=t.radianAngle.asValue(),p=-1;p<=1;p++)for(var f=-1;f<=1;f++){var h=[t.center.args[0].asValue()+p*o*Math.cos(l)+f*c*Math.sin(l),t.center.args[1].asValue()-p*o*Math.sin(l)+f*c*Math.cos(l)],d=i(t.moveStrategy,p,f);d&&(a.push(h),s.push([p,f]))}return n.push({segments:[a],scaleFactors:[s],graphMode:u.XYPOINT_MOVABLE,color:this.userData.color,style:this.userData.style,poi:g(a)}),n}}),define("math/features/elementAt",["require","parsenodes","math/builtinframe","math/policy"],function(e){function t(e){for(var t=0;t<this.length;t++)e(this.elementAt(t))}function r(e){for(var t=[],r=0;r<this.length;r++)t.push(e(this.elementAt(r)));return t}var n=e("parsenodes"),i=e("math/builtinframe"),a=e("math/policy").defaultPolicy;n.List.prototype.elementAt=function(e){return e=Math.floor(e),e>=0&&e<this.args.length?this.args[e]:n.Constant(NaN)},n.Broadcast.prototype.elementAt=function(e){if((e=Math.floor(e))<0||e>=this.length)return n.Constant(NaN);for(var t={},r=0;r<this._replacedSymbols.length;r++)t[this._replacedSymbols[r]]=this._lists[r].elementAt(e);return this._expression.substitute(t).getConcreteTree(a,i)},n.List.prototype.eachElement=t,n.Broadcast.prototype.eachElement=t,n.List.prototype.mapElements=r,n.Broadcast.prototype.mapElements=r,n.OrderedPair.prototype.elementAt=function(e){switch(e){case 0:return this.args[0];case 1:return this.args[1];default:return n.Constant(NaN)}}}),define("lib/number-to-latex",["require","exports"],function(e,t){"use strict";function r(e){if("string"==typeof e)return e;if(void 0===e)return"";var t=e+"";return t=t.replace(/1e\\+?([-\\d]+)/,"10^{$1}"),t=t.replace(/([-\\d\\.]+)e\\+?([-\\d]+)/,"$1\\\\cdot 10^{$2}")}function n(e){var t=e+"";if(/\\d+\\.?\\d*e[\\+\\-]*\\d+/i.test(t)){var r=String(t).toLowerCase().split("e"),n=parseFloat(r[0]),i=parseInt(r[1],10),a=Math.abs(i),s=Math.abs(n).toString().split(".");if(i<0)t="0."+new Array(a).join("0")+s.join("");else{var o=s[1];o&&(a-=o.length),t=s.join("")+new Array(a+1).join("0")}n<0&&(t="-"+t)}return t}function i(e,t){void 0===t&&(t=2);var r=n(e),i=r.indexOf(".");if(-1===i)return r;for(var a,s=i+1;s<r.length;s++)if(a){if(r[s]!==a)break}else{if("0"!==r[s]&&"9"!==r[s])break;a=r[s]}return r.substr(0,Math.max(i+5,s+t))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,t.numberToDecimalString=n,t.numberToStatsConfidenceLatex=i}),define("math/features/printLatex",["require","parsenodes","graphing/label","lib/number-to-latex"],function(e){function t(){return u.identifierToLatex(this._symbol)+" "}function r(e){switch(e){case">":return"\\\\gt ";case"<":return"\\\\lt ";case">=":return"\\\\ge ";case"<=":return"\\\\le ";case"=":return"="}}function n(e){return e.printLatex()}function i(){switch(this._symbol){case"sqrt":return"\\\\sqrt{"+this.args[0].printLatex()+"}";case"nthroot":return"\\\\sqrt["+this.args[1].printLatex()+"]{"+this.args[0].printLatex()+"}";case"logbase":return"\\\\log_{"+this.args[1].printLatex()+"}\\\\left("+this.args[0].printLatex()+"\\\\right)";default:return u.identifierToLatex(this._symbol)+"\\\\left("+this.args.map(n).join(", ")+"\\\\right)"}}function a(e){return e.isConstant&&!0===e.asValue()}function s(e){return e.isConstant&&e.isNaN()}var o=e("parsenodes"),u=e("graphing/label"),c=e("lib/number-to-latex").default;o.Identifier.prototype.printLatex=t,o.FreeVariable.prototype.printLatex=t,o.Constant.prototype.printLatex=function(){return c(this.asValue())},o.Negative.prototype.printLatex=function(){return"-\\\\left("+this.args[0].printLatex()+"\\\\right)"},o.Add.prototype.printLatex=function(){return"\\\\left("+this.args[0].printLatex()+"\\\\right)+\\\\left("+this.args[1].printLatex()+"\\\\right)"},o.PercentOf.prototype.printLatex=function(){return this.args[0].printLatex()+" \\\\% \\\\operatorname{of} "+this.args[1].printLatex()},o.Subtract.prototype.printLatex=function(){return"\\\\left("+this.args[0].printLatex()+"\\\\right)-\\\\left("+this.args[1].printLatex()+"\\\\right)"},o.Multiply.prototype.printLatex=function(){return"\\\\left("+this.args[0].printLatex()+"\\\\right)*\\\\left("+this.args[1].printLatex()+"\\\\right)"},o.Divide.prototype.printLatex=function(){return"\\\\frac{"+this.args[0].printLatex()+"}{"+this.args[1].printLatex()+"}"},o.Exponent.prototype.printLatex=function(){return"\\\\left("+this.args[0].printLatex()+"\\\\right)^{"+this.args[1].printLatex()+"}"},o.Assignment.prototype.printLatex=function(){return u.identifierToLatex(this._symbol)+"="+this._expression.printLatex()},o.Equation.prototype.printLatex=function(){return this._lhs.printLatex()+"="+this._rhs.printLatex()},o.BaseComparator.prototype.printLatex=function(){return"\\\\left("+this.args[0].printLatex()+"\\\\right)"+r(this.operator)+"\\\\left("+this.args[1].printLatex()+"\\\\right)"},o.DoubleInequality.prototype.printLatex=function(){return"\\\\left("+this.args[0].printLatex()+"\\\\right)"+r(this.args[1])+this.args[2].printLatex()+r(this.args[3])+"\\\\left("+this.args[4].printLatex()+"\\\\right)"},o.And.prototype.printLatex=function(){if(!(this.args[0]instanceof o.BaseComparator&&this.args[1]instanceof o.BaseComparator))throw new Error("Not implemented");if(this.args[0].args[1].printLatex()!==this.args[1].args[0].printLatex())throw new Error("Not implemented");return"\\\\left("+this.args[0].args[0].printLatex()+"\\\\right)"+r(this.args[0].operator)+"\\\\left("+this.args[0].args[1].printLatex()+"\\\\right)"+r(this.args[1].operator)+"\\\\left("+this.args[1].args[1].printLatex()+"\\\\right)"},o.NativeFunction.prototype.printLatex=i,o.TypedFunction.prototype.printLatex=i,o.ReducerFunction.prototype.printLatex=i,o.ParametrizedReducerFunction.prototype.printLatex=i,o.DoubleReducerFunction.prototype.printLatex=i,o.FunctionCall.prototype.printLatex=i,o.Distribution.prototype.printLatex=i,o.SeededFunctionCall.prototype.printLatex=function(){return u.identifierToLatex(this._symbol)+"\\\\left("+this.args.slice(1).map(n).join(", ")+"\\\\right)"},o.DotAccess.prototype.printLatex=function(){return"("+this.args[0].printLatex()+").("+this.args[1].printLatex()+")"},o.DotAccessExponent.prototype.printLatex=function(){return"("+this.args[0].printLatex()+").("+this.args[1].printLatex()+")^{"+this.args[2].printLatex()+"}"},o.Prime.prototype.printLatex=function(){switch(this.args[0]._symbol){case"logbase":return"\\\\log_{"+this.args[0].args[1].printLatex()+"}"+Array(this.order+1).join("\'")+"\\\\left("+this.args[0].args[0].printLatex()+"\\\\right)";default:return u.identifierToLatex(this.args[0]._symbol)+Array(this.order+1).join("\'")+"\\\\left("+this.args[0].args.map(n).join(", ")+"\\\\right)"}},o.List.prototype.printLatex=function(){return"\\\\left["+this.args.map(n).join(", ")+"\\\\right]"},o.Range.prototype.printLatex=function(){return"\\\\left["+this.args[0].args.map(n).join(", ")+" ... "+this.args[1].args.map(n).join(", ")+"\\\\right]"},o.ListAccess.prototype.printLatex=function(){return"\\\\left("+this.args[0].printLatex()+"\\\\right)\\\\left["+this.args[1].printLatex()+"\\\\right]"},o.OrderedPair.prototype.printLatex=function(){return"\\\\left("+this.args.map(n).join(", ")+"\\\\right)"},o.Sum.prototype.printLatex=function(){return"\\\\sum_{"+this.args[0].printLatex()+"="+this.args[1].printLatex()+"}^{"+this.args[2].printLatex()+"}\\\\left("+this.args[3].printLatex()+"\\\\right)"},o.Product.prototype.printLatex=function(){return"\\\\prod_{"+this.args[0].printLatex()+"="+this.args[1].printLatex()+"}^{"+this.args[2].printLatex()+"}\\\\left("+this.args[3].printLatex()+"\\\\right)"},o.Integral.prototype.printLatex=function(){return"\\\\int_{"+this.args[1].printLatex()+"}^{"+this.args[2].printLatex()+"}\\\\left("+this.args[3].printLatex()+"\\\\right)d"+this.args[0].printLatex()},o.FunctionExponent.prototype.printLatex=function(){return this.args[0].printLatex()+"\\\\left("+this.args[1].printLatex()+"\\\\right)^{"+this.args[2].printLatex()+"}"},o.FunctionFactorial.prototype.printLatex=function(){return this.args[0].printLatex()+"\\\\left("+this.args[1].printLatex()+"\\\\right)!"},o.Piecewise.prototype.printLatex=function(){var e=this;if(a(e.args[0]))return e.args[1].printLatex();for(var t=["\\\\left\\\\{"];;){if(a(e.args[0])){t.push(e.args[1].printLatex());break}if(t.push(e.args[0].printLatex(),": "),s(e.args[2])){t.push(e.args[1].printLatex());break}if(t.push(e.args[1].printLatex(),", "),!(e.args[2]instanceof o.Piecewise)){t.push(e.args[2].printLatex());break}e=e.args[2]}return t.push("\\\\right\\\\}"),t.join("")},o.FunctionDefinition.prototype.printLatex=function(){return u.identifierToLatex(this._symbol)+"\\\\left("+this._argSymbols.map(u.identifierToLatex).join(", ")+"\\\\right) = "+this._expression.printLatex()},o.Derivative.prototype.printLatex=function(){return"\\\\frac{d}{d"+u.identifierToLatex(this._symbol)+"}\\\\left("+this.args[0].printLatex()+"\\\\right)"},o.Regression.prototype.printLatex=function(){return"\\\\left("+this._lhs.printLatex()+"\\\\right)\\\\sim\\\\left("+this._rhs.printLatex()+"\\\\right)"},o.Polygon.prototype.printLatex=function(){return"\\\\polygon\\\\left("+this.args.map(n).join(", ")+"\\\\right)"},o.Histogram.prototype.printLatex=function(){return"\\\\histogram\\\\left("+this.args.map(n).join(", ")+"\\\\right)"},o.DotPlot.prototype.printLatex=function(){return"\\\\dotplot\\\\left("+this.args.map(n).join(", ")+"\\\\right)"},o.BoxPlot.prototype.printLatex=function(){return"\\\\boxplot\\\\left("+this.args.map(n).join(", ")+"\\\\right)"},o.TTest.prototype.printLatex=function(){return"\\\\TTest\\\\left("+this.args.map(n).join(", ")+"\\\\right)"},o.IndependentTTest.prototype.printLatex=function(){return"\\\\IndependentTTest\\\\left("+this.args.map(n).join(", ")+"\\\\right)"},o.Stats.prototype.printLatex=function(){return"\\\\Stats\\\\left("+this.args.map(n).join(", ")+"\\\\right)"}}),define("math/features/statistics",["require","parsenodes","math/maybe-rational"],function(e){var t=e("parsenodes"),r=t.BuiltInFunction,n=e("math/maybe-rational").maybeRational,i=t.Constant(n(0,1)),a=t.Constant(n(1,1)),s=t.Constant(n(2,1)),o=t.Constant(-1/0);r.normaldist.prototype.pdf=function(e){return r.normalpdf([e[0],this.args[0],this.args[1]])},r.normaldist.prototype.cdf=function(e){var t,n;return 1===e.length?(t=o,n=e[0]):(t=e[0],n=e[1]),r.normalcdf([t,n,this.args[0],this.args[1]])},r.normaldist.prototype.mean=function(){return this.args[0]},r.normaldist.prototype.median=function(){return this.args[0]},r.normaldist.prototype.stdev=function(){return r.abs([this.args[1]])},r.normaldist.prototype.var=function(){return t.Exponent([this.args[1],s])},r.normaldist.prototype.quantile=function(e){return t.Add([t.Multiply([r.invNorm(e),this.stdev()]),this.mean()])},r.normaldist.prototype.sample=function(e){return r.normalSample([e[0],this.args[0],this.args[1]])},r.tdist.prototype.pdf=function(e){return r.tpdf([e[0],this.args[0]])},r.tdist.prototype.cdf=function(e){var t,n;return 1===e.length?(t=o,n=e[0]):(t=e[0],n=e[1]),r.tcdf([t,n,this.args[0]])},r.tdist.prototype.mean=function(){return i},r.tdist.prototype.median=function(){return i},r.tdist.prototype.quantile=function(e){return r.invT([e[0],this.args[0]])},r.tdist.prototype.sample=function(e){return r.tSample([e[0],this.args[0]])},r.tdist.prototype.stdev=function(){return r.sqrt([this.var()])},r.tdist.prototype.var=function(){var e=this.args[0];return t.Piecewise([t.Comparator[">="]([e,s]),t.Divide([e,t.Subtract([e,s])]),t.Constant(NaN)])},r.poissondist.prototype.pdf=function(e){return r.poissonpdf([e[0],this.args[0]])},r.poissondist.prototype.cdf=function(e){var t,n;return 1===e.length?(t=o,n=e[0]):(t=e[0],n=e[1]),r.poissoncdf([t,n,this.args[0]])},r.poissondist.prototype.mean=function(){return this.args[0]},r.poissondist.prototype.stdev=function(){return r.sqrt([this.args[0]])},r.poissondist.prototype.var=function(){return this.args[0]},r.poissondist.prototype.quantile=function(e){return r.invPoisson([e[0],this.args[0]])},r.poissondist.prototype.sample=function(e){return r.poissonSample([e[0],this.args[0]])},r.binomialdist.prototype.pdf=function(e){return r.binompdf([e[0],this.args[0],this.args[1]])},r.binomialdist.prototype.cdf=function(e){var t,n;return 1===e.length?(t=o,n=e[0]):(t=e[0],n=e[1]),r.binomcdf([t,n,this.args[0],this.args[1]])},r.binomialdist.prototype.mean=function(){return t.Multiply([this.args[0],this.args[1]])},r.binomialdist.prototype.stdev=function(){return r.sqrt([this.var()])},r.binomialdist.prototype.var=function(){var e=this.args[0],r=this.args[1];return t.Multiply([e,t.Multiply([r,t.Subtract([a,r])])])},r.binomialdist.prototype.quantile=function(e){return r.invBinom([e[0],this.args[0],this.args[1]])},r.binomialdist.prototype.sample=function(e){return r.binomSample([e[0],this.args[0],this.args[1]])},r.uniformdist.prototype.pdf=function(e){return r.uniformpdf([e[0],this.args[0],this.args[1]])},r.uniformdist.prototype.cdf=function(e){var t,n;return 1===e.length?(t=o,n=e[0]):(t=e[0],n=e[1]),r.uniformcdf([t,n,this.args[0],this.args[1]])},r.uniformdist.prototype.mean=function(){return t.Divide([t.Add([this.args[0],this.args[1]]),s])},r.uniformdist.prototype.median=function(){return t.Divide([t.Add([this.args[0],this.args[1]]),s])},r.uniformdist.prototype.stdev=function(){return r.sqrt([this.var()])},r.uniformdist.prototype.var=function(){return t.Divide([t.Exponent([t.Subtract([this.args[1],this.args[0]]),s]),t.Constant(n(12,1))])},r.uniformdist.prototype.quantile=function(e){return r.invUniform([e[0],this.args[0],this.args[1]])},r.uniformdist.prototype.sample=function(e){return r.uniformSample([e[0],this.args[0],this.args[1]])},t.List.prototype.sample=function(e){return t.ListAccess([this,t.Add([r.floor([t.Multiply([r.uniformSample([e[0],i,a]),t.Constant(n(this.length,1))])]),a])])}}),define("math/features/getExpressionType",["require","parsenodes","graphing/graphmode","math/expression-types","math/types"],function(e){var t=e("parsenodes"),r=e("graphing/graphmode"),n=e("math/expression-types").ExpressionType,i=e("math/types");t.Base.prototype.getExpressionType=function(e,t){return e===r.X||e===r.Y?n.X_OR_Y:e===r.XYPOINT||e===r.XYPOINT_MOVABLE?t===i.Point?n.SINGLE_POINT:n.POINT_LIST:e===r.PARAMETRIC?n.PARAMETRIC:e===r.POLAR?n.POLAR:e===r.IMPLICIT?n.IMPLICIT:n.X_OR_Y},t.Polygon.prototype.getExpressionType=function(e,t){return n.POLYGON},t.Histogram.prototype.getExpressionType=function(e,t){return n.HISTOGRAM},t.DotPlot.prototype.getExpressionType=function(e,t){return n.DOTPLOT},t.BoxPlot.prototype.getExpressionType=function(e,t){return n.BOXPLOT}}),define("parser",["require","math/baseparser","math/features/getConcreteTree","math/features/getValueType","math/features/typeCheck","math/features/repr","math/features/scalarEvalExpression","math/features/constantcollapsedcopy","math/features/polynomialorder","math/features/polynomialcoefficients","math/features/extractconditions","math/features/piecewiseDependsOn","math/features/bounddomain","math/features/derivative","math/features/substitute","math/features/solve","math/features/analyze","math/features/analyzeFourFunction","math/features/analyzeScientific","math/features/analyzeSingleExpressionScientific","math/features/getgraphmode","math/features/getgraphinfo","math/features/getMoveStrategy","math/features/getDefaultDragMode","math/features/tableinfo","math/features/tableerror","math/features/islinear","math/features/graph","math/features/elementAt","math/features/printLatex","math/features/statistics","math/features/getExpressionType"],function(e){var t=e("math/baseparser");return e("math/features/getConcreteTree"),e("math/features/getValueType"),e("math/features/typeCheck"),e("math/features/repr"),e("math/features/scalarEvalExpression"),e("math/features/constantcollapsedcopy"),e("math/features/polynomialorder"),e("math/features/polynomialcoefficients"),e("math/features/extractconditions"),e("math/features/piecewiseDependsOn"),e("math/features/bounddomain"),e("math/features/derivative"),e("math/features/substitute"),e("math/features/solve"),e("math/features/analyze"),e("math/features/analyzeFourFunction"),e("math/features/analyzeScientific"),e("math/features/analyzeSingleExpressionScientific"),e("math/features/getgraphmode"),e("math/features/getgraphinfo"),e("math/features/getMoveStrategy"),e("math/features/getDefaultDragMode"),e("math/features/tableinfo"),e("math/features/tableerror"),e("math/features/islinear"),e("math/features/graph"),e("math/features/elementAt"),e("math/features/printLatex"),e("math/features/statistics"),e("math/features/getExpressionType"),t}),define("math/finddependencyorder",["require","math/builtinframe","underscore"],function(e){function t(e,t,i){function a(e){y[e]=y[e]||{};var r,n=y[e];n.id=e,n.index=v,n.lowlink=v,b.push(n),n.instack=!0,v++;for(var i=t[e].getDependencies(),u=0;u<i.length;u++){var c=i[u];if(d.hasOwnProperty(c))for(var l=d[c],p=0;p<l.length;p++){var f=l[p];y.hasOwnProperty(f)?(r=y[f],r.instack&&(n.lowlink=Math.min(n.lowlink,r.index))):(a(f),r=y[f],n.lowlink=Math.min(n.lowlink,r.lowlink))}}if(n.lowlink===n.index)if(r=b.pop(),r.instack=!1,r===n)s(n);else{for(var h=[r];;)if(r=b.pop(),r.instack=!1,h.push(r),r===n)break;o(h)}}function s(e){x.push(e.id)}function o(r){var i,a,s=[];for(a=r.length-1;a>=0;a--){i=r[a];var o=t[i.id].getLegalExports(e);Array.prototype.push.apply(s,o),s.push(o[0]),x.push(i.id)}for(s=n.unique(s),s.sort(),a=0;a<s.length;a++)g[s[a]]=s}var u,c,l,p,f,h=[],d={},m={},g={},y={},v=0,b=[],x=[];if(!i){i=[];for(u in t)t.hasOwnProperty(u)&&i.push(u)}for(u in t)if(t.hasOwnProperty(u)){for(f=t[u].exportPenalty||0;h.length<f+1;)h.push([]);h[f].push(u)}for(f=0;f<h.length;f++){var _={};for(c=0;c<h[f].length;c++){u=h[f][c];var S=t[u].getLegalExports(e);for(l=0;l<S.length;l++)p=S[l],r[p]||d[p]||(_[p]=_[p]||[],_[p].push(u),_[p].length>1&&(m[p]=!0))}for(p in _)d[p]=_[p]}for(c=0;c<i.length;c++)y.hasOwnProperty(i[c])||a(i[c]);return{resolved:x,multiplyDefined:m,cyclicallyDefined:g}}var r=e("math/builtinframe"),n=e("underscore");return t}),define("math/findIntersections",["require","graphing/graphmode","./plotter","parsenodes","./distance"],function(e){function t(e){for(var t=[],r=0;r<e;r++)t[r]={x:[],y:[],intersects:[]};return t}function r(e,t,r,n){return r===l.X&&n===l.X||r===l.Y&&n===l.Y?function(r){return t(r)-e(r)}:(r===l.X&&n===l.Y||r===l.Y&&n===l.X)&&function(r){return r-t(e(r))}}function n(e){e instanceof f.SolvedEquation?e=e._expression:e instanceof f.OptimizedRegression&&(e=e.model);var t=[],r=[];return e instanceof f.DoubleInequality?f.List.eachArgs(e._expressions,function(e){t.push(e[0].getCompiledFunction()),r.push(e[0].isConstant&&e[1].isNaN()),t.push(e[1].getCompiledFunction()),r.push(e[1].isConstant&&e[1].isNaN())}):f.List.wrap(e).eachElement(function(e){t.push(e.getCompiledFunction()),r.push(e.isConstant&&e.isNaN())}),{functions:t,skipIntersecting:r}}function i(e,t){var r=[];for(var i in e)if(e.hasOwnProperty(i)&&String(i)!==String(t)&&e[i].shouldIntersect()){var a=e[i],s=n(a.concreteTree);r.push({id:i,graphMode:a.getGraphMode(),functions:s.functions,skipIntersecting:s.skipIntersecting})}return r}function a(e,t){e.intersects=Array(e.x.length);for(var r=0;r<e.x.length;r++)e.intersects[r]=t}function s(e,t){if(t===l.X){var r=e.y;e.y=e.x,e.x=r}}function o(e,t){Array.prototype.push.apply(e.x,t.x),Array.prototype.push.apply(e.y,t.y),Array.prototype.push.apply(e.intersects,t.intersects)}function u(e,t,r){var n=p.sampleXY(e,t),i=n.poi.zeros,a=n.poi.extrema,s=[],o=0,u=0;for(o=0;o<i.x.length;o++){for(;u<a.x.length&&a.x[u]<i.x[o];u++)h.approx(a.y[u],0)&&s.push(a.x[u]);s.push(i.x[o])}for(;u<a.x.length;u++)h.approx(a.y[u],0)&&s.push(a.x[u]);return{x:s,y:s.map(r)}}function c(e,c,l){var f=e[l],h=f.getGraphInfo(),m=f.getGraphMode(),g=n(f.concreteTree),y=t(g.functions.length),v=i(e,l);if(!v)return y;for(var b=0,x=0;x<v.length;x++)for(var _=v[x],S=0;S<g.functions.length;S++)if(!g.skipIntersecting[S])for(var M=g.functions[S].fn,E=p.computeDomain(c,h,M),w=0;w<_.functions.length;w++)if(!v[x].skipIntersecting[w]){var D=_.functions[w].fn,T=r(M,D,m,_.graphMode);if(T){var P=u(T,E,M);if((b+=P.x.length)>d)return t(g.functions.length);a(P,_.id),s(P,m),o(y[S],P)}}return y}var l=e("graphing/graphmode"),p=e("./plotter").default,f=e("parsenodes"),h=e("./distance"),d=100;return{findIntersections:c,findIndicatorZeros:u}}),define("math/interpolatedlabel",["require","exports","parsenodes","math/types","graphing/label","./policy"],function(e,t,r,n,i,a){"use strict";function s(e){return!(e.length<2)&&("`"===e[0]&&"`"===e[e.length-1])}function o(e){for(var t,r=["[a-zA-Z][0-9]*","[a-zA-Z]_[a-zA-Z0-9]+","[a-zA-Z]_\\\\{[a-zA-Z0-9]+\\\\}"],n="\\\\$({"+r.join("})|\\\\$({")+"})",i=new RegExp(n,"g"),a=[],s=0,o=0;t=i.exec(e);){o=t.index,o>s&&a.push(e.substr(s,o-s));var u=t[0],c=u.replace(/[{}\\$]/g,"").replace(/^([a-zA-Z])([0-9]+)$/,"$1_$2");a.push({symbol:c,str:u}),s=t.index+u.length}return s<e.length&&a.push(e.substr(s)),{raw:e,parts:a}}function u(e,t){return t?"{"+i.truncatedLatexLabel(e,{bigCutoff:1e7,digits:8})+"}":i.truncatedPlainmathLabel(e,{bigCutoff:1e7,digits:8})}function c(e,t,i){for(var o=[],c=s(e.raw),l=0,p=e.parts;l<p.length;l++){var f=p[l];if("string"==typeof f)o.push(f);else{var h=r.Identifier(f.symbol).tryGetConcreteTree(a.defaultPolicy,t);if(h.valueType===n.Number){var d=h.asValue();if("number"==typeof d){o.push(u(d,c));continue}}else if(h.valueType===n.ListOfNumber&&h.args[i]){var d=h.args[i].asValue();if("number"==typeof d){o.push(u(d,c));continue}}c?o.push("{?}"):o.push("?")}}return o.join("")}Object.defineProperty(t,"__esModule",{value:!0}),t.isMathLabel=s,t.parse=o,t.interpolate=c}),define("math/getCLSymbolMap",["require","exports","underscore"],function(e,t,r){"use strict";function n(){var e={},t={},n={},i=[];for(var a in this.statements)if(this.statements.hasOwnProperty(a)){var s=this.statements[a];switch(s.type){case"Error":break;case"Regression":n[a]=[],i.push(a);break;default:var o=s.getLegalExports(this.policy);if(o){for(var u=0,c=o;u<c.length;u++){var l=c[u];s.exportPenalty>0?t[l]=a:e[l]=a}n[a]=r.difference(s.getDependencies(),s.getDummyDependencies(),o)}}}for(var p=0,f=i;p<f.length;p++){var a=f[p],s=this.statements[a],h=s.userData.residualVariable;h&&(t[h]=a);for(var d=s.getDependencies().slice(),m={},l=void 0;l=d.pop();)if(!m[l]){m[l]=!0;var g=e[l]||t[l];g?(d.push.apply(d,n[g]),n[a].push(l)):t[l]=a}}return{exportMap:e,weakExportMap:t,dependencyMap:n}}Object.defineProperty(t,"__esModule",{value:!0}),t.getCLSymbolMap=n}),define("math/policyFourFunction",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.singleExpression=e.singleExpression}return e.prototype.assignmentForbidden=function(e){return"ans"!==e.slice(0,3)},e.prototype.isValidSlider=function(e){return!1},e.prototype.sliderVariables=function(){return[]},e.prototype.graphingEnabled=function(){return!1},e.prototype.ansEnabled=function(){return!this.singleExpression},e.prototype.disabledFeatures=function(){return["Sum","Product","Integral","List","Derivative","Piecewise","Exponent","PercentOf"]},e}();t.PolicyFourFunction=new r({singleExpression:!1}),t.PolicySingleExpressionFourFunction=new r({singleExpression:!0})}),define("math/policyScientific",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.singleExpression=e.singleExpression}return e.prototype.assignmentForbidden=function(e){return this.singleExpression?"ans"!==e.slice(0,3):"tmp"===e.slice(0,3)},e.prototype.isValidSlider=function(e){return!1},e.prototype.sliderVariables=function(){return[]},e.prototype.graphingEnabled=function(){return!1},e.prototype.ansEnabled=function(){return!this.singleExpression},e.prototype.disabledFeatures=function(){return this.singleExpression?["Sum","Product","Integral","Derivative","Piecewise","PercentOf"]:["Sum","Product","Integral","Derivative","Piecewise"]},e}();t.PolicyScientific=new r({singleExpression:!1}),t.PolicySingleExpressionScientific=new r({singleExpression:!0})}),define("math/policyGraphing",["require","exports","./builtinframe","../graphing/graphmode"],function(e,t,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){}return e.prototype.assignmentForbidden=function(e){return"x"===e||"y"===e||"theta"===e||"tmp"===e.slice(0,3)||r.hasOwnProperty(e)},e.prototype.isValidSlider=function(e){return"x"===e||"y"===e||"ans"!==e.slice(0,3)&&!this.assignmentForbidden(e)},e.prototype.sliderVariables=function(e){var t=this;return-1!==e.indexOf("theta")&&(e=e.filter(function(e){return"r"!==e})),e.filter(function(e){return!t.assignmentForbidden(e)&&"ans"!==e.slice(0,3)})},e.prototype.graphingEnabled=function(){return!0},e.prototype.ansEnabled=function(){return!1},e.prototype.validRegressionParameter=function(e){return"x"!==e&&"y"!==e},e.prototype.validLHS=function(e){return"theta"!==e},e.prototype.unplottablePolarFunction=function(e,t){return"theta"===e&&-1!==t.indexOf("r")},e.prototype.validDoubleInequalitySymbol=function(e){return"x"===e||"y"===e},e.prototype.validDoubleInequalityVariables=function(e){return!(e.length>2)&&e.every(this.validDoubleInequalitySymbol)},e.prototype.validExpressionVariable=function(e){return"x"===e},e.prototype.validSolvedVariable=function(e){return"x"===e||"y"===e||"r"===e},e.prototype.validImplicitVariables=function(e){switch(e.length){case 1:return"x"===e[0]||"y"===e[0]||"r"===e[0];case 2:return"x"===e[0]&&"y"===e[1]||"y"===e[0]&&"x"===e[1]||"r"===e[0]&&"theta"===e[1]||"theta"===e[0]&&"r"===e[1];default:return!1}},e.prototype.graphableListVariables=function(e,t){return"x"===e||"y"===e||"r"===e||"x"===t||"y"===t},e.prototype.validParametricVariable=function(e){return"t"===e},e.prototype.validParametricVariables=function(e){return 1===e.length&&this.validParametricVariable(e[0])},e.prototype.validInequalityVariables=function(e){switch(e.length){case 1:return"x"===e[0]||"y"===e[0]||"r"===e[0];case 2:return this.validImplicitVariables(e);default:return!1}},e.prototype.validFirstColumnVariable=function(e){return"y"!==e&&"r"!==e&&"theta"!==e&&!e.match(/y_(\\d+)/)},e.prototype.complicatedPolarImplicit=function(e,t){return"theta"===e||"r"===e&&1!==t},e.prototype.constantGraphMode=function(e){return"x"===e?n.X:"r"===e?n.POLAR:n.Y},e.prototype.graphMode=function(e,t){return"y"===t?n.X:"x"===e?n.X:"r"===e&&"theta"===t?n.POLAR:n.Y},e.prototype.tableableAsConstant=function(e){return"x"!==e&&("r"!==e&&"theta"!==e)},e.prototype.implicitIndependent=function(e){return"x"},e.prototype.implicitDependency=function(e){return"y"===e?"x":"theta"===e?"r":"y"},e.prototype.graphableAsConstant=function(e){return"y"===e||"x"===e||"r"===e},e.prototype.disabledFeatures=function(){return[]},e}();t.PolicyGraphing=new i}),define("math/frameFourFunction",["require","math/parsenode/builtinfunction"],function(e){function t(e){var t={};return e.additionalFunctions&&-1!==e.additionalFunctions.indexOf("sqrt")&&(t.sqrt=r.sqrt),t}var r=e("math/parsenode/builtinfunction");return{getFrame:t}}),define("math/frameScientific",["require","math/builtinconstants","math/parsenode/builtinfunction"],function(e){function t(e,t){for(var r=0;r<e.length;r++){var n=e[r];if(!t.hasOwnProperty(n))throw new Error("Programming Error: key \'"+n+"\' does not exist in table. Must be one of:\\n"+Object.keys(t).join("\\n"))}}function r(e){var t={};return a.forEach(function(e){t[e]=n[e]}),s.forEach(function(e){t[e]=i[e]}),e.trigAngleMultiplier&&(t.trigAngleMultiplier=e.trigAngleMultiplier),t}var n=e("math/builtinconstants"),i=e("math/parsenode/builtinfunction"),a=["pi","e","trigAngleMultiplier"],s=["sqrt","nthroot","abs","ln","sin","cos","tan","log","arcsin","arccos","arctan","mean","round","stdev","stdevp","nCr","nPr","exp","factorial"];return t(a,n),t(s,i),{getFrame:r}}),define("math/frameSingleExpressionScientific",["require","math/builtinconstants","math/parsenode/builtinfunction"],function(e){function t(e,t){for(var r=0;r<e.length;r++){var n=e[r];if(!t.hasOwnProperty(n))throw new Error("Programming Error: key \'"+n+"\' does not exist in table. Must be one of:\\n"+Object.keys(t).join("\\n"))}}function r(e){var t={};return a.forEach(function(e){t[e]=n[e]}),s.forEach(function(e){t[e]=i[e]}),e.trigAngleMultiplier&&(t.trigAngleMultiplier=e.trigAngleMultiplier),t}var n=e("math/builtinconstants"),i=e("math/parsenode/builtinfunction"),a=["pi","e","trigAngleMultiplier"],s=["sqrt","nthroot","abs","ln","sin","cos","tan","log","arcsin","arccos","arctan","exp","factorial"];return t(a,n),t(s,i),{getFrame:r}}),define("math/frameGraphing",["require","math/builtinconstants","math/parsenode/builtinfunction"],function(e){function t(e,t){for(var r=0;r<e.length;r++){var n=e[r];if(!t.hasOwnProperty(n))throw new Error("Programming Error: key \'"+n+"\' does not exist in table. Must be one of:\\n"+Object.keys(t).join("\\n"))}}function r(e){var t,r={};for(t in n)n.hasOwnProperty(t)&&(r[t]=n[t]);for(t in i)i.hasOwnProperty(t)&&(!0===e.restrictedFunctions&&-1!==a.indexOf(t)||!1===e.distributions&&-1!==s.indexOf(t)||(r[t]=i[t]));return e.trigAngleMultiplier&&(r.trigAngleMultiplier=e.trigAngleMultiplier),e.globalRandomSeed&&(r.globalRandomSeed=e.globalRandomSeed),r}var n=e("math/builtinconstants"),i=e("math/parsenode/builtinfunction"),a=["csc","sec","cot","arccsc","arcsec","arccot","csch","sech","coth","arccsch","arcsech","arccoth","mad","cov"],s=["erf","ttest","tscore","ittest","normaldist","tdist","poissondist","binomialdist","pdf","cdf","random","histogram","dotplot","boxplot"];return t(a,i),t(s,i),{getFrame:r}}),define("math/context",["require","console","pjs","underscore","./plotter","parser","math/parsenode/constant","math/parsenode/seed","math/parsenode/functioncall","math/parsenode/image","math/parsenode/slider","math/parsenode/table","math/parsenode/tablecolumn","math/parsenode/freevariable","math/finddependencyorder","math/errormsg","graphing/graphmode","worker/workerconfig","./findIntersections","./interpolatedlabel","math/types","math/expression-types","math/expression-types","math/getCLSymbolMap","math/distribution-spec","math/maybe-rational","lib/number-to-latex","graphing/label","math/policyFourFunction","math/policyScientific","math/policyScientific","math/policyFourFunction","math/policyGraphing","math/frameFourFunction","math/frameFourFunction","math/frameScientific","math/frameSingleExpressionScientific","math/frameGraphing"],function(e){function t(e){\nvar t=e.rawTree.userData,r=e.rawTree.metaData;return t.cdf&&t.cdf.show&&r.distributionSpec}function r(e){var t=e.evaluationState.expression_type,r=e.rawTree.userData;return!(!r.clickableInfo||!r.clickableInfo.enabled)&&(!!e.rawTree.isImage||e.getGraphMode()!==b.XYPOINT_MOVABLE&&w(t))}function n(e,t){var r="id"+e;t=t||[];for(var n,i,a,s=0,o=t.length;s<o;s++)n=t[s],i=n[0],a=n[1],r+="::"+i+a;return r}var i=e("console"),a=e("pjs"),s=e("underscore"),o=e("./plotter").default,u=e("parser"),c=e("math/parsenode/constant"),l=e("math/parsenode/seed"),p=e("math/parsenode/functioncall"),f=e("math/parsenode/image"),h=e("math/parsenode/slider"),d=e("math/parsenode/table"),m=e("math/parsenode/tablecolumn"),g=e("math/parsenode/freevariable"),y=e("math/finddependencyorder"),v=e("math/errormsg"),b=e("graphing/graphmode"),x=e("worker/workerconfig"),_=e("./findIntersections").findIntersections,S=e("./interpolatedlabel"),M=e("math/types"),E=e("math/expression-types").ExpressionType,w=e("math/expression-types").isClickableExpressionType,D=e("math/getCLSymbolMap").getCLSymbolMap,T=e("math/distribution-spec"),P=e("math/maybe-rational").maybeRational,I=e("lib/number-to-latex").default,C=e("graphing/label"),O={fourFunction:e("math/policyFourFunction").PolicyFourFunction,scientific:e("math/policyScientific").PolicyScientific,singleExpressionScientific:e("math/policyScientific").PolicySingleExpressionScientific,singleExpressionFourFunction:e("math/policyFourFunction").PolicySingleExpressionFourFunction,graphing:e("math/policyGraphing").PolicyGraphing},A={fourFunction:e("math/frameFourFunction"),singleExpressionFourFunction:e("math/frameFourFunction"),scientific:e("math/frameScientific"),singleExpressionScientific:e("math/frameSingleExpressionScientific"),graphing:e("math/frameGraphing")};return a(function(e){function a(e,t){return e?"0"===e?G:"1"===e?U:u.parse(e,t):W}function w(e,t){if(e)return u.parse(e,t)}function L(e){return"ans"!==e.slice(0,3)}function N(e,t){var r,n=e.multiplyDefined,i=e.cyclicallyDefined;for(r in n)n.hasOwnProperty(r)&&(t[r]=v.multiplyDefined(r));for(r in i)i.hasOwnProperty(r)&&(t[r]=v.cycle(i[r].filter(L)))}function q(e,t,r){for(var n=0;n<r.length;n++){var i=r[n];e[i]||(e[i]=[]),e[i].push(t)}}function F(e,t,r){var n=e.variables;if(n&&n.length){for(var i={},a=0;a<n.length;a++)i[n[a]]=!0;for(var s in r)i[s]=!0;r=i}e.variables=t.sliderVariables(Object.keys(r))}function k(e,t,r){var n,i,a=e.evaluationState,s=e.rawTree,o=s.metaData.cdfMin,u=s.metaData.cdfMax,l=NaN,f=NaN,h={},d="Assignment"===s.type?s._expression:s,m=d&&d.metaData&&d.metaData.distributionSpec;if(o){var g=o.tryGetConcreteTree(t,r);for(g.isConstant&&(l=g.asValue()),n=g.getDependencies(),i=0;i<n.length;i++)h[n[i]]=!0}else l=-1/0;if(u){var y=u.tryGetConcreteTree(t,r);for(y.isConstant&&(f=y.asValue()),n=y.getDependencies(),i=0;i<n.length;i++)h[n[i]]=!0}else f=1/0;var b=!0,x=!0;if(isNaN(l)&&(b=!1,l=NaN),isNaN(f)&&(x=!1,f=NaN),b?x?l>f&&(b=!1,x=!1,a.error=v.cdfMaxLessThanMin().getError()):a.error=v.cdfMaxInvalid().getError():a.error=v.cdfMinInvalid().getError(),b&&x){var _=p("cdf",[d,c(l),c(f)]);a.cdf_evaluation=+_.tryGetConcreteTree(t,r).asValue()}var S=-1/0,M=1/0;if(m&&(m.discrete&&(S=0),"binomialdist"===m.symbol&&d.args&&d.args[0])){var E=d.args[0].asValue();isFinite(E)&&(M=E)}s.metaData.evaluatedCDFMin=l,s.metaData.evaluatedCDFMax=f,a.cdf_min_valid=b,a.cdf_max_valid=x,a.cdf_min_default=S,a.cdf_max_default=M,a.is_single_identifier=!1,F(a,t,h)}function V(e,t,r){var n,i=e.evaluationState,a=e.rawTree.metaData.fillOpacity,s={},o=!0;if(a){var u=a.tryGetConcreteTree(t,r);n=u.asValue();for(var c=u.getDependencies(),l=0;l<c.length;l++)s[c[l]]=!0}isFinite(n)||(o=!1,n=NaN),a||(o=!0),e.rawTree.metaData.computedFillOpacity=n,i.fill_opacity_valid=o,F(i,t,s)}function B(e,t,r){var n,i,a,s,o=e.evaluationState,u=e.rawTree,c=u.metaData.clickableAssignment,l=u.metaData.clickableExpression,p={};if(c&&"Identifier"===c.type){var f=r[c._symbol],h=f&&f.type;"Slider"!==h&&"Assignment"!==h||(a=c._symbol)}if(l){var d=l.tryGetConcreteTree(t,r);if(d.valueType===M.Number){var m=d.asValue();isNaN(m)||(s=I(m))}else if(d.valueType===M.ListOfNumber){var g=[],y=!0;for(i=0;i<d.args.length;i++){var v=d.args[i];if(v.valueType!==M.Number)return!1;var b=v.asValue();g.push(I(b)),isNaN(b)&&(y=!1)}y&&(s="\\\\left["+g.join(",")+"\\\\right]")}for(n=d.getDependencies(),i=0;i<n.length;i++)p[n[i]]=!0}a&&s&&(o.clickableinfo_identifier=a,o.clickableinfo_latex=C.identifierToLatex(a)+"="+s),o.clickableinfo_identifier_valid=!!a,o.clickableinfo_expression_valid=!!s,F(o,t,p)}function R(e,t,r){var n,i,a=e.evaluationState,s=e.rawTree,o=a.expression_type===E.POLAR?s.metaData.polarDomainMin:s.metaData.parametricDomainMin,u=a.expression_type===E.POLAR?s.metaData.polarDomainMax:s.metaData.parametricDomainMax,c=NaN,l=NaN,p=!1,f={};if(o){p=!0;var h=o.tryGetConcreteTree(t,r);for(h.isConstant&&(c=h.asValue()),n=h.getDependencies(),i=0;i<n.length;i++)f[n[i]]=!0}else c=0;if(u){p=!0;var d=u.tryGetConcreteTree(t,r);for(d.isConstant&&(l=d.asValue()),n=d.getDependencies(),i=0;i<n.length;i++)f[n[i]]=!0}else a.expression_type===E.PARAMETRIC?l=1:a.expression_type===E.POLAR&&(l=12*Math.PI/r.trigAngleMultiplier.asValue());var m=!0,g=!0;isFinite(c)||(m=!1,c=NaN),isFinite(l)||(g=!1,l=NaN),m?g?c>l&&(m=!1,g=!1,a.error=v.domainMaxLessThanMin().getError()):a.error=v.domainMaxInvalid().getError():a.error=v.domainMinInvalid().getError(),s.metaData.evaluatedDomainMin=c,s.metaData.evaluatedDomainMax=l,a.expression_type===E.POLAR&&(s.metaData.isExplicitDomain=p),a.domain_min_number=c,a.domain_max_number=l,a.domain_min_valid=m,a.domain_max_valid=g,a.expression_type===E.PARAMETRIC&&(delete f.t,F(a,t,f))}function j(e,t,r){var n,i,a=e.evaluationState,s=e.rawTree,o=s.metaData.vizAxisOffset,u=s.metaData.vizBreadth,c=NaN,l=NaN,p={};if(o){var f=o.tryGetConcreteTree(t,r);for(f.isConstant&&(c=f.asValue()),n=f.getDependencies(),i=0;i<n.length;i++)p[n[i]]=!0}else c=1;if(u){var h=u.tryGetConcreteTree(t,r);for(h.isConstant&&(l=h.asValue()),n=h.getDependencies(),i=0;i<n.length;i++)p[n[i]]=!0}else l=1;var d=!0,m=!0;isFinite(c)||(d=!1,c=NaN),isFinite(l)||(m=!1,l=NaN),d?m||(a.error=v.boxplotBreadthInvalid().getError()):a.error=v.boxplotOffsetInvalid().getError(),s.metaData.evaluatedAxisOffset=c,s.metaData.evaluatedBreadth=l,a.viz_values={axisOffset:c,breadth:l},a.viz_valids={axisOffset:d,breadth:m},F(a,t,p)}function z(e){return e.globalRandomSeed||[]}e.triggerGraphComputed=function(){},e.triggerStatusChange=function(){},e.triggerRemoveGraph=function(){},e.triggerRender=function(){},e.triggerRenderSlowly=function(){},e.triggerDidAddStatement=function(){},e.triggerDidRemoveStatement=function(){},e.triggerDidUpdateIntersections=function(){},e.init=function(){this.statements={},this.analysis={},this.currentStatus={},this.currentLabel={},this.unpublishedIds={},this.intersectIds={},this.dirtyExportedSymbolRoots={},this.dirtyStatementRoots={},this.markedRegressionDirty=!1,this.setEvaluationMode("graphing"),this.setRestrictedFunctions(!1),this.setFunctionDefinition(!0),this.invalidate()},e.getCLSymbolMap=D,e.processChangeSet=function(e){e.isCompleteState&&(this.invalidate(),this.statements={},this.currentLabel={}),e.viewState&&this.setViewState(e.viewState),e.hasOwnProperty("degreeMode")&&this.setDegreeMode(e.degreeMode),e.hasOwnProperty("globalRandomSeed")&&this.setGlobalRandomSeed(e.globalRandomSeed),e.hasOwnProperty("evaluationMode")&&this.setEvaluationMode(e.evaluationMode),e.hasOwnProperty("additionalFunctions")&&this.setAdditionalFunctions(e.additionalFunctions),e.hasOwnProperty("restrictedFunctions")&&this.setRestrictedFunctions(e.restrictedFunctions),e.hasOwnProperty("distributions")&&this.setDistributions(e.distributions),e.hasOwnProperty("functionDefinition")&&this.setFunctionDefinition(e.functionDefinition),e.hasOwnProperty("pointsOfInterest")&&this.setPointsOfInterest(e.pointsOfInterest),e.hasOwnProperty("plotSingleVariableImplicitEquations")&&this.setPlotSingleVariableImplicitEquations(e.plotSingleVariableImplicitEquations),e.hasOwnProperty("intersectIds")&&(this.intersectIds=e.intersectIds),this.processStatements(e),this.updateAnalysis(),e.hasOwnProperty("intersectId")&&this._updateIntersections(e.intersectId),this._publishAllStatuses(),this._computeAllLabels(),this._graphAllChanged(),this.unpublishedIds={},e.isCompleteState?this.triggerRenderSlowly():this.triggerRender()},e.processStatements=function(e){var t;if(e.statements)for(var r in e.statements){var n=e.statements[r];if(null===n){if(!e.isCompleteState&&this.statements.hasOwnProperty(r)&&(t=this.statements[r].getAllIds()),this.removeStatement(r),!e.isCompleteState&&t){for(var i=0;i<t.length;i++)this.triggerRemoveGraph(t[i]);this.triggerDidRemoveStatement(r)}}else this.addStatement(n),e.isCompleteState||this.triggerDidAddStatement(n)}},e.setViewState=function(e){if(!s.isEqual(e,this.viewState)){this.viewState=e;for(var t in this.statements)this.statements.hasOwnProperty(t)&&(this.unpublishedIds[t]=!0)}},e.getViewState=function(){if(this.viewState){var e=Object.create(this.viewState);return this.parent_frame&&this.parent_frame.trigAngleMultiplier?e.trigAngleMultiplier=this.parent_frame.trigAngleMultiplier.asValue():e.trigAngleMultiplier=1,e}},e.setDegreeMode=function(e){this.use_degrees=e,this.invalidate()},e.setGlobalRandomSeed=function(e){this.globalRandomSeedString=e,this.parent_frame.globalRandomSeed=l(e),this.dirtyExportedSymbolRoots.globalRandomSeed=!0},e.setEvaluationMode=function(e){this.evaluationMode=e,this.policy=O[e],this.invalidate()},e.setAdditionalFunctions=function(e){this.additionalFunctions=e,this.invalidate()},e.setRestrictedFunctions=function(e){this.restrictedFunctions=e,this.invalidate()},e.setDistributions=function(e){this.distributions=e,this.invalidate()},e.setFunctionDefinition=function(e){this.functionDefinition=e,this.invalidate()},e.setPointsOfInterest=function(e){e!==x.pointsOfInterest&&(x.pointsOfInterest=e,this.invalidate())},e.setPlotSingleVariableImplicitEquations=function(e){e!==x.plotSingleVariableImplicitEquations&&(x.plotSingleVariableImplicitEquations=e,this.invalidate())},e._publishAllStatuses=function(){var e={},t=this.currentStatus;this.currentStatus={};for(var r in this.unpublishedIds)if(this.analysis.hasOwnProperty(r)){var n=this.analysis[r].evaluationState;JSON.stringify(n)!==JSON.stringify(t[r])&&(e[r]=n),this.currentStatus[r]=n}this.triggerStatusChange(e)},e._computeAllLabels=function(){for(var e in this.currentLabel){var t=this.statements[e];if(t){var r=t.tryGetConcreteTree(this.policy,this.frame),n=1;r.valueType===M.ListOfPoint&&(n=r.args.length);for(var i=[],a=0;a<n;a++)i.push(S.interpolate(this.currentLabel[e],this.frame,a));s.isEqual(i,t.computedLabels)||(t.computedLabels=i,this.unpublishedIds[e]=!0)}}},e._graphAllChanged=function(){var e=this.getViewState();if(o.validateViewState(e)){for(var t in this.unpublishedIds)if(this.analysis.hasOwnProperty(t)){var r=this.analysis[t],n=r.evaluationState.expression_type,i=n===E.SINGLE_POINT||n===E.POINT_LIST;if(r.rawTree.isTable)for(var a=r.graph(e),u=r.rawTree.getAllIds(),c=0;c<u.length;c++)a[u[c]]?this.triggerGraphComputed(u[c],a[u[c]]):this.triggerRemoveGraph(u[c]);else r.evaluationState.is_graphable&&(r.rawTree.userData.shouldGraph||r.rawTree.userData.showLabel&&i)?(this.triggerGraphComputed(t,r.graph(e)),this.intersectIds.hasOwnProperty(t)&&this._updateIntersections(t)):this.triggerRemoveGraph(t)}if(s.keys(this.unpublishedIds).length)for(var l in this.intersectIds)this.unpublishedIds.hasOwnProperty(l)||this.intersectIds.hasOwnProperty(l)&&this._updateIntersections(l)}},e._updateIntersections=function(e){if(this.viewState){if(!this.analysis[e]||!this.analysis[e].shouldIntersect())return void this.triggerDidUpdateIntersections(e,[]);var t=_(this.analysis,this.viewState,e);this.triggerDidUpdateIntersections(e,t)}},e.getDisabledFeatures=function(){var e,t=this.policy.disabledFeatures();e=!1===this.functionDefinition?t.concat("FunctionDefinition"):t;var r=this.additionalFunctions||[];return e=e.filter(function(e){return("Exponent"!==e||-1===r.indexOf("exponent"))&&("PercentOf"!==e||-1===r.indexOf("percent"))}.bind(this))};var G=c(P(0,1)),U=c(P(1,1)),W=c(NaN);e.addStatement=function(e){if(e){var t=e.id;this.markExportsDirty(t),this.markAsDirtyRoot(t);var r={index:this.policy.ansEnabled()?e.index:void 0,disabledFeatures:this.getDisabledFeatures(),seedPrefix:n(t)},i={};switch(e.type){case"table":var s=[];this.statements.hasOwnProperty(t)&&(s=this.statements[t].getAllIds()),e.shouldGraph=!0;for(var o,l,p,g=e.columns,y=[],v=0,b=0;b<g.length;b++)v=Math.max(g[b].values.length,v);for(var x=0;x<g.length;x++){r.seedPrefix=n(t,[["tr",0],["tc",x]]),o=u.parse(g[x].latex,r),l=[];for(var _=-1,M=0;M<g[x].values.length;M++)g[x].values[M].replace(/\\\\space/g,"").match(/\\S/)?(r.seedPrefix=n(t,[["tr",M+1],["tc",x]]),l.push(u.parse(g[x].values[M],r)),_=M):l.push(c(NaN));l=l.slice(0,_+1),p=m(o,v,l),p.id=g[x].id,p.header&&(p.header.userData=g[x]),p.header&&(p.header.metaData={}),y.push(p)}this.statements[t]=d(y);var E=this,D=this.statements[t].getAllIds();s.forEach(function(e){-1===D.indexOf(e)&&E.triggerRemoveGraph(e)});break;case"image":var P="-\\\\trigAngleMultiplier*\\\\arctan(\\\\sin("+e.angle+"),\\\\cos("+e.angle+"))";r.seedPrefix=n(t,[["ic",t]]);var I=u.parse(e.center,r);r.seedPrefix=n(t,[["ia",t]]);var C=u.parse(P,r);r.seedPrefix=n(t,[["iw",t]]);var O=u.parse(e.width,r);r.seedPrefix=n(t,[["ih",t]]);var A=u.parse(e.height,r);r.seedPrefix=n(t,[["io",t]]);var L=u.parse(e.opacity,r);this.statements[t]=f({center:I,radianAngle:C,width:O,height:A,opacity:L});break;default:if(this.statements[t]=u.parse(e.latex,r),this.statements[t].shouldPromoteToSlider(this.policy)){var N=e.slider;r.seedPrefix=n(t,[["lm",t]]);var q=w(N&&N.min,r);r.seedPrefix=n(t,[["lM",t]]);var F=w(N&&N.max,r);r.seedPrefix=n(t,[["ls",t]]);var k=w(N&&N.step,r);this.statements[t]=h(this.statements[t],{sliderMin:q,sliderMax:F,sliderStep:k})}else if(e.polarDomain&&e.polarDomain.min&&(r.seedPrefix=n(t,[["lm",t]]),i.polarDomainMin=a(e.polarDomain.min,r)),e.polarDomain&&e.polarDomain.max&&(r.seedPrefix=n(t,[["lM",t]]),i.polarDomainMax=a(e.polarDomain.max,r)),e.parametricDomain&&e.parametricDomain.min&&(r.seedPrefix=n(t,[["lm",t]]),i.parametricDomainMin=a(e.parametricDomain.min,r)),e.parametricDomain&&e.parametricDomain.max&&(r.seedPrefix=n(t,[["lM",t]]),i.parametricDomainMax=a(e.parametricDomain.max,r)),e.vizProps&&(e.vizProps.axisOffset&&(r.seedPrefix=n(t,[["vo",t]]),i.vizAxisOffset=a(e.vizProps.axisOffset,r)),e.vizProps.breadth&&(r.seedPrefix=n(t,[["vb",t]]),i.vizBreadth=a(e.vizProps.breadth,r))),e.fillOpacity&&(r.seedPrefix=n(t,[["fo",t]]),i.fillOpacity=w(e.fillOpacity,r)),e.cdf&&e.cdf.show){var V=T.parseToplevelFunction(e.latex,r);V&&"distribution"===V.type&&(i.distributionSpec=V,r.seedPrefix=n(t,[["lm",t]]),i.cdfMin=w(e.cdf.min,r),r.seedPrefix=n(t,[["lM",t]]),i.cdfMax=w(e.cdf.max,r))}}if(e.clickableInfo&&e.clickableInfo.enabled&&(i.clickableAssignment=w(e.clickableInfo.assignment,r),i.clickableExpression=w(e.clickableInfo.expression,r)),this.statements[t].userData=e,this.statements[t].metaData=i,e.label){var B=this.currentLabel[t];B&&B.raw===e.label||(this.currentLabel[t]=S.parse(e.label))}else delete this.currentLabel[t]}},e.removeStatement=function(e){var t=this.statements[e];if(t){if(this.markExportsDirty(e),t.isTable){var r=this;t.getAllIds().forEach(function(e){r.triggerRemoveGraph(e)})}else this.triggerRemoveGraph(e);delete this.currentLabel[e],delete this.statements[e],delete this.analysis[e]}},e.invalidate=function(){for(var e in this.statements)this.statements.hasOwnProperty(e)&&this.markAsDirtyRoot(e);this.currentStatus={},this.analysis={},this.parent_frame=A[this.evaluationMode].getFrame({restrictedFunctions:this.restrictedFunctions,distributions:this.distributions,additionalFunctions:this.additionalFunctions,trigAngleMultiplier:c(this.use_degrees?Math.PI/180:P(1,1)),globalRandomSeed:l(this.globalRandomSeedString||"")}),this.frame=Object.create(this.parent_frame),this.lastFrame=Object.create(this.parent_frame),this.regressionFrame=Object.create(this.parent_frame)},e.markExportsDirty=function(e){if(this.statements[e]){this.statements[e].isRegression&&(this.markedRegressionDirty=!0);for(var t=this.statements[e].getLegalExports(this.policy),r=0;r<t.length;r++)this.dirtyExportedSymbolRoots[t[r]]=!0}},e.markAsDirtyRoot=function(e){this.dirtyStatementRoots[e]=!0},e.getFrame=function(){return this.updateAnalysis(),this.frame},e.getAnalysis=function(){return this.updateAnalysis(),this.analysis},e.getStatus=function(e){if(this.updateAnalysis(),this.analysis[e])return this.analysis[e].status},e.getEvaluationState=function(e){if(this.updateAnalysis(),this.analysis[e])return this.analysis[e].evaluationState},e._updateRegressions=function(e){var t,r=this.frame,n=this.lastFrame,i=this.regressionFrame,a=[];for(t in e)e.hasOwnProperty(t)&&e[t].isRegression&&a.push(t);var s=this;a.sort(function(e,t){var r=s.statements[e].userData&&s.statements[e].userData.residualVariable,n=s.statements[t].userData&&s.statements[t].userData.residualVariable;return r&&!n?-1:n&&!r?1:0});var o=y(this.policy,e,a);N(o,i);for(var u=o.resolved,c={},l=0;l<u.length;l++)if(t=u[l],this.statements[t].isRegression)this.analysis[t]=e[t].analyze(this.policy,i,r,n,c),this.analysis[t].exportTo(this.policy,r),delete e[t];else{var p=e[t].tryGetConcreteTree(this.policy,i);e[t].exportTo(this.policy,p,i),c[t]={rawTree:e[t],concreteTree:p}}},e.buildSymbolToExpressionDirtyMap=function(){var e={};for(var t in this.statements)if(this.statements.hasOwnProperty(t)){var r=this.statements[t],n=r.metaData;q(e,t,r.getDependencies()),q(e,t,r.getLegalExports(this.policy)),n.polarDomainMin&&q(e,t,n.polarDomainMin.getDependencies()),n.polarDomainMax&&q(e,t,n.polarDomainMax.getDependencies()),n.parametricDomainMin&&q(e,t,n.parametricDomainMin.getDependencies()),n.parametricDomainMax&&q(e,t,n.parametricDomainMax.getDependencies()),n.vizBinWidth&&q(e,t,n.vizBinWidth.getDependencies()),n.vizBinCenter&&q(e,t,n.vizBinCenter.getDependencies()),n.vizAxisOffset&&q(e,t,n.vizAxisOffset.getDependencies()),n.vizBreadth&&q(e,t,n.vizBreadth.getDependencies()),n.cdfMin&&q(e,t,n.cdfMin.getDependencies()),n.cdfMax&&q(e,t,n.cdfMax.getDependencies()),n.fillOpacity&&q(e,t,n.fillOpacity.getDependencies()),n.clickableAssignment&&q(e,t,n.clickableAssignment.getDependencies()),n.clickableExpression&&q(e,t,n.clickableExpression.getDependencies())}return e},e.getDirtyIdsAndSymbols=function(e){var t,r,n,i={},a={},s=this.markedRegressionDirty,o=[],u=[];for(t in this.dirtyStatementRoots)this.dirtyStatementRoots[t]&&(a[t]=!0,o.push(t));for(n in this.dirtyExportedSymbolRoots)this.dirtyExportedSymbolRoots[n]&&(i[n]=!0,u.push(n));for(;o.length||u.length;){for(;o.length;){t=o.pop();var c=this.statements[t];if(c){c.isRegression&&(s=!0);var l=c.getLegalExports(this.policy);for(r=0;r<l.length;r++)n=l[r],i[n]||(i[n]=!0,u.push(n))}}for(;u.length;){n=u.pop();var p=e[n];if(p)for(r=0;r<p.length;r++)t=p[r],a[t]||(a[t]=!0,o.push(t))}}return{ids:a,symbols:i,hasDirtyRegression:s}},e.updateAnalysis=function(){var e,n,i,a=this.buildSymbolToExpressionDirtyMap(),s=this.getDirtyIdsAndSymbols(a);if(s.hasDirtyRegression){i={};for(e in this.statements)this.statements[e]&&(i[e]=this.statements[e]);this.frame=Object.create(this.parent_frame),this.regressionFrame=Object.create(this.parent_frame)}else{var o=s.ids;i={};for(e in o)this.statements[e]&&(i[e]=this.statements[e]);var u=s.symbols;for(n in u)u[n]&&(delete this.frame[n],delete this.regressionFrame[n])}for(e in i)i[e]&&(this.unpublishedIds[e]=!0);this.markedRegressionDirty=!1,this.dirtyExportedSymbolRoots={},this.dirtyStatementRoots={};var c=this.analysis,l=this.frame;"graphing"===this.evaluationMode&&this._updateRegressions(i);var p=y(this.policy,i);N(p,l);for(var f=p.resolved,h=0;h<f.length;h++)switch(e=f[h],this.evaluationMode){case"fourFunction":case"singleExpressionFourFunction":c[e]=this.statements[e].analyzeFourFunction(this.policy,l,c),c[e].exportTo(this.policy,l);break;case"scientific":c[e]=this.statements[e].analyzeScientific(this.policy,l,c),c[e].exportTo(this.policy,l);break;case"singleExpressionScientific":c[e]=this.statements[e].analyzeSingleExpressionScientific(this.policy,l,c),c[e].exportTo(this.policy,l);break;case"graphing":if(l.r){var d=Object.create(l);if(d.r=g("r"),c[e]=this.statements[e].analyze(this.policy,d,c),c[e].getGraphMode()===b.POLAR){c[e].exportTo(this.policy,l);continue}}c[e]=this.statements[e].analyze(this.policy,l,c),c[e].exportTo(this.policy,l)}if("graphing"===this.evaluationMode)for(h=0;h<f.length;h++){e=f[h];var m=c[e],v=m.evaluationState.expression_type;v!==E.POLYGON&&v!==E.PARAMETRIC||V(c[e],this.policy,l),r(c[e])&&B(c[e],this.policy,l),v===E.PARAMETRIC||v===E.POLAR?R(c[e],this.policy,l):v===E.BOXPLOT?j(c[e],this.policy,l):t(c[e])&&k(c[e],this.policy,l)}z(a).forEach(function(e){c[e].evaluationState.depends_on_random_seed=!0}),this.lastFrame=Object.create(this.parent_frame);for(n in l)l.hasOwnProperty(n)&&(this.lastFrame[n]=l[n])},e.evaluateOnce=function(e){return i.log("Deprecated console.evaluateOnce - this should not run in production code"),this.analysis[e].concreteTree.asValue()},e.compile=function(e){return i.log("Deprecated console.compile - this should not run in production code"),this.analysis[e].concreteTree.getCompiledFunction()},e.evalStrings=function(e){return i.log("Deprecated console.evalStrings - this should not run in production code"),this.analysis[e].concreteTree.getEvalStrings()}})}),define("worker/workercore",["require","math/context","math/functions"],function(e){var t=e("math/context"),r=e("math/functions");return function(e){var n=t();return n.triggerGraphComputed=function(t,n){r.dehydrateGraphData(n),e("graphComputed",{id:t,graphData:n})},n.triggerDidUpdateIntersections=function(t,r){e("updateIntersections",{id:t,intersections:r})},n.triggerRender=function(){e("render")},n.triggerRenderSlowly=function(){e("renderSlowly")},n.triggerRemoveGraph=function(t){e("removeGraph",t)},n.triggerStatusChange=function(t){e("statusChange",t)},{processChangeSet:function(t){n.processChangeSet(t),e("processChangeSet",t)}}}}),define("worker/worker",["require","worker/workercore","console"],function(e){var t=e("worker/workercore"),r={};e("console").log=function(e){self.postMessage({log:JSON.stringify(e)})};var n=self;n.window=n,n.onmessage=function(e){var i=e.data&&e.data.connectionId;if(i)if("destroy"===e.data.originalMessage.type)delete r[i];else{var a=r[i];a||(a=t(function(e,t){n.postMessage({connectionId:i,originalMessage:{type:e,payload:t}})}),r[i]=a),a.processChangeSet(e.data.originalMessage)}},n.loadMessageQueue&&(n.loadMessageQueue.forEach(function(e){n.onmessage(e)}),delete n.loadMessageQueue)}),"undefined"==typeof window&&(void 0===requirejs&&(importScripts("../vendor/require.js"),importScripts("config.js")),self.loadMessageQueue=[],self.onmessage=function(e){self.loadMessageQueue.push(e)},requirejs(["worker/worker"])),define("toplevel/worker",function(){});\n'
    }), define("worker_src", ["require", "text!worker_src_underlying"], function(e) {
        return e("text!worker_src_underlying")
    }), define("worker/create_worker_url", ["require", "worker_src"], function(e) {
        var t = e("worker_src");
        return function() {
            if (!t.length) return "/assets/generated/combined/toplevel/worker.js";
            var e;
            try {
                e = new Blob([t], {
                    type: "application/javascript"
                })
            } catch (i) {
                try {
                    var n = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder || window.MSBlobBuilder,
                        r = new n;
                    r.append(t), e = r.getBlob("application/javascript")
                } catch (e) {
                    return null
                }
            }
            return (window.URL || window.webkitURL).createObjectURL(e)
        }
    }), define("math/finddependencyorder", ["require", "math/builtinframe", "underscore"], function(e) {
        function t(e, t, i) {
            function o(e) {
                y[e] = y[e] || {};
                var n, r = y[e];
                r.id = e, r.index = v, r.lowlink = v, b.push(r), r.instack = !0, v++;
                for (var i = t[e].getDependencies(), l = 0; l < i.length; l++) {
                    var c = i[l];
                    if (f.hasOwnProperty(c))
                        for (var u = f[c], p = 0; p < u.length; p++) {
                            var d = u[p];
                            y.hasOwnProperty(d) ? (n = y[d], n.instack && (r.lowlink = Math.min(r.lowlink, n.index))) : (o(d), n = y[d], r.lowlink = Math.min(r.lowlink, n.lowlink))
                        }
                }
                if (r.lowlink === r.index)
                    if (n = b.pop(), n.instack = !1, n === r) a(r);
                    else {
                        for (var h = [n];;)
                            if (n = b.pop(), n.instack = !1, h.push(n), n === r) break;
                        s(h)
                    }
            }

            function a(e) {
                x.push(e.id)
            }

            function s(n) {
                var i, o, a = [];
                for (o = n.length - 1; o >= 0; o--) {
                    i = n[o];
                    var s = t[i.id].getLegalExports(e);
                    Array.prototype.push.apply(a, s), a.push(s[0]), x.push(i.id)
                }
                for (a = r.unique(a), a.sort(), o = 0; o < a.length; o++) g[a[o]] = a
            }
            var l, c, u, p, d, h = [],
                f = {},
                m = {},
                g = {},
                y = {},
                v = 0,
                b = [],
                x = [];
            if (!i) {
                i = [];
                for (l in t) t.hasOwnProperty(l) && i.push(l)
            }
            for (l in t)
                if (t.hasOwnProperty(l)) {
                    for (d = t[l].exportPenalty || 0; h.length < d + 1;) h.push([]);
                    h[d].push(l)
                } for (d = 0; d < h.length; d++) {
                var w = {};
                for (c = 0; c < h[d].length; c++) {
                    l = h[d][c];
                    var _ = t[l].getLegalExports(e);
                    for (u = 0; u < _.length; u++) p = _[u], n[p] || f[p] || (w[p] = w[p] || [], w[p].push(l), w[p].length > 1 && (m[p] = !0))
                }
                for (p in w) f[p] = w[p]
            }
            for (c = 0; c < i.length; c++) y.hasOwnProperty(i[c]) || o(i[c]);
            return {
                resolved: x,
                multiplyDefined: m,
                cyclicallyDefined: g
            }
        }
        var n = e("math/builtinframe"),
            r = e("underscore");
        return t
    }), define("math/findIntersections", ["require", "graphing/graphmode", "./plotter", "parsenodes", "./distance"], function(e) {
        function t(e) {
            for (var t = [], n = 0; n < e; n++) t[n] = {
                x: [],
                y: [],
                intersects: []
            };
            return t
        }

        function n(e, t, n, r) {
            return n === u.X && r === u.X || n === u.Y && r === u.Y ? function(n) {
                return t(n) - e(n)
            } : (n === u.X && r === u.Y || n === u.Y && r === u.X) && function(n) {
                return n - t(e(n))
            }
        }

        function r(e) {
            e instanceof d.SolvedEquation ? e = e._expression : e instanceof d.OptimizedRegression && (e = e.model);
            var t = [],
                n = [];
            return e instanceof d.DoubleInequality ? d.List.eachArgs(e._expressions, function(e) {
                t.push(e[0].getCompiledFunction()), n.push(e[0].isConstant && e[1].isNaN()), t.push(e[1].getCompiledFunction()), n.push(e[1].isConstant && e[1].isNaN())
            }) : d.List.wrap(e).eachElement(function(e) {
                t.push(e.getCompiledFunction()), n.push(e.isConstant && e.isNaN())
            }), {
                functions: t,
                skipIntersecting: n
            }
        }

        function i(e, t) {
            var n = [];
            for (var i in e)
                if (e.hasOwnProperty(i) && String(i) !== String(t) && e[i].shouldIntersect()) {
                    var o = e[i],
                        a = r(o.concreteTree);
                    n.push({
                        id: i,
                        graphMode: o.getGraphMode(),
                        functions: a.functions,
                        skipIntersecting: a.skipIntersecting
                    })
                } return n
        }

        function o(e, t) {
            e.intersects = Array(e.x.length);
            for (var n = 0; n < e.x.length; n++) e.intersects[n] = t
        }

        function a(e, t) {
            if (t === u.X) {
                var n = e.y;
                e.y = e.x, e.x = n
            }
        }

        function s(e, t) {
            Array.prototype.push.apply(e.x, t.x), Array.prototype.push.apply(e.y, t.y), Array.prototype.push.apply(e.intersects, t.intersects)
        }

        function l(e, t, n) {
            var r = p.sampleXY(e, t),
                i = r.poi.zeros,
                o = r.poi.extrema,
                a = [],
                s = 0,
                l = 0;
            for (s = 0; s < i.x.length; s++) {
                for (; l < o.x.length && o.x[l] < i.x[s]; l++) h.approx(o.y[l], 0) && a.push(o.x[l]);
                a.push(i.x[s])
            }
            for (; l < o.x.length; l++) h.approx(o.y[l], 0) && a.push(o.x[l]);
            return {
                x: a,
                y: a.map(n)
            }
        }

        function c(e, c, u) {
            var d = e[u],
                h = d.getGraphInfo(),
                m = d.getGraphMode(),
                g = r(d.concreteTree),
                y = t(g.functions.length),
                v = i(e, u);
            if (!v) return y;
            for (var b = 0, x = 0; x < v.length; x++)
                for (var w = v[x], _ = 0; _ < g.functions.length; _++)
                    if (!g.skipIntersecting[_])
                        for (var S = g.functions[_].fn, E = p.computeDomain(c, h, S), M = 0; M < w.functions.length; M++)
                            if (!v[x].skipIntersecting[M]) {
                                var I = w.functions[M].fn,
                                    T = n(S, I, m, w.graphMode);
                                if (T) {
                                    var C = l(T, E, S);
                                    if ((b += C.x.length) > f) return t(g.functions.length);
                                    o(C, w.id), a(C, m), s(y[_], C)
                                }
                            } return y
        }
        var u = e("graphing/graphmode"),
            p = e("./plotter").default,
            d = e("parsenodes"),
            h = e("./distance"),
            f = 100;
        return {
            findIntersections: c,
            findIndicatorZeros: l
        }
    }), define("math/getCLSymbolMap", ["require", "exports", "underscore"], function(e, t, n) {
        "use strict";

        function r() {
            var e = {},
                t = {},
                r = {},
                i = [];
            for (var o in this.statements)
                if (this.statements.hasOwnProperty(o)) {
                    var a = this.statements[o];
                    switch (a.type) {
                        case "Error":
                            break;
                        case "Regression":
                            r[o] = [], i.push(o);
                            break;
                        default:
                            var s = a.getLegalExports(this.policy);
                            if (s) {
                                for (var l = 0, c = s; l < c.length; l++) {
                                    var u = c[l];
                                    a.exportPenalty > 0 ? t[u] = o : e[u] = o
                                }
                                r[o] = n.difference(a.getDependencies(), a.getDummyDependencies(), s)
                            }
                    }
                } for (var p = 0, d = i; p < d.length; p++) {
                var o = d[p],
                    a = this.statements[o],
                    h = a.userData.residualVariable;
                h && (t[h] = o);
                for (var f = a.getDependencies().slice(), m = {}, u = void 0; u = f.pop();)
                    if (!m[u]) {
                        m[u] = !0;
                        var g = e[u] || t[u];
                        g ? (f.push.apply(f, r[g]), r[o].push(u)) : t[u] = o
                    }
            }
            return {
                exportMap: e,
                weakExportMap: t,
                dependencyMap: r
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.getCLSymbolMap = r
    }), define("math/policyFourFunction", ["require", "exports"], function(e, t) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var n = function() {
            function e(e) {
                this.singleExpression = e.singleExpression
            }
            return e.prototype.assignmentForbidden = function(e) {
                return "ans" !== e.slice(0, 3)
            }, e.prototype.isValidSlider = function(e) {
                return !1
            }, e.prototype.sliderVariables = function() {
                return []
            }, e.prototype.graphingEnabled = function() {
                return !1
            }, e.prototype.ansEnabled = function() {
                return !this.singleExpression
            }, e.prototype.disabledFeatures = function() {
                return ["Sum", "Product", "Integral", "List", "Derivative", "Piecewise", "Exponent", "PercentOf"]
            }, e
        }();
        t.PolicyFourFunction = new n({
            singleExpression: !1
        }), t.PolicySingleExpressionFourFunction = new n({
            singleExpression: !0
        })
    }), define("math/policyScientific", ["require", "exports"], function(e, t) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var n = function() {
            function e(e) {
                this.singleExpression = e.singleExpression
            }
            return e.prototype.assignmentForbidden = function(e) {
                return this.singleExpression ? "ans" !== e.slice(0, 3) : "tmp" === e.slice(0, 3)
            }, e.prototype.isValidSlider = function(e) {
                return !1
            }, e.prototype.sliderVariables = function() {
                return []
            }, e.prototype.graphingEnabled = function() {
                return !1
            }, e.prototype.ansEnabled = function() {
                return !this.singleExpression
            }, e.prototype.disabledFeatures = function() {
                return this.singleExpression ? ["Sum", "Product", "Integral", "Derivative", "Piecewise", "PercentOf"] : ["Sum", "Product", "Integral", "Derivative", "Piecewise"]
            }, e
        }();
        t.PolicyScientific = new n({
            singleExpression: !1
        }), t.PolicySingleExpressionScientific = new n({
            singleExpression: !0
        })
    }), define("math/frameFourFunction", ["require", "math/parsenode/builtinfunction"], function(e) {
        function t(e) {
            var t = {};
            return e.additionalFunctions && -1 !== e.additionalFunctions.indexOf("sqrt") && (t.sqrt = n.sqrt), t
        }
        var n = e("math/parsenode/builtinfunction");
        return {
            getFrame: t
        }
    }), define("math/frameScientific", ["require", "math/builtinconstants", "math/parsenode/builtinfunction"], function(e) {
        function t(e, t) {
            for (var n = 0; n < e.length; n++) {
                var r = e[n];
                if (!t.hasOwnProperty(r)) throw new Error("Programming Error: key '" + r + "' does not exist in table. Must be one of:\n" + Object.keys(t).join("\n"))
            }
        }

        function n(e) {
            var t = {};
            return o.forEach(function(e) {
                t[e] = r[e]
            }), a.forEach(function(e) {
                t[e] = i[e]
            }), e.trigAngleMultiplier && (t.trigAngleMultiplier = e.trigAngleMultiplier), t
        }
        var r = e("math/builtinconstants"),
            i = e("math/parsenode/builtinfunction"),
            o = ["pi", "e", "trigAngleMultiplier"],
            a = ["sqrt", "nthroot", "abs", "ln", "sin", "cos", "tan", "log", "arcsin", "arccos", "arctan", "mean", "round", "stdev", "stdevp", "nCr", "nPr", "exp", "factorial"];
        return t(o, r), t(a, i), {
            getFrame: n
        }
    }), define("math/frameSingleExpressionScientific", ["require", "math/builtinconstants", "math/parsenode/builtinfunction"], function(e) {
        function t(e, t) {
            for (var n = 0; n < e.length; n++) {
                var r = e[n];
                if (!t.hasOwnProperty(r)) throw new Error("Programming Error: key '" + r + "' does not exist in table. Must be one of:\n" + Object.keys(t).join("\n"))
            }
        }

        function n(e) {
            var t = {};
            return o.forEach(function(e) {
                t[e] = r[e]
            }), a.forEach(function(e) {
                t[e] = i[e]
            }), e.trigAngleMultiplier && (t.trigAngleMultiplier = e.trigAngleMultiplier), t
        }
        var r = e("math/builtinconstants"),
            i = e("math/parsenode/builtinfunction"),
            o = ["pi", "e", "trigAngleMultiplier"],
            a = ["sqrt", "nthroot", "abs", "ln", "sin", "cos", "tan", "log", "arcsin", "arccos", "arctan", "exp", "factorial"];
        return t(o, r), t(a, i), {
            getFrame: n
        }
    }), define("math/frameGraphing", ["require", "math/builtinconstants", "math/parsenode/builtinfunction"], function(e) {
        function t(e, t) {
            for (var n = 0; n < e.length; n++) {
                var r = e[n];
                if (!t.hasOwnProperty(r)) throw new Error("Programming Error: key '" + r + "' does not exist in table. Must be one of:\n" + Object.keys(t).join("\n"))
            }
        }

        function n(e) {
            var t, n = {};
            for (t in r) r.hasOwnProperty(t) && (n[t] = r[t]);
            for (t in i) i.hasOwnProperty(t) && (!0 === e.restrictedFunctions && -1 !== o.indexOf(t) || !1 === e.distributions && -1 !== a.indexOf(t) || (n[t] = i[t]));
            return e.trigAngleMultiplier && (n.trigAngleMultiplier = e.trigAngleMultiplier), e.globalRandomSeed && (n.globalRandomSeed = e.globalRandomSeed), n
        }
        var r = e("math/builtinconstants"),
            i = e("math/parsenode/builtinfunction"),
            o = ["csc", "sec", "cot", "arccsc", "arcsec", "arccot", "csch", "sech", "coth", "arccsch", "arcsech", "arccoth", "mad", "cov"],
            a = ["erf", "ttest", "tscore", "ittest", "normaldist", "tdist", "poissondist", "binomialdist", "pdf", "cdf", "random", "histogram", "dotplot", "boxplot"];
        return t(o, i), t(a, i), {
            getFrame: n
        }
    }), define("math/context", ["require", "console", "pjs", "underscore", "./plotter", "parser", "math/parsenode/constant", "math/parsenode/seed", "math/parsenode/functioncall", "math/parsenode/image", "math/parsenode/slider", "math/parsenode/table", "math/parsenode/tablecolumn", "math/parsenode/freevariable", "math/finddependencyorder", "math/errormsg", "graphing/graphmode", "worker/workerconfig", "./findIntersections", "./interpolatedlabel", "math/types", "math/expression-types", "math/expression-types", "math/getCLSymbolMap", "math/distribution-spec", "math/maybe-rational", "lib/number-to-latex", "graphing/label", "math/policyFourFunction", "math/policyScientific", "math/policyScientific", "math/policyFourFunction", "math/policyGraphing", "math/frameFourFunction", "math/frameFourFunction", "math/frameScientific", "math/frameSingleExpressionScientific", "math/frameGraphing"], function(e) {
        function t(e) {
            var t = e.rawTree.userData,
                n = e.rawTree.metaData;
            return t.cdf && t.cdf.show && n.distributionSpec
        }

        function n(e) {
            var t = e.evaluationState.expression_type,
                n = e.rawTree.userData;
            return !(!n.clickableInfo || !n.clickableInfo.enabled) && (!!e.rawTree.isImage || e.getGraphMode() !== b.XYPOINT_MOVABLE && M(t))
        }

        function r(e, t) {
            var n = "id" + e;
            t = t || [];
            for (var r, i, o, a = 0, s = t.length; a < s; a++) r = t[a], i = r[0], o = r[1], n += "::" + i + o;
            return n
        }
        var i = e("console"),
            o = e("pjs"),
            a = e("underscore"),
            s = e("./plotter").default,
            l = e("parser"),
            c = e("math/parsenode/constant"),
            u = e("math/parsenode/seed"),
            p = e("math/parsenode/functioncall"),
            d = e("math/parsenode/image"),
            h = e("math/parsenode/slider"),
            f = e("math/parsenode/table"),
            m = e("math/parsenode/tablecolumn"),
            g = e("math/parsenode/freevariable"),
            y = e("math/finddependencyorder"),
            v = e("math/errormsg"),
            b = e("graphing/graphmode"),
            x = e("worker/workerconfig"),
            w = e("./findIntersections").findIntersections,
            _ = e("./interpolatedlabel"),
            S = e("math/types"),
            E = e("math/expression-types").ExpressionType,
            M = e("math/expression-types").isClickableExpressionType,
            I = e("math/getCLSymbolMap").getCLSymbolMap,
            T = e("math/distribution-spec"),
            C = e("math/maybe-rational").maybeRational,
            k = e("lib/number-to-latex").default,
            D = e("graphing/label"),
            P = {
                fourFunction: e("math/policyFourFunction").PolicyFourFunction,
                scientific: e("math/policyScientific").PolicyScientific,
                singleExpressionScientific: e("math/policyScientific").PolicySingleExpressionScientific,
                singleExpressionFourFunction: e("math/policyFourFunction").PolicySingleExpressionFourFunction,
                graphing: e("math/policyGraphing").PolicyGraphing
            },
            L = {
                fourFunction: e("math/frameFourFunction"),
                singleExpressionFourFunction: e("math/frameFourFunction"),
                scientific: e("math/frameScientific"),
                singleExpressionScientific: e("math/frameSingleExpressionScientific"),
                graphing: e("math/frameGraphing")
            };
        return o(function(e) {
            function o(e, t) {
                return e ? "0" === e ? U : "1" === e ? G : l.parse(e, t) : H
            }

            function M(e, t) {
                if (e) return l.parse(e, t)
            }

            function A(e) {
                return "ans" !== e.slice(0, 3)
            }

            function O(e, t) {
                var n, r = e.multiplyDefined,
                    i = e.cyclicallyDefined;
                for (n in r) r.hasOwnProperty(n) && (t[n] = v.multiplyDefined(n));
                for (n in i) i.hasOwnProperty(n) && (t[n] = v.cycle(i[n].filter(A)))
            }

            function F(e, t, n) {
                for (var r = 0; r < n.length; r++) {
                    var i = n[r];
                    e[i] || (e[i] = []), e[i].push(t)
                }
            }

            function q(e, t, n) {
                var r = e.variables;
                if (r && r.length) {
                    for (var i = {}, o = 0; o < r.length; o++) i[r[o]] = !0;
                    for (var a in n) i[a] = !0;
                    n = i
                }
                e.variables = t.sliderVariables(Object.keys(n))
            }

            function N(e, t, n) {
                var r, i, o = e.evaluationState,
                    a = e.rawTree,
                    s = a.metaData.cdfMin,
                    l = a.metaData.cdfMax,
                    u = NaN,
                    d = NaN,
                    h = {},
                    f = "Assignment" === a.type ? a._expression : a,
                    m = f && f.metaData && f.metaData.distributionSpec;
                if (s) {
                    var g = s.tryGetConcreteTree(t, n);
                    for (g.isConstant && (u = g.asValue()), r = g.getDependencies(), i = 0; i < r.length; i++) h[r[i]] = !0
                } else u = -1 / 0;
                if (l) {
                    var y = l.tryGetConcreteTree(t, n);
                    for (y.isConstant && (d = y.asValue()), r = y.getDependencies(), i = 0; i < r.length; i++) h[r[i]] = !0
                } else d = 1 / 0;
                var b = !0,
                    x = !0;
                if (isNaN(u) && (b = !1, u = NaN), isNaN(d) && (x = !1, d = NaN), b ? x ? u > d && (b = !1, x = !1, o.error = v.cdfMaxLessThanMin().getError()) : o.error = v.cdfMaxInvalid().getError() : o.error = v.cdfMinInvalid().getError(), b && x) {
                    var w = p("cdf", [f, c(u), c(d)]);
                    o.cdf_evaluation = +w.tryGetConcreteTree(t, n).asValue()
                }
                var _ = -1 / 0,
                    S = 1 / 0;
                if (m && (m.discrete && (_ = 0), "binomialdist" === m.symbol && f.args && f.args[0])) {
                    var E = f.args[0].asValue();
                    isFinite(E) && (S = E)
                }
                a.metaData.evaluatedCDFMin = u, a.metaData.evaluatedCDFMax = d, o.cdf_min_valid = b, o.cdf_max_valid = x, o.cdf_min_default = _, o.cdf_max_default = S, o.is_single_identifier = !1, q(o, t, h)
            }

            function R(e, t, n) {
                var r, i = e.evaluationState,
                    o = e.rawTree.metaData.fillOpacity,
                    a = {},
                    s = !0;
                if (o) {
                    var l = o.tryGetConcreteTree(t, n);
                    r = l.asValue();
                    for (var c = l.getDependencies(), u = 0; u < c.length; u++) a[c[u]] = !0
                }
                isFinite(r) || (s = !1, r = NaN), o || (s = !0), e.rawTree.metaData.computedFillOpacity = r, i.fill_opacity_valid = s, q(i, t, a)
            }

            function B(e, t, n) {
                var r, i, o, a, s = e.evaluationState,
                    l = e.rawTree,
                    c = l.metaData.clickableAssignment,
                    u = l.metaData.clickableExpression,
                    p = {};
                if (c && "Identifier" === c.type) {
                    var d = n[c._symbol],
                        h = d && d.type;
                    "Slider" !== h && "Assignment" !== h || (o = c._symbol)
                }
                if (u) {
                    var f = u.tryGetConcreteTree(t, n);
                    if (f.valueType === S.Number) {
                        var m = f.asValue();
                        isNaN(m) || (a = k(m))
                    } else if (f.valueType === S.ListOfNumber) {
                        var g = [],
                            y = !0;
                        for (i = 0; i < f.args.length; i++) {
                            var v = f.args[i];
                            if (v.valueType !== S.Number) return !1;
                            var b = v.asValue();
                            g.push(k(b)), isNaN(b) && (y = !1)
                        }
                        y && (a = "\\left[" + g.join(",") + "\\right]")
                    }
                    for (r = f.getDependencies(), i = 0; i < r.length; i++) p[r[i]] = !0
                }
                o && a && (s.clickableinfo_identifier = o, s.clickableinfo_latex = D.identifierToLatex(o) + "=" + a), s.clickableinfo_identifier_valid = !!o, s.clickableinfo_expression_valid = !!a, q(s, t, p)
            }

            function j(e, t, n) {
                var r, i, o = e.evaluationState,
                    a = e.rawTree,
                    s = o.expression_type === E.POLAR ? a.metaData.polarDomainMin : a.metaData.parametricDomainMin,
                    l = o.expression_type === E.POLAR ? a.metaData.polarDomainMax : a.metaData.parametricDomainMax,
                    c = NaN,
                    u = NaN,
                    p = !1,
                    d = {};
                if (s) {
                    p = !0;
                    var h = s.tryGetConcreteTree(t, n);
                    for (h.isConstant && (c = h.asValue()), r = h.getDependencies(), i = 0; i < r.length; i++) d[r[i]] = !0
                } else c = 0;
                if (l) {
                    p = !0;
                    var f = l.tryGetConcreteTree(t, n);
                    for (f.isConstant && (u = f.asValue()), r = f.getDependencies(), i = 0; i < r.length; i++) d[r[i]] = !0
                } else o.expression_type === E.PARAMETRIC ? u = 1 : o.expression_type === E.POLAR && (u = 12 * Math.PI / n.trigAngleMultiplier.asValue());
                var m = !0,
                    g = !0;
                isFinite(c) || (m = !1, c = NaN), isFinite(u) || (g = !1, u = NaN), m ? g ? c > u && (m = !1, g = !1, o.error = v.domainMaxLessThanMin().getError()) : o.error = v.domainMaxInvalid().getError() : o.error = v.domainMinInvalid().getError(), a.metaData.evaluatedDomainMin = c, a.metaData.evaluatedDomainMax = u, o.expression_type === E.POLAR && (a.metaData.isExplicitDomain = p), o.domain_min_number = c, o.domain_max_number = u, o.domain_min_valid = m, o.domain_max_valid = g, o.expression_type === E.PARAMETRIC && (delete d.t, q(o, t, d))
            }

            function V(e, t, n) {
                var r, i, o = e.evaluationState,
                    a = e.rawTree,
                    s = a.metaData.vizAxisOffset,
                    l = a.metaData.vizBreadth,
                    c = NaN,
                    u = NaN,
                    p = {};
                if (s) {
                    var d = s.tryGetConcreteTree(t, n);
                    for (d.isConstant && (c = d.asValue()), r = d.getDependencies(), i = 0; i < r.length; i++) p[r[i]] = !0
                } else c = 1;
                if (l) {
                    var h = l.tryGetConcreteTree(t, n);
                    for (h.isConstant && (u = h.asValue()), r = h.getDependencies(), i = 0; i < r.length; i++) p[r[i]] = !0
                } else u = 1;
                var f = !0,
                    m = !0;
                isFinite(c) || (f = !1, c = NaN), isFinite(u) || (m = !1, u = NaN), f ? m || (o.error = v.boxplotBreadthInvalid().getError()) : o.error = v.boxplotOffsetInvalid().getError(), a.metaData.evaluatedAxisOffset = c, a.metaData.evaluatedBreadth = u, o.viz_values = {
                    axisOffset: c,
                    breadth: u
                }, o.viz_valids = {
                    axisOffset: f,
                    breadth: m
                }, q(o, t, p)
            }

            function z(e) {
                return e.globalRandomSeed || []
            }
            e.triggerGraphComputed = function() {}, e.triggerStatusChange = function() {}, e.triggerRemoveGraph = function() {}, e.triggerRender = function() {}, e.triggerRenderSlowly = function() {}, e.triggerDidAddStatement = function() {}, e.triggerDidRemoveStatement = function() {}, e.triggerDidUpdateIntersections = function() {}, e.init = function() {
                this.statements = {}, this.analysis = {}, this.currentStatus = {}, this.currentLabel = {}, this.unpublishedIds = {}, this.intersectIds = {}, this.dirtyExportedSymbolRoots = {}, this.dirtyStatementRoots = {}, this.markedRegressionDirty = !1, this.setEvaluationMode("graphing"), this.setRestrictedFunctions(!1), this.setFunctionDefinition(!0), this.invalidate()
            }, e.getCLSymbolMap = I, e.processChangeSet = function(e) {
                e.isCompleteState && (this.invalidate(), this.statements = {}, this.currentLabel = {}), e.viewState && this.setViewState(e.viewState), e.hasOwnProperty("degreeMode") && this.setDegreeMode(e.degreeMode), e.hasOwnProperty("globalRandomSeed") && this.setGlobalRandomSeed(e.globalRandomSeed), e.hasOwnProperty("evaluationMode") && this.setEvaluationMode(e.evaluationMode), e.hasOwnProperty("additionalFunctions") && this.setAdditionalFunctions(e.additionalFunctions), e.hasOwnProperty("restrictedFunctions") && this.setRestrictedFunctions(e.restrictedFunctions), e.hasOwnProperty("distributions") && this.setDistributions(e.distributions), e.hasOwnProperty("functionDefinition") && this.setFunctionDefinition(e.functionDefinition), e.hasOwnProperty("pointsOfInterest") && this.setPointsOfInterest(e.pointsOfInterest), e.hasOwnProperty("plotSingleVariableImplicitEquations") && this.setPlotSingleVariableImplicitEquations(e.plotSingleVariableImplicitEquations), e.hasOwnProperty("intersectIds") && (this.intersectIds = e.intersectIds), this.processStatements(e), this.updateAnalysis(), e.hasOwnProperty("intersectId") && this._updateIntersections(e.intersectId), this._publishAllStatuses(), this._computeAllLabels(), this._graphAllChanged(), this.unpublishedIds = {}, e.isCompleteState ? this.triggerRenderSlowly() : this.triggerRender()
            }, e.processStatements = function(e) {
                var t;
                if (e.statements)
                    for (var n in e.statements) {
                        var r = e.statements[n];
                        if (null === r) {
                            if (!e.isCompleteState && this.statements.hasOwnProperty(n) && (t = this.statements[n].getAllIds()), this.removeStatement(n), !e.isCompleteState && t) {
                                for (var i = 0; i < t.length; i++) this.triggerRemoveGraph(t[i]);
                                this.triggerDidRemoveStatement(n)
                            }
                        } else this.addStatement(r), e.isCompleteState || this.triggerDidAddStatement(r)
                    }
            }, e.setViewState = function(e) {
                if (!a.isEqual(e, this.viewState)) {
                    this.viewState = e;
                    for (var t in this.statements) this.statements.hasOwnProperty(t) && (this.unpublishedIds[t] = !0)
                }
            }, e.getViewState = function() {
                if (this.viewState) {
                    var e = Object.create(this.viewState);
                    return this.parent_frame && this.parent_frame.trigAngleMultiplier ? e.trigAngleMultiplier = this.parent_frame.trigAngleMultiplier.asValue() : e.trigAngleMultiplier = 1, e
                }
            }, e.setDegreeMode = function(e) {
                this.use_degrees = e, this.invalidate()
            }, e.setGlobalRandomSeed = function(e) {
                this.globalRandomSeedString = e, this.parent_frame.globalRandomSeed = u(e), this.dirtyExportedSymbolRoots.globalRandomSeed = !0
            }, e.setEvaluationMode = function(e) {
                this.evaluationMode = e, this.policy = P[e], this.invalidate()
            }, e.setAdditionalFunctions = function(e) {
                this.additionalFunctions = e, this.invalidate()
            }, e.setRestrictedFunctions = function(e) {
                this.restrictedFunctions = e, this.invalidate()
            }, e.setDistributions = function(e) {
                this.distributions = e, this.invalidate()
            }, e.setFunctionDefinition = function(e) {
                this.functionDefinition = e, this.invalidate()
            }, e.setPointsOfInterest = function(e) {
                e !== x.pointsOfInterest && (x.pointsOfInterest = e, this.invalidate())
            }, e.setPlotSingleVariableImplicitEquations = function(e) {
                e !== x.plotSingleVariableImplicitEquations && (x.plotSingleVariableImplicitEquations = e, this.invalidate())
            }, e._publishAllStatuses = function() {
                var e = {},
                    t = this.currentStatus;
                this.currentStatus = {};
                for (var n in this.unpublishedIds)
                    if (this.analysis.hasOwnProperty(n)) {
                        var r = this.analysis[n].evaluationState;
                        JSON.stringify(r) !== JSON.stringify(t[n]) && (e[n] = r), this.currentStatus[n] = r
                    } this.triggerStatusChange(e)
            }, e._computeAllLabels = function() {
                for (var e in this.currentLabel) {
                    var t = this.statements[e];
                    if (t) {
                        var n = t.tryGetConcreteTree(this.policy, this.frame),
                            r = 1;
                        n.valueType === S.ListOfPoint && (r = n.args.length);
                        for (var i = [], o = 0; o < r; o++) i.push(_.interpolate(this.currentLabel[e], this.frame, o));
                        a.isEqual(i, t.computedLabels) || (t.computedLabels = i, this.unpublishedIds[e] = !0)
                    }
                }
            }, e._graphAllChanged = function() {
                var e = this.getViewState();
                if (s.validateViewState(e)) {
                    for (var t in this.unpublishedIds)
                        if (this.analysis.hasOwnProperty(t)) {
                            var n = this.analysis[t],
                                r = n.evaluationState.expression_type,
                                i = r === E.SINGLE_POINT || r === E.POINT_LIST;
                            if (n.rawTree.isTable)
                                for (var o = n.graph(e), l = n.rawTree.getAllIds(), c = 0; c < l.length; c++) o[l[c]] ? this.triggerGraphComputed(l[c], o[l[c]]) : this.triggerRemoveGraph(l[c]);
                            else n.evaluationState.is_graphable && (n.rawTree.userData.shouldGraph || n.rawTree.userData.showLabel && i) ? (this.triggerGraphComputed(t, n.graph(e)), this.intersectIds.hasOwnProperty(t) && this._updateIntersections(t)) : this.triggerRemoveGraph(t)
                        } if (a.keys(this.unpublishedIds).length)
                        for (var u in this.intersectIds) this.unpublishedIds.hasOwnProperty(u) || this.intersectIds.hasOwnProperty(u) && this._updateIntersections(u)
                }
            }, e._updateIntersections = function(e) {
                if (this.viewState) {
                    if (!this.analysis[e] || !this.analysis[e].shouldIntersect()) return void this.triggerDidUpdateIntersections(e, []);
                    var t = w(this.analysis, this.viewState, e);
                    this.triggerDidUpdateIntersections(e, t)
                }
            }, e.getDisabledFeatures = function() {
                var e, t = this.policy.disabledFeatures();
                e = !1 === this.functionDefinition ? t.concat("FunctionDefinition") : t;
                var n = this.additionalFunctions || [];
                return e = e.filter(function(e) {
                    return ("Exponent" !== e || -1 === n.indexOf("exponent")) && ("PercentOf" !== e || -1 === n.indexOf("percent"))
                }.bind(this))
            };
            var U = c(C(0, 1)),
                G = c(C(1, 1)),
                H = c(NaN);
            e.addStatement = function(e) {
                if (e) {
                    var t = e.id;
                    this.markExportsDirty(t), this.markAsDirtyRoot(t);
                    var n = {
                            index: this.policy.ansEnabled() ? e.index : void 0,
                            disabledFeatures: this.getDisabledFeatures(),
                            seedPrefix: r(t)
                        },
                        i = {};
                    switch (e.type) {
                        case "table":
                            var a = [];
                            this.statements.hasOwnProperty(t) && (a = this.statements[t].getAllIds()), e.shouldGraph = !0;
                            for (var s, u, p, g = e.columns, y = [], v = 0, b = 0; b < g.length; b++) v = Math.max(g[b].values.length, v);
                            for (var x = 0; x < g.length; x++) {
                                n.seedPrefix = r(t, [
                                    ["tr", 0],
                                    ["tc", x]
                                ]), s = l.parse(g[x].latex, n), u = [];
                                for (var w = -1, S = 0; S < g[x].values.length; S++) g[x].values[S].replace(/\\space/g, "").match(/\S/) ? (n.seedPrefix = r(t, [
                                    ["tr", S + 1],
                                    ["tc", x]
                                ]), u.push(l.parse(g[x].values[S], n)), w = S) : u.push(c(NaN));
                                u = u.slice(0, w + 1), p = m(s, v, u), p.id = g[x].id, p.header && (p.header.userData = g[x]), p.header && (p.header.metaData = {}), y.push(p)
                            }
                            this.statements[t] = f(y);
                            var E = this,
                                I = this.statements[t].getAllIds();
                            a.forEach(function(e) {
                                -1 === I.indexOf(e) && E.triggerRemoveGraph(e)
                            });
                            break;
                        case "image":
                            var C = "-\\trigAngleMultiplier*\\arctan(\\sin(" + e.angle + "),\\cos(" + e.angle + "))";
                            n.seedPrefix = r(t, [
                                ["ic", t]
                            ]);
                            var k = l.parse(e.center, n);
                            n.seedPrefix = r(t, [
                                ["ia", t]
                            ]);
                            var D = l.parse(C, n);
                            n.seedPrefix = r(t, [
                                ["iw", t]
                            ]);
                            var P = l.parse(e.width, n);
                            n.seedPrefix = r(t, [
                                ["ih", t]
                            ]);
                            var L = l.parse(e.height, n);
                            n.seedPrefix = r(t, [
                                ["io", t]
                            ]);
                            var A = l.parse(e.opacity, n);
                            this.statements[t] = d({
                                center: k,
                                radianAngle: D,
                                width: P,
                                height: L,
                                opacity: A
                            });
                            break;
                        default:
                            if (this.statements[t] = l.parse(e.latex, n), this.statements[t].shouldPromoteToSlider(this.policy)) {
                                var O = e.slider;
                                n.seedPrefix = r(t, [
                                    ["lm", t]
                                ]);
                                var F = M(O && O.min, n);
                                n.seedPrefix = r(t, [
                                    ["lM", t]
                                ]);
                                var q = M(O && O.max, n);
                                n.seedPrefix = r(t, [
                                    ["ls", t]
                                ]);
                                var N = M(O && O.step, n);
                                this.statements[t] = h(this.statements[t], {
                                    sliderMin: F,
                                    sliderMax: q,
                                    sliderStep: N
                                })
                            } else if (e.polarDomain && e.polarDomain.min && (n.seedPrefix = r(t, [
                                    ["lm", t]
                                ]), i.polarDomainMin = o(e.polarDomain.min, n)), e.polarDomain && e.polarDomain.max && (n.seedPrefix = r(t, [
                                    ["lM", t]
                                ]), i.polarDomainMax = o(e.polarDomain.max, n)), e.parametricDomain && e.parametricDomain.min && (n.seedPrefix = r(t, [
                                    ["lm", t]
                                ]), i.parametricDomainMin = o(e.parametricDomain.min, n)), e.parametricDomain && e.parametricDomain.max && (n.seedPrefix = r(t, [
                                    ["lM", t]
                                ]), i.parametricDomainMax = o(e.parametricDomain.max, n)), e.vizProps && (e.vizProps.axisOffset && (n.seedPrefix = r(t, [
                                    ["vo", t]
                                ]), i.vizAxisOffset = o(e.vizProps.axisOffset, n)), e.vizProps.breadth && (n.seedPrefix = r(t, [
                                    ["vb", t]
                                ]), i.vizBreadth = o(e.vizProps.breadth, n))), e.fillOpacity && (n.seedPrefix = r(t, [
                                    ["fo", t]
                                ]), i.fillOpacity = M(e.fillOpacity, n)), e.cdf && e.cdf.show) {
                                var R = T.parseToplevelFunction(e.latex, n);
                                R && "distribution" === R.type && (i.distributionSpec = R, n.seedPrefix = r(t, [
                                    ["lm", t]
                                ]), i.cdfMin = M(e.cdf.min, n), n.seedPrefix = r(t, [
                                    ["lM", t]
                                ]), i.cdfMax = M(e.cdf.max, n))
                            }
                    }
                    if (e.clickableInfo && e.clickableInfo.enabled && (i.clickableAssignment = M(e.clickableInfo.assignment, n), i.clickableExpression = M(e.clickableInfo.expression, n)), this.statements[t].userData = e, this.statements[t].metaData = i, e.label) {
                        var B = this.currentLabel[t];
                        B && B.raw === e.label || (this.currentLabel[t] = _.parse(e.label))
                    } else delete this.currentLabel[t]
                }
            }, e.removeStatement = function(e) {
                var t = this.statements[e];
                if (t) {
                    if (this.markExportsDirty(e), t.isTable) {
                        var n = this;
                        t.getAllIds().forEach(function(e) {
                            n.triggerRemoveGraph(e)
                        })
                    } else this.triggerRemoveGraph(e);
                    delete this.currentLabel[e], delete this.statements[e], delete this.analysis[e]
                }
            }, e.invalidate = function() {
                for (var e in this.statements) this.statements.hasOwnProperty(e) && this.markAsDirtyRoot(e);
                this.currentStatus = {}, this.analysis = {}, this.parent_frame = L[this.evaluationMode].getFrame({
                    restrictedFunctions: this.restrictedFunctions,
                    distributions: this.distributions,
                    additionalFunctions: this.additionalFunctions,
                    trigAngleMultiplier: c(this.use_degrees ? Math.PI / 180 : C(1, 1)),
                    globalRandomSeed: u(this.globalRandomSeedString || "")
                }), this.frame = Object.create(this.parent_frame), this.lastFrame = Object.create(this.parent_frame), this.regressionFrame = Object.create(this.parent_frame)
            }, e.markExportsDirty = function(e) {
                if (this.statements[e]) {
                    this.statements[e].isRegression && (this.markedRegressionDirty = !0);
                    for (var t = this.statements[e].getLegalExports(this.policy), n = 0; n < t.length; n++) this.dirtyExportedSymbolRoots[t[n]] = !0
                }
            }, e.markAsDirtyRoot = function(e) {
                this.dirtyStatementRoots[e] = !0
            }, e.getFrame = function() {
                return this.updateAnalysis(), this.frame
            }, e.getAnalysis = function() {
                return this.updateAnalysis(), this.analysis
            }, e.getStatus = function(e) {
                if (this.updateAnalysis(), this.analysis[e]) return this.analysis[e].status
            }, e.getEvaluationState = function(e) {
                if (this.updateAnalysis(), this.analysis[e]) return this.analysis[e].evaluationState
            }, e._updateRegressions = function(e) {
                var t, n = this.frame,
                    r = this.lastFrame,
                    i = this.regressionFrame,
                    o = [];
                for (t in e) e.hasOwnProperty(t) && e[t].isRegression && o.push(t);
                var a = this;
                o.sort(function(e, t) {
                    var n = a.statements[e].userData && a.statements[e].userData.residualVariable,
                        r = a.statements[t].userData && a.statements[t].userData.residualVariable;
                    return n && !r ? -1 : r && !n ? 1 : 0
                });
                var s = y(this.policy, e, o);
                O(s, i);
                for (var l = s.resolved, c = {}, u = 0; u < l.length; u++)
                    if (t = l[u], this.statements[t].isRegression) this.analysis[t] = e[t].analyze(this.policy, i, n, r, c), this.analysis[t].exportTo(this.policy, n), delete e[t];
                    else {
                        var p = e[t].tryGetConcreteTree(this.policy, i);
                        e[t].exportTo(this.policy, p, i), c[t] = {
                            rawTree: e[t],
                            concreteTree: p
                        }
                    }
            }, e.buildSymbolToExpressionDirtyMap = function() {
                var e = {};
                for (var t in this.statements)
                    if (this.statements.hasOwnProperty(t)) {
                        var n = this.statements[t],
                            r = n.metaData;
                        F(e, t, n.getDependencies()), F(e, t, n.getLegalExports(this.policy)), r.polarDomainMin && F(e, t, r.polarDomainMin.getDependencies()), r.polarDomainMax && F(e, t, r.polarDomainMax.getDependencies()), r.parametricDomainMin && F(e, t, r.parametricDomainMin.getDependencies()), r.parametricDomainMax && F(e, t, r.parametricDomainMax.getDependencies()), r.vizBinWidth && F(e, t, r.vizBinWidth.getDependencies()), r.vizBinCenter && F(e, t, r.vizBinCenter.getDependencies()), r.vizAxisOffset && F(e, t, r.vizAxisOffset.getDependencies()), r.vizBreadth && F(e, t, r.vizBreadth.getDependencies()), r.cdfMin && F(e, t, r.cdfMin.getDependencies()), r.cdfMax && F(e, t, r.cdfMax.getDependencies()), r.fillOpacity && F(e, t, r.fillOpacity.getDependencies()), r.clickableAssignment && F(e, t, r.clickableAssignment.getDependencies()), r.clickableExpression && F(e, t, r.clickableExpression.getDependencies())
                    } return e
            }, e.getDirtyIdsAndSymbols = function(e) {
                var t, n, r, i = {},
                    o = {},
                    a = this.markedRegressionDirty,
                    s = [],
                    l = [];
                for (t in this.dirtyStatementRoots) this.dirtyStatementRoots[t] && (o[t] = !0, s.push(t));
                for (r in this.dirtyExportedSymbolRoots) this.dirtyExportedSymbolRoots[r] && (i[r] = !0, l.push(r));
                for (; s.length || l.length;) {
                    for (; s.length;) {
                        t = s.pop();
                        var c = this.statements[t];
                        if (c) {
                            c.isRegression && (a = !0);
                            var u = c.getLegalExports(this.policy);
                            for (n = 0; n < u.length; n++) r = u[n], i[r] || (i[r] = !0, l.push(r))
                        }
                    }
                    for (; l.length;) {
                        r = l.pop();
                        var p = e[r];
                        if (p)
                            for (n = 0; n < p.length; n++) t = p[n], o[t] || (o[t] = !0, s.push(t))
                    }
                }
                return {
                    ids: o,
                    symbols: i,
                    hasDirtyRegression: a
                }
            }, e.updateAnalysis = function() {
                var e, r, i, o = this.buildSymbolToExpressionDirtyMap(),
                    a = this.getDirtyIdsAndSymbols(o);
                if (a.hasDirtyRegression) {
                    i = {};
                    for (e in this.statements) this.statements[e] && (i[e] = this.statements[e]);
                    this.frame = Object.create(this.parent_frame), this.regressionFrame = Object.create(this.parent_frame)
                } else {
                    var s = a.ids;
                    i = {};
                    for (e in s) this.statements[e] && (i[e] = this.statements[e]);
                    var l = a.symbols;
                    for (r in l) l[r] && (delete this.frame[r], delete this.regressionFrame[r])
                }
                for (e in i) i[e] && (this.unpublishedIds[e] = !0);
                this.markedRegressionDirty = !1, this.dirtyExportedSymbolRoots = {}, this.dirtyStatementRoots = {};
                var c = this.analysis,
                    u = this.frame;
                "graphing" === this.evaluationMode && this._updateRegressions(i);
                var p = y(this.policy, i);
                O(p, u);
                for (var d = p.resolved, h = 0; h < d.length; h++) switch (e = d[h], this.evaluationMode) {
                    case "fourFunction":
                    case "singleExpressionFourFunction":
                        c[e] = this.statements[e].analyzeFourFunction(this.policy, u, c), c[e].exportTo(this.policy, u);
                        break;
                    case "scientific":
                        c[e] = this.statements[e].analyzeScientific(this.policy, u, c), c[e].exportTo(this.policy, u);
                        break;
                    case "singleExpressionScientific":
                        c[e] = this.statements[e].analyzeSingleExpressionScientific(this.policy, u, c), c[e].exportTo(this.policy, u);
                        break;
                    case "graphing":
                        if (u.r) {
                            var f = Object.create(u);
                            if (f.r = g("r"), c[e] = this.statements[e].analyze(this.policy, f, c), c[e].getGraphMode() === b.POLAR) {
                                c[e].exportTo(this.policy, u);
                                continue
                            }
                        }
                        c[e] = this.statements[e].analyze(this.policy, u, c), c[e].exportTo(this.policy, u)
                }
                if ("graphing" === this.evaluationMode)
                    for (h = 0; h < d.length; h++) {
                        e = d[h];
                        var m = c[e],
                            v = m.evaluationState.expression_type;
                        v !== E.POLYGON && v !== E.PARAMETRIC || R(c[e], this.policy, u), n(c[e]) && B(c[e], this.policy, u), v === E.PARAMETRIC || v === E.POLAR ? j(c[e], this.policy, u) : v === E.BOXPLOT ? V(c[e], this.policy, u) : t(c[e]) && N(c[e], this.policy, u)
                    }
                z(o).forEach(function(e) {
                    c[e].evaluationState.depends_on_random_seed = !0
                }), this.lastFrame = Object.create(this.parent_frame);
                for (r in u) u.hasOwnProperty(r) && (this.lastFrame[r] = u[r])
            }, e.evaluateOnce = function(e) {
                return i.log("Deprecated console.evaluateOnce - this should not run in production code"), this.analysis[e].concreteTree.asValue()
            }, e.compile = function(e) {
                return i.log("Deprecated console.compile - this should not run in production code"), this.analysis[e].concreteTree.getCompiledFunction()
            }, e.evalStrings = function(e) {
                return i.log("Deprecated console.evalStrings - this should not run in production code"), this.analysis[e].concreteTree.getEvalStrings()
            }
        })
    }),
    define("worker/workercore", ["require", "math/context", "math/functions"], function(e) {
        var t = e("math/context"),
            n = e("math/functions");
        return function(e) {
            var r = t();
            return r.triggerGraphComputed = function(t, r) {
                n.dehydrateGraphData(r), e("graphComputed", {
                    id: t,
                    graphData: r
                })
            }, r.triggerDidUpdateIntersections = function(t, n) {
                e("updateIntersections", {
                    id: t,
                    intersections: n
                })
            }, r.triggerRender = function() {
                e("render")
            }, r.triggerRenderSlowly = function() {
                e("renderSlowly")
            }, r.triggerRemoveGraph = function(t) {
                e("removeGraph", t)
            }, r.triggerStatusChange = function(t) {
                e("statusChange", t)
            }, {
                processChangeSet: function(t) {
                    r.processChangeSet(t), e("processChangeSet", t)
                }
            }
        }
    }), define("worker/fakeworker", ["require", "worker/workercore"], function(e) {
        var t = e("worker/workercore");
        return function(e) {
            function n(t, n) {
                e({
                    type: t,
                    payload: n
                })
            }
            var r = {},
                i = t(n);
            return r.postMessage = function(e) {
                setTimeout(function() {
                    i.processChangeSet(e)
                }, 0)
            }, r
        }
    }), define("lib/urlparser", ["require"], function(e) {
        return {
            getParameter: function(e) {
                return decodeURIComponent((new RegExp("[?|&]" + e + "=([^&;]+?)(&|#|;|$)").exec(location.search) || [void 0, ""])[1].replace(/\+/g, "%20")) || null
            }
        }
    }), define("worker/workerpool", ["require", "console", "./create_worker_url", "pjs", "underscore_model", "./fakeworker", "underscore", "lib/urlparser"], function(e) {
        function t(e) {
            return u ? function(t) {
                p = Math.max(Date.now(), p) + u, setTimeout(e, p - Date.now(), t)
            } : e
        }
        var n = e("console"),
            r = e("./create_worker_url"),
            i = e("pjs"),
            o = e("underscore_model").UnderscoreModel,
            a = e("./fakeworker"),
            s = e("underscore"),
            l = e("lib/urlparser"),
            c = l.getParameter("workerThrottle"),
            u = parseInt(c, 10),
            p = 0;
        return i(o, function(e, i) {
            e.init = function(e) {
                i.init.call(this), this.workers = [], this.maxWorkers = e, this.workerURL = r()
            }, e.allowedToSpawnWorker = function() {
                return this.workerURL && this.workers.length < this.maxWorkers
            }, e.killWorker = function(e) {
                -1 !== s.indexOf(this.workers, e) && (e.terminate(), this.workers = s.without(this.workers, e), s.shuffle(s.values(e.__connections)).forEach(function(e) {
                    e && e.onWorkerKilled && e.onWorkerKilled()
                }))
            }, e.spawnWorker = function() {
                try {
                    var e = new Worker(this.workerURL);
                    return e.__connections = {}, e.__isFake = !1, e.onerror = function(e) {
                        n.log(e)
                    }, e.addEventListener("message", t(function(t) {
                        var n = t.data;
                        if ((!n || !n.log) && n && n.connectionId) {
                            var r = e.__connections[n.connectionId];
                            r && r.onResponse(n.originalMessage)
                        }
                    })), this.workers.push(e), e
                } catch (e) {
                    return null
                }
            }, e.spawnFakeWorker = function() {
                var e = a(t(function(t) {
                    var n = s.values(e.__connections)[0];
                    n && n.onResponse(t)
                }));
                return e.__isFake = !0, e.__connections = {}, e
            }, e.findLeastUsedWorker = function() {
                var e = function(e) {
                    return s.size(e.__connections)
                };
                return s.sortBy(this.workers, e)[0]
            }, e.allocateWorker = function() {
                var e = null;
                return this.allowedToSpawnWorker() && (e = this.spawnWorker()), e || (e = this.findLeastUsedWorker()), e || (e = this.spawnFakeWorker()), e
            }
        })
    }), define("main/evaluator", ["require", "exports", "worker/workerpoolconnection", "worker/workerpool", "math/functions", "lib/deepCopy"], function(e, t, n, r, i, o) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var a = function() {
            function e(e) {
                this.listeners = {
                    processChangeSet: function(e) {
                        for (var t = e.syncId; this.syncRequests.length && void 0 !== t && this.syncRequests[0].id <= t;) {
                            this.syncRequests.shift().callback()
                        }
                        this.resume(), this.__state.droppedMessage = !1, this.clearJobTimer(), this._processChangeSet()
                    },
                    removeGraph: function(e) {
                        delete this.__addedGraphsBuffer[e], delete this.__intersectionsBuffer[e], this.__removedGraphsBuffer[e] = !0
                    },
                    graphComputed: function(e) {
                        i.rehydrateGraphData(e.graphData), delete this.__removedGraphsBuffer[e.id], this.__addedGraphsBuffer[e.id] = e.graphData
                    },
                    updateIntersections: function(e) {
                        this.__intersectionsBuffer[e.id] = e.intersections
                    },
                    statusChange: function(e) {
                        this.triggerStatusChange(e)
                    },
                    render: function() {
                        this.triggerGraphData(this.getGraphDataFromBuffer()), this.clearBuffers(), this.triggerRender()
                    },
                    renderSlowly: function() {
                        this.triggerGraphData(this.getGraphDataFromBuffer()), this.clearBuffers(), this.triggerRenderSlowly()
                    }
                }, this.__state = {}, this.changeSet = null, this.cumulativeChangeSet = {}, this.__isSuspended = !1, this.clearJobTimer(), this.syncId = 1, this.syncRequests = [], this.clearBuffers(), e || (e = r()), this.workerPool = e, this.createWorkerPoolConnection()
            }
            return e.prototype.triggerStatusChange = function(e) {}, e.prototype.triggerGraphData = function(e) {}, e.prototype.triggerRender = function() {}, e.prototype.triggerRenderSlowly = function() {}, e.prototype.createWorkerPoolConnection = function() {
                var e = this;
                this.workerPoolConnection && (this.workerPoolConnection.onResponse = function() {}, this.workerPoolConnection.onWorkerKilled = function() {}), this.workerPoolConnection = n(this.workerPool), this.workerPoolConnection.onResponse = function(t) {
                    e.isSuspended() && "processChangeSet" !== t.type || e.listeners[t.type].call(e, t.payload)
                }, this.workerPoolConnection.onWorkerKilled = function() {
                    e.createWorkerPoolConnection(), e.resume(), e.hasJobInWorker() ? (e.changeSet = o.default(e.cumulativeChangeSet), e.__state.changed = !0, e.__state.droppedMessage = !0, e.clearJobTimer()) : (e.changeSet = o.default(e.cumulativeChangeSet), e.__state.changed = !1), e.processChangeSet()
                }
            }, e.prototype.clearBuffers = function() {
                this.__addedGraphsBuffer = {}, this.__removedGraphsBuffer = {}, this.__intersectionsBuffer = {}
            }, e.prototype.getGraphDataFromBuffer = function() {
                return {
                    addedGraphs: this.__addedGraphsBuffer,
                    removedGraphs: this.__removedGraphsBuffer,
                    intersections: this.__intersectionsBuffer
                }
            }, e.prototype.destroy = function() {
                this.workerPoolConnection && (this.workerPoolConnection.onResponse = function() {}, this.workerPoolConnection.onWorkerKilled = function() {}, this.workerPoolConnection.destroy())
            }, e.prototype.isSuspended = function() {
                return this.__isSuspended
            }, e.prototype.suspend = function() {
                this.__isSuspended = !0
            }, e.prototype.resume = function() {
                this.__isSuspended = !1
            }, e.prototype.clearJobTimer = function() {
                this.__jobStartTime = -1
            }, e.prototype.startJobTimer = function() {
                this.__jobStartTime = (new Date).getTime()
            }, e.prototype.hasJobInWorker = function() {
                return -1 !== this.__jobStartTime
            }, e.prototype.getJobElapsedTime = function() {
                return this.hasJobInWorker() ? (new Date).getTime() - this.__jobStartTime : NaN
            }, e.prototype.tick = function() {
                this._processChangeSet()
            }, e.prototype.processChangeSet = function() {
                this.__processChangeSetRequested = !0
            }, e.prototype._processChangeSet = function() {
                if (this.__processChangeSetRequested) {
                    var e = this.getJobElapsedTime() >= 4e3;
                    if (this.__state.droppedMessage && e) return void this.workerPoolConnection.killWorker();
                    if (this.__state.changed && this.changeSet)
                        if (this.hasJobInWorker()) this.changeSet.isCompleteState && e && this.workerPoolConnection.killWorker();
                        else {
                            var t = this.changeSet;
                            this.changeSet = null, this.__state.changed = !1, this.startJobTimer(), this.workerPoolConnection.sendMessage(t), this.__processChangeSetRequested = !1
                        }
                }
            }, e.prototype.notifyWhenSynced = function(e) {
                var t = this;
                if (!this.hasJobInWorker() && !this.__processChangeSetRequested) return void setTimeout(e, 0);
                this.syncId++, this.syncRequests.push({
                    id: this.syncId,
                    callback: e
                }), this.applyToChangeSets(function(e) {
                    e.syncId = t.syncId
                })
            }, e.prototype.applyToChangeSets = function(e) {
                this.__state.changed = !0, this.changeSet || (this.changeSet = {}), this.cumulativeChangeSet || (this.cumulativeChangeSet = {}), e(this.changeSet), e(this.cumulativeChangeSet), this.processChangeSet()
            }, e.prototype.setViewState = function(e) {
                this.applyToChangeSets(function(t) {
                    t.viewState = o.default(e)
                })
            }, e.prototype.clearStatementsAndStartCompleteState = function() {
                this.clearBuffers(), this.hasJobInWorker() && this.suspend(), this.applyToChangeSets(function(e) {
                    e.isCompleteState = !0, delete e.statements
                }), this.cumulativeChangeSet = o.default(this.changeSet)
            }, e.prototype.addStatement = function(e) {
                this.applyToChangeSets(function(t) {
                    t.statements || (t.statements = {}), t.statements[e.id] = o.default(e)
                })
            }, e.prototype.addStatements = function(e) {
                for (var t = 0, n = e; t < n.length; t++) {
                    var r = n[t];
                    this.addStatement(r)
                }
            }, e.prototype.removeStatement = function(e) {
                this.applyToChangeSets(function(t) {
                    t.statements || (t.statements = {}), t.statements[e] = null
                })
            }, e.prototype.removeStatements = function(e) {
                for (var t = 0, n = e; t < n.length; t++) {
                    var r = n[t];
                    this.removeStatement(r)
                }
            }, e.prototype.setIntersectIds = function(e) {
                this.applyToChangeSets(function(t) {
                    t.intersectIds = o.default(e)
                })
            }, e.prototype.updateIntersections = function(e) {
                this.applyToChangeSets(function(t) {
                    t.intersectId = e
                })
            }, e.prototype.setDegreeMode = function(e) {
                this.applyToChangeSets(function(t) {
                    t.degreeMode = e
                })
            }, e.prototype.setGlobalRandomSeed = function(e) {
                this.applyToChangeSets(function(t) {
                    t.globalRandomSeed = e
                })
            }, e.prototype.setEvaluationMode = function(e) {
                this.applyToChangeSets(function(t) {
                    t.evaluationMode = e
                })
            }, e.prototype.setAdditionalFunctions = function(e) {
                this.applyToChangeSets(function(t) {
                    t.additionalFunctions = e
                })
            }, e.prototype.setRestrictedFunctions = function(e) {
                this.applyToChangeSets(function(t) {
                    t.restrictedFunctions = e
                })
            }, e.prototype.setDistributions = function(e) {
                this.applyToChangeSets(function(t) {
                    t.distributions = e
                })
            }, e.prototype.setFunctionDefinition = function(e) {
                this.applyToChangeSets(function(t) {
                    t.functionDefinition = e
                })
            }, e.prototype.setPointsOfInterest = function(e) {
                this.applyToChangeSets(function(t) {
                    t.pointsOfInterest = e
                })
            }, e.prototype.setPlotSingleVariableImplicitEquations = function(e) {
                this.applyToChangeSets(function(t) {
                    t.plotSingleVariableImplicitEquations = e
                })
            }, e
        }();
        t.Evaluator = a
    }), define("graphing/canvaslayer", ["require", "jquery", "pjs", "browser", "lib/i18n"], function(e) {
        var t = e("jquery"),
            n = e("pjs"),
            r = e("browser"),
            i = e("lib/i18n");
        return n(function(e) {
            e.init = function(e) {
                this.grapher = e, this.$ = t("<div class='dcg-graph-outer' role='img'></div>").attr("aria-roledescription", this.t("graph paper")), this.canvas_node = t("<canvas class='dcg-graph-inner'></canvas>").css("position", "relative").css("display", "block"), this.devicePixelRatio = window.devicePixelRatio || 1, this.ctx = this.canvas_node[0].getContext("2d"), this.resize(0, 0), r.IS_IOS && r.IS_IN_IFRAME && (this.$.css("-webkit-transform", "translate3d(0,-.25px,0)"), this.$.append('<div style="width:1px; height:.5px; pointer-events:none; opacity: 0;" aria-hidden="true">text</div>')), this.$.append(this.canvas_node)
            }, e.resize = function(e, t, n) {
                n = n || this.devicePixelRatio, e === this.width && t === this.height || (this.width = e, this.height = t, this.canvas_node.css("width", e + "px").css("height", t + "px").attr("width", e * n).attr("height", t * n), this.ctx = this.canvas_node[0].getContext("2d"), this.ctx.scale(n, n))
            }, e.t = function(e, t) {
                return i.t(e, t, this.grapher.settings.language)
            }, e.getAriaLabel = function(e) {
                var t = "";
                if (0 === e) return this.t("Empty graph paper.");
                t = 1 === e ? this.t("Graph paper showing 1 graph.") : this.t("Graph paper showing __count__ graphs.", {
                    count: e
                });
                var n = this.grapher.getAudioTrace();
                if (n && !n.getAudioTraceActive()) {
                    void 0 !== n.agNavigator.getFirstTraceableSketch({
                        selectAssociatedExpression: !1
                    }) && (r.IS_APPLE ? t += this.t(" Press OPTION+T for audio trace.") : t += this.t(" Press ALT+T for audio trace."))
                }
                return t
            }, e.updateAria = function(e, t) {
                this.$.attr("aria-hidden", !e || !this.grapher.settings.config.graphpaper).attr("tabindex", e && this.grapher.settings.config.graphpaper && this.grapher.settings.config.enableTabindex && t > 0 ? 0 : -1).attr("aria-label", this.getAriaLabel(t))
            }, e.redraw = function() {}
        })
    }), define("loadcss!poi", function() {}), define("graphing/clipping", [], function() {
        var e = {
            TOP: 1,
            BOTTOM: 2,
            LEFT: 4,
            RIGHT: 8,
            ALL: 15,
            X: 12,
            Y: 3,
            POLAR_RADIAN_EQUALITY: 1,
            POLAR_RADIAN_INEQUALITY: 2,
            POLAR_DEGREE_EQUALITY: 3,
            POLAR_DEGREE_INEQUALITY: 4,
            Y_EQUALS: 5,
            X_EQUALS: 6,
            mapSegmentToCanvas: function(t, n, r, i) {
                var o, a, s, l, c, u = [],
                    p = n.xmin,
                    d = n.ymin,
                    h = n.xmax - n.xmin,
                    f = n.ymax - n.ymin,
                    m = r.width,
                    g = r.height,
                    y = m / h,
                    v = -g / f,
                    b = t.length;
                if (i === e.Y_EQUALS)
                    for (o = 0; o < b; o += 2) a = (t[o] - p) * y - .5, s = (t[o + 1] - d) * v + g - .5, u.push(a, s);
                else if (i === e.X_EQUALS)
                    for (o = 0; o < b; o += 2) a = (t[o + 1] - p) * y - .5, s = (t[o] - d) * v + g - .5, u.push(a, s);
                else if (i === e.POLAR_RADIAN_EQUALITY)
                    for (o = 0; o < t.length; o += 2) l = t[o], c = t[o + 1], a = (c * Math.cos(l) - p) * y - .5, s = (c * Math.sin(l) - d) * v + g - .5, u.push(a, s);
                else if (i === e.POLAR_RADIAN_INEQUALITY)
                    for (o = 0; o < t.length; o += 2) l = t[o], c = t[o + 1], c < 0 && (c = 0), a = (c * Math.cos(l) - p) * y - .5, s = (c * Math.sin(l) - d) * v + g - .5, u.push(a, s);
                else if (i === e.POLAR_DEGREE_EQUALITY)
                    for (o = 0; o < t.length; o += 2) l = t[o] * Math.PI / 180, c = t[o + 1], a = (c * Math.cos(l) - p) * y - .5, s = (c * Math.sin(l) - d) * v + g - .5, u.push(a, s);
                else if (i === e.POLAR_DEGREE_INEQUALITY)
                    for (o = 0; o < t.length; o += 2) l = t[o] * Math.PI / 180, c = t[o + 1], c < 0 && (c = 0), a = (c * Math.cos(l) - p) * y - .5, s = (c * Math.sin(l) - d) * v + g - .5, u.push(a, s);
                return u
            },
            clipStrokeEdges: function(t, n) {
                return e.clipFillEdges(t, n, e.ALL, !0)
            },
            clipFillEdge: function(e, t, n, r) {
                var i, o, a, s, l = [],
                    c = [].push;
                r ? (o = e[0], a = e[1], i = 2, (s = t(o, a)) && l.push(o, a)) : (o = e[e.length - 2], a = e[e.length - 1], i = 0, s = t(o, a));
                for (var u = i; u < e.length; u += 2) {
                    var p = o,
                        d = a,
                        h = s;
                    o = e[u], a = e[u + 1], s = t(o, a), (s || h) && (s && h && l.push(o, a), s && !h && (c.apply(l, n(o, a, p, d)), l.push(o, a)), !s && h && c.apply(l, n(p, d, o, a)))
                }
                return l
            },
            clipFillEdges: function(t, n, r, i) {
                var o = n.xmin,
                    a = n.xmax,
                    s = n.ymin,
                    l = n.ymax,
                    c = function(e, t) {
                        return e >= o
                    },
                    u = function(e, t) {
                        return e <= a
                    },
                    p = function(e, t) {
                        return t >= s
                    },
                    d = function(e, t) {
                        return t <= l
                    },
                    h = function(e, t, n, r) {
                        return e = e, t = t, n = n, r = r, [o, t + (r - t) * (o - e) / (n - e)]
                    },
                    f = function(e, t, n, r) {
                        return e = e, t = t, n = n, r = r, [a, t + (r - t) * (a - e) / (n - e)]
                    },
                    m = function(e, t, n, r) {
                        return e = e, t = t, n = n, r = r, [e + (n - e) * (s - t) / (r - t), s]
                    },
                    g = function(e, t, n, r) {
                        return e = e, t = t, n = n, r = r, [e + (n - e) * (l - t) / (r - t), l]
                    },
                    y = t;
                return r & e.LEFT && (y = e.clipFillEdge(t, c, h, i)), r & e.BOTTOM && (y = e.clipFillEdge(y, p, m, i)), r & e.RIGHT && (y = e.clipFillEdge(y, u, f, i)), r & e.TOP && (y = e.clipFillEdge(y, d, g, i)), y
            },
            clipAllFillEdges: function(t, n) {
                return e.clipFillEdges(t, n, e.ALL, !1)
            },
            computePolarFill: function(e, t, n) {
                var r, i = [],
                    o = e[0],
                    a = o + n,
                    s = [];
                i.push(s);
                for (var l = 0; l < e.length; l += 2) {
                    r = e[l];
                    var c = e[l + 1];
                    if (c < 0 && (c = 0), r >= a) {
                        for (s = [], i.push(s), o = e[l - 2], a = o; r >= a;) a += n;
                        l -= 4
                    } else s.push(r, c)
                }
                if (0 === t)
                    for (l = 0; l < i.length; l++) i[l].push(0, 0);
                else {
                    var u = n / 16,
                        p = t;
                    for (l = 0; l < i.length; l++) {
                        var d = i[l];
                        for (o = d[0], a = d[d.length - 2], r = a; r > o; r -= u) d.push(r, p);
                        d.push(o, p)
                    }
                }
                return i
            },
            computeCartesianFill: function(e, t) {
                return e = e.slice(), e.push(e[e.length - 2], t), e.push(e[0], t), [e]
            }
        };
        return e
    }), define("graphing/constants", ["require", "exports"], function(e, t) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.ANIMATE_ZOOM_DURATION = 500, t.DOUBLETAP_ZOOM = 2, t.ZOOM_FACTOR = 1.0625, t.MAX_DOTTED_SEGMENTS = 1e3, t.FILL_ALPHA = .4, t.POINT_ALPHA = .9, t.HIGHLIGHTED_POINT_ALPHA = .6, t.POLAR_ALPHA = .2, t.POI_ALPHA = .01, t.OFFSCREEN_RENDER_MARGIN = 20
    }), define("graphing/dasheddrawer", ["require", "./constants", "math/distance"], function(e) {
        function t(e, t, r) {
            return this.pattern = r, this.replen = this.pattern[0] + this.pattern[1], null !== t && t / this.replen > n.MAX_DOTTED_SEGMENTS && (this.pattern[0] = t * this.pattern[0] / this.replen / n.MAX_DOTTED_SEGMENTS, this.pattern[1] = t * this.pattern[1] / this.replen / n.MAX_DOTTED_SEGMENTS), this.pstate = 0, this.dstaccum = 0, this.px = null, this.py = null, this.ctx = e, this
        }
        var n = e("./constants"),
            r = e("math/distance");
        return t.getTotalSegmentLength = function(e) {
            if (e.length < 4) return 0;
            for (var t = 0, n = e[0], i = e[1], o = 2; o < e.length; o += 2) {
                var a = e[o],
                    s = e[o + 1];
                t += r.hypot(a - n, s - i), n = a, i = s
            }
            return t
        }, t.prototype.start = function(e, t) {
            this.ctx.desmos_batching || this.ctx.beginPath(), this.px = e, this.py = t
        }, t.prototype.next = function(e, t) {
            var n = this.pattern[this.pstate],
                r = Math.sqrt(Math.pow(e - this.px, 2) + Math.pow(t - this.py, 2));
            if (r > 1e-5) {
                for (; r + this.dstaccum >= n;) {
                    var i = e - this.px,
                        o = t - this.py,
                        a = n - this.dstaccum;
                    i *= a / r, o *= a / r, 0 === this.pstate && (this.ctx.moveTo(this.px, this.py), this.ctx.lineTo(this.px + i, this.py + o)), this.dstaccum = 0, this.px += i, this.py += o, this.pstate = 1 - this.pstate, n = this.pattern[this.pstate], r -= a
                }
                0 === this.pstate && (this.ctx.moveTo(this.px, this.py), this.ctx.lineTo(e, t))
            }
            this.px = e, this.py = t, this.dstaccum += r
        }, t.prototype.skip = function(e, t) {
            this.px = e, this.py = t
        }, t.prototype.close = function() {
            this.ctx.desmos_batching || this.ctx.stroke(), this.pstate = 0, this.dstaccum = 0, this.px = null, this.py = null
        }, t
    }), define("graphing/draw-image-to-ctx", ["require", "exports", "graphing-calc/models/list"], function(e, t, n) {
        "use strict";

        function r(e, t, r) {
            if (e.computed_x)
                for (var i = 0; i < e.computed_x.length; i++) {
                    var o = e.computed_x[i],
                        a = e.computed_y[i],
                        s = e.computed_width[i],
                        l = e.computed_height[i],
                        c = e.computed_radian_angle[i];
                    if (isFinite(o) && isFinite(a) && isFinite(s) && isFinite(l) && isFinite(c)) {
                        t.save(), t.globalAlpha = e.computed_opacity[i];
                        var u = r.mapy(l) - r.mapy(0),
                            p = r.mapx(s) - r.mapx(0),
                            d = 0 === c ? 1 : Math.abs(p / s * (l / u)),
                            h = r.mapx(o),
                            f = r.mapy(a),
                            m = h - p / 2,
                            g = f + u * d / 2,
                            y = l < 0 ? -1 : 1,
                            v = s < 0 ? -1 : 1,
                            b = m * v,
                            x = g * y,
                            w = Math.abs(p),
                            _ = Math.abs(u);
                        0 !== c && (t.translate(h, f), t.scale(1, 1 / d), t.rotate(c), t.translate(-h, -f)), t.scale(v, y);
                        var S = !1,
                            E = !1,
                            M = e.controller.getGrapher();
                        M && (S = M.clickableObjectsLayer.shouldDrawHovered(e.id), E = M.clickableObjectsLayer.shouldDrawPressed(e.id));
                        var I = e.imageObj;
                        E ? e.depressedImageObj ? I = e.depressedImageObj : x += 1 : S && (e.hoveredImageObj ? I = e.hoveredImageObj : t.globalAlpha *= .8), t.drawImage(I, b, x, w, _ * d), n.isItemSelected(e) && (t.beginPath(), t.rect(b, x, w, _ * d), t.restore(), t.save(), t.strokeStyle = "#6993C7", t.lineWidth = 2, t.stroke()), t.restore()
                    }
                }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.drawImageToCtx = r
    }), define("graphing/graphslayer", ["require", "pjs", "./clipping", "./dasheddrawer", "./constants", "./viewport", "graphing/graphmode", "underscore", "expressions/colors", "expressions/styles", "expressions/styles", "./draw-image-to-ctx"], function(e) {
        var t = e("pjs"),
            n = e("./clipping"),
            r = e("./dasheddrawer"),
            i = e("./constants"),
            o = e("./viewport").Viewport,
            a = e("graphing/graphmode"),
            s = e("underscore"),
            l = e("expressions/colors"),
            c = e("expressions/styles").PointStyle,
            u = e("expressions/styles").LineStyle,
            p = e("./draw-image-to-ctx").drawImageToCtx,
            d = {},
            h = function(e) {
                return new o(-3, e.width + 3, -3, e.height + 3)
            },
            f = function(e) {
                return Math.round(e - .5) + .5
            },
            m = t(function(e) {
                e.init = function(e) {
                    if (e.config.plaidMode)
                        for (var t in l) l.hasOwnProperty(t) && "string" == typeof l[t] && (d[l[t]] = document.createElement("img"), d[l[t]].setAttribute("src", "/assets/img/april-fools/" + t.toLowerCase() + ".png"))
                }, e.redrawToCtx = function(e, t, n, r, i, o, a) {
                    if (void 0 === i) throw new Error("Programming Error: missing drawOrder argument to redrawToCtx");
                    i.forEach(function(i) {
                        var s = n[i],
                            l = r[i];
                        void 0 !== s && s.visible && m.drawSketchToCtx(n[i], e, t, o, a), l && l.shouldGraph && l.foreground && p(l, e, t)
                    })
                }
            });
        return m.eachSegment = function(e, t) {
            for (var n = 0; n < e.branches.length; n++)
                for (var r = e.branches[n], i = 0; i < r.segments.length; i++) {
                    var o = r.segments[i];
                    t(r, o)
                }
        }, m.drawSketchToCtx = function(e, t, n, r, i) {
            if (e.branches && e.branches.length) {
                var o = t.lineWidth,
                    s = n.settings.globalCurveColor ? n.settings.globalCurveColor : e.color,
                    l = d[s];
                if (l && l.complete && l.naturalWidth > 0) {
                    var c = t.createPattern(l, "repeat");
                    t.fillStyle = c
                } else t.fillStyle = s;
                t.strokeStyle = s, t.lineJoin = "round", t.lineCap = "round";
                var p = !!n.settings.takingScreenshot,
                    h = 1;
                i.shouldDrawHovered(e.id) && (h = 1.2), i.shouldDrawPressed(e.id) && (h = 1.4);
                for (var f = 0; f < e.branches.length; f++) {
                    var g = e.branches[f];
                    if (g.graphMode !== a.XYPOINT && g.graphMode !== a.XYPOINT_MOVABLE) {
                        g.graphMode !== a.POLAR && (t.desmos_batching = !0, t.beginPath());
                        for (var y = 0; y < g.segments.length; y++) {
                            var v = g.segments[y],
                                b = a.Y;
                            if (g.flip && (b = a.X), g.graphMode && (b = g.graphMode), b !== a.POLYGONFILL || n.settings.disableFill) {
                                if (b !== a.IMPLICIT) {
                                    var x = g.operator,
                                        w = !n.settings.disableFill && ("<" == x || ">" == x || "<=" == x || ">=" == x || "\\leq" == x || "\\le" == x || "\\geq" == x || "\\ge" == x),
                                        _ = "<=" == x || "<" == x || "\\leq" == x || "\\le" == x;
                                    w && m.fillGraphStrokeToCtx(t, n, v, _, b)
                                }
                            } else m.fillPolygonToCtx(t, n, v, g.fillOpacity * h)
                        }
                        t.globalAlpha = this._clampedOpacity(g.fillOpacity * h), g.graphMode !== a.POLAR && (t.fill(), t.desmos_batching = !1), t.globalAlpha = 1
                    }
                }
                t.lineWidth = n.settings.graphLineWidth, e.style === u.DOTTED && (t.lineWidth = 2 * n.settings.graphLineWidth), m.eachSegment(e, function(r, o) {
                    if (r.graphMode !== a.XYPOINT && r.graphMode !== a.XYPOINT_MOVABLE) {
                        var s = a.Y;
                        r.flip && (s = a.X), r.graphMode && (s = r.graphMode);
                        var l = r.operator,
                            c = "default";
                        "<" == l || ">" == l || "!=" == l || e.style === u.DASHED || r.style === u.DASHED ? c = u.DASHED : e.style === u.DOTTED || r.style === u.DOTTED ? (c = u.DOTTED, t.lineWidth = 2 * n.settings.graphLineWidth) : e.style !== u.SINGLE_PIXEL && r.style !== u.SINGLE_PIXEL || (c = u.SINGLE_PIXEL, t.lineWidth = 1);
                        var p = i.shouldDrawPressed(e.id),
                            d = i.shouldDrawHovered(e.id);
                        (p || d) && (t.save(), t.lineWidth += 4.5, t.globalAlpha *= p ? .5 : .3, m.drawGraphStrokeToCtx(t, n, o, c, s, l), t.restore()), m.drawGraphStrokeToCtx(t, n, o, c, s, l)
                    }
                }), t.lineWidth = o, m.eachSegment(e, function(o, s) {
                    if (o.graphMode === a.XYPOINT && o.showPoint || o.graphMode === a.XYPOINT_MOVABLE && p) {
                        var l, c = [];
                        if (o.interactiveLabel && e.labels)
                            for (var u = 0, d = e.labels.length; u < d; u++) {
                                var h = e.labels[u],
                                    f = r.isOpenPOI(h),
                                    g = r.getHoveredPOI() === h;
                                c.push(f || g), !f && g && (l = u)
                            }
                        var y = 1;
                        "medium" === o.pointSize ? y = 1.5 : "large" === o.pointSize && (y = 2.25);
                        var v = i.shouldDrawPressed(e.id),
                            b = i.shouldDrawHovered(e.id),
                            x = 1;
                        v ? x = .5 : b && (x = .3), 1 !== x && (m.drawPointsToCtx(t, n, s, o.style, c, l, 1.5 * y, x), t.restore()), m.drawPointsToCtx(t, n, s, o.style, c, l, y, 1)
                    }
                }.bind(this))
            }
        }, m.drawGraphStrokeToCtx = function(e, t, i, o, a, s) {
            e.save(), e.globalAlpha *= t.settings.curveOpacity;
            var l, c, p = m.getClippingGraphType(a, "=" !== s, t.settings),
                d = n.mapSegmentToCanvas(i, t.viewport, t.screen, p),
                g = n.clipStrokeEdges(d, h(t.screen));
            if (o == u.DASHED) {
                for (c = new r(e, r.getTotalSegmentLength(g), [11, 7]), c.start(g[0], g[1]), l = 2; l < g.length; l += 2) c.next(g[l], g[l + 1]);
                c.close()
            } else if (o == u.DOTTED) {
                for (c = t.settings.config.projectorMode ? new r(e, r.getTotalSegmentLength(g), [.1, 16]) : new r(e, r.getTotalSegmentLength(g), [.1, 8]), c.start(g[0], g[1]), l = 2; l < g.length; l += 2) c.next(g[l], g[l + 1]);
                c.close()
            } else if (o === u.SINGLE_PIXEL) {
                e.desmos_batching || e.beginPath();
                var y = g.length > 4 || g[0] !== g[2] && g[1] !== g[3];
                if (y)
                    for (e.moveTo(g[0], g[1]), l = 0; l < g.length; l += 2) e.lineTo(g[l], g[l + 1]);
                else
                    for (e.moveTo(f(g[0]), f(g[1])), l = 0; l < g.length; l += 2) e.lineTo(f(g[l]), f(g[l + 1]));
                e.desmos_batching || e.stroke()
            } else {
                for (e.desmos_batching || e.beginPath(), e.moveTo(g[0], g[1]), l = 0; l < g.length; l += 2) e.lineTo(g[l], g[l + 1]);
                e.desmos_batching || e.stroke()
            }
            e.restore()
        }, m.mapPointToScreen = function(e, t, n) {
            var r = e.mapx(t) - .5;
            if (r < -20 || r > e.screen.width + 20) return null;
            var i = e.mapy(n) - .5;
            return i < -20 || i > e.screen.height + 20 ? null : {
                x: r,
                y: i
            }
        }, m.drawPointToCtx = function(e, t, n, r, o, a, s, l, u) {
            var p, d = e.lineWidth,
                h = e.fillStyle,
                f = m.mapPointToScreen(t, n, r);
            if (!f) return !1;
            e.globalAlpha = o || i.POINT_ALPHA, u && (e.globalAlpha *= u), e.desmos_batching || e.beginPath();
            var g = t.settings.pointLineWidth;
            return s && (g = t.settings.config.projectorMode ? 17 : 11, e.lineWidth = g), l && (g *= l, e.lineWidth = g), a === c.CROSS ? (p = .4 * g, e.moveTo(f.x - p, f.y - p), e.lineTo(f.x + p, f.y + p), e.moveTo(f.x + p, f.y - p), e.lineTo(f.x - p, f.y + p), e.lineWidth = .3 * g) : a === c.OPEN ? (p = .42 * g, e.moveTo(f.x + p, f.y), e.arc(f.x, f.y, p, 0, 2 * Math.PI, !0), e.closePath(), e.fillStyle = "white", e.lineWidth = .25 * g, e.fill()) : (e.moveTo(f.x - .1, f.y - .1), e.lineTo(f.x - .1, f.y + .1), e.lineTo(f.x + .1, f.y + .1), e.lineTo(f.x + .1, f.y - .1)), e.desmos_batching || e.stroke(), e.globalAlpha = 1, e.lineWidth = d, e.fillStyle = h, !0
        }, m.drawPointsToCtx = function(e, t, n, r, o, a, s, l) {
            var c = e.lineWidth;
            e.lineWidth = t.settings.pointLineWidth;
            for (var u = 0; u < n.length; u++) m.drawPointToCtx(e, t, n[u][0], n[u][1], a === u && i.HIGHLIGHTED_POINT_ALPHA, r, o[u], s, l);
            e.lineWidth = c
        }, m.fillGraphStrokeToCtx = function(e, t, r, o, s) {
            e.globalAlpha = s === a.POLAR ? i.POLAR_ALPHA : i.FILL_ALPHA;
            var l, c = null,
                u = null;
            if (s === a.POLAR) {
                u = n.ALL;
                var p = o ? 0 : t.viewport.polarDiameter(),
                    d = t.settings.degreeMode ? 180 : 2 * Math.PI;
                c = n.computePolarFill(r, p, d)
            } else s === a.Y ? (u = n.Y, l = o ? t.viewport.ymin : t.viewport.ymax, c = n.computeCartesianFill(r, l)) : s === a.X && (u = n.X, l = o ? t.viewport.xmin : t.viewport.xmax, c = n.computeCartesianFill(r, l));
            for (var f = h(t.screen), g = 0; g < c.length; g++) {
                var y = m.getClippingGraphType(s, !0, t.settings),
                    v = n.mapSegmentToCanvas(c[g], t.viewport, t.screen, y),
                    b = n.clipFillEdges(v, f, u);
                if (b.length >= 6) {
                    e.desmos_batching || e.beginPath(), e.moveTo(b[0], b[1]);
                    for (var x = 2; x < b.length; x += 2) e.lineTo(b[x], b[x + 1]);
                    e.lineTo(b[0], b[1]), e.desmos_batching || e.fill()
                }
            }
            e.globalAlpha = 1
        }, m._clampedOpacity = function(e) {
            return e < 0 ? 0 : e > 1 ? 1 : s.isFinite(e) ? e : i.FILL_ALPHA
        }, m.fillPolygonToCtx = function(e, t, r, i) {
            var o = h(t.screen);
            e.globalAlpha = this._clampedOpacity(i);
            var a = n.mapSegmentToCanvas(r, t.viewport, t.screen, n.Y_EQUALS),
                s = n.clipFillEdges(a, o, n.ALL);
            if (s.length >= 6) {
                e.desmos_batching || e.beginPath(), e.moveTo(s[0], s[1]);
                for (var l = 2; l < s.length; l += 2) e.lineTo(s[l], s[l + 1]);
                e.desmos_batching || e.fill()
            }
            e.globalAlpha = 1
        }, m.getClippingGraphType = function(e, t, r) {
            switch (e) {
                case a.X:
                    return n.X_EQUALS;
                case a.IMPLICIT:
                case a.PARAMETRIC:
                case a.Y:
                    return n.Y_EQUALS;
                case a.POLAR:
                    return r.degreeMode ? t ? n.POLAR_DEGREE_INEQUALITY : n.POLAR_DEGREE_EQUALITY : t ? n.POLAR_RADIAN_INEQUALITY : n.POLAR_RADIAN_EQUALITY
            }
        }, m
    }), define("graphing/poidotslayer", ["require", "loadcss!poi", "pjs", "./graphslayer", "./constants"], function(e) {
        e("loadcss!poi");
        var t = e("pjs"),
            n = e("./graphslayer"),
            r = e("./constants"),
            i = t(function(e) {
                e.init = function() {
                    this.savedPOI = []
                }, e.redrawToCtx = function(e, t, n, r, o) {
                    var a = [];
                    for (var s in n) {
                        var l = n[s];
                        if (l.visible) {
                            l.showHighlight && i.drawSketchHighlight(l, e, t, r, o);
                            var c = l.getPOI();
                            (l.showPOI || c.length && c[0].isAttachedToPlottedPoint()) && a.push.apply(a, i.drawPOIs(c, e, "#AAAAAA", t))
                        }
                    }
                    this.savedPOI = a
                }, e.getDrawnPOI = function() {
                    return this.savedPOI
                }
            });
        return i.drawSketchHighlight = function(e, t, r, i, o) {
            r.settings.setProperty("highlight", !0), n.drawSketchToCtx(e, t, r, i, o), r.settings.setProperty("highlight", !1)
        }, i.drawPOIs = function(e, t, i, o) {
            t.lineWidth = o.settings.pointLineWidth, t.strokeStyle = i || "#AAAAAA", t.fillStyle = i || "#AAAAAA", t.lineJoin = "round", t.lineCap = "round";
            var a = t.globalAlpha;
            t.globalAlpha = r.POI_ALPHA;
            var s, l, c = [],
                u = e.length;
            if (u && e[0].isAttachedToPlottedPoint())
                for (s = 0; s < u; s++) l = e[s], n.mapPointToScreen(o, l.x, l.y) && c.push(l);
            else
                for (s = 0; s < u; s++) l = e[s], n.drawPointToCtx(t, o, l.x, l.y) && c.push(l);
            return t.globalAlpha = a, c
        }, i
    }), define("graphing/stepnumber", ["require", "pjs"], function(e) {
        var t = e("pjs"),
            n = document.createElement("canvas").getContext("2d"),
            r = t(function(e) {
                e.init = function(e, t) {
                    this._label = e, this._fontSize = t, this._layout = this._computeLayout(e, t)
                }, e._computeLayout = function(e, t) {
                    var i = {};
                    return e.superscript ? (i.mantissa_height = t, r.setCtxFontSize(n, i.mantissa_height), i.mantissa_width = n.measureText(e.mantissa).width, i.superscript_height = Math.round(.8 * t), r.setCtxFontSize(n, i.superscript_height), i.superscript_width = n.measureText(e.superscript).width, i.mantissa_x = 0, i.mantissa_y = t / 5, i.superscript_x = i.mantissa_width / 2 + i.superscript_width / 2, i.superscript_y = -t / 4, i.top = i.superscript_y - i.superscript_height / 2, i.bottom = i.mantissa_y + i.mantissa_height / 2, i.left = i.mantissa_x - i.mantissa_width / 2, i.right = i.superscript_x + i.superscript_width / 2) : (i.mantissa_height = t, r.setCtxFontSize(n, t), i.mantissa_width = n.measureText(e.string).width, i.mantissa_x = 0, i.mantissa_y = 0, i.top = i.mantissa_y - i.mantissa_height / 2, i.bottom = i.mantissa_y + i.mantissa_height / 2, i.left = i.mantissa_x - i.mantissa_width / 2, i.right = i.mantissa_x + i.mantissa_width / 2), i
                }, e.getRect = function() {
                    return this.getRectWhenCenteredAt({
                        x: 0,
                        y: 0
                    })
                }, e.getRectWhenCenteredAt = function(e) {
                    return {
                        left: this._layout.left + e.x,
                        right: this._layout.right + e.x,
                        top: this._layout.top + e.y,
                        bottom: this._layout.bottom + e.y
                    }
                }, e.getWidth = function() {
                    return this._layout.right - this._layout.left
                }, e.getHeight = function() {
                    return this._layout.bottom - this._layout.top
                }, e.clampBoundsWithinRect = function(e, t) {
                    var n = {};
                    return e.x + this._layout.left < t.left ? n.x = t.left - this._layout.left : e.x + this._layout.right > t.right ? n.x = t.right - this._layout.right : n.x = e.x, e.y + this._layout.top < t.top ? n.y = t.top - this._layout.top : e.y + this._layout.bottom > t.bottom ? n.y = t.bottom - this._layout.bottom : n.y = e.y, n
                }, e.getValue = function() {
                    return this._label.value
                }, e.getMinusWidth = function() {
                    return this.getValue() < 0 ? (r.setCtxFontSize(n, this._fontSize), n.measureText("-1").width - n.measureText("1").width) : 0
                }, e.getString = function() {
                    return this._label.superscript ? this._label.mantissa + "^" + this._label.superscript : this._label.string
                }, e.drawCenteredAt = function(e, t) {
                    var n = t.x,
                        i = t.y;
                    e.save(), r.setCtxFontSize(e, this._fontSize), this._label.superscript ? (e.strokeText(this._label.mantissa, this._layout.mantissa_x + n, this._layout.mantissa_y + i), e.strokeText(this._label.superscript, this._layout.superscript_x + n, this._layout.superscript_y + i), e.fillText(this._label.mantissa, this._layout.mantissa_x + n, this._layout.mantissa_y + i), e.fillText(this._label.superscript, this._layout.superscript_x + n, this._layout.superscript_y + i)) : (e.strokeText(this._label.string, this._layout.mantissa_x + n, this._layout.mantissa_y + i), e.fillText(this._label.string, this._layout.mantissa_x + n, this._layout.mantissa_y + i)), e.restore()
                }
            });
        return r.setCtxFontSize = function(e, t) {
            e.font = t + "px Arial", e.textAlign = "center", e.textBaseline = "middle"
        }, r
    }), define("graphing/computestepsizes", ["require", "./stepnumber", "./label"], function(e) {
        function t(e) {
            return e ? {
                base: 10,
                major: [e, 2 * e, 5 * e],
                minor: [4, 4, 5]
            } : i.RATIONAL_STEPS
        }
        var n = e("./stepnumber"),
            r = e("./label"),
            i = {},
            o = function(e, t, n, r) {
                var i = Math.ceil(e / n),
                    o = Math.floor(t / n),
                    a = 1 / n;
                if (!(i > o || o - i > 1e4))
                    for (var s = i; s <= o; s++) r(s / a)
            };
        return i.RATIONAL_STEPS = {
            base: 10,
            major: [1, 2, 5],
            minor: [5, 4, 5]
        }, i.PI_STEPS = {
            base: 10,
            major: [Math.PI, 2 * Math.PI, 5 * Math.PI],
            minor: [4, 4, 5]
        }, i.PI_FRAC_STEPS = {
            base: 2,
            major: [Math.PI / 3],
            minor: [3]
        }, i.bestStep = function(e, t) {
            for (var n, r, i, o, a = 1 / 0, s = 0; s < t.major.length; s++) n = t.major[s], i = Math.ceil(Math.log(e / n) / Math.log(t.base)), (o = n * Math.pow(t.base, i)) < a && (a = o, r = a / t.minor[s]);
            return {
                major: a,
                minor: r
            }
        }, i.countStepsInRange = function(e, t, n) {
            return 1 + (t - e) / n
        }, i.calculateSpaceBetweenRects = function(e, t) {
            var n, r;
            return r = e.right < t.left ? t.left - e.right : t.right < e.left ? e.left - t.right : 0, n = e.bottom < t.top ? t.top - e.bottom : t.bottom < e.top ? e.top - t.bottom : 0, Math.max(n, r)
        }, i.estimateMajors = function(e) {
            var t = e.screen.width,
                n = e.screen.height,
                r = e.viewport.xmax - e.viewport.xmin,
                i = e.viewport.ymax - e.viewport.ymin,
                o = e.settings.pixelsPerLabel;
            return {
                majorStepX: o / t * r,
                majorStepY: o / n * i
            }
        }, i.cartesian = function(e) {
            var a, s = {},
                l = Math.abs(e.settings.xAxisStep),
                c = Math.abs(e.settings.yAxisStep),
                u = e.viewport.xmax - e.viewport.xmin,
                p = e.viewport.ymax - e.viewport.ymin,
                d = r.value(l, u).string.indexOf("π") >= 0,
                h = r.value(c, p).string.indexOf("π") >= 0,
                f = i.countStepsInRange(e.viewport.xmin, e.viewport.xmax, l),
                m = i.countStepsInRange(e.viewport.ymin, e.viewport.ymax, c),
                g = i.estimateMajors(e),
                y = e.settings.labelSize;
            if (l && l !== Math.PI && f >= 3 && f < 100) {
                var v = 0;
                e.settings.xAxisNumbers && o(e.viewport.xmin, e.viewport.xmax, l, function(e) {
                    var t = n(r.value(e, u), y);
                    v = Math.max(t.getWidth(), v)
                }), a = v + 10, e.settings.xAxisNumbers || (a = 1 === e.settings.xAxisMinorSubdivisions ? 8 : 20), f * a <= e.screen.width && (s.majorStepX = l, s.minorStepX = 3 === l || 5 === l ? 1 : l / 4)
            }
            if (c && c !== Math.PI && m >= 3 && m < 100) {
                var b = 0;
                e.settings.yAxisNumbers && o(e.viewport.ymin, e.viewport.ymax, c, function(e) {
                    var t = n(r.value(e, p), y);
                    b = Math.max(t.getHeight(), b)
                }), a = b + 10, e.settings.yAxisNumbers || (a = 1 === e.settings.yAxisMinorSubdivisions ? 8 : 20), m * a <= e.screen.height && (s.majorStepY = c, s.minorStepY = 3 === c || 5 === c ? 1 : c / 4)
            }
            if (!s.majorStepX) {
                var x;
                x = d ? g.majorStepX >= 1 ? i.PI_STEPS : i.PI_FRAC_STEPS : t(l);
                var w = i.bestStep(g.majorStepX, x);
                s.majorStepX = w.major, s.minorStepX = w.minor
            }
            if (!s.majorStepY) {
                var _;
                _ = h ? g.majorStepY >= 1 ? i.PI_STEPS : i.PI_FRAC_STEPS : t(c);
                var S = i.bestStep(g.majorStepY, _);
                s.majorStepY = S.major, s.minorStepY = S.minor
            }
            if (l === c) {
                var E = e.screen.width / u / (e.screen.height / p);
                E >= 1 && E <= 2 ? (s.majorStepX = s.majorStepY, s.minorStepX = s.minorStepY) : E <= 1 && E >= .5 && (s.majorStepY = s.majorStepX, s.minorStepY = s.minorStepX)
            }
            return e.settings.xAxisMinorSubdivisions > 0 && (s.minorStepX = s.majorStepX / e.settings.xAxisMinorSubdivisions), e.settings.yAxisMinorSubdivisions > 0 && (s.minorStepY = s.majorStepY / e.settings.yAxisMinorSubdivisions), s
        }, i.polar = function(e) {
            var t = i.estimateMajors(e),
                n = i.bestStep(t.majorStepX, i.RATIONAL_STEPS),
                r = i.bestStep(t.majorStepY, i.RATIONAL_STEPS),
                o = n.major > r.major ? n : r;
            return {
                majorStepR: o.major,
                minorStepR: o.minor
            }
        }, i
    }), define("graphing/gridlayer", ["require", "pjs", "./stepnumber", "./label", "./computestepsizes", "graphing-calc/json/graph-settings"], function(e) {
        var t = e("pjs"),
            n = e("./stepnumber"),
            r = e("./label"),
            i = e("./computestepsizes"),
            o = e("graphing-calc/json/graph-settings").AxisArrowModes,
            a = t(function(e) {
                e.redrawToCtx = function(e, t, n) {
                    var r, o, a = t.settings.showGrid;
                    if (t.settings.polarMode && a) r = i.polar(t), this.drawPolarGrid(e, t, r), this.drawAxes(e, t, n), o = this.drawPolarStepNumbers(e, t, r), this.drawLabels(e, t, o);
                    else {
                        r = i.cartesian(t), a && this.drawCartesianGrid(e, t, r);
                        var s = !a;
                        this.drawAxes(e, t, n), o = this.drawCartesianStepNumbers(e, t, r, s), this.drawLabels(e, t, o)
                    }
                }, e.addTextShadow = function(e, t) {
                    e.strokeStyle = t.settings.getBackgroundColor(), e.lineWidth = 3,
                        e.miterLimit = 2
                }, e.drawPolarGrid = function(e, t, n) {
                    e.save();
                    var r = t.settings.minorAxisOpacity,
                        i = t.settings.majorAxisOpacity,
                        o = 1 - (1 - i) / (1 - r),
                        a = Math.round(t.mapx(0)) - .5,
                        l = Math.round(t.mapy(0)) - .5,
                        c = t.screen.height / (t.viewport.ymax - t.viewport.ymin),
                        u = t.screen.width / (t.viewport.xmax - t.viewport.xmin),
                        p = c / u,
                        d = u / c,
                        h = l / p,
                        f = t.viewport.smallestR(),
                        m = t.viewport.largestR(),
                        g = n.minorStepR * Math.max(1, Math.floor(f / n.minorStepR)),
                        y = n.majorStepR * Math.max(1, Math.floor(f / n.majorStepR));
                    e.lineWidth = 1, e.strokeStyle = "rgba(0, 0 , 0, " + r + ")", e.save(), s(g, m, n.minorStepR, function(n) {
                        e.beginPath(), e.scale(1, p);
                        var r = t.mapx(n) - a;
                        e.moveTo(a + r, h), e.arc(a, h, r, 0, 2 * Math.PI), e.scale(1, d), e.stroke()
                    }), e.restore(), s(0, 359, f > 0 ? 5 : 15, function(n) {
                        if ((0 !== n && 180 !== n || !t.settings.showXAxis) && (90 !== n && 270 !== n || !t.settings.showYAxis)) {
                            e.beginPath(), e.moveTo(a, l);
                            var r = t.mapx(m * Math.cos(n * Math.PI / 180)),
                                i = t.mapy(m * Math.sin(n * Math.PI / 180));
                            e.lineTo(Math.round(r) - .5, Math.round(i) - .5), e.stroke()
                        }
                    }), e.lineWidth = 1, e.strokeStyle = "rgba(0, 0 , 0, " + o + ")", e.save(), s(y, m, n.majorStepR, function(n) {
                        e.beginPath(), e.scale(1, p);
                        var r = t.mapx(n) - a;
                        e.moveTo(a + r, h), e.arc(a, h, r, 0, 2 * Math.PI), e.scale(1, d), e.stroke()
                    }), e.restore()
                }, e.drawCartesianGrid = function(e, t, n) {
                    e.save();
                    var r = t.viewport.xmin,
                        i = t.viewport.ymin,
                        o = t.viewport.xmax,
                        a = t.viewport.ymax,
                        l = t.screen.width,
                        c = t.screen.height,
                        u = c,
                        p = 0;
                    t.settings.restrictGridToFirstQuadrant && (r = 0, i = 0, u = t.mapy(0), p = t.mapx(0));
                    var d = t.settings.minorAxisOpacity,
                        h = t.settings.majorAxisOpacity;
                    e.lineWidth = 1, e.strokeStyle = "rgba(0, 0 , 0, " + d + ")", s(r, o, n.minorStepX, function(n) {
                        if (0 !== n || !t.settings.showYAxis) {
                            var r = Math.round(t.mapx(n));
                            r !== l && (e.beginPath(), e.moveTo(r - .5, 0), e.lineTo(r - .5, u), e.stroke())
                        }
                    }), s(i, a, n.minorStepY, function(n) {
                        if (0 !== n || !t.settings.showXAxis) {
                            var r = Math.round(t.mapy(n));
                            r !== c && (e.beginPath(), e.moveTo(p, r - .5), e.lineTo(l, r - .5), e.stroke())
                        }
                    });
                    var f = 1 - (1 - h) / (1 - d);
                    e.strokeStyle = "rgba(0, 0 , 0, " + f + ")", s(r, o, n.majorStepX, function(n) {
                        if (0 !== n || !t.settings.showYAxis) {
                            var r = Math.round(t.mapx(n));
                            r !== l && (e.beginPath(), e.moveTo(r - .5, 0), e.lineTo(r - .5, u), e.stroke())
                        }
                    }), s(i, a, n.majorStepY, function(n) {
                        if (0 !== n || !t.settings.showXAxis) {
                            var r = Math.round(t.mapy(n));
                            r !== c && (e.beginPath(), e.moveTo(p, r - .5), e.lineTo(l, r - .5), e.stroke())
                        }
                    }), e.restore()
                }, e.drawAxes = function(e, t, n) {
                    function r(t, n, r) {
                        e.save();
                        var i = Math.PI / 12,
                            o = 8 * Math.max(e.lineWidth, 1.5);
                        e.lineJoin = "round", e.fillStyle = l, e.strokeStyle = l, e.beginPath(), e.moveTo(t, n), e.lineTo(t + Math.cos(r - i) * o, n + Math.sin(r - i) * o), e.lineTo(t + Math.cos(r + i) * o, n + Math.sin(r + i) * o), e.lineTo(t, n), e.lineTo(t + Math.cos(r - i) * o, n + Math.sin(r - i) * o), e.stroke(), e.fill(), e.restore()
                    }
                    var i = t.settings.axisLineOffset,
                        a = t.settings.axisOpacity.toString(),
                        s = "rgba(127,205,230," + a + ")",
                        l = "rgba(0,0,0," + a + ")",
                        c = t.settings.xAxisArrowMode,
                        u = t.settings.yAxisArrowMode,
                        p = t.settings.showXAxis,
                        d = t.settings.showYAxis,
                        h = Math.round(t.mapx(0)) - i,
                        f = Math.round(t.mapy(0)) - i,
                        m = t.screen.height,
                        g = t.screen.width,
                        y = m,
                        v = 0;
                    t.settings.restrictGridToFirstQuadrant && (y = f, v = h, c === o.BOTH && (c = o.POSITIVE), u === o.BOTH && (u = o.POSITIVE)), d && (e.lineWidth = 1 * t.settings.axisLineWidth, e.strokeStyle = "y" === n ? s : l, u === o.BOTH ? (e.beginPath(), e.moveTo(h, 2 * t.settings.axisLineWidth), e.lineTo(h, m - 2 * t.settings.axisLineWidth), e.stroke(), r(h, m - t.settings.axisLineWidth, 3 * Math.PI / 2), r(h, t.settings.axisLineWidth, Math.PI / 2)) : u === o.POSITIVE ? (e.beginPath(), e.moveTo(h, 2 * t.settings.axisLineWidth), e.lineTo(h, y), e.stroke(), r(h, t.settings.axisLineWidth, Math.PI / 2)) : (e.beginPath(), e.moveTo(h, 0), e.lineTo(h, y), e.stroke())), p && (e.lineWidth = 1 * t.settings.axisLineWidth, e.strokeStyle = "x" === n ? s : l, c === o.BOTH ? (e.beginPath(), e.moveTo(2 * t.settings.axisLineWidth, f), e.lineTo(g - 2 * t.settings.axisLineWidth, f), e.stroke(), r(t.settings.axisLineWidth, f, 0), r(g - t.settings.axisLineWidth, f, Math.PI)) : c === o.POSITIVE ? (e.beginPath(), e.lineTo(v, f), e.lineTo(g - 2 * t.settings.axisLineWidth, f), e.stroke(), r(g - t.settings.axisLineWidth, f, Math.PI)) : (e.beginPath(), e.lineTo(v, f), e.lineTo(g, f), e.stroke()))
                }, e.drawPolarStepNumbers = function(e, t, i) {
                    function o(e, n, r) {
                        var i = Math.sqrt(e * e - n * n);
                        v <= i && i <= b && r.push({
                            x: t.mapx(n),
                            y: t.mapy(i)
                        }), v <= -i && -i <= b && r.push({
                            x: t.mapx(n),
                            y: t.mapy(-i)
                        })
                    }

                    function a(e, n, r) {
                        var i = Math.sqrt(e * e - n * n);
                        g <= i && i <= y && r.push({
                            x: t.mapx(i),
                            y: t.mapy(n)
                        }), g <= -i && -i <= y && r.push({
                            x: t.mapx(-i),
                            y: t.mapy(n)
                        })
                    }
                    e.save();
                    var u = t.settings.showGrid,
                        p = t.settings.xAxisNumbers && t.settings.showXAxis,
                        d = t.settings.yAxisNumbers && t.settings.showYAxis,
                        h = u && t.settings.polarNumbers,
                        f = t.viewport.largestR(),
                        m = t.viewport.smallestR(),
                        g = t.viewport.xmin,
                        y = t.viewport.xmax,
                        v = t.viewport.ymin,
                        b = t.viewport.ymax,
                        x = t.screen.width,
                        w = t.screen.height,
                        _ = {
                            left: 3,
                            right: x - 3,
                            top: 3,
                            bottom: w - 3
                        },
                        S = t.settings.labelHangingColor,
                        E = t.settings.getTextColor(),
                        M = t.settings.labelSize,
                        I = M;
                    e.textAlign = "center", e.textBaseline = "middle", this.addTextShadow(e, t), e.font = M.toString() + "px Arial", e.fillStyle = E;
                    var T = t.mapx(0),
                        C = t.mapy(0),
                        k = v <= 0 && 0 <= b,
                        D = g <= 0 && 0 <= y,
                        P = k && p,
                        L = D && d,
                        A = "";
                    if (!P && !L && u) {
                        var O, F, q, N, R = Math.abs(T),
                            B = Math.abs(T - x),
                            j = Math.abs(C),
                            V = Math.abs(C - w);
                        R <= B ? (O = "left", q = R) : (O = "right", q = B), j <= V ? (F = "top", N = j) : (F = "bottom", N = V), p && d ? A = q <= N ? O : F : d ? A = O : p && (A = F)
                    }
                    var z = {
                            left: 0,
                            right: x,
                            top: C - 1,
                            bottom: C + 1
                        },
                        U = {
                            left: T - 1,
                            right: T + 1,
                            top: 0,
                            bottom: w
                        };
                    if (s(0, f, i.majorStepR, function(i) {
                            var s = [],
                                l = [],
                                u = [],
                                h = n(r.value(i, f), M),
                                m = h.getRect();
                            switch (i > 0 ? (L && v <= i && i <= b && l.push({
                                x: T - m.right - 5,
                                y: t.mapy(i)
                            }), L && v <= -i && -i <= b && l.push({
                                x: T - m.right - 5,
                                y: t.mapy(-i)
                            }), P && g <= i && i <= y && s.push({
                                x: t.mapx(i),
                                y: C - m.top + 3
                            }), P && g <= -i && -i <= y && s.push({
                                x: t.mapx(-i),
                                y: C - m.top + 3
                            })) : L && !p && v <= i && i <= b ? l.push({
                                x: T - m.right - 5,
                                y: t.mapy(i)
                            }) : P && !d && g <= i && i <= y && s.push({
                                x: t.mapx(i),
                                y: C - m.top + 3
                            }), A) {
                                case "top":
                                    a(i, b, u);
                                    break;
                                case "bottom":
                                    a(i, v, u);
                                    break;
                                case "left":
                                    o(i, g, u);
                                    break;
                                case "right":
                                    o(i, y, u)
                            }
                            s.forEach(function(t) {
                                t = h.clampBoundsWithinRect(t, _), h.drawCenteredAt(e, t), c(z, h.getRectWhenCenteredAt(t))
                            }), l.forEach(function(t) {
                                t = h.clampBoundsWithinRect(t, _), h.drawCenteredAt(e, t), c(U, h.getRectWhenCenteredAt(t))
                            }), u.forEach(function(t) {
                                t = h.clampBoundsWithinRect(t, _), h.drawCenteredAt(e, t)
                            })
                        }), h) {
                        var G = Math.ceil(m / i.majorStepR),
                            H = Math.floor(f / i.majorStepR),
                            K = Math.ceil((G + H) / 2),
                            W = K * i.majorStepR;
                        s(0, 359, m > 0 ? 15 : 30, function(n) {
                            var i;
                            i = t.settings.degreeMode ? n.toString() + "°" : r.value(n * Math.PI / 180, 2 * Math.PI).string;
                            var o = e.measureText(i).width / 2,
                                a = W / 1.05,
                                s = a * Math.cos(n * Math.PI / 180),
                                c = a * Math.sin(n * Math.PI / 180);
                            if (!(s < g || s > y || c < v || c > b)) {
                                var u = t.mapx(s),
                                    p = t.mapy(c);
                                0 === n || 180 === n ? p -= I : 90 !== n && 270 !== n || (u += o + 3);
                                var d = l(u, 3 + o, x - 3 - o),
                                    h = l(p, 3 + I, w - 3 - I);
                                e.fillStyle = S, e.strokeText(i, d, h), e.fillText(i, d, h)
                            }
                        })
                    }
                    return e.restore(), {
                        x: z,
                        y: U
                    }
                }, e.drawLabels = function(e, t, n) {
                    var r = t.viewport.xmin,
                        i = t.viewport.xmax,
                        o = t.viewport.ymin,
                        a = t.viewport.ymax,
                        s = t.screen.width,
                        l = t.screen.height,
                        c = (i - r) / s,
                        p = (a - o) / l,
                        d = t.settings.getTextColor(),
                        h = t.mapx(0),
                        f = t.mapy(0),
                        m = t.settings.labelSize,
                        g = t.settings.showXAxis && t.settings.xAxisLabel,
                        y = t.settings.showYAxis && t.settings.yAxisLabel,
                        v = n.x,
                        b = n.y;
                    if (g && v) {
                        e.save(), e.fillStyle = d;
                        var x;
                        if (e.__xLabelOffset && t.settings.isViewportTransient && u(e.__xLabelOffset.xscale, c) && u(e.__xLabelOffset.yscale, p) && (x = {
                                x: e.__xLabelOffset.x + h,
                                y: e.__xLabelOffset.y + f
                            }), this._setAxisLabelFont(e, g, m, t), !x) {
                            var w = e.measureText(g).width,
                                _ = s - w - 15,
                                S = m;
                            x = v.bottom + S < l ? {
                                x: _,
                                y: v.bottom + S
                            } : {
                                x: _,
                                y: v.top - S / 2
                            }, e.__xLabelOffset = {
                                x: x.x - h,
                                y: x.y - f,
                                xscale: c,
                                yscale: p
                            }
                        }
                        e.strokeText(g, x.x, x.y), e.fillText(g, x.x, x.y), e.restore()
                    } else e.__xLabelPosition = null;
                    if (y && b) {
                        e.save(), e.fillStyle = d;
                        var E;
                        if (e.__yLabelOffset && t.settings.isViewportTransient && u(e.__yLabelOffset.xscale, c) && u(e.__yLabelOffset.yscale, p) && (E = {
                                x: e.__yLabelOffset.x + h,
                                y: e.__yLabelOffset.y + f
                            }), this._setAxisLabelFont(e, y, m, t), !E) {
                            var M = e.measureText(y).width,
                                I = m,
                                T = M + 5;
                            if (!this._isShortMathyLabel(y)) {
                                var C = M;
                                M = I, I = C, T = .5 * M
                            }
                            var k = 15 + I;
                            E = b.left - M > 0 ? {
                                x: b.left - T,
                                y: k
                            } : {
                                x: b.right + M,
                                y: k
                            }, e.__yLabelOffset = {
                                x: E.x - h,
                                y: E.y - f,
                                xscale: c,
                                yscale: p
                            }
                        }
                        e.translate(E.x, E.y), this._isShortMathyLabel(y) || e.rotate(-Math.PI / 2), e.strokeText(y, 0, 0), e.fillText(y, 0, 0), e.restore()
                    } else e.__yLabelPosition = null
                }, e._isShortMathyLabel = function(e) {
                    return e.trim().match(/^([a-zA-Z]?)\(?([a-zA-Z]?)\)?$/)
                }, e._setAxisLabelFont = function(e, t, n, r) {
                    this.addTextShadow(e, r), this._isShortMathyLabel(t) ? e.font = "italic " + Math.round(1.4 * n.toString()) + "px Times" : e.font = Math.round(1.2 * n.toString()) + "px Arial"
                }, e.drawCartesianStepNumbers = function(e, t, i, o) {
                    e.save();
                    var a = t.settings.showXAxis,
                        l = t.settings.showYAxis,
                        u = a && t.settings.xAxisNumbers,
                        p = l && t.settings.yAxisNumbers,
                        d = t.viewport.xmin,
                        h = t.viewport.xmax,
                        f = t.viewport.ymin,
                        m = t.viewport.ymax,
                        g = t.screen.width,
                        y = t.screen.height,
                        v = {
                            left: 3,
                            top: 3,
                            right: g - 3,
                            bottom: y - 3
                        };
                    t.settings.restrictGridToFirstQuadrant && (d = 0, f = 0);
                    var b = t.settings.labelHangingColor,
                        x = t.settings.getTextColor(),
                        w = t.mapx(0),
                        _ = t.mapy(0),
                        S = t.settings.labelSize;
                    this.addTextShadow(e, t);
                    var E = {
                            left: 0,
                            right: g,
                            top: _ - 1,
                            bottom: _ + 1
                        },
                        M = {
                            left: w - 1,
                            right: w + 1,
                            top: 0,
                            bottom: y
                        },
                        I = !1;
                    if (a && l && (u || p)) {
                        I = !0, e.fillStyle = x;
                        var T = n(r.value(0, 1), S);
                        T.drawCenteredAt(e, {
                            x: w - T.getRect().right - 5,
                            y: _ - T.getRect().top + 5
                        })
                    }
                    var C = [],
                        k = [];
                    if (u && s(d, h, i.majorStepX, function(e) {
                            var t = n(r.value(e, h - d), S);
                            "0" === t.getString() && I || C.push(t)
                        }), p && s(f, m, i.majorStepY, function(e) {
                            var t = n(r.value(e, m - f), S);
                            "0" === t.getString() && I || k.push(t)
                        }), o) {
                        e.save();
                        var D = t.settings.axisLineOffset,
                            P = t.settings.axisOpacity.toString(),
                            L = "rgba(0,0,0," + P + ")";
                        e.lineWidth = t.settings.axisLineWidth, e.strokeStyle = L;
                        var A = Math.round(t.mapy(0)) - D,
                            O = Math.round(t.mapx(0)) - D,
                            F = Math.round(2 * e.lineWidth) - D;
                        e.beginPath(), C.forEach(function(n) {
                            var r = Math.round(t.mapx(n.getValue())) - D;
                            e.moveTo(r, A - F), e.lineTo(r, A + F)
                        }), k.forEach(function(n) {
                            var r = Math.round(t.mapy(n.getValue())) - D;
                            e.moveTo(O - F, r), e.lineTo(O + F, r)
                        }), e.stroke(), e.restore()
                    }
                    return C.forEach(function(n) {
                        var r = {
                                x: t.mapx(n.getValue()) - .5 * n.getMinusWidth(),
                                y: _ - n.getRect().top + 5
                            },
                            i = n.clampBoundsWithinRect(r, v);
                        e.fillStyle = r.y === i.y ? x : b, n.drawCenteredAt(e, i), c(E, n.getRectWhenCenteredAt(i))
                    }), k.forEach(function(n) {
                        var r = {
                                x: w - 5 - n.getRect().right,
                                y: t.mapy(n.getValue())
                            },
                            i = n.clampBoundsWithinRect(r, v);
                        e.fillStyle = r.x === i.x ? x : b, n.drawCenteredAt(e, i), c(M, n.getRectWhenCenteredAt(i))
                    }), e.restore(), {
                        x: E,
                        y: M
                    }
                }
            }),
            s = function(e, t, n, r) {
                var i = Math.ceil(e / n),
                    o = Math.floor(t / n);
                if (isFinite(o - i) && !(o - i > 1e4))
                    for (var a = i; a <= o; a++) r(a * n)
            },
            l = function(e, t, n) {
                return e < t ? t : e > n ? n : e
            },
            c = function(e, t) {
                t.left < e.left && (e.left = t.left), t.right > e.right && (e.right = t.right), t.top < e.top && (e.top = t.top), t.bottom > e.bottom && (e.bottom = t.bottom)
            },
            u = function(e, t) {
                var n = Math.abs(e),
                    r = Math.abs(t);
                return Math.abs(n - r) <= 1e-4 * (n < r ? r : n)
            };
        return a
    }), define("graphing/imagelayer", ["require", "pjs", "underscore", "./draw-image-to-ctx"], function(e) {
        var t = e("pjs"),
            n = e("underscore"),
            r = e("./draw-image-to-ctx").drawImageToCtx;
        return t(function(e) {
            e.redrawToCtx = function(e, t, i, o) {
                (void 0 === o || o.length < n.size(i)) && (o = n.keys(i));
                for (var a = 0; a < o.length; a++) {
                    var s = i[o[a]];
                    s && s.shouldGraph && !s.foreground && r(s, e, t)
                }
            }
        })
    }), define("math/recttransformation", ["require", "exports"], function(e, t) {
        "use strict";

        function n(e, t) {
            var n = e - 1;
            return 1 + n * n * n == 1 ? t * (1 + n * (t - 1) * (.5 + 1 / 6 * n * (t - 2))) : (Math.pow(e, t) - 1) / n
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = function() {
            function e(e, t, n, r) {
                void 0 === e && (e = 0), void 0 === t && (t = 0), void 0 === n && (n = 1), void 0 === r && (r = n), this.tx = e, this.ty = t, this.sx = n, this.sy = r
            }
            return e.prototype.toJSON = function() {
                return {
                    tx: this.tx,
                    ty: this.ty,
                    sx: this.sx,
                    sy: this.sy
                }
            }, e.prototype.compose = function(t) {
                return new e(this.sx * t.tx + this.tx, this.sy * t.ty + this.ty, this.sx * t.sx, this.sy * t.sy)
            }, e.prototype.translate = function(t, n) {
                var r = void 0 === n ? t.x : n.x - t.x,
                    i = void 0 === n ? t.y : n.y - t.y;
                return new e(this.tx + r, this.ty + i, this.sx, this.sy)
            }, e.prototype.scale = function(t, n) {
                return e.scale(t, n).compose(this)
            }, e.prototype.scaleAtPoint = function(t, n, r) {
                return void 0 === r && (r = n), e.scaleAtPoint(t, n, r).compose(this)
            }, e.prototype.inverse = function() {
                return new e(-this.tx / this.sx, -this.ty / this.sy, 1 / this.sx, 1 / this.sy)
            }, e.prototype.div = function(t) {
                return new e((this.tx * t.sx - this.sx * t.tx) / t.sx, (this.ty * t.sy - this.sy * t.ty) / t.sy, this.sx / t.sx, this.sy / t.sy)
            }, e.prototype.conjugate = function(t) {
                return new e(this.tx * t.sx + t.tx * (1 - this.sx), this.ty * t.sy + t.ty * (1 - this.sy), this.sx, this.sy)
            }, e.prototype.pow = function(t) {
                return new e(this.tx * n(this.sx, t), this.ty * n(this.sy, t), Math.pow(this.sx, t), Math.pow(this.sy, t))
            }, e.prototype.mapX = function(e) {
                return this.sx * e + this.tx
            }, e.prototype.mapY = function(e) {
                return this.sy * e + this.ty
            }, e.prototype.mapPoint = function(e) {
                return {
                    x: this.mapX(e.x),
                    y: this.mapY(e.y)
                }
            }, e.prototype.mapRect = function(e) {
                return {
                    left: this.mapX(e.left),
                    right: this.mapX(e.right),
                    bottom: this.mapY(e.bottom),
                    top: this.mapY(e.top)
                }
            }, e.scale = function(t, n) {
                return void 0 === n && (n = t), new e(0, 0, t, n)
            }, e.translate = function(t, n) {
                return (new e).translate(t, n)
            }, e.scaleAtPoint = function(t, n, r) {
                return void 0 === r && (r = n), void 0 === r && (r = n), new e(t.x * (1 - n), t.y * (1 - r), n, r)
            }, e.fromRects = function(t, n) {
                var r = (n.right - n.left) / (t.right - t.left),
                    i = (n.top - n.bottom) / (t.top - t.bottom);
                return new e(n.left - r * t.left, n.bottom - i * t.bottom, r, i)
            }, e.fromJSON = function(t) {
                return new e(t.tx, t.ty, t.sx, t.sy)
            }, e
        }();
        t.RT = r
    }), define("graphing/projection", ["require", "exports", "math/recttransformation"], function(e, t, n) {
        "use strict";

        function r(e) {
            return {
                left: 0,
                right: e.width,
                top: 0,
                bottom: e.height
            }
        }

        function i(e) {
            return {
                left: e.xmin,
                right: e.xmax,
                bottom: e.ymin,
                top: e.ymax
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var o = function() {
            function e(e, t, o) {
                this.screen = e, this.viewport = t, this.settings = o, this.mathCoordinates = i(t), this.pixelCoordinates = r(e), this.mathToPixels = n.RT.fromRects(this.mathCoordinates, this.pixelCoordinates), this.pixelsToMath = n.RT.fromRects(this.pixelCoordinates, this.mathCoordinates)
            }
            return e.prototype.mapx = function(e) {
                return this.mathToPixels.mapX(e)
            }, e.prototype.mapy = function(e) {
                return this.mathToPixels.mapY(e)
            }, e.prototype.map_pt = function(e) {
                return this.mathToPixels.mapPoint(e)
            }, e.prototype.reverse_mapx = function(e) {
                return this.pixelsToMath.mapX(e)
            }, e.prototype.reverse_mapy = function(e) {
                return this.pixelsToMath.mapY(e)
            }, e.prototype.reverse_map_pt = function(e) {
                return this.pixelsToMath.mapPoint(e)
            }, e.prototype.coordsAreOnscreen = function(e, t, n) {
                return n = void 0 === n ? 0 : n, e > -n && t > -n && e < this.screen.width + n && t < this.screen.height + n
            }, e.prototype.closestPointOnScreen = function(e) {
                var t = this.pixelCoordinates;
                return {
                    x: Math.min(Math.max(e.x, t.left), t.right),
                    y: Math.min(Math.max(e.y, t.top), t.bottom)
                }
            }, e
        }();
        t.Projection = o
    }),
    function(e) {
        "function" == typeof define && define.amd ? define("vendor/jquery.mousewheel", ["jquery"], e) : "object" == typeof exports ? module.exports = e : e(jQuery)
    }(function(e) {
        function t(t) {
            var a = t || window.event,
                s = l.call(arguments, 1),
                c = 0,
                u = 0,
                p = 0,
                d = 0;
            if (t = e.event.fix(a), t.type = "mousewheel", "detail" in a && (p = -1 * a.detail), "wheelDelta" in a && (p = a.wheelDelta), "wheelDeltaY" in a && (p = a.wheelDeltaY), "wheelDeltaX" in a && (u = -1 * a.wheelDeltaX), "axis" in a && a.axis === a.HORIZONTAL_AXIS && (u = -1 * p, p = 0), c = 0 === p ? u : p, "deltaY" in a && (p = -1 * a.deltaY, c = p), "deltaX" in a && (u = a.deltaX, 0 === p && (c = -1 * u)), 0 !== p || 0 !== u) {
                if (1 === a.deltaMode) {
                    var h = e.data(this, "mousewheel-line-height");
                    c *= h, p *= h, u *= h
                } else if (2 === a.deltaMode) {
                    var f = e.data(this, "mousewheel-page-height");
                    c *= f, p *= f, u *= f
                }
                return d = Math.max(Math.abs(p), Math.abs(u)), (!o || d < o) && (o = d, r(a, d) && (o /= 40)), r(a, d) && (c /= 40, u /= 40, p /= 40), c = Math[c >= 1 ? "floor" : "ceil"](c / o), u = Math[u >= 1 ? "floor" : "ceil"](u / o), p = Math[p >= 1 ? "floor" : "ceil"](p / o), t.deltaX = u, t.deltaY = p, t.deltaFactor = o, t.deltaMode = 0, s.unshift(t, c, u, p), i && clearTimeout(i), i = setTimeout(n, 200), (e.event.dispatch || e.event.handle).apply(this, s)
            }
        }

        function n() {
            o = null
        }

        function r(e, t) {
            return u.settings.adjustOldDeltas && "mousewheel" === e.type && t % 120 == 0
        }
        var i, o, a = ["wheel", "mousewheel", "DOMMouseScroll", "MozMousePixelScroll"],
            s = "onwheel" in document || document.documentMode >= 9 ? ["wheel"] : ["mousewheel", "DomMouseScroll", "MozMousePixelScroll"],
            l = Array.prototype.slice;
        if (e.event.fixHooks)
            for (var c = a.length; c;) e.event.fixHooks[a[--c]] = e.event.mouseHooks;
        var u = e.event.special.mousewheel = {
            version: "3.1.9",
            setup: function() {
                if (this.addEventListener)
                    for (var n = s.length; n;) this.addEventListener(s[--n], t, !1);
                else this.onmousewheel = t;
                e.data(this, "mousewheel-line-height", u.getLineHeight(this)), e.data(this, "mousewheel-page-height", u.getPageHeight(this))
            },
            teardown: function() {
                if (this.removeEventListener)
                    for (var e = s.length; e;) this.removeEventListener(s[--e], t, !1);
                else this.onmousewheel = null
            },
            getLineHeight: function(t) {
                return parseInt(e(t)["offsetParent" in e.fn ? "offsetParent" : "parent"]().css("fontSize"), 10)
            },
            getPageHeight: function(t) {
                return e(t).height()
            },
            settings: {
                adjustOldDeltas: !0
            }
        };
        e.fn.extend({
            mousewheel: function(e) {
                return e ? this.bind("mousewheel", e) : this.trigger("mousewheel")
            },
            unmousewheel: function(e) {
                return this.unbind("mousewheel", e)
            }
        })
    }), define("graphing/viewportcontroller", ["require", "jquery", "pjs", "lib/aria", "lib/i18n", "math/recttransformation", "./viewport", "math/distance", "./constants", "lib/animation-frame", "./projection", "keys", "jquery.handleevent", "vendor/jquery.mousewheel"], function(e) {
        var t = e("jquery"),
            n = e("pjs"),
            r = e("lib/aria"),
            i = e("lib/i18n"),
            o = e("math/recttransformation").RT,
            a = e("./viewport").Viewport,
            s = e("math/distance"),
            l = e("./constants"),
            c = e("lib/animation-frame"),
            u = e("./projection").Projection,
            p = e("keys");
        return e("jquery.handleevent"), e("vendor/jquery.mousewheel"), n(function(e) {
            function n(e, t) {
                var n = t.x - e.x,
                    r = t.y - e.y,
                    i = .5 * (e.x + t.x),
                    o = .5 * (e.y + t.y),
                    a = .5 * s.hypot(n, r);
                return {
                    center: f(i, o),
                    radius: a
                }
            }

            function d(e, t) {
                return n(t, {
                    x: 2 * e.x - t.x,
                    y: 2 * e.y - t.y
                })
            }

            function h(e, t) {
                for (var n = [], r = 0; r < e.length; r++) n.push(f(e[r].x - t.left, e[r].y - t.top));
                return n
            }

            function f(e, t) {
                return {
                    x: e,
                    y: t
                }
            }

            function m(e) {
                return f(.5 * (e.left + e.right), .5 * (e.bottom + e.top))
            }
            var g = 0;
            e.init = function(e, t) {
                this.grapher = e, this.$ = this.grapher.$, this.__id = g++, this.controller = t, this.isScalingEnabled = !1, this.mousePt = f(0, 0), this.lastScrollZoom = Date.now(), this.preventScrollZoom = !1, this.addMouseWheelEventHandler(), this.addTouchEventHandler()
            }, e.remove = function() {
                t(window).off(".viewportcontroller-" + this.__id)
            }, e.t = function(e, t) {
                return i.t(e, t, this.grapher.settings.language)
            }, e.getViewport = function() {
                return this.grapher.getProjection().viewport
            }, e.getProjection = function() {
                return this.grapher.getProjection()
            }, e.updateMouse = function(e) {
                var t = this.$[0].getBoundingClientRect();
                this.mousePt = f(e.clientX - t.left, e.clientY - t.top)
            }, e.updateScaleAxis = function() {
                this.isMouseInViewport() && (this.isMouseNearYAxis() ? this.grapher.scaleAxis = "y" : this.isMouseNearXAxis() ? this.grapher.scaleAxis = "x" : this.grapher.scaleAxis = "both"), this.updateCursor(), this.grapher.redrawAllLayers()
            }, e.updateCursor = function() {
                this.$.toggleClass("dcg-scale-horizontal", "x" === this.grapher.scaleAxis), this.$.toggleClass("dcg-scale-vertical", "y" === this.grapher.scaleAxis), this.$.toggleClass("dcg-scale-both", "both" === this.grapher.scaleAxis)
            }, e.isMouseNearOrigin = function() {
                var e = this.getProjection(),
                    t = e.mathToPixels.mapPoint(f(0, 0));
                return Math.abs(this.mousePt.x - t.x) < 50 && Math.abs(this.mousePt.y - t.y) < 50
            }, e.isMouseNearXAxis = function() {
                var e = this.getProjection(),
                    t = e.pixelCoordinates,
                    n = e.mathToPixels.mapY(0);
                return n = Math.min(Math.max(t.top, n), t.bottom), Math.abs(this.mousePt.y - n) < 40 && e.settings.showXAxis
            }, e.isMouseNearYAxis = function() {
                var e = this.getProjection(),
                    t = e.pixelCoordinates,
                    n = e.mathToPixels.mapX(0);
                return n = Math.min(Math.max(t.left, n), t.right), Math.abs(this.mousePt.x - n) < 40 && e.settings.showYAxis
            }, e.isMouseInViewport = function() {
                var e = this.getProjection(),
                    t = e.mathCoordinates,
                    n = e.pixelsToMath.mapPoint(this.mousePt);
                return n.x >= t.left && n.x <= t.right && n.y >= t.bottom && n.y <= t.top
            }, e.getDefaultViewport = function() {
                return this.controller.getDefaultStateViewport() || this.grapher.getDefaultViewport()
            }, e._setViewportWithoutCancellingAnimation = function(e) {
                if (e.isValid() && !e.equals(this.getViewport())) {
                    var t = this.getProjection();
                    this.grapher._setProjection(new u(t.screen, e, t.settings))
                }
            }, e.setViewport = function(e) {
                this.cancelAnimation(), this._setViewportWithoutCancellingAnimation(e)
            }, e.setScreen = function(e) {
                var t = this.getProjection(),
                    n = t.settings.squareAxes,
                    r = new u(e, this.getViewportForScreen(t.viewport, e, n), t.settings);
                this.grapher._setProjection(r)
            }, e.getTransformedViewport = function(e) {
                var t = this.getProjection(),
                    n = t.pixelsToMath.div(e).mapRect(t.pixelCoordinates);
                return new a(n.left, n.right, n.bottom, n.top)
            }, e.transformViewport = function(e) {
                this.setViewport(this.getTransformedViewport(e))
            }, e.animateTransformation = function(e) {
                function t(a) {
                    r || (r = a);
                    var s = (a - r) / l.ANIMATE_ZOOM_DURATION;
                    o += s, o < 1 ? (n.__animationTimeout = c.requestAnimationFrame(t), n._setViewportWithoutCancellingAnimation(n.getTransformedViewport(e.pow(s))), n.grapher.debounceUserRequestedViewportChange()) : (n.setViewport(i), n.grapher.debounceUserRequestedViewportChange())
                }
                var n = this;
                this.cancelAnimation();
                var r, i = this.getTransformedViewport(e),
                    o = 0;
                this.__animationTimeout = c.requestAnimationFrame(t)
            }, e.cancelAnimation = function() {
                c.cancelAnimationFrame(this.__animationTimeout)
            }, e.addMouseWheelEventHandler = function() {
                var e, n, r = this,
                    i = !1;
                t(window).on("scroll.viewportcontroller-" + this.__id, function(e) {
                    i = !0
                }), t(window).on("mousewheel.viewportcontroller-" + this.__id, function(t) {
                    e = t.originalEvent.clientX, n = t.originalEvent.clientY
                }), t(window).on("mousemove.viewportcontroller-" + this.__id, function(t) {
                    if (i) {
                        var r = t.originalEvent.clientX - e,
                            o = t.originalEvent.clientY - n;
                        r * r + o * o < 100 || (i = !1)
                    }
                });
                var a = 0,
                    s = function(e, t) {
                        var n = Date.now();
                        if (r.preventScrollZoom && n - r.lastScrollZoom > 50 && (r.preventScrollZoom = !1), r.lastScrollZoom = n, !r.preventScrollZoom) {
                            var s = this.getProjection();
                            if (!s.settings.config.lockViewport) {
                                var u = s.mathToPixels;
                                if (!i) {
                                    e.preventDefault(), r.updateMouse(e);
                                    var p = u.mapPoint(f(0, 0)),
                                        d = r.isMouseNearOrigin() && t > 0 ? p : r.mousePt;
                                    if (!(a > 0)) {
                                        a += 1, c.requestAnimationFrame(function() {
                                            a--
                                        }), t = t > 0 ? 1 : -1;
                                        var h = t > 0 ? l.ZOOM_FACTOR : 1 / l.ZOOM_FACTOR,
                                            m = r.grapher.scaleAxis,
                                            g = "x" !== m && "both" !== m && m ? 1 : h,
                                            y = "y" !== m && "both" !== m && m ? 1 : h;
                                        this.transformViewport(o.scaleAtPoint(d, g, y)), this.grapher.debounceUserRequestedViewportChange()
                                    }
                                }
                            }
                        }
                    };
                this.$.mousewheel(s.bind(this))
            }, e.handleDoubleClick = function(e) {
                var t = this.getProjection();
                if (!t.settings.config.lockViewport && !t.settings.config.disable_dblclick_zooming && !e.wasHandled()) {
                    e.preventDefault();
                    var n = this.$[0].getBoundingClientRect(),
                        r = f(e.clientX - n.left, e.clientY - n.top);
                    this.animateTransformation(o.scaleAtPoint(r, l.DOUBLETAP_ZOOM))
                }
            }, e.applyPanTouchChanges = function(e, t) {
                if (!this.getProjection().settings.config.lockViewport && !this.isScalingEnabled) {
                    var n = f(t[0].x - e[0].x, t[0].y - e[0].y);
                    this.transformViewport(o.translate(n)), this.grapher.debounceUserRequestedViewportChange()
                }
            }, e.chooseDragScaleCenter = function() {
                var e = this.getProjection(),
                    t = e.pixelCoordinates,
                    n = e.mathToPixels.mapX(0),
                    r = e.mathToPixels.mapY(0);
                return n = Math.min(Math.max(t.left, n), t.right), r = Math.min(Math.max(t.top, r), t.bottom), f(n, r)
            }, e.applyScaleTouchChanges = function(e, t) {
                if (!this.getProjection().settings.config.lockViewport) {
                    var r, i, a = this.grapher.scaleAxis;
                    if (2 === e.length && 2 === t.length) r = n(e[0], e[1]), i = n(t[0], t[1]);
                    else {
                        if (1 !== t.length) return;
                        var s = this.chooseDragScaleCenter();
                        r = d(s, e[0]), i = d(s, t[0])
                    }
                    var l = i.radius / r.radius,
                        c = "y" === a ? 1 : l,
                        u = "x" === a ? 1 : l,
                        p = o.scaleAtPoint(r.center, c, u).translate(r.center, i.center);
                    this.transformViewport(p), this.grapher.debounceUserRequestedViewportChange()
                }
            }, e.addTouchEventHandler = function() {
                var e = this,
                    n = [],
                    r = !1,
                    i = !0,
                    o = !0,
                    a = function(t) {
                        var n = e.grapher.getProjection();
                        r || n.settings.config.lockViewport || (e.updateMouse(t), e.isScalingEnabled && e.updateScaleAxis())
                    };
                t(window).on("mousemove.viewportcontroller-" + this.__id, a);
                var s = function(n) {
                        var a = e.getProjection();
                        if (!a.settings.config.lockViewport && !n.wasHandled() && !r && n.touches.length === n.changedTouches.length) {
                            r = !0, e.grapher.isDragging = !0, e.updateMouse(n);
                            var s = a.mathToPixels.mapPoint(f(0, 0)),
                                l = e.grapher.scaleAxis;
                            "x" !== l && "both" !== l || (i = e.mousePt.x > s.x), "y" !== l && "both" !== l || (o = e.mousePt.y > s.y), e.controller.dispatch({
                                type: "grapher/drag-start"
                            }), t(document).on("dcg-tapmove.graphdrag", g), t(document).on("dcg-tapstart.graphdrag dcg-tapend.graphdrag dcg-tapcancel.graphdrag", y)
                        }
                    },
                    l = function(t) {
                        if (!(t.length < 2)) {
                            var n = e.grapher.getProjection(),
                                r = n.pixelCoordinates,
                                i = n.mathToPixels.mapX(0),
                                o = n.mathToPixels.mapY(0);
                            i = Math.min(Math.max(r.left, i), r.right), o = Math.min(Math.max(r.top, o), r.bottom);
                            var a = t[1].x - t[0].x,
                                s = t[1].y - t[0].y;
                            return Math.abs(t[0].x - i) < 40 && Math.abs(t[1].x - i) < 40 && Math.abs(s) > 3 * Math.abs(a) && n.settings.showYAxis ? "y" : Math.abs(t[0].y - o) < 40 && Math.abs(t[1].y - o) < 40 && Math.abs(a) > 3 * Math.abs(s) && n.settings.showXAxis ? "x" : "both"
                        }
                    },
                    c = function(t) {
                        return e.grapher.scaleAxis || (e.grapher.scaleAxis = l(t)), e.grapher.scaleAxis
                    },
                    u = function() {
                        e.grapher.scaleAxis && (e.grapher.scaleAxis = void 0, e.grapher.redrawAllLayers(), e.updateCursor())
                    },
                    d = function() {
                        e.isScalingEnabled = !1, e.preventScrollZoom = !0, u()
                    },
                    m = function(e) {
                        return e.altKey || e.ctrlKey || e.metaKey
                    },
                    g = function(t) {
                        if (r && !e.getProjection().settings.config.lockViewport) {
                            var a = h(t.touches, e.$.offset());
                            if (2 === n.length && 2 === a.length) c(a), e.applyScaleTouchChanges(n, a);
                            else if (1 === n.length && e.isScalingEnabled) {
                                e.updateMouse(t);
                                var s, l, p = e.grapher.scaleAxis,
                                    d = e.getProjection(),
                                    m = d.mathToPixels.mapPoint(f(0, 0)),
                                    g = i ? 1 : -1,
                                    y = o ? 1 : -1;
                                if ("x" !== p && "both" !== p || (s = e.mousePt.x > m.x + 5 * g), "y" !== p && "both" !== p || (l = e.mousePt.y > m.y + 5 * y), "x" === p && i !== s) return;
                                if ("y" === p && o !== l) return;
                                if ("both" === p && i !== s && o !== l) return;
                                e.applyScaleTouchChanges(n, a)
                            } else u();
                            1 === n.length && e.applyPanTouchChanges(n, a), e.controller.dispatch({
                                type: "grapher/drag-move"
                            }), n = a
                        }
                    },
                    y = function(i) {
                        r && (e.cancelAnimation(), n = h(i.touches, e.$.offset()), 0 === i.touches.length && (r = !1, e.grapher.isDragging = !1, t(document).off(".graphdrag"), e.grapher.debounceUserRequestedViewportChange(), e.controller.dispatch({
                            type: "grapher/drag-end"
                        })), (0 === i.touches.length || 1 === i.touches.length && !e.isScalingEnabled) && u())
                    };
                this.$.css("touch-action", "none"), this.$.on("dcg-tapstart", s), this.$.on("dblclick", this.handleDoubleClick.bind(this)), t(window).on("keydown.viewportcontroller-" + this.__id, function(e) {
                    this.getProjection().settings.config.lockViewport || (p.lookup(e) !== p.SHIFT || m(e) ? d() : (this.isScalingEnabled = !0, this.grapher.scaleAxis || this.updateScaleAxis()))
                }.bind(this)), t(window).on("keyup.viewportcontroller-" + this.__id + " blur.viewportcontroller-" + this.__id, d)
            }, e.zoom = function(e) {
                var t = this.getProjection().pixelCoordinates;
                if ("in" === e) this.animateTransformation(o.scaleAtPoint(m(t), 2));
                else if ("out" === e) this.animateTransformation(o.scaleAtPoint(m(t), .5));
                else if ("default" === e) {
                    var n = this.getDefaultViewport();
                    this.animateTransformation(this.getCustomZoomTransformation(n))
                } else if ("square" === e) {
                    var i = this.getSquareViewport();
                    this.animateTransformation(this.getCustomZoomTransformation(i))
                }
                r.alert(this.t("Graph zoom __action__", {
                    action: e
                }))
            }, e.zoomCustom = function(e) {
                this.animateTransformation(this.getCustomZoomTransformation(e)), r.alert(this.t("Graph viewport updated."))
            }, e.getCustomZoomTransformation = function(e) {
                var t = this.getProjection().viewport,
                    n = this.getProjection().pixelCoordinates,
                    r = this.getProjection().mathCoordinates,
                    i = (t.xmax - t.xmin) / (e.xmax - e.xmin),
                    a = (t.ymax - t.ymin) / (e.ymax - e.ymin),
                    s = function() {
                        return {
                            x: 0,
                            y: 0
                        }
                    },
                    l = o.fromRects(r, n),
                    c = new o.translate(l.mapPoint(s()), s()),
                    u = new o.scale(i, a),
                    p = o.fromRects({
                        left: e.xmin,
                        right: e.xmax,
                        bottom: e.ymin,
                        top: e.ymax
                    }, n);
                return new o.translate(s(), p.mapPoint(s())).compose(u.compose(c))
            }, e.isZoomRestored = function() {
                var e = this.getProjection(),
                    t = e.viewport,
                    n = this.getDefaultViewport();
                return e.settings.squareAxes && Math.abs((t.xmin - n.xmin) / t.xmin) < .05 && Math.abs((t.xmax - n.xmax) / t.xmax) < .05 && Math.abs((t.ymin - n.ymin) / t.ymin) < .05 && Math.abs((t.ymax - n.ymax) / t.ymax) < .05
            }, e.getViewportForScreen = function(e, t, n) {
                return n ? "y" == this.getProjection().settings.lastChangedAxis ? e.squareXAxis(t) : e.squareYAxis(t) : e
            }, e.getSquareViewport = function() {
                var e = this.getProjection();
                return this.getViewportForScreen(e.viewport, e.screen, !0)
            }, e.enforceSquareAxes = function() {
                var e = this.getProjection();
                e.settings.squareAxes && (e.viewport.isSquare(e.screen) || this.setViewport(this.getViewportForScreen(e.viewport, e.screen, !0)))
            }
        })
    }), define("geometry/math/hypot", ["require", "exports"], function(e, t) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = Math.hypot || function(e, t) {
            if (0 === e && 0 === t) return 0;
            if (Math.abs(e) > Math.abs(t)) {
                var n = t / e;
                return Math.abs(e) * Math.sqrt(n * n + 1)
            }
            var n = e / t;
            return Math.abs(t) * Math.sqrt(n * n + 1)
        }
    }), define("lib/priority-queue", ["require", "exports"], function(e, t) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var n = function() {
            function e(e) {
                this.comparator = e, this._data = []
            }
            return e.prototype.size = function() {
                return this._data.length
            }, e.prototype.queue = function(e) {
                var t = this._data.length;
                for (this._data.push(e); t > 0;) {
                    var n = t - 1 >>> 1;
                    if (!(this.comparator(this._data[t], this._data[n]) < 0)) break;
                    var r = this._data[n];
                    this._data[n] = this._data[t], this._data[t] = r, t = n
                }
            }, e.prototype.dequeue = function() {
                var e = this._data[0],
                    t = this._data.pop();
                if (this._data.length > 0 && void 0 !== t) {
                    this._data[0] = t;
                    for (var n = 0, r = this._data.length - 1;;) {
                        var i = 1 + (n << 1),
                            o = i + 1,
                            a = n;
                        if (i <= r && this.comparator(this._data[i], this._data[a]) < 0 && (a = i), o <= r && this.comparator(this._data[o], this._data[a]) < 0 && (a = o), a === n) break;
                        var s = this._data[a];
                        this._data[a] = this._data[n], this._data[n] = s, n = a
                    }
                }
                return e
            }, e.prototype.peek = function() {
                return this._data[0]
            }, e.prototype.clear = function() {
                this._data.length = 0
            }, e
        }();
        t.default = n
    }), define("geometry/math/polygon-area-support", ["require", "exports", "lib/priority-queue", "bugsnag"], function(e, t, n, r) {
        "use strict";

        function i(e, t) {
            var n = e.pt2.y - e.pt1.y,
                r = e.pt1.x - e.pt2.x,
                i = t.pt2.y - t.pt1.y,
                o = t.pt1.x - t.pt2.x,
                a = n * e.pt1.x + r * e.pt1.y,
                s = i * t.pt1.x + o * t.pt1.y,
                l = n * o - i * r;
            if (0 !== l) return (n * s - i * a) / l
        }

        function o(e, t, n) {
            if (n.scanlineX < t.scanlineX && r.notify("PolygonArea: rightEdge should not be left of leftEdge!", {
                    metaData: {
                        scanlineY: e,
                        leftEdge: t,
                        rightEdge: n
                    }
                }), !(n.xSlope >= t.xSlope)) {
                if (t.scanlineX === n.scanlineX) return e;
                var o = t.pt2.y > t.pt1.y ? t.pt2 : t.pt1,
                    a = n.pt2.y > n.pt1.y ? n.pt2 : n.pt1,
                    l = o.y;
                if (a.y < o.y) {
                    l = a.y;
                    if (s(l, t) < a.x) return
                } else if (o.y < a.y) {
                    var c = s(l, n);
                    if (o.x < c) return
                } else if (o.x < a.x) return;
                var u = i(t, n);
                if (void 0 !== u) return Math.max(Math.min(u, l), e)
            }
        }

        function a(e, t, n, r) {
            if (n && r) {
                if (n.id < r.id) {
                    if (n.skipIntersectionWith[r.id]) return
                } else if (r.skipIntersectionWith[n.id]) return;
                var i = o(e, n, r);
                void 0 !== i && (n.id < r.id ? n.skipIntersectionWith[r.id] = !0 : r.skipIntersectionWith[n.id] = !0, t.queue({
                    type: "x",
                    y: i,
                    edge1: n,
                    edge2: r
                }))
            }
        }

        function s(e, t) {
            var n = t.pt1.x,
                r = t.pt2.x,
                i = t.pt1.y,
                o = t.pt2.y;
            if (i === e) return n;
            if (o === e) return r;
            var a = (e - i) / (o - i),
                s = (1 - a) * n + a * r;
            if (n < r) {
                if (s <= n) return n;
                if (r <= s) return r
            } else {
                if (s <= r) return r;
                if (n <= s) return n
            }
            return s
        }

        function l(e) {
            for (var t = 0, n = 0, r = !1, i = 0, o = e; i < o.length; i++) {
                var a = o[i].scanlineX;
                r ? (r = !1, t += a - n) : (r = !0, n = a)
            }
            return t
        }

        function c(e) {
            for (var t = 0, n = 0, r = !1, i = 0, o = 0, a = e; o < a.length; o++) {
                var s = a[o],
                    l = s.scanlineX;
                s.isClockwise ? i += 1 : i -= 1, 0 === i || r ? 0 === i && r && (r = !1, t += l - n) : (r = !0, n = l)
            }
            return t
        }

        function u(e, t) {
            for (var n = 0, i = 0, o = !1, a = -1 / 0, l = 0, c = t; l < c.length; l++) {
                var u = c[l],
                    p = s(e, u);
                p < a ? (p - a < -1e-4 && r.notify("PolygonArea: scanlineX reversed!", {
                    metaData: {
                        scanlineY: e,
                        edge: u,
                        minScanlineX: a,
                        scanlineX: p
                    }
                }), p = a) : a = p, u.scanlineX = p, o ? (o = !1, n += p - i) : (o = !0, i = p)
            }
            return n
        }

        function p(e, t) {
            for (var n = 0, i = 0, o = !1, a = 0, l = -1 / 0, c = 0, u = t; c < u.length; c++) {
                var p = u[c],
                    d = s(e, p);
                d < l ? (d - l < -1e-4 && r.notify("PolygonArea: scanlineX reversed!", {
                    metaData: {
                        scanlineY: e,
                        edge: p,
                        minScanlineX: l,
                        scanlineX: d
                    }
                }), d = l) : l = d, p.scanlineX = d, p.isClockwise ? a += 1 : a -= 1, 0 === a || o ? 0 === a && o && (o = !1, n += d - i) : (o = !0, i = d)
            }
            return n
        }

        function d(e) {
            for (var t = 1, r = [], i = new n.default(function(e, t) {
                    return e.y - t.y
                }), o = e.length - 1; o >= 1; o--) {
                var a = e[o],
                    s = e[o - 1],
                    l = {
                        id: t++,
                        pt1: a,
                        pt2: s,
                        scanlineX: 0,
                        xSlope: 1 / 0,
                        isClockwise: s.y > a.y,
                        skipIntersectionWith: {}
                    };
                s.y > a.y ? (i.queue({
                    type: "+",
                    y: a.y,
                    edge: l
                }), i.queue({
                    type: "-",
                    y: s.y,
                    edge: l
                }), l.xSlope = (s.x - a.x) / (s.y - a.y), l.scanlineX = a.x) : a.y > s.y && (i.queue({
                    type: "+",
                    y: s.y,
                    edge: l
                }), i.queue({
                    type: "-",
                    y: a.y,
                    edge: l
                }), l.xSlope = (a.x - s.x) / (a.y - s.y), l.scanlineX = s.x)
            }
            return {
                activeEdges: r,
                events: i
            }
        }

        function h(e, t, n) {
            "x" === e.type ? g(e, t, n) : "+" === e.type ? f(e, t, n) : "-" === e.type && m(e, t, n)
        }

        function f(e, t, n) {
            for (var r = e.edge, i = e.y, o = r.xSlope, s = r.scanlineX, l = 0; l < n.length; l++) {
                var c = n[l];
                if (s < c.scanlineX) break;
                if (s === c.scanlineX && o <= c.xSlope) break
            }
            n.splice(l, 0, r), a(i, t, n[l - 1], r),
                a(i, t, r, n[l + 1])
        }

        function m(e, t, n) {
            var r = e.edge,
                i = e.y,
                o = n.indexOf(r);
            n.splice(o, 1), a(i, t, n[o - 1], n[o])
        }

        function g(e, t, n) {
            var r = e.edge1,
                i = e.edge2,
                o = e.y,
                s = n.indexOf(r),
                l = s + 1; - 1 === s || n[l] !== i ? r.id < i.id ? delete r.skipIntersectionWith[i.id] : delete i.skipIntersectionWith[r.id] : (n[s] = i, n[l] = r, a(o, t, n[s - 1], i), a(o, t, r, n[l + 1]))
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t._unstableYIntersectEdges = i, t._stableYIntersectEdges = o, t.checkForEdgeIntersection = a, t.computeScanlineX = s, t.measureDownwardEvenOddLength = l, t.measureDownwardNonZeroLength = c, t.measureUpwardEvenOddLength = u, t.measureUpwardNonZeroLength = p, t.setupEventQueueAndActiveEdges = d, t.processEvent = h
    }), define("geometry/math/polygon", ["require", "exports", "./hypot", "bugsnag", "./polygon-area-support"], function(e, t, n, r, i) {
        "use strict";

        function o(e, t) {
            if (!e) return !1;
            for (var n = t.x, r = t.y, i = !1, o = e.length - 1; o >= 3; o -= 2) {
                var a = e[o - 3],
                    s = e[o - 2],
                    l = e[o - 1],
                    c = e[o];
                s > r != c > r && n < (l - a) * (r - s) / (c - s) + a && (i = !i)
            }
            return i
        }

        function a(e, t) {
            if (!e) return !1;
            for (var n = t.x, r = t.y, i = 0, o = e.length - 1; o >= 3; o -= 2) {
                var a = e[o - 3],
                    s = e[o - 2],
                    l = e[o - 1],
                    c = e[o];
                s > r != c > r && n < (l - a) * (r - s) / (c - s) + a && (s > c ? i += 1 : s < c && (i -= 1))
            }
            return 0 !== i
        }

        function s(e) {
            for (var t = 0, r = 0; r < e.length - 1; r++) t += n.default(e[r].x - e[r + 1].x, e[r].y - e[r + 1].y);
            return t
        }

        function l(e) {
            for (var t = 0, n = 0; n < e.length - 1; n++) t += e[n].x * e[n + 1].y - e[n].y * e[n + 1].x;
            return Math.abs(t) / 2
        }

        function c(e) {
            if (e.length < 4) return 0;
            if (e[0].x !== e[e.length - 1].x || e[0].y !== e[e.length - 1].y) return 0;
            var t = i.setupEventQueueAndActiveEdges(e),
                n = t.events,
                o = t.activeEdges,
                a = n.peek();
            if (!a) return 0;
            for (var s, l = 0, c = a.y, u = 0; s = n.dequeue();) {
                var p = s.y;
                p < c && r.notify("PolygonArea: scanlineY jumped up vertically", {
                    metaData: {
                        points: e,
                        scanlineY: p,
                        lastScanlineY: c
                    }
                });
                u += .5 * (p - c) * (i.measureUpwardEvenOddLength(p, o) + l), i.processEvent(s, n, o), c = p, l = i.measureDownwardEvenOddLength(o)
            }
            return u
        }

        function u(e) {
            if (e.length < 4) return 0;
            if (e[0].x !== e[e.length - 1].x || e[0].y !== e[e.length - 1].y) return 0;
            var t = i.setupEventQueueAndActiveEdges(e),
                n = t.events,
                o = t.activeEdges,
                a = n.peek();
            if (!a) return 0;
            for (var s, l = 0, c = a.y, u = 0; s = n.dequeue();) {
                var p = s.y;
                p < c && r.notify("PolygonArea: scanlineY jumped up vertically", {
                    metaData: {
                        points: e,
                        scanlineY: p,
                        lastScanlineY: c
                    }
                });
                u += .5 * (p - c) * (i.measureUpwardNonZeroLength(p, o) + l), i.processEvent(s, n, o), c = p, l = i.measureDownwardNonZeroLength(o)
            }
            return u
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.pointIsWithinEvenOddFill = o, t.pointIsWithinNonZeroFill = a, t.calculatePerimeter = s, t.calculateSimpleArea = l, t.calculatePaintedEvenOddArea = c, t.calculatePaintedNonZeroArea = u
    }), define("graphing/poicontroller", ["require", "jquery", "math/distance", "lib/rounding", "graphing/graphmode", "lib/conditional_blur", "keys", "lib/aria", "./label", "expressions/colors", "graphing-calc/models/image", "graphing-calc/models/expression", "../geometry/math/polygon"], function(e) {
        function t(e, t) {
            this.manager = e, this.controller = e.controller, this.graphSettings = t, this.$ = this.manager.$, this.__id = f++, this.graphSettings.config.graphpaper && !this.graphSettings.config.disableMouseInteractions && (this.addTouchEventHandlers(), this.addHoverEventHandler(), this.addKeydownEventHandler())
        }
        var n = e("jquery"),
            r = e("math/distance"),
            i = e("lib/rounding"),
            o = e("graphing/graphmode"),
            a = e("lib/conditional_blur").default,
            s = e("keys"),
            l = e("lib/aria"),
            c = e("./label"),
            u = e("expressions/colors").getColorName,
            p = e("graphing-calc/models/image"),
            d = e("graphing-calc/models/expression"),
            h = e("../geometry/math/polygon"),
            f = 0;
        return t.prototype.getExpressionModel = function(e) {
            return this.controller.getItemModel(e)
        }, t.prototype.remove = function() {
            this.removeAllGlobalMouseListeners()
        }, t.prototype.addGlobalMouseListener = function(e, t) {
            for (var r = e.split(" "), i = 0; i < r.length; i++) n(document).on(r[i] + ".dcg-poiController-" + this.__id, t)
        }, t.prototype.removeAllGlobalMouseListeners = function() {
            n(document).off(".dcg-poiController-" + this.__id)
        }, t.prototype.getToleranceByDevice = function(e) {
            return "touch" === e ? 20 : 10
        }, t.prototype.addHoverEventHandler = function() {
            this.$.on("dcg-tapmove", function(e) {
                if ("touch" !== e.device) {
                    var t, r = n(document.elementFromPoint(e.clientX, e.clientY)).closest(".dcg-grapher").length,
                        i = this.manager.poiLabelsLayer,
                        o = this.getMouseRelativeToGrapher(e),
                        a = this.getToleranceByDevice(e.device);
                    r && (t = this.getFeatureUnderPoint(o, a));
                    var s;
                    t && "movable-point" === t.type && (s = t.poi.getMovablePoint().id);
                    var l;
                    t && t.isClickable && (this.manager.movablePointsLayer.isMovingPoint() || this.manager.traceLayer.isTracing() || (l = t.model));
                    this.manager.clickableObjectsLayer.setHoveredId(l && l.id);
                    var c;
                    if (t && "poi" === t.type && (t.poi.isAttachedToPlottedPoint() && !t.poi.hasInteractiveLabel() || (c = t.poi)), c !== i.getHoveredPOI()) {
                        if (!1 === this.graphSettings.config.trace) return;
                        i.setHoveredPOI(c), this.manager.redrawAllLayers()
                    }
                    this.manager.movablePointsLayer.setHoveredPointId(s)
                }
            }.bind(this))
        }, t.prototype.addTouchEventHandlers = function() {
            this.$.on("dblclick", function(e) {
                var t = this.getMouseRelativeToGrapher(e),
                    n = this.getToleranceByDevice(e.device);
                this.getFeatureUnderPoint(t, n) && (e.preventDefault(), e.handle())
            }.bind(this)), this.$.css("touch-action", "none"), this.$.on("dcg-tapstart", function(e) {
                var t = this.getMouseRelativeToGrapher(e),
                    n = this.getToleranceByDevice(e.device),
                    r = this.getFeatureUnderPoint(t, n);
                if (r && r.isClickable ? this.manager.clickableObjectsLayer.setPressedId(r.model.id) : this.manager.clickableObjectsLayer.setPressedId(void 0), r && "editable-label" === r.type) return void e.handle();
                if (a(), r && "movable-point" === r.type) return this.controller.dispatch({
                    type: "start-moving-point",
                    pointInfo: r.poi.getMovablePoint()
                }), this.startMovingPoint(r.poi), e.handle(), void e.handle("do-not-clear-poi-labels");
                if (this._togglePOIUnderPoint(t, n)) return e.handle(), void e.handle("do-not-clear-poi-labels");
                if (r && "sketch-branch" === r.type && !r.isClickable) {
                    if (!this.graphSettings.config.onlyTraceSelected) {
                        if (this.controller.dispatch({
                                type: "set-selected-id",
                                id: r.sketch.id
                            }), !1 === this.graphSettings.config.trace) return;
                        return this.startTracingBranch(r.branchInfo, t), e.handle(), void e.handle("do-not-clear-poi-labels")
                    }
                    if (r.sketch.selected) return this.startTracingBranch(r.branchInfo, t), e.handle(), void e.handle("do-not-clear-poi-labels")
                }
                r && "image" === r.type || this.controller.dispatch({
                    type: "set-none-selected"
                });
                var i = this;
                this.addGlobalMouseListener("dcg-tapmove", function() {
                    i.removeAllGlobalMouseListeners(), this.manager.clickableObjectsLayer.setPressedId(void 0)
                }.bind(this)), this.addGlobalMouseListener("dcg-tapend dcg-tapcancel", function(e) {
                    i.removeAllGlobalMouseListeners(), this.manager.clickableObjectsLayer.setPressedId(void 0);
                    var r = this.getFeatureUnderPoint(t, n);
                    return r && r.isClickable ? void this.controller.dispatch({
                        type: "clickable-item-clicked",
                        id: r.model.id
                    }) : r && "sketch-branch" === r.type && !r.sketch.selected ? void this.controller.dispatch({
                        type: "set-selected-id",
                        id: r.model.id
                    }) : r && "image" === r.type ? void this.controller.dispatch({
                        type: "set-selected-id",
                        id: r.model.id
                    }) : void 0
                }.bind(this))
            }.bind(this))
        }, t.prototype.addKeydownEventHandler = function() {
            this.$.on("keydown", function(e) {
                var t = this.manager.movablePointsLayer.getFocusedPoint();
                if (t) {
                    var n = s.lookup(e),
                        r = s.lookupChar(e);
                    "Up" === n || "Down" === n || "Left" === n || "Right" === n ? (e.stopPropagation(), e.preventDefault(), this.movePointFromKeyboard(t, e)) : "X" !== r && "Y" !== r && "L" !== r && "C" !== r || this.speakPoint(t, r)
                }
            }.bind(this))
        }, t.prototype.getMouseRelativeToGrapher = function(e) {
            var t = this.$[0].getBoundingClientRect(),
                n = e.touches ? e.touches[0] : e;
            return {
                x: n.clientX - t.left,
                y: n.clientY - t.top
            }
        }, t.prototype._getClosestPoint = function(e, t, n) {
            for (var i = n, o = null, a = this.manager.getProjection(), s = 0; s < e.length; s++) {
                var l = e[s],
                    c = a.map_pt(l),
                    u = r.hypot(c.x - t.x, c.y - t.y);
                u < i && (i = u, o = l)
            }
            return o
        }, t.prototype.getFeatureUnderPoint = function(e, n) {
            var r = this.manager.poiLabelsLayer,
                i = this.manager.getProjection(),
                o = i.reverse_map_pt(e),
                a = r.getEditableLabelUnderPoint(e);
            if (a) return {
                type: "editable-label",
                model: a
            };
            for (var s, l = this.manager.__sketchOrder, c = {}, u = 1, h = l.length - 1; h >= 0; h--) {
                var f = l[h],
                    m = this.controller.getItemModel(f),
                    g = u;
                if (c[f] = g, m)
                    if ("expression" === m.type) {
                        var y = this.manager.getGraphSketch(f);
                        if (!y || !y.visible) continue;
                        var v = y.branches;
                        if (!v || !v.length) continue;
                        if (y.showHighlight && (g = -1 / 0, c[f] = g), !s || s.stackingContext >= g)
                            for (var b = d.isClickableObject(m), x = 0; x < v.length; x++) {
                                var w = t.calculateDistanceFromBranch(v[x], o, i, b);
                                if (w < n) {
                                    var _ = !1;
                                    s ? g < s.stackingContext ? _ = !0 : g === s.stackingContext && w < s.distance && (_ = !0) : _ = !0, _ && (s = {
                                        type: "sketch-branch",
                                        model: m,
                                        sketch: y,
                                        distance: w,
                                        stackingContext: g,
                                        branchInfo: {
                                            id: y.id,
                                            branch: x,
                                            sketch: y
                                        }
                                    })
                                }
                            }
                    } else if ("image" === m.type) {
                    var S = this.manager.getGraphImage(f);
                    if (!S || !this.isImageUnderMouse(S, o, n)) continue;
                    S.foreground ? (u += 1, g = u, c[f] = g, u += 1) : (g = 1 / 0, c[f] = g), (!s || s.stackingContext > g) && (s = {
                        type: "image",
                        model: S,
                        distance: 0,
                        stackingContext: g
                    })
                }
            }
            var E = [],
                M = [],
                I = [],
                T = s ? s.stackingContext : 1 / 0;
            this.manager.poiDotsLayer.getDrawnPOI().forEach(function(e) {
                e.isBareLabel() || (e.isMovable() ? E.push(e) : e.isAttachedToPlottedPoint() ? c[e.sketch.id] <= T && M.push(e) : I.push(e))
            });
            var C = this._getClosestPoint(E, e, n);
            if (C) return {
                type: "movable-point",
                poi: C
            };
            var k = this._getClosestPoint(I, e, n);
            if (k) return {
                type: "poi",
                poi: k
            };
            var D = this._getClosestPoint(M, e, n);
            if (D) {
                var P = this.controller.getItemModel(D.sketch.id);
                if (P && "expression" === P.type) {
                    if (d.isClickableObject(P)) return {
                        type: "poi",
                        poi: D,
                        isClickable: !0,
                        model: P
                    }
                }
                return {
                    type: "poi",
                    poi: D
                }
            }
            return s ? "sketch-branch" === s.type ? {
                type: "sketch-branch",
                branchInfo: s.branchInfo,
                sketch: s.sketch,
                model: s.model,
                isClickable: d.isClickableObject(s.model)
            } : {
                type: "image",
                model: s.model,
                isClickable: p.isClickableObject(s.model)
            } : void 0
        }, t.prototype._togglePOIUnderPoint = function(e, t) {
            if (!1 !== this.graphSettings.config.trace) {
                var n = this.getFeatureUnderPoint(e, t);
                if (!n) return !1;
                if (n.isClickable) return !1;
                var r = n.poi;
                return !!r && (!r.isBareLabel() && (this.manager.poiLabelsLayer.isOpenPOI(r) ? (this.manager.poiLabelsLayer.closePOI(r), this.manager.poiLabelsLayer.setHoveredPOI(null)) : (this.manager.poiLabelsLayer.openPOI(r), this.speakPoint(r)), this.manager.redrawAllLayers(), !0))
            }
        }, t.prototype.isImageUnderMouse = function(e, t, n) {
            if (!e || !e.computed_x || !e.computed_y || !e.computed_width || !e.computed_height || e.hidden || this.controller.isItemSecret(e.id)) return !1;
            for (var r = 0; r < e.computed_x.length; r++) {
                var i = e.computed_x[r],
                    o = e.computed_y[r],
                    a = e.computed_radian_angle[r],
                    s = i + Math.cos(a) * (t.x - i) - Math.sin(a) * (t.y - o),
                    l = o + Math.sin(a) * (t.x - i) + Math.cos(a) * (t.y - o),
                    c = .5 * Math.abs(e.computed_width[r]),
                    u = .5 * Math.abs(e.computed_height[r]);
                if (s > i - c && s < i + c && l > o - u && l < o + u) return !0
            }
            return !1
        }, t.calculateDistanceFromBranch = function(e, n, r, i) {
            if (e && e.graphMode === o.POLYGONFILL && i) {
                for (var a = e.segments, s = 0; s < a.length; s++)
                    if (h.pointIsWithinNonZeroFill(a[s], n)) return 0;
                return 1 / 0
            }
            var l = t.getBranchesDistanceInfo(e, n, r, i);
            return l ? l.minDistance : 1 / 0
        }, t.getBranchesDistanceInfo = function(e, t, n, i) {
            var a = n.screen.width / (n.viewport.xmax - n.viewport.xmin),
                s = n.screen.height / (n.viewport.ymax - n.viewport.ymin),
                l = t.x,
                c = t.y,
                u = !1,
                p = !1;
            switch (e.graphMode) {
                case o.PARAMETRIC:
                case o.IMPLICIT:
                    if (!i) return null;
                    break;
                case o.POLAR:
                    if (!i) return null;
                    p = !0;
                    break;
                case o.Y:
                    break;
                case o.X:
                    u = !0;
                    var d = l;
                    l = c, c = d, d = a, a = s, s = d;
                    break;
                default:
                    return null
            }
            for (var h, f, m = 1 / 0, g = 1 / 0, y = 0; y < e.segments.length; y++)
                for (var v = e.segments[y], b = 0; b < v.length - 3; b += 2) {
                    var x = v[b],
                        w = v[b + 1],
                        _ = v[b + 2],
                        S = v[b + 3];
                    if (p) {
                        var E = w,
                            M = x;
                        x = E * Math.cos(M), w = E * Math.sin(M);
                        var I = S,
                            T = _;
                        _ = I * Math.cos(T), S = I * Math.sin(T)
                    }
                    var C = r.closestPointOnSegment(0, 0, (x - l) * a, (w - c) * s, (_ - l) * a, (S - c) * s),
                        k = r.hypot(C[0], C[1]);
                    C[0] < 0 ? k < m && (m = k, h = C) : k < g && (g = k, f = C)
                }
            var D = m < g ? h : f;
            if (!D) return null;
            var P = D[0] / a + l,
                L = D[1] / s + c;
            return {
                closestPoint: {
                    x: u ? L : P,
                    y: u ? P : L
                },
                minDistance: Math.min(m, g),
                secondDistance: Math.max(m, g)
            }
        }, t.getBranchesTracePoint = function(e, n, r) {
            if (e && e.compiled && e.compiled.fn) {
                var a = e.compiled.fn,
                    s = r.screen.width / (r.viewport.xmax - r.viewport.xmin),
                    l = r.screen.height / (r.viewport.ymax - r.viewport.ymin),
                    c = this.getBranchesDistanceInfo(e, n, r, !1);
                if (!c) return null;
                var u = c.minDistance / c.secondDistance;
                u *= u;
                var p = e.graphMode === o.Y ? "x" : "y",
                    d = c.closestPoint[p] * (1 - u) + n[p] * u,
                    h = 1 / (2 * s),
                    f = 1 / (2 * l),
                    m = a(d - h),
                    g = a(d),
                    y = a(d + h),
                    v = h * Math.min(1, f / Math.abs(m - g)),
                    b = h * Math.min(1, f / Math.abs(y - g));
                isFinite(v) || (v = h), isFinite(b) || (b = h), d = i.shortestDecimalBetween(d - v, d + b);
                var x = t.fillHole(a, d, s, l, n.x, n.y);
                return {
                    x: e.graphMode === o.Y ? d : x,
                    y: e.graphMode === o.Y ? x : d
                }
            }
        }, t.prototype.startMovingPoint = function(e) {
            var t = !1;
            this.manager.movablePointsLayer.setPressedPointId(e.isMovable() ? e.getMovablePoint().id : void 0);
            var n = null,
                r = function() {
                    if (n) {
                        t = !0;
                        var r = this.manager.getProjection(),
                            i = this.getMouseRelativeToGrapher(n);
                        n = null, this.controller.dispatch({
                            type: "on-move-point",
                            pointInfo: e.getMovablePoint(),
                            screenPt: i,
                            projection: r
                        })
                    }
                }.bind(this);
            this.manager.registerMovablePointListener(r), this.addGlobalMouseListener("dcg-tapmove", function(e) {
                n = e
            }), this.addGlobalMouseListener("dcg-tapend dcg-tapcancel", function(n) {
                if (r(), this.manager.deregisterMovablePointListener(), this.removeAllGlobalMouseListeners(), this.manager.movablePointsLayer.setPressedPointId(void 0), this.controller.dispatch({
                        type: "stop-moving-point",
                        pointInfo: e.getMovablePoint()
                    }), !t) {
                    var i = this.manager.getProjection(),
                        o = this.getToleranceByDevice(n.device),
                        a = i.map_pt(e);
                    this._togglePOIUnderPoint(a, o)
                }
            }.bind(this))
        }, t.prototype.startTracingBranch = function(e, n) {
            this.manager.markLabelsDirty(), this.last_screen_pt = n;
            var r = this.manager.getProjection(),
                i = r.reverse_map_pt(n),
                o = e.sketch,
                a = o.branches[e.branch],
                s = t.getBranchesTracePoint(a, i, r);
            s && this.speakPoint(s), this.manager.traceLayer.setTraceInfo({
                pt: s,
                branchInfo: e
            }), this.manager.redrawAllLayers(), this.addGlobalMouseListener("dcg-tapmove", this.handleTraceUpdate.bind(this)), this.addGlobalMouseListener("dcg-tapend dcg-tapcancel", this.stopTracingBranch.bind(this))
        }, t.prototype.stopTracingBranch = function(e) {
            this.manager.markLabelsDirty();
            var t = this.manager.poiLabelsLayer.getHoveredPOI();
            t && !this.manager.poiLabelsLayer.isOpenPOI(t) && (this.manager.poiLabelsLayer.openPOI(t), this.speakPoint(t), this.manager.redrawAllLayers()), this.last_screen_pt = null, this.manager.traceLayer.setTraceInfo(void 0), this.manager.redrawAllLayers(), this.removeAllGlobalMouseListeners()
        }, t.prototype.handleTraceUpdate = function(e) {
            if (this.manager.traceLayer.traceInfo) {
                var n, r = this.manager.getProjection();
                if (e) n = this.getMouseRelativeToGrapher(e), this.last_screen_pt = n, this.manager.markLabelsDirty();
                else {
                    if (!this.last_screen_pt) return;
                    n = this.last_screen_pt
                }
                var i = r.reverse_map_pt(n),
                    o = 1 / 0,
                    a = -1,
                    s = this.manager.traceLayer.traceInfo,
                    l = this.manager.graphSketches[s.branchInfo.sketch.id];
                if (l) {
                    s.branchInfo.sketch = l;
                    for (var c = s.branchInfo.sketch.branches, u = 0; u < c.length; u++) {
                        var p = t.calculateDistanceFromBranch(c[u], i, r, !1);
                        p < o && (a = u, o = p)
                    }
                    var d = c[a],
                        h = d ? t.getBranchesTracePoint(d, i, r) : null;
                    h && this.speakPoint(h), this.manager.traceLayer.traceInfo.branchInfo.branch = a, this.manager.traceLayer.traceInfo.pt = h, this.manager.redrawAllLayers()
                }
            }
        }, t.prototype.speakPoint = function(e) {
            var t = this.manager.getAudioTrace();
            t && e && t.queueCoordinates(e, void 0, !0)
        }, t.fillHole = function(e, t, n, i, o, a) {
            var s = e(t);
            if (isFinite(s)) return s;
            var l = t - 1e-11,
                c = t + 1e-11,
                u = e(l),
                p = e(c);
            if (isNaN(u) && isNaN(p)) return NaN;
            if (isNaN(u)) return p;
            if (isNaN(p)) return u;
            var d = (o - l) * n,
                h = (o - c) * n,
                f = (a - u) * i,
                m = (a - p) * i;
            return r.hypot(d, f) < r.hypot(h, m) ? u : p
        }, t.prototype.movePointFromKeyboard = function(e, t) {
            if (e && t && "movable-point" === e.type) {
                var n, r = this.manager.getProjection(),
                    i = r.map_pt({
                        x: e.x,
                        y: e.y
                    }),
                    o = 0,
                    a = 0,
                    l = t.shiftKey ? 10 : 2,
                    c = t.shiftKey ? "big" : "",
                    u = s.lookup(t);
                if ("Up" === u ? (n = "y", a -= l, c += "up") : "Down" === u ? (n = "y", a += l, c += "down") : "Left" === u ? (n = "x", o -= l, c += "down") : "Right" === u && (n = "x", o += l, c += "up"), 0 !== o || 0 !== a) {
                    var p, d = {
                        x: i.x + o,
                        y: i.y + a
                    };
                    "x" === n ? p = [c, ""] : "y" === n && (p = ["", c]), this.controller.dispatch({
                        type: "on-move-point",
                        pointInfo: e,
                        screenPt: d,
                        projection: r,
                        keyboardDirection: p
                    })
                }
            }
        }, t.prototype.speakPoint = function(e, t) {
            if (e) {
                if (this.manager.getAudioTrace()) {
                    var n = this.manager.getProjection();
                    if (n) {
                        var r = n.viewport;
                        switch (t) {
                            case "X":
                                l.alert("X: " + c.value(e.x, r.xmax - r.xmin).ariaString);
                                break;
                            case "Y":
                                l.alert("Y: " + c.value(e.y, r.ymax - r.ymin).ariaString);
                                break;
                            case "L":
                                l.alert(e.label || this.controller.t("Graph point"));
                                break;
                            case "C":
                                l.alert(u(this.controller, e.sketch.color))
                        }
                    }
                }
            }
        }, t
    }), define("graphing/screen", ["require", "exports"], function(e, t) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var n = function() {
            function e(e, t) {
                this.width = e, this.height = t
            }
            return e
        }();
        t.Screen = n
    }), define("graphing/poi", ["require", "exports", "math/poi-type", "./graphmode"], function(e, t, n, r) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var i = 1,
            o = function() {
                function e(e, t, n, r, o, a, s) {
                    this.x = e, this.y = t, this.type = n, this.sketch = r, this.branch = o, this.pointIdxOnBranch = a, this.bareLabel = void 0 !== s && s, this.id = i++
                }
                return e.prototype.getLabel = function() {
                    var e = this.sketch && this.sketch.branches[this.branch];
                    return this.type === n.LABEL && e && "labels" in e && e.labels ? e.labels[this.pointIdxOnBranch] || "" : ""
                }, e.prototype.getGraphMode = function() {
                    return this.sketch.branches[this.branch].graphMode
                }, e.prototype.getCompiledFunction = function() {
                    var e = this.sketch.branches[this.branch];
                    if ("compiled" in e && e.compiled) return e.compiled.fn
                }, e.prototype.isAttachedToPlottedPoint = function() {
                    return this.type === n.DEFINITION || this.type === n.LABEL
                }, e.prototype.isMovable = function() {
                    return this.getGraphMode() === r.XYPOINT_MOVABLE
                }, e.prototype.isPersistent = function() {
                    return this.type === n.LABEL
                }, e.prototype.getLabelSize = function() {
                    var e = this.sketch && this.sketch.branches[this.branch];
                    if (this.type === n.LABEL && e && "labelSize" in e) return e.labelSize
                }, e.prototype.getVerticalLabel = function() {
                    var e = this.sketch && this.sketch.branches[this.branch];
                    return !!(this.type === n.LABEL && e && "verticalLabel" in e) && !!e.verticalLabel
                }, e.prototype.hasInteractiveLabel = function() {
                    var e = this.sketch && this.sketch.branches[this.branch];
                    return !!(e && "interactiveLabel" in e) && !!e.interactiveLabel
                }, e.prototype.hasEditableLabel = function() {
                    var e = this.sketch && this.sketch.branches[this.branch];
                    return !!(e && "editableLabel" in e) && !!e.editableLabel
                }, e.prototype.isBareLabel = function() {
                    return this.bareLabel
                }, e.prototype.getMovablePoint = function() {
                    return this.sketch.getMovablePointByIndex(this.pointIdxOnBranch)
                }, e
            }();
        t.POI = o
    }), define("graphing/graphsketch", ["require", "exports", "math/poi-type", "./graphmode", "./poi", "math/poi-type"], function(e, t, n, r, i, o) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var a = function() {
            function e(e, t) {
                var r = this;
                this.color = "#000000", this.style = "normal", this.visible = !0, this.showPOI = !1, this.showHighlight = !1, this.selected = !1, this.labels = [], this.id = e, this.branches = void 0 !== t ? t : [], this.getPOI().forEach(function(e) {
                    e.type === n.LABEL && r.labels.push(e)
                })
            }
            return e.prototype.getPOI = function() {
                if (this.__cachedPOI) return this.__cachedPOI;
                this.__cachedPOI = [], this.__cachedPOIIds = {};
                for (var e = 0; e < this.branches.length; e++) {
                    var t = this.branches[e],
                        i = t.poi;
                    if (t.graphMode === r.X || t.graphMode === r.Y) this._pushPOI(i.zeros, e, n.ZERO), this._pushPOI(i.intercept, e, n.INTERCEPT), this._pushPOI(i.extrema, e, n.EXTREMUM), i.intersections && this._pushPOI(i.intersections, e, n.INTERSECTION);
                    else if (t.graphMode === r.XYPOINT || t.graphMode === r.XYPOINT_MOVABLE) {
                        t.graphMode;
                        var o = t.graphMode === r.XYPOINT && !0 === t.interactiveLabel;
                        if (!0 === t.showLabel || o) {
                            var a = t.nakedLabel;
                            i.defined && this._pushPOI(i.defined, e, n.LABEL, a)
                        } else i.defined && this._pushPOI(i.defined, e, n.DEFINITION)
                    }
                }
                return this.__cachedPOI
            }, e.prototype.getBranchPOI = function(e) {
                return this.getPOI().filter(function(t) {
                    return t.branch === e
                })
            }, e.prototype.getMovablePoints = function() {
                if (this.__cachedMovablePoints) return this.__cachedMovablePoints;
                this.__cachedMovablePoints = [];
                var e = this.branches[0];
                if (e && 1 === e.segments.length && e.graphMode === r.XYPOINT_MOVABLE)
                    for (var t = e.segments[0], n = 0; n < t.length; n++) {
                        var i = void 0;
                        e.tableId && (i = {
                            tableId: e.tableId,
                            columnId: this.id,
                            rowIndex: e.movablePointInfo[n].index,
                            dragX: e.movablePointInfo[n].dragX,
                            dragY: e.movablePointInfo[n].dragY
                        });
                        var o = e.scaleFactors ? e.scaleFactors[0][n] : void 0,
                            a = i ? i.rowIndex : n;
                        this.__cachedMovablePoints.push({
                            type: "movable-point",
                            id: "movable:[" + this.id + "," + a + "]",
                            sketch: this,
                            color: this.color,
                            tableInfo: i,
                            scaleFactor: o,
                            x: t[n][0],
                            y: t[n][1],
                            label: 1 === e.segments.length && e.labels && e.labels[n] ? e.labels[n] : void 0
                        })
                    }
                return this.__cachedMovablePoints
            }, e.prototype.getMovablePointByIndex = function(e) {
                return this.getMovablePoints()[e]
            }, e.prototype.getStaticLabeledPoints = function() {
                var e = this;
                if (this.__cachedStaticLabeledPoints) return this.__cachedStaticLabeledPoints;
                var t = this.branches[0];
                return this.__cachedStaticLabeledPoints = [], this.getPOI().forEach(function(n) {
                    if ((n.type === o.DEFINITION || n.type === o.LABEL) && t.graphMode === r.XYPOINT) {
                        var i = t.showLabel,
                            a = t.labels && t.labels[0];
                        (i || a) && e.__cachedStaticLabeledPoints.push({
                            type: "static-labeled-point",
                            id: "static[" + e.id + "," + n.id + "]",
                            x: n.x,
                            y: n.y,
                            sketch: n.sketch,
                            label: a
                        })
                    }
                }), this.__cachedStaticLabeledPoints
            }, e.prototype._pushPOI = function(e, t, n, r) {
                void 0 === r && (r = !1);
                for (var o = 0, a = e.x.length; o < a; o++) {
                    var s = new i.POI(e.x[o], e.y[o], n, this, t, o, r);
                    e.intersects && (s.intersects = e.intersects[o]), this.__cachedPOI.push(s), this.__cachedPOIIds[s.id] = s
                }
            }, e.prototype.updateIntersections = function(e) {
                for (var t = this, i = 0, o = this.branches.length; i < o; i++) this.branches[i].poi.intersections = e[i];
                var a = this.__cachedPOI;
                this.__cachedPOI = [], a.forEach(function(e) {
                    e.type !== n.INTERSECTION ? t.__cachedPOI.push(e) : delete t.__cachedPOIIds[e.id]
                });
                for (var i = 0; i < this.branches.length; i++) {
                    var s = this.branches[i],
                        l = s.graphMode,
                        c = s.poi;
                    l !== r.X && l !== r.Y || c.intersections && this._pushPOI(c.intersections, i, n.INTERSECTION)
                }
            }, e.prototype.getPOIById = function(e) {
                return this.__cachedPOIIds[e]
            }, e.prototype.updateFrom = function(e) {
                if (e) {
                    this.visible = !0, this.showPOI = e.showPOI, this.showHighlight = e.showHighlight, this.selected = e.selected;
                    var t = this.branches[0].graphMode;
                    if (t === r.XYPOINT || t === r.XYPOINT_MOVABLE) {
                        for (var n = !0, i = 0; i < this.__cachedPOI.length; i++) {
                            var o = e.__cachedPOI[i],
                                a = this.__cachedPOI[i];
                            if (!o || o.type !== a.type) {
                                n = !1;
                                break
                            }
                        }
                        if (n)
                            for (var i = 0; i < this.__cachedPOI.length; i++) {
                                var o = e.__cachedPOI[i],
                                    a = this.__cachedPOI[i];
                                delete this.__cachedPOIIds[a.id], this.__cachedPOIIds[o.id] = a, a.id = o.id
                            }
                    }
                }
            }, e
        }();
        t.GraphSketch = a
    }),
    function(e) {
        if ("object" == typeof exports && "undefined" != typeof module) module.exports = e();
        else if ("function" == typeof define && define.amd) define("base64", [], e);
        else {
            var t;
            t = "undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self ? self : this, t.base64js = e()
        }
    }(function() {
        return function e(t, n, r) {
            function i(a, s) {
                if (!n[a]) {
                    if (!t[a]) {
                        var l = "function" == typeof require && require;
                        if (!s && l) return l(a, !0);
                        if (o) return o(a, !0);
                        var c = new Error("Cannot find module '" + a + "'");
                        throw c.code = "MODULE_NOT_FOUND", c
                    }
                    var u = n[a] = {
                        exports: {}
                    };
                    t[a][0].call(u.exports, function(e) {
                        var n = t[a][1][e];
                        return i(n || e)
                    }, u, u.exports, e, t, n, r)
                }
                return n[a].exports
            }
            for (var o = "function" == typeof require && require, a = 0; a < r.length; a++) i(r[a]);
            return i
        }({
            "/": [function(e, t, n) {
                "use strict";

                function r(e) {
                    var t = e.length;
                    if (t % 4 > 0) throw new Error("Invalid string. Length must be a multiple of 4");
                    return "=" === e[t - 2] ? 2 : "=" === e[t - 1] ? 1 : 0
                }

                function i(e) {
                    return 3 * e.length / 4 - r(e)
                }

                function o(e) {
                    var t, n, i, o, a, s, l = e.length;
                    a = r(e), s = new p(3 * l / 4 - a), i = a > 0 ? l - 4 : l;
                    var c = 0;
                    for (t = 0, n = 0; t < i; t += 4, n += 3) o = u[e.charCodeAt(t)] << 18 | u[e.charCodeAt(t + 1)] << 12 | u[e.charCodeAt(t + 2)] << 6 | u[e.charCodeAt(t + 3)], s[c++] = o >> 16 & 255, s[c++] = o >> 8 & 255, s[c++] = 255 & o;
                    return 2 === a ? (o = u[e.charCodeAt(t)] << 2 | u[e.charCodeAt(t + 1)] >> 4, s[c++] = 255 & o) : 1 === a && (o = u[e.charCodeAt(t)] << 10 | u[e.charCodeAt(t + 1)] << 4 | u[e.charCodeAt(t + 2)] >> 2, s[c++] = o >> 8 & 255, s[c++] = 255 & o), s
                }

                function a(e) {
                    return c[e >> 18 & 63] + c[e >> 12 & 63] + c[e >> 6 & 63] + c[63 & e]
                }

                function s(e, t, n) {
                    for (var r, i = [], o = t; o < n; o += 3) r = (e[o] << 16) + (e[o + 1] << 8) + e[o + 2], i.push(a(r));
                    return i.join("")
                }

                function l(e) {
                    for (var t, n = e.length, r = n % 3, i = "", o = [], a = 0, l = n - r; a < l; a += 16383) o.push(s(e, a, a + 16383 > l ? l : a + 16383));
                    return 1 === r ? (t = e[n - 1], i += c[t >> 2], i += c[t << 4 & 63], i += "==") : 2 === r && (t = (e[n - 2] << 8) + e[n - 1], i += c[t >> 10], i += c[t >> 4 & 63], i += c[t << 2 & 63], i += "="), o.push(i), o.join("")
                }
                n.byteLength = i, n.toByteArray = o, n.fromByteArray = l;
                for (var c = [], u = [], p = "undefined" != typeof Uint8Array ? Uint8Array : Array, d = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/", h = 0, f = d.length; h < f; ++h) c[h] = d[h], u[d.charCodeAt(h)] = h;
                u["-".charCodeAt(0)] = 62, u["_".charCodeAt(0)] = 63
            }, {}]
        }, {}, [])("/")
    }), define("bin", ["base64"], function(e) {
        var t = {};
        return {
            load: function(e, n, r, i) {
                var o = n.toUrl("assets_src/" + e);
                if (i.isBuild) {
                    var a = require.nodeRequire("fs");
                    t[e] = a.readFileSync(o).toString("base64"), r()
                } else {
                    var s = new XMLHttpRequest;
                    s.open("GET", o, !0), s.responseType = "arraybuffer", s.onload = function() {
                        r(s.response)
                    }, s.send()
                }
            },
            write: function(e, n, r, i) {
                n in t ? r("define('" + e + "!" + n + "', ['base64'], function (base64) {  return base64.toByteArray('" + t[n] + "').buffer;});") : console.log("ERROR - failed to find file " + n + " in buildMap")
            }
        }
    }), define("bin!audio/poi.mp3", ["base64"], function(e) {
        return e.toByteArray("//tQxAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8AAAAIAAAHVwAgICAgICAgICAgICBAQEBAQEBAQEBAQEBgYGBgYGBgYGBgYGBggICAgICAgICAgICAoKCgoKCgoKCgoKCgoMDAwMDAwMDAwMDAwODg4ODg4ODg4ODg4OD///////////////8AAAA5TEFNRTMuOThyAaUAAAAALmcAABRAJAiwQgAAQAAAB1cctrbdAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP/7UMQAAAjsKyK0YYABp52xtx8wAgAgBd34IAhAgnsECEe7QIAAgsPxACDgcBAEHQfD/g+D4PggCAIf///ghLny4Pg+D5+sHz/wf+XPwfB8H3iMHwfwffUCYPvz/Y7Hg/H4/H4/H4HAwADcoDwAP7XfuAFtXrhzjsjOXP8iCYM4IBVoH2DGAhQR2hm5vikA2IVEPX9nQaITi6IiLCKX/fxcg/DdGmS5BP7fIGQ0hw7DQi5Q//8midImXygdJ0tlz/1NAgXIANV6MA2Vy2y27jv/+1LEBIALOHOTvGGAMXWhbnTxGZ+LOa2FNMsDtj9/jUmPqqqARrNvlVjDDoGZqq0T11A0DVqeEnlQk8q4sVEp0FcqdxLoEJ0RPYWvIlQkbGA0Anw6VJJgqRKw1NJaAXkR4ag0/FwCCABbbdbJA0fzVgdvgvu5Px6Rwiv3VllZVDREqmWntLyBDka3sz951iTve+ddHP0/M3P/+ydU4zbqOZOeop5jfu1kwk8VezPeGc1hRMbWrJNv6SO/fH0Mc15KYvKqAAAAdrdsrbBDuBpp4v/7UsQGgguVE2ekjNP5aSBo6YSNgKAQUoCZEBJK8q73G/nhJFFmLY5dNc4b7gjBRyEs5yjJokY9TBoU/pXQBglyNjeiA87V8vkzaw019YTu2fxY0t6gteLMI37f9fYw7UVnWoE4NJOSpQBu3GfVAIVACgw+IikZZAnB7UKlLGnha4PDbIhsBhk4RYmlE2hYZ8NrQ5HnyEUvZxDyVG1hM33ZZH0OlrJV5///3/51qTGtJgxhREVLEfoO1w6686eRAAAAUicksbA1qegZCe2AuEgJ//tSxAkCDF0XSaw8ailyn+l1h4w1BvVY04S56fYY5nGkBZHMGLBjHDUMlORG4wcCT9R6RB+3vM8jVMU1hmlOoXIOMKqotE2HxWYNJq/7EZ2l63NJ+Z2aTA4Yq+7t0PhOxCz9WP1mA3DJZZGDkRfq+qFAGwhwHUAVqBfDiMUlypaMWApR1VoWLChfUpJzkBDMCTf85UZr6jyHa1psZnTS5iKatTVKcX/Ker9zMvM1T0okGyiQcreJbU1tc+Yj/ms3395FBIADkjlkjbAZNdiwgRD/+1LEBwAL8Tdbp6Rh+XmT6XWHjCx5U4sTCtlUidNtS9I7oUx7oxdIZlOghkIQYzB0vxtMs6QgCg4WMVakQMM5HRfrsdIEftM0yfOHnNGkiPRMoWCKSsxsChat8/vYw4c4t+CMMB5AAAAXZrftWiEVdbSgnURZoWvK2KhK9GfCkIGnQKxIqbYJ0JCNFJ3St1wuUNRLW4Kw5VhLVGrmgYKhhRe1qzzC7SqFFyjJlIqXcPD6gw//epZ9bwQFw+s+rdVAFtzl0AAAA3I3JK0QJxtCHv/7UsQGAApAM0WssGFpSCKqNYMMvgZph6CwIhKEt0yEiMwFKpnDBBajVc5jbTM7KayRt3I43h8Ag05kd9AtqO0bItmf/+Aevzf7dx28sK0hvP//3/izNwf1pfEAgANutuOJACSqWvuW+SKNLQSpOQKsrX3XxnZxy2Rus0Q1irPy9Mkg4kZGJFRQUax4R+jsACwavqYd2bmRX/6VnKrLk2Z2VGYwQNCIEasJh7/oBScAAMtBNgBWssKw0uCAgKkVpJirpZyBklUCwqaSIkW6BgIY//tSxBIDSYw3Km0kSoEzi9KAliSw9QNAydBqoFQVEQNBwiJYiBWdDqxiwVBUGqg6JgaBoGj3//////huVcFQsIRoPjBXLBGA8AkCwOhcD4KAmFAtEYcR6E8gD2OAXJ2N//uSJVZVJNRdh0gkLCwuKioqz4sLC3//////4sLC31ioqKpAoqKirOgFqkxBTUUzLjk4LjKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqr/+1LEIwPAAAGkAAAAIAAANIAAAASqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqg==").buffer
    }), define("graphing/tonegenerator", ["require", "exports", "bin!audio/poi.mp3", "tslib", "browser", "lib/animation-frame", "bugsnag", "graphing/graphmode"], function(e, t, n, r, i, o, a, s) {
        "use strict";

        function l() {
            return {
                amplitude: 0,
                phase: 0,
                noiseVal: 0,
                lowerOctaveGain: 0,
                upperOctaveGain: 0
            }
        }

        function c(e, t) {
            var n = t.independentMin,
                r = t.independentMax,
                i = Math.abs((e - n) / (r - n));
            return isFinite(i) || (i = .5), i = Math.max(Math.min(i, 1), 0), {
                left: Math.cos(Math.PI / 2 * i),
                right: Math.sin(Math.PI / 2 * i)
            }
        }

        function u(e, t, n, r, i) {
            var o = t.independent,
                a = t.dependent,
                s = e.phase,
                l = e.noiseVal,
                c = e.lowerOctaveGain,
                u = e.upperOctaveGain,
                f = n.dependentMin,
                m = n.dependentMax,
                g = 0,
                y = 0,
                v = 0;
            if (!isNaN(a) && f <= a && a <= m) {
                s += p((a - f) / (m - f)) / r, i < 4 * O ? (y = 0, v = 0) : (y = .5, v = o < 0 ? .5 : 0), a < 0 && (l = h(l), g += .15 * l)
            } else l = h(l), g += .15 * l;
            return c += (y - c) / (r * O), u += (v - u) / (r * O), g += c * d(s) + u * d(2 * s), {
                amplitude: g,
                phase: s,
                noiseVal: l,
                lowerOctaveGain: c,
                upperOctaveGain: u
            }
        }

        function p(e) {
            return Math.min(Math.max(q * Math.pow(2, e), F), N)
        }

        function d(e) {
            return Math.abs(4 * e + 1 - 4 * Math.floor((4 * e + 3) / 4)) - 1
        }

        function h(e) {
            return (e + .2 * (2 * Math.random() - 1)) / 1.02
        }

        function f(e, t) {
            return e[0] - t[0]
        }

        function m(e) {
            e = r.__assign({}, e);
            var t = e.segments[0].slice();
            return t.sort(f), e.segments = [t], e
        }

        function g(e, t, n, r) {
            for (var i = e.getChannelData(0), o = t.getChannelData(0), a = t.getChannelData(1), s = 0; s < i.length && s + n < o.length; s++) o[s + n] += i[s] * r.left, a[s + n] += i[s] * r.right
        }

        function y(e) {
            for (var t = 0, n = e.branches; t < n.length; t++) {
                if (v(n[t])) return !0
            }
            return !1
        }

        function v(e) {
            switch (e.graphMode) {
                case s.X:
                case s.Y:
                case s.XYPOINT:
                case s.XYPOINT_MOVABLE:
                    return e.segments.length > 0;
                default:
                    return !1
            }
        }

        function b(e) {
            for (var t = 0; t < e.branches.length; t++)
                if (v(e.branches[t])) return t;
            return 0
        }

        function x(e, t) {
            for (var n = 0, r = 0; r <= t; r++) v(e.branches[r]) && (n += 1);
            return n
        }

        function w(e) {
            switch (e.graphMode) {
                case s.X:
                case s.Y:
                case s.XYPOINT:
                case s.XYPOINT_MOVABLE:
                    return !0;
                default:
                    return !1
            }
        }

        function _(e, t, n) {
            switch (e.graphMode) {
                case s.Y:
                case s.X:
                    if (t < 0 || t >= e.segments.length) return !1;
                    var r = e.segments[t],
                        i = 2 * n;
                    return i >= 0 && i < r.length;
                case s.XYPOINT:
                case s.XYPOINT_MOVABLE:
                    return n >= 0 && n <= 1 && t >= 0 && t < e.segments[0].length;
                default:
                    return !1
            }
        }

        function S() {
            return {
                independent: NaN,
                dependent: NaN
            }
        }

        function E(e, t, n, r, i) {
            if (!_(e, t, n)) return S();
            switch (e.graphMode) {
                case s.Y:
                case s.X:
                    var o = e.segments[t],
                        a = 2 * n;
                    return a + 1 >= o.length ? S() : {
                        independent: o[a],
                        dependent: o[a + 1]
                    };
                case s.XYPOINT:
                case s.XYPOINT_MOVABLE:
                    var l = e.segments[0][t][1],
                        o = e.segments[0],
                        c = .5 * (r.xmax - r.xmin) / i * A;
                    if (0 === n) {
                        var u = -1 / 0;
                        _(e, t - 1, 0) && (u = .5 * (o[t][0] + o[t - 1][0]));
                        var p = Math.max(o[t][0] - c, u);
                        return {
                            independent: p,
                            dependent: l
                        }
                    }
                    var d = 1 / 0;
                    _(e, t + 1, 0) && (d = .5 * (o[t][0] + o[t + 1][0]));
                    var p = Math.min(o[t][0] + c, d);
                    return {
                        independent: p, dependent: l
                    };
                default:
                    return S()
            }
        }

        function M(e) {
            switch (e.graphMode) {
                case s.Y:
                case s.X:
                    return e.segments.length;
                case s.XYPOINT:
                case s.XYPOINT_MOVABLE:
                    return e.segments[0].length;
                default:
                    return 0
            }
        }

        function I(e, t, n, r) {
            if (!_(e, t, 0)) return NaN;
            switch (e.graphMode) {
                case s.Y:
                case s.X:
                    var i = e.segments[t];
                    return i[i.length - 2];
                case s.XYPOINT:
                case s.XYPOINT_MOVABLE:
                    var i = e.segments[0],
                        o = 1 / 0;
                    _(e, t + 1, 0) && (o = .5 * (i[t][0] + i[t + 1][0]));
                    var a = .5 * (n.xmax - n.xmin) / r * A;
                    return Math.min(i[t][0] + a, o);
                default:
                    return NaN
            }
        }

        function T(e, t) {
            switch (t) {
                case s.Y:
                case s.XYPOINT:
                case s.XYPOINT_MOVABLE:
                    return {
                        independentMin: e.xmin, independentMax: e.xmax, dependentMin: e.ymin, dependentMax: e.ymax
                    };
                case s.X:
                    return {
                        independentMin: e.ymin, independentMax: e.ymax, dependentMin: e.xmin, dependentMax: e.xmax
                    };
                default:
                    throw D(t)
            }
        }

        function C(e) {
            switch (e.graphMode) {
                case s.Y:
                case s.XYPOINT:
                case s.XYPOINT_MOVABLE:
                    return {
                        independent: e.x, dependent: e.y
                    };
                case s.X:
                    return {
                        independent: e.y, dependent: e.x
                    };
                default:
                    throw D(e.graphMode)
            }
        }

        function k(e, t) {
            if (e === s.X) return t.y;
            if (e === s.Y) return t.x;
            throw D(e)
        }

        function D(e) {
            return "Unexpected graph mode. Received " + e
        }

        function P(e, t, n, r) {
            var i = e.sampleRate,
                o = e.getChannelData(0),
                a = e.getChannelData(1),
                p = t.graphMode,
                d = T(n, p),
                h = d.independentMin,
                f = d.independentMax,
                y = f - h,
                v = 0,
                b = 0,
                x = o.length - 1,
                w = x / i;
            t.graphMode !== s.XYPOINT && t.graphMode !== s.XYPOINT_MOVABLE || (t = m(t));
            for (var S = l(), C = 0; C < o.length; C++) {
                for (var D = NaN, P = (x - C) / x * h + C / x * f, L = c(P, d); v < M(t) && E(t, v, b, n, w).independent < P;) b += 1, _(t, v, b) || (v += 1, b = 0);
                var A = (I(t, v, n, w) - P) * (w / y),
                    O = E(t, v, b, n, w),
                    F = E(t, v, b - 1, n, w),
                    q = O.independent - F.independent;
                D = (O.independent - P) / q * F.dependent + (P - F.independent) / q * O.dependent, S = u(S, {
                    independent: P,
                    dependent: D
                }, d, i, A), o[C] += S.amplitude * L.left, a[C] += S.amplitude * L.right
            }
            if (r && (p === s.X || p === s.Y) && t.poi.intersections)
                for (var N = k(p, t.poi.intersections), R = 0, B = N; R < B.length; R++) {
                    var P = B[R],
                        C = Math.round((P - h) / (f - h) * x);
                    g(r, e, C, c(P, d))
                }
        }

        function L(e, t, n, r) {
            for (var i = e.sampleRate, o = e.getChannelData(0), a = e.getChannelData(1), s = t.graphMode, p = T(n, s), d = o.length - 1, h = l(), f = C(t), m = f.independent, y = f.dependent, v = c(m, p), b = 0; b < o.length; b++) {
                h = u(h, {
                    independent: m,
                    dependent: y
                }, p, i, (d - b) / i), o[b] += h.amplitude * v.left, a[b] += h.amplitude * v.right
            }
            r && void 0 !== t.intersects && g(r, e, 0, v)
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var A = .075,
            O = .0015,
            F = 125,
            q = 500,
            N = 2e3,
            R = function() {
                function e(e) {
                    var t = e.audioPointMove,
                        n = e.animationFinished;
                    this.audioSpeed = 50, this.audioVolume = .5, this.audioPointMove = t, this.animationFinished = n
                }
                return e.prototype.suspend = function() {
                    this.playbackSupported && this.audioCtx && (this.stop(), this.audioCtx.suspend())
                }, e.prototype.resume = function() {
                    if (!this.audioCtx) {
                        var e = window.AudioContext || window.webkitAudioContext;
                        if (i.IS_IE) this.playbackSupported = !1, this.audioCtx = void 0;
                        else try {
                            this.audioCtx = e ? new e : void 0, this.playbackSupported = !0
                        } catch (e) {
                            a.notify(e), this.playbackSupported = !1, this.audioCtx = void 0
                        }
                    }
                    this.playbackSupported && this.audioCtx && ("suspended" === this.audioCtx.state && this.audioCtx.resume(), this.loadPOI())
                }, e.prototype.stop = function() {
                    this.playTimeout && (o.cancelAnimationFrame(this.playTimeout), this.playTimeout = void 0), this.bufferSource && (this.bufferSource.stop(), this.bufferSource.disconnect(), this.bufferSource = void 0), this.animationFinished()
                }, e.prototype.isAnimating = function() {
                    return void 0 !== this.playTimeout
                }, e.prototype.getAudioSpeed = function() {
                    return this.audioSpeed
                }, e.prototype.setAudioSpeed = function(e) {
                    this.audioSpeed = e
                }, e.prototype.getAudioVolume = function() {
                    return this.audioVolume
                }, e.prototype.setAudioVolume = function(e) {
                    this.audioVolume = e, void 0 !== this.gainMaster && (this.gainMaster.gain.value = this.audioVolume)
                }, e.prototype.getPlaybackSupported = function() {
                    return this.playbackSupported
                }, e.prototype.playBranchByIndex = function(e, t, n) {
                    var r = this;
                    if (!(t < 0 || t >= e.branches.length) && v(e.branches[t])) {
                        var i = function() {
                            return r.stop()
                        };
                        this.playBranch(e.branches[t], t, n, i)
                    }
                }, e.prototype.playSketch = function(e, t) {
                    var n = this,
                        r = e.branches;
                    if (0 !== r.length) {
                        var i = -1,
                            o = function() {
                                for (i += 1; i < r.length && !v(r[i]);) i += 1;
                                i < r.length ? n.playBranch(r[i], i, t, o) : n.stop()
                            };
                        o()
                    }
                }, e.prototype.playPoint = function(e, t) {
                    if (this.audioCtx && w(e)) {
                        var n = this.audioCtx.sampleRate,
                            r = n * A,
                            i = this.audioCtx.createBuffer(2, r, n);
                        L(i, e, t, this.poiBuffer), this.connectBuffer(i)
                    }
                }, e.prototype.connectBuffer = function(e) {
                    if (this.audioCtx) {
                        this.gainMaster = this.audioCtx.createGain(), this.gainMaster.connect(this.audioCtx.destination), this.gainMaster.gain.value = this.audioVolume;
                        var t = this.audioCtx.createBufferSource();
                        this.bufferSource = t, t.buffer = e, t.connect(this.gainMaster), t.start()
                    }
                }, e.prototype.playBranch = function(e, t, n, r) {
                    var i = this;
                    if (this.audioCtx) {
                        var a = this.audioSpeed / 10,
                            s = this.audioCtx.sampleRate,
                            l = s * a,
                            c = this.audioCtx.createBuffer(2, l, s);
                        P(c, e, n, this.poiBuffer), this.connectBuffer(c);
                        var u = this.audioCtx.currentTime,
                            p = function() {
                                if (void 0 !== i.playTimeout && o.cancelAnimationFrame(i.playTimeout), i.audioCtx) {
                                    var s = i.audioCtx.currentTime,
                                        l = s - u,
                                        c = e.graphMode,
                                        d = T(n, c),
                                        h = d.independentMin,
                                        f = d.independentMax,
                                        m = (a - l) / a * h + l / a * f;
                                    i.audioPointMove(t, m), l < a ? i.playTimeout = o.requestAnimationFrame(p) : r()
                                }
                            };
                        p()
                    }
                }, e.prototype.loadPOI = function() {
                    var e = this;
                    this.playbackSupported && !this.poiBuffer && this.audioCtx && this.audioCtx.decodeAudioData(n.slice(0), function(t) {
                        e.poiBuffer = t
                    })
                }, e
            }();
        t.default = R, t.canPlaySketch = y, t.canPlayBranch = v, t.getFirstPlayableBranchIndex = b, t.getReportedBranch = x
    }), define("graphing/audiographnavigator", ["require", "exports", "main/propagate_selection", "tslib", "underscore", "graphing/graphmode", "graphing/label", "math/poi", "graphing/tonegenerator", "underscore", "lib/aria"], function(e, t, n, r, i, o, a, s, l, c, u) {
        "use strict";

        function p(e, t, n) {
            return {
                x: e.x,
                y: e.y,
                branch: e.branch,
                reportedBranch: n,
                type: e.type,
                graphMode: t,
                intersects: e.intersects
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var d = function() {
            function e(e, t, n) {
                this.grapher = n, this.controller = e, this.audiograph = t, this.reset()
            }
            return e.prototype.reset = function() {
                this.currentPoint = void 0, this.resetToFirstBranch(), this.sampledPoints = [], this.pois = [], this.independent = 0, this.xstep = 0, this.ystep = 0
            }, e.prototype.resetToFirstBranch = function() {
                var e = this.getCurrentSketch();
                this.branch = e ? l.getFirstPlayableBranchIndex(e) : 0
            }, e.prototype.getBranchPoints = function(e) {
                var t = [];
                if (e >= 0)
                    for (var n = 0, r = this.getSampledPoints(); n < r.length; n++) {
                        var i = r[n];
                        i.branch === e && t.push(i)
                    }
                return t
            }, e.prototype.resetTracePoint = function() {
                this.drawTrace(this.getCurrentPoint())
            }, e.prototype.drawTrace = function(e) {
                var t = this.getCurrentSketch();
                if (e && t) {
                    var n = t.branches[this.branch];
                    if (n) {
                        if (n.graphMode !== o.XYPOINT) {
                            var r = {
                                    x: e.x,
                                    y: e.y
                                },
                                i = {
                                    branchInfo: {
                                        branch: e.branch,
                                        id: t.id,
                                        sketch: t
                                    },
                                    pt: r
                                };
                            c.isEqual(i, this.grapher.traceLayer.getTraceInfo()) || (this.grapher.traceLayer.setTraceInfo(i), this.grapher.redrawAllLayers())
                        }
                    }
                }
            }, e.prototype.moveToOrigin = function() {
                var e = this.getCurrentSketch();
                if (e && l.canPlaySketch(e)) {
                    var t = e.branches[this.branch];
                    if (l.canPlayBranch(t)) {
                        var n = t.graphMode;
                        if (n === o.Y) this.setIndependent("x", 0);
                        else if (n === o.X) this.setIndependent("y", 0);
                        else if (n === o.XYPOINT) {
                            var r = this.getSortedPOI()[0];
                            this.setIndependent("x", r ? r.x : 0)
                        }
                    }
                }
            }, e.prototype.getCurrentSketch = function() {
                var e, t = this.getSelectedItem();
                if (t) {
                    var n = this.audiograph.getFocusedCell();
                    e = "table" === t.type && n ? this.getGraphSketchForTableCell(t, n) : this.grapher.getGraphSketch(t.id)
                }
                return e
            }, e.prototype.getFirstTraceableSketch = function(e) {
                for (var t, n = this.controller.getItemCount(), r = this.controller.shouldAudioTraceReverseExpressions(), i = 0; i < n; i++) {
                    var o = r ? n - 1 - i : i,
                        a = this.controller.getItemModelByIndex(o);
                    if (a && this.canTrace(a)) {
                        var s = r ? this.prevTableColumn(a) : this.nextTableColumn(a);
                        if (s ? (this.audiograph.setFocusedCell(s), t = this.getGraphSketchForTableCell(a, s)) : t = this.grapher.getGraphSketch(a.id), t) {
                            e && e.selectAssociatedExpression && this.controller.dispatch({
                                type: "set-selected-index",
                                index: o
                            });
                            break
                        }
                    }
                }
                return t
            }, e.prototype.canTrace = function(e) {
                if ("shouldGraph" in e) {
                    var t = this.grapher.getGraphSketch(e.id);
                    return !!t && l.canPlaySketch(t)
                }
                return !1
            }, e.prototype.getTraceableExpressionCount = function() {
                for (var e = 0, t = this.controller.getItemCount(), n = 0; n < t; n++) {
                    var r = this.controller.getItemModelByIndex(n);
                    r && (this.canTrace(r) && e++)
                }
                return e
            }, e.prototype.computeStepSizes = function() {
                var e = this.grapher.getProjection().viewport;
                if (e) {
                    this.viewport = e;
                    var t = e.xmin,
                        n = e.xmax;
                    this.xstep = Math.abs(n - t) / 100, this.xscale = n - t;
                    var r = e.ymin,
                        i = e.ymax;
                    this.ystep = Math.abs(i - r) / 100, this.yscale = i - r;
                    var a = this.getCurrentSketch();
                    if (a && l.canPlaySketch(a)) {
                        var s = a.branches[this.branch];
                        if (l.canPlayBranch(s)) {
                            var c = s.graphMode;
                            if (c === o.Y) this.independent < t ? this.independent = t : this.independent > n && (this.independent = n);
                            else if (c === o.X) this.independent < r ? this.independent = r : this.independent > i && (this.independent = i);
                            else if (c === o.XYPOINT) {
                                var u = void 0,
                                    p = void 0;
                                this.independent < t ? (p = this.getSortedPOI()[0], this.independent = p && void 0 !== p.x ? p.x : 0) : this.independent > n && (u = this.getSortedPOI(), p = u[u.length - 1], this.independent = p && void 0 !== p.x ? p.x : 0)
                            }
                        }
                    }
                }
            }, e.prototype.getPoint = function(e, t) {
                var n, r = this.getCurrentSketch();
                if (!r || !l.canPlaySketch(r)) return n;
                var i, a, s, c = 0,
                    u = r.branches[e];
                if (u) {
                    var p = l.getReportedBranch(r, e);
                    return "compiled" in u && u.compiled && (s = u.compiled.fn), a = u.graphMode, a === o.Y ? (i = this.getInterveningPOIs(t, t + this.xstep, e, a)[0], i && i.x === t && i.branch === e || (i = void 0, c = s ? s(t) : 0), i ? n = {
                        x: i.x,
                        y: i.y,
                        type: i.type,
                        typeChain: i.typeChain,
                        branch: i.branch,
                        reportedBranch: p,
                        graphMode: a,
                        intersects: i.intersects
                    } : s && (n = {
                        x: t,
                        y: c,
                        branch: e,
                        reportedBranch: p,
                        graphMode: a
                    })) : a === o.X ? (i = this.getInterveningPOIs(t, t + this.ystep, e, a)[0], i && i.y === t && i.branch === e || (i = void 0, c = s ? s(t) : 0), i ? n = {
                        x: i.x,
                        y: i.y,
                        type: i.type,
                        typeChain: i.typeChain,
                        branch: i.branch,
                        reportedBranch: p,
                        graphMode: a,
                        intersects: i.intersects
                    } : s && (n = {
                        y: t,
                        x: c,
                        branch: e,
                        reportedBranch: p,
                        graphMode: a
                    })) : a === o.XYPOINT && (i = this.getInterveningPOIs(t, t + this.xstep, e, a)[0], n = i && i.x === t && i.branch === e ? {
                        x: i.x,
                        y: i.y,
                        type: i.type,
                        typeChain: i.typeChain,
                        branch: i.branch,
                        reportedBranch: p,
                        graphMode: a,
                        intersects: i.intersects
                    } : {
                        x: t,
                        y: NaN,
                        branch: e,
                        reportedBranch: p,
                        graphMode: a
                    }), n
                }
            }, e.prototype.getSampledPoints = function() {
                return 0 === this.sampledPoints.length && this.updateSampledPoints(), this.sampledPoints
            }, e.prototype.updateSampledPoints = function() {
                var e = this.getCurrentSketch();
                if (e && l.canPlaySketch(e)) {
                    for (var t = [], n = 0; n < e.branches.length; n++) {
                        var r = e.branches[n];
                        if (l.canPlayBranch(r)) {
                            var i = r.graphMode,
                                s = 0,
                                c = 0,
                                u = 0,
                                p = [];
                            if (i === o.Y || i === o.XYPOINT ? (s = this.viewport.xmin, c = this.viewport.xmax, u = this.xstep) : i === o.X && (s = this.viewport.ymin, c = this.viewport.ymax, u = this.ystep), 0 !== s || 0 !== c || 0 !== u) {
                                for (var d = 0; a.value(s + d * u).value <= c; d++) {
                                    var h = a.value(s + d * u).value,
                                        f = this.getInterveningPOIs(h, h + u, n, i);
                                    if (f.length > 0) p.push.apply(p, f);
                                    else {
                                        var m = this.getPoint(n, h);
                                        m && p.push(m)
                                    }
                                }
                                t.push.apply(t, this.removeDuplicates(p, i))
                            }
                        }
                    }
                    this.sampledPoints = t
                }
            }, e.prototype.getCurrentPoint = function() {
                return this.currentPoint || this.updateCurrentPoint(), this.currentPoint
            }, e.prototype.updateCurrentPoint = function(e) {
                if (e) {
                    this.currentPoint = e;
                    var t = e.graphMode;
                    t === o.Y || t === o.XYPOINT ? this.independent = void 0 !== e.x ? e.x : 0 : t === o.X && (this.independent = void 0 !== e.y ? e.y : 0), this.branch = e.branch
                } else this.currentPoint = this.getPoint(this.branch, this.independent)
            }, e.prototype.prevPoint = function() {
                this.moveToPoint(-1)
            }, e.prototype.nextPoint = function() {
                this.moveToPoint(1)
            }, e.prototype.firstPoint = function() {
                var e = this.getSampledPoints();
                e.length > 0 && this.updateCurrentPoint(e[0])
            }, e.prototype.lastPoint = function() {
                var e = this.getSampledPoints();
                e.length > 0 && this.updateCurrentPoint(e[e.length - 1])
            }, e.prototype.moveToPoint = function(e) {
                var t = this.getCurrentPoint();
                if (t) {
                    if (t.graphMode === o.XYPOINT) return void this.moveToPOI(e);
                    var n = this.getSampledPoints(),
                        r = this.getPointIndex(n, t);
                    if (-1 !== r) {
                        var i = r + e;
                        i <= 0 ? (i = 0, u.queue(this.controller.t("First point"))) : i >= n.length - 1 && (i = n.length - 1, u.queue(this.controller.t("Last point")));
                        var a = n[i];
                        this.updateCurrentPoint(a)
                    }
                }
            }, e.prototype.prevPOI = function() {
                this.moveToPOI(-1)
            }, e.prototype.nextPOI = function() {
                this.moveToPOI(1)
            }, e.prototype.getSortedPOI = function() {
                return this.pois && 0 !== this.pois.length || this.updatePOI(), this.pois
            }, e.prototype.updatePOI = function() {
                var e, t = [],
                    n = [],
                    r = this.getCurrentSketch();
                if (r && l.canPlaySketch(r)) {
                    for (var a = 0; a < r.branches.length; a++) {
                        var s = r.branches[a];
                        if (s) {
                            var c = l.getReportedBranch(r, a),
                                u = s.graphMode;
                            if (n = [], e = r.getBranchPOI(a), e.length > 0) {
                                u === o.Y || u === o.XYPOINT ? n = i.sortBy(e, "x") : u === o.X && (n = i.sortBy(e, "y"));
                                for (var d = [], h = 0, f = n; h < f.length; h++) {
                                    var m = f[h];
                                    d.push(p(m, u, c))
                                }
                                t.push.apply(t, this.removeDuplicates(d, u))
                            }
                        }
                    }
                    this.pois = t
                }
            }, e.prototype.removeDuplicates = function(e, t) {
                for (var n = [], i = 0, o = e; i < o.length; i++) {
                    var l = o[i];
                    if (l = r.__assign({}, l), l.graphMode = t, 0 !== n.length) {
                        var c = n[n.length - 1];
                        a.value(c.x).value === a.value(l.x).value && a.value(c.y).value === a.value(l.y).value && c.branch === l.branch ? (c.typeChain || (c.typeChain = void 0 !== c.type ? [c.type] : []), void 0 !== l.type && -1 === c.typeChain.indexOf(l.type) && c.typeChain.push(l.type), l.type === s.default.INTERSECTION && l.intersects && void 0 === c.intersects && (c.intersects = l.intersects)) : n.push(l)
                    } else n.push(l)
                }
                return n
            }, e.prototype.getInterveningPOIs = function(e, t, n, r) {
                for (var i = [], a = this.getSortedPOI(), s = NaN, l = 0, c = a; l < c.length; l++) {
                    var u = c[l];
                    u && (r !== o.Y && r !== o.XYPOINT || isNaN(u.x) ? r !== o.X || isNaN(u.y) || (s = u.y) : s = u.x, u.branch === n && !isNaN(s) && (e <= s && s < t || t <= s && s < e) && i.push(u))
                }
                return e > t ? i.reverse() : i
            }, e.prototype.setIndependent = function(e, t) {
                for (var n = this.getSampledPoints(), r = 0, i = n; r < i.length; r++) {
                    var o = i[r];
                    if (o && o.hasOwnProperty(e) && o[e] === t) {
                        if ("x" === e) return this.independent = void 0 !== o.x ? o.x : 0, void this.updateCurrentPoint();
                        if ("y" === e) return this.independent = void 0 !== o.y ? o.y : 0, void this.updateCurrentPoint()
                    }
                }
                var a = !0;
                if (n.length > 0) {
                    var s = Math.floor((n.length - 1) / 2),
                        l = n[s];
                    l && ("x" === e ? (this.independent = void 0 !== l.x ? l.x : 0, a = !1) : "y" === e && (this.independent = void 0 !== l.y ? l.y : 0, a = !1))
                }
                a && (this.independent = 0), this.resetToFirstBranch(), this.updateCurrentPoint()
            }, e.prototype.moveToPOI = function(e) {
                var t = this.getCurrentPoint();
                if (t) {
                    var n = this.getSampledPoints(),
                        r = this.getPointIndex(n, t);
                    if (-1 !== r) {
                        for (var i = t.graphMode, a = -1, s = 1 === e ? n.length - 1 : 0, l = r; l !== s + e; l += e) {
                            var c = n[l];
                            if (((i === o.Y || i === o.XYPOINT) && t.x !== c.x || i === o.X && t.y !== c.y) && void 0 !== c.type) {
                                a = l;
                                break
                            }
                        } - 1 === a ? u.queue(this.controller.t("No more points of interest")) : this.updateCurrentPoint(n[a])
                    }
                }
            }, e.prototype.getPointIndex = function(e, t) {
                var n = -1;
                if (e.length > 0 && t)
                    for (var r = t.graphMode, i = 0; i < e.length; i++) {
                        var a = e[i];
                        if (((r === o.Y || r === o.XYPOINT) && a.x === t.x || r === o.X && a.y === t.y) && a.branch === t.branch) {
                            n = i;
                            break
                        }
                    }
                return n
            }, e.prototype.prevCurve = function() {
                this.controller.shouldAudioTraceReverseExpressions() ? this.curveDown() : this.curveUp()
            }, e.prototype.nextCurve = function() {
                this.controller.shouldAudioTraceReverseExpressions() ? this.curveUp() : this.curveDown()
            }, e.prototype.curveUp = function() {
                var e = this.getSelectedItem();
                if (e) {
                    var t = this.prevTableColumn(e);
                    if (t) this.audiograph.setFocusedCell(t);
                    else {
                        var n = e.index,
                            r = this.findPrevTraceableIndex(n);
                        if (-1 !== r) {
                            var i = this.controller.getItemModelByIndex(r);
                            i && this.controller.dispatch({
                                type: "set-selected-id",
                                id: i.id
                            })
                        }
                    }(t || this.getSelectedItem() !== e) && this.audiograph.enterAudioTrace()
                }
            }, e.prototype.curveDown = function() {
                var e = this.getSelectedItem();
                if (e) {
                    var t = this.nextTableColumn(e);
                    if (t) this.audiograph.setFocusedCell(t);
                    else {
                        var n = e.index,
                            r = this.findNextTraceableIndex(n);
                        if (-1 !== r) {
                            var i = this.controller.getItemModelByIndex(r);
                            i && this.controller.dispatch({
                                type: "set-selected-id",
                                id: i.id
                            })
                        }
                    }(t || this.getSelectedItem() !== e) && this.audiograph.enterAudioTrace()
                }
            }, e.prototype.findPrevTraceableIndex = function(e) {
                var t;
                do {
                    e--, t = this.controller.getItemModelByIndex(e);
                    var n = t && this.prevTableColumn(t);
                    if (n) return this.audiograph.setFocusedCell(n), e
                } while (t && !this.canTrace(t));
                return t ? e : -1
            }, e.prototype.findNextTraceableIndex = function(e) {
                var t;
                do {
                    e++, t = this.controller.getItemModelByIndex(e);
                    var n = t && this.nextTableColumn(t);
                    if (n) return this.audiograph.setFocusedCell(n), e
                } while (t && !this.canTrace(t));
                return t ? e : -1
            }, e.prototype.prevTableColumn = function(e) {
                return this.tableColumn(e, -1)
            }, e.prototype.nextTableColumn = function(e) {
                return this.tableColumn(e, 1)
            }, e.prototype.tableColumn = function(e, t) {
                var n;
                if (e && "table" === e.type) {
                    var r = this.audiograph.getFocusedCell(),
                        i = void 0,
                        o = void 0,
                        a = void 0; - 1 === t ? (i = r ? Math.max(r.location.column - 1, 0) : NaN, o = r && r.tableId === e.id && !isNaN(i) ? i : e.columnModels.length - 1, a = 0) : (i = r ? Math.min(r.location.column + 1, e.columnModels.length - 1) : NaN, o = r && r.tableId === e.id && !isNaN(i) ? i : 0, a = e.columnModels.length - 1);
                    var s = (a - o) / t;
                    if (isFinite(s) && s >= 0)
                        for (var l = o; l !== a; l += t) {
                            var c = e.columnModels[l];
                            if (c) {
                                var u = this.grapher.getGraphSketch(c.id);
                                if (u) {
                                    n = {
                                        tableId: e.id,
                                        location: {
                                            column: l,
                                            row: 0
                                        }
                                    };
                                    break
                                }
                            }
                        }
                }
                return n
            }, e.prototype.getGraphSketchForTableCell = function(e, t) {
                if (e && "table" === e.type && t) {
                    var n = e.columnModels[t.location.column];
                    return n ? this.grapher.getGraphSketch(n.id) : void 0
                }
            }, e.prototype.getXScale = function() {
                return this.xscale
            }, e.prototype.getYScale = function() {
                return this.yscale
            }, e.prototype.getSelectedItem = function() {
                var e = this.controller.getSelectedItem();
                return e && "folder" === e.type ? this.controller.getItemModel(n.getSelectedId(e)) : e
            }, e
        }();
        t.default = d
    }), define("graphing/audiograph", ["require", "exports", "tslib", "browser", "keys", "lib/aria", "graphing/audiographnavigator", "graphing/tonegenerator", "graphing/graphmode", "graphing/label", "math/poi", "graphing-calc/models/table", "expressions/colors"], function(e, t, n, r, i, o, a, s, l, c, u, p, d) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var h = function() {
            function e(e, t) {
                var n = this;
                this.grapher = t, this.controller = e, this.audioTraceActive = !1, this.wasFocusInExpressionsView = !1, this.focusedCell = void 0, this.sliderTraceActive = !1, this.sliderIndex = 0, this.sliderArray = [], this.lastSpokenBranch = 1, this.agNavigator = new a.default(e, this, this.grapher), this.tonegen = new s.default({
                    audioPointMove: function(e, t) {
                        n.agNavigator.drawTrace(n.agNavigator.getPoint(e, t))
                    },
                    animationFinished: function() {
                        n.recomputePoints()
                    }
                }), this.tonegen.suspend()
            }
            return e.prototype.remove = function() {}, e.prototype.handleKeydown = function(e) {
                    var t = e.altKey || e.metaKey,
                        n = e.altKey && !e.metaKey && !e.ctrlKey && !e.shiftKey,
                        o = e.ctrlKey && !e.metaKey && !e.altKey,
                        a = r.IS_APPLE ? o : t,
                        s = a && (61 === e.which || 187 === e.which),
                        l = a && !e.shiftKey && (173 === e.which || 189 === e.which),
                        c = a && !e.shiftKey && "0" === i.lookupChar(e);
                    n && "S" === i.lookupChar(e) ? this.agNavigator.getSelectedItem() && (this.audioTraceActive || this.isFocusInExpressionsView()) && (e.preventDefault(), e.stopPropagation(), this.describeGraph()) : n && "T" === i.lookupChar(e) ? (e.preventDefault(), e.stopPropagation(), this.toggleAudioTrace()) : s ? (e.preventDefault(), e.stopPropagation(), this.zoom("in")) : l ? (e.preventDefault(), e.stopPropagation(), this.zoom("out")) : c ? (e.preventDefault(), e.stopPropagation(), this.zoom("default")) : this.audioTraceActive && (this.sliderTraceActive ? this.sliderTraceKeydown(e) : this.audioTraceKeydown(e))
                }, e.prototype.sliderTraceKeydown = function(e) {
                    var t = e.altKey || e.metaKey,
                        n = !t && !e.ctrlKey && !e.shiftKey;
                    n && i.lookup(e) === i.LEFT || "J" === i.lookupChar(e) ? (e.preventDefault(), e.stopPropagation(), this.decrementSliderValue()) : n && i.lookup(e) === i.RIGHT || "L" === i.lookupChar(e) ? (e.preventDefault(), e.stopPropagation(), this.incrementSliderValue()) : n && i.lookup(e) === i.PAGEDOWN ? (e.preventDefault(), e.stopPropagation(), this.decrementBigSliderValue()) : n && i.lookup(e) === i.PAGEUP ? (e.preventDefault(), e.stopPropagation(), this.incrementBigSliderValue()) : t || i.lookup(e) !== i.DOWN && (e.shiftKey || i.lookup(e) !== i.TAB) && "K" !== i.lookupChar(e) ? !t && (i.lookup(e) === i.UP || e.shiftKey && i.lookup(e) === i.TAB || "I" === i.lookupChar(e)) ? (e.preventDefault(), e.stopPropagation(), this.prevSlider()) : n && i.lookup(e) === i.HOME || "U" === i.lookupChar(e) ? (e.preventDefault(), e.stopPropagation(), this.sliderMin()) : n && i.lookup(e) === i.END || "N" === i.lookupChar(e) ? (e.preventDefault(), e.stopPropagation(), this.sliderMax()) : (this.stopAnimations(), this.audioTraceKeydown(e)) : (e.preventDefault(), e.stopPropagation(), this.nextSlider())
                }, e.prototype.audioTraceKeydown = function(e) {
                    var t = this,
                        n = e.altKey || e.metaKey,
                        r = n && !e.ctrlKey && !e.shiftKey,
                        a = !n && !e.ctrlKey && !e.shiftKey,
                        l = i.lookupChar(e);
                    if (i.lookup(e) === i.UP && r) e.preventDefault(), e.stopPropagation(), this.agNavigator.prevCurve();
                    else if (i.lookup(e) === i.DOWN && r) e.preventDefault(), e.stopPropagation(), this.agNavigator.nextCurve();
                    else if (a && i.lookup(e) === i.LEFT || i.lookup(e) === i.UP || "J" === l) e.preventDefault(), e.stopPropagation(), this.agNavigator.prevPoint(), this.reportAudioTrace();
                    else if (a && i.lookup(e) === i.RIGHT || i.lookup(e) === i.DOWN || "L" === l) e.preventDefault(), e.stopPropagation(), this.agNavigator.nextPoint(), this.reportAudioTrace();
                    else if (n || i.lookup(e) !== i.PAGEDOWN && (e.shiftKey || i.lookup(e) !== i.TAB) && "I" !== l)
                        if (!n && (i.lookup(e) === i.PAGEUP || e.shiftKey && i.lookup(e) === i.TAB || "K" === l)) e.preventDefault(), e.stopPropagation(), this.agNavigator.prevPOI(), this.reportAudioTrace();
                        else if (a && i.lookup(e) === i.HOME || "U" === l) e.preventDefault(), e.stopPropagation(), this.agNavigator.firstPoint(), this.reportAudioTrace();
                    else if (a && i.lookup(e) === i.END || "N" === l) e.preventDefault(), e.stopPropagation(), this.agNavigator.lastPoint(), this.reportAudioTrace();
                    else if (a && "X" === l) e.preventDefault(), e.stopPropagation(), this.reportAudioTrace("x");
                    else if (a && "P" === l) e.preventDefault(), e.stopPropagation(), this.queuePOICount(), o.alert();
                    else if (a && "Y" === l) e.preventDefault(), e.stopPropagation(), this.reportAudioTrace("y");
                    else if (a && "T" === l) e.preventDefault(), e.stopPropagation(), this.reportAudioTrace("type");
                    else if (a && "B" === l) e.preventDefault(), e.stopPropagation(), this.reportAudioTrace("branch");
                    else if (a && "O" === l) e.preventDefault(), e.stopPropagation(), this.agNavigator.moveToOrigin(), this.reportAudioTrace();
                    else if (a && "H" === l)
                        if (e.preventDefault(), e.stopPropagation(), this.tonegen.getPlaybackSupported()) {
                            this.tonegen.stop();
                            var c = this.agNavigator.getCurrentSketch();
                            c && s.canPlaySketch(c) ? (o.alert(this.controller.t("Playing graph.")), clearTimeout(this.playTimeout), this.playTimeout = setTimeout(function() {
                                return t.tonegen.playSketch(c, t.grapher.getCurrentViewport())
                            }, 500)) : o.alert(this.controller.t("Unable to audio trace this expression."))
                        } else o.alert(this.controller.t("Unable to play audio."));
                    else if (a && "string" == typeof l && l >= "0" && l <= "9") {
                        e.preventDefault(), e.stopPropagation(), this.tonegen.stop();
                        var u = this.agNavigator.getCurrentSketch();
                        if (u) {
                            var p = void 0;
                            p = 48 === e.which ? 9 : e.which - 49;
                            for (var h = p, f = -1, m = 0; m < u.branches.length; m++)
                                if (s.canPlayBranch(u.branches[m]) && (h -= 1), h < 0) {
                                    f = m;
                                    break
                                } f >= 0 ? this.tonegen.getPlaybackSupported() ? (o.alert(this.controller.t("Branch __branch__", {
                                branch: p + 1
                            })), clearTimeout(this.playTimeout), this.playTimeout = setTimeout(function() {
                                return t.tonegen.playBranchByIndex(u, f, t.grapher.getCurrentViewport())
                            }, 500)) : o.alert(this.controller.t("Unable to play audio.")) : o.alert(this.controller.t("Branch __branch__ does not exist.", {
                                branch: p + 1
                            }))
                        } else o.alert(this.controller.t("No graph selected."))
                    } else if (n && "string" == typeof l && l >= "1" && l <= "5") e.preventDefault(), e.stopPropagation(), this.adjustPlaybackSpeed(l);
                    else if (e.altKey || e.ctrlKey || e.metaKey || "V" !== l)
                        if (a && "A" === l) e.preventDefault(), e.stopPropagation(), this.queueAnimatingPoints(!0), o.alert();
                        else if (a && "S" === l && this.controller.isListEnabled()) e.preventDefault(), e.stopPropagation(), this.toggleSliderTrace();
                    else if (a && "C" === l) {
                        e.preventDefault(), e.stopPropagation();
                        var g = this.agNavigator.getCurrentSketch();
                        g ? o.queue(d.getColorName(this.controller, g.color)) : o.queue("unknown"), o.alert()
                    } else a && this.exitAudioTrace();
                    else e.preventDefault(), e.stopPropagation(), e.shiftKey ? this.adjustVolume("down") : this.adjustVolume("up");
                    else e.preventDefault(), e.stopPropagation(), this.agNavigator.nextPOI(), this.reportAudioTrace()
                }, e.prototype.describeGraph = function() {
                    var e = this.agNavigator.getCurrentSketch();
                    if (e) {
                        var t = s.getReportedBranch(e, e.branches.length - 1);
                        t > 1 && o.queue(this.controller.t("Branches: __branches__.", {
                            branches: t
                        }));
                        var n = this.agNavigator.getSortedPOI();
                        if (o.queue(this.controller.t("Points of interest: __poiCount__.", {
                                poiCount: n.length
                            })), n.length > 0)
                            for (var r = 0; r < n.length; r++) this.queueCoordinates(n[r])
                    } else o.queue(this.controller.t("No graph information available."));
                    o.alert()
                }, e.prototype.queueCoordinates = function(e, t, n) {
                    if (void 0 === n && (n = !1), e) {
                        var r = this.agNavigator.getCurrentSketch();
                        (e.hasOwnProperty("branch") && r && r.branches.length > 1 && this.lastSpokenBranch !== e.reportedBranch || "branch" === t) && o.queue(this.controller.t("Branch __branch__.", {
                            branch: e.reportedBranch
                        })), this.lastSpokenBranch = e.reportedBranch ? e.reportedBranch : e.branch + 1, e.hasOwnProperty("type") && !t ? o.queue(this.controller.t("__type__ at", {
                            type: this.describePOI(e)
                        })) : "type" === t && o.queue(this.describePOI(e)), t && "x" !== t || o.queue(this.controller.t("X: __x__.", {
                            x: c.value(e.x, this.agNavigator.getXScale()).ariaString
                        })), t && "y" !== t || o.queue(this.controller.t("Y: __y__.", {
                            y: c.value(e.y, this.agNavigator.getYScale()).ariaString
                        })), n && o.alert()
                    }
                }, e.prototype.describePOI = function(e) {
                    if (e.typeChain) {
                        for (var t = [], n = 0; n < e.typeChain.length; n++) t.push(this.poiTypeToText(e, n));
                        return t.join(", ")
                    }
                    return this.poiTypeToText(e)
                }, e.prototype.poiTypeToText = function(e, t) {
                    switch (t && e.typeChain ? e.typeChain[t] : e.type) {
                        case u.default.INTERSECTION:
                            var n = this.getIntersectingCurves(e);
                            return "" !== n ? this.controller.t("Intersection with __curves__", {
                                curves: n
                            }) : this.controller.t("Intersection");
                        case u.default.ZERO:
                            return this.controller.t("Zero");
                        case u.default.INTERCEPT:
                            return this.controller.t("Intercept");
                        case u.default.EXTREMUM:
                            return this.controller.t("Extremum");
                        case u.default.EDGE:
                            return this.controller.t("Edge");
                        case u.default.DEFINITION:
                            return this.controller.t("Point");
                        case u.default.TRACE:
                            return this.controller.t("Trace");
                        case u.default.LABEL:
                            return this.controller.t("Label");
                        default:
                            return this.controller.t("Not a P O I")
                    }
                }, e.prototype.getIntersectingCurves = function(e) {
                    return e && e.intersects ? this.getExpressionAriaLabel(e.intersects) : ""
                }, e.prototype.getExpressionAriaLabel = function(e) {
                    var t = this.controller.getItemModel(e);
                    return t ? "expression" === t.type && t.label ? t.label : this.controller.isItemSecret(t.id) ? this.controller.t("Secret expression __index__", {
                        index: t.secretIndex
                    }) : "table" === t.type && this.focusedCell ? this.controller.t("Expression __index__ column __column__", {
                        index: t.displayIndex,
                        column: this.focusedCell.location.column + 1
                    }) : this.controller.t("Expression __index__", {
                        index: t.displayIndex
                    }) : ""
                }, e.prototype.exitAudioTrace = function(e) {
                    if (this.audioTraceActive) {
                        if (this.audioTraceActive = !1, e || (e = this.controller.t("Audio trace off.")), this.controller.dispatch({
                                type: "toast/close"
                            }), this.wasFocusInExpressionsView) {
                            var t = this.agNavigator.getSelectedItem();
                            t && this.controller.isItemSelectable(t.id) || (t = this.controller.getFirstFullyVisibleItem()), t && this.controller.isItemSelectable(t.id) && this.controller.dispatch({
                                type: "move-focus-to-item",
                                id: t.id,
                                where: "table" === t.type && void 0 !== this.focusedCell ? n.__assign({
                                    location: "cell"
                                }, this.focusedCell.location) : "end"
                            })
                        }
                        this.wasFocusInExpressionsView = !1, this.focusedCell = void 0, this.stopAnimations(), this.sliderTraceActive = !1, this.sliderIndex = 0, this.tonegen.stop(), this.tonegen.suspend(), this.agNavigator.reset(), this.lastSpokenBranch = 1, this.grapher.traceLayer.setTraceInfo(void 0), this.grapher.redrawAllLayers(), o.alert(e), this.resumeAnimations()
                    }
                }, e.prototype.isFocusInExpressionsView = function() {
                    return !!this.controller.getFocusedItem()
                }, e.prototype.enterAudioTrace = function() {
                    var e = this,
                        t = this.agNavigator.getSelectedItem(),
                        n = !1;
                    this.audioTraceActive || (this.wasFocusInExpressionsView = this.isFocusInExpressionsView(), n = !this.wasFocusInExpressionsView);
                    var i;
                    if (n) i = this.agNavigator.getFirstTraceableSketch({
                        selectAssociatedExpression: !0
                    });
                    else {
                        if (t && "expression" === t.type && t.formula && t.formula.error) return this.exitAudioTrace(), this.controller.dispatch({
                            type: "toast/show",
                            toast: {
                                message: this.controller.t("No graph to trace.")
                            }
                        });
                        if (t && "table" === t.type) {
                            var a = p.getSelectedCell(t);
                            this.focusedCell && this.focusedCell.tableId === t.id && (!a || a.column === this.focusedCell.location.column && a.row === this.focusedCell.location.row) || (this.focusedCell = void 0 !== a ? {
                                tableId: t.id,
                                location: a
                            } : void 0)
                        } else this.focusedCell = void 0;
                        i = this.agNavigator.getCurrentSketch()
                    }
                    if (!i) return this.agNavigator.reset(), this.lastSpokenBranch = 1, this.exitAudioTrace(), this.controller.dispatch({
                        type: "toast/show",
                        toast: {
                            message: this.controller.t("No graph to trace.")
                        }
                    });
                    var s = i.branches[0].graphMode;
                    return s === l.IMPLICIT ? (this.exitAudioTrace(), this.controller.dispatch({
                        type: "toast/show",
                        toast: {
                            message: this.controller.t("Sorry, but I can't trace implicit curves yet.")
                        }
                    })) : s === l.PARAMETRIC ? (this.exitAudioTrace(), this.controller.dispatch({
                        type: "toast/show",
                        toast: {
                            message: this.controller.t("Sorry, but I can't trace parametric curves yet.")
                        }
                    })) : s === l.POLAR ? (this.exitAudioTrace(), this.controller.dispatch({
                        type: "toast/show",
                        toast: {
                            message: this.controller.t("Sorry, but I can't trace polar curves yet.")
                        }
                    })) : (this.agNavigator.reset(), this.agNavigator.computeStepSizes(), this.lastSpokenBranch = 1, this.grapher.traceLayer.clearOpenedPOI(), this.grapher.redrawAllLayers(), this.audioTraceActive || (this.controller.dispatch({
                        type: "toast/show",
                        toast: {
                            message: this.controller.t("Audio trace on."),
                            noAria: !0,
                            onHide: function() {
                                return e.exitAudioTrace()
                            },
                            hideAfter: 0
                        }
                    }), o.queue(this.controller.t("Audio trace on.")), this.pauseAnimations(), this.queueAnimatingPoints(!1), o.queue(this.controller.t("Use Arrow keys to navigate.")), this.tonegen.resume(), this.tonegen.getPlaybackSupported() && o.queue(this.controller.t("To hear the graph, press H.")), this.agNavigator.getTraceableExpressionCount() > 1 && (r.IS_APPLE ? o.queue(this.controller.t("To move between expressions, press COMMAND+Up-Arrow or COMMAND+Down-Arrow.")) : o.queue(this.controller.t("To move between expressions, press ALT+Up-Arrow or ALT+Down-Arrow."))), r.IS_APPLE ? o.queue(this.controller.t("To disable audio trace, press OPTION+T.")) : o.queue(this.controller.t("To disable audio trace, press ALT+T.")), this.wasFocusInExpressionsView && this.controller.find$(".dcg-graph-outer").one("focusin", function() {
                        setTimeout(function() {
                            o.alert()
                        }, 0)
                    }).focus()), this.agNavigator.moveToOrigin(), t && o.queue(this.getExpressionAriaLabel(t.id)), this.reportAudioTrace(), this.wasFocusInExpressionsView || o.alert(), void(this.audioTraceActive = !0))
                }, e.prototype.checkIfSelectedItemChanged = function(e) {
                    this.lastSelectedId !== e && (this.lastSelectedId = e, this.audioTraceActive && (e ? (o.queue(this.getExpressionAriaLabel(e)), this.exitSliderTrace(), this.agNavigator.updatePOI(), this.agNavigator.moveToOrigin(), this.reportAudioTrace(), o.alert()) : this.exitAudioTrace()))
                }, e.prototype.pauseAnimations = function() {
                    var e = this;
                    this.sliderArray.length = 0, this.controller.getAllModelsWithSliders().forEach(function(t) {
                        t.slider.isPlaying && (e.controller.dispatch({
                            type: "set-slider-isplaying",
                            id: t.id,
                            isPlaying: !1
                        }), e.sliderArray.push(t))
                    })
                }, e.prototype.resumeAnimations = function() {
                    if (0 !== this.sliderArray.length) {
                        for (var e = 0; e < this.sliderArray.length; e++) {
                            var t = this.sliderArray[e];
                            !0 !== t.slider.isPlaying && this.controller.dispatch({
                                type: "set-slider-isplaying",
                                id: t.id,
                                isPlaying: !0
                            })
                        }
                        this.sliderArray.length = 0
                    }
                }, e.prototype.stopAnimations = function() {
                    var e = this;
                    this.controller.getAllModelsWithSliders().forEach(function(t) {
                        t.slider.isPlaying && e.controller.dispatch({
                            type: "set-slider-isplaying",
                            id: t.id,
                            isPlaying: !1
                        })
                    })
                }, e.prototype.getAnimatingVars = function() {
                    for (var e = [], t = 0; t < this.sliderArray.length; t++) e.push('"' + this.sliderArray[t].dependent + '"');
                    return e
                }, e.prototype.hasActiveSliders = function() {
                    for (var e = this.controller.getAllModelsWithSliders(), t = 0; t < e.length; t++)
                        if (e[t].slider.isPlaying) return !0;
                    return !1
                }, e.prototype.queueAnimatingPoints = function(e) {
                    1 === this.sliderArray.length ? o.queue(this.controller.t("One animating slider was paused.")) : this.sliderArray.length > 1 ? o.queue(this.controller.t("__sliders__ animating sliders were paused.", {
                        sliders: this.sliderArray.length
                    })) : e && o.queue(this.controller.t("No animating sliders were paused."))
                }, e.prototype.queueSliderLatex = function() {
                    this.hasActiveSliders() || this.tonegen.stop();
                    var e = this.getSelectedSlider();
                    e ? o.queue(e.latex) : o.queue(this.controller.t("Unable to determine slider value"))
                }, e.prototype.getSelectedSlider = function() {
                    var e = this.controller.getAllModelsWithSliders();
                    return this.sliderIndex <= e.length - 1 ? e[this.sliderIndex] : null
                }, e.prototype.incrementSliderValue = function() {
                    this.adjustSlider("up")
                }, e.prototype.decrementSliderValue = function() {
                    this.adjustSlider("down")
                }, e.prototype.incrementBigSliderValue = function() {
                    this.adjustSlider("bigup")
                }, e.prototype.decrementBigSliderValue = function() {
                    this.adjustSlider("bigdown")
                }, e.prototype.nextSlider = function() {
                    this.adjustSlider("next")
                }, e.prototype.prevSlider = function() {
                    this.adjustSlider("prev")
                }, e.prototype.sliderMin = function() {
                    this.adjustSlider("min")
                }, e.prototype.sliderMax = function() {
                    this.adjustSlider("max")
                }, e.prototype.adjustSlider = function(e) {
                    var t = this.getSelectedSlider();
                    if (!t) return void o.queue(this.controller.t("Unable to adjust slider"));
                    var n = t.latex,
                        r = this.controller.getAllModelsWithSliders().length;
                    switch (e) {
                        case "up":
                        case "down":
                        case "bigup":
                        case "bigdown":
                        case "min":
                        case "max":
                            this.controller.dispatch({
                                type: "adjust-slider-by-keyboard",
                                id: t.id,
                                adjustment: e
                            }), this.queueSliderLatex(), o.alert();
                            break;
                        case "next":
                            return this.sliderIndex++, this.sliderIndex >= r && (o.queue(this.controller.t("Last slider.")), this.sliderIndex = r - 1), this.queueSliderLatex(), void o.alert();
                        case "prev":
                            return this.sliderIndex--, this.sliderIndex < 0 && (o.queue(this.controller.t("First slider.")), this.sliderIndex = 0), this.queueSliderLatex(), void o.alert()
                    }
                    t.slider.isPlaying || n === t.latex || (this.queueSliderLatex(), o.alert())
                }, e.prototype.toggleAudioTrace = function() {
                    this.audioTraceActive ? this.exitAudioTrace() : this.enterAudioTrace()
                }, e.prototype.toggleSliderTrace = function() {
                    this.sliderTraceActive ? this.exitSliderTrace() : this.enterSliderTrace()
                }, e.prototype.enterSliderTrace = function() {
                    if (!this.sliderTraceActive) {
                        this.sliderIndex = 0;
                        0 !== this.controller.getAllModelsWithSliders().length ? (o.queue(this.controller.t("Slider trace on.")), this.queueSliderLatex(), this.sliderTraceActive = !0) : (o.queue(this.controller.t("No sliders to trace.")), this.sliderTraceActive = !1), o.alert()
                    }
                },
                e.prototype.exitSliderTrace = function() {
                    this.sliderTraceActive && (o.queue(this.controller.t("Slider trace off.")), this.sliderTraceActive = !1, this.sliderIndex = 0, o.alert())
                }, e.prototype.recomputePoints = function() {
                    this.audioTraceActive && (this.tonegen.isAnimating() || (this.agNavigator.updatePOI(), this.agNavigator.updateSampledPoints(), this.agNavigator.updateCurrentPoint(), this.agNavigator.resetTracePoint(), this.agNavigator.computeStepSizes()))
                }, e.prototype.queuePOICount = function() {
                    var e = this.agNavigator.getCurrentSketch(),
                        t = e ? e.getPOI().length : 0;
                    o.queue(this.controller.t("Points of interest, __x__.", {
                        x: t
                    }))
                }, e.prototype.reportAudioTrace = function(e, t) {
                    var n = this.agNavigator.getCurrentPoint();
                    if (n && (e || (t || this.tonegen.stop(), this.tonegen.playPoint(n, this.grapher.getCurrentViewport())), !t)) {
                        this.queueCoordinates(n, e);
                        var r = e ? 0 : 100;
                        setTimeout(function() {
                            o.alert()
                        }, r)
                    }
                }, e.prototype.adjustPlaybackSpeed = function(e) {
                    switch (e) {
                        case "1":
                            return this.tonegen.setAudioSpeed(150), o.alert(this.controller.t("Graph playback very slow"));
                        case "2":
                            return this.tonegen.setAudioSpeed(100), o.alert(this.controller.t("Graph playback slow"));
                        case "3":
                            return this.tonegen.setAudioSpeed(50), o.alert(this.controller.t("Graph playback normal"));
                        case "4":
                            return this.tonegen.setAudioSpeed(30), o.alert(this.controller.t("Graph playback fast"));
                        case "5":
                            return this.tonegen.setAudioSpeed(16), o.alert(this.controller.t("Graph playback very fast"));
                        default:
                            return this.tonegen.setAudioSpeed(50), o.alert(this.controller.t("Graph playback normal"))
                    }
                }, e.prototype.adjustVolume = function(e) {
                    var t = this.tonegen.getAudioVolume(),
                        n = "up" === e ? Math.min(100, Math.round(100 * (t + .1))) : Math.max(0, Math.round(100 * (t - .1)));
                    this.tonegen.setAudioVolume(n / 100), o.alert(this.controller.t("Volume __volume__ percent", {
                        volume: n
                    }))
                }, e.prototype.zoom = function(e) {
                    this.grapher.viewportController.zoom(e)
                }, e.prototype.getFocusedCell = function() {
                    return this.focusedCell
                }, e.prototype.setFocusedCell = function(e) {
                    this.focusedCell = e
                }, e.prototype.getAudioTraceActive = function() {
                    return this.audioTraceActive
                }, e
        }();
        t.default = h
    }),
    function(e, t) {
        if ("object" == typeof exports && "object" == typeof module) module.exports = t();
        else if ("function" == typeof define && define.amd) define("abraham", [], t);
        else {
            var n = t();
            for (var r in n)("object" == typeof exports ? exports : e)[r] = n[r]
        }
    }(this, function() {
        return function(e) {
            function t(r) {
                if (n[r]) return n[r].exports;
                var i = n[r] = {
                    i: r,
                    l: !1,
                    exports: {}
                };
                return e[r].call(i.exports, i, i.exports, t), i.l = !0, i.exports
            }
            var n = {};
            return t.m = e, t.c = n, t.i = function(e) {
                return e
            }, t.d = function(e, n, r) {
                t.o(e, n) || Object.defineProperty(e, n, {
                    configurable: !1,
                    enumerable: !0,
                    get: r
                })
            }, t.n = function(e) {
                var n = e && e.__esModule ? function() {
                    return e.default
                } : function() {
                    return e
                };
                return t.d(n, "a", n), n
            }, t.o = function(e, t) {
                return Object.prototype.hasOwnProperty.call(e, t)
            }, t.p = "", t(t.s = 26)
        }([function(e, t, n) {
            function r(e, t) {
                var n = i.map(e, t);
                return e.warnings && (n.warnings = e.warnings), n
            }
            Object.defineProperty(t, "__esModule", {
                value: !0
            });
            var i = n(22);
            t.map = r
        }, function(e, t) {
            function n() {
                throw new Error("setTimeout has not been defined")
            }

            function r() {
                throw new Error("clearTimeout has not been defined")
            }

            function i(e) {
                if (u === setTimeout) return setTimeout(e, 0);
                if ((u === n || !u) && setTimeout) return u = setTimeout, setTimeout(e, 0);
                try {
                    return u(e, 0)
                } catch (t) {
                    try {
                        return u.call(null, e, 0)
                    } catch (t) {
                        return u.call(this, e, 0)
                    }
                }
            }

            function o(e) {
                if (p === clearTimeout) return clearTimeout(e);
                if ((p === r || !p) && clearTimeout) return p = clearTimeout, clearTimeout(e);
                try {
                    return p(e)
                } catch (t) {
                    try {
                        return p.call(null, e)
                    } catch (t) {
                        return p.call(this, e)
                    }
                }
            }

            function a() {
                m && h && (m = !1, h.length ? f = h.concat(f) : g = -1, f.length && s())
            }

            function s() {
                if (!m) {
                    var e = i(a);
                    m = !0;
                    for (var t = f.length; t;) {
                        for (h = f, f = []; ++g < t;) h && h[g].run();
                        g = -1, t = f.length
                    }
                    h = null, m = !1, o(e)
                }
            }

            function l(e, t) {
                this.fun = e, this.array = t
            }

            function c() {}
            var u, p, d = e.exports = {};
            ! function() {
                try {
                    u = "function" == typeof setTimeout ? setTimeout : n
                } catch (e) {
                    u = n
                }
                try {
                    p = "function" == typeof clearTimeout ? clearTimeout : r
                } catch (e) {
                    p = r
                }
            }();
            var h, f = [],
                m = !1,
                g = -1;
            d.nextTick = function(e) {
                var t = new Array(arguments.length - 1);
                if (arguments.length > 1)
                    for (var n = 1; n < arguments.length; n++) t[n - 1] = arguments[n];
                f.push(new l(e, t)), 1 !== f.length || m || i(s)
            }, l.prototype.run = function() {
                this.fun.apply(null, this.array)
            }, d.title = "browser", d.browser = !0, d.env = {}, d.argv = [], d.version = "", d.versions = {}, d.on = c, d.addListener = c, d.once = c, d.off = c, d.removeListener = c, d.removeAllListeners = c, d.emit = c, d.prependListener = c, d.prependOnceListener = c, d.listeners = function(e) {
                return []
            }, d.binding = function(e) {
                throw new Error("process.binding is not supported")
            }, d.cwd = function() {
                return "/"
            }, d.chdir = function(e) {
                throw new Error("process.chdir is not supported")
            }, d.umask = function() {
                return 0
            }
        }, function(e, t, n) {
            function r(e) {
                for (var t = !1, n = 0, r = "", i = "", o = 0, a = e; o < a.length; o++) {
                    var s = a[o];
                    if ("terminal" !== s.type || !/[A-Za-z]/.test(s.value)) break;
                    r += s.value, n++
                }
                return i = r.replace(c, "\\operatorname{$1}"), t = n > 0 && i !== r, {
                    modified: t,
                    terminalCount: n,
                    value: i
                }
            }

            function i(e) {
                return -1 !== p.indexOf(e.toLowerCase())
            }

            function o(e) {
                if (!Array.isArray(e)) throw new Error("Operator names must be an array, got " + typeof e);
                for (var t = 0, n = e; t < n.length; t++) {
                    var r = n[t];
                    if ("string" != typeof r) throw new Error("Operator names must be strings, found " + typeof r)
                }
                p = e, s()
            }

            function a() {
                p = u, c = d
            }

            function s() {
                c = l(p)
            }

            function l(e) {
                var t = e.sort(function(e, t) {
                    return t.length - e.length || t.localeCompare(e)
                }).join("|");
                return new RegExp("(" + t + ")", "g")
            }
            Object.defineProperty(t, "__esModule", {
                value: !0
            });
            var c, u = ["abs", "ans", "arccosh", "arccot", "arccoth", "arccsc", "arccsch", "arcsec", "arcsech", "arcsinh", "arctanh", "binomialdist", "boxplot", "cdf", "ceil", "corr", "cov", "csch", "distance", "dotplot", "erf", "floor", "gcf", "histogram", "IndependentTTest", "iTTest", "ittest", "lcm", "length", "mad", "mcd", "mcm", "mean", "median", "midpoint", "mod", "nCr", "normaldist", "nPr", "pdf", "poissondist", "polygon", "quantile", "quartile", "random", "round", "sech", "sign", "signum", "stdDev", "stddev", "stdDevP", "stddevp", "stdev", "stdevp", "tdist", "total", "TScore", "TScore", "Tscore", "tscore", "tscore", "TTest", "ttest", "var", "variance", "varp"],
                p = u,
                d = l(u);
            t.getAutoOperator = r, t.containsValue = i, t.setOperatorNames = o, t.resetOperatorNames = a
        }, function(e, t, n) {
            function r(e) {
                if (!f.isSixDotCells(e)) throw new Error("EncodingError: Expected input to be six-dot unicode braille characters.")
            }

            function i(e, n) {
                return r(e), p.default(t.UnicodeBraille.toBrailleAscii(e), n)
            }

            function o(e, n) {
                return n && n.operatorNames ? l.setOperatorNames(n.operatorNames) : l.resetOperatorNames(), d.map(c.default(e), t.UnicodeBraille.coerceToSixDotCells)
            }

            function a(e, n) {
                return r(e), h.default(t.UnicodeBraille.toBrailleAscii(e), n)
            }

            function s(e, n) {
                return n && n.operatorNames ? l.setOperatorNames(n.operatorNames) : l.resetOperatorNames(), d.map(u.default(e), t.UnicodeBraille.coerceToSixDotCells)
            }
            Object.defineProperty(t, "__esModule", {
                value: !0
            });
            var l = n(2),
                c = n(14),
                u = n(15),
                p = n(16),
                d = n(0),
                h = n(23),
                f = n(25);
            t.nemethToLatex = i, t.latexToNemeth = o, t.uebToLatex = a, t.latexToUeb = s, t.UnicodeBraille = {
                coerceToSixDotCells: f.coerceToSixDotCells,
                toBrailleAscii: f.toBrailleAscii,
                toExpandedBrailleAscii: f.toExpandedBrailleAscii
            }, t.version = "1.0.3"
        }, function(e, t) {}, function(e, t, n) {
            (function(e) {
                function n(e, t) {
                    for (var n = 0, r = e.length - 1; r >= 0; r--) {
                        var i = e[r];
                        "." === i ? e.splice(r, 1) : ".." === i ? (e.splice(r, 1), n++) : n && (e.splice(r, 1), n--)
                    }
                    if (t)
                        for (; n--; n) e.unshift("..");
                    return e
                }

                function r(e, t) {
                    if (e.filter) return e.filter(t);
                    for (var n = [], r = 0; r < e.length; r++) t(e[r], r, e) && n.push(e[r]);
                    return n
                }
                var i = /^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,
                    o = function(e) {
                        return i.exec(e).slice(1)
                    };
                t.resolve = function() {
                    for (var t = "", i = !1, o = arguments.length - 1; o >= -1 && !i; o--) {
                        var a = o >= 0 ? arguments[o] : e.cwd();
                        if ("string" != typeof a) throw new TypeError("Arguments to path.resolve must be strings");
                        a && (t = a + "/" + t, i = "/" === a.charAt(0))
                    }
                    return t = n(r(t.split("/"), function(e) {
                        return !!e
                    }), !i).join("/"), (i ? "/" : "") + t || "."
                }, t.normalize = function(e) {
                    var i = t.isAbsolute(e),
                        o = "/" === a(e, -1);
                    return e = n(r(e.split("/"), function(e) {
                        return !!e
                    }), !i).join("/"), e || i || (e = "."), e && o && (e += "/"), (i ? "/" : "") + e
                }, t.isAbsolute = function(e) {
                    return "/" === e.charAt(0)
                }, t.join = function() {
                    var e = Array.prototype.slice.call(arguments, 0);
                    return t.normalize(r(e, function(e, t) {
                        if ("string" != typeof e) throw new TypeError("Arguments to path.join must be strings");
                        return e
                    }).join("/"))
                }, t.relative = function(e, n) {
                    function r(e) {
                        for (var t = 0; t < e.length && "" === e[t]; t++);
                        for (var n = e.length - 1; n >= 0 && "" === e[n]; n--);
                        return t > n ? [] : e.slice(t, n - t + 1)
                    }
                    e = t.resolve(e).substr(1), n = t.resolve(n).substr(1);
                    for (var i = r(e.split("/")), o = r(n.split("/")), a = Math.min(i.length, o.length), s = a, l = 0; l < a; l++)
                        if (i[l] !== o[l]) {
                            s = l;
                            break
                        } for (var c = [], l = s; l < i.length; l++) c.push("..");
                    return c = c.concat(o.slice(s)), c.join("/")
                }, t.sep = "/", t.delimiter = ":", t.dirname = function(e) {
                    var t = o(e),
                        n = t[0],
                        r = t[1];
                    return n || r ? (r && (r = r.substr(0, r.length - 1)), n + r) : "."
                }, t.basename = function(e, t) {
                    var n = o(e)[2];
                    return t && n.substr(-1 * t.length) === t && (n = n.substr(0, n.length - t.length)), n
                }, t.extname = function(e) {
                    return o(e)[3]
                };
                var a = "b" === "ab".substr(-1) ? function(e, t, n) {
                    return e.substr(t, n)
                } : function(e, t, n) {
                    return t < 0 && (t = e.length + t), e.substr(t, n)
                }
            }).call(t, n(1))
        }, function(e, t, n) {
            function r(e) {
                if (!e.hash) throw e;
                return {
                    _diagnostic: {
                        expected: e.hash.expected,
                        message: e.message,
                        text: e.hash.text,
                        token: e.hash.token
                    },
                    location: e.hash.loc
                }
            }
            Object.defineProperty(t, "__esModule", {
                value: !0
            }), t.default = r
        }, function(e, t, n) {
            function r(e) {
                return {
                    type: "terminal",
                    value: e
                }
            }

            function i(e) {
                return {
                    type: "command",
                    value: e
                }
            }

            function o(e) {
                return {
                    type: "greek",
                    value: e
                }
            }

            function a(e) {
                return {
                    subscript: e._,
                    superscript: e["^"],
                    type: "level"
                }
            }

            function s(e, t) {
                var n = [],
                    r = e.match(/'+/);
                if (null !== r)
                    for (var o = r[0].length, a = 0; a < o; a++) n.push(i("\\prime"));
                return p(n, t)
            }

            function l(e, t) {
                return {
                    type: "fraction",
                    numerator: e,
                    denominator: t
                }
            }

            function c(e, t) {
                return {
                    name: e,
                    type: "typeform",
                    value: t
                }
            }

            function u(e, t) {
                return {
                    type: "radical",
                    index: t,
                    radicand: e
                }
            }

            function p() {
                for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
                return Array.prototype.concat.apply([], e)
            }
            Object.defineProperty(t, "__esModule", {
                value: !0
            }), t.terminal = r, t.command = i, t.greek = o, t.level = a, t.processPrimes = s, t.fraction = l, t.typeform = c, t.radical = u, t.group = p
        }, function(e, t) {
            e.exports = function(e) {
                return e.webpackPolyfill || (e.deprecate = function() {}, e.paths = [], e.children || (e.children = []), Object.defineProperty(e, "loaded", {
                    enumerable: !0,
                    get: function() {
                        return e.l
                    }
                }), Object.defineProperty(e, "id", {
                    enumerable: !0,
                    get: function() {
                        return e.i
                    }
                }), e.webpackPolyfill = 1), e
            }
        }, function(e, t, n) {
            (function(e, r) {
                var i = function() {
                    function e() {
                        this.yy = {}
                    }
                    var t = function(e, t, n, r) {
                            for (n = n || {}, r = e.length; r--; n[e[r]] = t);
                            return n
                        },
                        n = [1, 11],
                        r = [1, 12],
                        i = [1, 13],
                        o = [1, 69],
                        a = [1, 70],
                        s = [1, 68],
                        l = [1, 38],
                        c = [1, 39],
                        u = [1, 58],
                        p = [1, 59],
                        d = [1, 60],
                        h = [1, 61],
                        f = [1, 62],
                        m = [1, 63],
                        g = [1, 64],
                        y = [1, 65],
                        v = [1, 66],
                        b = [1, 67],
                        x = [1, 40],
                        w = [1, 34],
                        _ = [1, 35],
                        S = [1, 36],
                        E = [1, 37],
                        M = [1, 41],
                        I = [1, 42],
                        T = [1, 43],
                        C = [1, 44],
                        k = [1, 45],
                        D = [1, 46],
                        P = [1, 47],
                        L = [1, 48],
                        A = [1, 49],
                        O = [1, 50],
                        F = [1, 51],
                        q = [1, 52],
                        N = [1, 17],
                        R = [1, 53],
                        B = [1, 54],
                        j = [1, 55],
                        V = [1, 56],
                        z = [1, 57],
                        U = [5, 11, 12, 13, 17, 23, 24],
                        G = [5, 10, 11, 12, 13, 14, 16, 17, 19, 20, 22, 23, 24, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 81],
                        H = [5, 10, 11, 12, 13, 14, 16, 17, 19, 20, 22, 23, 24, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 76, 77, 78, 79, 81],
                        K = [1, 75],
                        W = [5, 10, 11, 12, 13, 14, 16, 17, 19, 20, 22, 23, 24, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81],
                        Y = {
                            trace: function() {},
                            yy: {},
                            symbols_: {
                                error: 2,
                                sentence: 3,
                                group: 4,
                                EOF: 5,
                                element: 6,
                                index_element: 7,
                                modified_expression: 8,
                                radical: 9,
                                OPEN_MODEXP: 10,
                                MODEXP_UNDER: 11,
                                MODEXP_OVER: 12,
                                CLOSE_MODEXP: 13,
                                RADICAL_INDEX: 14,
                                index_group: 15,
                                OPEN_RADICAL: 16,
                                CLOSE_RADICAL: 17,
                                level: 18,
                                LEVEL: 19,
                                BASELINE: 20,
                                frac: 21,
                                OPEN_FRAC: 22,
                                SLASH: 23,
                                CLOSE_FRAC: 24,
                                subscript_head: 25,
                                primes: 26,
                                number: 27,
                                atom: 28,
                                command: 29,
                                greek: 30,
                                letter: 31,
                                comma: 32,
                                period: 33,
                                space: 34,
                                operation: 35,
                                comparison: 36,
                                level_with_comparison: 37,
                                ellipsis: 38,
                                colon: 39,
                                infinity: 40,
                                integral: 41,
                                factorial: 42,
                                ampersand: 43,
                                question_mark: 44,
                                bracket: 45,
                                ",": 46,
                                ".": 47,
                                "[": 48,
                                "{": 49,
                                "(": 50,
                                "]": 51,
                                "}": 52,
                                ")": 53,
                                LANGLE: 54,
                                RANGLE: 55,
                                PIPE: 56,
                                DOUBLE_PIPE: 57,
                                SPACE: 58,
                                COMMAND: 59,
                                GREEK: 60,
                                LETTER: 61,
                                CAPITAL_LETTER: 62,
                                "+": 63,
                                "-": 64,
                                CDOT: 65,
                                TIMES: 66,
                                "*": 67,
                                "/": 68,
                                DIV: 69,
                                PERCENT: 70,
                                COMPARISON: 71,
                                LEVEL_WITH_COMPARISON: 72,
                                ELLIPSIS: 73,
                                COLON: 74,
                                NUMBER: 75,
                                INFINITY: 76,
                                INTEGRAL: 77,
                                FACTORIAL: 78,
                                "&": 79,
                                PRIMES: 80,
                                "?": 81,
                                $accept: 0,
                                $end: 1
                            },
                            terminals_: {
                                2: "error",
                                5: "EOF",
                                10: "OPEN_MODEXP",
                                11: "MODEXP_UNDER",
                                12: "MODEXP_OVER",
                                13: "CLOSE_MODEXP",
                                14: "RADICAL_INDEX",
                                16: "OPEN_RADICAL",
                                17: "CLOSE_RADICAL",
                                19: "LEVEL",
                                20: "BASELINE",
                                22: "OPEN_FRAC",
                                23: "SLASH",
                                24: "CLOSE_FRAC",
                                46: ",",
                                47: ".",
                                48: "[",
                                49: "{",
                                50: "(",
                                51: "]",
                                52: "}",
                                53: ")",
                                54: "LANGLE",
                                55: "RANGLE",
                                56: "PIPE",
                                57: "DOUBLE_PIPE",
                                58: "SPACE",
                                59: "COMMAND",
                                60: "GREEK",
                                61: "LETTER",
                                62: "CAPITAL_LETTER",
                                63: "+",
                                64: "-",
                                65: "CDOT",
                                66: "TIMES",
                                67: "*",
                                68: "/",
                                69: "DIV",
                                70: "PERCENT",
                                71: "COMPARISON",
                                72: "LEVEL_WITH_COMPARISON",
                                73: "ELLIPSIS",
                                74: "COLON",
                                75: "NUMBER",
                                76: "INFINITY",
                                77: "INTEGRAL",
                                78: "FACTORIAL",
                                79: "&",
                                80: "PRIMES",
                                81: "?"
                            },
                            productions_: [0, [3, 2],
                                [3, 1],
                                [4, 2],
                                [4, 1],
                                [6, 1],
                                [6, 1],
                                [6, 1],
                                [8, 7],
                                [8, 6],
                                [8, 5],
                                [8, 6],
                                [8, 5],
                                [8, 5],
                                [8, 4],
                                [8, 3],
                                [8, 2],
                                [9, 5],
                                [9, 4],
                                [9, 4],
                                [9, 3],
                                [9, 3],
                                [9, 2],
                                [18, 1],
                                [18, 1],
                                [21, 5],
                                [21, 4],
                                [21, 4],
                                [21, 3],
                                [15, 2],
                                [15, 1],
                                [7, 3],
                                [7, 2],
                                [7, 2],
                                [7, 2],
                                [7, 2],
                                [7, 1],
                                [7, 1],
                                [7, 1],
                                [25, 1],
                                [25, 1],
                                [25, 1],
                                [28, 1],
                                [28, 1],
                                [28, 1],
                                [28, 1],
                                [28, 1],
                                [28, 1],
                                [28, 1],
                                [28, 1],
                                [28, 1],
                                [28, 1],
                                [28, 1],
                                [28, 1],
                                [28, 1],
                                [28, 1],
                                [28, 1],
                                [28, 1],
                                [32, 1],
                                [33, 1],
                                [45, 1],
                                [45, 1],
                                [45, 1],
                                [45, 1],
                                [45, 1],
                                [45, 1],
                                [45, 1],
                                [45, 1],
                                [45, 1],
                                [45, 1],
                                [34, 1],
                                [29, 1],
                                [30, 1],
                                [31, 1],
                                [31, 1],
                                [35, 1],
                                [35, 1],
                                [35, 1],
                                [35, 1],
                                [35, 1],
                                [35, 1],
                                [35, 1],
                                [35, 1],
                                [36, 1],
                                [37, 1],
                                [38, 1],
                                [39, 1],
                                [27, 1],
                                [40, 1],
                                [41, 1],
                                [42, 1],
                                [43, 1],
                                [26, 1],
                                [44, 1]
                            ],
                            performAction: function(e, t, n, r, i, o, a) {
                                var s = o.length - 1;
                                switch (i) {
                                    case 1:
                                        return o[s - 1];
                                    case 2:
                                        return r.group();
                                    case 3:
                                    case 29:
                                    case 33:
                                    case 34:
                                    case 35:
                                        this.$ = r.group(o[s - 1], o[s]);
                                        break;
                                    case 4:
                                    case 30:
                                        this.$ = r.group(o[s]);
                                        break;
                                    case 8:
                                        this.$ = r.modified_expression(o[s - 5], o[s - 3], o[s - 1]);
                                        break;
                                    case 9:
                                        this.$ = r.modified_expression(o[s - 4], o[s - 2]);
                                        break;
                                    case 10:
                                        this.$ = r.modified_expression(o[s - 3], o[s - 1]);
                                        break;
                                    case 11:
                                        this.$ = r.modified_expression(o[s - 4], r.group(), o[s - 1]);
                                        break;
                                    case 12:
                                        this.$ = r.modified_expression(o[s - 3], r.group(), o[s - 1]);
                                        break;
                                    case 13:
                                        this.$ = r.modified_expression(o[s - 3], r.group(), r.group());
                                        break;
                                    case 14:
                                        this.$ = r.modified_expression(o[s - 2], r.group());
                                        break;
                                    case 15:
                                        this.$ = r.modified_expression(o[s - 1]);
                                        break;
                                    case 16:
                                        this.$ = r.modified_expression(r.group());
                                        break;
                                    case 17:
                                        this.$ = r.radical(o[s - 1], o[s - 3]);
                                        break;
                                    case 18:
                                        this.$ = r.radical(o[s - 1], r.group());
                                        break;
                                    case 19:
                                        this.$ = r.radical(r.group(), o[s - 2]);
                                        break;
                                    case 20:
                                        this.$ = r.radical(r.group(), r.group());
                                        break;
                                    case 21:
                                        this.$ = r.radical(o[s - 1]);
                                        break;
                                    case 22:
                                        this.$ = r.radical(r.group());
                                        break;
                                    case 23:
                                        this.$ = r.level(o[s]);
                                        break;
                                    case 24:
                                        this.$ = r.baseline();
                                        break;
                                    case 25:
                                        this.$ = r.fraction(o[s - 3], o[s - 1]);
                                        break;
                                    case 26:
                                        this.$ = r.fraction(o[s - 2], r.group());
                                        break;
                                    case 27:
                                        this.$ = r.fraction(r.group(), o[s - 1]);
                                        break;
                                    case 28:
                                        this.$ = r.fraction(r.group(), r.group());
                                        break;
                                    case 31:
                                        this.$ = r.group(r.simple_subscript(o[s - 2], o[s]), o[s - 1]);
                                        break;
                                    case 32:
                                        this.$ = r.simple_subscript(o[s - 1], o[s]);
                                        break;
                                    case 58:
                                        this.$ = r.terminal(",");
                                        break;
                                    case 59:
                                        this.$ = r.terminal(".");
                                        break;
                                    case 60:
                                        this.$ = r.terminal("[");
                                        break;
                                    case 61:
                                        this.$ = r.terminal("\\{");
                                        break;
                                    case 62:
                                        this.$ = r.terminal("(");
                                        break;
                                    case 63:
                                        this.$ = r.terminal("]");
                                        break;
                                    case 64:
                                        this.$ = r.terminal("\\}");
                                        break;
                                    case 65:
                                        this.$ = r.terminal(")");
                                        break;
                                    case 66:
                                        this.$ = r.terminal("\\langle ");
                                        break;
                                    case 67:
                                        this.$ = r.terminal("\\rangle ");
                                        break;
                                    case 68:
                                        this.$ = r.terminal("|");
                                        break;
                                    case 69:
                                        this.$ = r.terminal("\\|");
                                        break;
                                    case 70:
                                        this.$ = r.terminal(" ");
                                        break;
                                    case 71:
                                        this.$ = r.command(o[s].toLowerCase());
                                        break;
                                    case 72:
                                        this.$ = r.terminal(r.greek(o[s]));
                                        break;
                                    case 73:
                                        this.$ = r.terminal(o[s].toLowerCase());
                                        break;
                                    case 74:
                                        this.$ = r.terminal(o[s].toUpperCase());
                                        break;
                                    case 75:
                                        this.$ = r.terminal("+");
                                        break;
                                    case 76:
                                        this.$ = r.terminal("-");
                                        break;
                                    case 77:
                                        this.$ = r.terminal("\\cdot ");
                                        break;
                                    case 78:
                                        this.$ = r.terminal("\\times ");
                                        break;
                                    case 79:
                                        this.$ = r.terminal("*");
                                        break;
                                    case 80:
                                        this.$ = r.terminal("/");
                                        break;
                                    case 81:
                                        this.$ = r.terminal("\\div ");
                                        break;
                                    case 82:
                                        this.$ = r.terminal("\\%");
                                        break;
                                    case 83:
                                        this.$ = r.comparison(o[s].trim());
                                        break;
                                    case 84:
                                        this.$ = r.level_with_comparison(o[s].trim());
                                        break;
                                    case 85:
                                        this.$ = r.terminal("\\ldots ");
                                        break;
                                    case 86:
                                        this.$ = r.terminal(":");
                                        break;
                                    case 87:
                                        this.$ = r.terminal(o[s]);
                                        break;
                                    case 88:
                                        this.$ = r.terminal("\\infty ");
                                        break;
                                    case 89:
                                        this.$ = r.terminal("\\int ");
                                        break;
                                    case 90:
                                        this.$ = r.terminal("!");
                                        break;
                                    case 91:
                                        this.$ = r.terminal("\\&");
                                        break;
                                    case 92:
                                        this.$ = r.primes(o[s]);
                                        break;
                                    case 93:
                                        this.$ = r.terminal("?")
                                }
                            },
                            table: [{
                                3: 1,
                                4: 2,
                                5: [1, 3],
                                6: 4,
                                7: 5,
                                8: 6,
                                9: 7,
                                10: n,
                                14: r,
                                16: i,
                                18: 33,
                                19: o,
                                20: a,
                                21: 32,
                                22: s,
                                25: 8,
                                27: 9,
                                28: 10,
                                29: 14,
                                30: 15,
                                31: 16,
                                32: 18,
                                33: 19,
                                34: 20,
                                35: 21,
                                36: 22,
                                37: 23,
                                38: 24,
                                39: 25,
                                40: 26,
                                41: 27,
                                42: 28,
                                43: 29,
                                44: 30,
                                45: 31,
                                46: l,
                                47: c,
                                48: u,
                                49: p,
                                50: d,
                                51: h,
                                52: f,
                                53: m,
                                54: g,
                                55: y,
                                56: v,
                                57: b,
                                58: x,
                                59: w,
                                60: _,
                                61: S,
                                62: E,
                                63: M,
                                64: I,
                                65: T,
                                66: C,
                                67: k,
                                68: D,
                                69: P,
                                70: L,
                                71: A,
                                72: O,
                                73: F,
                                74: q,
                                75: N,
                                76: R,
                                77: B,
                                78: j,
                                79: V,
                                81: z
                            }, {
                                1: [3]
                            }, {
                                5: [1, 71]
                            }, {
                                1: [2, 2]
                            }, t(U, [2, 4], {
                                6: 4,
                                7: 5,
                                8: 6,
                                9: 7,
                                25: 8,
                                27: 9,
                                28: 10,
                                29: 14,
                                30: 15,
                                31: 16,
                                32: 18,
                                33: 19,
                                34: 20,
                                35: 21,
                                36: 22,
                                37: 23,
                                38: 24,
                                39: 25,
                                40: 26,
                                41: 27,
                                42: 28,
                                43: 29,
                                44: 30,
                                45: 31,
                                21: 32,
                                18: 33,
                                4: 72,
                                10: n,
                                14: r,
                                16: i,
                                19: o,
                                20: a,
                                22: s,
                                46: l,
                                47: c,
                                48: u,
                                49: p,
                                50: d,
                                51: h,
                                52: f,
                                53: m,
                                54: g,
                                55: y,
                                56: v,
                                57: b,
                                58: x,
                                59: w,
                                60: _,
                                61: S,
                                62: E,
                                63: M,
                                64: I,
                                65: T,
                                66: C,
                                67: k,
                                68: D,
                                69: P,
                                70: L,
                                71: A,
                                72: O,
                                73: F,
                                74: q,
                                75: N,
                                76: R,
                                77: B,
                                78: j,
                                79: V,
                                81: z
                            }), t(G, [2, 5]), t(G, [2, 6]), t(G, [2, 7]), t(H, [2, 36], {
                                26: 73,
                                27: 74,
                                75: N,
                                80: K
                            }), t(G, [2, 37], {
                                26: 76,
                                80: K
                            }), t(G, [2, 38], {
                                26: 77,
                                80: K
                            }), {
                                4: 78,
                                6: 4,
                                7: 5,
                                8: 6,
                                9: 7,
                                10: n,
                                13: [1, 79],
                                14: r,
                                16: i,
                                18: 33,
                                19: o,
                                20: a,
                                21: 32,
                                22: s,
                                25: 8,
                                27: 9,
                                28: 10,
                                29: 14,
                                30: 15,
                                31: 16,
                                32: 18,
                                33: 19,
                                34: 20,
                                35: 21,
                                36: 22,
                                37: 23,
                                38: 24,
                                39: 25,
                                40: 26,
                                41: 27,
                                42: 28,
                                43: 29,
                                44: 30,
                                45: 31,
                                46: l,
                                47: c,
                                48: u,
                                49: p,
                                50: d,
                                51: h,
                                52: f,
                                53: m,
                                54: g,
                                55: y,
                                56: v,
                                57: b,
                                58: x,
                                59: w,
                                60: _,
                                61: S,
                                62: E,
                                63: M,
                                64: I,
                                65: T,
                                66: C,
                                67: k,
                                68: D,
                                69: P,
                                70: L,
                                71: A,
                                72: O,
                                73: F,
                                74: q,
                                75: N,
                                76: R,
                                77: B,
                                78: j,
                                79: V,
                                81: z
                            }, {
                                7: 82,
                                15: 80,
                                16: [1, 81],
                                18: 33,
                                19: o,
                                20: a,
                                21: 32,
                                22: s,
                                25: 8,
                                27: 9,
                                28: 10,
                                29: 14,
                                30: 15,
                                31: 16,
                                32: 18,
                                33: 19,
                                34: 20,
                                35: 21,
                                36: 22,
                                37: 23,
                                38: 24,
                                39: 25,
                                40: 26,
                                41: 27,
                                42: 28,
                                43: 29,
                                44: 30,
                                45: 31,
                                46: l,
                                47: c,
                                48: u,
                                49: p,
                                50: d,
                                51: h,
                                52: f,
                                53: m,
                                54: g,
                                55: y,
                                56: v,
                                57: b,
                                58: x,
                                59: w,
                                60: _,
                                61: S,
                                62: E,
                                63: M,
                                64: I,
                                65: T,
                                66: C,
                                67: k,
                                68: D,
                                69: P,
                                70: L,
                                71: A,
                                72: O,
                                73: F,
                                74: q,
                                75: N,
                                76: R,
                                77: B,
                                78: j,
                                79: V,
                                81: z
                            }, {
                                4: 83,
                                6: 4,
                                7: 5,
                                8: 6,
                                9: 7,
                                10: n,
                                14: r,
                                16: i,
                                17: [1, 84],
                                18: 33,
                                19: o,
                                20: a,
                                21: 32,
                                22: s,
                                25: 8,
                                27: 9,
                                28: 10,
                                29: 14,
                                30: 15,
                                31: 16,
                                32: 18,
                                33: 19,
                                34: 20,
                                35: 21,
                                36: 22,
                                37: 23,
                                38: 24,
                                39: 25,
                                40: 26,
                                41: 27,
                                42: 28,
                                43: 29,
                                44: 30,
                                45: 31,
                                46: l,
                                47: c,
                                48: u,
                                49: p,
                                50: d,
                                51: h,
                                52: f,
                                53: m,
                                54: g,
                                55: y,
                                56: v,
                                57: b,
                                58: x,
                                59: w,
                                60: _,
                                61: S,
                                62: E,
                                63: M,
                                64: I,
                                65: T,
                                66: C,
                                67: k,
                                68: D,
                                69: P,
                                70: L,
                                71: A,
                                72: O,
                                73: F,
                                74: q,
                                75: N,
                                76: R,
                                77: B,
                                78: j,
                                79: V,
                                81: z
                            }, t(W, [2, 39]), t(W, [2, 40]), t(W, [2, 41]), t(W, [2, 87]), t(W, [2, 42]), t(W, [2, 43]), t(W, [2, 44]), t(W, [2, 45]), t(W, [2, 46]), t(W, [2, 47]), t(W, [2, 48]), t(W, [2, 49]), t(W, [2, 50]), t(W, [2, 51]), t(W, [2, 52]), t(W, [2, 53]), t(W, [2, 54]), t(W, [2, 55]), t(W, [2, 56]), t(W, [2, 57]), t(W, [2, 71]), t(W, [2, 72]), t(W, [2, 73]), t(W, [2, 74]), t(W, [2, 58]), t(W, [2, 59]), t(W, [2, 70]), t(W, [2, 75]), t(W, [2, 76]), t(W, [2, 77]), t(W, [2, 78]), t(W, [2, 79]), t(W, [2, 80]), t(W, [2, 81]), t(W, [2, 82]), t(W, [2, 83]), t(W, [2, 84]), t(W, [2, 85]), t(W, [2, 86]), t(W, [2, 88]), t(W, [2, 89]), t(W, [2, 90]), t(W, [2, 91]), t(W, [2, 93]), t(W, [2, 60]), t(W, [2, 61]), t(W, [2, 62]), t(W, [2, 63]), t(W, [2, 64]), t(W, [2, 65]), t(W, [2, 66]), t(W, [2, 67]), t(W, [2, 68]), t(W, [2, 69]), {
                                4: 85,
                                6: 4,
                                7: 5,
                                8: 6,
                                9: 7,
                                10: n,
                                14: r,
                                16: i,
                                18: 33,
                                19: o,
                                20: a,
                                21: 32,
                                22: s,
                                23: [1, 86],
                                25: 8,
                                27: 9,
                                28: 10,
                                29: 14,
                                30: 15,
                                31: 16,
                                32: 18,
                                33: 19,
                                34: 20,
                                35: 21,
                                36: 22,
                                37: 23,
                                38: 24,
                                39: 25,
                                40: 26,
                                41: 27,
                                42: 28,
                                43: 29,
                                44: 30,
                                45: 31,
                                46: l,
                                47: c,
                                48: u,
                                49: p,
                                50: d,
                                51: h,
                                52: f,
                                53: m,
                                54: g,
                                55: y,
                                56: v,
                                57: b,
                                58: x,
                                59: w,
                                60: _,
                                61: S,
                                62: E,
                                63: M,
                                64: I,
                                65: T,
                                66: C,
                                67: k,
                                68: D,
                                69: P,
                                70: L,
                                71: A,
                                72: O,
                                73: F,
                                74: q,
                                75: N,
                                76: R,
                                77: B,
                                78: j,
                                79: V,
                                81: z
                            }, t(W, [2, 23]), t(W, [2, 24]), {
                                1: [2, 1]
                            }, t(U, [2, 3]), t(H, [2, 33], {
                                27: 87,
                                75: N
                            }), t(G, [2, 32]), t(G, [2, 92]), t(G, [2, 34]), t(G, [2, 35]), {
                                11: [1, 88],
                                12: [1, 89],
                                13: [1, 90]
                            }, t(G, [2, 16]), {
                                16: [1, 91]
                            }, {
                                4: 92,
                                6: 4,
                                7: 5,
                                8: 6,
                                9: 7,
                                10: n,
                                14: r,
                                16: i,
                                17: [1, 93],
                                18: 33,
                                19: o,
                                20: a,
                                21: 32,
                                22: s,
                                25: 8,
                                27: 9,
                                28: 10,
                                29: 14,
                                30: 15,
                                31: 16,
                                32: 18,
                                33: 19,
                                34: 20,
                                35: 21,
                                36: 22,
                                37: 23,
                                38: 24,
                                39: 25,
                                40: 26,
                                41: 27,
                                42: 28,
                                43: 29,
                                44: 30,
                                45: 31,
                                46: l,
                                47: c,
                                48: u,
                                49: p,
                                50: d,
                                51: h,
                                52: f,
                                53: m,
                                54: g,
                                55: y,
                                56: v,
                                57: b,
                                58: x,
                                59: w,
                                60: _,
                                61: S,
                                62: E,
                                63: M,
                                64: I,
                                65: T,
                                66: C,
                                67: k,
                                68: D,
                                69: P,
                                70: L,
                                71: A,
                                72: O,
                                73: F,
                                74: q,
                                75: N,
                                76: R,
                                77: B,
                                78: j,
                                79: V,
                                81: z
                            }, {
                                7: 82,
                                15: 94,
                                16: [2, 30],
                                18: 33,
                                19: o,
                                20: a,
                                21: 32,
                                22: s,
                                25: 8,
                                27: 9,
                                28: 10,
                                29: 14,
                                30: 15,
                                31: 16,
                                32: 18,
                                33: 19,
                                34: 20,
                                35: 21,
                                36: 22,
                                37: 23,
                                38: 24,
                                39: 25,
                                40: 26,
                                41: 27,
                                42: 28,
                                43: 29,
                                44: 30,
                                45: 31,
                                46: l,
                                47: c,
                                48: u,
                                49: p,
                                50: d,
                                51: h,
                                52: f,
                                53: m,
                                54: g,
                                55: y,
                                56: v,
                                57: b,
                                58: x,
                                59: w,
                                60: _,
                                61: S,
                                62: E,
                                63: M,
                                64: I,
                                65: T,
                                66: C,
                                67: k,
                                68: D,
                                69: P,
                                70: L,
                                71: A,
                                72: O,
                                73: F,
                                74: q,
                                75: N,
                                76: R,
                                77: B,
                                78: j,
                                79: V,
                                81: z
                            }, {
                                17: [1, 95]
                            }, t(G, [2, 22]), {
                                23: [1, 96]
                            }, {
                                4: 97,
                                6: 4,
                                7: 5,
                                8: 6,
                                9: 7,
                                10: n,
                                14: r,
                                16: i,
                                18: 33,
                                19: o,
                                20: a,
                                21: 32,
                                22: s,
                                24: [1, 98],
                                25: 8,
                                27: 9,
                                28: 10,
                                29: 14,
                                30: 15,
                                31: 16,
                                32: 18,
                                33: 19,
                                34: 20,
                                35: 21,
                                36: 22,
                                37: 23,
                                38: 24,
                                39: 25,
                                40: 26,
                                41: 27,
                                42: 28,
                                43: 29,
                                44: 30,
                                45: 31,
                                46: l,
                                47: c,
                                48: u,
                                49: p,
                                50: d,
                                51: h,
                                52: f,
                                53: m,
                                54: g,
                                55: y,
                                56: v,
                                57: b,
                                58: x,
                                59: w,
                                60: _,
                                61: S,
                                62: E,
                                63: M,
                                64: I,
                                65: T,
                                66: C,
                                67: k,
                                68: D,
                                69: P,
                                70: L,
                                71: A,
                                72: O,
                                73: F,
                                74: q,
                                75: N,
                                76: R,
                                77: B,
                                78: j,
                                79: V,
                                81: z
                            }, t(G, [2, 31]), {
                                4: 99,
                                6: 4,
                                7: 5,
                                8: 6,
                                9: 7,
                                10: n,
                                12: [1, 100],
                                13: [1, 101],
                                14: r,
                                16: i,
                                18: 33,
                                19: o,
                                20: a,
                                21: 32,
                                22: s,
                                25: 8,
                                27: 9,
                                28: 10,
                                29: 14,
                                30: 15,
                                31: 16,
                                32: 18,
                                33: 19,
                                34: 20,
                                35: 21,
                                36: 22,
                                37: 23,
                                38: 24,
                                39: 25,
                                40: 26,
                                41: 27,
                                42: 28,
                                43: 29,
                                44: 30,
                                45: 31,
                                46: l,
                                47: c,
                                48: u,
                                49: p,
                                50: d,
                                51: h,
                                52: f,
                                53: m,
                                54: g,
                                55: y,
                                56: v,
                                57: b,
                                58: x,
                                59: w,
                                60: _,
                                61: S,
                                62: E,
                                63: M,
                                64: I,
                                65: T,
                                66: C,
                                67: k,
                                68: D,
                                69: P,
                                70: L,
                                71: A,
                                72: O,
                                73: F,
                                74: q,
                                75: N,
                                76: R,
                                77: B,
                                78: j,
                                79: V,
                                81: z
                            }, {
                                4: 102,
                                6: 4,
                                7: 5,
                                8: 6,
                                9: 7,
                                10: n,
                                14: r,
                                16: i,
                                18: 33,
                                19: o,
                                20: a,
                                21: 32,
                                22: s,
                                25: 8,
                                27: 9,
                                28: 10,
                                29: 14,
                                30: 15,
                                31: 16,
                                32: 18,
                                33: 19,
                                34: 20,
                                35: 21,
                                36: 22,
                                37: 23,
                                38: 24,
                                39: 25,
                                40: 26,
                                41: 27,
                                42: 28,
                                43: 29,
                                44: 30,
                                45: 31,
                                46: l,
                                47: c,
                                48: u,
                                49: p,
                                50: d,
                                51: h,
                                52: f,
                                53: m,
                                54: g,
                                55: y,
                                56: v,
                                57: b,
                                58: x,
                                59: w,
                                60: _,
                                61: S,
                                62: E,
                                63: M,
                                64: I,
                                65: T,
                                66: C,
                                67: k,
                                68: D,
                                69: P,
                                70: L,
                                71: A,
                                72: O,
                                73: F,
                                74: q,
                                75: N,
                                76: R,
                                77: B,
                                78: j,
                                79: V,
                                81: z
                            }, t(G, [2, 15]), {
                                4: 103,
                                6: 4,
                                7: 5,
                                8: 6,
                                9: 7,
                                10: n,
                                14: r,
                                16: i,
                                17: [1, 104],
                                18: 33,
                                19: o,
                                20: a,
                                21: 32,
                                22: s,
                                25: 8,
                                27: 9,
                                28: 10,
                                29: 14,
                                30: 15,
                                31: 16,
                                32: 18,
                                33: 19,
                                34: 20,
                                35: 21,
                                36: 22,
                                37: 23,
                                38: 24,
                                39: 25,
                                40: 26,
                                41: 27,
                                42: 28,
                                43: 29,
                                44: 30,
                                45: 31,
                                46: l,
                                47: c,
                                48: u,
                                49: p,
                                50: d,
                                51: h,
                                52: f,
                                53: m,
                                54: g,
                                55: y,
                                56: v,
                                57: b,
                                58: x,
                                59: w,
                                60: _,
                                61: S,
                                62: E,
                                63: M,
                                64: I,
                                65: T,
                                66: C,
                                67: k,
                                68: D,
                                69: P,
                                70: L,
                                71: A,
                                72: O,
                                73: F,
                                74: q,
                                75: N,
                                76: R,
                                77: B,
                                78: j,
                                79: V,
                                81: z
                            }, {
                                17: [1, 105]
                            }, t(G, [2, 20]), {
                                16: [2, 29]
                            }, t(G, [2, 21]), {
                                4: 106,
                                6: 4,
                                7: 5,
                                8: 6,
                                9: 7,
                                10: n,
                                14: r,
                                16: i,
                                18: 33,
                                19: o,
                                20: a,
                                21: 32,
                                22: s,
                                24: [1, 107],
                                25: 8,
                                27: 9,
                                28: 10,
                                29: 14,
                                30: 15,
                                31: 16,
                                32: 18,
                                33: 19,
                                34: 20,
                                35: 21,
                                36: 22,
                                37: 23,
                                38: 24,
                                39: 25,
                                40: 26,
                                41: 27,
                                42: 28,
                                43: 29,
                                44: 30,
                                45: 31,
                                46: l,
                                47: c,
                                48: u,
                                49: p,
                                50: d,
                                51: h,
                                52: f,
                                53: m,
                                54: g,
                                55: y,
                                56: v,
                                57: b,
                                58: x,
                                59: w,
                                60: _,
                                61: S,
                                62: E,
                                63: M,
                                64: I,
                                65: T,
                                66: C,
                                67: k,
                                68: D,
                                69: P,
                                70: L,
                                71: A,
                                72: O,
                                73: F,
                                74: q,
                                75: N,
                                76: R,
                                77: B,
                                78: j,
                                79: V,
                                81: z
                            }, {
                                24: [1, 108]
                            }, t(W, [2, 28]), {
                                12: [1, 109],
                                13: [1, 110]
                            }, {
                                4: 111,
                                6: 4,
                                7: 5,
                                8: 6,
                                9: 7,
                                10: n,
                                13: [1, 112],
                                14: r,
                                16: i,
                                18: 33,
                                19: o,
                                20: a,
                                21: 32,
                                22: s,
                                25: 8,
                                27: 9,
                                28: 10,
                                29: 14,
                                30: 15,
                                31: 16,
                                32: 18,
                                33: 19,
                                34: 20,
                                35: 21,
                                36: 22,
                                37: 23,
                                38: 24,
                                39: 25,
                                40: 26,
                                41: 27,
                                42: 28,
                                43: 29,
                                44: 30,
                                45: 31,
                                46: l,
                                47: c,
                                48: u,
                                49: p,
                                50: d,
                                51: h,
                                52: f,
                                53: m,
                                54: g,
                                55: y,
                                56: v,
                                57: b,
                                58: x,
                                59: w,
                                60: _,
                                61: S,
                                62: E,
                                63: M,
                                64: I,
                                65: T,
                                66: C,
                                67: k,
                                68: D,
                                69: P,
                                70: L,
                                71: A,
                                72: O,
                                73: F,
                                74: q,
                                75: N,
                                76: R,
                                77: B,
                                78: j,
                                79: V,
                                81: z
                            }, t(G, [2, 14]), {
                                13: [1, 113]
                            }, {
                                17: [1, 114]
                            }, t(G, [2, 19]), t(G, [2, 18]), {
                                24: [1, 115]
                            }, t(W, [2, 26]), t(W, [2, 27]), {
                                4: 116,
                                6: 4,
                                7: 5,
                                8: 6,
                                9: 7,
                                10: n,
                                13: [1, 117],
                                14: r,
                                16: i,
                                18: 33,
                                19: o,
                                20: a,
                                21: 32,
                                22: s,
                                25: 8,
                                27: 9,
                                28: 10,
                                29: 14,
                                30: 15,
                                31: 16,
                                32: 18,
                                33: 19,
                                34: 20,
                                35: 21,
                                36: 22,
                                37: 23,
                                38: 24,
                                39: 25,
                                40: 26,
                                41: 27,
                                42: 28,
                                43: 29,
                                44: 30,
                                45: 31,
                                46: l,
                                47: c,
                                48: u,
                                49: p,
                                50: d,
                                51: h,
                                52: f,
                                53: m,
                                54: g,
                                55: y,
                                56: v,
                                57: b,
                                58: x,
                                59: w,
                                60: _,
                                61: S,
                                62: E,
                                63: M,
                                64: I,
                                65: T,
                                66: C,
                                67: k,
                                68: D,
                                69: P,
                                70: L,
                                71: A,
                                72: O,
                                73: F,
                                74: q,
                                75: N,
                                76: R,
                                77: B,
                                78: j,
                                79: V,
                                81: z
                            }, t(G, [2, 10]), {
                                13: [1, 118]
                            }, t(G, [2, 13]), t(G, [2, 12]), t(G, [2, 17]), t(W, [2, 25]), {
                                13: [1, 119]
                            }, t(G, [2, 9]), t(G, [2, 11]), t(G, [2, 8])],
                            defaultActions: {
                                3: [2, 2],
                                71: [2, 1],
                                94: [2, 29]
                            },
                            parseError: function(e, t) {
                                if (!t.recoverable) {
                                    var n = new Error(e);
                                    throw n.hash = t, n
                                }
                                this.trace(e)
                            },
                            parse: function(e) {
                                var t = this,
                                    n = [0],
                                    r = [null],
                                    i = [],
                                    o = this.table,
                                    a = "",
                                    s = 0,
                                    l = 0,
                                    c = 0,
                                    u = i.slice.call(arguments, 1),
                                    p = Object.create(this.lexer),
                                    d = {
                                        yy: {}
                                    };
                                for (var h in this.yy) Object.prototype.hasOwnProperty.call(this.yy, h) && (d.yy[h] = this.yy[h]);
                                p.setInput(e, d.yy), d.yy.lexer = p, d.yy.parser = this, void 0 === p.yylloc && (p.yylloc = {});
                                var f = p.yylloc;
                                i.push(f);
                                var m = p.options && p.options.ranges;
                                "function" == typeof d.yy.parseError ? this.parseError = d.yy.parseError : this.parseError = Object.getPrototypeOf(this).parseError;
                                for (var g, y, v, b, x, w, _, S, E, M = function() {
                                        var e;
                                        return e = p.lex() || 1, "number" != typeof e && (e = t.symbols_[e] || e), e
                                    }, I = {};;) {
                                    if (v = n[n.length - 1], this.defaultActions[v] ? b = this.defaultActions[v] : (null !== g && void 0 !== g || (g = M()), b = o[v] && o[v][g]), void 0 === b || !b.length || !b[0]) {
                                        var T = "";
                                        E = [];
                                        for (w in o[v]) this.terminals_[w] && w > 2 && E.push("'" + this.terminals_[w] + "'");
                                        T = p.showPosition ? "Parse error on line " + (s + 1) + ":\n" + p.showPosition() + "\nExpecting " + E.join(", ") + ", got '" + (this.terminals_[g] || g) + "'" : "Parse error on line " + (s + 1) + ": Unexpected " + (1 == g ? "end of input" : "'" + (this.terminals_[g] || g) + "'"), this.parseError(T, {
                                            text: p.match,
                                            token: this.terminals_[g] || g,
                                            line: p.yylineno,
                                            loc: f,
                                            expected: E
                                        })
                                    }
                                    if (b[0] instanceof Array && b.length > 1) throw new Error("Parse Error: multiple actions possible at state: " + v + ", token: " + g);
                                    switch (b[0]) {
                                        case 1:
                                            n.push(g), r.push(p.yytext), i.push(p.yylloc), n.push(b[1]), g = null, y ? (g = y, y = null) : (l = p.yyleng, a = p.yytext, s = p.yylineno, f = p.yylloc, c > 0 && c--);
                                            break;
                                        case 2:
                                            if (_ = this.productions_[b[1]][1], I.$ = r[r.length - _], I._$ = {
                                                    first_line: i[i.length - (_ || 1)].first_line,
                                                    last_line: i[i.length - 1].last_line,
                                                    first_column: i[i.length - (_ || 1)].first_column,
                                                    last_column: i[i.length - 1].last_column
                                                }, m && (I._$.range = [i[i.length - (_ || 1)].range[0], i[i.length - 1].range[1]]), void 0 !== (x = this.performAction.apply(I, [a, l, s, d.yy, b[1], r, i].concat(u)))) return x;
                                            _ && (n = n.slice(0, -1 * _ * 2), r = r.slice(0, -1 * _), i = i.slice(0, -1 * _)), n.push(this.productions_[b[1]][0]), r.push(I.$), i.push(I._$), S = o[n[n.length - 2]][n[n.length - 1]], n.push(S);
                                            break;
                                        case 3:
                                            return !0
                                    }
                                }
                                return !0
                            }
                        },
                        X = function() {
                            return {
                                EOF: 1,
                                parseError: function(e, t) {
                                    if (!this.yy.parser) throw new Error(e);
                                    this.yy.parser.parseError(e, t)
                                },
                                setInput: function(e, t) {
                                    return this.yy = t || this.yy || {}, this._input = e, this._more = this._backtrack = this.done = !1, this.yylineno = this.yyleng = 0, this.yytext = this.matched = this.match = "", this.conditionStack = ["INITIAL"], this.yylloc = {
                                        first_line: 1,
                                        first_column: 0,
                                        last_line: 1,
                                        last_column: 0
                                    }, this.options.ranges && (this.yylloc.range = [0, 0]), this.offset = 0, this
                                },
                                input: function() {
                                    var e = this._input[0];
                                    return this.yytext += e, this.yyleng++, this.offset++, this.match += e, this.matched += e, e.match(/(?:\r\n?|\n).*/g) ? (this.yylineno++, this.yylloc.last_line++) : this.yylloc.last_column++, this.options.ranges && this.yylloc.range[1]++, this._input = this._input.slice(1), e
                                },
                                unput: function(e) {
                                    var t = e.length,
                                        n = e.split(/(?:\r\n?|\n)/g);
                                    this._input = e + this._input, this.yytext = this.yytext.substr(0, this.yytext.length - t), this.offset -= t;
                                    var r = this.match.split(/(?:\r\n?|\n)/g);
                                    this.match = this.match.substr(0, this.match.length - 1), this.matched = this.matched.substr(0, this.matched.length - 1), n.length - 1 && (this.yylineno -= n.length - 1);
                                    var i = this.yylloc.range;
                                    return this.yylloc = {
                                        first_line: this.yylloc.first_line,
                                        last_line: this.yylineno + 1,
                                        first_column: this.yylloc.first_column,
                                        last_column: n ? (n.length === r.length ? this.yylloc.first_column : 0) + r[r.length - n.length].length - n[0].length : this.yylloc.first_column - t
                                    }, this.options.ranges && (this.yylloc.range = [i[0], i[0] + this.yyleng - t]), this.yyleng = this.yytext.length, this
                                },
                                more: function() {
                                    return this._more = !0, this
                                },
                                reject: function() {
                                    return this.options.backtrack_lexer ? (this._backtrack = !0, this) : this.parseError("Lexical error on line " + (this.yylineno + 1) + ". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n" + this.showPosition(), {
                                        text: "",
                                        token: null,
                                        line: this.yylineno
                                    })
                                },
                                less: function(e) {
                                    this.unput(this.match.slice(e))
                                },
                                pastInput: function() {
                                    var e = this.matched.substr(0, this.matched.length - this.match.length);
                                    return (e.length > 20 ? "..." : "") + e.substr(-20).replace(/\n/g, "")
                                },
                                upcomingInput: function() {
                                    var e = this.match;
                                    return e.length < 20 && (e += this._input.substr(0, 20 - e.length)), (e.substr(0, 20) + (e.length > 20 ? "..." : "")).replace(/\n/g, "")
                                },
                                showPosition: function() {
                                    var e = this.pastInput(),
                                        t = new Array(e.length + 1).join("-");
                                    return e + this.upcomingInput() + "\n" + t + "^"
                                },
                                test_match: function(e, t) {
                                    var n, r, i;
                                    if (this.options.backtrack_lexer && (i = {
                                            yylineno: this.yylineno,
                                            yylloc: {
                                                first_line: this.yylloc.first_line,
                                                last_line: this.last_line,
                                                first_column: this.yylloc.first_column,
                                                last_column: this.yylloc.last_column
                                            },
                                            yytext: this.yytext,
                                            match: this.match,
                                            matches: this.matches,
                                            matched: this.matched,
                                            yyleng: this.yyleng,
                                            offset: this.offset,
                                            _more: this._more,
                                            _input: this._input,
                                            yy: this.yy,
                                            conditionStack: this.conditionStack.slice(0),
                                            done: this.done
                                        }, this.options.ranges && (i.yylloc.range = this.yylloc.range.slice(0))), r = e[0].match(/(?:\r\n?|\n).*/g), r && (this.yylineno += r.length), this.yylloc = {
                                            first_line: this.yylloc.last_line,
                                            last_line: this.yylineno + 1,
                                            first_column: this.yylloc.last_column,
                                            last_column: r ? r[r.length - 1].length - r[r.length - 1].match(/\r?\n?/)[0].length : this.yylloc.last_column + e[0].length
                                        }, this.yytext += e[0], this.match += e[0], this.matches = e, this.yyleng = this.yytext.length, this.options.ranges && (this.yylloc.range = [this.offset, this.offset += this.yyleng]), this._more = !1, this._backtrack = !1, this._input = this._input.slice(e[0].length), this.matched += e[0], n = this.performAction.call(this, this.yy, this, t, this.conditionStack[this.conditionStack.length - 1]), this.done && this._input && (this.done = !1), n) return n;
                                    if (this._backtrack) {
                                        for (var o in i) this[o] = i[o];
                                        return !1
                                    }
                                    return !1
                                },
                                next: function() {
                                    if (this.done) return this.EOF;
                                    this._input || (this.done = !0);
                                    var e, t, n, r;
                                    this._more || (this.yytext = "", this.match = "");
                                    for (var i = this._currentRules(), o = 0; o < i.length; o++)
                                        if ((n = this._input.match(this.rules[i[o]])) && (!t || n[0].length > t[0].length)) {
                                            if (t = n, r = o, this.options.backtrack_lexer) {
                                                if (!1 !== (e = this.test_match(n, i[o]))) return e;
                                                if (this._backtrack) {
                                                    t = !1;
                                                    continue
                                                }
                                                return !1
                                            }
                                            if (!this.options.flex) break
                                        } return t ? !1 !== (e = this.test_match(t, i[r])) && e : "" === this._input ? this.EOF : this.parseError("Lexical error on line " + (this.yylineno + 1) + ". Unrecognized text.\n" + this.showPosition(), {
                                        text: "",
                                        token: null,
                                        line: this.yylineno
                                    })
                                },
                                lex: function() {
                                    var e = this.next();
                                    return e || this.lex()
                                },
                                begin: function(e) {
                                    this.conditionStack.push(e)
                                },
                                popState: function() {
                                    return this.conditionStack.length - 1 > 0 ? this.conditionStack.pop() : this.conditionStack[0]
                                },
                                _currentRules: function() {
                                    return this.conditionStack.length && this.conditionStack[this.conditionStack.length - 1] ? this.conditions[this.conditionStack[this.conditionStack.length - 1]].rules : this.conditions.INITIAL.rules
                                },
                                topState: function(e) {
                                    return e = this.conditionStack.length - 1 - Math.abs(e || 0), e >= 0 ? this.conditionStack[e] : "INITIAL"
                                },
                                pushState: function(e) {
                                    this.begin(e)
                                },
                                stateStackSize: function() {
                                    return this.conditionStack.length
                                },
                                options: {},
                                performAction: function(e, t, n, r) {
                                    switch (n) {
                                        case 0:
                                            return this.begin("modexp"), 10;
                                        case 1:
                                            return 20;
                                        case 2:
                                            return this.begin("modexp"), 10;
                                        case 3:
                                            return 11;
                                        case 4:
                                            return 12;
                                        case 5:
                                            return this.popState(), 13;
                                        case 6:
                                            return 63;
                                        case 7:
                                            return 64;
                                        case 8:
                                            return 65;
                                        case 9:
                                            return 66;
                                        case 10:
                                            return 67;
                                        case 11:
                                            return 68;
                                        case 12:
                                            return 69;
                                        case 13:
                                            return 54;
                                        case 14:
                                            return 48;
                                        case 15:
                                            return 49;
                                        case 16:
                                            return 50;
                                        case 17:
                                            return 55;
                                        case 18:
                                            return 51;
                                        case 19:
                                            return 52;
                                        case 20:
                                            return 53;
                                        case 21:
                                            return 57;
                                        case 22:
                                            return 56;
                                        case 23:
                                            return 74;
                                        case 24:
                                            return 70;
                                        case 25:
                                        case 26:
                                        case 27:
                                        case 28:
                                        case 29:
                                        case 30:
                                        case 31:
                                        case 32:
                                        case 33:
                                            return 72;
                                        case 34:
                                            return 71;
                                        case 35:
                                        case 36:
                                            return 72;
                                        case 37:
                                        case 38:
                                        case 39:
                                        case 40:
                                        case 41:
                                        case 42:
                                        case 43:
                                        case 44:
                                        case 45:
                                        case 46:
                                            return 71;
                                        case 47:
                                            return 73;
                                        case 48:
                                            return 19;
                                        case 49:
                                            return 47;
                                        case 50:
                                            return 20;
                                        case 51:
                                            return 80;
                                        case 52:
                                            return 60;
                                        case 53:
                                            return 14;
                                        case 54:
                                            return this.begin("radical"), 16;
                                        case 55:
                                            return this.popState(), 17;
                                        case 56:
                                            return 17;
                                        case 57:
                                            return 77;
                                        case 58:
                                            return 79;
                                        case 59:
                                            return 78;
                                        case 60:
                                        case 61:
                                            return 59;
                                        case 62:
                                            return t.yytext = this.matches[1], 75;
                                        case 63:
                                            return 22;
                                        case 64:
                                            return 23;
                                        case 65:
                                            return 24;
                                        case 66:
                                            return t.yytext = this.matches[1], 62;
                                        case 67:
                                            return 61;
                                        case 68:
                                            return 76;
                                        case 69:
                                            return 81;
                                        case 70:
                                            return 46;
                                        case 71:
                                            return 47;
                                        case 72:
                                            return 58;
                                        case 73:
                                            return 5
                                    }
                                },
                                rules: [/^(?:"(?=[^>\]]+%))/, /^(?:")/, /^(?:"(?=[^>\]]+\]|[^>\]]+%))/, /^(?:%)/, /^(?:<)/, /^(?:\])/, /^(?:[+])/, /^(?:[-])/, /^(?:[*])/, /^(?:[@][*])/, /^(?:[@][\#])/, /^(?:[_][\/])/, /^(?:[.][\/])/, /^(?:[.][.][(])/, /^(?:[@][(])/, /^(?:[.][(])/, /^(?:[(])/, /^(?:[.][.][)])/, /^(?:[@][)])/, /^(?:[.][)])/, /^(?:[)])/, /^(?:[\\][\\])/, /^(?:[\\])/, /^(?:[_][3])/, /^(?:[@][0])/, /^(?:[ ][\^;]+[.]K[ ])/, /^(?:[\^;]+[=])/, /^(?:[ ][\^;]+[\/][.]K[ ])/, /^(?:[ ][\^;]+[@][:][@][:][ ])/, /^(?:[ ][\^;]+["]K[:][ ])/, /^(?:[ ][\^;]+[.]1[:][ ])/, /^(?:[ ][\^;]+["]K[ ])/, /^(?:[ ][\^;]+[.]1[ ])/, /^(?:[ ][\^;]+[\/][$][L][ ])/, /^(?:[ ][.]K[ ])/, /^(?:[ ][\^;]+[\/]?[$][L][ ])/, /^(?:[ ][\^;]+[$]P[ ])/, /^(?:[=])/, /^(?:[ ][\/][.]K[ ])/, /^(?:[ ][@][:][@][:][ ])/, /^(?:[ ]["]K[:][ ])/, /^(?:[ ][.]1[:][ ])/, /^(?:[ ]["]K[ ])/, /^(?:[ ][.]1[ ])/, /^(?:[@][:])/, /^(?:[ ][\/]?[$][L][ ])/, /^(?:[ ][$]P[ ])/, /^(?:[ ]?['][']['][ ]?)/, /^(?:[\^;]+)/, /^(?:[.]["])/, /^(?:["])/, /^(?:[']+)/, /^(?:[.][,]?[ABGDEZ\?\:IKLMNXOPRSTUYF\&W])/, /^(?:[.]*[<])/, /^(?:[.]*[>])/, /^(?:[.]*\])/, /^(?:[.]*\])/, /^(?:!)/, /^(?:[_]&)/, /^(?:&)/, /^(?:(ARC)?(SIN|COS|TAN|CSC|SEC|COT)(H)?)/, /^(?:(ARG|DET|EXP|IM|INF|LIM|LN|LOG|MAX|MIN|MOD|RE|SUP))/, /^(?:#?(\d*\.?\d+))/, /^(?:[,]*[?])/, /^(?:[,]*[\/])/, /^(?:[,]*#)/, /^(?:[,]([A-Z]))/, /^(?:[A-Z])/, /^(?:[,][=])/, /^(?:[_][8])/, /^(?:[,][ ]?)/, /^(?:[.])/, /^(?:[ ])/, /^(?:$)/],
                                conditions: {
                                    radical: {
                                        rules: [0, 1, 2, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73],
                                        inclusive: !0
                                    },
                                    modexp: {
                                        rules: [2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73],
                                        inclusive: !0
                                    },
                                    INITIAL: {
                                        rules: [2, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73],
                                        inclusive: !0
                                    }
                                }
                            }
                        }();
                    return Y.lexer = X, e.prototype = Y, Y.Parser = e, new e
                }();
                t.parser = i, t.Parser = i.Parser, t.parse = function() {
                    return i.parse.apply(i, arguments)
                }, t.main = function(r) {
                    r[1] || (console.log("Usage: " + r[0] + " FILE"), e.exit(1));
                    var i = n(4).readFileSync(n(5).normalize(r[1]), "utf8");
                    return t.parser.parse(i)
                }, void 0 !== r && n.c[n.s] === r && t.main(e.argv.slice(1))
            }).call(t, n(1), n(8)(e))
        }, function(e, t, n) {
            (function(e, r) {
                var i = function() {
                    function e() {
                        this.yy = {}
                    }
                    var t = function(e, t, n, r) {
                            for (n = n || {}, r = e.length; r--; n[e[r]] = t);
                            return n
                        },
                        n = [1, 15],
                        r = [1, 16],
                        i = [1, 17],
                        o = [1, 36],
                        a = [1, 18],
                        s = [1, 37],
                        l = [1, 38],
                        c = [1, 14],
                        u = [1, 46],
                        p = [1, 47],
                        d = [1, 39],
                        h = [1, 40],
                        f = [1, 41],
                        m = [1, 56],
                        g = [1, 42],
                        y = [1, 43],
                        v = [1, 44],
                        b = [1, 45],
                        x = [1, 54],
                        w = [1, 55],
                        _ = [1, 57],
                        S = [1, 58],
                        E = [1, 59],
                        M = [1, 60],
                        I = [1, 61],
                        T = [1, 62],
                        C = [1, 63],
                        k = [1, 64],
                        D = [1, 65],
                        P = [1, 66],
                        L = [1, 67],
                        A = [1, 68],
                        O = [1, 69],
                        F = [1, 70],
                        q = [1, 71],
                        N = [1, 72],
                        R = [1, 73],
                        B = [1, 74],
                        j = [1, 75],
                        V = [1, 48],
                        z = [1, 49],
                        U = [1, 50],
                        G = [1, 51],
                        H = [1, 52],
                        K = [1, 76],
                        W = [1, 53],
                        Y = [5, 14, 18, 19, 29, 52, 53, 54],
                        X = [5, 10, 13, 14, 15, 18, 19, 29, 52, 53, 54],
                        $ = [5, 10, 13, 14, 15, 17, 18, 19, 21, 23, 24, 28, 29, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87],
                        Q = [1, 84],
                        Z = [1, 85],
                        J = [1, 86],
                        ee = [10, 13, 15, 17, 21, 23, 24, 28, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87],
                        te = {
                            trace: function() {},
                            yy: {},
                            symbols_: {
                                error: 2,
                                sentence: 3,
                                group: 4,
                                EOF: 5,
                                expression_group: 6,
                                delimited_expression: 7,
                                level: 8,
                                radical: 9,
                                LEVEL: 10,
                                basic_token: 11,
                                bracketed_expression: 12,
                                RADICAL_WITH_INDEX: 13,
                                CLOSE_RADICAL: 14,
                                RADICAL: 15,
                                frac: 16,
                                OPEN_FRAC: 17,
                                OVER: 18,
                                CLOSE_FRAC: 19,
                                simple_frac: 20,
                                NUMBER: 21,
                                NUMBER_FRAC_DENOMINATOR: 22,
                                NUMBER_FRAC_NUMERATOR_BAD: 23,
                                NUMBER_FRAC_DENOMINATOR_BAD: 24,
                                atom: 25,
                                lbracket: 26,
                                rbracket: 27,
                                OPEN_GROUP: 28,
                                CLOSE_GROUP: 29,
                                command: 30,
                                greek: 31,
                                letter: 32,
                                comma: 33,
                                period: 34,
                                colon: 35,
                                infinity: 36,
                                integral: 37,
                                factorial: 38,
                                ampersand: 39,
                                question_mark: 40,
                                bracket: 41,
                                space: 42,
                                operation: 43,
                                comparison: 44,
                                ellipsis: 45,
                                primes: 46,
                                ",": 47,
                                ".": 48,
                                "[": 49,
                                "{": 50,
                                "(": 51,
                                "]": 52,
                                "}": 53,
                                ")": 54,
                                SPACE: 55,
                                COMMAND: 56,
                                GREEK: 57,
                                CAPITAL_LETTER: 58,
                                LETTER: 59,
                                PIPE: 60,
                                DOUBLE_PIPE: 61,
                                "+": 62,
                                "-": 63,
                                CDOT: 64,
                                TIMES: 65,
                                "*": 66,
                                DIV: 67,
                                SLASH: 68,
                                PERCENT: 69,
                                "=": 70,
                                NEQ: 71,
                                "<": 72,
                                ">": 73,
                                LEQ: 74,
                                APPROX: 75,
                                GEQ: 76,
                                TILDE: 77,
                                PARALLEL: 78,
                                PERPENDICULAR: 79,
                                ELLIPSIS: 80,
                                COLON: 81,
                                INFINITY: 82,
                                INTEGRAL: 83,
                                FACTORIAL: 84,
                                "&": 85,
                                PRIMES: 86,
                                "?": 87,
                                $accept: 0,
                                $end: 1
                            },
                            terminals_: {
                                2: "error",
                                5: "EOF",
                                10: "LEVEL",
                                13: "RADICAL_WITH_INDEX",
                                14: "CLOSE_RADICAL",
                                15: "RADICAL",
                                17: "OPEN_FRAC",
                                18: "OVER",
                                19: "CLOSE_FRAC",
                                21: "NUMBER",
                                22: "NUMBER_FRAC_DENOMINATOR",
                                23: "NUMBER_FRAC_NUMERATOR_BAD",
                                24: "NUMBER_FRAC_DENOMINATOR_BAD",
                                28: "OPEN_GROUP",
                                29: "CLOSE_GROUP",
                                47: ",",
                                48: ".",
                                49: "[",
                                50: "{",
                                51: "(",
                                52: "]",
                                53: "}",
                                54: ")",
                                55: "SPACE",
                                56: "COMMAND",
                                57: "GREEK",
                                58: "CAPITAL_LETTER",
                                59: "LETTER",
                                60: "PIPE",
                                61: "DOUBLE_PIPE",
                                62: "+",
                                63: "-",
                                64: "CDOT",
                                65: "TIMES",
                                66: "*",
                                67: "DIV",
                                68: "SLASH",
                                69: "PERCENT",
                                70: "=",
                                71: "NEQ",
                                72: "<",
                                73: ">",
                                74: "LEQ",
                                75: "APPROX",
                                76: "GEQ",
                                77: "TILDE",
                                78: "PARALLEL",
                                79: "PERPENDICULAR",
                                80: "ELLIPSIS",
                                81: "COLON",
                                82: "INFINITY",
                                83: "INTEGRAL",
                                84: "FACTORIAL",
                                85: "&",
                                86: "PRIMES",
                                87: "?"
                            },
                            productions_: [0, [3, 2],
                                [3, 1],
                                [4, 3],
                                [4, 2],
                                [4, 1],
                                [4, 2],
                                [4, 1],
                                [7, 1],
                                [7, 1],
                                [8, 2],
                                [8, 2],
                                [8, 2],
                                [9, 4],
                                [9, 3],
                                [9, 3],
                                [9, 2],
                                [9, 4],
                                [9, 3],
                                [9, 2],
                                [16, 5],
                                [16, 4],
                                [16, 4],
                                [16, 3],
                                [16, 2],
                                [20, 2],
                                [20, 1],
                                [20, 1],
                                [11, 1],
                                [11, 1],
                                [11, 1],
                                [6, 2],
                                [6, 2],
                                [6, 1],
                                [6, 1],
                                [12, 3],
                                [12, 2],
                                [12, 3],
                                [12, 2],
                                [25, 1],
                                [25, 1],
                                [25, 1],
                                [25, 1],
                                [25, 1],
                                [25, 1],
                                [25, 1],
                                [25, 1],
                                [25, 1],
                                [25, 1],
                                [25, 1],
                                [25, 1],
                                [25, 1],
                                [25, 1],
                                [25, 1],
                                [25, 1],
                                [25, 1],
                                [25, 1],
                                [33, 1],
                                [34, 1],
                                [26, 1],
                                [26, 1],
                                [26, 1],
                                [27, 1],
                                [27, 1],
                                [27, 1],
                                [42, 1],
                                [30, 1],
                                [31, 1],
                                [32, 1],
                                [32, 1],
                                [41, 1],
                                [41, 1],
                                [43, 1],
                                [43, 1],
                                [43, 1],
                                [43, 1],
                                [43, 1],
                                [43, 1],
                                [43, 1],
                                [43, 1],
                                [44, 1],
                                [44, 1],
                                [44, 1],
                                [44, 1],
                                [44, 1],
                                [44, 1],
                                [44, 1],
                                [44, 1],
                                [44, 1],
                                [44, 1],
                                [45, 1],
                                [35, 1],
                                [36, 1],
                                [37, 1],
                                [38, 1],
                                [39, 1],
                                [46, 1],
                                [40, 1]
                            ],
                            performAction: function(e, t, n, r, i, o, a) {
                                var s = o.length - 1;
                                switch (i) {
                                    case 1:
                                        return o[s - 1];
                                    case 2:
                                        return r.group();
                                    case 3:
                                    case 35:
                                        this.$ = r.group(o[s - 2], o[s - 1], o[s]);
                                        break;
                                    case 4:
                                    case 6:
                                    case 31:
                                    case 32:
                                    case 36:
                                        this.$ = r.group(o[s - 1], o[s]);
                                        break;
                                    case 5:
                                    case 7:
                                    case 33:
                                    case 34:
                                        this.$ = r.group(o[s]);
                                        break;
                                    case 10:
                                    case 11:
                                    case 12:
                                        this.$ = r.basic_level(o[s - 1], r.group(o[s]));
                                        break;
                                    case 13:
                                    case 17:
                                        this.$ = r.radical(o[s - 1], r.group(o[s - 2]));
                                        break;
                                    case 14:
                                    case 15:
                                        this.$ = r.radical(r.group(), r.group(o[s - 1]));
                                        break;
                                    case 16:
                                        this.$ = r.radical(r.group(), r.group());
                                        break;
                                    case 18:
                                        this.$ = r.radical(o[s - 1]);
                                        break;
                                    case 19:
                                        this.$ = r.radical(r.group());
                                        break;
                                    case 20:
                                        this.$ = r.fraction(o[s - 3], o[s - 1]);
                                        break;
                                    case 21:
                                        this.$ = r.fraction(o[s - 2], r.group());
                                        break;
                                    case 22:
                                        this.$ = r.fraction(r.group(), o[s - 1]);
                                        break;
                                    case 23:
                                    case 24:
                                        this.$ = r.fraction(r.group(), r.group());
                                        break;
                                    case 25:
                                        this.$ = r.fraction(r.group(r.terminal(r.to_number(o[s - 1]))), r.group(r.terminal(r.to_number(o[s]))));
                                        break;
                                    case 26:
                                        this.$ = r.fraction(r.group(r.terminal(r.to_number(o[s]))), r.group());
                                        break;
                                    case 27:
                                        this.$ = r.fraction(r.group(), r.group(r.terminal(r.to_number(o[$01]))));
                                        break;
                                    case 37:
                                        this.$ = r.group(o[s - 1]);
                                        break;
                                    case 38:
                                        this.$ = r.group();
                                        break;
                                    case 39:
                                        this.$ = r.terminal(r.to_number(o[s]));
                                        break;
                                    case 57:
                                        this.$ = r.terminal(",");
                                        break;
                                    case 58:
                                        this.$ = r.terminal(".");
                                        break;
                                    case 59:
                                        this.$ = r.terminal("[");
                                        break;
                                    case 60:
                                        this.$ = r.terminal("\\{");
                                        break;
                                    case 61:
                                        this.$ = r.terminal("(");
                                        break;
                                    case 62:
                                        this.$ = r.terminal("]");
                                        break;
                                    case 63:
                                        this.$ = r.terminal("\\}");
                                        break;
                                    case 64:
                                        this.$ = r.terminal(")");
                                        break;
                                    case 65:
                                        this.$ = r.terminal(" ");
                                        break;
                                    case 66:
                                        this.$ = r.command("\\" + o[s].trim().toLowerCase());
                                        break;
                                    case 67:
                                        this.$ = r.terminal(r.greek(o[s]));
                                        break;
                                    case 68:
                                        this.$ = r.terminal(o[s].toUpperCase());
                                        break;
                                    case 69:
                                        this.$ = r.terminal(o[s].toLowerCase());
                                        break;
                                    case 70:
                                        this.$ = r.terminal("|");
                                        break;
                                    case 71:
                                        this.$ = r.terminal("\\|");
                                        break;
                                    case 72:
                                        this.$ = r.terminal("+");
                                        break;
                                    case 73:
                                        this.$ = r.terminal("-");
                                        break;
                                    case 74:
                                        this.$ = r.terminal("\\cdot ");
                                        break;
                                    case 75:
                                        this.$ = r.terminal("\\times ");
                                        break;
                                    case 76:
                                        this.$ = r.terminal("*");
                                        break;
                                    case 77:
                                        this.$ = r.terminal("\\div ");
                                        break;
                                    case 78:
                                        this.$ = r.terminal("/");
                                        break;
                                    case 79:
                                        this.$ = r.terminal("\\%");
                                        break;
                                    case 80:
                                        this.$ = r.terminal("=");
                                        break;
                                    case 81:
                                        this.$ = r.terminal("\\neq ");
                                        break;
                                    case 82:
                                        this.$ = r.terminal("<");
                                        break;
                                    case 83:
                                        this.$ = r.terminal(">");
                                        break;
                                    case 84:
                                        this.$ = r.terminal("\\leq ");
                                        break;
                                    case 85:
                                        this.$ = r.terminal("\\approx ");
                                        break;
                                    case 86:
                                        this.$ = r.terminal("\\geq ");
                                        break;
                                    case 87:
                                        this.$ = r.terminal("\\sim ");
                                        break;
                                    case 88:
                                        this.$ = r.terminal("\\parallel ");
                                        break;
                                    case 89:
                                        this.$ = r.terminal("\\perp ");
                                        break;
                                    case 90:
                                        this.$ = r.terminal("\\ldots ");
                                        break;
                                    case 91:
                                        this.$ = r.terminal(":");
                                        break;
                                    case 92:
                                        this.$ = r.terminal("\\infty ");
                                        break;
                                    case 93:
                                        this.$ = r.terminal("\\int ");
                                        break;
                                    case 94:
                                        this.$ = r.terminal("!");
                                        break;
                                    case 95:
                                        this.$ = r.terminal("\\&");
                                        break;
                                    case 96:
                                        this.$ = r.primes(o[s]);
                                        break;
                                    case 97:
                                        this.$ = r.terminal("?")
                                }
                            },
                            table: [{
                                3: 1,
                                4: 2,
                                5: [1, 3],
                                6: 4,
                                7: 5,
                                8: 8,
                                9: 9,
                                10: n,
                                11: 6,
                                12: 7,
                                13: r,
                                15: i,
                                16: 11,
                                17: o,
                                20: 12,
                                21: a,
                                23: s,
                                24: l,
                                25: 10,
                                26: 13,
                                28: c,
                                30: 19,
                                31: 20,
                                32: 21,
                                33: 22,
                                34: 23,
                                35: 24,
                                36: 25,
                                37: 26,
                                38: 27,
                                39: 28,
                                40: 29,
                                41: 30,
                                42: 31,
                                43: 32,
                                44: 33,
                                45: 34,
                                46: 35,
                                47: u,
                                48: p,
                                49: d,
                                50: h,
                                51: f,
                                55: m,
                                56: g,
                                57: y,
                                58: v,
                                59: b,
                                60: x,
                                61: w,
                                62: _,
                                63: S,
                                64: E,
                                65: M,
                                66: I,
                                67: T,
                                68: C,
                                69: k,
                                70: D,
                                71: P,
                                72: L,
                                73: A,
                                74: O,
                                75: F,
                                76: q,
                                77: N,
                                78: R,
                                79: B,
                                80: j,
                                81: V,
                                82: z,
                                83: U,
                                84: G,
                                85: H,
                                86: K,
                                87: W
                            }, {
                                1: [3]
                            }, {
                                5: [1, 77]
                            }, {
                                1: [2, 2]
                            }, t(Y, [2, 5], {
                                8: 8,
                                9: 9,
                                7: 78,
                                10: n,
                                13: r,
                                15: i
                            }), t(Y, [2, 7], {
                                6: 4,
                                7: 5,
                                11: 6,
                                12: 7,
                                8: 8,
                                9: 9,
                                25: 10,
                                16: 11,
                                20: 12,
                                26: 13,
                                30: 19,
                                31: 20,
                                32: 21,
                                33: 22,
                                34: 23,
                                35: 24,
                                36: 25,
                                37: 26,
                                38: 27,
                                39: 28,
                                40: 29,
                                41: 30,
                                42: 31,
                                43: 32,
                                44: 33,
                                45: 34,
                                46: 35,
                                4: 79,
                                10: n,
                                13: r,
                                15: i,
                                17: o,
                                21: a,
                                23: s,
                                24: l,
                                28: c,
                                47: u,
                                48: p,
                                49: d,
                                50: h,
                                51: f,
                                55: m,
                                56: g,
                                57: y,
                                58: v,
                                59: b,
                                60: x,
                                61: w,
                                62: _,
                                63: S,
                                64: E,
                                65: M,
                                66: I,
                                67: T,
                                68: C,
                                69: k,
                                70: D,
                                71: P,
                                72: L,
                                73: A,
                                74: O,
                                75: F,
                                76: q,
                                77: N,
                                78: R,
                                79: B,
                                80: j,
                                81: V,
                                82: z,
                                83: U,
                                84: G,
                                85: H,
                                86: K,
                                87: W
                            }), t(X, [2, 33], {
                                11: 6,
                                12: 7,
                                25: 10,
                                16: 11,
                                20: 12,
                                26: 13,
                                30: 19,
                                31: 20,
                                32: 21,
                                33: 22,
                                34: 23,
                                35: 24,
                                36: 25,
                                37: 26,
                                38: 27,
                                39: 28,
                                40: 29,
                                41: 30,
                                42: 31,
                                43: 32,
                                44: 33,
                                45: 34,
                                46: 35,
                                6: 80,
                                17: o,
                                21: a,
                                23: s,
                                24: l,
                                28: c,
                                47: u,
                                48: p,
                                49: d,
                                50: h,
                                51: f,
                                55: m,
                                56: g,
                                57: y,
                                58: v,
                                59: b,
                                60: x,
                                61: w,
                                62: _,
                                63: S,
                                64: E,
                                65: M,
                                66: I,
                                67: T,
                                68: C,
                                69: k,
                                70: D,
                                71: P,
                                72: L,
                                73: A,
                                74: O,
                                75: F,
                                76: q,
                                77: N,
                                78: R,
                                79: B,
                                80: j,
                                81: V,
                                82: z,
                                83: U,
                                84: G,
                                85: H,
                                86: K,
                                87: W
                            }), t(X, [2, 34], {
                                11: 6,
                                12: 7,
                                25: 10,
                                16: 11,
                                20: 12,
                                26: 13,
                                30: 19,
                                31: 20,
                                32: 21,
                                33: 22,
                                34: 23,
                                35: 24,
                                36: 25,
                                37: 26,
                                38: 27,
                                39: 28,
                                40: 29,
                                41: 30,
                                42: 31,
                                43: 32,
                                44: 33,
                                45: 34,
                                46: 35,
                                6: 81,
                                17: o,
                                21: a,
                                23: s,
                                24: l,
                                28: c,
                                47: u,
                                48: p,
                                49: d,
                                50: h,
                                51: f,
                                55: m,
                                56: g,
                                57: y,
                                58: v,
                                59: b,
                                60: x,
                                61: w,
                                62: _,
                                63: S,
                                64: E,
                                65: M,
                                66: I,
                                67: T,
                                68: C,
                                69: k,
                                70: D,
                                71: P,
                                72: L,
                                73: A,
                                74: O,
                                75: F,
                                76: q,
                                77: N,
                                78: R,
                                79: B,
                                80: j,
                                81: V,
                                82: z,
                                83: U,
                                84: G,
                                85: H,
                                86: K,
                                87: W
                            }), t($, [2, 8]), t($, [2, 9]), t($, [2, 28]), t($, [2, 29]), t($, [2, 30]), {
                                4: 82,
                                6: 4,
                                7: 5,
                                8: 8,
                                9: 9,
                                10: n,
                                11: 6,
                                12: 7,
                                13: r,
                                15: i,
                                16: 11,
                                17: o,
                                20: 12,
                                21: a,
                                23: s,
                                24: l,
                                25: 10,
                                26: 13,
                                27: 83,
                                28: c,
                                30: 19,
                                31: 20,
                                32: 21,
                                33: 22,
                                34: 23,
                                35: 24,
                                36: 25,
                                37: 26,
                                38: 27,
                                39: 28,
                                40: 29,
                                41: 30,
                                42: 31,
                                43: 32,
                                44: 33,
                                45: 34,
                                46: 35,
                                47: u,
                                48: p,
                                49: d,
                                50: h,
                                51: f,
                                52: Q,
                                53: Z,
                                54: J,
                                55: m,
                                56: g,
                                57: y,
                                58: v,
                                59: b,
                                60: x,
                                61: w,
                                62: _,
                                63: S,
                                64: E,
                                65: M,
                                66: I,
                                67: T,
                                68: C,
                                69: k,
                                70: D,
                                71: P,
                                72: L,
                                73: A,
                                74: O,
                                75: F,
                                76: q,
                                77: N,
                                78: R,
                                79: B,
                                80: j,
                                81: V,
                                82: z,
                                83: U,
                                84: G,
                                85: H,
                                86: K,
                                87: W
                            }, {
                                4: 87,
                                6: 4,
                                7: 5,
                                8: 8,
                                9: 9,
                                10: n,
                                11: 6,
                                12: 7,
                                13: r,
                                15: i,
                                16: 11,
                                17: o,
                                20: 12,
                                21: a,
                                23: s,
                                24: l,
                                25: 10,
                                26: 13,
                                28: c,
                                29: [1, 88],
                                30: 19,
                                31: 20,
                                32: 21,
                                33: 22,
                                34: 23,
                                35: 24,
                                36: 25,
                                37: 26,
                                38: 27,
                                39: 28,
                                40: 29,
                                41: 30,
                                42: 31,
                                43: 32,
                                44: 33,
                                45: 34,
                                46: 35,
                                47: u,
                                48: p,
                                49: d,
                                50: h,
                                51: f,
                                55: m,
                                56: g,
                                57: y,
                                58: v,
                                59: b,
                                60: x,
                                61: w,
                                62: _,
                                63: S,
                                64: E,
                                65: M,
                                66: I,
                                67: T,
                                68: C,
                                69: k,
                                70: D,
                                71: P,
                                72: L,
                                73: A,
                                74: O,
                                75: F,
                                76: q,
                                77: N,
                                78: R,
                                79: B,
                                80: j,
                                81: V,
                                82: z,
                                83: U,
                                84: G,
                                85: H,
                                86: K,
                                87: W
                            }, {
                                9: 91,
                                11: 89,
                                12: 90,
                                13: r,
                                15: i,
                                16: 11,
                                17: o,
                                20: 12,
                                21: a,
                                23: s,
                                24: l,
                                25: 10,
                                26: 13,
                                28: c,
                                30: 19,
                                31: 20,
                                32: 21,
                                33: 22,
                                34: 23,
                                35: 24,
                                36: 25,
                                37: 26,
                                38: 27,
                                39: 28,
                                40: 29,
                                41: 30,
                                42: 31,
                                43: 32,
                                44: 33,
                                45: 34,
                                46: 35,
                                47: u,
                                48: p,
                                49: d,
                                50: h,
                                51: f,
                                55: m,
                                56: g,
                                57: y,
                                58: v,
                                59: b,
                                60: x,
                                61: w,
                                62: _,
                                63: S,
                                64: E,
                                65: M,
                                66: I,
                                67: T,
                                68: C,
                                69: k,
                                70: D,
                                71: P,
                                72: L,
                                73: A,
                                74: O,
                                75: F,
                                76: q,
                                77: N,
                                78: R,
                                79: B,
                                80: j,
                                81: V,
                                82: z,
                                83: U,
                                84: G,
                                85: H,
                                86: K,
                                87: W
                            }, {
                                11: 92,
                                12: 93,
                                14: [1, 94],
                                16: 11,
                                17: o,
                                20: 12,
                                21: a,
                                23: s,
                                24: l,
                                25: 10,
                                26: 13,
                                28: c,
                                30: 19,
                                31: 20,
                                32: 21,
                                33: 22,
                                34: 23,
                                35: 24,
                                36: 25,
                                37: 26,
                                38: 27,
                                39: 28,
                                40: 29,
                                41: 30,
                                42: 31,
                                43: 32,
                                44: 33,
                                45: 34,
                                46: 35,
                                47: u,
                                48: p,
                                49: d,
                                50: h,
                                51: f,
                                55: m,
                                56: g,
                                57: y,
                                58: v,
                                59: b,
                                60: x,
                                61: w,
                                62: _,
                                63: S,
                                64: E,
                                65: M,
                                66: I,
                                67: T,
                                68: C,
                                69: k,
                                70: D,
                                71: P,
                                72: L,
                                73: A,
                                74: O,
                                75: F,
                                76: q,
                                77: N,
                                78: R,
                                79: B,
                                80: j,
                                81: V,
                                82: z,
                                83: U,
                                84: G,
                                85: H,
                                86: K,
                                87: W
                            }, {
                                4: 95,
                                6: 4,
                                7: 5,
                                8: 8,
                                9: 9,
                                10: n,
                                11: 6,
                                12: 7,
                                13: r,
                                14: [1, 96],
                                15: i,
                                16: 11,
                                17: o,
                                20: 12,
                                21: a,
                                23: s,
                                24: l,
                                25: 10,
                                26: 13,
                                28: c,
                                30: 19,
                                31: 20,
                                32: 21,
                                33: 22,
                                34: 23,
                                35: 24,
                                36: 25,
                                37: 26,
                                38: 27,
                                39: 28,
                                40: 29,
                                41: 30,
                                42: 31,
                                43: 32,
                                44: 33,
                                45: 34,
                                46: 35,
                                47: u,
                                48: p,
                                49: d,
                                50: h,
                                51: f,
                                55: m,
                                56: g,
                                57: y,
                                58: v,
                                59: b,
                                60: x,
                                61: w,
                                62: _,
                                63: S,
                                64: E,
                                65: M,
                                66: I,
                                67: T,
                                68: C,
                                69: k,
                                70: D,
                                71: P,
                                72: L,
                                73: A,
                                74: O,
                                75: F,
                                76: q,
                                77: N,
                                78: R,
                                79: B,
                                80: j,
                                81: V,
                                82: z,
                                83: U,
                                84: G,
                                85: H,
                                86: K,
                                87: W
                            }, t($, [2, 39], {
                                22: [1, 97]
                            }), t($, [2, 40]), t($, [2, 41]), t($, [2, 42]), t($, [2, 43]), t($, [2, 44]), t($, [2, 45]), t($, [2, 46]), t($, [2, 47]), t($, [2, 48]), t($, [2, 49]), t($, [2, 50]), t($, [2, 51]), t($, [2, 52]), t($, [2, 53]), t($, [2, 54]), t($, [2, 55]), t($, [2, 56]), {
                                4: 98,
                                6: 4,
                                7: 5,
                                8: 8,
                                9: 9,
                                10: n,
                                11: 6,
                                12: 7,
                                13: r,
                                15: i,
                                16: 11,
                                17: o,
                                18: [1, 99],
                                19: [1, 100],
                                20: 12,
                                21: a,
                                23: s,
                                24: l,
                                25: 10,
                                26: 13,
                                28: c,
                                30: 19,
                                31: 20,
                                32: 21,
                                33: 22,
                                34: 23,
                                35: 24,
                                36: 25,
                                37: 26,
                                38: 27,
                                39: 28,
                                40: 29,
                                41: 30,
                                42: 31,
                                43: 32,
                                44: 33,
                                45: 34,
                                46: 35,
                                47: u,
                                48: p,
                                49: d,
                                50: h,
                                51: f,
                                55: m,
                                56: g,
                                57: y,
                                58: v,
                                59: b,
                                60: x,
                                61: w,
                                62: _,
                                63: S,
                                64: E,
                                65: M,
                                66: I,
                                67: T,
                                68: C,
                                69: k,
                                70: D,
                                71: P,
                                72: L,
                                73: A,
                                74: O,
                                75: F,
                                76: q,
                                77: N,
                                78: R,
                                79: B,
                                80: j,
                                81: V,
                                82: z,
                                83: U,
                                84: G,
                                85: H,
                                86: K,
                                87: W
                            }, t($, [2, 26]), t($, [2, 27]), t(ee, [2, 59]), t(ee, [2, 60]), t(ee, [2, 61]), t($, [2, 66]), t($, [2, 67]), t($, [2, 68]), t($, [2, 69]), t($, [2, 57]), t($, [2, 58]), t($, [2, 91]), t($, [2, 92]), t($, [2, 93]), t($, [2, 94]), t($, [2, 95]), t($, [2, 97]), t($, [2, 70]), t($, [2, 71]), t($, [2, 65]), t($, [2, 72]), t($, [2, 73]), t($, [2, 74]), t($, [2, 75]), t($, [2, 76]), t($, [2, 77]), t($, [2, 78]), t($, [2, 79]), t($, [2, 80]), t($, [2, 81]), t($, [2, 82]), t($, [2, 83]), t($, [2, 84]), t($, [2, 85]), t($, [2, 86]), t($, [2, 87]), t($, [2, 88]), t($, [2, 89]), t($, [2, 90]), t($, [2, 96]), {
                                1: [2, 1]
                            }, t(Y, [2, 4], {
                                6: 4,
                                7: 5,
                                11: 6,
                                12: 7,
                                8: 8,
                                9: 9,
                                25: 10,
                                16: 11,
                                20: 12,
                                26: 13,
                                30: 19,
                                31: 20,
                                32: 21,
                                33: 22,
                                34: 23,
                                35: 24,
                                36: 25,
                                37: 26,
                                38: 27,
                                39: 28,
                                40: 29,
                                41: 30,
                                42: 31,
                                43: 32,
                                44: 33,
                                45: 34,
                                46: 35,
                                4: 101,
                                10: n,
                                13: r,
                                15: i,
                                17: o,
                                21: a,
                                23: s,
                                24: l,
                                28: c,
                                47: u,
                                48: p,
                                49: d,
                                50: h,
                                51: f,
                                55: m,
                                56: g,
                                57: y,
                                58: v,
                                59: b,
                                60: x,
                                61: w,
                                62: _,
                                63: S,
                                64: E,
                                65: M,
                                66: I,
                                67: T,
                                68: C,
                                69: k,
                                70: D,
                                71: P,
                                72: L,
                                73: A,
                                74: O,
                                75: F,
                                76: q,
                                77: N,
                                78: R,
                                79: B,
                                80: j,
                                81: V,
                                82: z,
                                83: U,
                                84: G,
                                85: H,
                                86: K,
                                87: W
                            }), t(Y, [2, 6]), t(X, [2, 31]), t(X, [2, 32]), {
                                27: 102,
                                52: Q,
                                53: Z,
                                54: J
                            }, t($, [2, 36]), t($, [2, 62]), t($, [2, 63]), t($, [2, 64]), {
                                29: [1, 103]
                            }, t($, [2, 38]), t($, [2, 10]), t($, [2, 11]), t($, [2, 12]), {
                                4: 104,
                                6: 4,
                                7: 5,
                                8: 8,
                                9: 9,
                                10: n,
                                11: 6,
                                12: 7,
                                13: r,
                                14: [1, 105],
                                15: i,
                                16: 11,
                                17: o,
                                20: 12,
                                21: a,
                                23: s,
                                24: l,
                                25: 10,
                                26: 13,
                                28: c,
                                30: 19,
                                31: 20,
                                32: 21,
                                33: 22,
                                34: 23,
                                35: 24,
                                36: 25,
                                37: 26,
                                38: 27,
                                39: 28,
                                40: 29,
                                41: 30,
                                42: 31,
                                43: 32,
                                44: 33,
                                45: 34,
                                46: 35,
                                47: u,
                                48: p,
                                49: d,
                                50: h,
                                51: f,
                                55: m,
                                56: g,
                                57: y,
                                58: v,
                                59: b,
                                60: x,
                                61: w,
                                62: _,
                                63: S,
                                64: E,
                                65: M,
                                66: I,
                                67: T,
                                68: C,
                                69: k,
                                70: D,
                                71: P,
                                72: L,
                                73: A,
                                74: O,
                                75: F,
                                76: q,
                                77: N,
                                78: R,
                                79: B,
                                80: j,
                                81: V,
                                82: z,
                                83: U,
                                84: G,
                                85: H,
                                86: K,
                                87: W
                            }, {
                                4: 107,
                                6: 4,
                                7: 5,
                                8: 8,
                                9: 9,
                                10: n,
                                11: 6,
                                12: 7,
                                13: r,
                                14: [1, 106],
                                15: i,
                                16: 11,
                                17: o,
                                20: 12,
                                21: a,
                                23: s,
                                24: l,
                                25: 10,
                                26: 13,
                                28: c,
                                30: 19,
                                31: 20,
                                32: 21,
                                33: 22,
                                34: 23,
                                35: 24,
                                36: 25,
                                37: 26,
                                38: 27,
                                39: 28,
                                40: 29,
                                41: 30,
                                42: 31,
                                43: 32,
                                44: 33,
                                45: 34,
                                46: 35,
                                47: u,
                                48: p,
                                49: d,
                                50: h,
                                51: f,
                                55: m,
                                56: g,
                                57: y,
                                58: v,
                                59: b,
                                60: x,
                                61: w,
                                62: _,
                                63: S,
                                64: E,
                                65: M,
                                66: I,
                                67: T,
                                68: C,
                                69: k,
                                70: D,
                                71: P,
                                72: L,
                                73: A,
                                74: O,
                                75: F,
                                76: q,
                                77: N,
                                78: R,
                                79: B,
                                80: j,
                                81: V,
                                82: z,
                                83: U,
                                84: G,
                                85: H,
                                86: K,
                                87: W
                            }, t($, [2, 16]), {
                                14: [1, 108]
                            }, t($, [2, 19]), t($, [2, 25]), {
                                18: [1, 109]
                            }, {
                                4: 110,
                                6: 4,
                                7: 5,
                                8: 8,
                                9: 9,
                                10: n,
                                11: 6,
                                12: 7,
                                13: r,
                                15: i,
                                16: 11,
                                17: o,
                                19: [1, 111],
                                20: 12,
                                21: a,
                                23: s,
                                24: l,
                                25: 10,
                                26: 13,
                                28: c,
                                30: 19,
                                31: 20,
                                32: 21,
                                33: 22,
                                34: 23,
                                35: 24,
                                36: 25,
                                37: 26,
                                38: 27,
                                39: 28,
                                40: 29,
                                41: 30,
                                42: 31,
                                43: 32,
                                44: 33,
                                45: 34,
                                46: 35,
                                47: u,
                                48: p,
                                49: d,
                                50: h,
                                51: f,
                                55: m,
                                56: g,
                                57: y,
                                58: v,
                                59: b,
                                60: x,
                                61: w,
                                62: _,
                                63: S,
                                64: E,
                                65: M,
                                66: I,
                                67: T,
                                68: C,
                                69: k,
                                70: D,
                                71: P,
                                72: L,
                                73: A,
                                74: O,
                                75: F,
                                76: q,
                                77: N,
                                78: R,
                                79: B,
                                80: j,
                                81: V,
                                82: z,
                                83: U,
                                84: G,
                                85: H,
                                86: K,
                                87: W
                            }, t($, [2, 24]), t(Y, [2, 3]), t($, [2, 35]), t($, [2, 37]), {
                                14: [1, 112]
                            }, t($, [2, 15]), t($, [2, 14]), {
                                14: [1, 113]
                            }, t($, [2, 18]), {
                                4: 114,
                                6: 4,
                                7: 5,
                                8: 8,
                                9: 9,
                                10: n,
                                11: 6,
                                12: 7,
                                13: r,
                                15: i,
                                16: 11,
                                17: o,
                                19: [1, 115],
                                20: 12,
                                21: a,
                                23: s,
                                24: l,
                                25: 10,
                                26: 13,
                                28: c,
                                30: 19,
                                31: 20,
                                32: 21,
                                33: 22,
                                34: 23,
                                35: 24,
                                36: 25,
                                37: 26,
                                38: 27,
                                39: 28,
                                40: 29,
                                41: 30,
                                42: 31,
                                43: 32,
                                44: 33,
                                45: 34,
                                46: 35,
                                47: u,
                                48: p,
                                49: d,
                                50: h,
                                51: f,
                                55: m,
                                56: g,
                                57: y,
                                58: v,
                                59: b,
                                60: x,
                                61: w,
                                62: _,
                                63: S,
                                64: E,
                                65: M,
                                66: I,
                                67: T,
                                68: C,
                                69: k,
                                70: D,
                                71: P,
                                72: L,
                                73: A,
                                74: O,
                                75: F,
                                76: q,
                                77: N,
                                78: R,
                                79: B,
                                80: j,
                                81: V,
                                82: z,
                                83: U,
                                84: G,
                                85: H,
                                86: K,
                                87: W
                            }, {
                                19: [1, 116]
                            }, t($, [2, 23]), t($, [2, 13]), t($, [2, 17]), {
                                19: [1, 117]
                            }, t($, [2, 21]), t($, [2, 22]), t($, [2, 20])],
                            defaultActions: {
                                3: [2, 2],
                                77: [2, 1]
                            },
                            parseError: function(e, t) {
                                if (!t.recoverable) {
                                    var n = new Error(e);
                                    throw n.hash = t, n
                                }
                                this.trace(e)
                            },
                            parse: function(e) {
                                var t = this,
                                    n = [0],
                                    r = [null],
                                    i = [],
                                    o = this.table,
                                    a = "",
                                    s = 0,
                                    l = 0,
                                    c = 0,
                                    u = i.slice.call(arguments, 1),
                                    p = Object.create(this.lexer),
                                    d = {
                                        yy: {}
                                    };
                                for (var h in this.yy) Object.prototype.hasOwnProperty.call(this.yy, h) && (d.yy[h] = this.yy[h]);
                                p.setInput(e, d.yy), d.yy.lexer = p, d.yy.parser = this, void 0 === p.yylloc && (p.yylloc = {});
                                var f = p.yylloc;
                                i.push(f);
                                var m = p.options && p.options.ranges;
                                "function" == typeof d.yy.parseError ? this.parseError = d.yy.parseError : this.parseError = Object.getPrototypeOf(this).parseError;
                                for (var g, y, v, b, x, w, _, S, E, M = function() {
                                        var e;
                                        return e = p.lex() || 1, "number" != typeof e && (e = t.symbols_[e] || e), e
                                    }, I = {};;) {
                                    if (v = n[n.length - 1], this.defaultActions[v] ? b = this.defaultActions[v] : (null !== g && void 0 !== g || (g = M()), b = o[v] && o[v][g]), void 0 === b || !b.length || !b[0]) {
                                        var T = "";
                                        E = [];
                                        for (w in o[v]) this.terminals_[w] && w > 2 && E.push("'" + this.terminals_[w] + "'");
                                        T = p.showPosition ? "Parse error on line " + (s + 1) + ":\n" + p.showPosition() + "\nExpecting " + E.join(", ") + ", got '" + (this.terminals_[g] || g) + "'" : "Parse error on line " + (s + 1) + ": Unexpected " + (1 == g ? "end of input" : "'" + (this.terminals_[g] || g) + "'"), this.parseError(T, {
                                            text: p.match,
                                            token: this.terminals_[g] || g,
                                            line: p.yylineno,
                                            loc: f,
                                            expected: E
                                        })
                                    }
                                    if (b[0] instanceof Array && b.length > 1) throw new Error("Parse Error: multiple actions possible at state: " + v + ", token: " + g);
                                    switch (b[0]) {
                                        case 1:
                                            n.push(g), r.push(p.yytext), i.push(p.yylloc), n.push(b[1]), g = null, y ? (g = y, y = null) : (l = p.yyleng, a = p.yytext, s = p.yylineno, f = p.yylloc, c > 0 && c--);
                                            break;
                                        case 2:
                                            if (_ = this.productions_[b[1]][1], I.$ = r[r.length - _], I._$ = {
                                                    first_line: i[i.length - (_ || 1)].first_line,
                                                    last_line: i[i.length - 1].last_line,
                                                    first_column: i[i.length - (_ || 1)].first_column,
                                                    last_column: i[i.length - 1].last_column
                                                }, m && (I._$.range = [i[i.length - (_ || 1)].range[0], i[i.length - 1].range[1]]), void 0 !== (x = this.performAction.apply(I, [a, l, s, d.yy, b[1], r, i].concat(u)))) return x;
                                            _ && (n = n.slice(0, -1 * _ * 2), r = r.slice(0, -1 * _), i = i.slice(0, -1 * _)), n.push(this.productions_[b[1]][0]), r.push(I.$), i.push(I._$), S = o[n[n.length - 2]][n[n.length - 1]], n.push(S);
                                            break;
                                        case 3:
                                            return !0
                                    }
                                }
                                return !0
                            }
                        },
                        ne = function() {
                            return {
                                EOF: 1,
                                parseError: function(e, t) {
                                    if (!this.yy.parser) throw new Error(e);
                                    this.yy.parser.parseError(e, t)
                                },
                                setInput: function(e, t) {
                                    return this.yy = t || this.yy || {}, this._input = e, this._more = this._backtrack = this.done = !1, this.yylineno = this.yyleng = 0, this.yytext = this.matched = this.match = "", this.conditionStack = ["INITIAL"], this.yylloc = {
                                        first_line: 1,
                                        first_column: 0,
                                        last_line: 1,
                                        last_column: 0
                                    }, this.options.ranges && (this.yylloc.range = [0, 0]), this.offset = 0, this
                                },
                                input: function() {
                                    var e = this._input[0];
                                    return this.yytext += e, this.yyleng++, this.offset++, this.match += e, this.matched += e, e.match(/(?:\r\n?|\n).*/g) ? (this.yylineno++, this.yylloc.last_line++) : this.yylloc.last_column++, this.options.ranges && this.yylloc.range[1]++, this._input = this._input.slice(1), e
                                },
                                unput: function(e) {
                                    var t = e.length,
                                        n = e.split(/(?:\r\n?|\n)/g);
                                    this._input = e + this._input, this.yytext = this.yytext.substr(0, this.yytext.length - t), this.offset -= t;
                                    var r = this.match.split(/(?:\r\n?|\n)/g);
                                    this.match = this.match.substr(0, this.match.length - 1), this.matched = this.matched.substr(0, this.matched.length - 1), n.length - 1 && (this.yylineno -= n.length - 1);
                                    var i = this.yylloc.range;
                                    return this.yylloc = {
                                        first_line: this.yylloc.first_line,
                                        last_line: this.yylineno + 1,
                                        first_column: this.yylloc.first_column,
                                        last_column: n ? (n.length === r.length ? this.yylloc.first_column : 0) + r[r.length - n.length].length - n[0].length : this.yylloc.first_column - t
                                    }, this.options.ranges && (this.yylloc.range = [i[0], i[0] + this.yyleng - t]), this.yyleng = this.yytext.length, this
                                },
                                more: function() {
                                    return this._more = !0, this
                                },
                                reject: function() {
                                    return this.options.backtrack_lexer ? (this._backtrack = !0, this) : this.parseError("Lexical error on line " + (this.yylineno + 1) + ". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n" + this.showPosition(), {
                                        text: "",
                                        token: null,
                                        line: this.yylineno
                                    })
                                },
                                less: function(e) {
                                    this.unput(this.match.slice(e))
                                },
                                pastInput: function() {
                                    var e = this.matched.substr(0, this.matched.length - this.match.length);
                                    return (e.length > 20 ? "..." : "") + e.substr(-20).replace(/\n/g, "")
                                },
                                upcomingInput: function() {
                                    var e = this.match;
                                    return e.length < 20 && (e += this._input.substr(0, 20 - e.length)), (e.substr(0, 20) + (e.length > 20 ? "..." : "")).replace(/\n/g, "")
                                },
                                showPosition: function() {
                                    var e = this.pastInput(),
                                        t = new Array(e.length + 1).join("-");
                                    return e + this.upcomingInput() + "\n" + t + "^"
                                },
                                test_match: function(e, t) {
                                    var n, r, i;
                                    if (this.options.backtrack_lexer && (i = {
                                            yylineno: this.yylineno,
                                            yylloc: {
                                                first_line: this.yylloc.first_line,
                                                last_line: this.last_line,
                                                first_column: this.yylloc.first_column,
                                                last_column: this.yylloc.last_column
                                            },
                                            yytext: this.yytext,
                                            match: this.match,
                                            matches: this.matches,
                                            matched: this.matched,
                                            yyleng: this.yyleng,
                                            offset: this.offset,
                                            _more: this._more,
                                            _input: this._input,
                                            yy: this.yy,
                                            conditionStack: this.conditionStack.slice(0),
                                            done: this.done
                                        }, this.options.ranges && (i.yylloc.range = this.yylloc.range.slice(0))), r = e[0].match(/(?:\r\n?|\n).*/g), r && (this.yylineno += r.length), this.yylloc = {
                                            first_line: this.yylloc.last_line,
                                            last_line: this.yylineno + 1,
                                            first_column: this.yylloc.last_column,
                                            last_column: r ? r[r.length - 1].length - r[r.length - 1].match(/\r?\n?/)[0].length : this.yylloc.last_column + e[0].length
                                        }, this.yytext += e[0], this.match += e[0], this.matches = e, this.yyleng = this.yytext.length, this.options.ranges && (this.yylloc.range = [this.offset, this.offset += this.yyleng]), this._more = !1, this._backtrack = !1, this._input = this._input.slice(e[0].length), this.matched += e[0], n = this.performAction.call(this, this.yy, this, t, this.conditionStack[this.conditionStack.length - 1]), this.done && this._input && (this.done = !1), n) return n;
                                    if (this._backtrack) {
                                        for (var o in i) this[o] = i[o];
                                        return !1
                                    }
                                    return !1
                                },
                                next: function() {
                                    if (this.done) return this.EOF;
                                    this._input || (this.done = !0);
                                    var e, t, n, r;
                                    this._more || (this.yytext = "", this.match = "");
                                    for (var i = this._currentRules(), o = 0; o < i.length; o++)
                                        if ((n = this._input.match(this.rules[i[o]])) && (!t || n[0].length > t[0].length)) {
                                            if (t = n, r = o, this.options.backtrack_lexer) {
                                                if (!1 !== (e = this.test_match(n, i[o]))) return e;
                                                if (this._backtrack) {
                                                    t = !1;
                                                    continue
                                                }
                                                return !1
                                            }
                                            if (!this.options.flex) break
                                        } return t ? !1 !== (e = this.test_match(t, i[r])) && e : "" === this._input ? this.EOF : this.parseError("Lexical error on line " + (this.yylineno + 1) + ". Unrecognized text.\n" + this.showPosition(), {
                                        text: "",
                                        token: null,
                                        line: this.yylineno
                                    })
                                },
                                lex: function() {
                                    var e = this.next();
                                    return e || this.lex()
                                },
                                begin: function(e) {
                                    this.conditionStack.push(e)
                                },
                                popState: function() {
                                    return this.conditionStack.length - 1 > 0 ? this.conditionStack.pop() : this.conditionStack[0]
                                },
                                _currentRules: function() {
                                    return this.conditionStack.length && this.conditionStack[this.conditionStack.length - 1] ? this.conditions[this.conditionStack[this.conditionStack.length - 1]].rules : this.conditions.INITIAL.rules
                                },
                                topState: function(e) {
                                    return e = this.conditionStack.length - 1 - Math.abs(e || 0), e >= 0 ? this.conditionStack[e] : "INITIAL"
                                },
                                pushState: function(e) {
                                    this.begin(e)
                                },
                                stateStackSize: function() {
                                    return this.conditionStack.length
                                },
                                options: {},
                                performAction: function(e, t, n, r) {
                                    switch (n) {
                                        case 0:
                                            return void this.begin("captext");
                                        case 1:
                                            return 58;
                                        case 2:
                                            return this.popState(), 58;
                                        case 3:
                                            return 62;
                                        case 4:
                                            return 63;
                                        case 5:
                                            return 64;
                                        case 6:
                                            return 65;
                                        case 7:
                                            return 66;
                                        case 8:
                                            return 67;
                                        case 9:
                                            return 49;
                                        case 10:
                                            return 50;
                                        case 11:
                                            return 51;
                                        case 12:
                                            return 52;
                                        case 13:
                                            return 53;
                                        case 14:
                                            return 54;
                                        case 15:
                                            return 71;
                                        case 16:
                                            return 74;
                                        case 17:
                                            return 75;
                                        case 18:
                                            return 76;
                                        case 19:
                                            return 70;
                                        case 20:
                                            return 72;
                                        case 21:
                                            return 73;
                                        case 22:
                                            return 77;
                                        case 23:
                                            return 69;
                                        case 24:
                                            return 80;
                                        case 25:
                                            return 13;
                                        case 26:
                                            return 15;
                                        case 27:
                                            return 14;
                                        case 28:
                                            return 10;
                                        case 29:
                                            return 28;
                                        case 30:
                                            return 29;
                                        case 31:
                                            return 83;
                                        case 32:
                                            return 84;
                                        case 33:
                                            return 85;
                                        case 34:
                                            return 17;
                                        case 35:
                                            return 18;
                                        case 36:
                                            return 19;
                                        case 37:
                                            return 78;
                                        case 38:
                                            return 79;
                                        case 39:
                                            return 82;
                                        case 40:
                                            return t.yytext = this.matches[1], 21;
                                        case 41:
                                            return t.yytext = this.matches[1], 22;
                                        case 42:
                                            return t.yytext = this.matches[1], 24;
                                        case 43:
                                            return 68;
                                        case 44:
                                            return 47;
                                        case 45:
                                            return 48;
                                        case 46:
                                            return 86;
                                        case 47:
                                            return 61;
                                        case 48:
                                            return 60;
                                        case 49:
                                            return 81;
                                        case 50:
                                        case 51:
                                            return 56;
                                        case 52:
                                            return 57;
                                        case 53:
                                            return t.yytext = this.matches[1], 58;
                                        case 54:
                                            return 59;
                                        case 55:
                                            return;
                                        case 56:
                                            return 87;
                                        case 57:
                                            return;
                                        case 58:
                                            return 55;
                                        case 59:
                                            return 5
                                    }
                                },
                                rules: [/^(?:([,][,])(?=[A-Z]))/, /^(?:[A-Z](?=[A-Z]))/, /^(?:[A-Z])/, /^(?:["][6])/, /^(?:["][-])/, /^(?:["][4])/, /^(?:["][8])/, /^(?:["][9])/, /^(?:["][\/])/, /^(?:[.][<])/, /^(?:[_][<])/, /^(?:["][<])/, /^(?:[.][>])/, /^(?:[_][>])/, /^(?:["][>])/, /^(?:["][7][@][:])/, /^(?:[_][@][<])/, /^(?:[\^][9])/, /^(?:[_][@][>])/, /^(?:["][7])/, /^(?:[@][<])/, /^(?:[@][>])/, /^(?:[@][9])/, /^(?:[.][0])/, /^(?:[4][4][4])/, /^(?:[%][9])/, /^(?:[%])/, /^(?:[\+])/, /^(?:[95]+)/, /^(?:[<])/, /^(?:[>])/, /^(?:!)/, /^(?:[6])/, /^(?:[@]&)/, /^(?:[(])/, /^(?:[.][\/])/, /^(?:[)])/, /^(?:#[L])/, /^(?:#-)/, /^(?:#=)/, /^(?:#([A-J4]+))/, /^(?:[\/]([A-J4]+))/, /^(?:[#][\/]([A-J4]+))/, /^(?:[_]?[\/])/, /^(?:[1])/, /^(?:[4])/, /^(?:[7]+)/, /^(?:[_][\\][_][\\])/, /^(?:[_][\\])/, /^(?:[3])/, /^(?:(ARC)?(SIN|COS|TAN|CSC|SEC|COT)(H)?)/, /^(?:(ARG|DET|EXP|IM|INF|LIM|LN|LOG|MAX|MIN|MOD|RE|SUP))/, /^(?:[,]?[.][ABGDEZ\?\:IKLMNXOPRSTUYF\&W])/, /^(?:[,]([A-Z]))/, /^(?:[A-Z])/, /^(?:[,]['])/, /^(?:[8])/, /^(?:[;])/, /^(?:[ ])/, /^(?:$)/],
                                conditions: {
                                    captext: {
                                        rules: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59],
                                        inclusive: !0
                                    },
                                    INITIAL: {
                                        rules: [0, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59],
                                        inclusive: !0
                                    }
                                }
                            }
                        }();
                    return te.lexer = ne, e.prototype = te, te.Parser = e, new e
                }();
                t.parser = i, t.Parser = i.Parser, t.parse = function() {
                    return i.parse.apply(i, arguments)
                }, t.main = function(r) {
                    r[1] || (console.log("Usage: " + r[0] + " FILE"), e.exit(1));
                    var i = n(4).readFileSync(n(5).normalize(r[1]), "utf8");
                    return t.parser.parse(i)
                }, void 0 !== r && n.c[n.s] === r && t.main(e.argv.slice(1))
            }).call(t, n(1), n(8)(e))
        }, function(e, t, n) {
            function r(e) {
                for (var t = [], n = 0; n < e.length; n++) {
                    var p = e[n];
                    switch (p.type) {
                        case "command":
                            var d = p.value.slice(1).trim();
                            c.hasOwnProperty(p.value) ? t.push(s.command(c[p.value])) : a.containsValue(d) ? t.push(s.typeform("operator_name", i(d))) : u[p.value] || t.push(p);
                            break;
                        case "level":
                            var h = {
                                subscript: p.subscript && p.subscript.length > 0 ? r(p.subscript) : void 0,
                                superscript: p.superscript && p.superscript.length > 0 ? r(p.superscript) : void 0,
                                type: p.type
                            };
                            (h.subscript || h.superscript) && t.push(h);
                            break;
                        case "fraction":
                            t.push({
                                denominator: r(p.denominator),
                                numerator: r(p.numerator),
                                type: p.type
                            });
                            break;
                        case "radical":
                            t.push({
                                index: p.index ? r(p.index) : void 0,
                                radicand: r(p.radicand),
                                type: p.type
                            });
                            break;
                        case "terminal":
                            o(e.slice(n)) ? (t.push({
                                type: "command",
                                value: "\\ldots"
                            }), n += 2) : t.push({
                                type: p.type,
                                value: l.hasOwnProperty(p.value) ? l[p.value] : p.value
                            });
                            break;
                        case "typeform":
                            t.push(p);
                            break;
                        case "greek":
                            t.push({
                                type: p.type,
                                value: l.hasOwnProperty(p.value) ? l[p.value] : p.value
                            });
                            break;
                        default:
                            throw new Error("Unexpected item:\n" + JSON.stringify({
                                group: e,
                                item: p
                            }))
                    }
                }
                return t
            }

            function i(e) {
                for (var t = [], n = 0, r = e; n < r.length; n++) {
                    var i = r[n];
                    t.push(s.terminal(i))
                }
                return t
            }

            function o(e) {
                for (var t = 0, n = 0; n < Math.min(3, e.length); n++) {
                    var r = e[n];
                    "terminal" === r.type && "." === r.value && t++
                }
                return 3 === t
            }
            Object.defineProperty(t, "__esModule", {
                value: !0
            });
            var a = n(2),
                s = n(7),
                l = {
                    "~": "\\ "
                },
                c = {
                    "\\,": "\\ ",
                    "\\Vert": "\\|",
                    "\\ge": "\\geq",
                    "\\le": "\\leq",
                    "\\vert": "|"
                },
                u = {
                    "\\space": !0
                };
            t.default = r
        }, function(e, t, n) {
            function r(e) {
                try {
                    return {
                        isError: !1,
                        value: o.parser.parse(e)
                    }
                } catch (e) {
                    return {
                        isError: !0,
                        error: i.default(e)
                    }
                }
            }
            Object.defineProperty(t, "__esModule", {
                value: !0
            });
            var i = n(6),
                o = n(13),
                a = n(7);
            o.parser.yy = a, t.default = r
        }, function(e, t, n) {
            (function(e, r) {
                var i = function() {
                    function e() {
                        this.yy = {}
                    }
                    var t = function(e, t, n, r) {
                            for (n = n || {}, r = e.length; r--; n[e[r]] = t);
                            return n
                        },
                        n = [1, 13],
                        r = [1, 14],
                        i = [1, 15],
                        o = [1, 16],
                        a = [1, 17],
                        s = [1, 20],
                        l = [1, 18],
                        c = [1, 19],
                        u = [1, 21],
                        p = [1, 22],
                        d = [1, 27],
                        h = [1, 29],
                        f = [1, 30],
                        m = [1, 31],
                        g = [1, 32],
                        y = [1, 28],
                        v = [5, 21, 26, 37],
                        b = [5, 19, 21, 22, 23, 24, 25, 26, 27, 31, 32, 33, 34, 35, 36, 37],
                        x = [5, 10, 12, 13, 14, 19, 21, 22, 23, 24, 25, 26, 27, 31, 32, 33, 34, 35, 36, 37],
                        w = [5, 10, 19, 21, 22, 23, 24, 25, 26, 27, 31, 32, 33, 34, 35, 36, 37],
                        _ = {
                            trace: function() {},
                            yy: {},
                            symbols_: {
                                error: 2,
                                sentence: 3,
                                group: 4,
                                EOF: 5,
                                level: 6,
                                expression: 7,
                                subscript: 8,
                                superscript: 9,
                                _: 10,
                                atom: 11,
                                "^": 12,
                                "PRIMES^": 13,
                                PRIMES: 14,
                                delimited_group: 15,
                                typeform: 16,
                                frac: 17,
                                radical: 18,
                                LEFT: 19,
                                delimiter: 20,
                                RIGHT: 21,
                                FRAC: 22,
                                OPERATOR_NAME: 23,
                                MATHRM: 24,
                                RADICAL_OPTARG: 25,
                                CLOSE_OPTARG: 26,
                                RADICAL: 27,
                                curly_group: 28,
                                greek: 29,
                                command: 30,
                                SYMBOL: 31,
                                DELIMITER: 32,
                                DELIMITER_COMMAND: 33,
                                GREEK: 34,
                                COMMAND: 35,
                                "{": 36,
                                "}": 37,
                                $accept: 0,
                                $end: 1
                            },
                            terminals_: {
                                2: "error",
                                5: "EOF",
                                10: "_",
                                12: "^",
                                13: "PRIMES^",
                                14: "PRIMES",
                                19: "LEFT",
                                21: "RIGHT",
                                22: "FRAC",
                                23: "OPERATOR_NAME",
                                24: "MATHRM",
                                25: "RADICAL_OPTARG",
                                26: "CLOSE_OPTARG",
                                27: "RADICAL",
                                31: "SYMBOL",
                                32: "DELIMITER",
                                33: "DELIMITER_COMMAND",
                                34: "GREEK",
                                35: "COMMAND",
                                36: "{",
                                37: "}"
                            },
                            productions_: [0, [3, 2],
                                [3, 1],
                                [4, 3],
                                [4, 2],
                                [4, 1],
                                [4, 2],
                                [4, 1],
                                [6, 2],
                                [6, 2],
                                [6, 1],
                                [6, 1],
                                [8, 2],
                                [9, 2],
                                [9, 2],
                                [9, 1],
                                [7, 1],
                                [7, 1],
                                [7, 1],
                                [7, 1],
                                [7, 1],
                                [15, 5],
                                [15, 4],
                                [17, 3],
                                [16, 2],
                                [16, 2],
                                [18, 4],
                                [18, 3],
                                [18, 2],
                                [18, 2],
                                [11, 1],
                                [11, 1],
                                [11, 1],
                                [11, 1],
                                [11, 1],
                                [20, 1],
                                [20, 1],
                                [29, 1],
                                [30, 1],
                                [28, 3],
                                [28, 2]
                            ],
                            performAction: function(e, t, n, r, i, o, a) {
                                var s = o.length - 1;
                                switch (i) {
                                    case 1:
                                        return o[s - 1];
                                    case 2:
                                        return r.group();
                                    case 3:
                                        this.$ = r.group(o[s - 2], o[s - 1], o[s]);
                                        break;
                                    case 4:
                                    case 6:
                                        this.$ = r.group(o[s - 1], o[s]);
                                        break;
                                    case 5:
                                    case 7:
                                        this.$ = r.group(o[s]);
                                        break;
                                    case 8:
                                        this.$ = r.level({
                                            _: r.group(o[s - 1]),
                                            "^": r.group(o[s])
                                        });
                                        break;
                                    case 9:
                                        this.$ = r.level({
                                            _: r.group(o[s]),
                                            "^": r.group(o[s - 1])
                                        });
                                        break;
                                    case 10:
                                        this.$ = r.level({
                                            "^": r.group(o[s])
                                        });
                                        break;
                                    case 11:
                                        this.$ = r.level({
                                            _: r.group(o[s])
                                        });
                                        break;
                                    case 12:
                                    case 13:
                                        this.$ = o[s];
                                        break;
                                    case 14:
                                        this.$ = r.processPrimes(o[s - 1], o[s]);
                                        break;
                                    case 15:
                                        this.$ = r.processPrimes(o[s], r.group());
                                        break;
                                    case 21:
                                        this.$ = r.group(o[s - 3], o[s - 2], o[s]);
                                        break;
                                    case 22:
                                        this.$ = r.group(o[s - 2], o[s]);
                                        break;
                                    case 23:
                                        this.$ = r.fraction(r.group(o[s - 1]), r.group(o[s]));
                                        break;
                                    case 24:
                                        this.$ = r.typeform("operator_name", r.group(o[s]));
                                        break;
                                    case 25:
                                        this.$ = r.typeform("mathrm", r.group(o[s]));
                                        break;
                                    case 26:
                                        this.$ = r.radical(o[s], r.group(o[s - 2]));
                                        break;
                                    case 27:
                                        this.$ = r.radical(r.group(o[s]), r.group());
                                        break;
                                    case 28:
                                    case 29:
                                        this.$ = r.radical(r.group(o[s]));
                                        break;
                                    case 34:
                                    case 35:
                                        this.$ = r.terminal(o[s]);
                                        break;
                                    case 36:
                                    case 38:
                                        this.$ = r.command(o[s]);
                                        break;
                                    case 37:
                                        this.$ = r.greek(o[s]);
                                        break;
                                    case 39:
                                        this.$ = o[s - 1];
                                        break;
                                    case 40:
                                        this.$ = r.group()
                                }
                            },
                            table: [{
                                3: 1,
                                4: 2,
                                5: [1, 3],
                                6: 4,
                                7: 5,
                                8: 6,
                                9: 7,
                                10: n,
                                11: 12,
                                12: r,
                                13: i,
                                14: o,
                                15: 8,
                                16: 9,
                                17: 10,
                                18: 11,
                                19: a,
                                20: 24,
                                22: s,
                                23: l,
                                24: c,
                                25: u,
                                27: p,
                                28: 23,
                                29: 25,
                                30: 26,
                                31: d,
                                32: h,
                                33: f,
                                34: m,
                                35: g,
                                36: y
                            }, {
                                1: [3]
                            }, {
                                5: [1, 33]
                            }, {
                                1: [2, 2]
                            }, t(v, [2, 5], {
                                15: 8,
                                16: 9,
                                17: 10,
                                18: 11,
                                11: 12,
                                28: 23,
                                20: 24,
                                29: 25,
                                30: 26,
                                7: 34,
                                19: a,
                                22: s,
                                23: l,
                                24: c,
                                25: u,
                                27: p,
                                31: d,
                                32: h,
                                33: f,
                                34: m,
                                35: g,
                                36: y
                            }), t(v, [2, 7], {
                                6: 4,
                                7: 5,
                                8: 6,
                                9: 7,
                                15: 8,
                                16: 9,
                                17: 10,
                                18: 11,
                                11: 12,
                                28: 23,
                                20: 24,
                                29: 25,
                                30: 26,
                                4: 35,
                                10: n,
                                12: r,
                                13: i,
                                14: o,
                                19: a,
                                22: s,
                                23: l,
                                24: c,
                                25: u,
                                27: p,
                                31: d,
                                32: h,
                                33: f,
                                34: m,
                                35: g,
                                36: y
                            }), t(b, [2, 11], {
                                9: 36,
                                12: r,
                                13: i,
                                14: o
                            }), t(b, [2, 10], {
                                8: 37,
                                10: n
                            }), t(x, [2, 16]), t(x, [2, 17]), t(x, [2, 18]), t(x, [2, 19]), t(x, [2, 20]), {
                                11: 38,
                                20: 24,
                                28: 23,
                                29: 25,
                                30: 26,
                                31: d,
                                32: h,
                                33: f,
                                34: m,
                                35: g,
                                36: y
                            }, {
                                11: 39,
                                20: 24,
                                28: 23,
                                29: 25,
                                30: 26,
                                31: d,
                                32: h,
                                33: f,
                                34: m,
                                35: g,
                                36: y
                            }, {
                                11: 40,
                                20: 24,
                                28: 23,
                                29: 25,
                                30: 26,
                                31: d,
                                32: h,
                                33: f,
                                34: m,
                                35: g,
                                36: y
                            }, t(w, [2, 15]), {
                                20: 41,
                                32: h,
                                33: f
                            }, {
                                11: 42,
                                20: 24,
                                28: 23,
                                29: 25,
                                30: 26,
                                31: d,
                                32: h,
                                33: f,
                                34: m,
                                35: g,
                                36: y
                            }, {
                                11: 43,
                                20: 24,
                                28: 23,
                                29: 25,
                                30: 26,
                                31: d,
                                32: h,
                                33: f,
                                34: m,
                                35: g,
                                36: y
                            }, {
                                11: 44,
                                20: 24,
                                28: 23,
                                29: 25,
                                30: 26,
                                31: d,
                                32: h,
                                33: f,
                                34: m,
                                35: g,
                                36: y
                            }, {
                                4: 45,
                                6: 4,
                                7: 5,
                                8: 6,
                                9: 7,
                                10: n,
                                11: 12,
                                12: r,
                                13: i,
                                14: o,
                                15: 8,
                                16: 9,
                                17: 10,
                                18: 11,
                                19: a,
                                20: 24,
                                22: s,
                                23: l,
                                24: c,
                                25: u,
                                26: [1, 46],
                                27: p,
                                28: 23,
                                29: 25,
                                30: 26,
                                31: d,
                                32: h,
                                33: f,
                                34: m,
                                35: g,
                                36: y
                            }, {
                                11: 47,
                                17: 48,
                                20: 24,
                                22: s,
                                28: 23,
                                29: 25,
                                30: 26,
                                31: d,
                                32: h,
                                33: f,
                                34: m,
                                35: g,
                                36: y
                            }, t(x, [2, 30]), t(x, [2, 31]), t(x, [2, 32]), t(x, [2, 33]), t(x, [2, 34]), {
                                4: 49,
                                6: 4,
                                7: 5,
                                8: 6,
                                9: 7,
                                10: n,
                                11: 12,
                                12: r,
                                13: i,
                                14: o,
                                15: 8,
                                16: 9,
                                17: 10,
                                18: 11,
                                19: a,
                                20: 24,
                                22: s,
                                23: l,
                                24: c,
                                25: u,
                                27: p,
                                28: 23,
                                29: 25,
                                30: 26,
                                31: d,
                                32: h,
                                33: f,
                                34: m,
                                35: g,
                                36: y,
                                37: [1, 50]
                            }, t(x, [2, 35]), t(x, [2, 36]), t(x, [2, 37]), t(x, [2, 38]), {
                                1: [2, 1]
                            }, t(v, [2, 4], {
                                6: 4,
                                7: 5,
                                8: 6,
                                9: 7,
                                15: 8,
                                16: 9,
                                17: 10,
                                18: 11,
                                11: 12,
                                28: 23,
                                20: 24,
                                29: 25,
                                30: 26,
                                4: 51,
                                10: n,
                                12: r,
                                13: i,
                                14: o,
                                19: a,
                                22: s,
                                23: l,
                                24: c,
                                25: u,
                                27: p,
                                31: d,
                                32: h,
                                33: f,
                                34: m,
                                35: g,
                                36: y
                            }), t(v, [2, 6]), t(b, [2, 8]), t(b, [2, 9]), t([5, 12, 13, 14, 19, 21, 22, 23, 24, 25, 26, 27, 31, 32, 33, 34, 35, 36, 37], [2, 12]), t(w, [2, 13]), t(w, [2, 14]), {
                                4: 52,
                                6: 4,
                                7: 5,
                                8: 6,
                                9: 7,
                                10: n,
                                11: 12,
                                12: r,
                                13: i,
                                14: o,
                                15: 8,
                                16: 9,
                                17: 10,
                                18: 11,
                                19: a,
                                20: 24,
                                21: [1, 53],
                                22: s,
                                23: l,
                                24: c,
                                25: u,
                                27: p,
                                28: 23,
                                29: 25,
                                30: 26,
                                31: d,
                                32: h,
                                33: f,
                                34: m,
                                35: g,
                                36: y
                            }, t(x, [2, 24]), t(x, [2, 25]), {
                                11: 54,
                                20: 24,
                                28: 23,
                                29: 25,
                                30: 26,
                                31: d,
                                32: h,
                                33: f,
                                34: m,
                                35: g,
                                36: y
                            }, {
                                26: [1, 55]
                            }, {
                                11: 56,
                                20: 24,
                                28: 23,
                                29: 25,
                                30: 26,
                                31: d,
                                32: h,
                                33: f,
                                34: m,
                                35: g,
                                36: y
                            }, t(x, [2, 28]), t(x, [2, 29]), {
                                37: [1, 57]
                            }, t(x, [2, 40]), t(v, [2, 3]), {
                                21: [1, 58]
                            }, {
                                20: 59,
                                32: h,
                                33: f
                            }, t(x, [2, 23]), {
                                11: 60,
                                20: 24,
                                28: 23,
                                29: 25,
                                30: 26,
                                31: d,
                                32: h,
                                33: f,
                                34: m,
                                35: g,
                                36: y
                            }, t(x, [2, 27]), t(x, [2, 39]), {
                                20: 61,
                                32: h,
                                33: f
                            }, t(x, [2, 22]), t(x, [2, 26]), t(x, [2, 21])],
                            defaultActions: {
                                3: [2, 2],
                                33: [2, 1]
                            },
                            parseError: function(e, t) {
                                if (!t.recoverable) {
                                    var n = new Error(e);
                                    throw n.hash = t, n
                                }
                                this.trace(e)
                            },
                            parse: function(e) {
                                var t = this,
                                    n = [0],
                                    r = [null],
                                    i = [],
                                    o = this.table,
                                    a = "",
                                    s = 0,
                                    l = 0,
                                    c = 0,
                                    u = i.slice.call(arguments, 1),
                                    p = Object.create(this.lexer),
                                    d = {
                                        yy: {}
                                    };
                                for (var h in this.yy) Object.prototype.hasOwnProperty.call(this.yy, h) && (d.yy[h] = this.yy[h]);
                                p.setInput(e, d.yy), d.yy.lexer = p, d.yy.parser = this, void 0 === p.yylloc && (p.yylloc = {});
                                var f = p.yylloc;
                                i.push(f);
                                var m = p.options && p.options.ranges;
                                "function" == typeof d.yy.parseError ? this.parseError = d.yy.parseError : this.parseError = Object.getPrototypeOf(this).parseError;
                                for (var g, y, v, b, x, w, _, S, E, M = function() {
                                        var e;
                                        return e = p.lex() || 1, "number" != typeof e && (e = t.symbols_[e] || e), e
                                    }, I = {};;) {
                                    if (v = n[n.length - 1], this.defaultActions[v] ? b = this.defaultActions[v] : (null !== g && void 0 !== g || (g = M()), b = o[v] && o[v][g]), void 0 === b || !b.length || !b[0]) {
                                        var T = "";
                                        E = [];
                                        for (w in o[v]) this.terminals_[w] && w > 2 && E.push("'" + this.terminals_[w] + "'");
                                        T = p.showPosition ? "Parse error on line " + (s + 1) + ":\n" + p.showPosition() + "\nExpecting " + E.join(", ") + ", got '" + (this.terminals_[g] || g) + "'" : "Parse error on line " + (s + 1) + ": Unexpected " + (1 == g ? "end of input" : "'" + (this.terminals_[g] || g) + "'"), this.parseError(T, {
                                            text: p.match,
                                            token: this.terminals_[g] || g,
                                            line: p.yylineno,
                                            loc: f,
                                            expected: E
                                        })
                                    }
                                    if (b[0] instanceof Array && b.length > 1) throw new Error("Parse Error: multiple actions possible at state: " + v + ", token: " + g);
                                    switch (b[0]) {
                                        case 1:
                                            n.push(g), r.push(p.yytext), i.push(p.yylloc), n.push(b[1]), g = null, y ? (g = y, y = null) : (l = p.yyleng, a = p.yytext, s = p.yylineno, f = p.yylloc, c > 0 && c--);
                                            break;
                                        case 2:
                                            if (_ = this.productions_[b[1]][1], I.$ = r[r.length - _], I._$ = {
                                                    first_line: i[i.length - (_ || 1)].first_line,
                                                    last_line: i[i.length - 1].last_line,
                                                    first_column: i[i.length - (_ || 1)].first_column,
                                                    last_column: i[i.length - 1].last_column
                                                }, m && (I._$.range = [i[i.length - (_ || 1)].range[0], i[i.length - 1].range[1]]), void 0 !== (x = this.performAction.apply(I, [a, l, s, d.yy, b[1], r, i].concat(u)))) return x;
                                            _ && (n = n.slice(0, -1 * _ * 2), r = r.slice(0, -1 * _), i = i.slice(0, -1 * _)), n.push(this.productions_[b[1]][0]), r.push(I.$), i.push(I._$), S = o[n[n.length - 2]][n[n.length - 1]], n.push(S);
                                            break;
                                        case 3:
                                            return !0
                                    }
                                }
                                return !0
                            }
                        },
                        S = function() {
                            return {
                                EOF: 1,
                                parseError: function(e, t) {
                                    if (!this.yy.parser) throw new Error(e);
                                    this.yy.parser.parseError(e, t)
                                },
                                setInput: function(e, t) {
                                    return this.yy = t || this.yy || {}, this._input = e, this._more = this._backtrack = this.done = !1, this.yylineno = this.yyleng = 0, this.yytext = this.matched = this.match = "", this.conditionStack = ["INITIAL"], this.yylloc = {
                                        first_line: 1,
                                        first_column: 0,
                                        last_line: 1,
                                        last_column: 0
                                    }, this.options.ranges && (this.yylloc.range = [0, 0]), this.offset = 0, this
                                },
                                input: function() {
                                    var e = this._input[0];
                                    return this.yytext += e, this.yyleng++, this.offset++, this.match += e, this.matched += e, e.match(/(?:\r\n?|\n).*/g) ? (this.yylineno++, this.yylloc.last_line++) : this.yylloc.last_column++, this.options.ranges && this.yylloc.range[1]++, this._input = this._input.slice(1), e
                                },
                                unput: function(e) {
                                    var t = e.length,
                                        n = e.split(/(?:\r\n?|\n)/g);
                                    this._input = e + this._input, this.yytext = this.yytext.substr(0, this.yytext.length - t), this.offset -= t;
                                    var r = this.match.split(/(?:\r\n?|\n)/g);
                                    this.match = this.match.substr(0, this.match.length - 1), this.matched = this.matched.substr(0, this.matched.length - 1), n.length - 1 && (this.yylineno -= n.length - 1);
                                    var i = this.yylloc.range;
                                    return this.yylloc = {
                                        first_line: this.yylloc.first_line,
                                        last_line: this.yylineno + 1,
                                        first_column: this.yylloc.first_column,
                                        last_column: n ? (n.length === r.length ? this.yylloc.first_column : 0) + r[r.length - n.length].length - n[0].length : this.yylloc.first_column - t
                                    }, this.options.ranges && (this.yylloc.range = [i[0], i[0] + this.yyleng - t]), this.yyleng = this.yytext.length, this
                                },
                                more: function() {
                                    return this._more = !0, this
                                },
                                reject: function() {
                                    return this.options.backtrack_lexer ? (this._backtrack = !0, this) : this.parseError("Lexical error on line " + (this.yylineno + 1) + ". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n" + this.showPosition(), {
                                        text: "",
                                        token: null,
                                        line: this.yylineno
                                    })
                                },
                                less: function(e) {
                                    this.unput(this.match.slice(e))
                                },
                                pastInput: function() {
                                    var e = this.matched.substr(0, this.matched.length - this.match.length);
                                    return (e.length > 20 ? "..." : "") + e.substr(-20).replace(/\n/g, "")
                                },
                                upcomingInput: function() {
                                    var e = this.match;
                                    return e.length < 20 && (e += this._input.substr(0, 20 - e.length)), (e.substr(0, 20) + (e.length > 20 ? "..." : "")).replace(/\n/g, "")
                                },
                                showPosition: function() {
                                    var e = this.pastInput(),
                                        t = new Array(e.length + 1).join("-");
                                    return e + this.upcomingInput() + "\n" + t + "^"
                                },
                                test_match: function(e, t) {
                                    var n, r, i;
                                    if (this.options.backtrack_lexer && (i = {
                                            yylineno: this.yylineno,
                                            yylloc: {
                                                first_line: this.yylloc.first_line,
                                                last_line: this.last_line,
                                                first_column: this.yylloc.first_column,
                                                last_column: this.yylloc.last_column
                                            },
                                            yytext: this.yytext,
                                            match: this.match,
                                            matches: this.matches,
                                            matched: this.matched,
                                            yyleng: this.yyleng,
                                            offset: this.offset,
                                            _more: this._more,
                                            _input: this._input,
                                            yy: this.yy,
                                            conditionStack: this.conditionStack.slice(0),
                                            done: this.done
                                        }, this.options.ranges && (i.yylloc.range = this.yylloc.range.slice(0))), r = e[0].match(/(?:\r\n?|\n).*/g), r && (this.yylineno += r.length), this.yylloc = {
                                            first_line: this.yylloc.last_line,
                                            last_line: this.yylineno + 1,
                                            first_column: this.yylloc.last_column,
                                            last_column: r ? r[r.length - 1].length - r[r.length - 1].match(/\r?\n?/)[0].length : this.yylloc.last_column + e[0].length
                                        }, this.yytext += e[0], this.match += e[0], this.matches = e, this.yyleng = this.yytext.length, this.options.ranges && (this.yylloc.range = [this.offset, this.offset += this.yyleng]), this._more = !1, this._backtrack = !1, this._input = this._input.slice(e[0].length), this.matched += e[0], n = this.performAction.call(this, this.yy, this, t, this.conditionStack[this.conditionStack.length - 1]), this.done && this._input && (this.done = !1), n) return n;
                                    if (this._backtrack) {
                                        for (var o in i) this[o] = i[o];
                                        return !1
                                    }
                                    return !1
                                },
                                next: function() {
                                    if (this.done) return this.EOF;
                                    this._input || (this.done = !0);
                                    var e, t, n, r;
                                    this._more || (this.yytext = "", this.match = "");
                                    for (var i = this._currentRules(), o = 0; o < i.length; o++)
                                        if ((n = this._input.match(this.rules[i[o]])) && (!t || n[0].length > t[0].length)) {
                                            if (t = n, r = o, this.options.backtrack_lexer) {
                                                if (!1 !== (e = this.test_match(n, i[o]))) return e;
                                                if (this._backtrack) {
                                                    t = !1;
                                                    continue
                                                }
                                                return !1
                                            }
                                            if (!this.options.flex) break
                                        } return t ? !1 !== (e = this.test_match(t, i[r])) && e : "" === this._input ? this.EOF : this.parseError("Lexical error on line " + (this.yylineno + 1) + ". Unrecognized text.\n" + this.showPosition(), {
                                        text: "",
                                        token: null,
                                        line: this.yylineno
                                    })
                                },
                                lex: function() {
                                    var e = this.next();
                                    return e || this.lex()
                                },
                                begin: function(e) {
                                    this.conditionStack.push(e)
                                },
                                popState: function() {
                                    return this.conditionStack.length - 1 > 0 ? this.conditionStack.pop() : this.conditionStack[0]
                                },
                                _currentRules: function() {
                                    return this.conditionStack.length && this.conditionStack[this.conditionStack.length - 1] ? this.conditions[this.conditionStack[this.conditionStack.length - 1]].rules : this.conditions.INITIAL.rules
                                },
                                topState: function(e) {
                                    return e = this.conditionStack.length - 1 - Math.abs(e || 0), e >= 0 ? this.conditionStack[e] : "INITIAL"
                                },
                                pushState: function(e) {
                                    this.begin(e)
                                },
                                stateStackSize: function() {
                                    return this.conditionStack.length
                                },
                                options: {},
                                performAction: function(e, t, n, r) {
                                    switch (n) {
                                        case 0:
                                            break;
                                        case 1:
                                            return this.begin("optarg"), 25;
                                        case 2:
                                            return this.popState(), 26;
                                        case 3:
                                            return 23;
                                        case 4:
                                            return 24;
                                        case 5:
                                            return 27;
                                        case 6:
                                            return 22;
                                        case 7:
                                            return 13;
                                        case 8:
                                            return 14;
                                        case 9:
                                            return 12;
                                        case 10:
                                            return 10;
                                        case 11:
                                            return 19;
                                        case 12:
                                            return 21;
                                        case 13:
                                            return 33;
                                        case 14:
                                            return 32;
                                        case 15:
                                            return 36;
                                        case 16:
                                            return 37;
                                        case 17:
                                        case 18:
                                        case 19:
                                            return 31;
                                        case 20:
                                        case 21:
                                            return 34;
                                        case 22:
                                            return 35;
                                        case 23:
                                            return 31;
                                        case 24:
                                            return 5
                                    }
                                },
                                rules: [/^(?:\s+)/, /^(?:(\\sqrt)\s*\[)/, /^(?:\])/, /^(?:(\\operatorname))/, /^(?:(\\mathrm))/, /^(?:(\\sqrt))/, /^(?:(\\frac))/, /^(?:'+\^)/, /^(?:'+)/, /^(?:\^)/, /^(?:[_])/, /^(?:(\\left))/, /^(?:(\\right))/, /^(?:(\\langle|\\rangle|\\vert|\\Vert))/, /^(?:\[|\]|\\\{|\\\}|\(|\)|\||\\\|)/, /^(?:\{)/, /^(?:\})/, /^(?:\\(infty))/, /^(?:\\(int))/, /^(?:!)/, /^(?:\\(alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|omicron|pi|rho|sigma|tau|xi|upsilon|phi|chi|psi|omega))/, /^(?:\\(Alpha|Beta|Gamma|Delta|Epsilon|Zeta|Eta|Theta|Iota|Kappa|Lambda|Mu|Nu|Omicron|Pi|Rho|Sigma|Tau|Xi|Upsilon|Phi|Chi|Psi|Omega))/, /^(?:\\[A-Za-z]+)/, /^(?:\\.|.)/, /^(?:$)/],
                                conditions: {
                                    optarg: {
                                        rules: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24],
                                        inclusive: !0
                                    },
                                    INITIAL: {
                                        rules: [0, 1, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24],
                                        inclusive: !0
                                    }
                                }
                            }
                        }();
                    return _.lexer = S, e.prototype = _, _.Parser = e, new e
                }();
                t.parser = i, t.Parser = i.Parser, t.parse = function() {
                    return i.parse.apply(i, arguments)
                }, t.main = function(r) {
                    r[1] || (console.log("Usage: " + r[0] + " FILE"), e.exit(1));
                    var i = n(4).readFileSync(n(5).normalize(r[1]), "utf8");
                    return t.parser.parse(i)
                }, void 0 !== r && n.c[n.s] === r && t.main(e.argv.slice(1))
            }).call(t, n(1), n(8)(e))
        }, function(e, t, n) {
            function r(e) {
                return E.map(S.default(e), function(e) {
                    return x(_.default(e))
                })
            }

            function i(e) {
                return /^[a-z]$/.test(e.value) ? e.value.toUpperCase() : /^[A-Z]$/.test(e.value) ? "," + e.value : /^[0-9.]$/.test(e.value) ? e.value : /^[+\-()]$/.test(e.value) ? e.value : M.hasOwnProperty(e.value) ? M[e.value] : "[terminal: " + e.value + "]"
            }

            function o(e) {
                return I.hasOwnProperty(e.value) ? I[e.value] : e.value.slice(1).toUpperCase() + " "
            }

            function a(e) {
                return T.hasOwnProperty(e.value) ? T[e.value] : e.value.slice(1).toUpperCase() + " "
            }

            function s(e) {
                return "\\space" === e.value
            }

            function l(e, t) {
                return e.isStartOfLine && /^-?$/.test(t) || /\s-?$/.test(t) || e.wasFraction
            }

            function c(e) {
                return "\\sum" === e.value || "\\prod" === e.value
            }

            function u(e, t) {
                if (t >= e.length) return !1;
                var n = e[t];
                if ("terminal" === n.type) {
                    if (/^[0-9]$/.test(n.value)) return !0;
                    if ("." !== n.value) return !1;
                    if (t + 1 >= e.length) return !1;
                    if (n = e[t + 1], "terminal" === n.type) return /^[0-9]$/.test(n.value)
                }
                return !1
            }

            function p(e, t) {
                for (var n = "", r = e.levelIndicator, m = 0, y = !1, x = 0; x < t.length; x++) {
                    u(t, x) && ("" === r && /[A-Z]$/.test(n) ? n += g(r) : l(e, n) && (n += "#"));
                    var w = t[x],
                        _ = x < t.length - 1 ? t[x + 1] : null;
                    switch ("level" !== w.type && r !== e.levelIndicator && (b(w) ? r = "" : (e.wasModifiedExpression && "" === e.levelIndicator ? e = v(e, {
                        wasModifiedExpression: !1
                    }) : n += g(e.levelIndicator), r = e.levelIndicator)), w.type) {
                        case "terminal":
                            !e.wasModifiedExpression && "" !== r && b(w) ? n += " " + g(r) + i(w).trim() + " " : n += i(w), "." === w.value && _ && ("terminal" === _.type && /^[^_\d,]/.test(i(_)) || "greek" === _.type) && (n += '"'), e = v(e, {
                                wasFraction: !1,
                                wasRomanCommand: !1
                            });
                            break;
                        case "command":
                            if (!s(w)) {
                                var S = c(w);
                                S && (n += '"'), !S && "" !== r && b(w) ? n += " " + g(r) + o(w).trim() + " " : n += o(w), e = v(e, {
                                    wasFraction: !1,
                                    wasModifiedExpression: S,
                                    wasRomanCommand: !0
                                })
                            }
                            break;
                        case "greek":
                            n += a(w), e = v(e, {
                                wasFraction: !1
                            });
                            break;
                        case "fraction":
                            var E = d(e, w);
                            n += E.value, m = Math.max(m, E.fractionLevel), e = v(e, {
                                wasFraction: !0,
                                wasRomanCommand: !1
                            });
                            break;
                        case "radical":
                            var M = h(e, w);
                            n += M.value, m = Math.max(m, M.fractionLevel), e = v(e, {
                                wasFraction: !1,
                                wasRomanCommand: !1
                            });
                            break;
                        case "level":
                            !e.wasModifiedExpression && e.wasRomanCommand ? (y = /\s$/.test(n)) && (n = n.replace(/\s$/, "")) : y = !1;
                            var I = n.length > 0 && !0 === /[A-Za-z]/.test(n[n.length - 1]),
                                T = f(e, I, y, w);
                            n += T.value, r = T.levelIndicator, e = v(e, {
                                wasFraction: !1,
                                wasRomanCommand: !1
                            });
                            break;
                        case "typeform":
                            n += p(e, w.value).value, "operator_name" === w.name && (n += " "), e = v(e, {
                                wasFraction: !1,
                                wasModifiedExpression: !1,
                                wasRomanCommand: !1
                            })
                    }
                }
                return {
                    fractionLevel: m,
                    levelIndicator: r,
                    value: n
                }
            }

            function d(e, t) {
                e = v(e, {
                    isStartOfLine: !1
                });
                for (var n = p(e, t.numerator), r = p(e, t.denominator), i = Math.max(n.fractionLevel, r.fractionLevel), o = "", a = 0; a < i; a++) o += ",";
                var s = o + "?" + n.value;
                return n.levelIndicator !== e.levelIndicator && (s += g(e.levelIndicator)), /\.$/.test(n.value) && (s += '"'), s += o + "/" + r.value, r.levelIndicator !== e.levelIndicator && (s += g(e.levelIndicator)), /\.$/.test(r.value) && (s += '"'), s += o + "#", {
                    fractionLevel: i + 1,
                    value: s
                }
            }

            function h(e, t) {
                for (var n = e.radicalLevel, r = "", i = "", o = 0; o < n; o++) i += ".";
                if (t.index) {
                    r += i + "<";
                    var a = p(v(e, {
                        isStartOfLine: !1
                    }), t.index);
                    r += a.value, /\.$/.test(a.value) && (r += '"'), a.levelIndicator !== e.levelIndicator && (r += g(e.levelIndicator)), r += ">"
                } else r += i + ">";
                var s = p(v(e, {
                    isStartOfLine: !1,
                    radicalLevel: n + 1
                }), t.radicand);
                return r += s.value, /\.$/.test(s.value) && (r += '"'), s.levelIndicator !== e.levelIndicator && (r += g(e.levelIndicator)), r += i + "]", {
                    fractionLevel: s.fractionLevel,
                    value: r
                }
            }

            function f(e, t, n, r) {
                var i = e.levelIndicator,
                    o = "",
                    a = m(r.superscript);
                if (o += a, r.subscript) {
                    e.wasModifiedExpression && (o += "%"), i = e.levelIndicator + ";";
                    var s = p(v(e, {
                        isStartOfLine: !1,
                        levelIndicator: i
                    }), r.subscript);
                    t && /^[0-9]*(\.|\,)?[0-9]+$/.test(s.value) && i.length <= 1 ? i = e.levelIndicator : !e.wasModifiedExpression && r.subscript[0] && "level" !== r.subscript[0].type && (o += g(i)), o += s.value, /\.$/.test(s.value) && (o += '"')
                }
                if (r.superscript) {
                    e.wasModifiedExpression && (o += "<"), i = e.levelIndicator + "^";
                    var l = p(v(e, {
                        isStartOfLine: !1,
                        levelIndicator: i
                    }), r.superscript.slice(a.length));
                    !e.wasModifiedExpression && r.superscript[0] && "level" !== r.superscript[0].type && "" !== l.value && (o += g(i)), o += l.value, /\.$/.test(l.value) && (o += '"')
                }
                return e.wasModifiedExpression ? o += "]" : e.wasRomanCommand && n && (o += " ", i = i.slice(0, i.length - 1)), {
                    levelIndicator: i,
                    value: o
                }
            }

            function m(e) {
                var t = "";
                if (e)
                    for (var n = 0, r = e; n < r.length; n++) {
                        var i = r[n];
                        if ("command" !== i.type || "\\prime" !== i.value) break;
                        t += "'"
                    }
                return t
            }

            function g(e) {
                return e || '"'
            }

            function y() {
                return {
                    isStartOfLine: !0,
                    levelIndicator: "",
                    radicalLevel: 0,
                    wasFraction: !1,
                    wasModifiedExpression: !1,
                    wasRomanCommand: !1
                }
            }

            function v(e, t) {
                return w({}, e, t)
            }

            function b(e) {
                return ("terminal" === e.type || "command" === e.type) && /^<|>|\=|\\leq?|\\geq?|\\neq?$/.test(e.value)
            }

            function x(e) {
                return p(y(), e).value
            }
            var w = this && this.__assign || Object.assign || function(e) {
                for (var t, n = 1, r = arguments.length; n < r; n++) {
                    t = arguments[n];
                    for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
                }
                return e
            };
            Object.defineProperty(t, "__esModule", {
                value: !0
            });
            var _ = n(11),
                S = n(12),
                E = n(0);
            t.default = r;
            var M = {
                    "!": "&",
                    "*": "@#",
                    ",": ", ",
                    "/": "_/",
                    ":": "_3",
                    "<": ' "K ',
                    "=": " .K ",
                    ">": " .1 ",
                    "?": "_8",
                    "[": "@(",
                    "\\ ": " ",
                    "\\%": "@0",
                    "\\&": "_&",
                    "\\,": " ",
                    "\\infty": ",=",
                    "\\int": "!",
                    "\\{": ".(",
                    "\\|": "\\\\",
                    "\\}": ".)",
                    "]": "@)",
                    "|": "\\"
                },
                I = {
                    "\\Vert": "\\\\",
                    "\\cdot": "*",
                    "\\div": "./",
                    "\\ge": " .1: ",
                    "\\geq": " .1: ",
                    "\\langle": "..(",
                    "\\ldots": " ''' ",
                    "\\le": ' "K: ',
                    "\\leq": ' "K: ',
                    "\\ne": " /.K ",
                    "\\neq": " /.K ",
                    "\\approx": " @:@: ",
                    "\\nparallel": " /$L ",
                    "\\parallel": " $L ",
                    "\\perp": " $P ",
                    "\\prime": "'",
                    "\\prod": ".,P",
                    "\\rangle": "..)",
                    "\\sim": "@:",
                    "\\sum": ".,S",
                    "\\times": "@*",
                    "\\vert": "\\"
                },
                T = {
                    "\\Alpha": ".,A",
                    "\\Beta": ".,B",
                    "\\Chi": ".,&",
                    "\\Delta": ".,D",
                    "\\Epsilon": ".,E",
                    "\\Eta": ".,:",
                    "\\Gamma": ".,G",
                    "\\Iota": ".,I",
                    "\\Kappa": ".,K",
                    "\\Lambda": ".,L",
                    "\\Mu": ".,M",
                    "\\Nu": ".,N",
                    "\\Omega": ".,W",
                    "\\Omicron": ".,O",
                    "\\Phi": ".,F",
                    "\\Pi": ".,P",
                    "\\Psi": ".,Y",
                    "\\Rho": ".,R",
                    "\\Sigma": ".,S",
                    "\\Tau": ".,T",
                    "\\Theta": ".,?",
                    "\\Upsilon": ".,U",
                    "\\Xi": ".,X",
                    "\\Zeta": ".,Z",
                    "\\alpha": ".A",
                    "\\beta": ".B",
                    "\\chi": ".&",
                    "\\delta": ".D",
                    "\\epsilon": ".E",
                    "\\eta": ".:",
                    "\\gamma": ".G",
                    "\\iota": ".I",
                    "\\kappa": ".K",
                    "\\lambda": ".L",
                    "\\mu": ".M",
                    "\\nu": ".N",
                    "\\omega": ".W",
                    "\\omicron": ".O",
                    "\\phi": ".F",
                    "\\pi": ".P",
                    "\\psi": ".Y",
                    "\\rho": ".R",
                    "\\sigma": ".S",
                    "\\tau": ".T",
                    "\\theta": ".?",
                    "\\upsilon": ".U",
                    "\\xi": ".X",
                    "\\zeta": ".Z"
                }
        }, function(e, t, n) {
            function r(e) {
                return I.map(M.default(e), function(e) {
                    return w(E.default(e))
                })
            }

            function i(e, t, n) {
                var r = "",
                    i = t.value,
                    o = n && "terminal" === n.type ? n.value : "";
                return p(i, e) && (r += ";"), /^[\D]/.test(i) && (e = x(e, {
                    wasNumber: !1
                })), /^[a-z]$/.test(i) ? e.capsLock ? (e = x(e, {
                    capsLock: !1
                }), r += ",'" + i.toUpperCase()) : r += i.toUpperCase() : /^[A-Z]$/.test(i) ? e.capsLock ? r += i : /[A-Z]/.test(o) ? (e = x(e, {
                    capsLock: !0
                }), r += ",," + i) : r += "," + i : (e = x(e, {
                    capsLock: !1
                }), /^[0-9.]$/.test(i) ? r += c(i) : T.hasOwnProperty(i) ? r += T[i] : r += "[terminal: " + i + "]"), {
                    value: r,
                    ctx: e
                }
            }

            function o(e, t) {
                var n;
                return n = C.hasOwnProperty(e.value) ? C[e.value] : e.value.slice(1).toUpperCase() + " ", p(n, t) && (n = ";" + n), /^[\D]/.test(n) && (t = x(t, {
                    wasNumber: !1
                })), {
                    value: n,
                    ctx: t
                }
            }

            function a(e) {
                return k.hasOwnProperty(e.value) ? k[e.value] : e.value.slice(1).toUpperCase() + " "
            }

            function s(e) {
                return "\\space" === e.value
            }

            function l(e, t) {
                if (t < e.length) {
                    var n = e[t];
                    if ("terminal" === n.type) {
                        if (/^\d$/.test(n.value)) return !0;
                        if ("." !== n.value) return !1;
                        if (t + 1 >= e.length) return !1;
                        if (n = e[t + 1], "terminal" === n.type) return /^\d$/.test(n.value)
                    }
                }
                return !1
            }

            function c(e) {
                for (var t = "", n = "A".charCodeAt(0) - 1, r = 0, i = e; r < i.length; r++) {
                    var o = i[r];
                    t += "," === o ? "1" : "." === o ? "4" : "0" === o ? "J" : String.fromCharCode(n + Number(o))
                }
                return t
            }

            function u(e, t) {
                for (var n, r, c = "", p = !0, h = 0; h < t.length; h++) {
                    l(t, h) ? (e = x(e, {
                        wasNumber: !0
                    }), p && (c += "#", p = !1)) : p = !0;
                    var g = t[h];
                    switch (g.type) {
                        case "terminal":
                            n = i(e, g, h < t.length - 1 ? t[h + 1] : void 0), e = n.ctx, c += n.value, " " === c[c.length - 1] && (p = !0);
                            break;
                        case "command":
                            s(g) || (r = o(g, e), e = r.ctx, c += r.value, " " === c[c.length - 1] && (p = !0));
                            break;
                        case "greek":
                            c += a(g), " " === c[c.length - 1] && (p = !0);
                            break;
                        case "fraction":
                            var y = d(e, g);
                            c += y.value, e = y.ctx, p = !1;
                            break;
                        case "radical":
                            c += f(e, g).value, p = !0;
                            break;
                        case "level":
                            var v = m(e, g);
                            c += v.value, e = v.ctx, p = !0;
                            break;
                        case "typeform":
                            var b = u(e, g.value).value;
                            c += b, /(ARC)?(SIN|COS|TAN|CSC|SEC|COT)(H)?/.test(b) && (c += " ")
                    }
                }
                return {
                    ctx: e,
                    value: c
                }
            }

            function p(e, t) {
                return t.wasNumber && /^[A-Ja-j]/.test(e)
            }

            function d(e, t) {
                var n, r = u(e, t.numerator),
                    i = u(e, t.denominator);
                return h(r.value) && h(i.value) ? (e = x(e, {
                    wasNumber: !0
                }), n = r.value + "/" + i.value.slice(1)) : (e = x(e, {
                    wasNumber: !1
                }), n = "(" + r.value + "./" + i.value + ")"), {
                    ctx: e,
                    value: n
                }
            }

            function h(e) {
                return /^\#[A-J41]+$/.test(e)
            }

            function f(e, t) {
                var n = "%";
                if (t.index) {
                    n += u(e, S.group(S.level({
                        "^": t.index
                    }))).value
                }
                return n += u(e, t.radicand).value + "+", {
                    ctx: e,
                    value: n
                }
            }

            function m(e, t) {
                var n = "",
                    r = y(t.superscript);
                n += r;
                var i;
                if (t.subscript) {
                    var o = u(e, t.subscript);
                    i = v(t.subscript, o.value, 0) ? "<" + g(o.value) + ">" : o.value, e = x(e, {
                        wasNumber: o.ctx.wasNumber
                    }), "" !== i && (n += "5" + i)
                }
                if (t.superscript) {
                    var a = u(e, t.superscript.slice(r.length));
                    i = v(t.superscript, a.value, r.length) ? "<" + g(a.value) + ">" : a.value, e = x(e, {
                        wasNumber: a.ctx.wasNumber
                    }), "" !== r && "" === i || (n += "9" + i)
                }
                return {
                    ctx: e,
                    value: n
                }
            }

            function g(e) {
                return /^;/.test(e) ? e.slice(1) : e
            }

            function y(e) {
                var t = "";
                if (e)
                    for (var n = 0, r = e; n < r.length; n++) {
                        var i = r[n];
                        if ("command" !== i.type || "\\prime" !== i.value) break;
                        t += "7"
                    }
                return t
            }

            function v(e, t, n) {
                var r = e[0],
                    i = (t.match(/\</g) || []).length,
                    o = /^["|\.|_]?\</.test(t),
                    a = (t.match(/\>/g) || []).length,
                    s = /["|\.|_]?\>$/.test(t);
                return !h(t) && e.length - n > 1 && 0 === i && 0 === a || i > 0 && a > 0 && (!o || !s) || i > 1 || a > 1 || r && "typeform" === r.type
            }

            function b() {
                return {
                    capsLock: !1,
                    wasNumber: !1
                }
            }

            function x(e, t) {
                return _({}, e, t)
            }

            function w(e) {
                return u(b(), e).value
            }
            var _ = this && this.__assign || Object.assign || function(e) {
                for (var t, n = 1, r = arguments.length; n < r; n++) {
                    t = arguments[n];
                    for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
                }
                return e
            };
            Object.defineProperty(t, "__esModule", {
                value: !0
            });
            var S = n(7),
                E = n(11),
                M = n(12),
                I = n(0);
            t.default = r;
            var T = {
                    "!": "6",
                    "(": '"<',
                    ")": '">',
                    "*": '"9',
                    "+": '"6',
                    ",": "1",
                    "-": '"-',
                    ".": "4",
                    "/": "_/",
                    ":": "3",
                    "<": "@<",
                    "=": '"7',
                    ">": "@>",
                    "?": "8",
                    "[": ".<",
                    "\\ ": " ",
                    "\\%": ".0",
                    "\\&": "@&",
                    "\\,": " ",
                    "\\infty": "#=",
                    "\\int": "!",
                    "\\{": "_<",
                    "\\|": "_\\_\\",
                    "\\}": "_>",
                    "]": ".>",
                    "|": "_\\"
                },
                C = {
                    "\\Vert": "_\\_\\",
                    "\\cdot": '"4',
                    "\\div": '"/',
                    "\\ge": "_@>",
                    "\\geq": "_@>",
                    "\\langle": "@<",
                    "\\ldots": "444",
                    "\\le": "_@<",
                    "\\leq": "_@<",
                    "\\ne": '"7@:',
                    "\\neq": '"7@:',
                    "\\approx": "^9",
                    "\\parallel": "#L",
                    "\\perp": "#-",
                    "\\prime": "7",
                    "\\prod": ",.P",
                    "\\rangle": "@>",
                    "\\sim": "@9",
                    "\\sum": ",.S",
                    "\\times": '"8',
                    "\\vert": "_\\"
                },
                k = {
                    "\\Alpha": ",.A",
                    "\\Beta": ",.B",
                    "\\Chi": ",.&",
                    "\\Delta": ",.D",
                    "\\Epsilon": ",.E",
                    "\\Eta": ",.:",
                    "\\Gamma": ",.G",
                    "\\Iota": ",.I",
                    "\\Kappa": ",.K",
                    "\\Lambda": ",.L",
                    "\\Mu": ",.M",
                    "\\Nu": ",.N",
                    "\\Omega": ",.W",
                    "\\Omicron": ",.O",
                    "\\Phi": ",.F",
                    "\\Pi": ",.P",
                    "\\Psi": ",.Y",
                    "\\Rho": ",.R",
                    "\\Sigma": ",.S",
                    "\\Tau": ",.T",
                    "\\Theta": ",.?",
                    "\\Upsilon": ",.U",
                    "\\Xi": ",.X",
                    "\\Zeta": ",.Z",
                    "\\alpha": ".A",
                    "\\beta": ".B",
                    "\\chi": ".&",
                    "\\delta": ".D",
                    "\\epsilon": ".E",
                    "\\eta": ".:",
                    "\\gamma": ".G",
                    "\\iota": ".I",
                    "\\kappa": ".K",
                    "\\lambda": ".L",
                    "\\mu": ".M",
                    "\\nu": ".N",
                    "\\omega": ".W",
                    "\\omicron": ".O",
                    "\\phi": ".F",
                    "\\pi": ".P",
                    "\\psi": ".Y",
                    "\\rho": ".R",
                    "\\sigma": ".S",
                    "\\tau": ".T",
                    "\\theta": ".?",
                    "\\upsilon": ".U",
                    "\\xi": ".X",
                    "\\zeta": ".Z"
                }
        }, function(e, t, n) {
            function r(e, t) {
                for (var n = "", o = t, a = "", s = !1, u = "", p = "", h = i(e), f = 0; f < e.length; f++) {
                    var y = e[f],
                        v = f + 1 < e.length ? e[f + 1] : null;
                    switch (y.type) {
                        case "terminal":
                            var b = d.getAutoOperator(e.slice(f));
                            "" !== b.value ? (n += b.value, f += b.terminalCount - 1, s = s || b.modified) : " " === y.value ? (s ? (a = u, n += c(o, a), o = a) : n += "\\ ", s = !1) : (h[f] === m ? n += "\\left" : h[f] === g && (n += "\\right"), n += y.value);
                            break;
                        case "comparison":
                            a = "", n += c(o, a), o = a, s = !1, n += y.value;
                            break;
                        case "level_with_comparison":
                            n += c(o, y.level), o = y.level, s = !1, n += y.value;
                            break;
                        case "command":
                            var x = y.value.slice(1).trim();
                            v && "terminal" === v.type && /[a-z]/.test(v.value) ? (n += x, s = !1) : d.containsValue(x) ? (n += "\\operatorname{" + x + "}", s = !0) : (n += y.value, s = !0), u = o;
                            break;
                        case "expression":
                            n += y.value;
                            break;
                        case "fraction":
                            n += l(y.numerator, y.denominator, o);
                            break;
                        case "modified_expression":
                            n += r(y.expression, o) + " ", y.under && (n += "_{" + r(y.under, o) + "}"), y.over && (n += "^{" + r(y.over, o) + "}");
                            break;
                        case "radical":
                            n += "\\sqrt", y.index && (n += "[" + r(y.index, o) + "]"), n += "{" + r(y.value, o) + "}";
                            break;
                        case "simple_subscript":
                            "" === o ? (n += y.base.value + "_{" + y.subscript.value + "}", "command" === y.base.type && (s = !0, u = o)) : n += y.base.value + y.subscript.value;
                            break;
                        case "level":
                            n += c(o, y.value, p), o = y.value, "^" === y.value && "" !== p && (p = "");
                            break;
                        case "primes":
                            v && "level" === v.type && ";" === v.value ? p = y.value : "" !== o ? (n += Array(y.value.length + 1).join("\\prime "), p = "") : (n += y.value, p = "")
                    }
                }
                return n += c(o, t) + p, n.replace(/([^\\])( )$/, "$1")
            }

            function i(e) {
                for (var t = [], n = [], r = 0; r < e.length; r++) {
                    var i = e[r];
                    if (o(i)) t.push({
                        direction: m,
                        index: r
                    }), n.push(y);
                    else if (a(i)) {
                        for (; t.length && t[t.length - 1].direction === v;) t.pop();
                        if (t.length) {
                            var l = t.pop();
                            if (l) {
                                var c = l.index;
                                n[c] = m, n.push(g)
                            }
                        } else n.push(y)
                    } else if (s(i))
                        if (t.length && t[t.length - 1].direction === v) {
                            var l = t.pop();
                            if (l) {
                                var c = l.index;
                                n[c] = m, n.push(g)
                            }
                        } else t.push({
                            direction: v,
                            index: r
                        }), n.push(y);
                    else n.push(y)
                }
                return n
            }

            function o(e) {
                return "terminal" === e.type && /^(\\langle |\[|\(|\\{)$/.test(e.value)
            }

            function a(e) {
                return "terminal" === e.type && /^(\\rangle |\]|\)|\\})$/.test(e.value)
            }

            function s(e) {
                return "terminal" === e.type && /^(\\\||\|)$/.test(e.value)
            }

            function l(e, t, n) {
                return "\\frac{" + r(e, n) + "}{" + r(t, n) + "}"
            }

            function c(e, t, n) {
                var r, i, o, a = "",
                    s = Math.max(e.length, t.length);
                for (r = 0; r < s && e[r] === t[r]; r++);
                for (i = e.length - 1; i >= r; i--) a += "}";
                for (o = r; o < t.length; o++) "^" === t[o] && (n && (a += n), a += "^{"), ";" === t[o] && (a += "_{");
                return a
            }

            function u(e) {
                return r(e, "")
            }

            function p(e, t) {
                return t && t.operatorNames ? d.setOperatorNames(t.operatorNames) : d.resetOperatorNames(), f.map(h.default(e, t), u)
            }
            Object.defineProperty(t, "__esModule", {
                value: !0
            });
            var d = n(2),
                h = n(18),
                f = n(0),
                m = 1,
                g = -1,
                y = 0,
                v = 2;
            t.default = p
        }, function(e, t, n) {
            function r(e) {
                return {
                    type: "terminal",
                    value: e
                }
            }

            function i(e) {
                return {
                    type: "command",
                    value: "\\" + e.trim() + " "
                }
            }

            function o(e) {
                var t = /[\^;]+/.exec(e),
                    n = t ? t.toString() : "",
                    r = e.slice(s.length);
                return {
                    type: "level_with_comparison",
                    level: n,
                    value: y[r]
                }
            }

            function a(e) {
                return {
                    type: "comparison",
                    value: y[e]
                }
            }

            function s(e) {
                return {
                    type: "level",
                    value: e
                }
            }

            function l() {
                return s("")
            }

            function c(e) {
                return {
                    type: "primes",
                    value: e
                }
            }

            function u(e, t) {
                return {
                    type: "fraction",
                    numerator: e,
                    denominator: t
                }
            }

            function p(e, t, n) {
                return {
                    type: "modified_expression",
                    expression: e,
                    under: t,
                    over: n
                }
            }

            function d(e, t) {
                return {
                    type: "radical",
                    value: e,
                    index: t
                }
            }

            function h(e) {
                return {
                    type: "expression",
                    value: e
                }
            }

            function f(e, t) {
                return {
                    type: "simple_subscript",
                    base: e,
                    subscript: t
                }
            }

            function m(e) {
                if (v.hasOwnProperty(e)) return v[e] + " ";
                throw new Error("Unknown Greek letter")
            }

            function g() {
                for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
                return Array.prototype.concat.apply([], e)
            }
            Object.defineProperty(t, "__esModule", {
                value: !0
            }), t.terminal = r, t.command = i;
            var y = {
                '"K': "<",
                '"K:': "\\leq ",
                $L: "\\parallel ",
                $P: "\\perp ",
                ".1": ">",
                ".1:": "\\geq ",
                ".K": "=",
                "@:@:": "\\approx",
                "/$L": "\\nparallel ",
                "/.K": "\\neq ",
                "=": "=",
                "@:": "\\sim "
            };
            t.level_with_comparison = o, t.comparison = a, t.level = s, t.baseline = l, t.primes = c, t.fraction = u, t.modified_expression = p, t.radical = d, t.expression = h, t.simple_subscript = f;
            var v = {
                ".&": "\\chi",
                ".,&": "\\Chi",
                ".,:": "\\Eta",
                ".,?": "\\Theta",
                ".,A": "\\Alpha",
                ".,B": "\\Beta",
                ".,D": "\\Delta",
                ".,E": "\\Epsilon",
                ".,F": "\\Phi",
                ".,G": "\\Gamma",
                ".,I": "\\Iota",
                ".,K": "\\Kappa",
                ".,L": "\\Lambda",
                ".,M": "\\Mu",
                ".,N": "\\Nu",
                ".,O": "\\Omicron",
                ".,P": "\\prod",
                ".,R": "\\Rho",
                ".,S": "\\sum",
                ".,T": "\\Tau",
                ".,U": "\\Upsilon",
                ".,W": "\\Omega",
                ".,X": "\\Xi",
                ".,Y": "\\Psi",
                ".,Z": "\\Zeta",
                ".:": "\\eta",
                ".?": "\\theta",
                ".A": "\\alpha",
                ".B": "\\beta",
                ".D": "\\delta",
                ".E": "\\epsilon",
                ".F": "\\phi",
                ".G": "\\gamma",
                ".I": "\\iota",
                ".K": "\\kappa",
                ".L": "\\lambda",
                ".M": "\\mu",
                ".N": "\\nu",
                ".O": "\\omicron",
                ".P": "\\pi",
                ".R": "\\rho",
                ".S": "\\sigma",
                ".T": "\\tau",
                ".U": "\\upsilon",
                ".W": "\\omega",
                ".X": "\\xi",
                ".Y": "\\psi",
                ".Z": "\\zeta"
            };
            t.greek = m, t.group = g
        }, function(e, t, n) {
            function r(e, t) {
                t || (t = {});
                var n = a.parser;
                t.strict ? n.yy = s : (n.yy = i({
                    warnings: []
                }, s), n.lexer = l.default);
                try {
                    return {
                        isError: !1,
                        value: n.parse(e),
                        warnings: n.yy.warnings || []
                    }
                } catch (e) {
                    return {
                        error: o.default(e),
                        isError: !0
                    }
                }
            }
            var i = this && this.__assign || Object.assign || function(e) {
                for (var t, n = 1, r = arguments.length; n < r; n++) {
                    t = arguments[n];
                    for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
                }
                return e
            };
            Object.defineProperty(t, "__esModule", {
                value: !0
            });
            var o = n(6),
                a = n(9),
                s = n(17),
                l = n(20);
            t.default = r
        }, function(e, t, n) {
            function r(e, t) {
                t || (t = {});
                var n = s.parser;
                t.strict ? n.yy = l : (n.yy = i({
                    warnings: []
                }, l), n.lexer = a.default);
                try {
                    return {
                        isError: !1,
                        value: n.parse(e),
                        warnings: n.yy.warnings || []
                    }
                } catch (e) {
                    return {
                        error: o.default(e),
                        isError: !0
                    }
                }
            }
            var i = this && this.__assign || Object.assign || function(e) {
                for (var t, n = 1, r = arguments.length; n < r; n++) {
                    t = arguments[n];
                    for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
                }
                return e
            };
            Object.defineProperty(t, "__esModule", {
                value: !0
            });
            var o = n(6),
                a = n(21),
                s = n(10),
                l = n(24);
            t.default = r
        }, function(e, t, n) {
            Object.defineProperty(t, "__esModule", {
                value: !0
            });
            var r = n(9),
                i = r.parser.lexer,
                o = Object.create(i);
            t.default = o;
            var a = r.parser.terminals_,
                s = r.parser.symbols_;
            o.setInput = function(e, t) {
                this.delimiterStack = [], this.outputQueue = [], i.setInput.call(this, e, t)
            }, o.lex = function() {
                var e = -1;
                if (!this) return e;
                if (this.outputQueue.length) return this.outputQueue.shift();
                var t, n, r = i.lex.call(this),
                    o = this.delimiterStack ? this.delimiterStack[this.delimiterStack.length - 1] : -1;
                switch (a[r]) {
                    case "OPEN_FRAC":
                    case "OPEN_MODEXP":
                        this.delimiterStack.push(r);
                        break;
                    case "RADICAL_INDEX":
                        o === s.RADICAL_INDEX && (this.delimiterStack.pop(), this.pushCloseTokens(o)), this.delimiterStack.push(r);
                        break;
                    case "OPEN_RADICAL":
                        o === s.RADICAL_INDEX && this.delimiterStack.pop(), this.delimiterStack.push(r);
                        break;
                    case "SLASH":
                        for (t = !1; this.delimiterStack.length;) {
                            if ((n = this.delimiterStack.pop() || -1) === s.OPEN_FRAC) {
                                t = !0;
                                break
                            }
                            this.pushCloseTokens(n)
                        }
                        t || this.pushOpenTokens(r), this.delimiterStack.push(r);
                        break;
                    case "CLOSE_FRAC":
                        for (t = !1; this.delimiterStack.length;) {
                            if ((n = this.delimiterStack.pop() || -1) === s.SLASH) {
                                t = !0;
                                break
                            }
                            if (n === s.OPEN_FRAC) {
                                this.addMissingToken(s.SLASH), t = !0;
                                break
                            }
                            this.pushCloseTokens(n)
                        }
                        if (!t) return this.warn(), this.lex();
                        break;
                    case "CLOSE_RADICAL":
                        for (t = !1; this.delimiterStack.length;) {
                            if ((n = this.delimiterStack.pop() || -1) === s.OPEN_RADICAL) {
                                t = !0;
                                break
                            }
                            if (n === s.RADICAL_INDEX) {
                                t = !0, this.addMissingToken(s.OPEN_RADICAL);
                                break
                            }
                            this.pushCloseTokens(n)
                        }
                        t || this.pushOpenTokens(r);
                        break;
                    case "CLOSE_MODEXP":
                        for (t = !1; this.delimiterStack.length;) {
                            if ((n = this.delimiterStack.pop() || -1) === s.OPEN_MODEXP) {
                                t = !0;
                                break
                            }
                            this.pushCloseTokens(n)
                        }
                        t || this.pushOpenTokens(r);
                        break;
                    case "EOF":
                        for (; this.delimiterStack.length;) n = this.delimiterStack.pop() || -1, this.pushCloseTokens(n)
                }
                return this.outputQueue.push(r), e = this.outputQueue.shift() || -1
            }, o.warn = function() {
                this.yylloc && this.yy.warnings.push({
                    location: this.yylloc
                })
            }, o.addMissingToken = function(e) {
                this.outputQueue.push(e), this.warn()
            }, o.pushCloseTokens = function(e) {
                switch (a[e]) {
                    case "OPEN_FRAC":
                        this.addMissingToken(s.SLASH), this.addMissingToken(s.CLOSE_FRAC);
                        break;
                    case "SLASH":
                        this.addMissingToken(s.CLOSE_FRAC);
                        break;
                    case "RADICAL_INDEX":
                        this.addMissingToken(s.OPEN_RADICAL), this.addMissingToken(s.CLOSE_RADICAL);
                        break;
                    case "OPEN_RADICAL":
                        this.addMissingToken(s.CLOSE_RADICAL);
                        break;
                    case "OPEN_MODEXP":
                        this.addMissingToken(s.CLOSE_MODEXP)
                }
            }, o.pushOpenTokens = function(e) {
                switch (a[e]) {
                    case "SLASH":
                        this.addMissingToken(s.OPEN_FRAC);
                        break;
                    case "CLOSE_FRAC":
                        this.addMissingToken(s.OPEN_FRAC), this.addMissingToken(s.SLASH);
                        break;
                    case "CLOSE_RADICAL":
                        this.addMissingToken(s.OPEN_RADICAL);
                        break;
                    case "CLOSE_MODEXP":
                        this.addMissingToken(s.OPEN_MODEXP)
                }
            }
        }, function(e, t, n) {
            Object.defineProperty(t, "__esModule", {
                value: !0
            });
            var r = n(10),
                i = r.parser.lexer,
                o = Object.create(i);
            t.default = o;
            var a = r.parser.terminals_,
                s = r.parser.symbols_;
            o.setInput = function(e, t) {
                this.delimiterStack = [], this.outputQueue = [], i.setInput.call(this, e, t)
            }, o.lex = function() {
                if (this.outputQueue.length) return this.outputQueue.shift();
                var e, t, n = i.lex.call(this),
                    r = this.delimiterStack ? this.delimiterStack[this.delimiterStack.length - 1] : -1;
                switch (a[n]) {
                    case "OPEN_FRAC":
                    case "OPEN_GROUP":
                        this.delimiterStack.push(n);
                        break;
                    case "RADICAL_WITH_INDEX":
                        r === s.RADICAL_WITH_INDEX && (this.delimiterStack.pop(), this.pushCloseTokens(r)), this.delimiterStack.push(n);
                        break;
                    case "RADICAL":
                        r === s.RADICAL_WITH_INDEX && this.delimiterStack.pop(), this.delimiterStack.push(n);
                        break;
                    case "OVER":
                        for (e = !1; this.delimiterStack.length;) {
                            if ((t = this.delimiterStack.pop() || -1) === s.OPEN_FRAC) {
                                e = !0;
                                break
                            }
                            this.pushCloseTokens(t)
                        }
                        e || this.pushOpenTokens(n), this.delimiterStack.push(n);
                        break;
                    case "CLOSE_FRAC":
                        for (e = !1; this.delimiterStack.length;) {
                            if ((t = this.delimiterStack.pop() || -1) === s.OVER) {
                                e = !0;
                                break
                            }
                            if (t === s.OPEN_FRAC) {
                                this.outputQueue.push(s.OVER), e = !0;
                                break
                            }
                            this.pushCloseTokens(t)
                        }
                        e || this.pushOpenTokens(n);
                        break;
                    case "CLOSE_GROUP":
                        for (e = !1; this.delimiterStack.length;) {
                            if ((t = this.delimiterStack.pop() || -1) === s.OPEN_GROUP) {
                                e = !0;
                                break
                            }
                            this.pushCloseTokens(t)
                        }
                        e || this.pushOpenTokens(n);
                        break;
                    case "CLOSE_RADICAL":
                        for (e = !1; this.delimiterStack.length;) {
                            if ((t = this.delimiterStack.pop() || -1) === s.RADICAL || t === s.RADICAL_WITH_INDEX) {
                                e = !0;
                                break
                            }
                            this.pushCloseTokens(t)
                        }
                        e || this.pushOpenTokens(n);
                        break;
                    case "EOF":
                        for (; this.delimiterStack.length;) t = this.delimiterStack.pop() || -1, this.pushCloseTokens(t)
                }
                return this.outputQueue.push(n), this.outputQueue.shift() || -1
            }, o.warn = function() {
                this.yylloc && this.yy.warnings.push({
                    location: this.yylloc
                })
            }, o.addMissingToken = function(e) {
                this.outputQueue.push(e), this.warn()
            }, o.pushCloseTokens = function(e) {
                switch (a[e]) {
                    case "OPEN_FRAC":
                        this.addMissingToken(s.OVER), this.addMissingToken(s.CLOSE_FRAC);
                        break;
                    case "OVER":
                        this.addMissingToken(s.CLOSE_FRAC);
                        break;
                    case "OPEN_GROUP":
                        this.addMissingToken(s.CLOSE_GROUP);
                        break;
                    case "RADICAL_WITH_INDEX":
                    case "RADICAL":
                        this.addMissingToken(s.CLOSE_RADICAL)
                }
            }, o.pushOpenTokens = function(e) {
                switch (a[e]) {
                    case "OVER":
                        this.addMissingToken(s.OPEN_FRAC);
                        break;
                    case "CLOSE_FRAC":
                        this.addMissingToken(s.OPEN_FRAC), this.addMissingToken(s.OVER);
                        break;
                    case "CLOSE_GROUP":
                        this.addMissingToken(s.OPEN_GROUP);
                        break;
                    case "CLOSE_RADICAL":
                        this.addMissingToken(s.RADICAL)
                }
            }
        }, function(e, t, n) {
            function r(e) {
                return e.isError
            }

            function i(e) {
                return !e.isError
            }

            function o(e, t) {
                return r(e) ? e : {
                    isError: !1,
                    value: t(e.value)
                }
            }
            Object.defineProperty(t, "__esModule", {
                value: !0
            }), t.isErr = r, t.isOk = i, t.map = o
        }, function(e, t, n) {
            function r(e, t) {
                for (var n = "", o = !1, a = "", s = i(e), p = 0; p < e.length; p++) {
                    var h = e[p],
                        f = p + 1 < e.length ? e[p + 1] : null;
                    switch (h.type) {
                        case "terminal":
                            var y = d.getAutoOperator(e.slice(p));
                            "" !== y.value ? (n += y.value, p += y.terminalCount - 1) : " " !== h.value || o ? (s[p] === m ? n += "\\left" : s[p] === g && (n += "\\right"), n += h.value) : n += "\\ ", o = !1;
                            break;
                        case "command":
                            var v = h.value.slice(1).trim();
                            f && "terminal" === f.type && /[a-z]/.test(f.value) ? (n += v,
                                o = !1) : d.containsValue(v) ? (n += "\\operatorname{" + v + "}", o = !0) : (n += h.value, o = !0);
                            break;
                        case "expression":
                            n += h.value;
                            break;
                        case "fraction":
                            n += l(h.numerator, h.denominator);
                            break;
                        case "radical":
                            n += "\\sqrt", h.index && (n += "[" + r(h.index) + "]"), n += "{" + r(h.value) + "}";
                            break;
                        case "basic_level":
                            n += c(h.level, h.value, a), "9" === h.level && (a = "");
                            break;
                        case "bracketed_level":
                            n += u(h.level, h.lbrack, h.value, h.rbrack, a), "9" === h.level && (a = "");
                            break;
                        case "primes":
                            !f || "basic_level" !== f.type && "bracketed_level" !== f.type || "5" !== f.level ? t && "" !== t ? (n += Array(h.value.length + 1).join("\\prime "), a = "") : (n += h.value, a = "") : a = h.value
                    }
                }
                return n += a, n.replace(/([^\\])( )$/, "$1")
            }

            function i(e) {
                for (var t = [], n = [], r = 0; r < e.length; r++) {
                    var i = e[r];
                    if (o(i)) t.push({
                        direction: m,
                        index: r
                    }), n.push(y);
                    else if (a(i)) {
                        for (; t.length && t[t.length - 1].direction === v;) t.pop();
                        if (t.length) {
                            var l = t.pop();
                            if (l) {
                                var c = l.index;
                                n[c] = m, n.push(g)
                            }
                        } else n.push(y)
                    } else if (s(i))
                        if (t.length && t[t.length - 1].direction === v) {
                            var l = t.pop();
                            if (l) {
                                var c = l.index;
                                n[c] = m, n.push(g)
                            }
                        } else t.push({
                            direction: v,
                            index: r
                        }), n.push(y);
                    else n.push(y)
                }
                return n
            }

            function o(e) {
                return "terminal" === e.type && /^(\\langle |\[|\(|\\{)$/.test(e.value)
            }

            function a(e) {
                return "terminal" === e.type && /^(\\rangle |\]|\)|\\})$/.test(e.value)
            }

            function s(e) {
                return "terminal" === e.type && /^(\\\||\|)$/.test(e.value)
            }

            function l(e, t) {
                return "\\frac{" + r(e) + "}{" + r(t) + "}"
            }

            function c(e, t, n) {
                var i = "",
                    o = "{" + r(t, e) + "}";
                return "9" === e ? i += n + "^" + o : "5" === e && (i += "_" + o), i
            }

            function u(e, t, n, i, o) {
                var a = "",
                    s = "{" + t + r(n, e) + i + "}";
                return "9" === e ? a += o + "^" + s : "5" === e && (a += "_" + s), a
            }

            function p(e, t) {
                return t && t.operatorNames ? d.setOperatorNames(t.operatorNames) : d.resetOperatorNames(), f.map(h.default(e, t), function(e) {
                    return b(e, "")
                })
            }
            Object.defineProperty(t, "__esModule", {
                value: !0
            });
            var d = n(2),
                h = n(19),
                f = n(0),
                m = 1,
                g = -1,
                y = 0,
                v = 2,
                b = r;
            t.default = p
        }, function(e, t, n) {
            function r(e) {
                return {
                    type: "terminal",
                    value: e
                }
            }

            function i(e) {
                return {
                    type: "command",
                    value: e
                }
            }

            function o(e, t) {
                return {
                    type: "basic_level",
                    level: e,
                    value: t
                }
            }

            function a(e, t, n, r) {
                return {
                    type: "bracketed_level",
                    level: e,
                    lbrack: t,
                    value: n,
                    rbrack: r
                }
            }

            function s(e) {
                return {
                    type: "primes",
                    value: e.length > 0 ? Array(e.length + 1).join("'") : ""
                }
            }

            function l(e, t) {
                return {
                    type: "fraction",
                    numerator: e,
                    denominator: t
                }
            }

            function c(e, t) {
                return {
                    type: "radical",
                    value: e,
                    index: t
                }
            }

            function u(e) {
                return {
                    type: "expression",
                    value: e
                }
            }

            function p() {
                for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
                return Array.prototype.concat.apply([], e)
            }

            function d(e) {
                if (f.hasOwnProperty(e)) return f[e] + " ";
                throw new Error("Unknown Greek letter")
            }

            function h(e) {
                for (var t = "", n = "A".charCodeAt(0) - 1, r = 0, i = e; r < i.length; r++) {
                    var o = i[r];
                    t += "4" === o ? "." : "J" === o ? "0" : o.charCodeAt(0) - n
                }
                return t
            }
            Object.defineProperty(t, "__esModule", {
                value: !0
            }), t.terminal = r, t.command = i, t.basic_level = o, t.bracketed_level = a, t.primes = s, t.fraction = l, t.radical = c, t.expression = u, t.group = p;
            var f = {
                ",.&": "\\Chi",
                ",.:": "\\Eta",
                ",.?": "\\Theta",
                ",.A": "\\Alpha",
                ",.B": "\\Beta",
                ",.D": "\\Delta",
                ",.E": "\\Epsilon",
                ",.F": "\\Phi",
                ",.G": "\\Gamma",
                ",.I": "\\Iota",
                ",.K": "\\Kappa",
                ",.L": "\\Lambda",
                ",.M": "\\Mu",
                ",.N": "\\Nu",
                ",.O": "\\Omicron",
                ",.P": "\\prod",
                ",.R": "\\Rho",
                ",.S": "\\sum",
                ",.T": "\\Tau",
                ",.U": "\\Upsilon",
                ",.W": "\\Omega",
                ",.X": "\\Xi",
                ",.Y": "\\Psi",
                ",.Z": "\\Zeta",
                ".&": "\\chi",
                ".:": "\\eta",
                ".?": "\\theta",
                ".A": "\\alpha",
                ".B": "\\beta",
                ".D": "\\delta",
                ".E": "\\epsilon",
                ".F": "\\phi",
                ".G": "\\gamma",
                ".I": "\\iota",
                ".K": "\\kappa",
                ".L": "\\lambda",
                ".M": "\\mu",
                ".N": "\\nu",
                ".O": "\\omicron",
                ".P": "\\pi",
                ".R": "\\rho",
                ".S": "\\sigma",
                ".T": "\\tau",
                ".U": "\\upsilon",
                ".W": "\\omega",
                ".X": "\\xi",
                ".Y": "\\psi",
                ".Z": "\\zeta"
            };
            t.greek = d, t.to_number = h
        }, function(e, t, n) {
            function r(e) {
                return String.fromCharCode(h + e)
            }

            function i(e) {
                return e.charCodeAt(0) - h
            }

            function o(e) {
                return d[e]
            }

            function a(e) {
                return d.indexOf(e)
            }

            function s(e) {
                for (var t = "", n = 0, i = e; n < i.length; n++) {
                    t += r(a(i[n]))
                }
                return t
            }

            function l(e) {
                for (var t = "", n = 0, r = e; n < r.length; n++) {
                    t += o(i(r[n]))
                }
                return t
            }

            function c(e) {
                return l(e).replace(/[@-^]/g, function(e) {
                    return String.fromCharCode(e.charCodeAt(0) + 32)
                })
            }

            function u(e) {
                var t = "";
                if (e)
                    for (var n = 0, r = e; n < r.length; n++) {
                        var i = r[n],
                            o = i.charCodeAt(0);
                        96 <= o && o <= 127 && (o -= 32, i = String.fromCharCode(o)), 32 <= o && o <= 95 && (i = s(i), o = i.charCodeAt(0)), 10305 <= o && o <= 10495 && (o = 10240 + (o - 1024) % 64, i = String.fromCharCode(o)), t += 10240 <= o && o <= 10304 ? i : String.fromCharCode(10240)
                    }
                return t
            }

            function p(e) {
                for (var t = 0; t < e.length; t++) {
                    var n = e.charCodeAt(t);
                    if (n < 10240 || n > 10304) return !1
                }
                return !0
            }
            Object.defineProperty(t, "__esModule", {
                value: !0
            });
            var d = " A1B'K2L@CIF/MSP\"E3H9O6R^DJG>NTQ,*5<-U8V.%[$+X!&;:4\\0Z7(_?W]#Y)=",
                h = 10240;
            t.toBrailleAscii = l, t.toExpandedBrailleAscii = c, t.coerceToSixDotCells = u, t.isSixDotCells = p
        }, function(e, t, n) {
            n(3), e.exports = n(3)
        }])
    }), define("graphing/canvas-braille", ["require", "exports", "tslib", "./projection", "./screen", "graphing-calc/json/graph-settings", "abraham"], function(e, t, n, r, i, o, a) {
        "use strict";

        function s(e, t, n, r, i) {
            var o = e.dotSpacing,
                a = 1 + o,
                s = i.charCodeAt(0) - j;
            1 & s && t.fillRect(n, r, 1, 1), 2 & s && t.fillRect(n, r + a, 1, 1), 4 & s && t.fillRect(n, r + 2 * a, 1, 1), 8 & s && t.fillRect(n + a, r, 1, 1), 16 & s && t.fillRect(n + a, r + a, 1, 1), 32 & s && t.fillRect(n + a, r + 2 * a, 1, 1)
        }

        function l(e, t) {
            for (var n = t.x, r = t.y, i = t.width, o = t.height, a = e.getImageData(n, r, i, o).data, s = 3; s < a.length; s += 4)
                if (0 !== a[s]) return !1;
            return !0
        }

        function c(e, t) {
            for (var n = t.x, r = t.y, i = t.width, o = t.height, a = e.getImageData(n, r, i, o).data, s = 3; s < a.length; s += 4)
                if (0 === a[s]) return !1;
            return !0
        }

        function u(e, t, n, r, i) {
            return l(t, f(e, n, r, i))
        }

        function p(e, t, n, r, i) {
            for (var o = e.dotSpacing, a = 3 + 2 * o, l = 0; l < i.length; l++) s(e, t, n + a * l, r, i[l])
        }

        function d(e, t) {
            var n = e.dotSpacing;
            return (2 + n) * t.length + (1 + n) * (t.length - 1)
        }

        function h(e, t) {
            return 3 + 2 * e.dotSpacing
        }

        function f(e, t, n, r) {
            var i = e.cellPadding;
            return {
                x: t - i,
                y: n - i,
                width: d(e, r) + 2 * i,
                height: h(e, r) + 2 * i
            }
        }

        function m(e, t) {
            if (!e) return t;
            var n = Math.min(e.x, t.x),
                r = Math.min(e.y, t.y);
            return {
                x: n,
                y: r,
                width: Math.max(e.x + e.width, t.x + t.width) - n,
                height: Math.max(e.y + e.height, t.y + t.height) - r
            }
        }

        function g(e, t, n) {
            return Math.min(Math.max(e, t), n)
        }

        function y(e, t, n, r, i) {
            return {
                x: g(n, 0, t.canvas.width - d(e, i)),
                y: g(r, 0, t.canvas.height - h(e, i))
            }
        }

        function v(e, t, n, r, i) {
            var o = t.fillStyle;
            t.fillStyle = "white";
            var a = f(e, n, r, i);
            t.fillRect(a.x, a.y, a.width, a.height), t.fillStyle = "black", p(e, t, n, r, i), t.fillStyle = o
        }

        function b(e, t, n, r) {
            var i = e.cellPadding;
            return {
                x: Math.round(t - (d(e, r) + i)),
                y: n
            }
        }

        function x(e) {
            return e.replace(/\u283C(?!$)/g, "")
        }

        function w(e, t) {
            var n = "nemeth" === t ? a.latexToNemeth(e) : a.latexToUeb(e);
            return n.isError ? "" : x(n.value)
        }

        function _(e, t) {
            return t >= 0 ? e * Math.pow(10, t) : e / Math.pow(10, -t)
        }

        function S(e, t, n, r) {
            var i = n[0],
                o = n[1],
                a = Math.ceil(Math.log(o - i) / Math.LN10) - 1,
                s = a,
                l = 5;
            e: for (var c = a; a - c < 4; c--)
                for (var u = 0, p = [5, 2, 1]; u < p.length; u++) {
                    var h = p[u],
                        f = _(h, c),
                        m = Math.floor(i / f) + 1,
                        g = Math.ceil(o / f) - 1,
                        y = Math.abs(r(f) - r(0)),
                        v = w(String(_(m * h, c)), t),
                        b = w(String(_(g * h, c)), t);
                    if (y < d(e, v) + d(e, " ") || y < d(e, b) + d(e, " ")) break e;
                    if (g - m >= 15) break e;
                    s = c, l = h
                }
            return {
                int: l,
                exp: s
            }
        }

        function E(e, t, n) {
            return S(e, t, [n.viewport.xmin, n.viewport.xmax], function(e) {
                return n.mapx(e)
            })
        }

        function M(e, t, n) {
            return n.viewport.isSquare(n.screen) ? E(e, t, n) : S(e, t, [n.viewport.ymin, n.viewport.ymax], function(e) {
                return n.mapy(e)
            })
        }

        function I(e, t) {
            for (var n = e.int, r = e.exp, i = t[0], o = t[1], a = Math.ceil(i / _(n, r)), s = Math.floor(o / _(n, r)), l = [], c = a; c <= s; c++) l.push(_(c * n, r));
            return l
        }

        function T(e, t, n) {
            return {
                x: I(E(e, t, n), [n.viewport.xmin, n.viewport.xmax]),
                y: I(M(e, t, n), [n.viewport.ymin, n.viewport.ymax])
            }
        }

        function C(e, t, a, s, p) {
            var g, x, _, S, E, M, I, C;
            if (void 0 !== a.margins && void 0 !== t) {
                var j = k(s),
                    V = a.margins,
                    z = n.__assign({}, t.settings),
                    U = z.showGrid && D(s),
                    G = !!z.showXAxis,
                    H = !!z.showYAxis,
                    K = !!z.xAxisNumbers,
                    W = z.xAxisArrowMode,
                    Y = !!z.yAxisNumbers,
                    X = z.yAxisArrowMode,
                    $ = j.graphLineWidth,
                    Q = {
                        showGrid: !1,
                        xAxisNumbers: !1,
                        xAxisArrowMode: o.AxisArrowModes.NONE,
                        yAxisNumbers: !1,
                        yAxisArrowMode: o.AxisArrowModes.NONE,
                        showXAxis: !1,
                        showYAxis: !1,
                        graphLineWidth: $,
                        pointLineWidth: 2.5,
                        curveOpacity: 1,
                        globalCurveColor: "#000",
                        disableFill: !0
                    };
                for (var Z in Q) t.settings[Z] = Q[Z];
                var J = e.width - V.right - V.left,
                    ee = e.height - V.top - V.bottom,
                    te = new i.Screen(J, ee),
                    ne = t.getProjection().viewport;
                t.settings.squareAxes && (ne = ne.squareCrop(te));
                var re = new r.Projection(te, ne, t.settings),
                    ie = e.getContext("2d"),
                    oe = document.createElement("canvas");
                oe.width = J, oe.height = ee;
                var ae = oe.getContext("2d"),
                    se = document.createElement("canvas");
                se.width = J, se.height = ee;
                var le = se.getContext("2d"),
                    ce = document.createElement("canvas");
                ce.width = J, ce.height = ee;
                var ue = ce.getContext("2d"),
                    pe = document.createElement("canvas");
                pe.width = J, pe.height = ee;
                var de = pe.getContext("2d"),
                    he = document.createElement("canvas");
                he.width = J, he.height = ee;
                var fe = he.getContext("2d");
                if (null !== ie && null !== de && null !== ae && null !== ue && null !== fe && null !== le) {
                    t.settings.disableFill = !0, t.screenshotToCanvas(pe, {
                        width: J,
                        height: ee,
                        targetPixelRatio: 1,
                        transparentBackground: !0
                    }), t.settings.disableFill = !1, t.screenshotToCanvas(oe, {
                        width: J,
                        height: ee,
                        targetPixelRatio: 1,
                        transparentBackground: !0
                    }), ie.fillStyle = "white", ie.fillRect(0, 0, e.width, e.height);
                    var me = Math.round(re.mapx(0)),
                        ge = Math.round(re.mapy(0)),
                        ye = "" !== z.xAxisLabel ? z.xAxisLabel.replace(/ /g, "\\ ") : "x",
                        ve = "" !== z.yAxisLabel ? z.yAxisLabel.replace(/ /g, "\\ ") : "y";
                    if (G && re.coordsAreOnscreen(J - 6, ge - 8, 0)) {
                        var be = n.__assign({}, j, {
                                cellPadding: j.cellPadding + 1
                            }),
                            xe = 2 + 2 * h(be, ye),
                            we = J - 2,
                            _e = ge - xe,
                            Se = w(ye, p);
                        g = b(be, we, _e, Se), we = g.x, _e = g.y, x = y(be, ae, we, _e, Se), we = x.x, _e = x.y, v(be, fe, we, _e, Se)
                    }
                    if (H && re.coordsAreOnscreen(me + 4, 1, 0)) {
                        var be = n.__assign({}, j, {
                                cellPadding: j.cellPadding + 1
                            }),
                            we = me + 4,
                            _e = 1,
                            Se = w(ve, p);
                        _ = y(be, ae, we, _e, Se), we = _.x, _e = _.y, v(be, fe, we, _e, Se)
                    }
                    var Ee = T(j, p, re),
                        Me = Ee.x,
                        Ie = Ee.y;
                    if (G) {
                        for (var Te = void 0, Ce = 0, ke = Me; Ce < ke.length; Ce++) {
                            var De = ke[Ce];
                            if (0 !== De || !H) {
                                var Pe = Math.round(re.mapx(De));
                                if (!(Pe < 2 || Pe > re.screen.width - 2) && K) {
                                    var Le = d(j, w("-1", p)) - d(j, w("1", p)),
                                        Ae = De < 0 ? Le + 1 : 1,
                                        we = Pe - Ae,
                                        _e = ge + 4,
                                        Se = w("" + De, p);
                                    S = y(j, fe, we, _e, Se), we = S.x, _e = S.y, u(j, de, we, _e, Se) && (v(j, fe, we, _e, Se), Te = m(Te, f(j, we, _e, Se)))
                                }
                            }
                        }
                        if (j.embossPatternInequalities && Te) {
                            var Oe = {
                                x: 0,
                                y: ge,
                                width: J,
                                height: 0
                            };
                            Te = m(Te, Oe), ue.fillStyle = "white", ue.fillRect(Te.x, Te.y, Te.width, Te.height)
                        }
                    }
                    if (H) {
                        for (var Te = void 0, Fe = 0, qe = Ie; Fe < qe.length; Fe++) {
                            var Ne = qe[Fe];
                            if (0 !== Ne || !G) {
                                var Re = Math.round(re.mapy(Ne));
                                if (!(Re < 2 || Re > re.screen.height - 2)) {
                                    var xe = -Math.ceil(h(j, " ") / 2);
                                    if (Y) {
                                        var we = me - 4,
                                            _e = Re + xe,
                                            Se = w("" + Ne, p);
                                        E = b(j, we, _e, Se), we = E.x, _e = E.y, M = y(j, fe, we, _e, Se), we = M.x, _e = M.y, u(j, de, we, _e, Se) && (v(j, fe, we, _e, Se), Te = m(Te, f(j, we, _e, Se)))
                                    }
                                }
                            }
                        }
                        if (j.embossPatternInequalities && Te) {
                            var Oe = {
                                x: me,
                                y: 0,
                                width: 0,
                                height: ee
                            };
                            Te = m(Te, Oe), ue.fillStyle = "white", ue.fillRect(Te.x, Te.y, Te.width, Te.height)
                        }
                    }
                    if (G && H) {
                        var we = me - 2,
                            _e = ge + 2,
                            Se = w(K || Y ? "0" : "o", p);
                        I = b(j, we, _e, Se), we = I.x, _e = I.y, re.coordsAreOnscreen(we, _e, 0) && (C = y(j, fe, we, _e, Se), we = C.x, _e = C.y, u(j, de, we, _e, Se) && v(j, fe, we, _e, Se))
                    }
                    for (var Be = 0, je = Me; Be < je.length; Be++) {
                        var De = je[Be],
                            Pe = Math.round(re.mapx(De));
                        Pe < 2 || Pe > re.screen.width - 2 || (H && 0 === De || U && A(ue, "white", Pe - 1, 0, ee, 3))
                    }
                    for (var Ve = 0, ze = Ie; Ve < ze.length; Ve++) {
                        var Ne = ze[Ve],
                            Re = Math.round(re.mapy(Ne));
                        Re < 2 || Re > re.screen.height - 2 || (G && 0 === Ne || U && O(ue, "white", Re - 1, 0, J, 3))
                    }
                    G && O(ue, "white", ge - 3, 0, J, 7), H && A(ue, "white", me - 3, 0, ee, 7);
                    for (var Ue = 0, Ge = Me; Ue < Ge.length; Ue++) {
                        var De = Ge[Ue],
                            Pe = Math.round(re.mapx(De));
                        Pe < 2 || Pe > re.screen.width - 2 || (H && 0 === De || (U ? A(ue, L(s), Pe, 0, ee) : G && A(ue, L(s), Pe, ge - 3, ge + 2)))
                    }
                    for (var He = 0, Ke = Ie; He < Ke.length; He++) {
                        var Ne = Ke[He],
                            Re = Math.round(re.mapy(Ne));
                        Re < 2 || Re > re.screen.height - 2 || (G && 0 === Ne || (U ? O(ue, L(s), Re, 0, J) : H && O(ue, L(s), Re, me - 3, me + 2)))
                    }
                    if (G && O(ue, P(s), ge, 0, J), H && A(ue, P(s), me, 0, ee), X !== o.AxisArrowModes.NONE && (R(ue, P(s), me, 0), X === o.AxisArrowModes.BOTH && N(ue, P(s), me, ee - 1)), W !== o.AxisArrowModes.NONE && (F(ue, P(s), J - 1, ge), W === o.AxisArrowModes.BOTH && q(ue, P(s), 0, ge)), j.embossPatternInequalities)
                        for (var we = 0; we < J; we += 6)
                            for (var _e = 0; _e < ee; _e += 6) {
                                var We = {
                                    x: we,
                                    y: _e,
                                    width: 3,
                                    height: 3
                                };
                                c(ae, We) && l(ue, We) && l(de, We) && l(fe, We) && B(le, "black", we, _e)
                            }
                    j.embossPatternInequalities || ie.drawImage(oe, V.left, V.top), ie.drawImage(ce, V.left, V.top), ie.drawImage(pe, V.left, V.top), ie.drawImage(he, V.left, V.top), j.embossPatternInequalities && ie.drawImage(se, V.left, V.top)
                }
                for (var Z in Q) t.settings[Z] = z[Z]
            }
        }

        function k(e) {
            if ("etc8" === e || "etc11" === e) return {
                dotSpacing: 0,
                cellPadding: 1,
                graphLineWidth: 1.75,
                embossPatternInequalities: !0
            };
            if ("vpmax8" === e || "vpmax11" === e) return {
                dotSpacing: 1,
                cellPadding: 2,
                graphLineWidth: 1,
                embossPatternInequalities: !1
            };
            var t = e;
            throw new Error("Unexpected embosser model " + t)
        }

        function D(e) {
            if ("etc8" === e || "etc11" === e) return !1;
            if ("vpmax8" === e || "vpmax11" === e) return !0;
            var t = e;
            throw new Error("Unexpected embosser model " + t)
        }

        function P(e) {
            switch (e) {
                case "vpmax8":
                case "vpmax11":
                    return "rgb(145, 145, 145)";
                case "etc8":
                case "etc11":
                    return "rgb(0, 0, 0)";
                default:
                    var t = e;
                    throw new Error("Unexpected embosser model: " + t)
            }
        }

        function L(e) {
            switch (e) {
                case "vpmax8":
                case "vpmax11":
                    return "rgb(219, 219, 219)";
                case "etc8":
                case "etc11":
                    return "rgb(0, 0, 0)";
                default:
                    var t = e;
                    throw new Error("Unexpected embosser model: " + t)
            }
        }

        function A(e, t, n, r, i, o) {
            void 0 === o && (o = 1);
            var a = e.fillStyle;
            e.fillStyle = t, e.fillRect(n - 1, r, o, i - r), e.fillStyle = a
        }

        function O(e, t, n, r, i, o) {
            void 0 === o && (o = 1);
            var a = e.fillStyle;
            e.fillStyle = t, e.fillRect(r, n - 1, i - r, o), e.fillStyle = a
        }

        function F(e, t, n, r) {
            var i = e.fillStyle;
            e.fillStyle = t;
            for (var o = -2; o <= 2; o++) e.fillRect(n - Math.abs(o), r - 1 + o, 1, 1);
            e.fillStyle = i
        }

        function q(e, t, n, r) {
            var i = e.fillStyle;
            e.fillStyle = t;
            for (var o = -2; o <= 2; o++) e.fillRect(n + Math.abs(o), r - 1 + o, 1, 1);
            e.fillStyle = i
        }

        function N(e, t, n, r) {
            var i = e.fillStyle;
            e.fillStyle = t;
            for (var o = -2; o <= 2; o++) e.fillRect(n - 1 + o, r - Math.abs(o), 1, 1);
            e.fillStyle = i
        }

        function R(e, t, n, r) {
            var i = e.fillStyle;
            e.fillStyle = t;
            for (var o = -2; o <= 2; o++) e.fillRect(n - 1 + o, r + Math.abs(o), 1, 1);
            e.fillStyle = i
        }

        function B(e, t, n, r) {
            var i = e.fillStyle;
            e.fillStyle = t, e.fillRect(n + 1, r, 1, 1), e.fillRect(n, r + 1, 1, 1), e.fillRect(n + 1, r + 1, 1, 1), e.fillRect(n + 2, r + 1, 1, 1), e.fillRect(n + 1, r + 2, 1, 1), e.fillStyle = i
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var j = 10240;
        t.createBrailleImage = C
    }), define("graphing/braille-size-options", ["require", "exports"], function(e, t) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.brailleSizes = {}, t.brailleSizes.vpmax8 = {
            width: 170,
            height: 220,
            margins: {
                left: 5,
                top: 15,
                right: 5,
                bottom: 50
            },
            name: "VP Max (8.5 x 11 in)"
        }, t.brailleSizes.vpmax11 = {
            width: 230,
            height: 220,
            margins: {
                left: 15,
                top: 15,
                right: 5,
                bottom: 5
            },
            name: "VP Max (11.5 x 11 in)"
        }, t.brailleSizes.etc8 = {
            width: 96,
            height: 96,
            margins: {
                left: 5,
                top: 15,
                right: 0,
                bottom: 0
            },
            name: "ETC Romeo/Juliet (8.5 x 11 in)"
        }, t.brailleSizes.etc11 = {
            width: 132,
            height: 134,
            margins: {
                left: 10,
                top: 15,
                right: 5,
                bottom: 5
            },
            name: "ETC Romeo/Juliet (11.5 x 11 in)"
        }
    }), define("graphing/movablepointslayer", ["require", "exports", "tslib", "dcgview", "browser", "graphing/label", "graphing-calc/json/expression", "lib/aria", "./constants", "jquery"], function(e, t, n, r, i, o, a, s, l, c) {
        "use strict";

        function u(e, t, n) {
            return "X: " + o.value(e, n.xmax - n.xmin).ariaString + ". Y: " + o.value(t, n.ymax - n.ymin).ariaString
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var p = r.Components.For,
            d = function(e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return n.__extends(t, e), t.prototype.init = function() {
                    this.grapher = this.props.grapher(), this.renderedPointsIdOrder = [], this.renderedPoints = {}
                }, t.prototype.template = function() {
                    var e = this;
                    return r.createElement(p, {
                        each: function() {
                            return e.renderedPointsIdOrder
                        }
                    }, r.createElement("div", {
                        class: r.const("dcg-graph-outer"),
                        style: this.const({
                            "z-index": 0
                        }),
                        onFocusin: function() {
                            return e.requestRedrawNextFrame()
                        },
                        onFocusout: function() {
                            return e.requestRedrawNextFrame()
                        },
                        didMount: this.didMountRoot.bind(this)
                    }, function(t) {
                        return r.createElement("div", {
                            class: e.const({
                                "dcg-tabbable-point": !0,
                                "dcg-movable-point": "movable" === e.renderedPoints[t].type
                            }),
                            style: function() {
                                return {
                                    transform: e.getTransform(t)
                                }
                            },
                            role: r.const("button"),
                            "aria-roledescription": r.const("point"),
                            "dcg-mp-id": e.const(t),
                            tabindex: function() {
                                return e.getTabIndex(t)
                            },
                            "aria-hidden": e.bindFn(e.getAriaHidden)
                        })
                    }))
                }, t.prototype.redraw = function(e, t, n) {
                    var r = this,
                        i = this.grapher.graphSketches,
                        o = this.renderedPoints;
                    this.renderedPoints = {}, this.renderedPointsIdOrder = [];
                    var a, s = this.getFocusedPointId(),
                        l = function(i) {
                            var a = r.processPOI(e, t, i, o[i.id], n, s);
                            a && (r.renderedPoints[i.id] = a, r.renderedPointsIdOrder.push(i.id))
                        };
                    for (a in i) {
                        var c = i[a];
                        c.visible && (c.getMovablePoints().forEach(l), c.getStaticLabeledPoints().forEach(l))
                    }
                    var u = this.renderedPoints[this.hoveredPointId],
                        p = this.renderedPoints[this.pressedPointId],
                        d = u && u.poi,
                        h = p && p.poi;
                    d || this.setHoveredPointId(void 0), h || this.setPressedPointId(void 0);
                    var f, m, g = h || d;
                    g ? (f = "movable-point" === g.type && g.tableInfo && g.tableInfo.dragX, m = "movable-point" === g.type && g.tableInfo && g.tableInfo.dragY, f && m || !f && !m ? this.grapher.setLayerClass("movablePoints", "dcg-mouse-over-movable-point") : f ? this.grapher.setLayerClass("movablePoints", "dcg-mouse-over-movable-point-ew") : this.grapher.setLayerClass("movablePoints", "dcg-mouse-over-movable-point-ns")) : this.grapher.setLayerClass("movablePoints", void 0), this.update(), this.speakAriaAlert()
                }, t.prototype.drawForScreenshot = function(e, t, n, r) {
                    var i = this,
                        o = this.grapher.graphSketches;
                    for (var a in o) {
                        var s = o[a];
                        s.visible && s.getMovablePoints().forEach(function(o) {
                            var a = {
                                screenX: t.mapx(o.x),
                                screenY: t.mapy(o.y),
                                color: o.color,
                                animationPercent: 0
                            };
                            i.drawMovablePointOnCtx(e, a, n, r)
                        })
                    }
                }, t.prototype.processPOI = function(e, t, n, r, i, o) {
                    var a = n.id,
                        s = n.x,
                        c = n.y,
                        u = t.mapx(s),
                        p = t.mapy(c),
                        d = o === a,
                        h = t.coordsAreOnscreen(u, p, l.OFFSCREEN_RENDER_MARGIN);
                    if (h || d) return r || (r = "movable-point" === n.type ? {
                        type: "movable",
                        id: a,
                        pointOnScreen: h,
                        poi: n,
                        projection: t,
                        screenX: screenX,
                        screenY: screenY,
                        color: n.color,
                        pointIsHovered: !1,
                        pointIsPressed: !1,
                        lastHoverActionTime: 0,
                        animationPercent: 0
                    } : {
                        type: "static",
                        id: a,
                        pointOnScreen: h,
                        poi: n,
                        projection: t,
                        screenX: screenX,
                        screenY: screenY
                    }), r.pointOnScreen = h, r.poi = n, r.projection = t, r.screenX = u, r.screenY = p, "movable" === r.type && (r.color = r.poi.color), "movable" === r.type && (this.updateMovablePointAnimation(r), this.drawMovablePointOnCtx(e, r, i)), r
                }, t.prototype.drawMovablePointOnCtx = function(e, t, n, r) {
                    var i;
                    i = r || (this.grapher.settings.config.projectorMode ? 13.5 : 10.5);
                    var o = t.color,
                        a = t.screenX,
                        s = t.screenY,
                        l = t.animationPercent || 0;
                    n.push({
                        left: a - i,
                        right: a + i,
                        top: s - i,
                        bottom: s + i
                    }), e.save(), e.fillStyle = o, e.globalAlpha = .35, e.beginPath(), e.moveTo(a + i, s), e.arc(a, s, i, 0, 2 * Math.PI, !0), e.closePath(), e.fill(), e.globalAlpha = 1, i *= .3 + .7 * l, e.beginPath(), e.moveTo(a + i, s), e.arc(a, s, i, 0, 2 * Math.PI, !0), e.closePath(), e.fill(), e.restore()
                }, t.prototype.updateMovablePointAnimation = function(e) {
                    var t = Date.now(),
                        n = e.id,
                        r = this.hoveredPointId === n,
                        i = this.pressedPointId === n;
                    e.pointIsPressed = i, r !== e.pointIsHovered && (e.pointIsHovered = r, e.lastHoverActionTime = t);
                    var o = e.animationPercent || 0,
                        a = t - e.lastHoverActionTime,
                        s = .004 * a;
                    i ? o = 1 : r ? (o += s, o >= 1 ? o = 1 : this.requestRedrawNextFrame()) : (o -= s, o <= 0 ? o = 0 : this.requestRedrawNextFrame()), e.animationPercent = o
                }, t.prototype.getTransform = function(e) {
                    var t = this.renderedPoints[e];
                    if (t) return i.translateRule(t.screenX, t.screenY)
                }, t.prototype.getTabIndex = function(e) {
                    var t = this.renderedPoints[e];
                    if (!t) return -1;
                    var n = t.poi,
                        r = this.grapher.controller.getItemEditableLabelMode(n.sketch.id),
                        i = "movable" === t.type || void 0 === r || r === a.EditableLabelMode.None,
                        o = this.grapher.settings,
                        s = o.config.graphpaper && o.config.enableTabindex;
                    return i && s ? 0 : -1
                }, t.prototype.getAriaHidden = function() {
                    return !this.grapher.settings.config.graphpaper
                }, t.prototype.speakAriaAlert = function() {
                    var e = this.getAriaAlert(this.lastAriaAlert);
                    this.lastAriaAlert = e, e && e.completeMessage && s.alert(e.completeMessage)
                }, t.prototype.getAriaAlert = function(e) {
                    var t = this.getFocusedPointId();
                    if (t) {
                        var n = this.renderedPoints[t];
                        if (n) {
                            e && e.id !== t && (e = void 0);
                            var r = n.poi,
                                i = n.pointOnScreen,
                                o = n.projection;
                            if (r && o) {
                                var a = o.viewport;
                                if (a) {
                                    var s, l = e && e.label,
                                        c = r.label,
                                        p = l !== c,
                                        d = e && e.coordX,
                                        h = e && e.coordY,
                                        f = r.x,
                                        m = r.y,
                                        g = f !== d || m !== h,
                                        y = u(f, m, a) + ".",
                                        v = this.grapher.controller.t,
                                        b = c || v("Graph point"),
                                        x = "movable-point" === r.type ? v(" is movable. Press Arrows or Shift+Arrows to adjust.") : "",
                                        w = i ? "" : v(" not visible on screen");
                                    return s = e ? p ? b + w : g ? y + w : "" : b + ". " + y + x + w, {
                                        id: t,
                                        coordX: f,
                                        coordY: m,
                                        label: c,
                                        completeMessage: s
                                    }
                                }
                            }
                        }
                    }
                }, t.prototype.setHoveredPointId = function(e) {
                    e !== this.hoveredPointId && (this.hoveredPointId = e, this.requestRedrawNextFrame())
                }, t.prototype.isMovingPoint = function() {
                    return !!this.pressedPointId
                }, t.prototype.setPressedPointId = function(e) {
                    e !== this.pressedPointId && (this.pressedPointId = e, this.requestRedrawNextFrame())
                }, t.prototype.getFocusedPointId = function() {
                    if (document.activeElement && c.contains(this.rootNode, document.activeElement)) {
                        return c(document.activeElement).attr("dcg-mp-id")
                    }
                }, t.prototype.getFocusedPoint = function() {
                    var e = this.getFocusedPointId();
                    if (e) {
                        var t = this.renderedPoints[e];
                        if (t) {
                            return t.poi
                        }
                    }
                }, t.prototype.didMountRoot = function(e) {
                    this.rootNode = e
                }, t.prototype.requestRedrawNextFrame = function() {
                    this.grapher.redrawAllLayers()
                }, t
            }(r.Class);
        t.default = d, t.getCoordsString = u
    }), define("graphing/integral-image", ["require", "exports"], function(e, t) {
        "use strict";

        function n(e, t, n) {
            return Math.max(t, Math.min(n, e))
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = function() {
            function e(e) {
                var t = e.data,
                    n = e.width,
                    r = e.height;
                this.imageData = e;
                for (var i = 1; i < n; i++) t[i] += t[i - 1];
                for (var o = 1; o < r; o++) t[o * n] += t[o * n - n];
                for (var a = n * r - n - r + 1, s = n - 1, l = 0; l < a; l++) {
                    var i = 1 + l % s,
                        o = 1 + Math.floor(l / s),
                        c = o * n,
                        u = i - 1 + c,
                        p = i + c - n,
                        d = i - 1 + c - n;
                    t[c + i] += t[u] + t[p] - t[d]
                }
            }
            return e.prototype.getSumForValidRect = function(e) {
                var t = e.left - 1,
                    n = e.right - 1,
                    r = e.top - 1,
                    i = e.bottom - 1,
                    o = this.imageData.width,
                    a = this.imageData.data,
                    s = a[t + r * o],
                    l = a[n + r * o],
                    c = a[t + i * o],
                    u = a[n + i * o];
                return t >= 0 && r >= 0 ? u - l - c + s : t >= 0 ? u - c : r >= 0 ? u - l : u
            }, e.prototype.getSum = function(e) {
                var t = {
                    left: n(Math.floor(e.left), 0, this.imageData.width),
                    right: n(Math.ceil(e.right), 0, this.imageData.width),
                    top: n(Math.floor(e.top), 0, this.imageData.height),
                    bottom: n(Math.ceil(e.bottom), 0, this.imageData.height)
                };
                return t.left >= t.right || t.top >= t.bottom ? 0 : this.getSumForValidRect(t)
            }, e
        }();
        t.default = r
    }), define("graphing/automatic-label-placer", ["require", "exports", "graphing/integral-image", "underscore"], function(e, t, n, r) {
        "use strict";

        function i(e, t) {
            if (!(t.width * t.height > 0)) return new n.default({
                width: 0,
                height: 0,
                data: []
            });
            b.width = 0, b.width = Math.round(t.width * v), b.height = Math.round(t.height * v);
            var r = b.getContext("2d");
            r.save(), r.scale(b.width / e.canvas.width, b.height / e.canvas.height), r.drawImage(e.canvas, 0, 0), r.restore();
            var i = r.getImageData(0, 0, b.width, b.height),
                o = i.data;
            o.length, x.length, x = new Array(o.length / 4);
            for (var a = x, s = 0; s < a.length; s++) a[s] = o[4 * s + 3];
            return new n.default({
                width: i.width,
                height: i.height,
                data: a
            })
        }

        function o(e) {
            for (var t = 0; t < e.length; t++) {
                var n = a(t, e);
                e[t] = [n]
            }
            return e.map(function(e) {
                return e[0]
            })
        }

        function a(e, t) {
            var n = 1 / 0,
                r = -1,
                i = t[e];
            if (1 === i.length) return i[0];
            for (var o = 0; o < i.length; o++) {
                var a = t[e][o].staticScore,
                    l = s(e, o, t),
                    c = a + l;
                (-1 === r || c < n) && (n = c, r = o)
            }
            return i[r]
        }

        function s(e, t, n) {
            for (var r = 0, i = n[e][t], o = 0; o < n.length; o++)
                if (o !== e) {
                    for (var a = 0, s = n[o], l = s.length - 1; l >= 0; l--) {
                        var c = s[l],
                            u = Math.max(0, Math.min(i.right, c.right) - Math.max(i.left, c.left)),
                            p = Math.max(0, Math.min(i.bottom, c.bottom) - Math.max(i.top, c.top));
                        a += u * p
                    }
                    r += a / s.length
                } return r
        }

        function l(e, t) {
            var n = t.getSum({
                left: e.left * v,
                right: e.right * v,
                top: e.top * v,
                bottom: e.bottom * v
            });
            return n /= 200, n /= v * v
        }

        function c(e, t) {
            var n = 0;
            return t.forEach(function(t) {
                n += p(e, t)
            }), n
        }

        function u(e, t) {
            var n = p(e, t);
            return 10 * (e.width * e.height - n)
        }

        function p(e, t) {
            return Math.max(0, Math.min(e.right, t.right) - Math.max(e.left, t.left)) * Math.max(0, Math.min(e.bottom, t.bottom) - Math.max(e.top, t.top))
        }

        function d(e, t, n) {
            var r;
            return function() {
                return r || (r = {
                    domObstructions: n,
                    viewport: {
                        left: 0,
                        right: t.width,
                        top: 0,
                        bottom: t.height
                    },
                    integralImage: i(e, t)
                }), r
            }
        }

        function h(e, t) {
            if (!(t.length <= 1))
                for (var n = e(), r = 0, i = t; r < i.length; r++) {
                    var o = i[r];
                    o.staticScore += u(o, n.viewport), o.staticScore += c(o, n.domObstructions), o.staticScore += l(o, n.integralImage)
                }
        }

        function f(e, t) {
            var n = t.nakedLabel ? 0 : t.pt_radius,
                i = Math.round(n / Math.sqrt(2)),
                o = [],
                a = t.pt_x,
                s = t.pt_y,
                l = t.width,
                c = t.height;
            o.push({
                left: a - l / 2,
                top: s - c / 2,
                staticScore: -1 / 0,
                orientation: "center"
            }), o.push({
                left: a + n + 3,
                top: s - c / 2,
                staticScore: 400,
                orientation: "right"
            }), o.push({
                left: a - (n + l) - 3,
                top: s - c / 2,
                staticScore: 400,
                orientation: "left"
            }), o.push({
                left: a - l / 2,
                top: s - (c + n),
                staticScore: 400,
                orientation: "above"
            }), o.push({
                left: a - (l + i),
                top: s - (c + i),
                staticScore: 400,
                orientation: "tl"
            }), o.push({
                left: a + i,
                top: s - (c + i),
                staticScore: 400,
                orientation: "tr"
            }), o.push({
                left: a - l / 2,
                top: s + n,
                staticScore: 400,
                orientation: "below"
            }), o.push({
                left: a - (l + i),
                top: s + i,
                staticScore: 400,
                orientation: "bl"
            }), o.push({
                left: a + i,
                top: s + i,
                staticScore: 400,
                orientation: "br"
            });
            var u = o.map(function(e) {
                var n = Math.round(e.left),
                    r = Math.round(e.left + l),
                    i = Math.round(e.top),
                    o = Math.round(e.top + c);
                return {
                    pt_x: Math.round(a),
                    pt_y: Math.round(s),
                    left: n,
                    right: r,
                    top: i,
                    bottom: o,
                    width: r - n,
                    height: o - i,
                    staticScore: t.priorOrientation === e.orientation ? e.staticScore - 20 : e.staticScore,
                    orientation: e.orientation
                }
            });
            return u = t.enforceOrientation && "default" !== t.enforceOrientation ? r.filter(u, function(e) {
                return e.orientation === t.enforceOrientation
            }) : t.nakedLabel ? r.filter(u, function(e) {
                return "center" === e.orientation
            }) : t.keepOrientation && t.priorOrientation ? r.filter(u, function(e) {
                return e.orientation === t.priorOrientation
            }) : r.filter(u, function(e) {
                return "center" !== e.orientation
            }), h(e, u), u
        }

        function m(e, t) {
            for (var n = [], i = t.width, o = t.height, a = i / 2, s = o / 2, l = t.pt_x1, c = t.pt_y1, u = t.pt_x2, p = t.pt_y2, d = (p - c) / (u - l), f = Math.atan2(p - c, u - l) + Math.PI / 2, m = 5 * Math.cos(f), g = 5 * Math.sin(f), y = Math.min(c, p) - Math.abs(g) - o, v = Math.max(c, p) + Math.abs(g), b = [.5, .4, .6, .2, .8], x = [0, 20, 20, 40, 40], w = [], _ = 0, S = b; _ < S.length; _++) {
                var E = S[_];
                w.push({
                    x: l * (1 - E) + u * E,
                    y: c * (1 - E) + p * E
                })
            }
            for (var M = 0; M < w.length; M++) {
                var I, T, C, k, D = w[M];
                if (d >= 2 || d <= -2) {
                    C = k = D.y - s;
                    var P = Math.abs((u - l) / (p - c) * s) + Math.abs(m);
                    I = D.x + P, T = D.x - P - i
                } else if (d <= .05 && d >= -.05) {
                    I = T = D.x - a;
                    var L = Math.abs(d * a) + Math.abs(g);
                    C = D.y - L - o, k = D.y + L
                } else m > 0 ? (I = D.x + m, T = D.x - m - i) : (I = D.x + m - i, T = D.x - m), g > 0 ? (C = D.y + g, k = D.y - g - o) : (C = D.y + g - o, k = D.y - g);
                C < y ? C = y : C > v && (C = v), k < y ? k = y : k > v && (k = v);
                var A = (u - l) * (C - c) - (p - c) * (I - l) > 0;
                n.push({
                    pt_x: D.x,
                    pt_y: D.y,
                    left: I,
                    top: C,
                    staticScore: x[M],
                    orientation: M.toString() + (A ? "-a" : "-b")
                }), n.push({
                    pt_x: D.x,
                    pt_y: D.y,
                    left: T,
                    top: k,
                    staticScore: x[M],
                    orientation: M.toString() + (A ? "-b" : "-a")
                })
            }
            var O = n.map(function(e) {
                var n = Math.round(e.left),
                    r = Math.round(e.left + i),
                    a = Math.round(e.top),
                    s = Math.round(e.top + o);
                return {
                    pt_x: Math.round(e.pt_x),
                    pt_y: Math.round(e.pt_y),
                    left: n,
                    right: r,
                    top: a,
                    bottom: s,
                    width: r - n,
                    height: s - a,
                    staticScore: t.priorOrientation === e.orientation ? e.staticScore - 20 : e.staticScore,
                    orientation: e.orientation
                }
            });
            return t.keepOrientation && t.priorOrientation && (O = r.filter(O, function(e) {
                return e.orientation === t.priorOrientation
            })), h(e, O), O
        }

        function g(e, t) {
            var n = [],
                i = t.pt_x,
                o = t.pt_y,
                a = t.width,
                s = t.height,
                l = t.startAngle,
                c = t.endAngle;
            c < l && (c += 2 * Math.PI);
            var u = (l + c) / 2,
                p = t.isRightAngle ? t.radius * Math.sqrt(2) : t.radius + 4,
                d = p + Math.sqrt(t.width * t.width / 4 + t.height * t.height / 4),
                f = [],
                m = d * Math.sin(u);
            m > p + .5 * s && (m = p + .5 * s), m < -p - .5 * s && (m = -p - .5 * s), f.push({
                x: i + d * Math.cos(u) - a / 2,
                y: o + m - s / 2
            });
            for (var g = 0; g < f.length; g++) {
                var y = f[g];
                n.push({
                    pt_x: y.x,
                    pt_y: y.y,
                    left: y.x,
                    top: y.y,
                    staticScore: 0,
                    orientation: g.toString() + "-a"
                })
            }
            var v = n.map(function(e) {
                var n = Math.round(e.left),
                    r = Math.round(e.left + a),
                    i = Math.round(e.top),
                    o = Math.round(e.top + s);
                return {
                    pt_x: Math.round(e.pt_x),
                    pt_y: Math.round(e.pt_y),
                    left: n,
                    right: r,
                    top: i,
                    bottom: o,
                    width: r - n,
                    height: o - i,
                    staticScore: t.priorOrientation === e.orientation ? e.staticScore - 20 : e.staticScore,
                    orientation: e.orientation
                }
            });
            return t.keepOrientation && t.priorOrientation && (v = r.filter(v, function(e) {
                return e.orientation === t.priorOrientation
            })), h(e, v), v
        }

        function y(e, t) {
            for (var n = [], i = t.width, o = t.height, a = Math.round(10 / Math.sqrt(2)), s = 0, l = 0, c = 0, u = 0; u < t.path.length - 2; u += 2) c += 1, s += t.path[u], l += t.path[u + 1];
            var p = s / c,
                d = l / c;
            n.push({
                left: p - i / 2,
                top: d - o / 2,
                staticScore: 0,
                orientation: "center"
            }), n.push({
                left: p + 10 + 3,
                top: d - o / 2,
                staticScore: 50,
                orientation: "right"
            }), n.push({
                left: p - (10 + i) - 3,
                top: d - o / 2,
                staticScore: 50,
                orientation: "left"
            }), n.push({
                left: p - i / 2,
                top: d - (o + 10),
                staticScore: 50,
                orientation: "top"
            }), n.push({
                left: p - (i + a),
                top: d - (o + a),
                staticScore: 50,
                orientation: "tl"
            }), n.push({
                left: p + a,
                top: d - (o + a),
                staticScore: 50,
                orientation: "tr"
            }), n.push({
                left: p - i / 2,
                top: d + 10,
                staticScore: 50,
                orientation: "bottom"
            }), n.push({
                left: p - (i + a),
                top: d + a,
                staticScore: 50,
                orientation: "bl"
            }), n.push({
                left: p + a,
                top: d + a,
                staticScore: 50,
                orientation: "br"
            });
            var f = n.map(function(e) {
                var n = Math.round(e.left),
                    r = Math.round(e.left + i),
                    a = Math.round(e.top),
                    s = Math.round(e.top + o);
                return {
                    pt_x: Math.round(p),
                    pt_y: Math.round(d),
                    left: n,
                    right: r,
                    top: a,
                    bottom: s,
                    width: r - n,
                    height: s - a,
                    staticScore: t.priorOrientation === e.orientation ? e.staticScore - 20 : e.staticScore,
                    orientation: e.orientation
                }
            });
            return t.keepOrientation && t.priorOrientation && (f = r.filter(f, function(e) {
                return e.orientation === t.priorOrientation
            })), h(e, f), f
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var v = .5,
            b = document.createElement("canvas"),
            x = [];
        t.getIntegralImage = i, t.computePositions = o, t.buildStaticEnvGetter = d, t.generateCandidatesForPoint = f, t.generateCandidatesForSegment = m, t.generateCandidatesForAngle = g, t.generateCandidatesForPolygon = y
    }), define("graphing/canvas-labels", ["require", "exports", "tslib", "lib/deepCopy"], function(e, t, n, r) {
        "use strict";

        function i(e, t, n) {
            n.verticalLabel ? (e.translate(t.left - .5, t.bottom - .5), e.rotate(-Math.PI / 2)) : e.translate(t.left - .5, t.top - .5)
        }

        function o(e, t) {
            var n = document.createRange();
            n.selectNode(e);
            var r = n.getBoundingClientRect();
            if (r.width > 0 && r.height > 0) {
                var i = window.getComputedStyle(e.parentElement),
                    o = e.nodeValue || "";
                if (o) return {
                    type: "text",
                    rect: {
                        left: r.left - t.canvasLeft,
                        right: r.right - t.canvasLeft,
                        top: r.top - t.canvasTop,
                        bottom: r.bottom - t.canvasTop
                    },
                    text: o,
                    color: i.color || "#000",
                    font: i.fontStyle + " " + i.fontSize + " " + i.fontFamily,
                    y: t.verticalLabel ? r.width : r.height
                }
            }
        }

        function a(e, t, n) {
            e.save(), e.textBaseline = "bottom", e.font = t.font, n ? (e.strokeStyle = "#FFF", e.lineWidth = 3, e.miterLimit = 2, e.strokeText(t.text, 0, t.y)) : (e.fillStyle = t.color, e.fillText(t.text, 0, t.y)), e.restore()
        }

        function s(e, t, n) {
            e.save(), n ? (e.strokeStyle = "#FFF", e.lineWidth = 3) : e.fillStyle = t.color, e.beginPath();
            for (var r = 0, i = t.instructions; r < i.length; r++) {
                var o = i[r];
                switch (o.type) {
                    case "moveTo":
                        e.moveTo(o.x, o.y);
                        break;
                    case "lineTo":
                        e.lineTo(o.x, o.y);
                        break;
                    case "ellipse":
                        e.ellipse(o.centerX, o.centerY, o.radiusX, o.radiusY, o.rotation, o.startAngle, o.endAngle, o.anticlockwise)
                }
            }
            e.closePath(), n ? e.stroke() : e.fill(), e.restore()
        }

        function l(e, t, n) {
            var r = e.getBoundingClientRect();
            if (r.width > 0 && r.height > 0) {
                var i;
                i = n.verticalLabel ? r.height : r.width;
                var o = parseFloat(t.borderTopWidth || "1px"),
                    a = t.borderTopColor || "#000",
                    s = [{
                        type: "moveTo",
                        x: 0,
                        y: 0
                    }, {
                        type: "lineTo",
                        x: i,
                        y: 0
                    }, {
                        type: "lineTo",
                        x: i,
                        y: o
                    }, {
                        type: "lineTo",
                        x: 0,
                        y: o
                    }];
                return {
                    type: "path",
                    rect: {
                        left: r.left - n.canvasLeft,
                        right: r.right - n.canvasLeft,
                        top: r.top - n.canvasTop,
                        bottom: r.bottom - n.canvasTop
                    },
                    instructions: s,
                    color: a
                }
            }
        }

        function c(e, t) {
            var n = Math.sqrt(e[0] * e[0] + e[1] * e[1]),
                r = Math.sqrt(t[0] * t[0] + t[1] * t[1]),
                i = e[0] * t[0] + e[1] * t[1],
                o = Math.acos(i / (n * r));
            return e[0] * t[1] - e[1] * t[0] < 0 && (o *= -1), o
        }

        function u(e, t, n, r, i, o, a, s, l) {
            var u = Math.cos(i),
                p = Math.sin(i),
                d = (e - s) / 2,
                h = (t - l) / 2,
                f = u * d + p * h,
                m = -p * d + u * h,
                g = n * n,
                y = r * r,
                v = f * f,
                b = m * m,
                x = Math.sqrt((g * y - g * b - y * v) / (g * b + y * v));
            o === a && (x *= -1);
            var w = x * n * m / r,
                _ = -x * r * f / n,
                S = (e + s) / 2,
                E = (t + l) / 2,
                M = u * w - p * _ + S,
                I = p * w + u * _ + E,
                T = [1, 0],
                C = [(f - w) / n, (m - _) / r],
                k = [(-f - w) / n, (-m - _) / r];
            return {
                centerX: M,
                centerY: I,
                radiusX: n,
                radiusY: r,
                startAngle: c(T, C),
                endAngle: c(T, k),
                rotation: i,
                anticlockwise: 0 === a
            }
        }

        function p(e, t) {
            function r(e) {
                return (e - l) / h
            }

            function i(e) {
                return (e - p) / f
            }
            var o = e + "-" + t,
                a = g[o];
            if (a) return a;
            a = [], g[o] = a;
            var s = t.split(" ");
            if (4 !== s.length) return a;
            var l = parseFloat(s[0]),
                c = parseFloat(s[2]),
                p = parseFloat(s[1]),
                d = parseFloat(s[3]),
                h = c - l,
                f = d - p,
                m = new RegExp("(M[0-9-.]+ [0-9-.]+)|(L[0-9-.]+ [0-9-.]+)|(A[0-9-.]+ [0-9-.]+ [0-9-.]+ [0-9-.]+ [0-9-.]+ [0-9-.]+ [0-9-.]+)", "g"),
                y = e.match(m);
            if (!y || !y.length) return a;
            for (var v = NaN, b = NaN, x = 0, w = y; x < w.length; x++) {
                var _ = w[x],
                    S = _.substr(1).split(" ").map(parseFloat);
                switch (_[0]) {
                    case "M":
                        v = r(S[0]), b = i(S[1]), a.push({
                            type: "moveTo",
                            x: v,
                            y: b
                        });
                        break;
                    case "L":
                        v = r(S[0]), b = i(S[1]), a.push({
                            type: "lineTo",
                            x: v,
                            y: b
                        });
                        break;
                    case "A":
                        var E = S[0] / h,
                            M = S[1] / f,
                            I = S[2],
                            T = S[3],
                            C = S[4],
                            k = r(S[5]),
                            D = i(S[6]),
                            P = u(v, b, E, M, I, T, C, k, D);
                        v = k, b = D, a.push(n.__assign({
                            type: "ellipse"
                        }, P))
                }
            }
            return a
        }

        function d(e, t) {
            var n = e.childNodes[0];
            if (n && "path" === n.nodeName) {
                var i = e.getBoundingClientRect();
                if (i.width > 0 && i.height > 0) {
                    var o, a, s = n.getAttribute("d") || "",
                        l = e.getAttribute("viewBox") || "",
                        c = p(s, l),
                        u = window.getComputedStyle(e);
                    t.verticalLabel ? (o = i.height, a = i.width) : (o = i.width, a = i.height), c = r.default(c);
                    for (var d = 0, h = c; d < h.length; d++) {
                        var f = h[d];
                        switch (f.type) {
                            case "moveTo":
                            case "lineTo":
                                f.x *= o, f.y *= a;
                                break;
                            case "ellipse":
                                f.centerX *= o, f.centerY *= a, f.radiusX *= o, f.radiusY *= a;
                                break;
                            default:
                                return f
                        }
                    }
                    return {
                        type: "path",
                        rect: {
                            left: i.left - t.canvasLeft,
                            right: i.right - t.canvasLeft,
                            top: i.top - t.canvasTop,
                            bottom: i.bottom - t.canvasTop
                        },
                        color: u.color || "#000",
                        instructions: c
                    }
                }
            }
        }

        function h(e, t, n) {
            var r = window.getComputedStyle(e);
            if ("0px" !== r.borderTopWidth) {
                var i = l(e, r, t);
                i && n.push(i)
            }
            for (var a = e.childNodes, s = 0; s < a.length; s++) {
                var c = a[s];
                if (3 === c.nodeType) {
                    var i = o(c, t);
                    i && n.push(i)
                } else if ("svg" === c.nodeName) {
                    var i = d(c, t);
                    i && n.push(i)
                } else 1 === c.nodeType && h(c, t, n)
            }
        }

        function f(e, t) {
            var n = [];
            return h(e, t, n), n
        }

        function m(e, t, n) {
            for (var r = 0, o = e; r < o.length; r++) {
                var l = o[r];
                switch (t.save(), i(t, l.rect, n), l.type) {
                    case "path":
                        s(t, l, !0);
                        break;
                    case "text":
                        a(t, l, !0);
                        break;
                    default:
                        var c = l;
                        return c
                }
                t.restore()
            }
            for (var u = 0, p = e; u < p.length; u++) {
                var l = p[u];
                switch (t.save(), i(t, l.rect, n), l.type) {
                    case "path":
                        s(t, l, !1);
                        break;
                    case "text":
                        a(t, l, !1);
                        break;
                    default:
                        var c = l;
                        return c
                }
                t.restore()
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var g = {};
        t.computeDrawingCommandsForDOMLabel = f, t.drawCommandsToCtx = m
    }), define("graphing/poilabelslayer", ["require", "exports", "tslib", "dcgview", "jquery", "./label", "graphing/graphmode", "main/label-sizes", "math/poi-type", "./constants", "./poi", "./automatic-label-placer", "lib/color-helpers", "math/interpolatedlabel", "../dcgview-helpers/static-mathquill-view", "../dcgview-helpers/mathquill-view", "graphing-calc/json/expression", "graphing-calc/models/expression", "graphing/canvas-labels", "graphing/movablepointslayer"], function(e, t, n, r, i, o, a, s, l, c, u, p, d, h, f, m, g, y, v, b) {
        "use strict";

        function x(e, t) {
            return t && t.visible ? t.getPOIById(e) : null
        }

        function w(e, t) {
            var n, r = t.xmax - t.xmin,
                i = t.ymax - t.ymin,
                s = e.getGraphMode();
            if (e.type === l.TRACE) {
                var c = s === a.X,
                    u = c ? e.y : e.x,
                    p = e.getCompiledFunction();
                if (n = o.point(u, r, i, p), c) {
                    var d = n[0];
                    n[0] = n[1], n[1] = d
                }
            } else n = [o.value(e.x, r), o.value(e.y, i)];
            var f = !isFinite(n[1].value),
                m = e.getLabel();
            if (m) return h.isMathLabel(m) ? {
                is_hole: f,
                type: "latex",
                text: m.substr(1, m.length - 2)
            } : {
                is_hole: f,
                type: "text",
                text: m
            };
            var g = n[0].superscript ? n[0].mantissa + "^{" + n[0].superscript + "}" : n[0].string,
                y = n[1].superscript ? n[1].mantissa + "^{" + n[1].superscript + "}" : n[1].string;
            return "undefined" === g && (g = "\\mathrm{undefined}"), "undefined" === y && (y = "\\mathrm{undefined}"), {
                is_hole: f,
                type: "latex",
                text: "\\left(" + g + ",\\space " + y + "\\right)"
            }
        }

        function _(e, t, n) {
            var r = e.t("unknown coordinates"),
                i = t.getProjection();
            if (!i) return r;
            var o = i.viewport;
            return o ? (n && (r = b.getCoordsString(n.x, n.y, o)), r) : r
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var S = r.Components.Input,
            E = r.Components,
            M = E.For,
            I = E.Switch,
            T = function(e) {
                function t() {
                    var t = null !== e && e.apply(this, arguments) || this;
                    return t.labelsDirty = !1, t
                }
                return n.__extends(t, e), t.prototype.init = function() {
                    this.grapher = this.props.grapher(), this.controller = this.grapher.controller, this.cachedLabelDict = {}, this.cachedLabelOrder = [], this.hoveredPOI = void 0, this.openedPOI2Sketch = {}, this.takingScreenshot = !1
                }, t.prototype.template = function() {
                    var e = this;
                    return r.createElement(M, {
                        each: function() {
                            return e.cachedLabelOrder
                        }
                    }, r.createElement("div", {
                        class: r.const("dcg-graph-outer"),
                        style: this.const({
                            "z-index": 0
                        }),
                        didMount: this.didMountRoot.bind(this)
                    }, function(t) {
                        return r.createElement("div", {
                            class: function() {
                                return e.getLabelClasses(t)
                            },
                            style: function() {
                                return e.getLabelStyles(t)
                            }
                        }, r.createElement("div", {
                            class: r.const("dcg-pt"),
                            style: function() {
                                return e.getDotStyles(t)
                            }
                        }), r.createElement("div", {
                            class: r.const("dcg-label"),
                            didMount: function(n) {
                                return e.linkLabelNode(t, n)
                            }
                        }, e.renderLabelContent(t)))
                    }))
                }, t.prototype.renderLabelContent = function(e) {
                    var t = this;
                    return r.createElement(I, {
                        key: function() {
                            return t.getLabelContent(e).type
                        }
                    }, function(n) {
                        return "text" === n ? r.createElement("span", null, function() {
                            return t.getLabelContent(e).text
                        }) : "latex" === n ? r.createElement(f.default, {
                            latex: function() {
                                return t.getLabelContent(e).text
                            }
                        }) : n === g.EditableLabelMode.Math ? r.createElement("div", {
                            class: function() {
                                return {
                                    "dcg-editable-label-border": !0,
                                    "dcg-focus": t.shouldEditableLabelBeFocused(e),
                                    "dcg-empty-label": 0 === t.getEditableLabelText(e).trim().length
                                }
                            },
                            style: function() {
                                return {
                                    "border-color": d.shadeColor(t.getEditableLabelTextColor(e), .3)
                                }
                            }
                        }, r.createElement(m.default, {
                            latex: function() {
                                return t.getEditableLabelText(e)
                            },
                            placeholder: function() {
                                return ""
                            },
                            isFocused: function() {
                                return t.shouldEditableLabelBeFocused(e)
                            },
                            capExpressionSize: function() {
                                return !!t.controller.getGraphSettings().config.capExpressionSize
                            },
                            selectOnFocus: r.const(!1),
                            config: r.const({}),
                            getAriaLabel: function() {
                                return t.controller.t("Editable point label at __coordinates__", {
                                    coordinates: _(t.controller, t.grapher, t.cachedLabelDict[e])
                                })
                            },
                            getAriaPostLabel: t.const(""),
                            onUserChangedLatex: function(n) {
                                return t.onLabelInput(n, e)
                            },
                            onFocusedChanged: function(n) {
                                return t.onEditableLabelFocusChange(n, e)
                            },
                            hasError: t.const(!1),
                            noFadeout: t.const(!0)
                        })) : r.createElement("div", {
                            class: function() {
                                return {
                                    "dcg-resizing-text-input-container": !0,
                                    "dcg-editable-label-border": !0,
                                    "dcg-focus": t.shouldEditableLabelBeFocused(e),
                                    "dcg-empty-label": 0 === t.getEditableLabelText(e).trim().length
                                }
                            },
                            style: function() {
                                return {
                                    "border-color": d.shadeColor(t.getEditableLabelTextColor(e), .3)
                                }
                            },
                            onScroll: function(e) {
                                e.target && (e.target.scrollLeft = 0)
                            }
                        }, r.createElement(S, {
                            "aria-label": function() {
                                return t.controller.t("Editable point label at __coordinates__", {
                                    coordinates: _(t.controller, t.grapher, t.cachedLabelDict[e])
                                })
                            },
                            onInput: function(n) {
                                return t.onLabelInput(n, e)
                            },
                            value: function() {
                                return t.getEditableLabelText(e)
                            },
                            onFocus: function() {
                                return t.onEditableLabelFocusChange(!0, e)
                            },
                            onBlur: function() {
                                return t.onEditableLabelFocusChange(!1, e)
                            }
                        }), r.createElement("span", {
                            class: r.const("dcg-text-input-content")
                        }, function() {
                            return t.getEditableLabelText(e) || " "
                        }))
                    })
                }, t.prototype.getSketchIdFromLabelId = function(e) {
                    var t = this.cachedLabelDict[e];
                    if (t) return t.sketchId
                }, t.prototype.getEditableLabelTextColor = function(e) {
                    var t = this.getSketchIdFromLabelId(e);
                    if (!t) return "#000";
                    var n = this.controller.getItemModel(t);
                    return n && "expression" === n.type ? n.color : "#000"
                }, t.prototype.onEditableLabelFocusChange = function(e, t) {
                    var n = this.getSketchIdFromLabelId(t);
                    n && (e ? this.controller.dispatch({
                        type: "set-focus-location",
                        location: {
                            type: "editable-label",
                            id: n
                        }
                    }) : this.controller.dispatch({
                        type: "blur-focus-location",
                        location: {
                            type: "editable-label",
                            id: n
                        }
                    }))
                }, t.prototype.shouldEditableLabelBeFocused = function(e) {
                    var t = this.getSketchIdFromLabelId(e),
                        n = this.controller.getFocusLocation();
                    return !(!n || "editable-label" !== n.type || !t || n.id !== t)
                }, t.prototype.onLabelInput = function(e, t) {
                    var n = this.getSketchIdFromLabelId(t);
                    if (n) {
                        if (this.grapher.poiController.getExpressionModel(n)) {
                            var r = e;
                            this.controller.getItemEditableLabelMode(n) === g.EditableLabelMode.Math && r.length > 0 && (r = "`" + r + "`"), this.controller.dispatch({
                                type: "set-item-label",
                                id: n,
                                label: r
                            })
                        }
                    }
                }, t.prototype.getEditableLabelText = function(e) {
                    var t = this.getSketchIdFromLabelId(e);
                    if (t) {
                        var n = this.grapher.poiController.getExpressionModel(t);
                        return n ? this.controller.getItemEditableLabelMode(t) === g.EditableLabelMode.Math ? n.label.substr(1, n.label.length - 2) : n.label : ""
                    }
                }, t.prototype.linkLabelNode = function(e, t) {
                    var n = this.cachedLabelDict[e];
                    n && (n.labelDOM = t)
                }, t.prototype.getLabelClasses = function(e) {
                    var t = this.cachedLabelDict[e];
                    return t ? t.classes : {}
                }, t.prototype.getLabelStyles = function(e) {
                    var t = this.cachedLabelDict[e];
                    return t ? t.styles : {}
                }, t.prototype.getDotStyles = function(e) {
                    var t = this.cachedLabelDict[e];
                    return t ? t.dotStyles : {}
                }, t.prototype.getLabelContent = function(e) {
                    var t = this.cachedLabelDict[e];
                    if (t) {
                        var n = this.getSketchIdFromLabelId(e);
                        if (!n) return {
                            is_hole: !1,
                            type: "text",
                            text: ""
                        };
                        var r = this.controller.getItemEditableLabelMode(n);
                        return t.classes["dcg-editable-label"] && void 0 !== r && r !== g.EditableLabelMode.None ? {
                            is_hole: !1,
                            type: r,
                            text: ""
                        } : t.content
                    }
                    return {
                        is_hole: !1,
                        type: "text",
                        text: ""
                    }
                }, t.prototype.didMountRoot = function(e) {
                    this.node = e
                }, t.prototype.computeHoveredLabel = function(e, t) {
                    var n;
                    this.hoveredPOI ? this.isOpenPOI(this.hoveredPOI) ? this.grapher.setLayerClass("hoveredPOI", "dcg-mouse-over-opened-poi") : (n = this.computeLabel(this.hoveredPOI, e, t, "hovered"), this.grapher.setLayerClass("hoveredPOI", "dcg-mouse-over-closed-poi")) : this.grapher.setLayerClass("hoveredPOI", void 0);
                    var r = this.getHoveredInteractiveLabel();
                    return r && !r.bareLabel ? this.grapher.setLayerClass("interactiveLabel", "dcg-mouse-over-opened-poi") : this.grapher.setLayerClass("interactiveLabel", void 0), n
                }, t.prototype.computeTraceLabel = function(e, t) {
                    if (this.traceInfo) {
                        var n = this.traceInfo.pt;
                        if (n) {
                            var r = new u.POI(n.x, n.y, l.TRACE, this.traceInfo.branchInfo.sketch, this.traceInfo.branchInfo.branch, 0);
                            return this.computeLabel(r, e, t, "trace")
                        }
                    }
                }, t.prototype.computeLabel = function(e, t, n, r) {
                    var i = e.id + "";
                    "trace" === r && (i = "*trace*");
                    var o = t.mapx(e.x),
                        a = t.mapy(e.y),
                        l = o,
                        u = a;
                    if (t.coordsAreOnscreen(o, a, c.OFFSCREEN_RENDER_MARGIN)) {
                        if (this.isHiddenInteractiveLabel(e)) return;
                        var p = !1,
                            h = void 0,
                            f = e.sketch,
                            m = f && f.branches[0];
                        m && (p = !!("nakedLabel" in m && m.nakedLabel), h = "labelOrientation" in m ? m.labelOrientation : void 0);
                        var g = f.id,
                            v = this.controller.getItemModel(g);
                        if (e.hasEditableLabel() && v && "expression" === v.type && !y.isSinglePoint(v)) return;
                        var b = w(e, t.viewport),
                            x = e.getLabelSize(),
                            _ = !!e.getVerticalLabel(),
                            S = e.isPersistent(),
                            E = e.isAttachedToPlottedPoint(),
                            M = e.hasInteractiveLabel(),
                            I = e.hasEditableLabel() && !this.takingScreenshot,
                            T = f.color,
                            C = !S,
                            k = !!E;
                        M && (k = !0, C = !0), "trace" === r && (k = !1, C = !0);
                        var D = n[i],
                            P = D && D.labelDOM,
                            L = D && D.width,
                            A = D && D.height,
                            O = D && D.orientation,
                            F = {
                                "dcg-poi-label": !0,
                                "dcg-tracept": "trace" === r,
                                "dcg-opened": "opened" === r,
                                "dcg-hole": b.is_hole,
                                "dcg-size-small": x === s.LabelSize.SMALL,
                                "dcg-size-medium": x === s.LabelSize.MEDIUM,
                                "dcg-size-large": x === s.LabelSize.LARGE,
                                "dcg-vertical-label": !!_,
                                "dcg-show-border": C,
                                "dcg-hide-dot": k,
                                "dcg-editable-label": I
                            },
                            q = {
                                left: o + "px",
                                top: a + "px"
                            };
                        if (S && T) {
                            var N = M && !this.isOpenInteractiveLabel(e) ? .5 : .3;
                            q.color = d.shadeColor(T, N)
                        }
                        var R = {};
                        return "trace" === r && (R["background-color"] = T, R["border-color"] = T), {
                            id: i,
                            sketchId: g,
                            x: e.x,
                            y: e.y,
                            screenX: o,
                            screenY: a,
                            top: u,
                            left: l,
                            width: L,
                            height: A,
                            labelDOM: P,
                            forcedOrientation: h,
                            isNakedLabel: p,
                            isVertical: _,
                            orientation: O,
                            classes: F,
                            styles: q,
                            dotStyles: R,
                            content: b
                        }
                    }
                }, t.prototype.computeAllLabels = function(e, t) {
                    var n, r, i = {},
                        o = this.grapher.graphSketches;
                    for (n in o) {
                        var a = o[n];
                        if (a.visible) {
                            var s = a.labels;
                            if (s.length)
                                for (var l = 0; l < s.length; l++)(r = this.computeLabel(s[l], e, t, "opened")) && (i[r.id] = r)
                        }
                    }
                    var c = {};
                    for (n in this.openedPOI2Sketch) {
                        var u = x(n, o[this.openedPOI2Sketch[n]]);
                        u && (c[n] = u.sketch.id, (r = this.computeLabel(u, e, t, "opened")) && (i[r.id] = r))
                    }
                    return this.openedPOI2Sketch = c, i
                }, t.prototype.markLabelsDirty = function() {
                    this.labelsDirty = !0
                }, t.prototype.getEditableLabelUnderPoint = function(e) {
                    for (var t = 0, n = this.cachedLabelOrder.length; t < n; t++) {
                        var r = this.cachedLabelOrder[t],
                            i = this.cachedLabelDict[r];
                        if (i && i.width && i.height) {
                            var o = i.screenX,
                                a = i.screenY,
                                s = i.left,
                                l = i.top,
                                c = i.width,
                                u = i.height;
                            if (c > 0 && u > 0 && e.x > o + s && e.x < o + s + c && e.y > a + l && e.y < a + l + u) {
                                var p = this.getSketchIdFromLabelId(r);
                                if (void 0 === p) continue;
                                var d = this.controller.getItemModel(p);
                                if (!d || "expression" !== d.type) continue;
                                if (!y.hasEditableLabel(d)) continue;
                                return d
                            }
                        }
                    }
                }, t.prototype.positionLabels = function(e, t, n, r, o) {
                    var a = !this.labelsDirty;
                    this.labelsDirty = !1;
                    var s = this.grapher.settings.config.projectorMode ? 14 : 10,
                        l = [];
                    t.forEach(function(e) {
                        var t = n[e];
                        if (t && t.labelDOM) {
                            var r = t.screenX,
                                i = t.screenY,
                                o = t.labelDOM.getBoundingClientRect(),
                                c = o.width,
                                u = o.height;
                            c > 0 && u > 0 && l.push({
                                renderedLabel: t,
                                pt_x: r,
                                pt_y: i,
                                pt_radius: s,
                                nakedLabel: t.isNakedLabel,
                                width: c,
                                height: u,
                                keepOrientation: a,
                                priorOrientation: t.orientation,
                                enforceOrientation: t.forcedOrientation
                            })
                        }
                    });
                    var c = p.buildStaticEnvGetter(e, r, o),
                        u = l.map(function(e) {
                            return p.generateCandidatesForPoint(c, e)
                        });
                    p.computePositions(u).forEach(function(e, t) {
                        var n = l[t].renderedLabel;
                        n.orientation = e.orientation;
                        var r = e.left - e.pt_x,
                            o = e.top - e.pt_y;
                        n.left = r, n.top = o, n.width = e.width, n.height = e.height;
                        var a = n.labelDOM;
                        a && (a.style.left = r + "px", a.style.top = o + "px", i(a).data("orientation", e.orientation))
                    })
                }, t.prototype.copyToCtx = function(e) {
                    var t = this.node.getBoundingClientRect();
                    for (var n in this.cachedLabelDict) {
                        var r = this.cachedLabelDict[n];
                        if (r) {
                            var i = r.labelDOM;
                            if (i) {
                                var o = {
                                        canvasLeft: t.left,
                                        canvasTop: t.top,
                                        verticalLabel: r.isVertical
                                    },
                                    a = v.computeDrawingCommandsForDOMLabel(i, o);
                                v.drawCommandsToCtx(a, e, o)
                            }
                        }
                    }
                }, t.prototype.drawForScreenshot = function(e, t, n, r) {
                    this.takingScreenshot = !0, this.redraw(e, t, n, r), this.takingScreenshot = !1, this.copyToCtx(t)
                }, t.prototype.redraw = function(e, t, n, r) {
                    var i = this.computeAllLabels(e, this.cachedLabelDict),
                        o = this.computeHoveredLabel(e, this.cachedLabelDict);
                    o && (i[o.id] = o);
                    var a = this.computeTraceLabel(e, this.cachedLabelDict);
                    a && (i[a.id] = a), this.cachedLabelDict = i, this.cachedLabelOrder = Object.keys(i), this.update(), this.positionLabels(t, this.cachedLabelOrder, this.cachedLabelDict, n, r)
                }, t.prototype.clearOpenedPOI = function() {
                    this.openedPOI2Sketch = {}
                }, t.prototype.closePOI = function(e) {
                    delete this.openedPOI2Sketch[e.id]
                }, t.prototype.openPOI = function(e) {
                    this.openedPOI2Sketch[e.id] = e.sketch.id
                }, t.prototype.isOpenPOI = function(e) {
                    return this.openedPOI2Sketch.hasOwnProperty(e.id)
                }, t.prototype.isOpenInteractiveLabel = function(e) {
                    return !!this.isOpenPOI(e) && e.hasInteractiveLabel()
                }, t.prototype.isHiddenInteractiveLabel = function(e) {
                    return !!e && (!!e.hasInteractiveLabel() && (!this.isOpenPOI(e) && this.getHoveredPOI() !== e))
                }, t.prototype.setHoveredPOI = function(e) {
                    this.hoveredPOI = e
                }, t.prototype.getHoveredPOI = function() {
                    return this.hoveredPOI
                }, t.prototype.getHoveredInteractiveLabel = function() {
                    var e = this.getHoveredPOI();
                    return e && e.hasInteractiveLabel() ? e : void 0
                }, t.prototype.setTraceInfo = function(e) {
                    this.traceInfo = e
                }, t.prototype.isTracing = function() {
                    return !!this.traceInfo
                }, t.prototype.getTraceInfo = function() {
                    return this.traceInfo
                }, t
            }(r.Class);
        t.default = T
    }), define("graphing/clickableobject-layer", ["require", "exports", "tslib", "dcgview", "jquery", "graphing-calc/models/expression", "graphing-calc/models/image"], function(e, t, n, r, i, o, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var s = r.Components.For,
            l = function(e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return n.__extends(t, e), t.prototype.init = function() {
                    this.grapher = this.props.grapher(), this.controller = this.grapher.controller, this.renderedTabTargetOrder = [], this.renderedTabTargets = {}
                }, t.prototype.template = function() {
                    var e = this;
                    return r.createElement(s, {
                        each: function() {
                            return e.renderedTabTargetOrder
                        }
                    }, r.createElement("div", {
                        class: r.const("dcg-graph-outer"),
                        style: this.const({
                            "z-index": 0
                        }),
                        onFocusin: this.bindFn(this.handleFocusChange),
                        onFocusout: this.bindFn(this.handleFocusChange),
                        didMount: function(t) {
                            return e.rootNode = t
                        }
                    }, function(t) {
                        return r.createElement("div", {
                            class: r.const("dcg-tabbable-clickableobject"),
                            role: r.const("button"),
                            "aria-roledescription": r.const("clickable object"),
                            "dcg-clickableobject-id": e.const(t),
                            tabindex: function() {
                                return e.getTabIndex()
                            },
                            "aria-hidden": e.bindFn(e.getAriaHidden),
                            "aria-label": function() {
                                return e.getAriaLabel(t)
                            },
                            onTap: function() {
                                e.controller.dispatch({
                                    type: "clickable-item-clicked",
                                    id: t
                                })
                            }
                        })
                    }))
                }, t.prototype.redraw = function() {
                    this.renderedTabTargets = {}, this.renderedTabTargetOrder = [];
                    var e, t = this.grapher.graphSketches;
                    for (e in t) {
                        if (t[e].visible) {
                            var n = this.controller.getItemModel(e);
                            if (n && "expression" === n.type && o.isClickableObject(n)) {
                                this.renderedTabTargetOrder.push(e);
                                var r = "" !== n.clickableInfo.description ? n.clickableInfo.description : this.grapher.getAudioTrace().getExpressionAriaLabel(e);
                                this.renderedTabTargets[e] = {
                                    id: e,
                                    description: r
                                }
                            }
                        }
                    }
                    var i = this.grapher.graphImages;
                    for (e in i) {
                        if (!i[e].hidden && !this.controller.isItemSecret(e)) {
                            var n = this.controller.getItemModel(e);
                            n && "image" === n.type && a.isClickableObject(n) && (this.renderedTabTargetOrder.push(e), this.renderedTabTargets[e] = {
                                id: e,
                                description: n.clickableInfo.description
                            })
                        }
                    }
                    this.renderedTabTargets[this.hoveredId] || this.setHoveredId(void 0), this.renderedTabTargets[this.pressedId] || this.setPressedId(void 0), this.hoveredId || this.pressedId ? this.grapher.setLayerClass("clickableObjects", "dcg-mouse-over-clickable-object") : this.grapher.setLayerClass("clickableObjects", void 0), this.update()
                }, t.prototype.getTabIndex = function() {
                    var e = this.grapher.settings;
                    return e.config.graphpaper && e.config.enableTabindex ? 0 : -1
                }, t.prototype.getAriaHidden = function() {
                    return !this.grapher.settings.config.graphpaper
                }, t.prototype.getAriaLabel = function(e) {
                    var t = this.renderedTabTargets[e];
                    return t ? t.description : ""
                }, t.prototype.shouldDrawHovered = function(e) {
                    return this.isObjectHovered(e) || e === this.focusedId
                }, t.prototype.isObjectHovered = function(e) {
                    return void 0 !== e && this.hoveredId === e
                }, t.prototype.setHoveredId = function(e) {
                    e !== this.hoveredId && (this.hoveredId = e, this.requestRedrawNextFrame())
                }, t.prototype.shouldDrawPressed = function(e) {
                    return this.isObjectPressed(e)
                }, t.prototype.isObjectPressed = function(e) {
                    return void 0 !== e && this.pressedId === e
                }, t.prototype.setPressedId = function(e) {
                    e !== this.pressedId && (this.pressedId = e, this.requestRedrawNextFrame())
                }, t.prototype.handleFocusChange = function() {
                    var e = void 0;
                    if (document.activeElement && i.contains(this.rootNode, document.activeElement)) {
                        e = i(document.activeElement).attr("dcg-clickableobject-id")
                    }
                    this.focusedId !== e && (this.focusedId = e, this.requestRedrawNextFrame())
                }, t.prototype.requestRedrawNextFrame = function() {
                    this.grapher.redrawAllLayers()
                }, t
            }(r.Class);
        t.default = l
    }), define("graphing/grapher", ["require", "exports", "main/graph_settings", "./canvaslayer", "./poidotslayer", "./gridlayer", "./graphslayer", "./imagelayer", "./viewportcontroller", "./poicontroller", "dcgview", "jquery", "underscore", "./viewport", "./screen", "./graphsketch", "./projection", "underscore_model", "./audiograph", "./canvas-braille", "./braille-size-options", "lib/deepCopy", "lib/animation-frame", "lib/default-spec", "graphing-calc/json/graph-settings", "graphing/tonegenerator", "./movablepointslayer", "./poilabelslayer", "./clickableobject-layer"], function(e, t, n, r, i, o, a, s, l, c, u, p, d, h, f, m, g, y, v, b, x, w, _, S, E, M, I, T, C) {
        "use strict";

        function k() {
            return new f.Screen(1024, 768)
        }

        function D() {
            return new h.Viewport(-10, 10, -10, 10)
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var P = function() {
            function e(e, t, n, h) {
                var f = this;
                this._layerClasses = {}, this.$ = e, this.evaluator = h, this.controller = n, this.settings = t;
                var m = k(),
                    b = D().squareYAxis(m);
                this.setUserRequestedViewport(b), this.__projection = new g.Projection(m, b, t), this.markLabelsDirty = d.debounce(function() {
                    f.evaluator.notifyWhenSynced(function() {
                        f.__isRedrawingSlowly ? f.notifyAfterRedraw(function() {
                            f.poiLabelsLayer.markLabelsDirty(), f.redrawAllLayers()
                        }) : (f.poiLabelsLayer.markLabelsDirty(), f.redrawAllLayers())
                    })
                }, 300), this.poiController = new c(this, t), this.viewportController = l(this, this.controller), this.showPOIDots = !0, this.$.css("overflow", "hidden"), this.graphSketches = {}, this.graphImages = {}, this.canvasLayer = r(this), this.$.append(this.canvasLayer.$), this.imageLayer = s(), this.gridLayer = o(), this.poiDotsLayer = i(), this.graphsLayer = a(this.settings);
                var x = p("<div></div>");
                this.$.append(x);
                var w = this;
                this.clickableObjectsLayer = u.mountToNode(C.default, x[0], {
                    grapher: function() {
                        return w
                    }
                });
                var _ = p("<div></div>");
                this.$.append(_);
                var w = this;
                this.movablePointsLayer = u.mountToNode(I.default, _[0], {
                    grapher: function() {
                        return w
                    }
                });
                var S = p("<div></div>");
                this.$.append(S), this.poiLabelsLayer = u.mountToNode(T.default, S[0], {
                    grapher: function() {
                        return w
                    }
                }), this.traceLayer = this.poiLabelsLayer, this.scaleAxis = void 0, this.__sketchOrder = [], this.selectedId = void 0, this.__redrawRequested = !1, this.__redrawSlowlyIndex = 0, this.__isRedrawingSlowly = !1, this.events = new y.UnderscoreModel, this.audioGraph = new v.default(n, this)
            }
            return e.prototype.remove = function() {
                this.$.remove(), this.poiController.remove(), this.viewportController.remove(), this.audioGraph.remove()
            }, e.prototype.tick = function(e) {
                this.__isRedrawingSlowly ? this._redrawSlowly() : this.__redrawRequested && this._redrawAllLayers(), this.__movablePointListener && this.__movablePointListener()
            }, e.prototype.registerMovablePointListener = function(e) {
                this.__movablePointListener = e
            }, e.prototype.deregisterMovablePointListener = function() {
                this.__movablePointListener = void 0
            }, e.prototype.setSketchOrder = function(e) {
                d.isEqual(this.__sketchOrder, e) || (this.__sketchOrder = e, this.redrawAllLayers())
            }, e.prototype.clear = function() {
                this.graphSketches = {}, this.graphImages = {}
            }, e.prototype.getGraphSketch = function(e) {
                return this.graphSketches[e]
            }, e.prototype.getGraphImage = function(e) {
                return this.graphImages[e]
            }, e.prototype.addGraphSketch = function(e) {
                this.graphSketches[e.id] = e
            }, e.prototype.removeGraphSketch = function(e) {
                delete this.graphSketches[e]
            }, e.prototype.addGraphImage = function(e) {
                var t = this;
                e.imageObj.width && e.imageObj.height ? (this.graphImages[e.id] = e, this.redrawAllLayers()) : p(e.imageObj).on("load.calc_load", function() {
                    return t.addGraphImage(e)
                })
            }, e.prototype.removeGraphImage = function(e) {
                var t = this.graphImages[e];
                t && p(t.imageObj).off("load.calc_load"), delete this.graphImages[e], this.redrawAllLayers()
            }, e.prototype.getProjection = function() {
                return this.__projection
            }, e.prototype._setProjection = function(e) {
                this.__projection = e, this.redrawAllLayers()
            }, e.prototype.getAudioTrace = function() {
                return this.audioGraph
            }, e.prototype.getDefaultViewport = function() {
                var e = this.getProjection();
                return D().squareYAxis(e.screen)
            }, e.prototype._updateScreenSize = function(e, t) {
                if (!(e <= 0 || t <= 0)) {
                    var n = this.getProjection(),
                        r = n.screen;
                    if (r.width !== e || r.height !== t) {
                        this.$.width(e);
                        var i = new f.Screen(e, t);
                        this.viewportController.setScreen(i)
                    }
                }
            }, e.prototype._setIsVisible = function(e) {
                e !== this.isVisible && (this.isVisible = e, e ? this.redrawAllLayers() : this.canvasLayer.resize(0, 0))
            }, e.prototype.update = function() {
                var e = this.controller.computeMajorLayout().grapher;
                e.width > 0 && e.height > 0 ? (this._setIsVisible(!0), this._updateScreenSize(e.width, e.height), this.$.css({
                    position: "absolute",
                    left: e.left + "px",
                    top: e.top + "px",
                    width: e.width + "px",
                    height: e.height + "px"
                })) : this._setIsVisible(!1)
            }, e.prototype.hide = function(e) {
                var t = this.getGraphSketch(e);
                t && (t.visible = !1)
            }, e.prototype.select = function(e) {
                if (this.selectedId) {
                    var t = this.getGraphSketch(this.selectedId);
                    t && (t.selected = !1, t.showPOI = !1, t.showHighlight = !1)
                }
                var n = this.getGraphSketch(e);
                n && (n.selected = !0, n.showPOI = !0, n.showHighlight = !0), this.selectedId = e
            }, e.prototype.updateSketch = function(e, t) {
                var n = this.getGraphSketch(e);
                if (!t.length) return this.hide(e);
                var r = new m.GraphSketch(e, t);
                r.color = t[0].color, r.style = t[0].style, n && r.updateFrom(n);
                var i = String(e) === String(this.selectedId);
                r.selected = i, r.showPOI = i, r.showHighlight = i, this.addGraphSketch(r)
            }, e.prototype.updateIntersections = function(e, t) {
                var n = this.getGraphSketch(e);
                n && n.updateIntersections(t)
            }, e.prototype.redrawAllLayers = function() {
                this.cancelRedrawSlowly(), this.__redrawRequested = !0
            }, e.prototype._clear = function() {
                var e = this.getProjection(),
                    t = e.screen;
                this.canvasLayer.resize(e.screen.width, e.screen.height), this.canvasLayer.ctx.clearRect(0, 0, t.width, t.height)
            }, e.prototype._redrawAllLayers = function() {
                this.isVisible && (this.__redrawRequested = !1, this._clear(), this.audioGraph.recomputePoints(), this._recomputeClickableObjects(), this._redrawImageLayer(), this._redrawGridLayer(), this._redrawGraphsLayer(), this._redrawPointsAndLabels(), this._updateCanvasLayerAria(), this.events.triggerEvent("redraw", void 0))
            }, e.prototype.cancelRedrawSlowly = function() {
                this.__isRedrawingSlowly && (this.__redrawSlowlyIndex = 0, this.__isRedrawingSlowly = !1, this.redrawAllLayers())
            }, e.prototype.redrawSlowly = function() {
                this.__isRedrawingSlowly || (this.__redrawSlowlyIndex = 0, this.__isRedrawingSlowly = !0, this.audioGraph.recomputePoints())
            }, e.prototype._redrawSlowly = function() {
                var e, t, n = this.__redrawSlowlyIndex;
                if (0 === n && (this._clear(), this._redrawGridLayer()), n >= this.__sketchOrder.length) return void this.cancelRedrawSlowly();
                var r = this.__sketchOrder[n],
                    i = (e = {}, e[r] = this.graphSketches[r], e),
                    o = (t = {}, t[r] = this.graphImages[r], t);
                (o[r] || i[r]) && this.graphsLayer.redrawToCtx(this.canvasLayer.ctx, this.getProjection(), i, o, [r], this.poiLabelsLayer, this.clickableObjectsLayer), this.__redrawSlowlyIndex += 1
            }, e.prototype._redrawGridLayer = function() {
                this.gridLayer.redrawToCtx(this.canvasLayer.ctx, this.getProjection(), this.scaleAxis)
            }, e.prototype._recomputeClickableObjects = function() {
                this.clickableObjectsLayer.redraw()
            }, e.prototype._redrawGraphsLayer = function() {
                this.graphsLayer.redrawToCtx(this.canvasLayer.ctx, this.getProjection(), this.graphSketches, this.graphImages, this.__sketchOrder, this.poiLabelsLayer, this.clickableObjectsLayer)
            }, e.prototype._updateCanvasLayerAria = function() {
                var e = 0;
                for (var t in this.graphSketches) M.canPlaySketch(this.graphSketches[t]) && (e += 1);
                this.canvasLayer.updateAria(this.isVisible, e)
            }, e.prototype._redrawPointsAndLabels = function() {
                var e = this.getProjection(),
                    t = [];
                this.movablePointsLayer.redraw(this.canvasLayer.ctx, e, t), this.showPOIDots && this.poiDotsLayer.redrawToCtx(this.canvasLayer.ctx, e, this.graphSketches, this.poiLabelsLayer, this.clickableObjectsLayer);
                var n = this.$[0].getBoundingClientRect();
                d.each([this.controller.find$(".dcg-overgraph-pillbox-elements")[0], this.controller.find$(".dcg-graphpaper-branding")[0]], function(e) {
                    if (e) {
                        var r = e.getBoundingClientRect();
                        t.push({
                            left: r.left - n.left,
                            top: r.top - n.top,
                            right: r.right - n.left,
                            bottom: r.bottom - n.top
                        })
                    }
                });
                var r = this.canvasLayer.ctx.canvas.getBoundingClientRect();
                this.poiLabelsLayer.redraw(e, this.canvasLayer.ctx, {
                    width: r.width,
                    height: r.height
                }, t)
            }, e.prototype._redrawImageLayer = function() {
                this.imageLayer.redrawToCtx(this.canvasLayer.ctx, this.getProjection(), this.graphImages, this.__sketchOrder)
            }, e.prototype._parseScreenshotOpts = function(e) {
                var t, r, i, o, a, s, l = this.getProjection();
                return e ? (t = e.width || e.height || l.screen.width, r = e.height || e.width || l.screen.height, i = e.targetPixelRatio || 1, o = (t < 256 || r < 256) && !e.preserveAxisNumbers, a = n.fromObject(e.settings || this.settings), s = !!e.transparentBackground) : (t = l.screen.width, r = l.screen.height, i = 1, o = !1, a = n.fromObject(this.settings), s = !1), o && (a.setProperty("xAxisNumbers", !1), a.setProperty("yAxisNumbers", !1), a.setProperty("polarNumbers", !1)), {
                    width: t,
                    height: r,
                    targetPixelRatio: i,
                    settings: a,
                    transparentBackground: s
                }
            }, e.prototype._syncScreenshotReturnCanvas = function(e) {
                var t = document.createElement("canvas");
                if (e && e.braille) {
                    var n = e.braille,
                        r = n.embosserModel,
                        i = n.brailleMode,
                        o = x.brailleSizes[r];
                    t.width = o.width, t.height = o.height, b.createBrailleImage(t, this, o, r, i)
                } else {
                    var a = this._parseScreenshotOpts(e);
                    t.width = a.width * a.targetPixelRatio, t.height = a.height * a.targetPixelRatio, this.screenshotToCanvas(t, e)
                }
                return t
            }, e.prototype.screenshot = function(e) {
                return this._syncScreenshotReturnCanvas(e).toDataURL("image/png")
            }, e.prototype.asyncScreenshot = function(e, t) {
                var n = this,
                    r = !1;
                !e.transparentBackground && e.showLabels && (e = w.default(e), e.transparentBackground = !0, r = !0);
                var i = this._syncScreenshotReturnCanvas(e),
                    o = i.getContext("2d"),
                    a = this.makeScreenshotProjection(e),
                    s = [];
                if (e.showMovablePoints && this.movablePointsLayer.drawForScreenshot(o, a, s), e.showLabels) {
                    var l = p('<div class="dcg-calculator-api-container"><div class="dcg-container"></div></div>').css({
                            width: a.screen.width,
                            height: a.screen.height,
                            position: "absolute",
                            left: "0px",
                            top: "0px"
                        }).appendTo("body"),
                        c = l.find(".dcg-container"),
                        d = u.mountToNode(T.default, c[0], {
                            grapher: function() {
                                return n
                            }
                        }),
                        h = {
                            width: a.screen.width,
                            height: a.screen.height
                        };
                    d.drawForScreenshot(a, o, h, s), l.remove()
                }
                r && (o.globalCompositeOperation = "destination-over", o.fillStyle = "#FFF", o.fillRect(0, 0, i.width, i.height)), t(i.toDataURL("image/png"))
            }, e.prototype.makeScreenshotProjection = function(e) {
                var t = this._parseScreenshotOpts(e),
                    n = t.width,
                    r = t.height,
                    i = t.settings,
                    o = new f.Screen(n, r),
                    a = this.getProjection().viewport;
                return this.getSetting("squareAxes") && (a = a.squareCrop(o)), new g.Projection(o, a, i)
            }, e.prototype.screenshotToCanvas = function(e, t) {
                var n = this._parseScreenshotOpts(t),
                    r = n.targetPixelRatio,
                    i = n.transparentBackground,
                    o = e.getContext("2d");
                o.scale(r, r);
                var a = this.makeScreenshotProjection(t);
                a.settings.takingScreenshot = !0, i ? o.clearRect(0, 0, screen.width, screen.height) : (o.fillStyle = "white", o.fillRect(0, 0, a.screen.width, a.screen.height)), this.imageLayer.redrawToCtx(o, a, this.graphImages, this.__sketchOrder), this.gridLayer.redrawToCtx(o, a), this.graphsLayer.redrawToCtx(o, a, this.graphSketches, this.graphImages, this.__sketchOrder, this.poiLabelsLayer, this.clickableObjectsLayer)
            }, e.prototype.getImageData = function(e, t, n, r) {
                return this.canvasLayer.ctx.getImageData(e, t, n, r)
            }, e.prototype.getSetting = function(e, t) {
                var n = this.settings.getProperty(e);
                return void 0 !== n ? n : t
            }, e.prototype.getState = function(e) {
                var t = this,
                    n = {
                        viewport: this.getCurrentViewport()
                    };
                return this.settings.stateProperties.forEach(function(e) {
                    "randomSeed" !== e && (n[e] = t.getSetting(e))
                }), e.stripDefaults && (n = S.stripDefaults(E.DefaultGraphSettings, n)), n
            }, e.prototype.getUndoRedoState = function() {
                var e = this,
                    t = {};
                return this.settings.stateProperties.forEach(function(n) {
                    t[n] = e.getSetting(n)
                }), t.viewport = this.getUserRequestedViewport(), t
            }, e.prototype.notifyAfterRedraw = function(e) {
                var t = this;
                if (this.__isRedrawingSlowly) _.requestAnimationFrame(this.notifyAfterRedraw.bind(this, e));
                else if (this.__redrawRequested) {
                    this.notifyAfterRedraw_i ? this.notifyAfterRedraw_i++ : this.notifyAfterRedraw_i = 1;
                    var n = "redraw.notifyAfterRedraw" + this.notifyAfterRedraw_i;
                    this.events.observeEvent(n, function() {
                        t.events.unobserveEvent(n), e()
                    })
                } else e()
            }, e.prototype.getCurrentViewport = function() {
                return this.viewportController.getViewport().toObject()
            }, e.prototype.getUserRequestedViewport = function() {
                return this._lastUserRequestedViewport
            }, e.prototype.setUserRequestedViewport = function(e) {
                this._lastUserRequestedViewportUpdateToken || (this._lastUserRequestedViewportUpdateToken = 0), this._lastUserRequestedViewportUpdateToken += 1, this._lastUserRequestedViewport = w.default(e)
            }, e.prototype.debounceUserRequestedViewportChange = function() {
                var e = this;
                if (!this.__debouncedViewportCommit) {
                    this.__debouncedViewportCommit = d.debounce(function(t, n) {
                        if (!e.isDragging && e._lastUserRequestedViewportUpdateToken === n) {
                            if (e._lastUserRequestedViewport) {
                                var r = h.Viewport.fromObject(e._lastUserRequestedViewport);
                                if (e.computeConcreteViewport(r).equals(t)) return
                            }
                            e.controller.dispatch({
                                type: "commit-user-requested-viewport",
                                viewport: t
                            })
                        }
                    }, 1e3)
                }
                var t = this.getCurrentViewport();
                this.__debouncedViewportCommit(t, this._lastUserRequestedViewportUpdateToken)
            }, e.prototype.setGrapherState = function(e, t) {
                e = S.populateDefaults(E.DefaultGraphSettings, e), t && t.doNotClear || this.clear();
                for (var n in E.DefaultGraphSettings) E.DefaultGraphSettings.hasOwnProperty(n) && this.settings.setProperty(n, e[n]);
                if ("viewport" in e) {
                    var r = h.Viewport.fromObject(e.viewport);
                    this.setUserRequestedViewport(r);
                    var i = this.computeConcreteViewport(r);
                    this.viewportController.setViewport(i)
                }
                this.redrawAllLayers()
            }, e.prototype.computeConcreteViewport = function(e) {
                var t = this.getProjection().screen;
                return this.getSetting("squareAxes") && !e.isSquare(t) ? e.squareYAxis(t) : e
            }, e.prototype.setLayerClass = function(e, t) {
                var n = this._layerClasses[e];
                this._layerClasses[e] = t, n !== t && (n && this.$.removeClass(n), t && this.$.addClass(t))
            }, e
        }();
        t.Grapher = P
    }), define("loadcss!tour", function() {}), define("loadcss!calculator_embed", function() {}), define("loadcss!buttons", function() {}), define("loadcss!dcg-normalize", function() {}), define("loadcss!projector_mode", function() {}), define("loadcss!desmos-icons", function() {}), define("loadcss!popovers", function() {}), define("main/calc_embed", ["require", "exports", "main/graph_settings", "tours/tour_manager", "tslib", "lib/i18n", "jquery", "main/controller", "dcgview", "main/instancehotkeys", "lib/console", "underscore", "lib/defocus-mobile", "graphing-calc/views/main", "underscore_model", "graphing/viewport", "main/evaluator", "graphing/grapher", "../lib/color-helpers", "loadcss!tour", "loadcss!calculator_embed", "loadcss!buttons", "loadcss!dcg-normalize", "loadcss!projector_mode", "loadcss!desmos-icons", "loadcss!popovers"], function(e, t, n, r, i, o, a, s, l, c, u, p, d, h, f, m, g, y, v) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var b = 0,
            x = function() {
                function e(e, t, i, u) {
                    function d() {
                        var e = E.computeMajorLayout(),
                            t = {
                                left: e.grapher.left,
                                right: e.grapher.left + e.grapher.width,
                                width: e.grapher.width,
                                top: e.grapher.top,
                                bottom: e.grapher.top + e.grapher.height,
                                height: e.grapher.height
                            },
                            n = T.getCurrentViewport(),
                            r = {
                                top: n.ymax,
                                bottom: n.ymin,
                                left: n.xmin,
                                right: n.xmax,
                                width: n.xmax - n.xmin,
                                height: n.ymax - n.ymin
                            };
                        p.isEqual(r, C.mathCoordinates) || C.setProperty("mathCoordinates", r), t.height > 0 && t.width > 0 && !p.isEqual(t, C.pixelCoordinates) && C.setProperty("pixelCoordinates", t)
                    }

                    function m() {
                        var e = T.getProjection();
                        _.setProperty("zoomedDefault", T.viewportController.isZoomRestored()), _.setProperty("squareAxes", e.viewport.isSquare(e.screen))
                    }

                    function v(e, t) {
                        return o.t(e, t, _.config.language)
                    }
                    var x = this;
                    e || (e = document.createElement("div"));
                    var w = document.createElement("div");
                    w.className = "dcg-wrapper", w.style.width = "100%", w.style.height = "100%", e.appendChild(w), this.__id = b++;
                    var _ = new n;
                    this.graphSettings = _;
                    for (var S in i) _.config.setProperty(S, i[S]);
                    var E = new s.default(_);
                    this.controller = E, u && E.dispatch({
                        type: "ui/container-resized",
                        size: u
                    }), this.rootElt = w, this.view = l.mountToNode(h.default, this.rootElt, {
                        controller: l.const(E)
                    });
                    var M = new g.Evaluator(t);
                    this.controller.setEvaluator(M), this.controller.setRootElt(this.rootElt);
                    var I = E.find$(".dcg-grapher"),
                        T = new y.Grapher(I, _, this.controller, M);
                    this.controller.setGrapher(T), _.registerCallbacks(T, M), this.controller.initStateStack(), _.config.redrawSlowly || (T.redrawSlowly = T.redrawAllLayers), M.triggerStatusChange = function(e) {
                        x.controller.dispatch({
                            type: "on-evaluator-changes",
                            changes: e
                        })
                    }, M.triggerGraphData = function(e) {
                        E.dispatch({
                            type: "process-graph-data",
                            graphData: e
                        })
                    }, M.triggerRender = function() {
                        T.redrawAllLayers()
                    }, M.triggerRenderSlowly = function() {
                        T.redrawSlowly()
                    }, this.unsubFunc = this.controller.subToChanges(function() {
                        x.controller.doesDOMHaveSize() && (x.view.update(), T.update()), d(), m()
                    });
                    var C = new f.UnderscoreModel;
                    C.setProperties({
                        pixelCoordinates: {
                            top: 0,
                            bottom: 0,
                            left: 0,
                            right: 0,
                            width: 0,
                            height: 0
                        },
                        mathCoordinates: {
                            top: 0,
                            bottom: 0,
                            left: 0,
                            right: 0,
                            width: 0,
                            height: 0
                        }
                    }), this.graphpaperBounds = C, a(this.rootElt).on("keydown.calculator-" + this.__id, function(e) {
                        x.grapher && x.grapher.audioGraph.handleKeydown(e), x.instanceHotkeys.handleKeydown(e)
                    }), a(window).on("dcg-tapstart.calculator-" + this.__id, function(e) {
                        var t = a(e.target),
                            n = !!t.closest(x.rootElt).length,
                            r = e.wasHandled("create-expression-with-keyboard"),
                            i = !!t.closest(".dcg-api-shared-keypad-root").length,
                            o = !!t.hasClass("dcg-shell");
                        if (n || i || o || r || E.dispatch({
                                type: "set-none-selected"
                            }), e.wasHandled("do-not-clear-poi-labels") || (T.traceLayer.clearOpenedPOI(), T.redrawAllLayers()), E.isInEditListMode()) {
                            var s = 0 === t.closest(".dcg-exppanel").length && 0 === t.closest(".dcg-options-menu").length && 0 === t.closest(".dcg-expression-top-bar").length && 0 === t.closest(".dcg-keypad").length;
                            n && !s || E.dispatch({
                                type: "set-edit-list-mode",
                                isEditListMode: !1,
                                focusExpressionList: !1
                            })
                        }
                    }), this.grapher = T, this.evaluator = M, this.tourManager = r({
                        evaluator: M
                    }), this.controller.dispatch({
                        type: "set-blank"
                    });
                    var k = ["degreeMode"],
                        D = {};
                    k.forEach(function(e) {
                        void 0 !== i[e] && (D[e] = i[e])
                    }), _.setGraphSettings(D), _.config.expressionsCollapsed && this.setOptions({
                        expressionsCollapsed: !0
                    }), _.config.capExpressionSize && this.setOptions({
                        capExpressionSize: !0
                    }), _.config.hasOwnProperty("pointsOfInterest") && this.setOptions({
                        pointsOfInterest: _.config.pointsOfInterest
                    }), _.config.hasOwnProperty("backgroundColor") && this.setOptions({
                        backgroundColor: _.config.backgroundColor
                    }), _.config.hasOwnProperty("textColor") && this.setOptions({
                        textColor: _.config.textColor
                    }), _.config.observe("language", function() {
                        var e = x.controller.getState();
                        x.controller.dispatch({
                            type: "set-state",
                            state: e
                        }), x.tourManager && (x.tourManager.closingMsg = ["<b>__endingMessage__</b><br>", v("This message will self-destruct in __seconds__...")].join(""))
                    }), this.instanceHotkeys = new c.default(E)
                }
                return e.prototype.setOption = function(e, t) {
                    this.controller.getGraphSettings().config.setProperty(e, t)
                }, e.prototype.setOptions = function(e) {
                    var t, n = this.controller.getGraphSettings().config,
                        r = i.__assign({}, e);
                    e.hasOwnProperty("backgroundColor") && (v.isValidHexColor(e.backgroundColor) || (u.warn("Invalid backgroundColor. Background color must be a 3- or 6-character hex color (e.g. #cde or #ffaaaa)"), delete r.backgroundColor)), e.hasOwnProperty("textColor") && (v.isValidHexColor(e.textColor) || (u.warn("Invalid textColor. Text color must be a 3- or 6-character hex color (e.g. #000 or #001111)"), delete r.textColor)), e.hasOwnProperty("menus") && (u.warn("Deprecated option: menus. Setting settingsMenu and expressionsTopbar instead."), e.hasOwnProperty("settingsMenu") || (r.settingsMenu = !!e.menus), e.hasOwnProperty("expressionsTopbar") || (r.expressionsTopbar = !!e.menus)), e.hasOwnProperty("solutions") && (u.warn("Deprecated option: solutions. Setting pointsOfInterest instead."), e.hasOwnProperty("pointsOfInterest") || (r.pointsOfInterest = !!e.solutions)), e.hasOwnProperty("singleVariableSolutions") && u.warn("Deprecated option: singleVariableSolutions has been removed."), !1 === e.graphpaper && (e.expressionsCollapsed && (r.expressionsCollapsed = !1, u.warn("Cannot set graphpaper: false with expressionsCollapsed: true. Proceeding with expressionsCollapsed: false.")), n.expressionsCollapsed && (r.expressionsCollapsed = !1, u.warn("Disabling the graphpaper with the expressions list collapsed is not supported.Setting expressionsCollapsed: false.")), e.zoomButtons && (r.zoomButtons = !1, u.warn("Cannot set graphpaper: false with zoomButtons: true. Proceeding with zoomButtons: false.")), e.showResetButtonOnGraphpaper && (r.showResetButtonOnGraphpaper = !1, u.warn("Cannot set graphpaper: false with showResetButtonOnGraphpaper: true. Proceeding with showResetButtonOnGraphpaper: false.")), n.zoomButtons && (r.zoomButtons = !1, u.warn("Disabling the graphpaper with the zoomButtons visible is not supported. Setting zoomButtons: false.")), n.showResetButtonOnGraphpaper && (r.showResetButtonOnGraphpaper = !1, u.warn("Disabling the graphpaper with the reset button visible is not supported. Setting showResetButtonOnGraphpaper: false."))), !1 === n.graphpaper && (e.expressionsCollapsed || e.zoomButtons || e.showResetButtonOnGraphpaper) && (r.graphpaper = !0, u.warn("Must have visible graphpaper to proceed. Setting graphpaper: true.")), e.lockViewport && e.zoomButtons && (r.zoomButtons = !1, u.warn("Cannot set zoomButtons: true and lockViewport: true. Proceeding with zoomButtons: false.")), n.lockViewport && e.zoomButtons && (r.lockViewport = !1, u.warn("Cannot set zoomButtons: true while the viewport is locked. Setting lockViewport: false.")), n.zoomButtons && e.lockViewport && (r.zoomButtons = !1, u.warn("Cannot lock the viewport without hiding the zoom buttons. Setting zoomButtons: false."));
                    for (t in r)
                        if (r.hasOwnProperty(t)) switch (t) {
                            case "expressionsCollapsed":
                                this.setOption("expressionsCollapsed", !!r.expressionsCollapsed), r.expressionsCollapsed ? this.controller.dispatch({
                                    type: "hide-expressions-list"
                                }) : this.controller.dispatch({
                                    type: "show-expressions-list"
                                });
                                break;
                            case "qwertyKeyboard":
                                this.setOption("qwertyKeyboard", !!r.qwertyKeyboard), this.controller.isLetterKeypadOpen() && this.controller.dispatch({
                                    type: "keypad/abc"
                                });
                                break;
                            case "degreeMode":
                                this.setOption("degreeMode", !!r.degreeMode), this.controller.getGraphSettings().setGraphSettings({
                                    degreeMode: !!r.degreeMode
                                });
                                break;
                            case "keypad":
                            case "graphpaper":
                            case "expressions":
                            case "settingsMenu":
                            case "zoomButtons":
                            case "showResetButtonOnGraphpaper":
                            case "expressionsTopbar":
                            case "pointsOfInterest":
                            case "trace":
                            case "border":
                            case "lockViewport":
                            case "administerSecretFolders":
                            case "advancedStyling":
                            case "clickableObjects":
                            case "images":
                            case "imageUploadCallback":
                            case "folders":
                            case "notes":
                            case "links":
                            case "restrictedFunctions":
                            case "distributions":
                            case "pasteGraphLink":
                            case "pasteTableData":
                            case "clearIntoDegreeMode":
                            case "autosize":
                            case "plotSingleVariableImplicitEquations":
                            case "colors":
                            case "branding":
                            case "disableScrollFix":
                            case "invertedColors":
                            case "fontSize":
                            case "projectorMode":
                            case "language":
                            case "redrawSlowly":
                            case "onlyTraceSelected":
                            case "disableMouseInteractions":
                            case "nativeOnscreenKeypad":
                            case "functionDefinition":
                            case "plaidMode":
                            case "pasteGraphLinkCallback":
                            case "editOnWeb":
                            case "crossOriginSaveTest":
                            case "backgroundColor":
                            case "textColor":
                            case "enableTabindex":
                            case "audioTraceReverseExpressions":
                            case "showHamburger":
                            case "decimalToFraction":
                            case "capExpressionSize":
                            case "transparentBackground":
                                var o = r[t];
                                void 0 !== o && this.setOption(t, o);
                                break;
                            default:
                                var a = t;
                                return a
                        }
                }, e.prototype.setViewport = function(e) {
                    this.grapher.viewportController.setViewport(new m.Viewport(e[0], e[1], e[2], e[3]))
                }, e.prototype.resize = function(e) {
                    e && this.controller.dispatch({
                        type: "ui/container-resized",
                        size: e
                    })
                }, e.prototype.interceptTouch = function() {
                    var e = this.grapher.$,
                        t = a(this.rootElt);
                    e = e.add(t.find(".dcg-expression-top-bar")), e.add(t.find(".dcg-keypad")), e.on("touchstart", function(e) {
                        e.preventDefault()
                    }), e.on("touchend", function(e) {
                        a(e.target).closest(".dcg-do-not-blur").length > 0 || d.default()
                    })
                }, e.prototype.destroy = function() {
                    a(window).off(".calculator-" + this.__id);
                    var e = a(this.rootElt);
                    e.off(".calculator-" + this.__id), this.unsubFunc(), this.graphSettings.unobserveAll(), this.evaluator && this.evaluator.destroy(), this.grapher && this.grapher.remove(), l.unmountFromNode(this.rootElt), e.remove()
                }, e.prototype.tick = function(e) {
                    this.controller.dispatch({
                        type: "tick",
                        time: e
                    })
                }, e.prototype.getState = function(e) {
                    return this.controller.getState(e)
                }, e.prototype.setBlank = function(e) {
                    this.controller.dispatch({
                        type: "set-blank",
                        opts: e || {}
                    })
                }, e.prototype.setState = function(e, t) {
                    this.controller.dispatch({
                        type: "set-state",
                        state: e,
                        opts: t || {}
                    })
                }, e
            }();
        t.default = x
    }), define("lib/dom-change-detector", ["require", "exports", "tslib", "lib/animation-frame", "jquery"], function(e, t, n, r, i) {
        "use strict";

        function o() {
            c = !0, r.requestAnimationFrame(a)
        }

        function a() {
            t.testFixture.rafSPY && t.testFixture.rafSPY(), c = !1;
            for (var e in l) l[e].detectAndEnqueueEvent(), c = !0;
            if (c) {
                o();
                for (var e in l) l[e].dispatchQueuedEvent()
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var s = 1,
            l = {},
            c = !1,
            u = !1;
        window && window.location && window.location.search && (u = window.location.search.indexOf("dcgKnewtonDisableAutoSize") >= 0), t.testFixture = {}, t.checkAllWatchingDetectors = a;
        var p = function() {
            function e(e, t) {
                this.elt = e, this.cb = t, this.destroyed = !1, this.id = s.toString(), this.appliedScale = {
                    x: 1,
                    y: 1
                }, s++
            }
            return e.prototype.stopWatching = function() {
                delete l[this.id]
            }, e.prototype.startWatching = function() {
                this.checkForChanges(), l[this.id] = this, c || o()
            }, e.prototype.resetAppliedScalingAndGetBoundingClientRect = function() {
                var e = this.elt.getBoundingClientRect(),
                    t = {
                        x: e.width / this.elt.offsetWidth,
                        y: e.height / this.elt.offsetHeight
                    };
                if (t.x === this.appliedScale.x && t.y === this.appliedScale.y) return e;
                var n = i(this.elt).children(".dcg-wrapper")[0];
                return n && (this.appliedScale = t, i(n).css({
                    transform: "scale(" + 1 / this.appliedScale.x + "," + 1 / this.appliedScale.y + ")",
                    width: 100 * this.appliedScale.x + "%",
                    height: 100 * this.appliedScale.y + "%"
                })), e
            }, e.prototype.detectAndEnqueueEvent = function() {
                if (!this.destroyed) {
                    if (document.body && document.body.contains(this.elt)) {
                        var e = void 0;
                        e = u ? {
                            width: 450,
                            height: 450
                        } : this.resetAppliedScalingAndGetBoundingClientRect(), this.lastSize ? e.width === this.lastSize.width && e.height === this.lastSize.height || (this.lastSize.width = e.width, this.lastSize.height = e.height, this.queuedEvent = {
                            type: "resized",
                            target: this.elt,
                            size: n.__assign({}, this.lastSize)
                        }) : (this.lastSize = {
                            width: e.width,
                            height: e.height
                        }, this.queuedEvent = {
                            type: "added",
                            target: this.elt,
                            size: n.__assign({}, this.lastSize)
                        })
                    } else this.lastSize && (this.lastSize = void 0, this.queuedEvent = {
                        type: "removed",
                        target: this.elt
                    })
                }
            }, e.prototype.dispatchQueuedEvent = function() {
                var e = this.queuedEvent;
                e && (this.queuedEvent = void 0, this.cb(e))
            }, e.prototype.checkForChanges = function() {
                this.detectAndEnqueueEvent(), this.dispatchQueuedEvent()
            }, e.prototype.destroy = function() {
                this.stopWatching();
                for (var e in this) this.hasOwnProperty(e) && delete this[e];
                this.destroyed = !0
            }, e
        }();
        t.default = p
    }), define("graphing/compute-async-screenshot-bounds", ["require", "exports", "lib/console"], function(e, t, n) {
        "use strict";

        function r(e) {
            var t = e.mode,
                r = e.width,
                i = e.height,
                o = e.currentBounds,
                a = e.graphpaperAspectRatio,
                s = e.mathAspectRatio,
                l = e.mathBounds,
                c = r / i,
                u = {
                    x: o.left + o.width / 2,
                    y: o.bottom + o.height / 2
                };
            if (void 0 === l.left != (void 0 === l.right) || void 0 === l.bottom != (void 0 === l.top)) return n.warn('asyncScreenshot: cannot specify "left" bound without "right" or "bottom" bound without "top". Got: ' + l), o;
            var p, d, h, f, m, g, y, v, b, x, w = void 0 !== l.left && void 0 !== l.right,
                _ = void 0 !== l.bottom && void 0 !== l.top,
                S = w && _;
            switch (t) {
                case "stretch":
                    return S ? l : w ? {
                        left: l.left,
                        right: l.right,
                        bottom: o.bottom,
                        top: o.top
                    } : _ ? {
                        left: o.left,
                        right: o.right,
                        bottom: l.bottom,
                        top: l.top
                    } : o;
                case "contain":
                    return S ? (f = l.right - l.left, m = l.top - l.bottom, g = {
                        x: l.left + f / 2,
                        y: l.bottom + m / 2
                    }, h = f / m, c > h ? (d = m / i, p = d * s, {
                        left: g.x - p * r / 2,
                        right: g.x + p * r / 2,
                        bottom: l.bottom,
                        top: l.top
                    }) : (p = f / r, d = p / s, {
                        left: l.left,
                        right: l.right,
                        bottom: g.y - d * i / 2,
                        top: g.y + d * i / 2
                    })) : w ? (y = l.right - l.left, v = l.left + y / 2, h = y / o.height, c > h ? (d = o.height / i, p = d * s, {
                        left: v - p * r / 2,
                        right: v + p * r / 2,
                        bottom: o.bottom,
                        top: o.top
                    }) : (p = y / r, d = p / s, {
                        left: l.left,
                        right: l.right,
                        bottom: u.y - d * i / 2,
                        top: u.y + d * i / 2
                    })) : _ ? (b = l.top - l.bottom, x = l.bottom + b / 2, h = o.width / b, c > h ? (d = b / i, p = d * s, {
                        left: u.x - p * r / 2,
                        right: u.x + p * r / 2,
                        bottom: l.bottom,
                        top: l.top
                    }) : (p = o.width / r, d = p / s, {
                        left: o.left,
                        right: o.right,
                        bottom: x - d * i / 2,
                        top: x + d * i / 2
                    })) : c > a ? (d = o.height / i, p = d * s, {
                        left: u.x - p * r / 2,
                        right: u.x + p * r / 2,
                        bottom: o.bottom,
                        top: o.top
                    }) : (p = o.width / r, d = p / s, {
                        left: o.left,
                        right: o.right,
                        bottom: u.y - d * i / 2,
                        top: u.y + d * i / 2
                    });
                case "preserveX":
                    return S ? (f = l.right - l.left, m = l.top - l.bottom, g = {
                        x: l.left + f / 2,
                        y: l.bottom + m / 2
                    }, h = f / m, p = f / r, d = p / s, {
                        left: l.left,
                        right: l.right,
                        bottom: g.y - d * i / 2,
                        top: g.y + d * i / 2
                    }) : _ ? (b = l.top - l.bottom, x = l.bottom + b / 2, h = o.width / b, p = o.width / r, d = p / s, {
                        left: o.left,
                        right: o.right,
                        bottom: x - d * i / 2,
                        top: x + d * i / 2
                    }) : w ? (y = l.right - l.left, p = y / r, d = p / s, {
                        left: l.left,
                        right: l.right,
                        bottom: u.y - d * i / 2,
                        top: u.y + d * i / 2
                    }) : (y = o.right - o.left, p = y / r, d = p / s, {
                        left: o.left,
                        right: o.right,
                        bottom: u.y - d * i / 2,
                        top: u.y + d * i / 2
                    });
                case "preserveY":
                    return S ? (f = l.right - l.left, m = l.top - l.bottom, g = {
                        x: l.left + f / 2,
                        y: l.bottom + m / 2
                    }, h = f / m, d = m / i, p = d * s, {
                        left: g.x - p * r / 2,
                        right: g.x + p * r / 2,
                        bottom: l.bottom,
                        top: l.top
                    }) : w ? (y = l.right - l.left, v = l.left + y / 2, h = y / o.height, d = o.height / i, p = d * s, {
                        left: v - p * r / 2,
                        right: v + p * r / 2,
                        bottom: o.bottom,
                        top: o.top
                    }) : _ ? (b = l.top - l.bottom, d = b / i, p = d * s, {
                        left: u.x - p * r / 2,
                        right: u.x + p * r / 2,
                        bottom: l.bottom,
                        top: l.top
                    }) : (b = o.top - o.bottom, d = b / i, p = d * s, {
                        left: u.x - p * r / 2,
                        right: u.x + p * r / 2,
                        bottom: o.bottom,
                        top: o.top
                    });
                default:
                    return o
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.computeBoundsFromScreenshotOpts = r
    }), define("dcgview-helpers/mathquill-proxy", ["require", "exports", "dcgview-helpers/mathquill-view"], function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = function() {
            function e(e) {
                this.mq = e, this.id = e.id, this.data = e.data
            }
            return e.prototype.simulateUserChangedLatex = function() {
                n.default.simulateUserChangedLatex(this.mq)
            }, e.prototype.simulateKeypress = function(e) {
                n.default.simulateKeypress(this.mq, e)
            }, e.prototype.latex = function(e) {
                return void 0 === e ? this.mq.latex() : (this.mq.latex(e), void this.simulateUserChangedLatex())
            }, e.prototype.reflow = function() {
                this.mq.reflow()
            }, e.prototype.el = function() {
                return this.mq.el()
            }, e.prototype.getAriaLabel = function() {
                return this.mq.getAriaLabel()
            }, e.prototype.setAriaLabel = function(e) {
                return this.mq.setAriaLabel(e)
            }, e.prototype.html = function() {
                return this.mq.html()
            }, e.prototype.mathspeak = function() {
                return this.mq.mathspeak()
            }, e.prototype.select = function() {
                this.mq.select()
            }, e.prototype.moveToRightEnd = function() {
                this.mq.moveToRightEnd()
            }, e.prototype.cmd = function(e) {
                this.mq.cmd(e), this.simulateUserChangedLatex()
            }, e.prototype.write = function(e) {
                this.mq.write(e), this.simulateUserChangedLatex()
            }, e.prototype.keystroke = function(e) {
                this.simulateKeypress(e)
            }, e.prototype.typedText = function(e) {
                this.mq.typedText(e), this.simulateUserChangedLatex()
            }, e.prototype.clearSelection = function() {
                this.mq.clearSelection()
            }, e.prototype.getAriaPostLabel = function() {
                return this.mq.getAriaPostLabel()
            }, e.prototype.setAriaPostLabel = function(e, t) {
                this.mq.setAriaPostLabel(e, t)
            }, e.prototype.blur = function() {
                this.mq.blur()
            }, e.prototype.focus = function() {
                this.mq.focus()
            }, e.prototype.revert = function() {
                this.mq.revert()
            }, e.prototype.ignoreNextMousedown = function(e) {
                this.mq.ignoreNextMousedown(e)
            }, e.prototype.clickAt = function(e, t, n) {
                this.mq.clickAt(e, t, n)
            }, e
        }();
        t.MathQuillProxy = r
    }), define("main/raf-loop", ["require", "lib/animation-frame"], function(e) {
        function t(e) {
            function t(r) {
                n.requestAnimationFrame(t), e(r)
            }
            n.requestAnimationFrame(t)
        }
        var n = e("lib/animation-frame");
        return t
    }), define("main/shared-clock-bus", ["require", "exports", "main/raf-loop", "underscore_model"], function(e, t, n, r) {
        "use strict";

        function i(e) {
            return s += 1, a.observeEvent("tick." + s, function(t, n) {
                e(n)
            }), s
        }

        function o(e) {
            a.unobserveEvent("tick." + e)
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var a = new r.UnderscoreModel;
        n(function(e) {
            a.triggerEvent("tick", e)
        });
        var s = 0;
        t.subscribe = i, t.unsubscribe = o
    }), define("main/shared-worker-pool", ["require", "exports", "worker/workerpool", "lib/urlparser"], function(e, t, n, r) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var i = r.getParameter("nworkers"),
            o = 4;
        i && (o = parseInt(i, 10)), t.default = new n(o)
    }), define("graphing-calc/json/config-options", ["require", "exports", "tslib", "lib/color-helpers", "lib/console", "main/font_sizes", "expressions/colors", "expressions/image_file_to_data_url", "../../lib/deepCopy"], function(e, t, n, r, i, o, a, s, l) {
        "use strict";

        function c(e) {
            return !!p.hasOwnProperty(e) || (!!d.hasOwnProperty(e) || !!h.hasOwnProperty(e))
        }

        function u(e) {
            var t = l.default(f);
            for (var n in e) t.hasOwnProperty(n) && (t[n] = e[n]);
            return r.isValidHexColor(t.backgroundColor) || (t.backgroundColor = f.backgroundColor, i.warn("Invalid backgroundColor. Background color must be a 3- or 6-character hex color (e.g. #cde or #ffaaaa)")), r.isValidHexColor(t.textColor) || (t.textColor = f.textColor, i.warn("Invalid textColor. Text color must be a 3- or 6-character hex color (e.g. #000 or #001111)")), void 0 === e.zoomButtons && (t.graphpaper && !t.lockViewport || (t.zoomButtons = !1)), void 0 === e.images && (t.graphpaper || (t.images = !1)), e.hasOwnProperty("menus") && (i.warn("As of API version 0.4, the 'menus' option is deprecated and has been split into 'settingsMenu' (boolean) and 'expressionsTopbar' (boolean)."), e.hasOwnProperty("settingsMenu") || (t.settingsMenu = !!e.menus), e.hasOwnProperty("expressionsTopbar") || (t.expressionsTopbar = !!e.menus)), e.hasOwnProperty("solutions") && (i.warn("As of API v1.0, the 'solutions' option is deprecated and has been replaced with 'pointsOfInterest' (boolean)."), e.hasOwnProperty("pointsOfInterest") || (t.pointsOfInterest = !!e.solutions)), e.hasOwnProperty("singleVariableSolutions") && i.warn("As of API v1.0, the 'singleVariableSolutions' has been removed. The calculator no longer displays solutions to single variable equations."), t.graphpaper || (t.expressionsCollapsed && (t.expressionsCollapsed = !1, i.warn("Desmos API initialized with bad options. graphpaper: false and expressionsCollapsed: true are incompatible. Proceeding with expressionsCollapsed: false.")), t.zoomButtons && (t.zoomButtons = !1, i.warn("Desmos API initialized with bad options. graphpaper: false and zoomButtons: true are incompatible. Proceeding with zoomButtons: false.")), t.showResetButtonOnGraphpaper && (t.showResetButtonOnGraphpaper = !1, i.warn("Desmos API initialized with bad options. graphpaper: false and showResetButtonOnGraphpaper: true are incompatible. Proceeding with showResetButtonOnGraphpaper: false."))), t.lockViewport && t.zoomButtons && (t.zoomButtons = !1, i.warn("Desmos API initialized with bad options. lockViewport: true and zoomButtons: true are incompatible. Proceeding with zoomButtons: false.")), t
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var p = {
            keypad: !0,
            graphpaper: !0,
            expressions: !0,
            settingsMenu: !0,
            zoomButtons: !0,
            showResetButtonOnGraphpaper: !1,
            expressionsTopbar: !0,
            capExpressionSize: !1,
            pointsOfInterest: !0,
            trace: !0,
            border: !0,
            lockViewport: !1,
            expressionsCollapsed: !1,
            administerSecretFolders: !1,
            advancedStyling: !1,
            clickableObjects: !1,
            images: !0,
            imageUploadCallback: s.imageFileToDataURL,
            folders: !0,
            notes: !0,
            links: !0,
            qwertyKeyboard: !0,
            restrictedFunctions: !1,
            pasteGraphLink: !1,
            pasteTableData: !0,
            degreeMode: !1,
            clearIntoDegreeMode: !1,
            autosize: !0,
            plotSingleVariableImplicitEquations: !0,
            colors: {
                RED: a.RED,
                BLUE: a.BLUE,
                GREEN: a.GREEN,
                ORANGE: a.ORANGE,
                PURPLE: a.PURPLE,
                BLACK: a.BLACK
            },
            invertedColors: !1,
            functionDefinition: !0,
            projectorMode: !1,
            decimalToFraction: !0,
            fontSize: o.MEDIUM,
            language: "en",
            backgroundColor: "#fff",
            textColor: "#000",
            distributions: !0
        };
        t.publicConfigOptions = Object.keys(p);
        var d = {
                showHamburger: !1,
                disableScrollFix: !1,
                branding: !0,
                redrawSlowly: !1,
                onlyTraceSelected: !1,
                disableMouseInteractions: !1,
                nativeOnscreenKeypad: !1,
                plaidMode: !1,
                pasteGraphLinkCallback: void 0,
                editOnWeb: !1,
                crossOriginSaveTest: !1,
                enableTabindex: !0,
                audioTraceReverseExpressions: !1,
                transparentBackground: !1
            },
            h = {
                solutions: !0,
                menus: !0,
                singleVariableSolutions: !0
            },
            f = n.__assign({}, p, d);
        t.isConfigOption = c, t.validateConfigOptions = u
    }), define("api/graphing", ["require", "exports", "tslib", "lib/i18n", "main/calc_embed", "lib/deepCopy", "underscore_model", "math/recttransformation", "lib/dom-change-detector", "graphing/compute-async-screenshot-bounds", "graphing-calc/api/sanitize-expression", "dcgview-helpers/mathquill-view", "dcgview-helpers/mathquill-proxy", "lib/console", "underscore", "main/shared-clock-bus", "main/shared-worker-pool", "graphing-calc/json/graph-settings", "graphing-calc/json/config-options", "lib/random-seed"], function(e, t, n, r, i, o, a, s, l, c, u, p, d, h, f, m, g, y, v, b) {
        "use strict";

        function x(e, t) {
            var n = {},
                r = {};
            for (var i in e) v.isConfigOption(i) ? n[i] = e[i] : y.isGraphSetting(i) ? r[i] = e[i] : t || h.warn("Unrecognized setting: " + i + ". Ignoring.");
            return {
                configOptions: n,
                settingsOptions: r
            }
        }

        function w(e, t) {
            var n = {};
            return t.hasOwnProperty("x") && (n.x = e.mapX(t.x)), t.hasOwnProperty("y") && (n.y = e.mapY(t.y)), n
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var _, S = function() {
                function e() {
                    this.model = new a.UnderscoreModel
                }
                return e.prototype.triggerEvent = function(e, t) {
                    this.model.triggerEvent(e, t)
                }, e.prototype.observeEvent = function(e, t) {
                    this.model.observeEvent(e, t)
                }, e.prototype.unobserveEvent = function(e) {
                    this.model.unobserveEvent(e)
                }, e.prototype.setProperty = function(e, t) {
                    this[e] = t, this.model.setProperty(e, t)
                }, e.prototype.observe = function(e, t) {
                    this.model.observe(e, t)
                }, e.prototype.observeAndSync = function(e, t) {
                    this.model.observeAndSync(e, t)
                }, e.prototype.unobserve = function(e) {
                    this.model.unobserve(e)
                }, e
            }(),
            E = function(e) {
                function t(n, r, o) {
                    var a = e.call(this) || this;
                    if (a._asyncScreenshotQueue = [], a._isAsyncScreenshotInProgress = !1, !(a instanceof t)) return new t(n, r, o);
                    var s = x(r || {}, !0),
                        c = v.validateConfigOptions(s.configOptions),
                        u = s.settingsOptions;
                    return a._calc = new i.default(n, g.default, c), a._calc.interceptTouch(), a.controller = a._calc.controller, a.controller.onEventsEmitted = function(e) {
                        a.setProperty("isAnyExpressionSelected", !!a.controller.getSelectedItem()), a.setProperty("expressionAnalysis", a.controller.getExpressionAnalysis());
                        var t = p.default.getFocusedMathquill();
                        a.setProperty("focusedMathQuill", t ? new d.MathQuillProxy(t) : void 0);
                        for (var n in e) e.hasOwnProperty(n) && e[n] && a.triggerEvent(n, void 0)
                    }, a._calc.graphpaperBounds.observeAndSync("mathCoordinates", a._syncGraphpaperBounds.bind(a)), a._calc.graphpaperBounds.observeAndSync("pixelCoordinates", a._syncGraphpaperBounds.bind(a)), a.colors = a.controller.getColors(), a._initGraphSettings(), a.updateSettings(u), a._sharedClockBusToken = m.subscribe(function(e) {
                        a._calc.tick(e)
                    }), a.domChangeDetector = new l.default(n, function(e) {
                        switch (e.type) {
                            case "added":
                                a._calc.resize(e.size);
                                break;
                            case "removed":
                                break;
                            case "resized":
                                a._calc.resize(e.size)
                        }
                    }), c.autosize ? a.domChangeDetector.startWatching() : a.domChangeDetector.checkForChanges(), "function" == typeof o && o(a), a
                }
                return n.__extends(t, e), t.prototype.destroy = function() {
                    function e(e) {
                        h.warn("You've destroyed this API instance. You can no longer call ." + e + "()")
                    }
                    this._calc.destroy(), this.controller.onEventsEmitted = function() {}, m.unsubscribe(this._sharedClockBusToken), this.domChangeDetector.destroy();
                    for (var t in this) "function" == typeof this[t] ? this[t] = e.bind(this, t) : this.hasOwnProperty(t) && delete this[t];
                    this.destroy = function() {}
                }, t.prototype._syncGraphpaperBounds = function() {
                    var e = this;
                    this.controller.runAfterDispatch(function() {
                        e.setProperty("graphpaperBounds", {
                            mathCoordinates: e._calc.graphpaperBounds.mathCoordinates,
                            pixelCoordinates: e._calc.graphpaperBounds.pixelCoordinates
                        })
                    })
                }, t.prototype._initGraphSettings = function() {
                    var e = this,
                        t = new a.UnderscoreModel;
                    this.settings = this.graphSettings = t, y.publicGraphSettings.forEach(function(n) {
                        e._calc.grapher.settings.observeAndSync(n, function() {
                            e.controller.runAfterDispatch(function() {
                                t.setProperty(n, e._calc.grapher.settings[n])
                            })
                        })
                    }), v.publicConfigOptions.forEach(function(n) {
                        e._calc.grapher.settings.config.observeAndSync(n, function() {
                            e.controller.runAfterDispatch(function() {
                                t.setProperty(n, e._calc.grapher.settings.config[n])
                            })
                        })
                    })
                }, t.prototype.updateSettings = function(e) {
                    var t = x(e, !1),
                        n = t.configOptions,
                        r = t.settingsOptions;
                    f.isEmpty(n) || this._calc.setOptions(n), f.isEmpty(r) || this._calc.grapher.settings.setGraphSettings(r), this.notifyControllerOfAPICall()
                }, t.prototype.setGraphSettings = function(e) {
                    h.warn("As of API v0.8 the 'setGraphSettings' method is deprecated and has been renamed 'updateSettings.'"), this.updateSettings(e), this.setGraphSettings = this.updateSettings, this.notifyControllerOfAPICall()
                }, t.prototype.fetchLanguage = function(e) {
                    return r.fetchLanguage(e)
                }, t.prototype.setDefaultState = function(e) {
                    this._calc.grapher.settings.setProperty("defaultState", e), this.notifyControllerOfAPICall()
                }, t.prototype.mathToPixels = function(e) {
                    return w(s.RT.fromRects(this.graphpaperBounds.mathCoordinates, this.graphpaperBounds.pixelCoordinates), e)
                }, t.prototype.pixelsToMath = function(e) {
                    return w(s.RT.fromRects(this.graphpaperBounds.pixelCoordinates, this.graphpaperBounds.mathCoordinates), e)
                }, t.prototype.notifyControllerOfAPICall = function() {
                    this.controller.dispatch({
                        type: "api-method-called"
                    })
                }, t.prototype.setExpression = function(e) {
                    var t = this.controller,
                        n = t.getItemModel(e.id),
                        r = n && n.type,
                        i = u.validateItem(e, r, this.controller);
                    if (i)
                        if (r) this.controller.dispatch({
                            type: "set-expression-properties-from-api",
                            id: i.id,
                            properties: i
                        });
                        else {
                            if ("image" === i.type) return;
                            this.controller.dispatch({
                                type: "add-item-to-end-from-api",
                                state: i
                            })
                        }
                }, t.prototype.setExpressions = function(e) {
                    e.forEach(this.setExpression.bind(this))
                }, t.prototype.removeExpression = function(e) {
                    var t = e.id.toString();
                    this.controller.dispatch({
                        type: "remove-item-by-id",
                        id: t
                    })
                }, t.prototype.removeExpressions = function(e) {
                    e.forEach(this.removeExpression.bind(this))
                }, t.prototype.removeSelected = function() {
                    var e = this.controller.getSelectedItem();
                    e && this.controller.dispatch({
                        type: "remove-item-by-id",
                        id: e.id
                    })
                }, t.prototype.setMathBounds = function(e) {
                    e && e.left < e.right && e.bottom < e.top ? this._calc.setViewport([e.left, e.right, e.bottom, e.top]) : h.warn("Invalid bounds argument. Expected a bounds object with bounds.bottom < bounds.top, and bounds.left < bounds.right. Got " + JSON.stringify(e)), this.notifyControllerOfAPICall()
                }, t.prototype.setViewport = function(e) {
                    4 == e.length && e[1] > e[0] && e[3] > e[2] ? this._calc.setViewport(e) : h.warn("Invalid viewport.  Expected [xmin, xmax, ymin, ymax].  Got " + e), this.notifyControllerOfAPICall()
                }, t.prototype.resize = function() {
                    this.domChangeDetector.checkForChanges()
                }, t.prototype.getState = function(e) {
                    return this.controller.getState(e)
                }, t.prototype.getExpressions = function() {
                    return this.getState({
                        stripDefaults: !1
                    }).expressions.list.map(u.sanitizeItem)
                }, t.prototype.setBlank = function(e) {
                    this.controller.dispatch({
                        type: "set-blank",
                        opts: e || {}
                    })
                }, t.prototype.setState = function(e, t) {
                    this.controller.dispatch({
                        type: "set-state",
                        state: e,
                        opts: t || {}
                    })
                }, t.prototype.undo = function() {
                    this.controller.dispatch({
                        type: "undo"
                    })
                }, t.prototype.redo = function() {
                    this.controller.dispatch({
                        type: "redo"
                    })
                }, t.prototype.clearHistory = function() {
                    this.controller.dispatch({
                        type: "clear-undoredo-history"
                    })
                }, t.prototype.newRandomSeed = function() {
                    this.updateSettings({
                        randomSeed: b.default()
                    })
                }, t.prototype.screenshot = function(e) {
                    return e || (e = {}), e = this._validateBrailleScreenshotOptions(e), this._calc.grapher.screenshot(e)
                }, t.prototype._getMathAspectRatio = function() {
                    var e = this.graphpaperBounds.mathCoordinates,
                        t = this._calc.grapher.getProjection().pixelCoordinates,
                        n = t.right - t.left,
                        r = t.bottom - t.top;
                    return e.width / n / (e.height / r)
                }, t.prototype.isProjectionUniform = function() {
                    return !!this._calc.grapher.getProjection().settings.squareAxes
                }, t.prototype._validateBrailleScreenshotOptions = function(e) {
                    e = o.default(e);
                    var t = e.braille;
                    if (t) {
                        var n = t.embosserModel;
                        if (!n) return h.warn("Screenshot braille options requires an embosser model to be specified. "), h.warn("Continuing with non-braille screenshot."), delete e.braille, e;
                        if ("etc" === n && (t.embosserModel = "etc11"), "vpmax" === n && (t.embosserModel = "vpmax11"), "etc8" !== t.embosserModel && "etc11" !== t.embosserModel && "vpmax8" !== t.embosserModel && "vpmax11" !== t.embosserModel) return h.warn('Unknown screenshot braille embosser model. Valid models are "etc" and "vpmax".'), h.warn("Continuing with non-braille screenshot."), delete e.braille, e;
                        "nemeth" !== t.brailleMode && "ueb" !== t.brailleMode && (h.warn("Screenshot options braille.brailleMode must be nemeth or ueb. Proceeding with nemeth."), t.brailleMode = "nemeth"), e.width && (h.warn("Screenshot width option is ignored when exporting Braille."), delete e.width), e.height && (h.warn("Screenshot height option is ignored when exporting Braille."), delete e.height), e.targetPixelRatio && (h.warn("Screenshot targetPixelRatio option is ignored when exporting Braille."), delete e.targetPixelRatio), e.preserveAxisNumbers && (h.warn("Screenshot preserveAxisNumbers option is ignored when exporting Braille."), delete e.preserveAxisNumbers)
                    }
                    return e
                }, t.prototype._validateAsyncScreenshotOpts = function(e) {
                    var t = e.mode || "contain",
                        r = e.width || e.height || this.graphpaperBounds.pixelCoordinates.width,
                        i = e.height || e.width || this.graphpaperBounds.pixelCoordinates.height,
                        o = e.targetPixelRatio || 1,
                        a = e.preserveAxisNumbers,
                        s = e.mathBounds || {},
                        l = this._getMathAspectRatio(),
                        u = this.graphpaperBounds.pixelCoordinates.width / this.graphpaperBounds.pixelCoordinates.height,
                        p = c.computeBoundsFromScreenshotOpts({
                            mode: t,
                            width: r,
                            height: i,
                            currentBounds: this.graphpaperBounds.mathCoordinates,
                            graphpaperAspectRatio: u,
                            mathAspectRatio: l,
                            mathBounds: s
                        });
                    return {
                        opts: n.__assign({}, e, {
                            width: r,
                            height: i,
                            targetPixelRatio: o,
                            preserveAxisNumbers: a
                        }),
                        mathBounds: p
                    }
                }, t.prototype._processAsyncScreenshot = function() {
                    var e = this;
                    if (!this._isAsyncScreenshotInProgress) {
                        var n = this._asyncScreenshotQueue.shift();
                        if (n) {
                            this._isAsyncScreenshotInProgress = !0;
                            var r = n.options,
                                i = n.mathBounds,
                                o = n.state,
                                a = n.callback;
                            _ || (_ = new t);
                            var s = _;
                            s.setState(o), s.setMathBounds(i);
                            var l = s._calc.evaluator,
                                c = function() {
                                    s._calc.grapher.asyncScreenshot(r, function(t) {
                                        a(t), e._isAsyncScreenshotInProgress = !1, e._processAsyncScreenshot()
                                    })
                                },
                                u = this.controller,
                                p = m.subscribe(function() {
                                    u.areAnyImagesLoading() || (m.unsubscribe(p), l.notifyWhenSynced(c))
                                })
                        }
                    }
                }, t.prototype.asyncScreenshot = function(e, t) {
                    if (!arguments.length) return void h.warn("asyncScreenshot expects a callback");
                    if (1 === arguments.length) {
                        if ("function" != typeof e) return void h.warn("asyncScreenshot expects a callback");
                        t = e, e = {}
                    }
                    e || (e = {}), e = this._validateBrailleScreenshotOptions(e);
                    var n = this._validateAsyncScreenshotOpts(e),
                        r = n.opts,
                        i = n.mathBounds;
                    this._asyncScreenshotQueue.push({
                        options: r,
                        mathBounds: i,
                        state: this.getState(),
                        callback: t
                    }), this._processAsyncScreenshot()
                }, t.prototype.setOptions = function(e) {
                    var t = this._calc.setOptions(e);
                    return this.notifyControllerOfAPICall(), t
                }, t.prototype.focusFirstExpression = function() {
                    var e = this.controller.getItemModelByIndex(0);
                    e && this.controller.dispatch({
                        type: "move-focus-to-item",
                        id: e.id,
                        where: "end"
                    })
                }, t.prototype.HelperExpression = function(e) {
                    var t = e && e.latex || "",
                        n = new a.UnderscoreModel;
                    return n.latex = t, this.controller.dispatch({
                        type: "add-helper-expression",
                        state: {
                            type: "helper-expression",
                            id: this.controller.generateId(),
                            latex: t,
                            proxy: n
                        }
                    }), n
                }, t
            }(S);
        t.default = E
    }), define("main/calc_headless", ["require", "exports", "main/graph_settings", "main/evaluator", "underscore_model", "main/controller"], function(e, t, n, r, i, o) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var a = function() {
            function e(e, t) {
                var a = this,
                    s = new n;
                for (var l in t) s.config.setProperty(l, t[l]);
                this.controller = new o.default(s);
                var c = new r.Evaluator(e);
                this.controller.setEvaluator(c), c.triggerStatusChange = function(e) {
                    a.controller.dispatch({
                        type: "on-evaluator-changes",
                        changes: e
                    })
                };
                var u = new i.UnderscoreModel;
                u.setProperties({
                    pixelCoordinates: {
                        top: 0,
                        bottom: 0,
                        left: 0,
                        right: 0,
                        width: 0,
                        height: 0
                    },
                    mathCoordinates: {
                        top: 0,
                        bottom: 0,
                        left: 0,
                        right: 0,
                        width: 0,
                        height: 0
                    }
                }), this.graphpaperBounds = u, this.evaluator = c, this.setBlank()
            }
            return e.prototype.setBlank = function(e) {
                this.controller.dispatch({
                    type: "set-blank",
                    opts: e
                })
            }, e.prototype.tick = function() {
                this.evaluator.tick()
            }, e.prototype.destroy = function() {
                this.evaluator.destroy()
            }, e
        }();
        t.HeadlessCalc = a
    }), define("api/headless", ["require", "exports", "main/calc_headless", "graphing-calc/json/config-options", "main/shared-clock-bus", "main/shared-worker-pool", "graphing-calc/api/sanitize-expression", "underscore_model", "lib/console"], function(e, t, n, r, i, o, a, s, l) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var c = function() {
            function e() {
                var t = this;
                if (!(this instanceof e)) return new e;
                this._calc = new n.HeadlessCalc(o.default, r.validateConfigOptions({})), this.controller = this._calc.controller, this._sharedClockBusToken = i.subscribe(function() {
                    t._calc.tick()
                })
            }
            return e.prototype.destroy = function() {
                function e(e) {
                    l.warn("You've destroyed this API instance. You can no longer call ." + e + "()")
                }
                this._calc.destroy(), i.unsubscribe(this._sharedClockBusToken);
                for (var t in this) "function" == typeof this[t] ? this[t] = e.bind(this, t) : this.hasOwnProperty(t) && delete this[t];
                this.destroy = function() {}
            }, e.prototype.setExpression = function(e) {
                var t = this.controller,
                    n = t.getItemModel(e.id),
                    r = n && n.type,
                    i = a.validateItem(e, r, this.controller);
                if (i)
                    if (r) this.controller.dispatch({
                        type: "set-expression-properties-from-api",
                        id: i.id,
                        properties: i
                    });
                    else {
                        if ("image" === i.type) return;
                        this.controller.dispatch({
                            type: "add-item-to-end-from-api",
                            state: i
                        })
                    }
            }, e.prototype.setExpressions = function(e) {
                e.forEach(this.setExpression.bind(this))
            }, e.prototype.removeExpression = function(e) {
                var t = e.id.toString();
                this.controller.dispatch({
                    type: "remove-item-by-id",
                    id: t
                })
            }, e.prototype.removeExpressions = function(e) {
                e.forEach(this.removeExpression.bind(this))
            }, e.prototype.getState = function(e) {
                return this.controller.getState(e)
            }, e.prototype.getExpressions = function() {
                return this.getState({
                    stripDefaults: !1
                }).expressions.list.map(a.sanitizeItem)
            }, e.prototype.setBlank = function(e) {
                this.controller.dispatch({
                    type: "set-blank",
                    opts: e || {}
                })
            }, e.prototype.setState = function(e, t) {
                this.controller.dispatch({
                    type: "set-state",
                    state: e,
                    opts: t || {}
                })
            }, e.prototype.HelperExpression = function(e) {
                var t = e && e.latex || "",
                    n = new s.UnderscoreModel;
                return n.latex = t, this.controller.dispatch({
                    type: "add-helper-expression",
                    state: {
                        type: "helper-expression",
                        id: this.controller.generateId(),
                        latex: t,
                        proxy: n
                    }
                }), n
            }, e.prototype.resize = function() {}, e
        }();
        t.default = c
    }), define("api/abstract", ["require", "exports", "lib/console", "underscore_model", "ipad.scrollfix", "lib/dom-change-detector"], function(e, t, n, r, i, o) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var a = function() {
            function e(e) {
                if (this.rootElt = e, this.eventModel = new r.UnderscoreModel, !e) throw new Error("must pass an HTMLElement to the API")
            }
            return e.prototype.setupDomChangeDetector = function(e) {
                var t = this;
                this.autoSize = e, i.limitScrollOnElement(this.rootElt), this.domChangeDetector = new o.default(this.rootElt, function(e) {
                    switch (e.type) {
                        case "added":
                            t.view = t.onCreateView(), t.onResizeView(e.size);
                            break;
                        case "removed":
                            t.onDestroyView(), t.view = void 0;
                            break;
                        case "resized":
                            t.onResizeView(e.size)
                    }
                }), !1 !== this.autoSize ? this.domChangeDetector.startWatching() : this.domChangeDetector.checkForChanges()
            }, e.prototype.detach = function() {
                n.warn(".detach() is deprecated. It should no longer be necessary")
            }, e.prototype.destroy = function() {
                function e(e) {
                    n.warn("You've destroyed this API instance. You can no longer call ." + e + "()")
                }
                this.view && this.onDestroyView(), this.domChangeDetector.destroy();
                for (var t in this) "function" == typeof this[t] ? this[t] = e.bind(this, t) : this.hasOwnProperty(t) && delete this[t];
                this.destroy = function() {}
            }, e.prototype.resize = function() {
                this.domChangeDetector.checkForChanges()
            }, e.prototype.updateView = function() {
                this.view && document.body && document.body.contains(this.rootElt) && this.view.update()
            }, e.prototype.triggerEvent = function(e, t) {
                this.eventModel.triggerEvent(e, t)
            }, e.prototype.observeEvent = function(e, t) {
                this.eventModel.observeEvent(e, t)
            }, e.prototype.unobserveEvent = function(e) {
                this.eventModel.unobserveEvent(e)
            }, e
        }();
        t.default = a
    }), define("immutable-store", ["require", "underscore", "lib/deepCopy"], function(e) {
        function t(e) {
            return r.clone(e)
        }

        function n(e) {
            this.setState(e)
        }
        var r = e("underscore"),
            i = e("lib/deepCopy").default;
        return n.prototype.setState = function(e) {
            this.state = e
        }, n.prototype.getState = function() {
            return this.state
        }, n.prototype.set = function(e, n) {
            if (1 === arguments.length) return void(this.state = e);
            if ("string" == typeof e) return this.state = t(this.state), void(this.state[e] = n);
            var r, i = e.length - 2,
                o = e[i + 1];
            this.state = r = t(this.state);
            for (var a = 0; a <= i; a++) {
                var s = e[a];
                r = r[s] = t(r[s])
            }
            r[o] = n
        }, n.prototype.deepMutate = function(e, n) {
            if (1 === arguments.length) return n = e, this.state = i(this.state), void n(this.state);
            if ("string" == typeof e) return this.state = t(this.state), this.state[e] = i(this.state[e]), void n(this.state[e]);
            for (var r = e.length - 2, o = e[r + 1], a = this.state = t(this.state), s = 0; s <= r; s++) {
                var l = e[s];
                a = a[l] = t(a[l])
            }
            a = a[o] = i(a[o]), n(a)
        }, n.prototype.shallowMutate = function(e, n) {
            if (1 === arguments.length) return n = e, this.state = t(this.state), void n(this.state);
            if ("string" == typeof e) return this.state = t(this.state), this.state[e] = t(this.state[e]), void n(this.state[e]);
            for (var r = e.length - 1, i = this.state = t(this.state), o = 0; o <= r; o++) {
                var a = e[o];
                i = i[a] = t(i[a])
            }
            n(i)
        }, n.areShallowEqual = function(e, t) {}, n.areDeepEqual = function(e, t) {}, {
            default: n
        }
    }), define("basic/model", ["require", "exports", "tslib", "immutable-store", "main/shared-clock-bus", "graphing/label", "main/evaluator", "graphing/label"], function(e, t, n, r, i, o, a, s) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var l = function() {
            function e(e) {
                var t = this,
                    n = e.evaluationMode,
                    o = e.additionalFunctions,
                    a = e.functionDefinition,
                    s = e.workerPool;
                this._evaluations = {}, this._nextObjectId = 0, this.store = new r.default({
                    expressions: {
                        1: {
                            id: "1",
                            latex: "",
                            braille: "",
                            type: "latex",
                            displayAsFraction: !1
                        }
                    },
                    order: ["1"],
                    settings: {
                        degreeMode: !1
                    },
                    ui: {
                        focus: void 0
                    }
                }), this.evaluationMode = n, this.additionalFunctions = o, this.functionDefinition = a, this.workerPool = s, this._setupEvaluator(), this.clear(), this._sharedClockBusToken = i.subscribe(function() {
                    t._evaluator.tick()
                })
            }
            return e.prototype.isSingleExpression = function() {
                return "singleExpressionScientific" === this.evaluationMode || "singleExpressionFourFunction" === this.evaluationMode
            }, e.prototype.destroy = function() {
                i.unsubscribe(this._sharedClockBusToken)
            }, e.prototype.generateObjectId = function() {
                return (this._nextObjectId++).toString()
            }, e.prototype.updateNextObjectId = function() {
                var e = this.store.getState().order;
                this._nextObjectId = 0;
                for (var t = /^[0-9]+$/, n = 0, r = e; n < r.length; n++) {
                    var i = r[n];
                    if (t.test(i)) {
                        var o = parseInt(i, 10);
                        o >= this._nextObjectId && (this._nextObjectId = o + 1)
                    }
                }
            }, e.prototype.clearShouldDebounceUndoRedo = function() {
                this._shouldDebounceUndoRedo = !1
            }, e.prototype.markShouldDebounceUndoRedo = function() {
                this._shouldDebounceUndoRedo = !0
            }, e.prototype.getShouldDebounceUndoRedo = function() {
                return this._shouldDebounceUndoRedo
            }, e.prototype.clearCachedBrailleValues = function() {
                for (var e = 0, t = this.getExpressionOrder(); e < t.length; e++) {
                    var n = t[e];
                    this.store.set(["expressions", n, "braille"], "")
                }
            }, e.prototype.getState = function() {
                return this.store.getState()
            }, e.prototype.getPersistedState = function() {
                var e = this.getState(),
                    t = e.expressions,
                    n = e.order,
                    r = e.settings;
                return {
                    expressions: {
                        list: n.map(function(e) {
                            var n = t[e];
                            return {
                                id: n.id,
                                latex: n.latex,
                                displayAsFraction: n.displayAsFraction
                            }
                        })
                    },
                    settings: r
                }
            }, e.prototype.setState = function(e) {
                this.store.set(e), this._updateIndexes(), this.updateNextObjectId()
            }, e.prototype.setStateFromAPI = function(e) {
                var t = [],
                    n = {};
                e.expressions.list.forEach(function(e) {
                    t.push(e.id), n[e.id] = {
                        id: e.id,
                        latex: e.latex,
                        braille: "",
                        type: "latex",
                        displayAsFraction: !!e.displayAsFraction
                    }
                }), this.setState({
                    expressions: n,
                    order: t,
                    settings: e.settings,
                    ui: {
                        focus: void 0
                    }
                })
            }, e.prototype.canClear = function() {
                if (this.getNumberOfExpressions() > 1) return !0;
                var e = this.getExpressionOrder()[0];
                return "" !== this.getExpressionLatex(e)
            }, e.prototype.clear = function() {
                this.setState({
                    expressions: {
                        1: {
                            id: "1",
                            type: "latex",
                            latex: "",
                            braille: "",
                            displayAsFraction: !1
                        }
                    },
                    ui: {
                        focus: void 0
                    },
                    order: ["1"],
                    settings: this.getState().settings
                })
            }, e.prototype.getExpressionOrder = function() {
                return this.store.getState().order
            }, e.prototype.getNumberOfExpressions = function() {
                return this.getExpressionOrder().length
            }, e.prototype.getExpressionById = function(e) {
                return this.getState().expressions[e]
            }, e.prototype.getExpressionIndex = function(e) {
                return this._indexes[e]
            }, e.prototype._getExpressionByIndex = function(e) {
                var t = this.getExpressionOrder()[e];
                return this.getExpressionById(t)
            }, e.prototype._updateIndexes = function() {
                this._indexes = {};
                for (var e = 0, t = 0, n = this.getExpressionOrder(); t < n.length; t++) {
                    var r = n[t];
                    this._indexes[r] = e, e += 1
                }
                this._evaluate()
            }, e.prototype._usesAnsById = function(e) {
                return -1 !== this.getExpressionById(e).latex.indexOf("\\operatorname{ans}")
            }, e.prototype._getPreviousExpById = function(e) {
                var t = this.getExpressionIndex(e);
                return this._getExpressionByIndex(t - 1)
            }, e.prototype.createBlankAfterId = function(e) {
                if (!this.isSingleExpression() && this.getExpressionById(e).latex) {
                    var t = this.getExpressionIndex(e),
                        n = this.generateObjectId();
                    this.store.shallowMutate("order", function(e) {
                        e.splice(t + 1, 0, n)
                    }), this.store.shallowMutate("expressions", function(e) {
                        e[n] = {
                            id: n,
                            latex: "",
                            braille: "",
                            type: "latex",
                            displayAsFraction: !1
                        }
                    }), this._updateIndexes(), this.setFocusedById(n, !0)
                }
            }, e.prototype.conditionallyCopyPrevious = function(e) {
                var t = this._getPreviousExpById(e),
                    n = this.getExpressionById(e);
                null != t && "" === n.latex && this._usesAnsById(t.id) && this.setLatexById(e, t.latex)
            }, e.prototype.backspaceAtFrontOfId = function(e) {
                if ("" === this.getExpressionById(e).latex && 1 !== this.getNumberOfExpressions()) {
                    var t = this.getExpressionIndex(e);
                    this.store.shallowMutate("order", function(e) {
                        e.splice(t, 1)
                    }), this.store.shallowMutate("expressions", function(t) {
                        delete t[e]
                    }), this._updateIndexes(), this._setFocusedByIndex(Math.max(t - 1, 0), !0)
                }
            }, e.prototype.setLatexById = function(e, t) {
                this.store.set(["expressions", e, "latex"], t), this.store.set(["expressions", e, "braille"], ""), "" === t && this.setFractionEvaluation(e, !1), this._evaluate()
            }, e.prototype.setLatexAndBrailleById = function(e, t, n) {
                this.store.set(["expressions", e, "latex"], t), this.store.set(["expressions", e, "braille"], n), "" === t && this.setFractionEvaluation(e, !1), this._evaluate()
            }, e.prototype.setFractionEvaluation = function(e, t) {
                this.store.set(["expressions", e, "displayAsFraction"], t)
            }, e.prototype.setLatexOfFocusedExpression = function(e) {
                var t = this.getFocusedExpressionId();
                t && this.setLatexById(t, e)
            }, e.prototype.isExpressionFocused = function(e) {
                return this.getFocusedExpressionId() === e
            }, e.prototype.getExpressionLatex = function(e) {
                return this.getExpressionById(e).latex
            }, e.prototype.getExpressionError = function(e) {
                var t = this._evaluations[e];
                return t ? t.error : ""
            }, e.prototype.getExpressionValue = function(e) {
                var t = this._evaluations[e];
                if (t) return t.value
            }, e.prototype.getExpressionAns = function(e) {
                var t = this._evaluations[e];
                if (t) return t.ans
            }, e.prototype.shouldShowEvaluationForExpression = function(e) {
                var t = this._evaluations[e];
                return !!t && t.showEvaluation
            }, e.prototype.isRationalizableConstant = function(e) {
                var t = this._evaluations[e];
                return !!t && t.isRationalizableConstant
            }, e.prototype.canDisplayEvaluationAsFraction = function(e) {
                var t = this.getExpressionValue(e);
                return !!t && s.canDisplayAsFraction(t)
            }, e.prototype._setFocusedByIndex = function(e, t) {
                var r, i = this._getExpressionByIndex(e),
                    o = n.__assign({}, this.store.getState()),
                    a = !1;
                t ? (r = {
                    type: "latex-expression",
                    id: i.id
                }, a = !0) : this.getFocusedExpressionId() === i.id ? (r = void 0, a = !0) : o.expressions[i.id] = n.__assign({}, i, {
                    braille: ""
                }), a && (o.ui = {
                    focus: r
                }), this.store.set(o)
            }, e.prototype.setFocusedById = function(e, t) {
                var n = this.getExpressionIndex(e);
                this._setFocusedByIndex(n, t)
            }, e.prototype.focusPrevById = function(e) {
                var t = this.getExpressionIndex(e) - 1;
                t >= 0 && this._setFocusedByIndex(t, !0)
            }, e.prototype.focusNextById = function(e) {
                var t = this.getExpressionIndex(e) + 1;
                t < this.getNumberOfExpressions() ? this._setFocusedByIndex(t, !0) : this.createAtEnd()
            }, e.prototype.getFocusedExpression = function() {
                var e = this.getFocusedExpressionId();
                return e ? this.getExpressionById(e) : void 0
            }, e.prototype.getFocusedExpressionId = function() {
                var e = this.getState().ui.focus;
                return e && e.id
            }, e.prototype.clearFocusedExpression = function() {
                var e = this.getFocusedExpression();
                e && this.setLatexById(e.id, "")
            }, e.prototype.shouldShowClear = function() {
                if (1 === this.getNumberOfExpressions()) return !1;
                var e = this.getFocusedExpression();
                return !!e && !!e.latex
            }, e.prototype.getLastExpression = function() {
                return this._getExpressionByIndex(this.getNumberOfExpressions() - 1)
            }, e.prototype.isLastExpressionEmpty = function() {
                return !!this.getLastExpression().latex
            }, e.prototype.createAtEnd = function() {
                this.createBlankAfterId(this.getLastExpression().id)
            }, e.prototype.focusLastExpression = function() {
                this._setFocusedByIndex(this.getNumberOfExpressions() - 1, !0)
            }, e.prototype.focusFirstExpression = function() {
                this._setFocusedByIndex(0, !0)
            }, e.prototype.getDegreeMode = function() {
                return this.getState().settings.degreeMode
            }, e.prototype.setDegreeMode = function(e) {
                this.store.set(["settings", "degreeMode"], !!e), this._evaluate()
            }, e.prototype._cleanupLatex = function(e) {
                return e = o.trimLatex(e), "=" === e.substr(e.length - 1) && (e = e.substr(0, e.length - 1)), e
            }, e.prototype._evaluate = function() {
                var e = this;
                this._evaluator.clearStatementsAndStartCompleteState(), this.getExpressionOrder().forEach(function(t) {
                    return e._evaluator.addStatement({
                        id: t,
                        index: e.getExpressionIndex(t),
                        latex: e._cleanupLatex(e.getExpressionLatex(t)),
                        shouldGraph: !1,
                        type: "statement"
                    })
                }), this._evaluator.setDegreeMode(this.getDegreeMode())
            }, e.prototype._setupEvaluator = function() {
                var e = this;
                this._evaluator = new a.Evaluator(this.workerPool), this._evaluator.setEvaluationMode(this.evaluationMode), this._evaluator.setAdditionalFunctions(this.additionalFunctions), this._evaluator.setFunctionDefinition(this.functionDefinition), this._evaluator.triggerStatusChange = function(t) {
                    e._evaluations = {};
                    for (var n in t) {
                        var r = t[n];
                        if (e.getExpressionById(n)) {
                            var i = r.constant_value;
                            void 0 === i && r.zero_values && r.zero_values.length && (i = r.zero_values[0].val);
                            var o = r.hasOwnProperty("constant_value") && s.canDisplayAsFraction(r.constant_value),
                                a = !r.is_evaluable && o,
                                l = !!r.is_evaluable || a || Array.isArray(i);
                            e._evaluations[n] = {
                                error: r.error,
                                ans: void 0,
                                value: i,
                                showEvaluation: l,
                                isRationalizableConstant: a
                            }
                        }
                    }
                    for (var c = void 0, u = 0, p = e.getExpressionOrder(); u < p.length; u++) {
                        var n = p[u],
                            d = e._evaluations[n];
                        if (c && d) {
                            var h = c.value;
                            "number" == typeof h ? d.ans = h : Array.isArray(h) && (d.ans = "[...]")
                        }
                        c = d
                    }
                    "function" == typeof e.onEvaluationUpdate && e.onEvaluationUpdate()
                }
            }, e.prototype.reloadState = function() {
                this.setState(this.getState())
            }, e.prototype.getFunctionDefinition = function() {
                return !!this.functionDefinition
            }, e.prototype.enableFunctionDefinition = function() {
                this.functionDefinition = !0, this._evaluator.setFunctionDefinition(!0), this.reloadState()
            }, e.prototype.disableFunctionDefinition = function() {
                this.functionDefinition = !1, this._evaluator.setFunctionDefinition(!1), this.reloadState()
            }, e
        }();
        t.default = l
    }), define("basic/controller", ["require", "exports", "tslib", "flux", "underscore", "./model", "lib/state-stack", "keypad/mq-commands", "lib/i18n", "dcgview-helpers/mathquill-view", "lib/console", "bugsnag", "lib/color-helpers"], function(e, t, n, r, i, o, a, s, l, c, u, p, d) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var h = function() {
            function e(e, t) {
                var n = this;
                this.keyboardMode = "main", this.fontSize = 16, this.invertedColors = !1, this.backgroundColor = "", this.textColor = "", this.projectorMode = !1, this.capExpressionSize = !1, this.decimalToFraction = !0, this.settingsMenu = !0, this.settingsMenuOpen = !1, this.language = "en", this.brailleMode = "none", this.sixKeyInput = !1, this.brailleExpressionDownload = !0, this.stateStack = new a.default, this.dispatcher = new r.Dispatcher, this.t = function(e, t) {
                    return l.t(e, t, n.language)
                }, this.dispatch = function(e) {
                    p.leaveBreadcrumb("dispatch", e), n.dispatcher.dispatch(e);
                    for (var t; t = n._queuedCallbacks.shift();) t()
                }, this._queuedCallbacks = [], this.stateStack = new a.default, this.dispatcher = new r.Dispatcher, this.options = e, this.model = new o.default({
                    evaluationMode: this.options.evaluationMode,
                    additionalFunctions: this.options.additionalFunctions,
                    functionDefinition: this.options.functionDefinition,
                    workerPool: t.workerPool
                }), this.model = this.model, this.model.setDegreeMode(e.degreeMode), this.setBrailleMode(e.brailleMode), this.setSixKeyInput(e.sixKeyInput), this.setBrailleExpressionDownload(e.brailleExpressionDownload), this.setProjectorMode(e.projectorMode), this.setCapExpressionSize(e.capExpressionSize), this.setDecimalToFraction(e.decimalToFraction), this.invertedColors = e.invertedColors, this.backgroundColor = e.backgroundColor, this.textColor = e.textColor, this.settingsMenu = e.settingsMenu, this.model.onEvaluationUpdate = function() {
                    return n.dispatch({
                        type: "render"
                    })
                }, this.settingsProxy = t.settingsProxy, this.syncPublicSettings(), this.hookUpDispatcher(), this.containerSize = {
                    width: 0,
                    height: 0
                }
            }
            return e.prototype.runAfterDispatch = function(e) {
                this._queuedCallbacks.push(e)
            }, e.prototype.enqueueEvent = function(e) {
                var t = this;
                this.runAfterDispatch(function() {
                    t.onEventEmitted && t.onEventEmitted(e)
                })
            }, e.prototype.getFunctionDefinition = function() {
                return this.options.functionDefinition
            }, e.prototype.getSettingsMenu = function() {
                return this.settingsMenu
            }, e.prototype.getBrailleMode = function() {
                return this.brailleMode
            }, e.prototype.renderAsBraille = function() {
                return "none" !== this.brailleMode
            }, e.prototype.setBrailleMode = function(e) {
                this.brailleMode = e
            }, e.prototype.getSixKeyInput = function() {
                return this.sixKeyInput
            }, e.prototype.setSixKeyInput = function(e) {
                this.sixKeyInput = e
            }, e.prototype.getBrailleExpressionDownload = function() {
                return this.brailleExpressionDownload
            }, e.prototype.setBrailleExpressionDownload = function(e) {
                this.brailleExpressionDownload = e
            }, e.prototype.getRestrictedEditing = function() {
                return this.options.restrictedEditing
            }, e.prototype.getKeyboardMode = function() {
                return this.keyboardMode
            }, e.prototype.getFontSize = function() {
                return this.fontSize
            }, e.prototype.getInvertedColors = function() {
                return this.invertedColors
            }, e.prototype.hasBackgroundColor = function() {
                return "#ffffff" !== this.getBackgroundColor()
            }, e.prototype.getBackgroundColor = function() {
                var e = d.normalizeColor(this.backgroundColor || "#fff");
                return this.getInvertedColors() && "#ffffff" !== e ? d.invertColor(e) : e
            }, e.prototype.getTextColor = function() {
                var e = d.normalizeColor(this.textColor || "#000");
                return this.getInvertedColors() && "#000000" !== e ? d.invertColor(e) : e
            }, e.prototype.getAdditionalFunctions = function() {
                return this.options.additionalFunctions
            }, e.prototype.getTypingSlashWritesDivisionSymbol = function() {
                return this.options.typingSlashWritesDivisionSymbol
            }, e.prototype.getTypingAsteriskWritesTimesSymbol = function() {
                return this.options.typingAsteriskWritesTimesSymbol
            }, e.prototype.setProjectorMode = function(e) {
                this.projectorMode = e
            }, e.prototype.isProjectorMode = function() {
                return this.projectorMode
            }, e.prototype.setCapExpressionSize = function(e) {
                this.capExpressionSize = e
            }, e.prototype.getCapExpressionSize = function() {
                return this.capExpressionSize
            }, e.prototype.setDecimalToFraction = function(e) {
                this.decimalToFraction = e
            }, e.prototype.getDecimalToFraction = function() {
                return this.decimalToFraction
            }, e.prototype.isScientificCalc = function() {
                var e = this.options.evaluationMode;
                return "scientific" === e || "singleExpressionScientific" === e
            }, e.prototype.isFourFunctionCalc = function() {
                return "fourFunction" === this.options.evaluationMode || "singleExpressionFourFunction" === this.options.evaluationMode
            }, e.prototype.getAllowLinks = function() {
                return this.options.links
            }, e.prototype.canUndo = function() {
                return this.stateStack.canUndo()
            }, e.prototype.canRedo = function() {
                return this.stateStack.canRedo()
            }, e.prototype.undo = function(e) {
                if (this.canUndo()) {
                    this.stateStack.undo();
                    var t = this.stateStack.getState();
                    if (!e.restoreFocus) {
                        var r = {
                            focus: void 0
                        };
                        t = n.__assign({}, t, {
                            ui: r
                        })
                    }
                    this.model.setState(t), this.enqueueEvent("change")
                }
            }, e.prototype.redo = function(e) {
                if (this.canRedo()) {
                    this.stateStack.redo();
                    var t = this.stateStack.getState();
                    if (!e.restoreFocus) {
                        var r = {
                            focus: void 0
                        };
                        t = n.__assign({}, t, {
                            ui: r
                        })
                    }
                    this.model.setState(t), this.enqueueEvent("change")
                }
            }, e.prototype.clearHistory = function() {
                this.stateStack.clear()
            }, e.prototype.canBackspace = function() {
                var e = this.model.getFocusedExpression();
                return e && (e.latex.length > 0 || this.model.getNumberOfExpressions() > 1)
            }, e.prototype.focusLastExpression = function() {
                this.model.focusLastExpression()
            }, e.prototype.shouldRender = function() {
                return this.containerSize.width > 0 && this.containerSize.height > 0
            }, e.prototype.canClear = function() {
                return this.model.canClear()
            }, e.prototype.shouldShowClear = function() {
                return this.model.shouldShowClear()
            }, e.prototype.enableSettingsMenu = function() {
                this.settingsMenu = !0
            }, e.prototype.disableSettingsMenu = function() {
                this.closeSettingsMenu(), this.settingsMenu = !1
            }, e.prototype.closeSettingsMenu = function() {
                this.settingsMenuOpen = !1
            }, e.prototype.toggleSettingsMenu = function() {
                this.settingsMenuOpen = !this.settingsMenuOpen
            }, e.prototype.isSettingsMenuOpen = function() {
                return this.settingsMenuOpen
            }, e.prototype.isLastExpressionEmpty = function() {
                return this.model.isLastExpressionEmpty()
            }, e.prototype.createAtEnd = function() {
                this.model.createAtEnd()
            }, e.prototype.clearFocusedExpression = function() {
                this.model.clearFocusedExpression()
            }, e.prototype.setLatexById = function(e, t) {
                this.model.setLatexById(e, t)
            }, e.prototype.setLatexAndBrailleById = function(e, t, n) {
                this.model.setLatexAndBrailleById(e, t, n)
            }, e.prototype.setLatexOfFocusedExpression = function(e) {
                this.model.setLatexOfFocusedExpression(e)
            }, e.prototype.toggleFractionEvaluationById = function(e) {
                this.model.setFractionEvaluation(e, !this.model.getExpressionById(e).displayAsFraction)
            }, e.prototype.conditionallyCopyPrevious = function(e) {
                this.model.conditionallyCopyPrevious(e)
            }, e.prototype.createBlankAfterId = function(e) {
                this.model.createBlankAfterId(e)
            }, e.prototype.backspaceAtFrontOfId = function(e) {
                this.model.backspaceAtFrontOfId(e)
            }, e.prototype.areStatesDifferentEnoughForUndoRedo = function(e, t) {
                var r = {
                    focus: void 0
                };
                return i.isEqual(n.__assign({}, e, {
                    ui: r
                }), n.__assign({}, t, {
                    ui: r
                }))
            }, e.prototype.commitUndoRedoDebounced = function() {
                var e = this.model.getState(),
                    t = this.stateStack.getState();
                if (!this.areStatesDifferentEnoughForUndoRedo(e, t)) {
                    var n = (new Date).getTime();
                    n - this._lastDebouncedTime < 1e3 ? this.stateStack.replaceState(e) : this.stateStack.addState(e), this._lastDebouncedTime = n, this.enqueueEvent("change")
                }
            }, e.prototype.commitUndoRedoSynchronously = function() {
                var e = this.model.getState(),
                    t = this.stateStack.getState();
                this.areStatesDifferentEnoughForUndoRedo(e, t) || (this._lastDebouncedTime = 0, this.stateStack.addState(e), this.enqueueEvent("change"))
            }, e.prototype.updateKeyboardMode = function(e) {
                this.keyboardMode = e
            }, e.prototype.getFocusedMathquill = function() {
                if (this.model.getFocusedExpressionId()) return c.default.getFocusedMathquill()
            }, e.prototype.ensureMathquillIsFocusedAndReturnFocusedMathquill = function() {
                var e = this.getFocusedMathquill();
                return e || (this.isLastExpressionEmpty() && !this.model.isSingleExpression() ? this.createAtEnd() : this.focusLastExpression(), this.onEventEmitted && this.onEventEmitted("render"), this.getFocusedMathquill())
            }, e.prototype.typeIntoFocusedMathquill = function(e) {
                e = e.replace(/\r|\n/g, "");
                var t = this.ensureMathquillIsFocusedAndReturnFocusedMathquill();
                t && c.default.canAcceptText(t, this.getCapExpressionSize(), e) && (t.typedText(e), this.setLatexOfFocusedExpression(t.latex()), this.model.markShouldDebounceUndoRedo())
            }, e.prototype.pressKeyInFocusedMathquill = function(e, t) {
                if ("none" === this.getBrailleMode()) {
                    var n = this.ensureMathquillIsFocusedAndReturnFocusedMathquill();
                    if (n)
                        if ("Up" === e || "Down" === e || "Left" === e || "Right" === e) {
                            var r = c.default.applyArrowKeyAndReturnIfWasAtBounds(n, e, t);
                            r && this.moveFocusInDirection(e)
                        } else "Enter" === e ? (t && (t.preventDefault(), t.stopPropagation()), this.handleEnter()) : "Backspace" === e ? this.attemptToMoveFocusWithBackspace() || (n.keystroke(e, t), this.setLatexOfFocusedExpression(n.latex())) : (n.keystroke(e, t), this.setLatexOfFocusedExpression(n.latex()))
                }
            }, e.prototype.moveFocusInDirection = function(e) {
                var t = this.model.getFocusedExpressionId();
                t && ("Up" === e ? this.model.focusPrevById(t) : "Down" === e && this.model.focusNextById(t))
            }, e.prototype.handleEnter = function() {
                if (!this.model.isSingleExpression()) {
                    var e = this.model.getFocusedExpressionId();
                    e && (this.conditionallyCopyPrevious(e), this.createBlankAfterId(e))
                }
            }, e.prototype.attemptToMoveFocusWithBackspace = function() {
                var e = this.model.getFocusedExpression();
                if (!e) return !1;
                var t = e.latex,
                    n = e.id;
                return "" === t && (this.backspaceAtFrontOfId(n), !0)
            }, e.prototype.executeCommandInFocusedMathquill = function(e) {
                var t = this.ensureMathquillIsFocusedAndReturnFocusedMathquill();
                t && (s.execute(t, e), this.setLatexOfFocusedExpression(t.latex()))
            }, e.prototype.syncPublicSettings = function() {
                this.settingsProxy.setProperty("language", this.language), this.settingsProxy.setProperty("fontSize", this.fontSize), this.settingsProxy.setProperty("degreeMode", this.model.getDegreeMode()), this.settingsProxy.setProperty("invertedColors", this.invertedColors), this.settingsProxy.setProperty("backgroundColor", this.backgroundColor), this.settingsProxy.setProperty("textColor", this.textColor), this.settingsProxy.setProperty("brailleMode", this.brailleMode), this.settingsProxy.setProperty("sixKeyInput", this.sixKeyInput), this.settingsProxy.setProperty("brailleExpressionDownload", this.brailleExpressionDownload), this.settingsProxy.setProperty("projectorMode", this.projectorMode), this.settingsProxy.setProperty("capExpressionSize", this.capExpressionSize), this.settingsProxy.setProperty("decimalToFraction", this.decimalToFraction), this.settingsProxy.setProperty("qwertyKeyboard", this.options.qwertyKeyboard), this.settingsProxy.setProperty("links", this.options.links), this.settingsProxy.setProperty("settingsMenu", this.settingsMenu), this.settingsProxy.setProperty("functionDefinition", this.model.getFunctionDefinition())
            }, e.prototype.hookUpDispatcher = function() {
                var e = this;
                this.dispatcher.register(function(t) {
                    e.enqueueEvent("render");
                    var r = !1,
                        i = e.getRestrictedEditing();
                    switch (t.type) {
                        case "update-options":
                            e.options = n.__assign({}, e.options, t.options);
                            break;
                        case "keypad/shift":
                            e.updateKeyboardMode("capitalQwerty" === e.keyboardMode ? "qwerty" : "capitalQwerty");
                            break;
                        case "undo":
                            i || (e.undo({
                                restoreFocus: "keyboard-shortcut" === t.source
                            }), r = !0);
                            break;
                        case "redo":
                            i || (e.redo({
                                restoreFocus: "keyboard-shortcut" === t.source
                            }), r = !0);
                            break;
                        case "clear-history":
                            e.clearHistory();
                            break;
                        case "set-state-from-api":
                            t.opts.allowUndo || e.clearHistory(), e.model.setStateFromAPI(t.state);
                            break;
                        case "main":
                            e.updateKeyboardMode("main");
                            break;
                        case "ABC":
                            e.options.qwertyKeyboard ? e.updateKeyboardMode("qwerty") : e.updateKeyboardMode("letters");
                            break;
                        case "functions":
                            e.updateKeyboardMode("functions");
                            break;
                        case "degrees":
                            e.model.setDegreeMode(!e.model.getDegreeMode());
                            break;
                        case "update-degree-mode":
                            e.model.setDegreeMode(!!t.mode);
                            break;
                        case "update-font-size":
                            var o = t.size;
                            if ("number" != typeof o && (o = parseInt(o, 10)), isNaN(o)) return;
                            e.fontSize = o;
                            break;
                        case "update-inverted-colors":
                            e.invertedColors = !!t.mode;
                            break;
                        case "update-background-color":
                            e.backgroundColor = t.color;
                            break;
                        case "update-text-color":
                            e.textColor = t.color;
                            break;
                        case "update-projector-mode":
                            e.setProjectorMode(!!t.mode);
                            break;
                        case "update-cap-expression-size":
                            e.setCapExpressionSize(!!t.mode);
                            break;
                        case "update-decimal-to-fraction":
                            e.setDecimalToFraction(!!t.mode);
                            break;
                        case "update-language":
                            var a = t.language;
                            "en" !== a && -1 === Desmos.supportedLanguages.indexOf(a) ? u.warn("Translation for '" + a + "' isn't currently available. Using '" + e.language + "' instead.") : e.language = a;
                            break;
                        case "set-blank":
                            t.opts.allowUndo || e.clearHistory(), e.model.clear(), e.focusLastExpression();
                            break;
                        case "clear":
                            e.model.clearFocusedExpression();
                            break;
                        case "set-braille-mode":
                            var s = t.mode;
                            "nemeth" !== s && "ueb" !== s && "none" !== s ? u.warn("Valid Braille modes are 'nemeth', 'none', and 'ueb'. You passed '" + s + "'.") : (e.model.clearCachedBrailleValues(), e.setBrailleMode(t.mode));
                            break;
                        case "set-six-key-input":
                            e.setSixKeyInput(!!t.mode);
                            break;
                        case "set-braille-expression-download":
                            e.setBrailleExpressionDownload(!!t.mode);
                            break;
                        case "update-latex":
                            e.model.markShouldDebounceUndoRedo(), e.setLatexById(t.id, t.latex);
                            break;
                        case "update-latex-from-braille":
                            e.model.markShouldDebounceUndoRedo(), e.setLatexAndBrailleById(t.id, t.latex, t.braille);
                            break;
                        case "focusin":
                            e.model.setFocusedById(t.id, !0);
                            break;
                        case "focusout":
                            e.model.setFocusedById(t.id, !1);
                            break;
                        case "focus-first-expression":
                            e.model.focusFirstExpression();
                            break;
                        case "focus-prev-expression":
                            e.moveFocusInDirection("Up");
                            break;
                        case "focus-next-expression":
                            e.moveFocusInDirection("Down");
                            break;
                        case "focus-last-expression":
                            e.model.focusLastExpression();
                            break;
                        case "insert-blank-expression":
                            e.handleEnter();
                            break;
                        case "backspace-from-braille":
                            e.attemptToMoveFocusWithBackspace();
                            break;
                        case "keypad/type-text":
                            e.typeIntoFocusedMathquill(t.text);
                            break;
                        case "keypad/press-key":
                            e.pressKeyInFocusedMathquill(t.key, t.evt);
                            break;
                        case "keypad/custom-command":
                            e.executeCommandInFocusedMathquill(t.command);
                            break;
                        case "keypad/123":
                        case "keypad/abc":
                            break;
                        case "enable-settings-menu":
                            e.enableSettingsMenu();
                            break;
                        case "disable-settings-menu":
                            e.disableSettingsMenu();
                            break;
                        case "toggle-settings-menu":
                            e.toggleSettingsMenu();
                            break;
                        case "close-settings-menu":
                            e.closeSettingsMenu();
                            break;
                        case "render":
                            break;
                        case "ui/container-resized":
                            e.containerSize = t.size;
                            break;
                        case "toggle-fraction-evaluation":
                            e.toggleFractionEvaluationById(t.id);
                            break;
                        default:
                            return t
                    }
                    e.runAfterDispatch(function() {
                        return e.syncPublicSettings()
                    }), r || (e.model.getShouldDebounceUndoRedo() ? (e.commitUndoRedoDebounced(), e.model.clearShouldDebounceUndoRedo()) : e.commitUndoRedoSynchronously())
                })
            }, e
        }();
        t.default = h
    }), define("basic/dcgview-basic", ["require", "exports", "tslib", "dcgview"], function(e, t, n, r) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var i = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.init = function() {
                this.controller = this.props.controller(), this.model = this.controller.model, this.dispatch = this.controller.dispatch, this.t = this.controller.t
            }, t
        }(r.Class);
        t.DCGViewBasic = i
    }), define("loadcss!keypad/control-bar", function() {}), define("keypad/control-bar", ["require", "exports", "tslib", "dcgview", "./dcgview-keypad", "loadcss!./control-bar"], function(e, t, n, r, i) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var o = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.template = function() {
                var e = this;
                return r.createElement("div", {
                    class: r.const("dcg-keypad-control-bar dcg-do-not-blur"),
                    role: r.const("group"),
                    "aria-label": function() {
                        return e.controller.t("Control Bar")
                    }
                }, r.createElement("div", {
                    class: r.const("dcg-keypad-control-bar-contents")
                }, this.children))
            }, t
        }(i.default);
        t.default = o
    }), define("loadcss!keypad/control-btn", function() {}), define("keypad/control-btn", ["require", "exports", "tslib", "dcgview", "loadcss!./control-btn"], function(e, t, n, r) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var i = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.template = function() {
                var e = this;
                return r.createElement("div", {
                    class: function() {
                        return {
                            "dcg-keypad-control-btn": !0,
                            "dcg-disabled": e.isDisabled(),
                            "dcg-selected": !e.isDisabled() && e.isSelected(),
                            "dcg-selectable-btn": !e.isDisabled() && e.isSelectable(),
                            "dcg-narrow-control-btn": e.props.narrowButton && e.props.narrowButton()
                        }
                    },
                    didMount: this.bindFn(this.didMount),
                    role: r.const("button"),
                    "aria-disabled": function() {
                        return e.isDisabled() || void 0
                    },
                    "aria-label": function() {
                        return e.getAriaLabel()
                    },
                    "dcg-command": this.props.command,
                    onTap: this.bindFn(this.handleTap),
                    "aria-pressed": function() {
                        return e.hasPopup() || e.isDisabled() || !e.isSelectable() ? void 0 : e.isSelected()
                    },
                    "aria-expanded": function() {
                        return e.hasPopup() && !e.isDisabled() ? e.isSelected() : void 0
                    },
                    tabindex: this.bindFn(this.getTabIndex)
                }, this.children)
            }, t.prototype.getTabIndex = function() {
                return this.isDisabled() ? void 0 : this.props.ignoreInTabOrder && this.props.ignoreInTabOrder() ? -1 : 0
            }, t.prototype.handleTap = function(e) {
                this.isDisabled() || this.props.onTap(e)
            }, t.prototype.getAriaLabel = function() {
                return this.props.ariaLabel ? this.props.ariaLabel() : this.props.command()
            }, t.prototype.hasPopup = function() {
                return !!this.props.ariaPopup && this.props.ariaPopup()
            }, t.prototype.isDisabled = function() {
                return !!this.props.disabled && this.props.disabled()
            }, t.prototype.isSelected = function() {
                return !!this.props.selected && this.props.selected()
            }, t.prototype.isSelectable = function() {
                return !!this.props.selectable && this.props.selectable()
            }, t.prototype.didMount = function(e) {
                this.props.didMount && this.props.didMount(e)
            }, t
        }(r.Class);
        t.default = i
    }), define("vendor/fake-xml-http-request", [], function() {
        function e(e) {
            var t;
            if ("undefined" != typeof DOMParser) {
                t = (new DOMParser).parseFromString(e, "text/xml")
            } else t = new ActiveXObject("Microsoft.XMLDOM"), t.async = "false", t.loadXML(e);
            return t
        }

        function t(e, t) {
            t.addEventListener(e, function(n) {
                var r = t["on" + e];
                r && "function" == typeof r && r.call(n.target, n)
            })
        }

        function n() {
            this._eventListeners = {};
            for (var e = ["loadstart", "progress", "load", "abort", "loadend"], n = e.length - 1; n >= 0; n--) t(e[n], this)
        }

        function r() {
            n.call(this), this.readyState = r.UNSENT, this.requestHeaders = {}, this.requestBody = null, this.status = 0, this.statusText = "", this.upload = new n
        }

        function i(e) {
            if (e.readyState !== r.OPENED) throw new Error("INVALID_STATE_ERR");
            if (e.sendFlag) throw new Error("INVALID_STATE_ERR")
        }

        function o(e) {
            if (e.readyState == r.DONE) throw new Error("Request done")
        }

        function a(e) {
            if (e.async && e.readyState != r.HEADERS_RECEIVED) throw new Error("No headers received")
        }

        function s(e) {
            if ("string" != typeof e) {
                var t = new Error("Attempted to respond to fake XMLHttpRequest with " + e + ", which is not a string.");
                throw t.name = "InvalidBodyException", t
            }
        }
        var l = function(e, t, n, r) {
            this.type = e, this.bubbles = t, this.cancelable = n, this.target = r
        };
        l.prototype = {
            stopPropagation: function() {},
            preventDefault: function() {
                this.defaultPrevented = !0
            }
        };
        var c = {
                100: "Continue",
                101: "Switching Protocols",
                200: "OK",
                201: "Created",
                202: "Accepted",
                203: "Non-Authoritative Information",
                204: "No Content",
                205: "Reset Content",
                206: "Partial Content",
                300: "Multiple Choice",
                301: "Moved Permanently",
                302: "Found",
                303: "See Other",
                304: "Not Modified",
                305: "Use Proxy",
                307: "Temporary Redirect",
                400: "Bad Request",
                401: "Unauthorized",
                402: "Payment Required",
                403: "Forbidden",
                404: "Not Found",
                405: "Method Not Allowed",
                406: "Not Acceptable",
                407: "Proxy Authentication Required",
                408: "Request Timeout",
                409: "Conflict",
                410: "Gone",
                411: "Length Required",
                412: "Precondition Failed",
                413: "Request Entity Too Large",
                414: "Request-URI Too Long",
                415: "Unsupported Media Type",
                416: "Requested Range Not Satisfiable",
                417: "Expectation Failed",
                422: "Unprocessable Entity",
                500: "Internal Server Error",
                501: "Not Implemented",
                502: "Bad Gateway",
                503: "Service Unavailable",
                504: "Gateway Timeout",
                505: "HTTP Version Not Supported"
            },
            u = {
                "Accept-Charset": !0,
                "Accept-Encoding": !0,
                Connection: !0,
                "Content-Length": !0,
                Cookie: !0,
                Cookie2: !0,
                "Content-Transfer-Encoding": !0,
                Date: !0,
                Expect: !0,
                Host: !0,
                "Keep-Alive": !0,
                Referer: !0,
                TE: !0,
                Trailer: !0,
                "Transfer-Encoding": !0,
                Upgrade: !0,
                "User-Agent": !0,
                Via: !0
            };
        n.prototype = {
            addEventListener: function(e, t) {
                this._eventListeners[e] = this._eventListeners[e] || [], this._eventListeners[e].push(t)
            },
            removeEventListener: function(e, t) {
                for (var n = this._eventListeners[e] || [], r = 0, i = n.length; r < i; ++r)
                    if (n[r] == t) return n.splice(r, 1)
            },
            dispatchEvent: function(e) {
                for (var t = e.type, n = this._eventListeners[t] || [], r = 0; r < n.length; r++) "function" == typeof n[r] ? n[r].call(this, e) : n[r].handleEvent(e);
                return !!e.defaultPrevented
            },
            _progress: function(e, t, n) {
                var r = new l("progress");
                r.target = this, r.lengthComputable = e, r.loaded = t, r.total = n, this.dispatchEvent(r)
            }
        }, r.prototype = new n, r.UNSENT = 0, r.OPENED = 1, r.HEADERS_RECEIVED = 2, r.LOADING = 3, r.DONE = 4;
        var p = {
            UNSENT: 0,
            OPENED: 1,
            HEADERS_RECEIVED: 2,
            LOADING: 3,
            DONE: 4,
            async: !0,
            withCredentials: !1,
            open: function(e, t, n, i, o) {
                this.method = e, this.url = t, this.async = "boolean" != typeof n || n, this.username = i, this.password = o, this.responseText = null, this.responseXML = null, this.requestHeaders = {}, this.sendFlag = !1, this._readyStateChange(r.OPENED)
            },
            setRequestHeader: function(e, t) {
                if (i(this), u[e] || /^(Sec-|Proxy-)/.test(e)) throw new Error('Refused to set unsafe header "' + e + '"');
                this.requestHeaders[e] ? this.requestHeaders[e] += "," + t : this.requestHeaders[e] = t
            },
            send: function(e) {
                if (i(this), !/^(get|head)$/i.test(this.method)) {
                    var t = !1;
                    Object.keys(this.requestHeaders).forEach(function(e) {
                        "content-type" === e.toLowerCase() && (t = !0)
                    }), t || (e || "").toString().match("FormData") || (this.requestHeaders["Content-Type"] = "text/plain;charset=UTF-8"), this.requestBody = e
                }
                this.errorFlag = !1, this.sendFlag = this.async, this._readyStateChange(r.OPENED), "function" == typeof this.onSend && this.onSend(this), this.dispatchEvent(new l("loadstart", !1, !1, this)), r.onSend && r.onSend(this)
            },
            abort: function() {
                this.aborted = !0, this.responseText = null, this.errorFlag = !0, this.requestHeaders = {}, this.readyState > r.UNSENT && this.sendFlag && (this._readyStateChange(r.DONE), this.sendFlag = !1), this.readyState = r.UNSENT, this.dispatchEvent(new l("abort", !1, !1, this)), "function" == typeof this.onerror && this.onerror()
            },
            getResponseHeader: function(e) {
                if (this.readyState < r.HEADERS_RECEIVED) return null;
                if (/^Set-Cookie2?$/i.test(e)) return null;
                e = e.toLowerCase();
                for (var t in this.responseHeaders)
                    if (t.toLowerCase() == e) return this.responseHeaders[t];
                return null
            },
            getAllResponseHeaders: function() {
                if (this.readyState < r.HEADERS_RECEIVED) return "";
                var e = "";
                for (var t in this.responseHeaders) this.responseHeaders.hasOwnProperty(t) && !/^Set-Cookie2?$/i.test(t) && (e += t + ": " + this.responseHeaders[t] + "\r\n");
                return e
            },
            overrideMimeType: function(e) {
                "string" == typeof e && (this.forceMimeType = e.toLowerCase())
            },
            _readyStateChange: function(e) {
                this.readyState = e, "function" == typeof this.onreadystatechange && this.onreadystatechange(new l("readystatechange")), this.dispatchEvent(new l("readystatechange")), this.readyState == r.DONE && (this.dispatchEvent(new l("load", !1, !1, this)), this.dispatchEvent(new l("loadend", !1, !1, this)))
            },
            _setResponseHeaders: function(e) {
                this.responseHeaders = {};
                for (var t in e) e.hasOwnProperty(t) && (this.responseHeaders[t] = e[t]);
                this.forceMimeType && (this.responseHeaders["Content-Type"] = this.forceMimeType), this.async ? this._readyStateChange(r.HEADERS_RECEIVED) : this.readyState = r.HEADERS_RECEIVED
            },
            _setResponseBody: function(t) {
                o(this), a(this), s(t);
                var n = this.chunkSize || 10,
                    i = 0;
                this.responseText = "";
                do {
                    this.async && this._readyStateChange(r.LOADING), this.responseText += t.substring(i, i + n), i += n
                } while (i < t.length);
                var l = this.getResponseHeader("Content-Type");
                if (this.responseText && (!l || /(text\/xml)|(application\/xml)|(\+xml)/.test(l))) try {
                    this.responseXML = e(this.responseText)
                } catch (e) {}
                this.async ? this._readyStateChange(r.DONE) : this.readyState = r.DONE
            },
            respond: function(e, t, n) {
                this._setResponseHeaders(t || {}), this.status = "number" == typeof e ? e : 200, this.statusText = c[this.status], this._setResponseBody(n || "")
            }
        };
        for (var d in p) r.prototype[d] = p[d];
        return r
    }), define("main/backend", ["require", "jquery"], function(require) {
        var $ = require("jquery"),
            Backend = {
                baseURL: "",
                getGoogleLoginURL: function(e) {
                    void 0 === e && (e = {});
                    var t = e.changeToken ? "?" + e.changeToken : "";
                    return t += e.changeToken ? "&source" : "?source=" + (e.from ? e.from : ""), Backend.baseURL + "/drive_api/calculator/login" + t
                },
                exchangeGoogleAuthCode: function(e) {
                    var t = $.Deferred();
                    return e ? this.getJSON("/account/google_auth?code=" + e).always(function(e) {
                        e && e.success ? t.resolve() : t.reject()
                    }) : setTimeout(function() {
                        t.reject("no auth code")
                    }, 1), t.promise()
                },
                handleDeprecatedRoute: function(msg) {
                    if (msg && msg.routeDeprecated) {
                        msg.js && eval(msg.js);
                        var deferred = $.Deferred();
                        return deferred.reject(msg), deferred.promise()
                    }
                    return msg
                },
                post: function(e, t) {
                    return $.ajax({
                        type: "POST",
                        url: Backend.baseURL + e,
                        data: t,
                        xhrFields: {
                            withCredentials: !0
                        }
                    }).then(Backend.handleDeprecatedRoute)
                },
                getJSON: function(e) {
                    return $.ajax({
                        dataType: "json",
                        url: Backend.baseURL + e,
                        xhrFields: {
                            withCredentials: !0
                        }
                    }).then(Backend.handleDeprecatedRoute)
                }
            };
        return Backend
    }), define("lib/app-bridge", ["require", "jquery", "underscore_model", "browser", "lib/conditional_blur", "vendor/fake-xml-http-request", "pjs", "console", "main/backend"], function(e) {
        function t() {
            window.XMLHttpRequest = s, s.onSend = function(e) {
                var t = m + "";
                m += 1, f[t] = e, l.methods.proxyXHR(JSON.stringify({
                    id: t,
                    url: e.url,
                    method: e.method,
                    headers: e.requestHeaders,
                    body: e.requestBody
                }))
            }
        }

        function n(e) {
            var t = r(e.target).closest("a[href]")[0];
            if (t && "file:" === t.protocol) {
                var n = t.getAttribute("href");
                "/" !== n[0] && (n = "/" + n), t.setAttribute("href", h.baseURL + n)
            }
        }
        var r = e("jquery"),
            i = e("underscore_model").UnderscoreModel,
            o = e("browser"),
            a = e("lib/conditional_blur").default,
            s = e("vendor/fake-xml-http-request"),
            l = null,
            c = null,
            u = e("pjs"),
            p = e("console"),
            d = !1,
            h = e("main/backend"),
            f = {},
            m = 0;
        if (o.IS_IOS) {
            var g = [],
                y = [],
                v = function(e) {
                    var t = y.length ? y.pop() : g.length;
                    return g[t] = e, t
                },
                b = function(e) {
                    var t = g[e];
                    return g[e] = null, y.push(e), t
                };
            l = {
                loaded: !1,
                methods: {},
                queuedMethodCalls: []
            }, r(function() {
                var e = [];
                window.ObjC_callback = function(r) {
                    l.loaded = !0, r.split(" ").forEach(function(t) {
                        l.methods[t] = function(r, i) {
                            var o = i ? v(i) : -1;
                            e.push("desmos:" + t + "/" + o + "/" + encodeURIComponent(r)), 1 === e.length && n.attr("src", e[0])
                        }
                    }), this.ObjC_callback = function(t, r) {
                        try {
                            -1 !== t && b(t)(r)
                        } finally {
                            e.shift(), e.length > 0 && n.attr("src", e[0])
                        }
                    }, l.methods.proxyXHR && t(), l.queuedMethodCalls.forEach(function(e) {
                        _[e.methodName].apply(_, e.args)
                    })
                };
                var n = r('<iframe id="objc-bridge" style="position:absolute; left: -1000px; z-index: -1" src="desmos:loaded"/>').appendTo(document.body)
            })
        } else o.IS_ANDROID ? c = window.Android : d = !0;
        var x = u(i, function(e, t) {
                e.init = function() {
                    t.init.call(this), this.heartbeatTimeout = null, this.observeEvent("started resumed", function(e) {
                        this.gaEvent(e + ":" + this.versionNumber), this.incrementHeartbeat(0)
                    }.bind(this))
                }, e.isSingleAppModeEnabled = function() {
                    return !!window.dcg_singleappmode_enabled
                }, e.isSingleAppModeActive = function() {
                    return !!window.dcg_singleappmode_active
                }, e.openExitSingleAppModeModal = function() {
                    this.show_end_singleappmode_modal = !0
                }, e.closeEndSingleAppModeModal = function() {
                    this.show_end_singleappmode_modal = !1
                }, e.isEndSingleAppModeModalOpen = function() {
                    return !!this.show_end_singleappmode_modal
                }, e.openStartSingleAppModeModal = function() {
                    this.show_start_singleappmode_modal = !0
                }, e.closeStartSingleAppModeModal = function() {
                    this.show_start_singleappmode_modal = !1
                }, e.isStartSingleAppModeModalOpen = function() {
                    return !!this.show_start_singleappmode_modal
                }, e.heartbeat = function(e) {
                    clearTimeout(this.heartbeatTimeout), this.gaEvent("heartbeat-" + 10 * e), this.incrementHeartbeat(e)
                }, e.incrementHeartbeat = function(e) {
                    clearTimeout(this.heartbeatTimeout), this.heartbeatTimeout = setTimeout(function() {
                        this.heartbeat(e + 1)
                    }.bind(this), 6e5)
                }, e._started = function(e, t) {
                    this.appId = e, this.versionNumber = t, this.triggerEvent("started")
                }, e._resumed = function() {
                    this.triggerEvent("resumed")
                }, e.ensureKeypadClosedAndReturnIfWasOpened = function() {
                    var e = window.Calc && window.Calc.controller;
                    return e && e.isKeypadOpen() ? (a(), "true") : "false"
                }, e.onGoogleAuthResult = function(e) {
                    this.triggerEvent("onGoogleAuthResult", e)
                }, e.onObjCXHRProxyResult = function(e) {
                    var t = e.id,
                        n = f[t];
                    delete f[t], n.respond(e.status, e.headers, e.body)
                }
            }),
            w = ["hideLoadingScreen", "gaEvent", "openGoogleLogin", "logout", "saveCookies", "deleteCookies", "startSingleAppMode", "endSingleAppMode", "setWWWSubdomain"],
            _ = new x;
        return w.forEach(function(e) {
            _[e] = function() {
                d || (c ? c[e] ? c[e].apply(c, arguments) : p.log("call to missing Android method", e, arguments) : l && (l.loaded ? l.methods[e] ? l.methods[e].apply(l, arguments) : p.log("call to missing ObjC method", e, arguments) : l.queuedMethodCalls.push({
                    methodName: e,
                    args: arguments
                })))
            }
        }), d || (window.AppBridge = _, document.addEventListener("click", n, !0)), _
    }), define("loadcss!dcgview-helpers/download-button", function() {}), define("dcgview-helpers/download-button", ["require", "exports", "tslib", "dcgview", "browser", "loadcss!./download-button"], function(e, t, n, r, i) {
        "use strict";

        function o() {
            if (!i.IS_SAFARI) return !1;
            var e = navigator.userAgent.match(/Version\/(\d+)/);
            return !(!e || !e[1]) && parseFloat(e[1]) < 11
        }

        function a() {
            return !i.IS_IE && !o() && void 0 !== document.createElement("a").download
        }

        function s() {
            return a() || void 0 !== navigator.msSaveBlob
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.canDownload = s;
        var l = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.init = function() {
                this.supportsDirectDownload = a()
            }, t.prototype.template = function() {
                var e = this;
                return r.createElement("a", {
                    role: r.const("button"),
                    tabindex: function() {
                        return e.props.enabled() ? 0 : -1
                    },
                    "aria-disabled": function() {
                        return !e.props.enabled()
                    },
                    class: function() {
                        return {
                            "dcg-download-button": !0,
                            "dcg-disabled": !e.props.enabled(),
                            "dcg-braille-equations": e.props.isBraille
                        }
                    },
                    didMount: this.bindFn(this.didMountDownload),
                    didUnmount: this.bindFn(this.didUnmountDownload),
                    didUpdate: this.bindFn(this.didUpdate),
                    download: function() {
                        return e.supportsDirectDownload ? e.props.filename() : void 0
                    },
                    onTap: function(t) {
                        if (!e.supportsDirectDownload && navigator.msSaveOrOpenBlob) {
                            var n = e.props.data();
                            n && (navigator.msSaveOrOpenBlob(n, e.props.filename()), t.preventDefault())
                        }
                    }
                }, r.createElement("i", {
                    class: r.const("dcg-icon-download")
                }), r.createElement("span", null, function() {
                    return e.props.text()
                }))
            }, t.prototype.didMountDownload = function(e) {
                this.downloadLink = e, this.didUpdate()
            }, t.prototype.didUnmountDownload = function() {
                this.revokeBlobURL()
            }, t.prototype.didUpdate = function() {
                this.updateDownloadURL(), this.cachedObjectURL && (this.downloadLink.href = this.cachedObjectURL)
            }, t.prototype.updateDownloadURL = function() {
                if (this.revokeBlobURL(), this.supportsDirectDownload) {
                    var e = this.props.data();
                    e && (this.cachedObjectURL = URL.createObjectURL(e))
                }
            }, t.prototype.revokeBlobURL = function() {
                this.cachedObjectURL && URL.revokeObjectURL(this.cachedObjectURL)
            }, t
        }(r.Class);
        t.default = l
    }), define("lib/export-braille-equations", ["require", "exports", "abraham", "graphing-calc/models/expression", "expressions/regression_view", "lib/number-to-latex"], function(e, t, n, r, i, o) {
        "use strict";

        function a(e, t, r) {
            if (void 0 === r && (r = !1), r && (e = e.replace(/ /g, "\\ ")), "none" === t) return e;
            var i = "nemeth" === t ? n.latexToNemeth(e) : n.latexToUeb(e);
            return i.isError ? "" : n.UnicodeBraille.toBrailleAscii(i.value)
        }

        function s(e, t) {
            if ("none" === t) return "";
            var n = [];
            n.push(a("Expression List", t, !0)), n.push(""), n.push("");
            for (var s = "", l = e.getItemCount(), p = 0; p < l; p++) {
                var d = e.getItemModelByIndex(p);
                if (d && !d.secret) {
                    "" !== s && s !== d.folderId && (n.push(c(a("End Folder", t, !0))), s = "");
                    var h = "";
                    switch (d.type) {
                        case "expression":
                            if (!d.hidden) {
                                var f = u(d.displayIndex, t);
                                h = d.latex;
                                var m = [],
                                    g = d.formula;
                                if (g && !r.isEmpty(d))
                                    if (e.shouldShowEvaluationForItem(d.id)) {
                                        var y = g.zero_values && g.zero_values.length ? g.zero_values[0].val : g.constant_value;
                                        Array.isArray(y) ? h += "\\ " + y.length + "\\ element\\ list" : h += "=" + y
                                    } else if (r.shouldShowCDFFooter(d)) m.push(a("Min=" + r.getCDFMin(d), t, !1)), m.push(a("Max=" + r.getCDFMax(d), t, !1)), r.isCDFMaxValid(d) && r.isCDFMinValid(d) && m.push(a("CDF=" + r.getCDFEvaluation(d), t, !1));
                                else if (r.isTTest(d)) {
                                    var v = r.getTTestResults(d);
                                    v && (m.push(a("<" + o.numberToStatsConfidenceLatex(v.lessThan, 5), t, !1)), m.push(a(">" + o.numberToStatsConfidenceLatex(v.greaterThan, 5), t, !1)), m.push(a("\\ne" + o.numberToStatsConfidenceLatex(v.notEqual, 5), t, !1)))
                                } else if (g.is_regression && g.regression) {
                                    var b = g.regression,
                                        x = b.statistics,
                                        w = b.parameters;
                                    x.hasOwnProperty("Rsquared") && m.push(a("R^2=" + i.getRoundedStat(b, "Rsquared"), t, !1)), x.hasOwnProperty("rsquared") && m.push(a("r^2=" + i.getRoundedStat(b, "rsquared"), t, !1)), x.hasOwnProperty("r") && m.push(a("r=" + i.getRoundedStat(b, "r"), t, !1)), x.hasOwnProperty("RMSE") && m.push(a("\\operatorname{RMSE}=" + i.getRoundedStat(b, "RMSE"), t, !1));
                                    for (var _ in w) m.push(a(_ + "=" + i.getRoundedParam(b, _), t, !1))
                                }
                                n.push(f + "  " + a(h, t, !1)), n.push.apply(n, m)
                            }
                            break;
                        case "text":
                            n.push(a(d.text, t, !0));
                            break;
                        case "folder":
                            d.collapsed ? h = "Collapsed Folder " + d.title : (h = "Start Folder " + d.title, s = d.id), n.push(c(a(h, t, !0)));
                            break;
                        case "image":
                            n.push(a("Image", t, !1));
                            break;
                        case "table":
                            n.push(c(a("Start Table", t, !0)));
                            for (var S = 0, E = d.rowModels; S < E.length; S++) {
                                for (var M = E[S], I = [], T = 0, C = M.cells; T < C.length; T++) {
                                    var k = C[T],
                                        D = "";
                                    if ("header" === k.type) D = k.latex || "";
                                    else if ("cell" === k.type) {
                                        var P = k.column.index,
                                            L = k.row.index - 1,
                                            A = k.column.disabled;
                                        D = A ? k.column.computedValues[L] || "" : d.columns[P].values[L] || ""
                                    }
                                    I.push(a(D, t))
                                }
                                var O = I.join("\t");
                                /^\t/.test(O) || n.push(O)
                            }
                            n.push(c(a("End Table", t, !0)));
                            break;
                        default:
                            return d
                    }
                }
            }
            return "" !== s && n.push(c(a("End Folder", t, !0))), n.join("\n")
        }

        function l(e, t) {
            if ("none" === t) return "";
            var n = [];
            n.push(a("Expression List", t, !0)), n.push(""), n.push("");
            for (var r = 0, i = e.getExpressionOrder(); r < i.length; r++) {
                var o = i[r],
                    s = u(e.getExpressionIndex(o) + 1, t),
                    l = e.getExpressionLatex(o),
                    c = e.getExpressionValue(o);
                void 0 !== c && (l += "=" + c), n.push(s + "  " + a(l, t, !1))
            }
            return n.join("\n")
        }

        function c(e) {
            var t = "--------------------";
            return t + "\n" + e + "\n" + t
        }

        function u(e, t) {
            var n = "" + e;
            return "nemeth" === t ? a(n, t, !1) + "_4" : "ueb" === t ? a(n + ".", t, !1) : ""
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.getBrailleEquationsGraphing = s, t.getBrailleEquationsBasic = l
    }), define("loadcss!basic/settings-menu", function() {}), define("basic/settings-menu", ["require", "exports", "lib/app-bridge", "tslib", "keys", "dcgview", "./dcgview-basic", "jquery", "dcgview-helpers/download-button", "lib/export-braille-equations", "loadcss!./settings-menu"], function(e, t, n, r, i, o, a, s, l, c) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var u = o.Components.If,
            p = function(e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return r.__extends(t, e), t.prototype.template = function() {
                    var e = this;
                    return o.createElement("div", {
                        class: function() {
                            return {
                                "dcg-settings-dropdown": !0,
                                "dcg-popover": !0,
                                "dcg-has-background-color": e.controller.hasBackgroundColor()
                            }
                        },
                        role: o.const("complementary"),
                        "aria-label": o.const("Settings Menu"),
                        didMount: this.bindFn(this.didMountSettingsDropdown),
                        didUnmount: this.bindFn(this.didUnmountSettingsDropdown)
                    }, o.createElement("div", {
                        class: o.const("dcg-popover-interior"),
                        style: function() {
                            return {
                                background: e.controller.getBackgroundColor()
                            }
                        }
                    }, o.createElement("div", {
                        class: function() {
                            return {
                                "dcg-settings-menu-option": !0,
                                "dcg-modern-btn": !0,
                                "dcg-action-projectormode": !0,
                                "dcg-active": e.controller.isProjectorMode()
                            }
                        },
                        role: o.const("button"),
                        onTap: this.bindFn(this.onToggleProjectorMode),
                        tabindex: o.const(0),
                        "aria-label": function() {
                            return e.controller.t("Projector Mode")
                        },
                        "aria-pressed": function() {
                            return e.controller.isProjectorMode()
                        }
                    }, function() {
                        return e.controller.t("Projector Mode")
                    }), o.createElement("div", {
                        class: function() {
                            return {
                                "dcg-settings-menu-option": !0,
                                "dcg-braille-container": !0
                            }
                        }
                    }, o.createElement("div", {
                        class: o.const("dcg-group-title")
                    }, o.const("Braille Mode")), o.createElement("div", {
                        role: o.const("group"),
                        "aria-label": function() {
                            return e.controller.t("Braille Mode")
                        },
                        class: o.const("dcg-braille-options-buttons")
                    }, o.createElement("span", {
                        class: function() {
                            return {
                                "dcg-braille-option": !0,
                                "dcg-selected": e.isLatex()
                            }
                        },
                        role: o.const("button"),
                        onTap: function() {
                            return e.setBrailleMode("none")
                        },
                        tabindex: o.const(0),
                        "aria-label": function() {
                            return e.controller.t("Off")
                        },
                        "aria-pressed": function() {
                            return e.isLatex()
                        }
                    }, function() {
                        return e.controller.t("Off")
                    }), o.createElement("span", {
                        class: function() {
                            return {
                                "dcg-braille-option": !0,
                                "dcg-selected": e.isNemeth()
                            }
                        },
                        role: o.const("button"),
                        onTap: function() {
                            return e.setBrailleMode("nemeth")
                        },
                        tabindex: o.const(0),
                        "aria-label": function() {
                            return e.controller.t("Nemeth")
                        },
                        "aria-pressed": function() {
                            return e.isNemeth()
                        }
                    }, function() {
                        return e.controller.t("Nemeth")
                    }), o.createElement("span", {
                        class: function() {
                            return {
                                "dcg-braille-option": !0,
                                "dcg-selected": e.isUEB()
                            }
                        },
                        role: o.const("button"),
                        onTap: function() {
                            return e.setBrailleMode("ueb")
                        },
                        tabindex: o.const(0),
                        "aria-label": function() {
                            return e.controller.t("UEB")
                        },
                        "aria-pressed": function() {
                            return e.isUEB()
                        }
                    }, function() {
                        return e.controller.t("UEB")
                    })), o.createElement(u, {
                        predicate: function() {
                            return e.controller.renderAsBraille()
                        }
                    }, function() {
                        return o.createElement("div", null, o.createElement("div", {
                            role: o.const("checkbox"),
                            tabindex: o.const(0),
                            onTap: function() {
                                return e.onToggleSixKeyInput()
                            },
                            "aria-checked": function() {
                                return e.controller.getSixKeyInput()
                            },
                            "aria-label": function() {
                                return e.controller.t("Six Key Braille Input")
                            },
                            class: function() {
                                return {
                                    "dcg-settings-menu-option": !0,
                                    "dcg-do-not-blur": !0,
                                    "dcg-six-key-checkbox": !0,
                                    "dcg-checked": e.controller.getSixKeyInput(),
                                    "dcg-checkbox-container": !0
                                }
                            },
                            handleEvent: o.const(!0)
                        }, o.createElement("span", {
                            class: o.const("dcg-checkbox-box")
                        }, o.createElement("i", {
                            class: o.const("dcg-icon-check")
                        })), o.createElement("span", {
                            class: o.const("dcg-checkbox-label")
                        }, function() {
                            return e.controller.t("Six Key Braille Input")
                        })), o.createElement("a", {
                            href: o.const("https://www.desmos.com/accessibility#braille"),
                            class: o.const("dcg-six-key-info"),
                            target: o.const("_blank")
                        }, o.createElement("i", {
                            class: o.const("dcg-icon-question-sign")
                        })), o.createElement(u, {
                            predicate: function() {
                                return l.canDownload() && e.controller.getBrailleExpressionDownload()
                            }
                        }, function() {
                            return o.createElement(l.default, {
                                data: function() {
                                    var t = c.getBrailleEquationsBasic(e.model, e.controller.getBrailleMode());
                                    return new Blob([t], {
                                        type: "text/plain"
                                    })
                                },
                                enabled: e.const(!0),
                                filename: e.const("desmos-equations.brl"),
                                text: e.const("Download Braille Equations"),
                                isBraille: e.const(!0)
                            })
                        }))
                    })), o.createElement("div", {
                        role: o.const("checkbox"),
                        tabindex: o.const(0),
                        onTap: this.bindFn(this.onToggleInvertedColors),
                        "aria-checked": function() {
                            return e.controller.getInvertedColors()
                        },
                        "aria-label": function() {
                            return e.controller.t("Reverse Contrast")
                        },
                        class: function() {
                            return {
                                "dcg-settings-menu-option": !0,
                                "dcg-do-not-blur": !0,
                                "dcg-checked": e.controller.getInvertedColors(),
                                "dcg-checkbox-container": !0,
                                "dcg-reverse-contrast": !0
                            }
                        },
                        handleEvent: o.const(!0)
                    }, o.createElement("span", {
                        class: o.const("dcg-checkbox-box")
                    }, o.createElement("i", {
                        class: o.const("dcg-icon-check")
                    })), o.createElement("span", {
                        class: o.const("dcg-checkbox-label")
                    }, function() {
                        return e.controller.t("Reverse Contrast")
                    })), o.createElement(u, {
                        predicate: function() {
                            return n.versionNumber
                        }
                    }, function() {
                        return o.createElement("div", {
                            class: o.const("dcg-version-number")
                        }, o.const("Version: "), function() {
                            return n.versionNumber
                        })
                    })))
                }, t.prototype.didUnmountSettingsDropdown = function() {
                    s(document).off(".dcg-settings-view")
                }, t.prototype.didMountSettingsDropdown = function(e) {
                    var t = this;
                    this.settingsGroupNode = e, s(document).on("dcg-tapstart.dcg-settings-view", function(e) {
                        0 === s(e.target).closest(".dcg-basic-settings-container").length && t.controller.dispatch({
                            type: "close-settings-menu"
                        })
                    }), s(document).on("keydown.dcg-settings-view", function(e) {
                        if ("Esc" === i.lookup(e) && (t.controller.dispatch({
                                type: "close-settings-menu"
                            }), t.controller.dispatch({
                                type: "focus-last-expression"
                            })), "Tab" === i.lookup(e) && !e.altKey && !e.metaKey && !e.ctrlKey) {
                            var n = document.activeElement,
                                r = s(t.props.settingsButtonNode()),
                                o = s(t.settingsGroupNode).find(".dcg-settings-menu-option:last");
                            e.shiftKey || n !== o[0] ? e.shiftKey && n === r[0] && (o.focus(), e.preventDefault(), e.stopPropagation()) : (r.focus(), e.preventDefault(), e.stopPropagation())
                        }
                    })
                }, t.prototype.setBrailleMode = function(e) {
                    this.controller.dispatch({
                        type: "set-braille-mode",
                        mode: e
                    })
                }, t.prototype.isNemeth = function() {
                    return "nemeth" === this.controller.getBrailleMode()
                }, t.prototype.isUEB = function() {
                    return "ueb" === this.controller.getBrailleMode()
                }, t.prototype.isLatex = function() {
                    return "none" === this.controller.getBrailleMode()
                }, t.prototype.onToggleSixKeyInput = function() {
                    var e = !this.controller.getSixKeyInput();
                    this.controller.dispatch({
                        type: "set-six-key-input",
                        mode: e
                    })
                }, t.prototype.onToggleInvertedColors = function() {
                    var e = !this.controller.getInvertedColors();
                    this.controller.dispatch({
                        type: "update-inverted-colors",
                        mode: e
                    })
                }, t.prototype.onToggleProjectorMode = function() {
                    this.controller.dispatch({
                        type: "update-projector-mode",
                        mode: !this.controller.isProjectorMode()
                    })
                }, t
            }(a.DCGViewBasic);
        t.SettingsMenu = p
    }), define("loadcss!basic/keypad/settings-control-button", function() {}), define("basic/keypad/settings-control-button", ["require", "exports", "tslib", "dcgview", "keypad/control-btn", "basic/dcgview-basic", "basic/settings-menu", "loadcss!./settings-control-button"], function(e, t, n, r, i, o, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var s = r.Components.If,
            l = function(e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return n.__extends(t, e), t.prototype.template = function() {
                    var e = this,
                        t = this.props.controller();
                    return r.createElement("div", {
                        class: r.const("dcg-basic-settings-container")
                    }, r.createElement(i.default, {
                        didMount: function(t) {
                            return e.settingsButtonNode = t
                        },
                        command: this.const("settings"),
                        ariaLabel: function() {
                            return t.t("settings")
                        },
                        onTap: this.bindFn(this.onToggleSettingsMenu),
                        selected: function() {
                            return e.controller.isSettingsMenuOpen()
                        },
                        ariaPopup: this.const(!0)
                    }, r.createElement("i", {
                        class: r.const("dcg-icon-wrench")
                    })), r.createElement(s, {
                        predicate: function() {
                            return e.controller.isSettingsMenuOpen()
                        }
                    }, function() {
                        return r.createElement(a.SettingsMenu, {
                            controller: e.props.controller,
                            settingsButtonNode: function() {
                                return e.settingsButtonNode
                            }
                        })
                    }))
                }, t.prototype.onToggleSettingsMenu = function() {
                    this.controller.dispatch({
                        type: "toggle-settings-menu"
                    })
                }, t
            }(o.DCGViewBasic);
        t.default = l
    }), define("basic/keypad/fourfunction-control-bar", ["require", "exports", "tslib", "dcgview", "keypad/control-bar", "keypad/control-btn", "./settings-control-button", "basic/dcgview-basic"], function(e, t, n, r, i, o, a, s) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var l = r.Components,
            c = l.If,
            u = l.IfElse,
            p = function(e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return n.__extends(t, e), t.prototype.template = function() {
                    var e = this,
                        t = this.props.controller();
                    return r.createElement(i.default, {
                        controller: this.props.controller
                    }, r.createElement(o.default, {
                        command: this.const("undo"),
                        disabled: function() {
                            return !t.canUndo()
                        },
                        ariaLabel: function() {
                            return t.t("undo")
                        },
                        onTap: function(e) {
                            return t.dispatch({
                                type: "undo",
                                source: "keyboard" === e.device ? "button-keyboard" : "button-tap"
                            })
                        }
                    }, r.createElement("i", {
                        class: r.const("dcg-icon-undo")
                    })), r.createElement(o.default, {
                        command: this.const("redo"),
                        disabled: function() {
                            return !t.canRedo()
                        },
                        ariaLabel: function() {
                            return t.t("redo")
                        },
                        onTap: function(e) {
                            return t.dispatch({
                                type: "redo",
                                source: "keyboard" === e.device ? "button-keyboard" : "button-tap"
                            })
                        }
                    }, r.createElement("i", {
                        class: r.const("dcg-icon-redo")
                    })), u(function() {
                        return t.shouldShowClear()
                    }, {
                        true: function() {
                            return r.createElement(o.default, {
                                command: e.const("clear"),
                                ariaLabel: function() {
                                    return t.t("clear")
                                },
                                onTap: function() {
                                    return t.dispatch({
                                        type: "clear"
                                    })
                                }
                            }, function() {
                                return t.t("clear")
                            })
                        },
                        false: function() {
                            return r.createElement(o.default, {
                                command: e.const("clearall"),
                                disabled: function() {
                                    return !t.canClear()
                                },
                                ariaLabel: function() {
                                    return t.t("clear all")
                                },
                                onTap: function() {
                                    return t.dispatch({
                                        type: "set-blank",
                                        opts: {
                                            allowUndo: !0
                                        }
                                    })
                                }
                            }, function() {
                                return t.t("clear all")
                            })
                        }
                    }), r.createElement(c, {
                        predicate: function() {
                            return "none" === t.getBrailleMode()
                        }
                    }, function() {
                        return r.createElement(o.default, {
                            command: e.const("backspace"),
                            ariaLabel: function() {
                                return t.t("backspace")
                            },
                            disabled: function() {
                                return !t.canBackspace()
                            },
                            onTap: function() {
                                return t.dispatch({
                                    type: "keypad/press-key",
                                    key: "Backspace"
                                })
                            }
                        }, r.createElement("i", {
                            class: r.const("dcg-icon-delete")
                        }))
                    }), r.createElement(c, {
                        predicate: function() {
                            return e.props.controller().getSettingsMenu()
                        }
                    }, function() {
                        return r.createElement(a.default, {
                            controller: e.props.controller
                        })
                    }))
                }, t.prototype.onToggleSettingsMenu = function() {
                    this.controller.dispatch({
                        type: "toggle-settings-menu"
                    })
                }, t
            }(s.DCGViewBasic);
        t.default = p
    }), define("basic/keypad/single-expression-fourfunction-control-bar", ["require", "exports", "tslib", "dcgview", "keypad/control-bar", "keypad/control-btn", "basic/dcgview-basic"], function(e, t, n, r, i, o, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var s = r.Components.If,
            l = function(e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return n.__extends(t, e), t.prototype.template = function() {
                    var e = this,
                        t = this.props.controller();
                    return r.createElement(i.default, {
                        controller: this.props.controller
                    }, r.createElement(o.default, {
                        command: this.const("undo"),
                        disabled: function() {
                            return !t.canUndo()
                        },
                        ariaLabel: function() {
                            return t.t("undo")
                        },
                        onTap: function(e) {
                            return t.dispatch({
                                type: "undo",
                                source: "keyboard" === e.device ? "button-keyboard" : "button-tap"
                            })
                        }
                    }, r.createElement("i", {
                        class: r.const("dcg-icon-undo")
                    })), r.createElement(o.default, {
                        command: this.const("redo"),
                        disabled: function() {
                            return !t.canRedo()
                        },
                        ariaLabel: function() {
                            return t.t("redo")
                        },
                        onTap: function(e) {
                            return t.dispatch({
                                type: "redo",
                                source: "keyboard" === e.device ? "button-keyboard" : "button-tap"
                            })
                        }
                    }, r.createElement("i", {
                        class: r.const("dcg-icon-redo")
                    })), r.createElement(o.default, {
                        command: this.const("clear"),
                        ariaLabel: function() {
                            return t.t("clear")
                        },
                        onTap: function() {
                            return t.dispatch({
                                type: "clear"
                            })
                        }
                    }, function() {
                        return t.t("clear")
                    }), r.createElement(s, {
                        predicate: function() {
                            return "none" === t.getBrailleMode()
                        }
                    }, function() {
                        return r.createElement(o.default, {
                            command: e.const("backspace"),
                            ariaLabel: function() {
                                return t.t("backspace")
                            },
                            disabled: function() {
                                return !t.canBackspace()
                            },
                            onTap: function() {
                                return t.dispatch({
                                    type: "keypad/press-key",
                                    key: "Backspace"
                                })
                            }
                        }, r.createElement("i", {
                            class: r.const("dcg-icon-delete")
                        }))
                    }))
                }, t
            }(a.DCGViewBasic);
        t.default = l
    }), define("loadcss!keypad/control-toggle", function() {}), define("keypad/control-toggle", ["require", "exports", "tslib", "lib/aria", "lib/color-helpers", "dcgview", "./dcgview-keypad", "loadcss!./control-toggle"], function(e, t, n, r, i, o, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var s = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.template = function() {
                var e = this;
                return o.createElement("div", {
                    class: function() {
                        return {
                            "dcg-keypad-control-toggle": !0,
                            "dcg-toggled": e.props.toggled()
                        }
                    },
                    role: o.const("button"),
                    tabindex: o.const("0"),
                    "aria-label": this.bindFn(this.getAriaLabel),
                    onTap: this.bindFn(this.handleTap)
                }, o.createElement("div", {
                    class: o.const("dcg-ctrl-toggle-option")
                }, this.props.defaultOption), o.createElement("div", {
                    class: o.const("dcg-ctrl-toggle-option")
                }, this.props.toggledOption), o.createElement("div", {
                    class: o.const("dcg-ctrl-toggle-cover"),
                    style: function() {
                        return {
                            background: i.shadeColor(e.controller.getBackgroundColor(), -.1)
                        }
                    }
                }))
            }, t.prototype.getAriaLabel = function() {
                var e = {
                    toggled: this.props.toggledAriaLabel(),
                    default: this.props.defaultAriaLabel()
                };
                return this.props.toggled() ? this.controller.t("__toggled__ selected. Press Enter to switch to __default__.", e) : this.controller.t("__default__ selected. Press Enter to switch to __toggled__.", e)
            }, t.prototype.handleTap = function() {
                this.props.toggled() ? r.alert(this.props.defaultAriaLabel()) : r.alert(this.props.toggledAriaLabel()), this.props.onTap(this.props.command())
            }, t
        }(a.default);
        t.default = s
    }), define("basic/keypad/scientific-control-bar", ["require", "exports", "tslib", "dcgview", "keypad/control-bar", "keypad/control-btn", "basic/dcgview-basic", "keypad/control-toggle", "./settings-control-button"], function(e, t, n, r, i, o, a, s, l) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var c = r.Components,
            u = c.If,
            p = c.IfElse,
            d = function(e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return n.__extends(t, e), t.prototype.template = function() {
                    var e = this,
                        t = this.props.controller();
                    return r.createElement(i.default, {
                        controller: this.props.controller
                    }, r.createElement(o.default, {
                        command: this.const("main"),
                        selected: function() {
                            return "main" === t.getKeyboardMode()
                        },
                        disabled: function() {
                            return e.controller.renderAsBraille()
                        },
                        ignoreInTabOrder: this.const(!0),
                        selectable: this.const(!0),
                        onTap: function() {
                            return t.dispatch({
                                type: "main"
                            })
                        }
                    }, function() {
                        return t.t("main")
                    }), r.createElement(o.default, {
                        command: this.const("ABC"),
                        selected: function() {
                            return -1 !== ["qwerty", "capitalQwerty", "letters"].indexOf(t.getKeyboardMode())
                        },
                        disabled: function() {
                            return e.controller.renderAsBraille()
                        },
                        ignoreInTabOrder: this.const(!0),
                        selectable: this.const(!0),
                        ariaLabel: function() {
                            return t.t("A B C")
                        },
                        onTap: function() {
                            return t.dispatch({
                                type: "ABC"
                            })
                        }
                    }, function() {
                        return t.t("abc")
                    }), r.createElement(o.default, {
                        command: this.const("functions"),
                        selected: function() {
                            return -1 !== ["functions", "restrictedFunctions"].indexOf(t.getKeyboardMode())
                        },
                        ariaLabel: function() {
                            return t.t("Functions")
                        },
                        disabled: function() {
                            return e.controller.renderAsBraille()
                        },
                        ignoreInTabOrder: this.const(!0),
                        selectable: this.const(!0),
                        onTap: function() {
                            return t.dispatch({
                                type: "functions"
                            })
                        }
                    }, function() {
                        return t.t("func")
                    }), r.createElement(s.default, {
                        command: this.const("degrees"),
                        toggled: function() {
                            return e.model.getDegreeMode()
                        },
                        defaultOption: function() {
                            return t.t("rad")
                        },
                        toggledOption: function() {
                            return t.t("deg")
                        },
                        defaultAriaLabel: function() {
                            return t.t("Radians")
                        },
                        toggledAriaLabel: function() {
                            return t.t("Degrees")
                        },
                        onTap: function() {
                            return t.dispatch({
                                type: "degrees"
                            })
                        },
                        controller: this.props.controller
                    }), r.createElement(u, {
                        predicate: function() {
                            return !e.controller.getRestrictedEditing()
                        }
                    }, function() {
                        return r.createElement(o.default, {
                            command: e.const("undo"),
                            disabled: function() {
                                return !t.canUndo()
                            },
                            ariaLabel: function() {
                                return t.t("Undo")
                            },
                            onTap: function(e) {
                                return t.dispatch({
                                    type: "undo",
                                    source: "keyboard" === e.device ? "button-keyboard" : "button-tap"
                                })
                            }
                        }, r.createElement("i", {
                            class: r.const("dcg-icon-undo")
                        }))
                    }), r.createElement(u, {
                        predicate: function() {
                            return !e.controller.getRestrictedEditing()
                        }
                    }, function() {
                        return r.createElement(o.default, {
                            command: e.const("redo"),
                            disabled: function() {
                                return !t.canRedo()
                            },
                            ariaLabel: function() {
                                return t.t("Redo")
                            },
                            onTap: function(e) {
                                return t.dispatch({
                                    type: "redo",
                                    source: "keyboard" === e.device ? "button-keyboard" : "button-tap"
                                })
                            }
                        }, r.createElement("i", {
                            class: r.const("dcg-icon-redo")
                        }))
                    }), p(function() {
                        return t.shouldShowClear()
                    }, {
                        true: function() {
                            return r.createElement(o.default, {
                                command: e.const("clear"),
                                ariaLabel: function() {
                                    return t.t("clear")
                                },
                                onTap: function() {
                                    return t.dispatch({
                                        type: "clear"
                                    })
                                }
                            }, function() {
                                return t.t("clear")
                            })
                        },
                        false: function() {
                            return r.createElement(o.default, {
                                command: e.const("clearall"),
                                disabled: function() {
                                    return !t.canClear()
                                },
                                ariaLabel: function() {
                                    return t.t("clear all")
                                },
                                onTap: function() {
                                    return t.dispatch({
                                        type: "set-blank",
                                        opts: {
                                            allowUndo: !0
                                        }
                                    })
                                }
                            }, function() {
                                return t.t("clear all")
                            })
                        }
                    }), r.createElement(u, {
                        predicate: function() {
                            return e.props.controller().getSettingsMenu()
                        }
                    }, function() {
                        return r.createElement(l.default, {
                            controller: e.props.controller
                        })
                    }))
                }, t
            }(a.DCGViewBasic);
        t.default = d
    }), define("basic/keypad/single-expression-scientific-control-bar", ["require", "exports", "tslib", "dcgview", "keypad/control-bar", "keypad/control-btn", "basic/dcgview-basic", "keypad/control-toggle"], function(e, t, n, r, i, o, a, s) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var l = r.Components.If,
            c = function(e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return n.__extends(t, e), t.prototype.template = function() {
                    var e = this,
                        t = this.props.controller();
                    return r.createElement(i.default, {
                        controller: this.props.controller
                    }, r.createElement(s.default, {
                        command: this.const("degrees"),
                        toggled: function() {
                            return e.model.getDegreeMode()
                        },
                        defaultOption: function() {
                            return t.t("rad")
                        },
                        toggledOption: function() {
                            return t.t("deg")
                        },
                        defaultAriaLabel: function() {
                            return t.t("Radians")
                        },
                        toggledAriaLabel: function() {
                            return t.t("Degrees")
                        },
                        onTap: function() {
                            return t.dispatch({
                                type: "degrees"
                            })
                        },
                        controller: this.props.controller
                    }), r.createElement("div", {
                        class: r.const("dcg-spacer")
                    }), r.createElement(l, {
                        predicate: function() {
                            return !e.controller.getRestrictedEditing()
                        }
                    }, function() {
                        return r.createElement(o.default, {
                            command: e.const("undo"),
                            disabled: function() {
                                return !t.canUndo()
                            },
                            ariaLabel: function() {
                                return t.t("Undo")
                            },
                            onTap: function(e) {
                                return t.dispatch({
                                    type: "undo",
                                    source: "keyboard" === e.device ? "button-keyboard" : "button-tap"
                                })
                            }
                        }, r.createElement("i", {
                            class: r.const("dcg-icon-undo")
                        }))
                    }), r.createElement(l, {
                        predicate: function() {
                            return !e.controller.getRestrictedEditing()
                        }
                    }, function() {
                        return r.createElement(o.default, {
                            command: e.const("redo"),
                            disabled: function() {
                                return !t.canRedo()
                            },
                            ariaLabel: function() {
                                return t.t("Redo")
                            },
                            onTap: function(e) {
                                return t.dispatch({
                                    type: "redo",
                                    source: "keyboard" === e.device ? "button-keyboard" : "button-tap"
                                })
                            }
                        }, r.createElement("i", {
                            class: r.const("dcg-icon-redo")
                        }))
                    }), r.createElement("div", {
                        class: r.const("dcg-spacer")
                    }), r.createElement(o.default, {
                        narrowButton: this.const(!0),
                        command: this.const("clear"),
                        ariaLabel: function() {
                            return t.t("clear")
                        },
                        onTap: function() {
                            return t.dispatch({
                                type: "clear"
                            })
                        }
                    }, function() {
                        return t.t("clear")
                    }), r.createElement(o.default, {
                        narrowButton: this.const(!0),
                        command: this.const("backspace"),
                        ariaLabel: function() {
                            return t.t("backspace")
                        },
                        onTap: function() {
                            return t.dispatch({
                                type: "keypad/press-key",
                                key: "Backspace"
                            })
                        }
                    }, r.createElement("i", {
                        class: r.const("dcg-icon-delete")
                    })))
                }, t
            }(a.DCGViewBasic);
        t.default = c
    }), define("basic/keypad/fourfunction-keypad", ["require", "exports", "tslib", "dcgview", "basic/dcgview-basic", "keypad/keys", "keypad/keypad", "keypad/row"], function(e, t, n, r, i, o, a, s) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var l = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.template = function() {
                var e = this;
                return r.createElement("div", {
                    role: r.const("group"),
                    "aria-label": function() {
                        return e.t("keypad")
                    }
                }, r.createElement(a.default, {
                    controller: this.props.controller
                }, r.createElement(s.default, null, o.view(this, "(", {
                    colspan: this.parenColspan()
                }), o.view(this, ")", {
                    colspan: this.parenColspan()
                }), this.makeAdditionalFunctionKey(0), this.makeAdditionalFunctionKey(1), o.view(this, "/")), r.createElement(s.default, null, o.view(this, "7", {
                    style: "highlight"
                }), o.view(this, "8", {
                    style: "highlight"
                }), o.view(this, "9", {
                    style: "highlight"
                }), o.view(this, "*")), r.createElement(s.default, null, o.view(this, "4", {
                    style: "highlight"
                }), o.view(this, "5", {
                    style: "highlight"
                }), o.view(this, "6", {
                    style: "highlight"
                }), o.view(this, "-")), r.createElement(s.default, null, o.view(this, "1", {
                    style: "highlight"
                }), o.view(this, "2", {
                    style: "highlight"
                }), o.view(this, "3", {
                    style: "highlight"
                }), o.view(this, "+")), r.createElement(s.default, null, o.view(this, "0", {
                    style: "highlight"
                }), o.view(this, ".", {
                    style: "highlight"
                }), o.view(this, "ans"), o.view(this, "enter", {
                    style: "blue"
                }))))
            }, t.prototype.parenColspan = function() {
                return this.controller.getAdditionalFunctions().length > 1 ? .5 : 1
            }, t.prototype.makeAdditionalFunctionKey = function(e) {
                var t = this.controller.getAdditionalFunctions()[e];
                return "exponent" === t ? o.view(this, "a^b") : "percent" === t ? o.view(this, "%") : "sqrt" === t ? o.view(this, "sqrt") : void 0
            }, t
        }(i.DCGViewBasic);
        t.default = l
    }), define("basic/keypad/single-expression-fourfunction-keypad", ["require", "exports", "tslib", "dcgview", "basic/dcgview-basic", "keypad/keys", "keypad/keypad", "keypad/row"], function(e, t, n, r, i, o, a, s) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var l = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.template = function() {
                var e = this;
                return r.createElement("div", {
                    role: r.const("group"),
                    "aria-label": function() {
                        return e.t("keypad")
                    }
                }, r.createElement(a.default, {
                    controller: this.props.controller
                }, r.createElement(s.default, null, o.view(this, "(", {
                    colspan: this.parenColspan()
                }), o.view(this, ")", {
                    colspan: this.parenColspan()
                }), this.makeAdditionalFunctionKey(1)), r.createElement(s.default, null, o.view(this, "7", {
                    style: "highlight"
                }), o.view(this, "8", {
                    style: "highlight"
                }), o.view(this, "9", {
                    style: "highlight"
                }), o.view(this, "/")), r.createElement(s.default, null, o.view(this, "4", {
                    style: "highlight"
                }), o.view(this, "5", {
                    style: "highlight"
                }), o.view(this, "6", {
                    style: "highlight"
                }), o.view(this, "*")), r.createElement(s.default, null, o.view(this, "1", {
                    style: "highlight"
                }), o.view(this, "2", {
                    style: "highlight"
                }), o.view(this, "3", {
                    style: "highlight"
                }), o.view(this, "-")), r.createElement(s.default, null, o.view(this, "0", {
                    style: "highlight"
                }), o.view(this, ".", {
                    style: "highlight",
                    colspan: this.dotColspan()
                }), this.makeAdditionalFunctionKey(0), o.view(this, "+"))))
            }, t.prototype.parenColspan = function() {
                return 2 === this.controller.getAdditionalFunctions().length ? 1.5 : 2
            }, t.prototype.dotColspan = function() {
                return this.controller.getAdditionalFunctions().length ? 1 : 2
            }, t.prototype.makeAdditionalFunctionKey = function(e) {
                var t = this.controller.getAdditionalFunctions()[e];
                return "exponent" === t ? o.view(this, "a^b") : "percent" === t ? o.view(this, "%") : "sqrt" === t ? o.view(this, "sqrt") : void 0
            }, t
        }(i.DCGViewBasic);
        t.default = l
    }), define("basic/keypad/single-expression-scientific-keypad", ["require", "exports", "tslib", "dcgview", "basic/dcgview-basic", "keypad/keys", "keypad/keypad", "keypad/row"], function(e, t, n, r, i, o, a, s) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var l = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.template = function() {
                return r.createElement(a.default, {
                    controller: this.props.controller
                }, r.createElement(s.default, null, o.view(this, "("), o.view(this, ")"), o.view(this, "x^2"), o.view(this, "sqrt"), r.createElement("div", {
                    class: r.const("dcg-partition-placeholder")
                }), o.view(this, "x^3"), o.view(this, "x^y"), o.view(this, "ythroot")), r.createElement(s.default, null, o.view(this, "7", {
                    style: "highlight"
                }), o.view(this, "8", {
                    style: "highlight"
                }), o.view(this, "9", {
                    style: "highlight"
                }), o.view(this, "/"), r.createElement("div", {
                    class: r.const("dcg-partition-placeholder")
                }), o.view(this, "pi"), o.view(this, "e^x"), o.view(this, "!")), r.createElement(s.default, null, o.view(this, "4", {
                    style: "highlight"
                }), o.view(this, "5", {
                    style: "highlight"
                }), o.view(this, "6", {
                    style: "highlight"
                }), o.view(this, "*"), r.createElement("div", {
                    class: r.const("dcg-partition-placeholder")
                }), o.view(this, "log"), o.view(this, "ln"), o.view(this, "|x|")), r.createElement(s.default, null, o.view(this, "1", {
                    style: "highlight"
                }), o.view(this, "2", {
                    style: "highlight"
                }), o.view(this, "3", {
                    style: "highlight"
                }), o.view(this, "-"), r.createElement("div", {
                    class: r.const("dcg-partition-placeholder")
                }), o.view(this, "sin"), o.view(this, "cos"), o.view(this, "tan")), r.createElement(s.default, null, o.view(this, "0", {
                    style: "highlight"
                }), o.view(this, ".", {
                    style: "highlight"
                }), o.view(this, "x/y"), o.view(this, "+"), r.createElement("div", {
                    class: r.const("dcg-partition-placeholder")
                }), o.view(this, "arcsin"), o.view(this, "arccos"), o.view(this, "arctan")))
            }, t
        }(i.DCGViewBasic);
        t.default = l
    }), define("basic/keypad/sci-keypad", ["require", "exports", "tslib", "dcgview", "basic/dcgview-basic", "keypad/keys", "keypad/keypad", "keypad/row"], function(e, t, n, r, i, o, a, s) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var l = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.template = function() {
                return r.createElement(a.default, {
                    controller: this.props.controller
                }, r.createElement(s.default, null, o.view(this, "a^2"), o.view(this, "a^b"), o.view(this, "|a|"), r.createElement("div", {
                    class: r.const("dcg-partition-placeholder")
                }), o.view(this, "7", {
                    style: "highlight"
                }), o.view(this, "8", {
                    style: "highlight"
                }), o.view(this, "9", {
                    style: "highlight"
                }), o.view(this, "/"), o.view(this, "backspace", {
                    style: "highlight"
                })), r.createElement(s.default, null, o.view(this, "sqrt"), o.view(this, "nthroot"), o.view(this, "pi"), r.createElement("div", {
                    class: r.const("dcg-partition-placeholder")
                }), o.view(this, "4", {
                    style: "highlight"
                }), o.view(this, "5", {
                    style: "highlight"
                }), o.view(this, "6", {
                    style: "highlight"
                }), o.view(this, "*"), o.view(this, "%")), r.createElement(s.default, null, o.view(this, "sin"), o.view(this, "cos"), o.view(this, "tan"), r.createElement("div", {
                    class: r.const("dcg-partition-placeholder")
                }), o.view(this, "1", {
                    style: "highlight"
                }), o.view(this, "2", {
                    style: "highlight"
                }), o.view(this, "3", {
                    style: "highlight"
                }), o.view(this, "-"), o.view(this, "a/b")), r.createElement(s.default, null, o.view(this, "("), o.view(this, ")"), o.view(this, ","), r.createElement("div", {
                    class: r.const("dcg-partition-placeholder")
                }), o.view(this, "0", {
                    style: "highlight"
                }), o.view(this, ".", {
                    style: "highlight"
                }), o.view(this, "ans"), o.view(this, "+"), o.view(this, "enter", {
                    style: "blue"
                })))
            }, t
        }(i.DCGViewBasic);
        t.default = l
    }), define("basic/keypad/sci-qwerty-keypad", ["require", "exports", "tslib", "dcgview", "basic/dcgview-basic", "keypad/keys", "keypad/keypad", "keypad/row"], function(e, t, n, r, i, o, a, s) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var l = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.template = function() {
                return r.createElement(a.default, {
                    controller: this.props.controller
                }, r.createElement(s.default, null, o.view(this, "q"), o.view(this, "w"), o.view(this, "e"), o.view(this, "r"), o.view(this, "t"), o.view(this, "y"), o.view(this, "u"), o.view(this, "i"), o.view(this, "o"), o.view(this, "p")), r.createElement(s.default, null, r.createElement("div", {
                    class: r.const("dcg-half-width-placeholder")
                }), o.view(this, "a"), o.view(this, "s"), o.view(this, "d"), o.view(this, "f"), o.view(this, "g"), o.view(this, "h"), o.view(this, "j"), o.view(this, "k"), o.view(this, "l"), r.createElement("div", {
                    class: r.const("dcg-half-width-placeholder")
                })), r.createElement(s.default, null, o.view(this, "shift", {
                    style: "highlight"
                }), o.view(this, "z"), o.view(this, "x"), o.view(this, "c"), o.view(this, "v"), o.view(this, "b"), o.view(this, "n"), o.view(this, "m"), o.view(this, ","), o.view(this, "backspace", {
                    style: "highlight"
                })), r.createElement(s.default, null, o.view(this, "="), o.view(this, "("), o.view(this, ")"), o.view(this, "["), o.view(this, "]"), o.view(this, "!"), o.view(this, "'"), o.view(this, "pi"), o.view(this, "enter", {
                    style: "blue"
                })))
            }, t
        }(i.DCGViewBasic);
        t.default = l
    }), define("basic/keypad/sci-letters-keypad", ["require", "exports", "tslib", "dcgview", "basic/dcgview-basic", "keypad/keys", "keypad/keypad", "keypad/row"], function(e, t, n, r, i, o, a, s) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var l = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.template = function() {
                return r.createElement(a.default, {
                    controller: this.props.controller
                }, r.createElement(s.default, null, o.view(this, "a"), o.view(this, "b"), o.view(this, "c"), o.view(this, "d"), o.view(this, "e"), o.view(this, "f"), o.view(this, "g"), o.view(this, "h"), o.view(this, "backspace", {
                    style: "highlight"
                })), r.createElement(s.default, null, o.view(this, "i"), o.view(this, "j"), o.view(this, "k"), o.view(this, "l"), o.view(this, "m"), o.view(this, "n"), o.view(this, "o"), o.view(this, "p"), o.view(this, "q")), r.createElement(s.default, null, o.view(this, "r"), o.view(this, "s"), o.view(this, "t"), o.view(this, "u"), o.view(this, "v"), o.view(this, "w"), o.view(this, "x"), o.view(this, "y"), o.view(this, "z")), r.createElement(s.default, null, o.view(this, "=", {
                    style: "highlight"
                }), o.view(this, "("), o.view(this, ")"), o.view(this, "["), o.view(this, "]"), o.view(this, "!"), o.view(this, "'"), o.view(this, ","), o.view(this, "enter", {
                    style: "blue"
                })))
            }, t
        }(i.DCGViewBasic);
        t.default = l
    }), define("basic/keypad/sci-capital-qwerty-keypad", ["require", "exports", "tslib", "dcgview", "basic/dcgview-basic", "keypad/keys", "keypad/keypad", "keypad/row"], function(e, t, n, r, i, o, a, s) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var l = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.template = function() {
                return r.createElement(a.default, {
                    controller: this.props.controller
                }, r.createElement(s.default, null, o.view(this, "Q"), o.view(this, "W"), o.view(this, "E"), o.view(this, "R"), o.view(this, "T"), o.view(this, "Y"), o.view(this, "U"), o.view(this, "I"), o.view(this, "O"), o.view(this, "P")), r.createElement(s.default, null, r.createElement("div", {
                    class: r.const("dcg-half-width-placeholder")
                }), o.view(this, "A"), o.view(this, "S"), o.view(this, "D"), o.view(this, "F"), o.view(this, "G"), o.view(this, "H"), o.view(this, "J"), o.view(this, "K"), o.view(this, "L"), r.createElement("div", {
                    class: r.const("dcg-half-width-placeholder")
                })), r.createElement(s.default, null, o.view(this, "shift", {
                    style: "highlight"
                }), o.view(this, "Z"), o.view(this, "X"), o.view(this, "C"), o.view(this, "V"), o.view(this, "B"), o.view(this, "N"), o.view(this, "M"), o.view(this, ","), o.view(this, "backspace", {
                    style: "highlight"
                })), r.createElement(s.default, null, o.view(this, "="), o.view(this, "("), o.view(this, ")"), o.view(this, "["), o.view(this, "]"), o.view(this, "!"), o.view(this, "'"), o.view(this, "pi"), o.view(this, "enter", {
                    style: "blue"
                })))
            }, t
        }(i.DCGViewBasic);
        t.default = l
    }), define("basic/keypad/sci-functions-keypad", ["require", "exports", "tslib", "dcgview", "basic/dcgview-basic", "keypad/keys", "keypad/keypad", "keypad/row"], function(e, t, n, r, i, o, a, s) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var l = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.template = function() {
                return r.createElement(a.default, {
                    controller: this.props.controller
                }, r.createElement(s.default, null, o.view(this, "sin"), o.view(this, "cos"), o.view(this, "tan"), r.createElement("div", {
                    class: r.const("dcg-partition-placeholder")
                }), o.view(this, "ln"), o.view(this, "log"), o.view(this, "backspace", {
                    style: "highlight"
                })), r.createElement(s.default, null, o.view(this, "arcsin"), o.view(this, "arccos"), o.view(this, "arctan"), r.createElement("div", {
                    class: r.const("dcg-partition-placeholder")
                }), o.view(this, "e^x"), o.view(this, "abs"), o.view(this, "round")), r.createElement(s.default, null, o.view(this, "mean"), o.view(this, "stdev"), o.view(this, "stdevp"), r.createElement("div", {
                    class: r.const("dcg-partition-placeholder")
                }), o.view(this, "a^b"), o.view(this, "sqrt"), o.view(this, "nthroot")), r.createElement(s.default, null, o.view(this, "nPr"), o.view(this, "nCr"), o.view(this, "!"), r.createElement("div", {
                    class: r.const("dcg-partition-placeholder")
                }), o.view(this, "e"), o.view(this, "pi"), o.view(this, "enter", {
                    style: "blue"
                })))
            }, t
        }(i.DCGViewBasic);
        t.default = l
    }), define("basic/keypad/scientific-keypad", ["require", "exports", "tslib", "dcgview", "basic/dcgview-basic", "./sci-keypad", "./sci-qwerty-keypad", "./sci-letters-keypad", "./sci-capital-qwerty-keypad", "./sci-functions-keypad"], function(e, t, n, r, i, o, a, s, l, c) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var u = r.Components.SwitchUnion,
            p = function(e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return n.__extends(t, e), t.prototype.template = function() {
                    var e = this;
                    return r.createElement("div", {
                        role: r.const("group"),
                        "aria-label": function() {
                            return e.t("keypad")
                        }
                    }, u(function() {
                        return e.controller.getKeyboardMode()
                    }, {
                        qwerty: function() {
                            return r.createElement(a.default, {
                                controller: e.props.controller
                            })
                        },
                        letters: function() {
                            return r.createElement(s.default, {
                                controller: e.props.controller
                            })
                        },
                        capitalQwerty: function() {
                            return r.createElement(l.default, {
                                controller: e.props.controller
                            })
                        },
                        functions: function() {
                            return r.createElement(c.default, {
                                controller: e.props.controller
                            })
                        },
                        main: function() {
                            return r.createElement(o.default, {
                                controller: e.props.controller
                            })
                        }
                    }))
                }, t
            }(i.DCGViewBasic);
        t.default = p
    }), define("loadcss!basic/keypad/braille-example-row", function() {}), define("basic/keypad/braille-example-row", ["require", "exports", "tslib", "dcgview", "dcgview-helpers/static-mathquill-view", "abraham", "loadcss!./braille-example-row"], function(e, t, n, r, i, o) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var a = r.Components.For,
            s = function(e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return n.__extends(t, e), t.prototype.template = function() {
                    var e = this;
                    return r.createElement("tr", null, r.createElement(a, {
                        each: function() {
                            return e.getBrailleAscii(e.props.latex())
                        },
                        key: function(e) {
                            return e.key
                        }
                    }, r.createElement("td", null, function(e) {
                        return r.createElement("span", {
                            class: r.const("dcg-key-press")
                        }, function() {
                            return e.char
                        })
                    })), r.createElement("td", {
                        class: r.const("dcg-braille-font")
                    }, function() {
                        return e.getBrailleUnicode(e.props.latex())
                    }), r.createElement("td", null, r.createElement(i.default, {
                        latex: function() {
                            return e.props.latex()
                        }
                    })))
                }, t.prototype.getBrailleAscii = function(e) {
                    for (var t = o.UnicodeBraille.toExpandedBrailleAscii(this.getBrailleUnicode(e)), n = [], r = 0; r < t.length; r++) n.push({
                        char: t[r],
                        key: r + ")" + t[r]
                    });
                    return n
                }, t.prototype.getBrailleUnicode = function(e) {
                    var t;
                    return "nemeth" === this.props.brailleMode() ? t = o.latexToNemeth(e) : "ueb" === this.props.brailleMode() && (t = o.latexToUeb(e)), t && t.value ? t.value : ""
                }, t
            }(r.Class);
        t.BrailleExampleRow = s
    }), define("loadcss!basic/keypad/braille-keypad", function() {}), define("basic/keypad/braille-keypad", ["require", "exports", "tslib", "dcgview", "basic/dcgview-basic", "./braille-example-row", "loadcss!./braille-keypad"], function(e, t, n, r, i, o) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var a = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.template = function() {
                var e = this;
                return r.createElement("div", {
                    class: function() {
                        return {
                            "dcg-braille-io-keypad-container": !0,
                            "dcg-has-background-color": e.controller.hasBackgroundColor()
                        }
                    }
                }, r.createElement("div", {
                    class: r.const("dcg-braille-io-keypad")
                }, r.createElement("div", {
                    class: r.const("dcg-braille-description")
                }, r.createElement("div", {
                    class: r.const("dcg-braille-title")
                }, function() {
                    return e.controller.t("__mode__ is on!", {
                        mode: e.brailleType()
                    })
                }), r.createElement("div", {
                    class: r.const("dcg-braille-info-text")
                }, function() {
                    return e.controller.t("Use a Refreshable Braille display, or just type Braille with a keyboard.")
                }), r.createElement("div", {
                    class: r.const("dcg-blue-btn"),
                    role: r.const("button"),
                    tabindex: r.const(0),
                    onTap: function() {
                        return e.controller.dispatch({
                            type: "set-braille-mode",
                            mode: "none"
                        })
                    }
                }, function() {
                    return e.controller.t("Turn __mode__ off", {
                        mode: e.brailleType()
                    })
                })), r.createElement("div", {
                    class: r.const("dcg-braille-examples-table-container")
                }, r.createElement("table", {
                    class: r.const("dcg-braille-examples-table")
                }, r.createElement("tr", null, r.createElement("th", null, function() {
                    return e.controller.t("Type this")
                }), r.createElement("th", null, function() {
                    return e.brailleType()
                }), r.createElement("th", null, function() {
                    return e.controller.t("Typeset")
                })), r.createElement(o.BrailleExampleRow, {
                    brailleMode: function() {
                        return e.controller.getBrailleMode()
                    },
                    latex: this.const("2+2")
                }), r.createElement(o.BrailleExampleRow, {
                    brailleMode: function() {
                        return e.controller.getBrailleMode()
                    },
                    latex: this.const("\\frac{1}{2}")
                }), r.createElement(o.BrailleExampleRow, {
                    brailleMode: function() {
                        return e.controller.getBrailleMode()
                    },
                    latex: this.const("\\sqrt{4}")
                })), r.createElement("div", {
                    class: r.const("dcg-more-examples-link")
                }, r.createElement("a", {
                    href: function() {
                        return "https://www.desmos.com/braille-examples?" + e.controller.getBrailleMode()
                    },
                    target: r.const("_blank")
                }, function() {
                    return e.controller.t("View more examples")
                })))))
            }, t.prototype.brailleType = function() {
                return "nemeth" === this.controller.getBrailleMode() ? "Nemeth" : "ueb" === this.controller.getBrailleMode() ? "UEB" : ""
            }, t
        }(i.DCGViewBasic);
        t.default = a
    }), define("expressions/braille-input", ["require", "exports", "tslib", "dcgview", "jquery"], function(e, t, n, r, i) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var o = r.Components.Input,
            a = function(e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return n.__extends(t, e), t.prototype.init = function() {
                    this.ASCIICharacters = " A1B'K2L@CIF/MSP\"E3H9O6R^DJG>NTQ,*5<-U8V.%[$+X!&;:4\\0Z7(_?W]#Y)=", this.ASCIITable = [], this.HomeRowCharacters = "FDSJKL", this.charCodes = [], this.sixKeyModel = {
                        keysDown: 0,
                        stickyKeysDown: 0
                    };
                    var e;
                    for (e = 0; e < this.ASCIICharacters.length; e++) this.ASCIITable.push(this.ASCIICharacters.charCodeAt(e));
                    for (e = 0; e < this.HomeRowCharacters.length; e++) this.charCodes.push(this.HomeRowCharacters.charCodeAt(e))
                }, t.prototype.template = function() {
                    var e = this;
                    return r.createElement(o, {
                        class: this.const("dcg-braille-input"),
                        onKeydown: this.bindFn(this.onKeydown),
                        onKeyup: this.bindFn(this.onKeyup),
                        onInput: this.bindFn(this.props.onInput),
                        value: function() {
                            return e.props.value()
                        },
                        "aria-label": function() {
                            return e.props.ariaLabel() || ""
                        },
                        didMount: this.bindFn(this.didMount),
                        didUnmount: this.bindFn(this.props.didUnmount)
                    })
                }, t.prototype.didMount = function(e) {
                    var t = this;
                    this.rootNode = e, i(this.rootNode).on("focus", function() {
                        t.props.onFocusedChanged(!0)
                    }).on("blur", function() {
                        t.props.onFocusedChanged(!1)
                    }), this.props.didMount(e)
                }, t.prototype.didUpdate = function() {
                    this.rootNode && (this.props.shouldFocus() && document.activeElement !== this.rootNode && this.rootNode.focus(), this.props.shouldFocus() || document.activeElement !== this.rootNode || this.rootNode.blur())
                }, t.prototype.onKeydown = function(e) {
                    var t = this.charCodes.indexOf(e.which);
                    return !this.isSixKeyInput() || e.altKey || e.ctrlKey || e.metaKey || e.shiftKey || -1 === t ? this.props.onKeydown(e) : (e.preventDefault(), this.sixKeyModel = n.__assign({}, this.sixKeyModel, {
                        keysDown: this.addKey(this.sixKeyModel.keysDown, t),
                        stickyKeysDown: this.addKey(this.sixKeyModel.stickyKeysDown, t)
                    }), !1)
                }, t.prototype.onKeyup = function(e) {
                    var t = this.charCodes.indexOf(e.which),
                        r = !1;
                    return !this.isSixKeyInput() || e.altKey || e.ctrlKey || e.metaKey || e.shiftKey || -1 === t ? r = !0 : (this.sixKeyModel = n.__assign({}, this.sixKeyModel, {
                        keysDown: this.removeKey(this.sixKeyModel.keysDown, t)
                    }), 0 === this.sixKeyModel.keysDown && (this.addCharacter(this.bitsToASCII(this.sixKeyModel.stickyKeysDown)), this.sixKeyModel = n.__assign({}, this.sixKeyModel, {
                        stickyKeysDown: 0
                    }))), r || e.preventDefault(), r
                }, t.prototype.addKey = function(e, t) {
                    return e | 1 << t
                }, t.prototype.removeKey = function(e, t) {
                    return e & ~(1 << t)
                }, t.prototype.bitsToASCII = function(e) {
                    return String.fromCharCode(this.ASCIITable[e])
                }, t.prototype.addCharacter = function(e) {
                    this.rootNode && (this.rootNode.setRangeText(e, this.rootNode.selectionStart, this.rootNode.selectionEnd, "end"), this.props.onInput(this.rootNode.value))
                }, t.prototype.isSixKeyInput = function() {
                    return "function" == typeof this.props.sixKeyInput && this.props.sixKeyInput()
                }, t
            }(r.Class);
        t.default = a
    }), define("loadcss!Abraham", function() {}), define("loadcss!basic/expression-view", function() {}), define("basic/expression-view", ["require", "exports", "tslib", "keys", "graphing/label", "dcgview", "lib/i18n", "jquery", "dcgview-helpers/static-mathquill-view", "dcgview-helpers/mathquill-view", "./dcgview-basic", "abraham", "expressions/braille-input", "../lib/tooltip", "loadcss!Abraham", "loadcss!./expression-view"], function(e, t, n, r, i, o, a, s, l, c, u, p, d, h) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var f = o.Components,
            m = f.If,
            g = f.Input,
            y = f.Textarea,
            v = function(e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return n.__extends(t, e), t.prototype.getAriaLabel = function() {
                        var e = this.getIndex() + 1 + "";
                        return this.t("Expression __index__", {
                            index: e
                        })
                    }, t.prototype.didUpdate = function() {
                        this.renderAnsValue()
                    }, t.prototype.didMountMQ = function(e) {
                        this.$mq = s(e)
                    }, t.prototype.getExp = function() {
                        return this.model.getExpressionById(this.props.id())
                    }, t.prototype.getAns = function() {
                        return this.model.getExpressionAns(this.props.id())
                    }, t.prototype.getLatex = function() {
                        return this.getExp().latex
                    }, t.prototype.getValue = function() {
                        return this.model.getExpressionValue(this.props.id())
                    }, t.prototype.getBraille = function() {
                        var e = this.getExp().braille;
                        if ("" !== e) return e;
                        var t = this.getBrailleValue(this.getLatex());
                        return t.isError ? "" : p.UnicodeBraille.toExpandedBrailleAscii(t.value)
                    }, t.prototype.getBrailleValue = function(e) {
                        return "nemeth" === this.controller.getBrailleMode() ? p.latexToNemeth(e) : p.latexToUeb(e)
                    }, t.prototype.getLatexValue = function(e) {
                        return "nemeth" === this.controller.getBrailleMode() ? p.nemethToLatex(e) : p.uebToLatex(e)
                    }, t.prototype.getIndex = function() {
                        return this.model.getExpressionIndex(this.props.id())
                    }, t.prototype.getShowEvaluation = function() {
                        return this.model.shouldShowEvaluationForExpression(this.props.id())
                    }, t.prototype.isFractionEvaluation = function() {
                        return this.getExp().displayAsFraction
                    }, t.prototype.canDisplayEvaluationAsFraction = function() {
                        return this.controller.getDecimalToFraction() && this.model.canDisplayEvaluationAsFraction(this.props.id())
                    }, t.prototype.shouldDisplayEvaluationAsFraction = function() {
                        return this.canDisplayEvaluationAsFraction() && this.getExp().displayAsFraction
                    }, t.prototype.toggleFractionEvaluation = function() {
                        this.dispatch({
                            type: "toggle-fraction-evaluation",
                            id: this.props.id()
                        })
                    }, t.prototype.getFractionDisplayAriaLabel = function() {
                        return this.shouldDisplayEvaluationAsFraction() ? this.controller.t("Displaying as fraction. Press Enter to display as Decimal") : this.controller.t("Displaying as decimal. Press Enter to display as Fraction")
                    }, t.prototype.getError = function() {
                        var e = this.model.getExpressionError(this.props.id());
                        return e && this.getLatex().length > 0 ? this.t(a.unpack(e)) : ""
                    }, t.prototype.showError = function() {
                        return !!this.getError()
                    }, t.prototype.getFractionMessage = function() {
                        return this.shouldDisplayEvaluationAsFraction() ? this.t("Convert to decimal.") : this.t("Convert to fraction.")
                    }, t.prototype.getIsFocused = function() {
                        return !this.controller.isSettingsMenuOpen() && this.model.isExpressionFocused(this.props.id())
                    }, t.prototype.onFocusedChanged = function(e) {
                        this.getExp() && (e ? this.dispatch({
                            type: "focusin",
                            id: this.props.id()
                        }) : this.dispatch({
                            type: "focusout",
                            id: this.props.id()
                        }))
                    }, t.prototype.onMQReflow = function() {
                        this.renderedAnsData = void 0, this.renderAnsValue()
                    }, t.prototype.renderAnsValue = function() {
                        if (this.$mq) {
                            var e = this.getAns();
                            this.renderedAnsData && this.renderedAnsData.value == e || (this.renderedAnsData = {
                                value: e
                            }, this.$mq.find(".dcg-mq-ans").each(function(t, n) {
                                var r, o = s(n);
                                "number" == typeof e ? r = i.truncatedHTMLLabel(e, {
                                    digits: 6,
                                    addEllipses: !0,
                                    bigCutoff: 1e4
                                }) : "string" == typeof e && (r = e), r ? o.removeClass("dcg-invalid").html(r) : o.addClass("dcg-invalid").html('<i class="dcg-icon-error"></i>')
                            }))
                        }
                    }, t.prototype.getEvaluationLatex = function() {
                        var e = this.getValue();
                        if (void 0 === e && (e = NaN), this.model.isRationalizableConstant(this.props.id()) && !this.shouldDisplayEvaluationAsFraction()) return "";
                        return Array.isArray(e) ? "\\mathrm{" + e.length + "\\ element\\ list}" : "=" + i.truncatedLatexLabel(e, {
                            digits: this.getEvaluationDigits(),
                            bigCutoff: 1e9,
                            displayAsFraction: this.shouldDisplayEvaluationAsFraction()
                        })
                    }, t.prototype.getEvaluationBraille = function() {
                        var e = this.getEvaluationLatex(),
                            t = this.getBrailleValue(e);
                        return t.isError ? "" : p.UnicodeBraille.toExpandedBrailleAscii(t.value)
                    }, t.prototype.didMountBrailleInput = function(e) {
                        this.brailleInputNode = e
                    }, t.prototype.didUnmountBrailleInput = function() {
                        this.brailleInputNode = void 0
                    }, t.prototype.handleBrailleFocus = function(e) {
                        var t = e.target;
                        t && setTimeout(function() {
                            t.setSelectionRange(0, 0)
                        })
                    }, t.prototype.handleBrailleKeydown = function(e) {
                        if (!(e.altKey || e.ctrlKey || e.metaKey || e.shiftKey)) {
                            if (r.lookup(e) === r.UP) return this.forceModelFocus(), this.dispatch({
                                type: "focus-prev-expression"
                            }), !1;
                            if (r.lookup(e) === r.DOWN) return this.forceModelFocus(), this.dispatch({
                                type: "focus-next-expression"
                            }), !1;
                            if (r.lookup(e) === r.ENTER) return this.forceModelFocus(), this.dispatch({
                                type: "insert-blank-expression"
                            }), !1;
                            if (r.lookup(e) === r.BACKSPACE && document.activeElement === this.brailleInputNode && "" === this.getBraille()) return this.dispatch({
                                type: "backspace-from-braille"
                            }), !1
                        }
                        return !0
                    }, t.prototype.forceModelFocus = function() {
                        document.activeElement !== this.brailleInputNode && this.onFocusedChanged(!0)
                    }, t.prototype.focusBrailleInput = function() {
                        this.brailleInputNode && document.activeElement !== this.brailleInputNode && this.brailleInputNode.focus()
                    }, t.prototype.getPostLabel = function() {
                        if (this.showError()) return this.getError();
                        if (this.getShowEvaluation()) {
                            var e = this.getValue();
                            return void 0 === e && (e = NaN), Array.isArray(e) ? e.length + " element list" : "equals " + i.truncatedAriaLabel(e, {
                                digits: this.getEvaluationDigits(),
                                bigCutoff: 1e9,
                                displayAsFraction: this.shouldDisplayEvaluationAsFraction()
                            })
                        }
                        return ""
                    }, t.prototype.onBrailleInput = function(e) {
                        this.controller.isSettingsMenuOpen() && this.controller.dispatch({
                            type: "close-settings-menu"
                        });
                        var t = this.getLatexValue(p.UnicodeBraille.coerceToSixDotCells(e));
                        this.dispatch({
                            type: "update-latex-from-braille",
                            latex: t.isError ? "" : t.value,
                            braille: e,
                            id: this.props.id()
                        })
                    },
                    t.prototype.getIndexSubscript = function() {
                        return "_{" + (this.getIndex() + 1) + "}"
                    }, t.prototype.getEvaluationDigits = function() {
                        return this.controller.isScientificCalc() ? 10 : 7
                    }, t.prototype.onMountContainer = function(e) {
                        this.containerNode = e
                    }, t.prototype.onTapContainer = function(e) {
                        e.target !== this.containerNode || this.getShowEvaluation() || this.showError() || this.forceModelFocus()
                    }, t.prototype.template = function() {
                        var e = this;
                        return o.createElement("div", {
                            class: function() {
                                return {
                                    "dcg-basic-expression": !0,
                                    "dcg-focused": e.getIsFocused(),
                                    "dcg-braille-io": e.controller.renderAsBraille()
                                }
                            },
                            onTap: this.bindFn(this.onTapContainer),
                            onMount: this.bindFn(this.onMountContainer)
                        }, o.createElement(m, {
                            predicate: function() {
                                return e.controller.renderAsBraille()
                            }
                        }, function() {
                            return o.createElement("div", {
                                class: o.const("dcg-braille-input")
                            }, o.createElement(d.default, {
                                ariaLabel: function() {
                                    var t = e.getBrailleValue("eq" + e.getIndexSubscript());
                                    return t.isError ? "" : p.UnicodeBraille.toExpandedBrailleAscii(t.value)
                                },
                                didMount: e.bindFn(e.didMountBrailleInput),
                                didUnmount: e.bindFn(e.didUnmountBrailleInput),
                                onFocusedChanged: e.bindFn(e.onFocusedChanged),
                                shouldFocus: e.bindFn(e.getIsFocused),
                                onKeydown: e.bindFn(e.handleBrailleKeydown),
                                onInput: e.bindFn(e.onBrailleInput),
                                sixKeyInput: function() {
                                    return e.controller.getSixKeyInput()
                                },
                                value: function() {
                                    return e.getBraille()
                                }
                            }))
                        }), o.createElement(m, {
                            predicate: function() {
                                return e.controller.renderAsBraille()
                            }
                        }, function() {
                            return o.createElement("div", {
                                class: o.const("dcg-braille-evaluation-container")
                            }, o.createElement(m, {
                                predicate: function() {
                                    return e.getShowEvaluation()
                                }
                            }, function() {
                                return o.createElement("div", {
                                    class: o.const("dcg-braille-evaluation")
                                }, o.createElement(g, {
                                    readonly: e.const("true"),
                                    class: e.const("dcg-braille-evaluation-inner"),
                                    value: function() {
                                        return e.getEvaluationBraille()
                                    },
                                    onFocus: e.bindFn(e.handleBrailleFocus),
                                    onKeydown: e.bindFn(e.handleBrailleKeydown),
                                    onInput: function() {}
                                }))
                            }), o.createElement(m, {
                                predicate: function() {
                                    return e.showError()
                                }
                            }, function() {
                                return o.createElement("div", {
                                    class: o.const("dcg-braille-error")
                                }, o.createElement("div", {
                                    class: o.const("dcg-basic-expression-error")
                                }, o.createElement("i", {
                                    class: o.const("dcg-icon-error")
                                })), o.createElement(y, {
                                    readonly: e.const("true"),
                                    class: e.const("dcg-braille-error-inner"),
                                    value: function() {
                                        return e.getError()
                                    },
                                    onFocus: e.bindFn(e.handleBrailleFocus),
                                    onKeydown: e.bindFn(e.handleBrailleKeydown),
                                    onInput: function() {}
                                }))
                            }))
                        }), o.createElement(m, {
                            predicate: function() {
                                return e.controller.renderAsBraille()
                            }
                        }, function() {
                            return o.createElement("div", {
                                class: o.const("dcg-exp-mathquill-container"),
                                didMount: e.bindFn(e.didMountMQ),
                                onTap: e.bindFn(e.forceModelFocus)
                            }, o.createElement(l.default, {
                                latex: function() {
                                    return e.getLatex()
                                },
                                onReflow: e.bindFn(e.onMQReflow)
                            }))
                        }), o.createElement(m, {
                            predicate: function() {
                                return !e.controller.renderAsBraille()
                            }
                        }, function() {
                            return o.createElement("div", {
                                class: o.const("dcg-exp-mathquill-container"),
                                didMount: e.bindFn(e.didMountMQ)
                            }, o.createElement(c.default, {
                                latex: function() {
                                    return e.getLatex()
                                },
                                onReflow: e.bindFn(e.onMQReflow),
                                isFocused: e.bindFn(e.getIsFocused),
                                capExpressionSize: function() {
                                    return e.controller.getCapExpressionSize()
                                },
                                config: e.const({
                                    typingAsteriskWritesTimesSymbol: e.controller.getTypingAsteriskWritesTimesSymbol(),
                                    typingSlashWritesDivisionSymbol: e.controller.getTypingSlashWritesDivisionSymbol(),
                                    disableCopyPaste: e.controller.getRestrictedEditing()
                                }),
                                getAriaLabel: function() {
                                    return e.getAriaLabel()
                                },
                                getAriaPostLabel: function() {
                                    return e.getPostLabel()
                                },
                                hasError: function() {
                                    return !1
                                },
                                onUserPressedKey: function(t, n) {
                                    e.controller.isSettingsMenuOpen() && e.controller.dispatch({
                                        type: "close-settings-menu"
                                    }), e.dispatch({
                                        type: "keypad/press-key",
                                        key: t,
                                        evt: n
                                    })
                                },
                                onUserTypedText: function(t) {
                                    return e.dispatch({
                                        type: "keypad/type-text",
                                        text: t
                                    })
                                },
                                onUserChangedLatex: function(t) {
                                    e.dispatch({
                                        type: "update-latex",
                                        id: e.props.id(),
                                        latex: t
                                    })
                                },
                                onFocusedChanged: e.bindFn(e.onFocusedChanged),
                                disableSpace: function() {
                                    return e.controller.getRestrictedEditing()
                                }
                            }))
                        }), o.createElement("div", {
                            class: o.const("dcg-exp-output-container")
                        }, o.createElement(m, {
                            predicate: function() {
                                return e.showError() && !e.controller.renderAsBraille()
                            }
                        }, function() {
                            return o.createElement(h.Tooltip, {
                                tooltip: e.bindFn(e.getError),
                                gravity: e.const("w"),
                                sticky: e.const(!0)
                            }, o.createElement("div", {
                                class: o.const("dcg-basic-expression-error")
                            }, o.createElement("i", {
                                class: o.const("dcg-icon-error")
                            })))
                        }), o.createElement(m, {
                            predicate: function() {
                                return e.getShowEvaluation()
                            }
                        }, function() {
                            return o.createElement("div", {
                                class: function() {
                                    return {
                                        "dcg-basic-expression-value": !0,
                                        "dcg-basic-evaluation-gray": Array.isArray(e.getValue())
                                    }
                                }
                            }, o.createElement(l.default, {
                                latex: function() {
                                    return e.getEvaluationLatex()
                                }
                            }), o.createElement(m, {
                                predicate: e.bindFn(e.canDisplayEvaluationAsFraction)
                            }, function() {
                                return o.createElement(h.Tooltip, {
                                    tooltip: e.bindFn(e.getFractionMessage),
                                    gravity: e.const("s"),
                                    sticky: e.const(!1)
                                }, o.createElement("span", {
                                    role: o.const("button"),
                                    tabindex: o.const("0"),
                                    "aria-label": e.bindFn(e.getFractionDisplayAriaLabel),
                                    class: function() {
                                        return {
                                            "dcg-basic-fraction-toggle": !0,
                                            "dcg-selected": e.isFractionEvaluation()
                                        }
                                    },
                                    onTap: e.bindFn(e.toggleFractionEvaluation)
                                }, o.createElement("i", {
                                    class: o.const("dcg-icon-fraction")
                                })))
                            }))
                        })))
                    }, t
            }(u.DCGViewBasic);
        t.default = v
    }), define("loadcss!basic/basic-list-view", function() {}), define("basic/basic-list-view", ["require", "exports", "tslib", "scroll_helpers", "dcgview", "./dcgview-basic", "./expression-view", "jquery", "lib/conditional_blur", "loadcss!./basic-list-view"], function(e, t, n, r, i, o, a, s, l) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var c = i.Components,
            u = c.For,
            p = c.If,
            d = function(e) {
                function t() {
                    var t = null !== e && e.apply(this, arguments) || this;
                    return t.didShowAnswerHint = !1, t.didHideAnswerHint = !1, t
                }
                return n.__extends(t, e), t.prototype.template = function() {
                    var e = this;
                    return i.createElement("div", {
                        class: i.const("dcg-basic-list-container"),
                        role: i.const("complementary"),
                        "aria-label": function() {
                            return e.controller.t("Expression List")
                        },
                        didMount: this.bindFn(this.didMountContainer)
                    }, i.createElement("div", {
                        class: i.const("dcg-basic-list-placeholder"),
                        didMount: this.bindFn(this.didMountPlaceholder)
                    }, i.createElement(p, {
                        predicate: this.bindFn(this.showAnswerHint)
                    }, function() {
                        return i.createElement("div", {
                            class: i.const("dcg-answer-hint")
                        }, function() {
                            return e.controller.t("Your answers show up on this side.")
                        })
                    })), i.createElement(u, {
                        each: function() {
                            return e.model.getExpressionOrder()
                        }
                    }, i.createElement("div", {
                        class: function() {
                            return {
                                "dcg-basic-list": !0,
                                "dcg-projector-mode": e.controller.isProjectorMode()
                            }
                        }
                    }, function(t) {
                        return i.createElement(a.default, {
                            controller: e.props.controller,
                            id: e.const(t)
                        })
                    })))
                }, t.prototype.didMountPlaceholder = function(e) {
                    s(e).on("dcg-tap", l.default)
                }, t.prototype.showAnswerHint = function() {
                    if (this.didHideAnswerHint) return !1;
                    var e = this.model.getExpressionOrder()[0];
                    return !(!this.model.shouldShowEvaluationForExpression(e) && !this.didShowAnswerHint) && (this.didShowAnswerHint = !0, !(this.model.getNumberOfExpressions() > 1 || "" === this.model.getExpressionLatex(e)) || (this.didHideAnswerHint = !0, !1))
                }, t.prototype.didUpdate = function() {
                    if (this.$container) {
                        var e = this.$container.find(".dcg-focused");
                        e.length > 0 && r.scrollVisible(e, this.$container, 50)
                    }
                }, t.prototype.didMountContainer = function(e) {
                    this.$container = s(e)
                }, t
            }(o.DCGViewBasic);
        t.default = d
    }), define("loadcss!basic/main", function() {}), define("basic/main", ["require", "exports", "tslib", "browser", "keys", "dcgview", "./dcgview-basic", "jquery", "./keypad/fourfunction-control-bar", "./keypad/single-expression-fourfunction-control-bar", "./keypad/scientific-control-bar", "./keypad/single-expression-scientific-control-bar", "./keypad/fourfunction-keypad", "./keypad/single-expression-fourfunction-keypad", "./keypad/single-expression-scientific-keypad", "./keypad/scientific-keypad", "./keypad/braille-keypad", "./basic-list-view", "lib/aria", "touchtracking", "loadcss!desmos-icons", "loadcss!./main", "loadcss!dcg-normalize"], function(e, t, n, r, i, o, a, s, l, c, u, p, d, h, f, m, g, y, v, b) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var x = o.Components,
            w = x.If,
            _ = x.IfElse,
            S = function(e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return n.__extends(t, e), t.prototype.template = function() {
                    var e = this;
                    return o.createElement(w, {
                        predicate: function() {
                            return e.controller.shouldRender()
                        }
                    }, function() {
                        return o.createElement("div", {
                            class: o.const("dcg-calculator-api-container"),
                            style: o.const("width: 100%; height: 100%; position: relative;")
                        }, o.createElement("div", {
                            class: function() {
                                return {
                                    "dcg-calc-basic-main-wrapper": !0,
                                    "dcg-narrow": e.controller.containerSize.width < 570,
                                    "dcg-short": e.controller.containerSize.height <= 500,
                                    "dcg-scientific-calculator": e.controller.isScientificCalc(),
                                    "dcg-four-function-calculator": e.controller.isFourFunctionCalc(),
                                    "dcg-container": !0
                                }
                            },
                            onKeydown: e.bindFn(e.handleRootKeydown),
                            didMount: e.bindFn(e.didMountRoot),
                            "x-ms-format-detection": o.const("none")
                        }, o.createElement("div", {
                            role: o.const("application"),
                            "aria-label": function() {
                                return e.controller.isScientificCalc() ? e.controller.t("Desmos Scientific Calculator") : e.controller.isFourFunctionCalc() ? e.controller.t("Desmos Four-Function Calculator") : ""
                            },
                            class: function() {
                                return {
                                    "dcg-calc-basic-main": !0,
                                    "dcg-inverted-colors": e.controller.getInvertedColors(),
                                    "dcg-projector-mode": e.controller.isProjectorMode(),
                                    "dcg-ipad": r.IS_IPAD,
                                    "dcg-has-background-color": e.controller.hasBackgroundColor(),
                                    "dcg-no-hyperlinks": !e.controller.getAllowLinks()
                                }
                            },
                            style: function() {
                                return {
                                    "font-size": e.controller.getFontSize() + "px",
                                    background: e.controller.getBackgroundColor(),
                                    color: e.controller.getTextColor(),
                                    filter: e.controller.getInvertedColors() ? "invert(100%)" : "none"
                                }
                            }
                        }, o.createElement(y.default, {
                            controller: e.props.controller
                        }), o.createElement(w, {
                            predicate: function() {
                                return e.controller.isScientificCalc() && e.model.isSingleExpression()
                            }
                        }, function() {
                            return o.createElement("div", null, o.createElement(p.default, {
                                controller: e.props.controller
                            }), o.createElement("div", {
                                class: o.const("dcg-basic-keypad-container")
                            }, _(function() {
                                return e.controller.renderAsBraille()
                            }, {
                                true: function() {
                                    return o.createElement(g.default, {
                                        controller: e.props.controller
                                    })
                                },
                                false: function() {
                                    return o.createElement(f.default, {
                                        controller: e.props.controller
                                    })
                                }
                            })))
                        }), o.createElement(w, {
                            predicate: function() {
                                return e.controller.isScientificCalc() && !e.model.isSingleExpression()
                            }
                        }, function() {
                            return o.createElement("div", null, o.createElement(u.default, {
                                controller: e.props.controller
                            }), o.createElement("div", {
                                class: o.const("dcg-basic-keypad-container")
                            }, _(function() {
                                return e.controller.renderAsBraille()
                            }, {
                                true: function() {
                                    return o.createElement(g.default, {
                                        controller: e.props.controller
                                    })
                                },
                                false: function() {
                                    return o.createElement(m.default, {
                                        controller: e.props.controller
                                    })
                                }
                            })))
                        }), o.createElement(w, {
                            predicate: function() {
                                return e.controller.isFourFunctionCalc() && e.model.isSingleExpression()
                            }
                        }, function() {
                            return o.createElement("div", null, o.createElement(c.default, {
                                controller: e.props.controller
                            }), o.createElement("div", {
                                class: o.const("dcg-basic-keypad-container")
                            }, _(function() {
                                return e.controller.renderAsBraille()
                            }, {
                                true: function() {
                                    return o.createElement(g.default, {
                                        controller: e.props.controller
                                    })
                                },
                                false: function() {
                                    return o.createElement(h.default, {
                                        controller: e.props.controller
                                    })
                                }
                            })))
                        }), o.createElement(w, {
                            predicate: function() {
                                return e.controller.isFourFunctionCalc() && !e.model.isSingleExpression()
                            }
                        }, function() {
                            return o.createElement("div", null, o.createElement(l.default, {
                                controller: e.props.controller
                            }), o.createElement("div", {
                                class: o.const("dcg-basic-keypad-container")
                            }, _(function() {
                                return e.controller.renderAsBraille()
                            }, {
                                true: function() {
                                    return o.createElement(g.default, {
                                        controller: e.props.controller
                                    })
                                },
                                false: function() {
                                    return o.createElement(d.default, {
                                        controller: e.props.controller
                                    })
                                }
                            })))
                        }))))
                    })
                }, t.prototype.didMountRoot = function(e) {
                    b.monitor(e)
                }, t.prototype.handleRootKeydown = function(e) {
                    if (i.isUndo(e)) return this.dispatch({
                        type: "undo",
                        source: "keyboard-shortcut"
                    }), !1;
                    if (i.isRedo(e)) return this.dispatch({
                        type: "redo",
                        source: "keyboard-shortcut"
                    }), !1;
                    if (!e.metaKey && !e.shiftKey)
                        if (e.ctrlKey || e.altKey || i.lookup(e) !== i.BACKSPACE) {
                            if (e.ctrlKey === r.IS_APPLE && e.altKey === !r.IS_APPLE) {
                                var t = i.lookupChar(e);
                                if ("N" === t) return this.dispatch({
                                    type: "set-braille-mode",
                                    mode: "nemeth"
                                }), v.alert(this.controller.t("Braille mode Nemeth")), !1;
                                if ("U" === t) return this.dispatch({
                                    type: "set-braille-mode",
                                    mode: "ueb"
                                }), v.alert(this.controller.t("Braille mode UEB")), !1;
                                if ("Q" === t || "X" === t) return this.dispatch({
                                    type: "set-braille-mode",
                                    mode: "none"
                                }), v.alert(this.controller.t("Braille mode off")), !1;
                                if ("6" === t) {
                                    var n = !this.controller.getSixKeyInput();
                                    return this.dispatch({
                                        type: "set-six-key-input",
                                        mode: n
                                    }), v.alert(n ? this.controller.t("Six Key Braille Input on") : this.controller.t("Six Key Braille Input off")), !1
                                }
                            }
                        } else if (!document.activeElement || !s(document.activeElement).is('input, textarea, [role="textbox"]')) return !1;
                    return !0
                }, t
            }(a.DCGViewBasic);
        t.default = S
    }), define("api/basic", ["require", "exports", "tslib", "dcgview", "./abstract", "main/shared-worker-pool", "basic/controller", "basic/main", "lib/color-helpers", "underscore_model", "lib/deepCopy", "lib/console"], function(e, t, n, r, i, o, a, s, l, c, u, p) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var d = function(e) {
            function t(t) {
                return e.call(this, t) || this
            }
            return n.__extends(t, e), t.prototype.init = function(e) {
                var t = this;
                e = u.default(e), e.backgroundColor && !l.isValidHexColor(e.backgroundColor) && (p.warn("Invalid backgroundColor. Background color must be a 3- or 6-character hex color (e.g. #cde or #ffaaaa)"), delete e.backgroundColor), e.textColor && !l.isValidHexColor(e.textColor) && (p.warn("Invalid textColor. Text color must be a 3- or 6-character hex color (e.g. #000 or #001111)"), delete e.textColor);
                var r = n.__assign({
                    qwertyKeyboard: !0,
                    links: !0,
                    degreeMode: !1,
                    settingsMenu: !0,
                    invertedColors: !1,
                    backgroundColor: "#fff",
                    textColor: "#000",
                    brailleMode: "none",
                    sixKeyInput: !1,
                    brailleExpressionDownload: !0,
                    projectorMode: !1,
                    capExpressionSize: !1,
                    functionDefinition: !0,
                    autosize: !0,
                    evaluationMode: "scientific",
                    restrictedEditing: !1,
                    additionalFunctions: ["sqrt"],
                    typingSlashWritesDivisionSymbol: !1,
                    typingAsteriskWritesTimesSymbol: !1,
                    decimalToFraction: !0
                }, e);
                this.settings = new c.UnderscoreModel;
                var i = {
                    workerPool: o.default,
                    settingsProxy: this.settings
                };
                this.controller = new a.default(r, i), this.controller.onEventEmitted = function(e) {
                    "render" === e && t.updateView(), t.triggerEvent(e, void 0)
                }, this.setupDomChangeDetector(r.autosize)
            }, t.prototype.onCreateView = function() {
                return r.mountToNode(s.default, this.rootElt, {
                    controller: r.const(this.controller)
                })
            }, t.prototype.setState = function(e, t) {
                t || (t = {}), this.controller.dispatch({
                    type: "set-state-from-api",
                    state: e,
                    opts: {
                        allowUndo: !!t.allowUndo
                    }
                })
            }, t.prototype.getState = function() {
                return u.default(this.controller.model.getPersistedState())
            }, t.prototype.undo = function() {
                this.controller.dispatch({
                    type: "undo",
                    source: "api"
                })
            }, t.prototype.redo = function() {
                this.controller.dispatch({
                    type: "redo",
                    source: "api"
                })
            }, t.prototype.clearHistory = function() {
                this.controller.dispatch({
                    type: "clear-history"
                })
            }, t.prototype.setBlank = function(e) {
                e || (e = {}), this.controller.dispatch({
                    type: "set-blank",
                    opts: {
                        allowUndo: !!e.allowUndo
                    }
                })
            }, t.prototype.updateSettings = function(e) {
                if (null != e)
                    for (var t in e) switch (t) {
                        case "fontSize":
                            var n = e[t];
                            if (void 0 === n) continue;
                            this.controller.dispatch({
                                type: "update-font-size",
                                size: n
                            });
                            break;
                        case "invertedColors":
                            var r = e[t];
                            if (void 0 === r) continue;
                            this.controller.dispatch({
                                type: "update-inverted-colors",
                                mode: r
                            });
                            break;
                        case "backgroundColor":
                            var i = e[t];
                            if (void 0 === i || !l.isValidHexColor(i)) {
                                p.warn("Invalid backgroundColor. Background color must be a 3- or 6-character hex color (e.g. #cde or #ffaaaa)");
                                continue
                            }
                            this.controller.dispatch({
                                type: "update-background-color",
                                color: i
                            });
                            break;
                        case "textColor":
                            var o = e[t];
                            if (void 0 === o || !l.isValidHexColor(o)) {
                                p.warn("Invalid textColor. Text color must be a 3- or 6-character hex color (e.g. #000 or #001111)");
                                continue
                            }
                            this.controller.dispatch({
                                type: "update-text-color",
                                color: o
                            });
                            break;
                        case "degreeMode":
                            var a = e[t];
                            if (void 0 === a) continue;
                            this.controller.dispatch({
                                type: "update-degree-mode",
                                mode: a
                            });
                            break;
                        case "brailleMode":
                            var s = e[t];
                            this.controller.dispatch({
                                type: "set-braille-mode",
                                mode: s
                            });
                            break;
                        case "sixKeyInput":
                            var c = e[t];
                            if (void 0 === c) continue;
                            this.controller.dispatch({
                                type: "set-six-key-input",
                                mode: c
                            });
                            break;
                        case "brailleExpressionDownload":
                            var u = e[t];
                            if (void 0 === u) continue;
                            this.controller.dispatch({
                                type: "set-braille-expression-download",
                                mode: u
                            });
                            break;
                        case "projectorMode":
                            var d = e[t];
                            if (void 0 === d) continue;
                            this.controller.dispatch({
                                type: "update-projector-mode",
                                mode: d
                            });
                            break;
                        case "capExpressionSize":
                            var h = e[t];
                            if (void 0 === h) continue;
                            this.controller.dispatch({
                                type: "update-cap-expression-size",
                                mode: h
                            });
                            break;
                        case "language":
                            var f = e[t];
                            if (void 0 === f) continue;
                            this.controller.dispatch({
                                type: "update-language",
                                language: f
                            });
                            break;
                        case "settingsMenu":
                            e.settingsMenu ? this.controller.dispatch({
                                type: "enable-settings-menu"
                            }) : this.controller.dispatch({
                                type: "disable-settings-menu"
                            });
                            break;
                        case "qwertyKeyboard":
                            this.controller.dispatch({
                                type: "update-options",
                                options: {
                                    qwertyKeyboard: !!e.qwertyKeyboard
                                }
                            });
                            var m = this.controller.getKeyboardMode();
                            "qwerty" !== m && "letters" !== m || this.controller.dispatch({
                                type: "ABC"
                            });
                            break;
                        case "functionDefinition":
                            e.functionDefinition ? this.controller.model.enableFunctionDefinition() : this.controller.model.disableFunctionDefinition();
                            break;
                        case "links":
                            this.controller.dispatch({
                                type: "update-options",
                                options: {
                                    links: !!e.links
                                }
                            });
                            break;
                        case "decimalToFraction":
                            var g = e[t];
                            if (void 0 === g) continue;
                            this.controller.dispatch({
                                type: "update-decimal-to-fraction",
                                mode: g
                            })
                    }
            }, t.prototype.focusFirstExpression = function() {
                this.controller.dispatch({
                    type: "focus-first-expression"
                })
            }, t.prototype.onResizeView = function(e) {
                this.controller.dispatch({
                    type: "ui/container-resized",
                    size: e
                })
            }, t.prototype.onDestroyView = function() {
                r.unmountFromNode(this.rootElt)
            }, t.prototype.destroy = function() {
                this.controller.model.destroy(), e.prototype.destroy.call(this)
            }, t
        }(i.default);
        t.BasicCalculator = d
    }), define("api/fourfunction", ["require", "exports", "tslib", "./basic", "lib/deepCopy", "lib/console"], function(e, t, n, r, i, o) {
        "use strict";

        function a(e) {
            if (e = i.default(e), e.hasOwnProperty("typingSlashWritesDivisionSymbol") || (e.typingSlashWritesDivisionSymbol = !0), e.hasOwnProperty("typingAsteriskWritesTimesSymbol") || (e.typingAsteriskWritesTimesSymbol = !0), e.exponentButtonForSquareRoot && (o.warn("As of API version 1.0, the 'exponentButtonForSquareRoot' option is deprecated.Use 'additionalFunctions: \"exponent\"' instead."), e.additionalFunctions = ["exponent"]), e.additionalFunctions) {
                var t = e.additionalFunctions;
                "string" == typeof t && (t = [t]), t.length > 2 && (o.warn("additionalFunctions can only take up to 2 new functions. Using the first two."), t = t.slice(0, 2));
                for (var n = !0, r = 0; r < t.length; r++) - 1 === ["sqrt", "exponent", "percent"].indexOf(t[r]) && (o.warn("Unrecognized value: '" + t[r] + "' for 'additionalFunction'. Valid values are 'sqrt', 'percent', or 'exponent'. Using default (\"sqrt\")"), n = !1);
                e.additionalFunctions = n ? t : ["sqrt"]
            }
            return e.additionalFunctions && e.additionalFunctions.length || (e.additionalFunctions = ["sqrt"]), e.singleExpression ? e.evaluationMode = "singleExpressionFourFunction" : e.evaluationMode = "fourFunction", delete e.singleExpression, e.hasOwnProperty("decimalToFraction") || (e.decimalToFraction = !1), e
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var s = function(e) {
            function t(n, r) {
                var i = e.call(this, n) || this;
                return i instanceof t ? (i.init(a(r || {})), i) : new t(n, r)
            }
            return n.__extends(t, e), t
        }(r.BasicCalculator);
        t.default = s
    }), define("api/scientific", ["require", "exports", "tslib", "./basic", "lib/deepCopy"], function(e, t, n, r, i) {
        "use strict";

        function o(e) {
            return e = i.default(e), e.singleExpression ? e.evaluationMode = "singleExpressionScientific" : e.evaluationMode = "scientific", delete e.singleExpression, e
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var a = function(e) {
            function t(n, r) {
                var i = e.call(this, n) || this;
                return i instanceof t ? (i.init(o(r || {})), i) : new t(n, r)
            }
            return n.__extends(t, e), t
        }(r.BasicCalculator);
        t.default = a
    }), define("pillow-keypad/controller", ["require", "exports", "flux", "keypad/mq-commands", "lib/i18n"], function(e, t, n, r, i) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var o = function() {
            function e() {
                var e = this;
                this.keyboardMode = "main", this.dispatcher = new n.Dispatcher, this.t = function(e, t) {
                    return i.t(e, t)
                }, this.dispatch = function(t) {
                    e.dispatcher.dispatch(t);
                    for (var n; n = e._queuedCallbacks.shift();) n()
                }, this._queuedCallbacks = [], this.dispatcher = new n.Dispatcher, this.hookUpDispatcher()
            }
            return e.prototype.getBackgroundColor = function() {
                return "does-not-matter"
            }, e.prototype.runAfterDispatch = function(e) {
                this._queuedCallbacks.push(e)
            }, e.prototype.enqueueEvent = function(e) {
                var t = this;
                this.runAfterDispatch(function() {
                    t.onEventEmitted && t.onEventEmitted(e)
                })
            }, e.prototype.getKeyboardMode = function() {
                return this.keyboardMode
            }, e.prototype.updateKeyboardMode = function(e) {
                this.keyboardMode = e
            }, e.prototype.typeIntoFocusedMathquill = function(e) {
                e = e.replace(/\r|\n/g, "");
                var t = this.activeMQ;
                t && t.typedText(e)
            }, e.prototype.pressKeyInFocusedMathquill = function(e, t) {
                var n = this.activeMQ;
                if (n) return "Enter" === e ? (t && (t.preventDefault(), t.stopPropagation()), void this.enqueueEvent("enter")) : void n.keystroke(e, t)
            }, e.prototype.executeCommandInFocusedMathquill = function(e) {
                var t = this.activeMQ;
                t && r.execute(t, e)
            }, e.prototype.hookUpDispatcher = function() {
                var e = this;
                this.dispatcher.register(function(t) {
                    switch (e.enqueueEvent("render"), t.type) {
                        case "hide-keypad":
                            e.enqueueEvent("hide-keypad");
                            break;
                        case "set-active-mq":
                            e.activeMQ = t.mq;
                            break;
                        case "keypad/shift":
                            e.updateKeyboardMode("capitalQwerty" === e.keyboardMode ? "qwerty" : "capitalQwerty");
                            break;
                        case "main":
                            e.updateKeyboardMode("main");
                            break;
                        case "ABC":
                            e.updateKeyboardMode("qwerty");
                            break;
                        case "functions":
                            e.updateKeyboardMode("functions");
                            break;
                        case "keypad/type-text":
                            e.typeIntoFocusedMathquill(t.text);
                            break;
                        case "keypad/press-key":
                            e.pressKeyInFocusedMathquill(t.key, t.evt);
                            break;
                        case "keypad/custom-command":
                            e.executeCommandInFocusedMathquill(t.command);
                            break;
                        case "keypad/123":
                        case "keypad/abc":
                            break;
                        default:
                            return t
                    }
                })
            }, e
        }();
        t.default = o
    }), define("pillow-keypad/dcgview-pillow-keypad", ["require", "exports", "tslib", "dcgview"], function(e, t, n, r) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var i = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.init = function() {
                this.controller = this.props.controller(), this.dispatch = this.controller.dispatch, this.t = this.controller.t
            }, t
        }(r.Class);
        t.DCGViewPillowKeypad = i
    }), define("pillow-keypad/main-keypad", ["require", "exports", "tslib", "dcgview", "keypad/keys", "keypad/keypad", "keypad/row", "./dcgview-pillow-keypad"], function(e, t, n, r, i, o, a, s) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var l = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.template = function() {
                return r.createElement(o.default, {
                    controller: this.props.controller
                }, r.createElement(a.default, null, i.view(this, "left", {
                    style: "highlight"
                }), i.view(this, "right", {
                    style: "highlight"
                }), i.view(this, "x"), i.view(this, "y"), r.createElement("div", {
                    class: r.const("dcg-partition-placeholder")
                }), i.view(this, "7", {
                    style: "highlight"
                }), i.view(this, "8", {
                    style: "highlight"
                }), i.view(this, "9", {
                    style: "highlight"
                }), i.view(this, "/"), i.view(this, "backspace", {
                    style: "highlight"
                })), r.createElement(a.default, null, i.view(this, "("), i.view(this, ")"), i.view(this, "<"), i.view(this, ">"), r.createElement("div", {
                    class: r.const("dcg-partition-placeholder")
                }), i.view(this, "4", {
                    style: "highlight"
                }), i.view(this, "5", {
                    style: "highlight"
                }), i.view(this, "6", {
                    style: "highlight"
                }), i.view(this, "*"), i.view(this, "pi")), r.createElement(a.default, null, i.view(this, "sqrt"), i.view(this, ","), i.view(this, "<="), i.view(this, ">="), r.createElement("div", {
                    class: r.const("dcg-partition-placeholder")
                }), i.view(this, "1", {
                    style: "highlight"
                }), i.view(this, "2", {
                    style: "highlight"
                }), i.view(this, "3", {
                    style: "highlight"
                }), i.view(this, "-"), i.view(this, "enter", {
                    style: "tall-blue"
                })), r.createElement(a.default, null, i.view(this, "a^2"), i.view(this, "a^b"), i.view(this, "|a|"), i.view(this, "a/b"), r.createElement("div", {
                    class: r.const("dcg-partition-placeholder")
                }), i.view(this, "0", {
                    style: "highlight"
                }), i.view(this, ".", {
                    style: "highlight"
                }), i.view(this, "="), i.view(this, "+"), i.spacer(1)))
            }, t
        }(s.DCGViewPillowKeypad);
        t.default = l
    }), define("pillow-keypad/qwerty-keypad", ["require", "exports", "tslib", "dcgview", "keypad/keys", "keypad/keypad", "keypad/row", "./dcgview-pillow-keypad"], function(e, t, n, r, i, o, a, s) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var l = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.template = function() {
                return r.createElement(o.default, {
                    controller: this.props.controller
                }, r.createElement(a.default, null, i.view(this, "q"), i.view(this, "w"), i.view(this, "e"), i.view(this, "r"), i.view(this, "t"), i.view(this, "y"), i.view(this, "u"), i.view(this, "i"), i.view(this, "o"), i.view(this, "p")), r.createElement(a.default, null, r.createElement("div", {
                    class: r.const("dcg-half-width-placeholder")
                }), i.view(this, "a"), i.view(this, "s"), i.view(this, "d"), i.view(this, "f"), i.view(this, "g"), i.view(this, "h"), i.view(this, "j"), i.view(this, "k"), i.view(this, "l"), r.createElement("div", {
                    class: r.const("dcg-half-width-placeholder")
                })), r.createElement(a.default, null, i.view(this, "shift", {
                    style: "highlight"
                }), i.view(this, "z"), i.view(this, "x"), i.view(this, "c"), i.view(this, "v"), i.view(this, "b"), i.view(this, "n"), i.view(this, "m"), i.view(this, ","), i.view(this, "backspace", {
                    style: "highlight"
                })), r.createElement(a.default, null, i.view(this, "="), i.view(this, "{"), i.view(this, "}"), i.view(this, "["), i.view(this, "]"), i.view(this, "!"), i.view(this, "'"), i.view(this, "pi"), i.view(this, "enter", {
                    style: "blue"
                })))
            }, t
        }(s.DCGViewPillowKeypad);
        t.default = l
    }), define("pillow-keypad/capital-qwerty-keypad", ["require", "exports", "tslib", "dcgview", "./dcgview-pillow-keypad", "keypad/keys", "keypad/keypad", "keypad/row"], function(e, t, n, r, i, o, a, s) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var l = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.template = function() {
                return r.createElement(a.default, {
                    controller: this.props.controller
                }, r.createElement(s.default, null, o.view(this, "Q"), o.view(this, "W"), o.view(this, "E"), o.view(this, "R"), o.view(this, "T"), o.view(this, "Y"), o.view(this, "U"), o.view(this, "I"), o.view(this, "O"), o.view(this, "P")), r.createElement(s.default, null, r.createElement("div", {
                    class: r.const("dcg-half-width-placeholder")
                }), o.view(this, "A"), o.view(this, "S"), o.view(this, "D"), o.view(this, "F"), o.view(this, "G"), o.view(this, "H"), o.view(this, "J"), o.view(this, "K"), o.view(this, "L"), r.createElement("div", {
                    class: r.const("dcg-half-width-placeholder")
                })), r.createElement(s.default, null, o.view(this, "shift", {
                    style: "highlight"
                }), o.view(this, "Z"), o.view(this, "X"), o.view(this, "C"), o.view(this, "V"), o.view(this, "B"), o.view(this, "N"), o.view(this, "M"), o.view(this, ","), o.view(this, "backspace", {
                    style: "highlight"
                })), r.createElement(s.default, null, o.view(this, "="), o.view(this, "("), o.view(this, ")"), o.view(this, "["), o.view(this, "]"), o.view(this, "!"), o.view(this, "'"), o.view(this, "pi"), o.view(this, "enter", {
                    style: "blue"
                })))
            }, t
        }(i.DCGViewPillowKeypad);
        t.default = l
    }), define("pillow-keypad/functions-keypad", ["require", "exports", "tslib", "dcgview", "keypad/keys", "keypad/keypad", "keypad/row", "./dcgview-pillow-keypad"], function(e, t, n, r, i, o, a, s) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var l = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.template = function() {
                return r.createElement(o.default, {
                    controller: this.props.controller
                }, r.createElement(a.default, null, i.view(this, "sin"), i.view(this, "cos"), i.view(this, "tan"), r.createElement("div", {
                    class: r.const("dcg-partition-placeholder")
                }), i.view(this, "ln"), i.view(this, "log"), i.view(this, "backspace", {
                    style: "highlight"
                })), r.createElement(a.default, null, i.view(this, "arcsin"), i.view(this, "arccos"), i.view(this, "arctan"), r.createElement("div", {
                    class: r.const("dcg-partition-placeholder")
                }), i.view(this, "e^x"), i.view(this, "abs"), i.view(this, "round")), r.createElement(a.default, null, i.view(this, "mean"), i.view(this, "stdev"), i.view(this, "stdevp"), r.createElement("div", {
                    class: r.const("dcg-partition-placeholder")
                }), i.view(this, "a^b"), i.view(this, "sqrt"), i.view(this, "nthroot")), r.createElement(a.default, null, i.view(this, "nPr"), i.view(this, "nCr"), i.view(this, "!"), r.createElement("div", {
                    class: r.const("dcg-partition-placeholder")
                }), i.view(this, "e"), i.view(this, "%"), i.view(this, "enter", {
                    style: "blue"
                })))
            }, t
        }(s.DCGViewPillowKeypad);
        t.default = l
    }), define("pillow-keypad/control-bar", ["require", "exports", "tslib", "dcgview", "keypad/control-bar", "keypad/control-btn", "./dcgview-pillow-keypad"], function(e, t, n, r, i, o, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var s = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.template = function() {
                var e = this.props.controller();
                return r.createElement(i.default, {
                    controller: this.props.controller
                }, r.createElement(o.default, {
                    command: this.const("main"),
                    selected: function() {
                        return "main" === e.getKeyboardMode()
                    },
                    ignoreInTabOrder: this.const(!0),
                    selectable: this.const(!0),
                    onTap: function() {
                        return e.dispatch({
                            type: "main"
                        })
                    }
                }, function() {
                    return e.t("main")
                }), r.createElement(o.default, {
                    command: this.const("ABC"),
                    selected: function() {
                        return -1 !== ["qwerty", "capitalQwerty"].indexOf(e.getKeyboardMode())
                    },
                    ignoreInTabOrder: this.const(!0),
                    selectable: this.const(!0),
                    ariaLabel: function() {
                        return e.t("A B C")
                    },
                    onTap: function() {
                        return e.dispatch({
                            type: "ABC"
                        })
                    }
                }, function() {
                    return e.t("abc")
                }), r.createElement(o.default, {
                    command: this.const("functions"),
                    selected: function() {
                        return -1 !== ["functions", "restrictedFunctions"].indexOf(e.getKeyboardMode())
                    },
                    ariaLabel: function() {
                        return e.t("Functions")
                    },
                    ignoreInTabOrder: this.const(!0),
                    selectable: this.const(!0),
                    onTap: function() {
                        return e.dispatch({
                            type: "functions"
                        })
                    }
                }, function() {
                    return e.t("func")
                }), r.createElement("div", {
                    class: r.const("dcg-hide-keypad-button"),
                    "dcg-command": r.const("hide-keypad"),
                    onTap: function() {
                        return e.dispatch({
                            type: "hide-keypad"
                        })
                    }
                }, r.createElement("i", {
                    class: r.const("dcg-icon-hide")
                })))
            }, t
        }(a.DCGViewPillowKeypad);
        t.default = s
    }), define("loadcss!pillow-keypad/main", function() {}), define("pillow-keypad/main", ["require", "exports", "tslib", "dcgview", "./dcgview-pillow-keypad", "./main-keypad", "./qwerty-keypad", "./capital-qwerty-keypad", "./functions-keypad", "./control-bar", "touchtracking", "loadcss!./main"], function(e, t, n, r, i, o, a, s, l, c, u) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var p = r.Components.Switch,
            d = function(e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return n.__extends(t, e), t.prototype.template = function() {
                    var e = this;
                    return r.createElement("div", {
                        class: r.const("dcg-calculator-api-container"),
                        style: r.const("width: 100%; height: 100%; position: relative;")
                    }, r.createElement("div", {
                        class: r.const("dcg-do-not-blur dcg-container dcg-api-shared-keypad-root"),
                        didMount: this.bindFn(this.didMountRoot)
                    }, r.createElement(c.default, {
                        controller: this.props.controller
                    }), r.createElement("div", {
                        role: r.const("group"),
                        "aria-label": function() {
                            return e.t("keypad")
                        }
                    }, r.createElement(p, {
                        key: function() {
                            return e.controller.getKeyboardMode()
                        }
                    }, function(t) {
                        switch (t) {
                            case "qwerty":
                                return r.createElement(a.default, {
                                    controller: e.props.controller
                                });
                            case "capitalQwerty":
                                return r.createElement(s.default, {
                                    controller: e.props.controller
                                });
                            case "functions":
                                return r.createElement(l.default, {
                                    controller: e.props.controller
                                });
                            default:
                                return r.createElement(o.default, {
                                    controller: e.props.controller
                                })
                        }
                    }))))
                }, t.prototype.didMountRoot = function(e) {
                    u.monitor(e)
                }, t
            }(i.DCGViewPillowKeypad);
        t.default = d
    }), define("api/pillow-keypad", ["require", "exports", "tslib", "dcgview", "./abstract", "pillow-keypad/controller", "pillow-keypad/main"], function(e, t, n, r, i, o, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var s = function(e) {
            function t(n) {
                var r = e.call(this, n) || this;
                return r instanceof t ? (r.init(), r) : new t(n)
            }
            return n.__extends(t, e), t.prototype.init = function() {
                var e = this;
                this.controller = new o.default, this.controller.onEventEmitted = function(t) {
                    "render" === t && e.updateView(), e.triggerEvent(t, void 0)
                }, this.setupDomChangeDetector(!0)
            }, t.prototype.setActiveMathquill = function(e) {
                this.controller.dispatch({
                    type: "set-active-mq",
                    mq: e
                })
            }, t.prototype.onCreateView = function() {
                return r.mountToNode(a.default, this.rootElt, {
                    controller: r.const(this.controller)
                })
            }, t.prototype.onResizeView = function(e) {}, t.prototype.onDestroyView = function() {
                r.unmountFromNode(this.rootElt)
            }, t.prototype.destroy = function() {
                e.prototype.destroy.call(this)
            }, t
        }(i.default);
        t.default = s
    }), define("api/calculator", ["require", "exports", "mathquill", "tslib", "expressions/colors", "graphing-calc/api/sanitize-expression", "graphing-calc/json/graph-settings", "main/font_sizes", "expressions/image_file_to_data_url", "./graphing", "./headless", "./fourfunction", "./scientific", "./pillow-keypad"], function(e, t, n, r, i, o, a, s, l, c, u, p, d, h) {
        "use strict";

        function f(e) {
            var t = g.enabledFeatures;
            return !t || t[e]
        }

        function m(e) {
            t.DesmosAPI[e] = function() {
                throw new Error("The Desmos " + e + " is not enabled for this API key.")
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var g;
        "undefined" != typeof Desmos ? g = Desmos : (g = {}, window.Desmos = g), t.GraphingCalculator = c.default, t.HeadlessGraphingCalculator = u.default, t.FourFunctionCalculator = p.default, t.ScientificCalculator = d.default, t.PillowKeypad = h.default, t.DesmosAPI = {
            Colors: {
                RED: i.RED,
                BLUE: i.BLUE,
                GREEN: i.GREEN,
                ORANGE: i.ORANGE,
                PURPLE: i.PURPLE,
                BLACK: i.BLACK
            },
            imageFileToDataURL: l.imageFileToDataURL,
            supportedLanguages: g.locales ? Object.keys(g.locales) : [],
            Styles: r.__assign({}, o.SanitizedLineStyle, o.SanitizedPointStyle),
            ColumnModes: o.SanitizedColumnMode,
            DragModes: o.SanitizedDragMode,
            AxisArrowModes: a.AxisArrowModes,
            FontSizes: s,
            LabelSizes: o.SanitizedLabelSize,
            LabelOrientations: o.SanitizedLabelOrientation,
            MathQuill: n,
            GraphingCalculator: c.default,
            Calculator: c.default,
            FourFunctionCalculator: p.default,
            ScientificCalculator: d.default,
            PillowKeypad: h.default,
            HeadlessGraphingCalculator: u.default
        }, f("GraphingCalculator") || (m("GraphingCalculator"), m("Calculator")), f("FourFunctionCalculator") || m("FourFunctionCalculator"), f("ScientificCalculator") || m("ScientificCalculator");
        for (var y in t.DesmosAPI) t.DesmosAPI.hasOwnProperty(y) && (g[y] = t.DesmosAPI[y]);
        t.Calculator = c.default
    }),
    function(e) {
        if ("object" == typeof exports && "undefined" != typeof module) module.exports = e();
        else if ("function" == typeof define && define.amd) define("vendor/bugsnag", [], e);
        else {
            var t;
            t = "undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self ? self : this, t.bugsnag = e()
        }
    }(function() {
        function e() {
            return e = Object.assign || function(e) {
                for (var t = 1; t < arguments.length; t++) {
                    var n = arguments[t];
                    for (var r in n) Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r])
                }
                return e
            }, e.apply(this, arguments)
        }

        function t(e) {
            switch (Object.prototype.toString.call(e)) {
                case "[object Error]":
                case "[object Exception]":
                case "[object DOMException]":
                    return !0;
                default:
                    return e instanceof Error
            }
        }

        function n() {
            return n = Object.assign || function(e) {
                for (var t = 1; t < arguments.length; t++) {
                    var n = arguments[t];
                    for (var r in n) Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r])
                }
                return e
            }, n.apply(this, arguments)
        }

        function r() {
            return be((Math.random() * ke << 0).toString(Ce), Te)
        }

        function i() {
            return Ie = Ie < ke ? Ie : 0, ++Ie - 1
        }

        function o() {
            return "c" + (new Date).getTime().toString(Ce) + be(i().toString(Ce), Te) + Me() + (r() + r())
        }

        function a() {
            return a = Object.assign || function(e) {
                for (var t = 1; t < arguments.length; t++) {
                    var n = arguments[t];
                    for (var r in n) Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r])
                }
                return e
            }, a.apply(this, arguments)
        }

        function s(e) {
            return e instanceof Error || /^\[object (Error|(Dom)?Exception)\]$/.test(Object.prototype.toString.call(e))
        }

        function l(e) {
            return "[Throws: " + (e ? e.message : "?") + "]"
        }

        function c(e, t) {
            for (var n = 0, r = e.length; n < r; n++)
                if (e[n] === t) return !0;
            return !1
        }

        function u(e, t) {
            for (var n = 0, r = e.length; n < r; n++)
                if (0 === t.indexOf(e[n])) return !0;
            return !1
        }

        function p(e, t) {
            for (var n = 0, r = e.length; n < r; n++) {
                if ("string" == typeof e[n] && e[n] === t) return !0;
                if (e[n] && "function" == typeof e[n].test && e[n].test(t)) return !0
            }
            return !1
        }

        function d(e) {
            return "[object Array]" === Object.prototype.toString.call(e)
        }

        function h(e, t) {
            try {
                return e[t]
            } catch (e) {
                return l(e)
            }
        }

        function f(e, t, n) {
            function r(e, a) {
                function f() {
                    return a.length > We && o > Ke
                }
                if (o++, a.length > He) return Ye;
                if (f()) return Ye;
                if (null === e || "object" != typeof e) return e;
                if (c(i, e)) return "[Circular]";
                if (i.push(e), "function" == typeof e.toJSON) try {
                    o--;
                    var m = r(e.toJSON(), a);
                    return i.pop(), m
                } catch (e) {
                    return l(e)
                }
                if (s(e)) {
                    o--;
                    var g = r({
                        name: e.name,
                        message: e.message
                    }, a);
                    return i.pop(), g
                }
                if (d(e)) {
                    for (var y = [], v = 0, b = e.length; v < b; v++) {
                        if (f()) {
                            y.push(Ye);
                            break
                        }
                        y.push(r(e[v], a.concat("[]")))
                    }
                    return i.pop(), y
                }
                var x = {};
                try {
                    for (var w in e)
                        if (Object.prototype.hasOwnProperty.call(e, w))
                            if (u(n, a.join(".")) && p(t, w)) x[w] = "[Filtered]";
                            else {
                                if (f()) {
                                    x[w] = Ye;
                                    break
                                }
                                x[w] = r(h(e, w), a.concat(w))
                            }
                } catch (e) {}
                return i.pop(), x
            }
            var i = [],
                o = 0;
            return r(e, [])
        }

        function m() {
            return m = Object.assign || function(e) {
                for (var t = 1; t < arguments.length; t++) {
                    var n = arguments[t];
                    for (var r in n) Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r])
                }
                return e
            }, m.apply(this, arguments)
        }

        function g() {
            return g = Object.assign || function(e) {
                for (var t = 1; t < arguments.length; t++) {
                    var n = arguments[t];
                    for (var r in n) Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r])
                }
                return e
            }, g.apply(this, arguments)
        }

        function y() {
            return y = Object.assign || function(e) {
                for (var t = 1; t < arguments.length; t++) {
                    var n = arguments[t];
                    for (var r in n) Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r])
                }
                return e
            }, y.apply(this, arguments)
        }

        function v() {
            return v = Object.assign || function(e) {
                for (var t = 1; t < arguments.length; t++) {
                    var n = arguments[t];
                    for (var r in n) Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r])
                }
                return e
            }, v.apply(this, arguments)
        }

        function b(e, t) {
            var n = [e.tagName];
            if (e.id && n.push("#" + e.id), e.className && e.className.length && n.push("." + e.className.split(" ").join(".")), !t.document.querySelectorAll || !Array.prototype.indexOf) return n.join("");
            try {
                if (1 === t.document.querySelectorAll(n.join("")).length) return n.join("")
            } catch (e) {
                return n.join("")
            }
            if (e.parentNode.childNodes.length > 1) {
                var r = Array.prototype.indexOf.call(e.parentNode.childNodes, e) + 1;
                n.push(":nth-child(" + r + ")")
            }
            return 1 === t.document.querySelectorAll(n.join("")).length ? n.join("") : e.parentNode ? b(e.parentNode, t) + " > " + n.join("") : n.join("")
        }

        function x(e, t) {
            return e && e.length <= t ? e : e.slice(0, t - "(...)".length) + "(...)"
        }

        function w() {
            if (!qt(Nt(), this[Ot])) {
                var e = {
                    status: this.status,
                    request: this[Ft] + " " + this[Ot]
                };
                this.status >= 400 ? It.leaveBreadcrumb("XMLHttpRequest failed", e, At) : It.leaveBreadcrumb("XMLHttpRequest succeeded", e, At)
            }
        }

        function _() {
            qt(Nt(), this[Ot]) || It.leaveBreadcrumb("XMLHttpRequest error", {
                request: this[Ft] + " " + this[Ot]
            }, At)
        }

        function S() {
            return S = Object.assign || function(e) {
                for (var t = 1; t < arguments.length; t++) {
                    var n = arguments[t];
                    for (var r in n) Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r])
                }
                return e
            }, S.apply(this, arguments)
        }

        function E() {
            return E = Object.assign || function(e) {
                for (var t = 1; t < arguments.length; t++) {
                    var n = arguments[t];
                    for (var r in n) Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r])
                }
                return e
            }, E.apply(this, arguments)
        }
        var M, I = function(e, t, n) {
                for (var r = n, i = 0, o = e.length; i < o; i++) r = t(r, e[i], i, e);
                return r
            },
            T = function(e, t) {
                return I(e, function(e, n, r, i) {
                    return t(n, r, i) ? e.concat(n) : e
                }, [])
            },
            C = function(e, t) {
                return I(e, function(e, n, r, i) {
                    return e.concat(t(n, r, i))
                }, [])
            },
            k = function(e, t) {
                return I(e, function(e, n, r, i) {
                    return !0 === e || n === t
                }, !1)
            },
            D = !{
                toString: null
            }.propertyIsEnumerable("toString"),
            P = ["toString", "toLocaleString", "valueOf", "hasOwnProperty", "isPrototypeOf", "propertyIsEnumerable", "constructor"],
            L = function(e) {
                var t, n = [];
                for (t in e) Object.prototype.hasOwnProperty.call(e, t) && n.push(t);
                if (!D) return n;
                for (var r = 0, i = P.length; r < i; r++) Object.prototype.hasOwnProperty.call(e, P[r]) && n.push(P[r]);
                return n
            },
            A = function(e) {
                return "[object Array]" === Object.prototype.toString.call(e)
            },
            O = function(e) {
                return e < 10 ? "0" + e : e
            },
            F = function() {
                var e = new Date;
                return e.getUTCFullYear() + "-" + O(e.getUTCMonth() + 1) + "-" + O(e.getUTCDate()) + "T" + O(e.getUTCHours()) + ":" + O(e.getUTCMinutes()) + ":" + O(e.getUTCSeconds()) + "." + (e.getUTCMilliseconds() / 1e3).toFixed(3).slice(2, 5) + "Z"
            },
            q = {
                map: C,
                reduce: I,
                filter: T,
                includes: k,
                keys: L,
                isArray: A,
                isoDate: F
            },
            N = {};
        N.intRange = function(e, t) {
            return void 0 === e && (e = 1), void 0 === t && (t = 1 / 0),
                function(n) {
                    return "number" == typeof n && parseInt("" + n, 10) === n && n >= e && n <= t
                }
        }, N.stringWithLength = function(e) {
            return "string" == typeof e && !!e.length
        };
        var R = {},
            B = q.filter,
            j = q.reduce,
            V = q.keys,
            z = q.isArray,
            U = q.includes,
            G = N.intRange,
            H = N.stringWithLength;
        R.schema = {
            apiKey: {
                defaultValue: function() {
                    return null
                },
                message: "is required",
                validate: H
            },
            appVersion: {
                defaultValue: function() {
                    return null
                },
                message: "should be a string",
                validate: function(e) {
                    return null === e || H(e)
                }
            },
            appType: {
                defaultValue: function() {
                    return null
                },
                message: "should be a string",
                validate: function(e) {
                    return null === e || H(e)
                }
            },
            autoNotify: {
                defaultValue: function() {
                    return !0
                },
                message: "should be true|false",
                validate: function(e) {
                    return !0 === e || !1 === e
                }
            },
            beforeSend: {
                defaultValue: function() {
                    return []
                },
                message: "should be a function or array of functions",
                validate: function(e) {
                    return "function" == typeof e || z(e) && B(e, function(e) {
                        return "function" == typeof e
                    }).length === e.length
                }
            },
            endpoints: {
                defaultValue: function() {
                    return {
                        notify: "https://notify.bugsnag.com",
                        sessions: "https://sessions.bugsnag.com"
                    }
                },
                message: "should be an object containing endpoint URLs { notify, sessions }. sessions is optional if autoCaptureSessions=false",
                validate: function(e, t) {
                    return e && "object" == typeof e && H(e.notify) && (!1 === t.autoCaptureSessions || H(e.sessions)) && 0 === B(V(e), function(e) {
                        return !U(["notify", "sessions"], e)
                    }).length
                }
            },
            autoCaptureSessions: {
                defaultValue: function(e, t) {
                    return void 0 === t.endpoints || !!t.endpoints && !!t.endpoints.sessions
                },
                message: "should be true|false",
                validate: function(e) {
                    return !0 === e || !1 === e
                }
            },
            notifyReleaseStages: {
                defaultValue: function() {
                    return null
                },
                message: "should be an array of strings",
                validate: function(e) {
                    return null === e || z(e) && B(e, function(e) {
                        return "string" == typeof e
                    }).length === e.length
                }
            },
            releaseStage: {
                defaultValue: function() {
                    return "production"
                },
                message: "should be a string",
                validate: function(e) {
                    return "string" == typeof e && e.length
                }
            },
            maxBreadcrumbs: {
                defaultValue: function() {
                    return 20
                },
                message: "should be a number ≤40",
                validate: function(e) {
                    return G(0, 40)(e)
                }
            },
            autoBreadcrumbs: {
                defaultValue: function() {
                    return !0
                },
                message: "should be true|false",
                validate: function(e) {
                    return "boolean" == typeof e
                }
            },
            user: {
                defaultValue: function() {
                    return null
                },
                message: "(object) user should be an object",
                validate: function(e) {
                    return "object" == typeof e
                }
            },
            metaData: {
                defaultValue: function() {
                    return null
                },
                message: "should be an object",
                validate: function(e) {
                    return "object" == typeof e
                }
            },
            logger: {
                defaultValue: function() {},
                message: "should be null or an object with methods { debug, info, warn, error }",
                validate: function(e) {
                    return !e || e && j(["debug", "info", "warn", "error"], function(t, n) {
                        return t && "function" == typeof e[n]
                    }, !0)
                }
            },
            filters: {
                defaultValue: function() {
                    return ["password"]
                },
                message: "should be an array of strings|regexes",
                validate: function(e) {
                    return z(e) && e.length === B(e, function(e) {
                        return "string" == typeof e || e && "function" == typeof e.test
                    }).length
                }
            }
        }, R.mergeDefaults = function(e, t) {
            if (!e || !t) throw new Error("opts and schema objects are required");
            return j(V(t), function(n, r) {
                return n[r] = void 0 !== e[r] ? e[r] : t[r].defaultValue(e[r], e), n
            }, {})
        }, R.validate = function(e, t) {
            if (!e || !t) throw new Error("opts and schema objects are required");
            var n = j(V(t), function(n, r) {
                return t[r].validate(e[r], e) ? n : n.concat({
                    key: r,
                    message: t[r].message,
                    value: e[r]
                })
            }, []);
            return {
                valid: !n.length,
                errors: n
            }
        };
        var K = R.schema,
            W = q.map,
            Y = N.stringWithLength,
            X = {
                releaseStage: {
                    defaultValue: function() {
                        return /^localhost(:\d+)?$/.test(window.location.host) ? "development" : "production"
                    },
                    message: "should be set",
                    validate: Y
                },
                logger: e({}, K.logger, {
                    defaultValue: function() {
                        return "undefined" != typeof console && "function" == typeof console.debug ? $() : void 0
                    }
                })
            },
            $ = function() {
                var e = {},
                    t = console.log;
                return W(["debug", "info", "warn", "error"], function(n) {
                    var r = console[n];
                    e[n] = "function" == typeof r ? r.bind(console, "[bugsnag]") : t.bind(console, "[bugsnag]")
                }), e
            },
            Q = q.isoDate,
            Z = function() {
                function e(e, t, n, r) {
                    void 0 === e && (e = "[anonymous]"), void 0 === t && (t = {}), void 0 === n && (n = "manual"), void 0 === r && (r = Q()), this.type = n, this.name = e, this.metaData = t, this.timestamp = r
                }
                return e.prototype.toJSON = function() {
                    return {
                        type: this.type,
                        name: this.name,
                        timestamp: this.timestamp,
                        metaData: this.metaData
                    }
                }, e
            }(),
            J = Z,
            ee = function(e, t, n) {
                var r = e.length,
                    i = 0,
                    o = function() {
                        if (i >= r) return n(null, !1);
                        t(e[i], function(e, t) {
                            return e ? n(e, !1) : !0 === t ? n(null, !0) : (i++, void o())
                        })
                    };
                o()
            },
            te = function(e) {
                return e.app && "string" == typeof e.app.releaseStage ? e.app.releaseStage : e.config.releaseStage
            },
            ne = t,
            re = ne,
            ie = function(e, t) {
                return function(n, r) {
                    if ("function" != typeof n) return r(null, !1);
                    try {
                        if (2 !== n.length) {
                            var i = n(e);
                            return i && "function" == typeof i.then ? i.then(function(t) {
                                return setTimeout(function() {
                                    return r(null, oe(e, t))
                                }, 0)
                            }, function(e) {
                                setTimeout(function() {
                                    return t(e), r(null, !1)
                                })
                            }) : r(null, oe(e, i))
                        }
                        n(e, function(n, i) {
                            if (n) return t(n), r(null, !1);
                            r(null, oe(e, i))
                        })
                    } catch (e) {
                        t(e), r(null, !1)
                    }
                }
            },
            oe = function(e, t) {
                return e.isIgnored() || !1 === t
            },
            ae = {};
        ! function(e, t) {
            "use strict";
            "function" == typeof M && M.amd ? M("stackframe", [], t) : "object" == typeof ae ? ae = t() : e.StackFrame = t()
        }(this, function() {
            "use strict";

            function e(e) {
                return !isNaN(parseFloat(e)) && isFinite(e)
            }

            function t(e) {
                return e.charAt(0).toUpperCase() + e.substring(1)
            }

            function n(e) {
                return function() {
                    return this[e]
                }
            }

            function r(e) {
                if (e instanceof Object)
                    for (var n = 0; n < l.length; n++) e.hasOwnProperty(l[n]) && void 0 !== e[l[n]] && this["set" + t(l[n])](e[l[n]])
            }
            var i = ["isConstructor", "isEval", "isNative", "isToplevel"],
                o = ["columnNumber", "lineNumber"],
                a = ["fileName", "functionName", "source"],
                s = ["args"],
                l = i.concat(o, a, s);
            r.prototype = {
                getArgs: function() {
                    return this.args
                },
                setArgs: function(e) {
                    if ("[object Array]" !== Object.prototype.toString.call(e)) throw new TypeError("Args must be an Array");
                    this.args = e
                },
                getEvalOrigin: function() {
                    return this.evalOrigin
                },
                setEvalOrigin: function(e) {
                    if (e instanceof r) this.evalOrigin = e;
                    else {
                        if (!(e instanceof Object)) throw new TypeError("Eval Origin must be an Object or StackFrame");
                        this.evalOrigin = new r(e)
                    }
                },
                toString: function() {
                    return (this.getFunctionName() || "{anonymous}") + "(" + (this.getArgs() || []).join(",") + ")" + (this.getFileName() ? "@" + this.getFileName() : "") + (e(this.getLineNumber()) ? ":" + this.getLineNumber() : "") + (e(this.getColumnNumber()) ? ":" + this.getColumnNumber() : "")
                }
            };
            for (var c = 0; c < i.length; c++) r.prototype["get" + t(i[c])] = n(i[c]), r.prototype["set" + t(i[c])] = function(e) {
                return function(t) {
                    this[e] = Boolean(t)
                }
            }(i[c]);
            for (var u = 0; u < o.length; u++) r.prototype["get" + t(o[u])] = n(o[u]), r.prototype["set" + t(o[u])] = function(t) {
                return function(n) {
                    if (!e(n)) throw new TypeError(t + " must be a Number");
                    this[t] = Number(n)
                }
            }(o[u]);
            for (var p = 0; p < a.length; p++) r.prototype["get" + t(a[p])] = n(a[p]), r.prototype["set" + t(a[p])] = function(e) {
                return function(t) {
                    this[e] = String(t)
                }
            }(a[p]);
            return r
        });
        var se = {};
        ! function(e, t) {
            "use strict";
            "function" == typeof M && M.amd ? M("error-stack-parser", ["stackframe"], t) : "object" == typeof se ? se = t(ae) : e.ErrorStackParser = t(e.StackFrame)
        }(this, function(e) {
            "use strict";
            var t = /(^|@)\S+\:\d+/,
                n = /^\s*at .*(\S+\:\d+|\(native\))/m,
                r = /^(eval@)?(\[native code\])?$/;
            return {
                parse: function(e) {
                    if (void 0 !== e.stacktrace || void 0 !== e["opera#sourceloc"]) return this.parseOpera(e);
                    if (e.stack && e.stack.match(n)) return this.parseV8OrIE(e);
                    if (e.stack) return this.parseFFOrSafari(e);
                    throw new Error("Cannot parse given Error object")
                },
                extractLocation: function(e) {
                    if (-1 === e.indexOf(":")) return [e];
                    var t = /(.+?)(?:\:(\d+))?(?:\:(\d+))?$/,
                        n = t.exec(e.replace(/[\(\)]/g, ""));
                    return [n[1], n[2] || void 0, n[3] || void 0]
                },
                parseV8OrIE: function(t) {
                    return t.stack.split("\n").filter(function(e) {
                        return !!e.match(n)
                    }, this).map(function(t) {
                        t.indexOf("(eval ") > -1 && (t = t.replace(/eval code/g, "eval").replace(/(\(eval at [^\()]*)|(\)\,.*$)/g, ""));
                        var n = t.replace(/^\s+/, "").replace(/\(eval code/g, "(").split(/\s+/).slice(1),
                            r = this.extractLocation(n.pop()),
                            i = n.join(" ") || void 0,
                            o = ["eval", "<anonymous>"].indexOf(r[0]) > -1 ? void 0 : r[0];
                        return new e({
                            functionName: i,
                            fileName: o,
                            lineNumber: r[1],
                            columnNumber: r[2],
                            source: t
                        })
                    }, this)
                },
                parseFFOrSafari: function(t) {
                    return t.stack.split("\n").filter(function(e) {
                        return !e.match(r)
                    }, this).map(function(t) {
                        if (t.indexOf(" > eval") > -1 && (t = t.replace(/ line (\d+)(?: > eval line \d+)* > eval\:\d+\:\d+/g, ":$1")), -1 === t.indexOf("@") && -1 === t.indexOf(":")) return new e({
                            functionName: t
                        });
                        var n = /((.*".+"[^@]*)?[^@]*)(?:@)/,
                            r = t.match(n),
                            i = r && r[1] ? r[1] : void 0,
                            o = this.extractLocation(t.replace(n, ""));
                        return new e({
                            functionName: i,
                            fileName: o[0],
                            lineNumber: o[1],
                            columnNumber: o[2],
                            source: t
                        })
                    }, this)
                },
                parseOpera: function(e) {
                    return !e.stacktrace || e.message.indexOf("\n") > -1 && e.message.split("\n").length > e.stacktrace.split("\n").length ? this.parseOpera9(e) : e.stack ? this.parseOpera11(e) : this.parseOpera10(e)
                },
                parseOpera9: function(t) {
                    for (var n = /Line (\d+).*script (?:in )?(\S+)/i, r = t.message.split("\n"), i = [], o = 2, a = r.length; o < a; o += 2) {
                        var s = n.exec(r[o]);
                        s && i.push(new e({
                            fileName: s[2],
                            lineNumber: s[1],
                            source: r[o]
                        }))
                    }
                    return i
                },
                parseOpera10: function(t) {
                    for (var n = /Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i, r = t.stacktrace.split("\n"), i = [], o = 0, a = r.length; o < a; o += 2) {
                        var s = n.exec(r[o]);
                        s && i.push(new e({
                            functionName: s[3] || void 0,
                            fileName: s[2],
                            lineNumber: s[1],
                            source: r[o]
                        }))
                    }
                    return i
                },
                parseOpera11: function(n) {
                    return n.stack.split("\n").filter(function(e) {
                        return !!e.match(t) && !e.match(/^Error created at/)
                    }, this).map(function(t) {
                        var n, r = t.split("@"),
                            i = this.extractLocation(r.pop()),
                            o = r.shift() || "",
                            a = o.replace(/<anonymous function(: (\w+))?>/, "$2").replace(/\([^\)]*\)/g, "") || void 0;
                        o.match(/\(([^\)]*)\)/) && (n = o.replace(/^[^\(]+\(([^\)]*)\)$/, "$1"));
                        var s = void 0 === n || "[arguments not available]" === n ? void 0 : n.split(",");
                        return new e({
                            functionName: a,
                            args: s,
                            fileName: i[0],
                            lineNumber: i[1],
                            columnNumber: i[2],
                            source: t
                        })
                    }, this)
                }
            }
        });
        var le = se,
            ce = function(e) {
                return !(!e || !e.stack && !e.stacktrace && !e["opera#sourceloc"] || "string" != typeof(e.stack || e.stacktrace || e["opera#sourceloc"]) || e.stack === e.name + ": " + e.message)
            },
            ue = {};
        ! function(e, t) {
            "use strict";
            "function" == typeof M && M.amd ? M("stack-generator", ["stackframe"], t) : "object" == typeof ue ? ue = t(ae) : e.StackGenerator = t(e.StackFrame)
        }(this, function(e) {
            return {
                backtrace: function(t) {
                    var n = [],
                        r = 10;
                    "object" == typeof t && "number" == typeof t.maxStackSize && (r = t.maxStackSize);
                    for (var i = arguments.callee; i && n.length < r && i.arguments;) {
                        for (var o = new Array(i.arguments.length), a = 0; a < o.length; ++a) o[a] = i.arguments[a];
                        /function(?:\s+([\w$]+))+\s*\(/.test(i.toString()) ? n.push(new e({
                            functionName: RegExp.$1 || void 0,
                            args: o
                        })) : n.push(new e({
                            args: o
                        }));
                        try {
                            i = i.caller
                        } catch (e) {
                            break
                        }
                    }
                    return n
                }
            }
        });
        var pe = q.reduce,
            de = q.filter,
            he = function() {
                function e(e, t, n, r, i) {
                    void 0 === n && (n = []), void 0 === r && (r = ge()), this.__isBugsnagReport = !0, this._ignored = !1, this._handledState = r, this.app = void 0, this.apiKey = void 0, this.breadcrumbs = [], this.context = void 0, this.device = void 0, this.errorClass = ye(e, "[no error class]"), this.errorMessage = ye(t, "[no error message]"), this.groupingHash = void 0, this.metaData = {}, this.request = void 0, this.severity = this._handledState.severity, this.stacktrace = pe(n, function(e, t) {
                        var n = fe(t);
                        try {
                            return "{}" === JSON.stringify(n) ? e : e.concat(n)
                        } catch (t) {
                            return e
                        }
                    }, []), this.user = void 0, this.session = void 0, this.originalError = i
                }
                var t = e.prototype;
                return t.ignore = function() {
                    this._ignored = !0
                }, t.isIgnored = function() {
                    return this._ignored
                }, t.updateMetaData = function(e) {
                    var t;
                    if (!e) return this;
                    var r;
                    return null === (arguments.length <= 1 ? void 0 : arguments[1]) ? this.removeMetaData(e) : null === (arguments.length <= 2 ? void 0 : arguments[2]) ? this.removeMetaData(e, arguments.length <= 1 ? void 0 : arguments[1], arguments.length <= 2 ? void 0 : arguments[2]) : ("object" == typeof(arguments.length <= 1 ? void 0 : arguments[1]) && (r = arguments.length <= 1 ? void 0 : arguments[1]), "string" == typeof(arguments.length <= 1 ? void 0 : arguments[1]) && (t = {}, t[arguments.length <= 1 ? void 0 : arguments[1]] = arguments.length <= 2 ? void 0 : arguments[2], r = t), r ? (this.metaData[e] || (this.metaData[e] = {}), this.metaData[e] = n({}, this.metaData[e], r), this) : this)
                }, t.removeMetaData = function(e, t) {
                    return "string" != typeof e ? this : t ? this.metaData[e] ? (delete this.metaData[e][t], this) : this : (delete this.metaData[e], this)
                }, t.toJSON = function() {
                    return {
                        payloadVersion: "4",
                        exceptions: [{
                            errorClass: this.errorClass,
                            message: this.errorMessage,
                            stacktrace: this.stacktrace,
                            type: "browserjs"
                        }],
                        severity: this.severity,
                        unhandled: this._handledState.unhandled,
                        severityReason: this._handledState.severityReason,
                        app: this.app,
                        device: this.device,
                        breadcrumbs: this.breadcrumbs,
                        context: this.context,
                        user: this.user,
                        metaData: this.metaData,
                        groupingHash: this.groupingHash,
                        request: this.request,
                        session: this.session
                    }
                }, e
            }(),
            fe = function(e) {
                var t = {
                    file: e.fileName,
                    method: me(e.functionName),
                    lineNumber: e.lineNumber,
                    columnNumber: e.columnNumber,
                    code: void 0,
                    inProject: void 0
                };
                return t.lineNumber > -1 && !t.file && !t.method && (t.file = "global code"), t
            },
            me = function(e) {
                return /^global code$/i.test(e) ? "global code" : e
            },
            ge = function() {
                return {
                    unhandled: !1,
                    severity: "warning",
                    severityReason: {
                        type: "handledException"
                    }
                }
            },
            ye = function(e, t) {
                return "string" == typeof e && e ? e : t
            };
        he.getStacktrace = function(e, t, n) {
            return void 0 === t && (t = 0), void 0 === n && (n = 0), ce(e) ? le.parse(e).slice(t) : de(ue.backtrace(), function(e) {
                return -1 === (e.functionName || "").indexOf("StackGenerator$$")
            }).slice(1 + n)
        }, he.ensureReport = function(e, t, n) {
            if (void 0 === t && (t = 0), void 0 === n && (n = 0), e.__isBugsnagReport) return e;
            try {
                var r = he.getStacktrace(e, t, 1 + n);
                return new he(e.name, e.message, r, void 0, e)
            } catch (t) {
                return new he(e.name, e.message, [], void 0, e)
            }
        };
        var ve = he,
            be = function(e, t) {
                var n = "000000000" + e;
                return n.substr(n.length - t)
            },
            xe = "object" == typeof window ? window : self,
            we = 0;
        for (var _e in xe) Object.hasOwnProperty.call(xe, _e) && we++;
        var Se = navigator.mimeTypes ? navigator.mimeTypes.length : 0,
            Ee = be((Se + navigator.userAgent.length).toString(36) + we.toString(36), 4),
            Me = function() {
                return Ee
            },
            Ie = 0,
            Te = 4,
            Ce = 36,
            ke = Math.pow(Ce, Te);
        o.fingerprint = Me;
        var De = o,
            Pe = q.isoDate,
            Le = function() {
                function e() {
                    this.id = De(), this.startedAt = Pe(), this._handled = 0, this._unhandled = 0
                }
                var t = e.prototype;
                return t.toJSON = function() {
                    return {
                        id: this.id,
                        startedAt: this.startedAt,
                        events: {
                            handled: this._handled,
                            unhandled: this._unhandled
                        }
                    }
                }, t.trackError = function(e) {
                    this[e._handledState.unhandled ? "_unhandled" : "_handled"] += 1
                }, e
            }(),
            Ae = Le,
            Oe = q.map,
            Fe = q.includes,
            qe = q.isArray,
            Ne = function() {
                function e(t) {
                    if (!(t && t.name && t.version && t.url)) throw new Error("`notifier` argument is required");
                    this.notifier = t, this._configured = !1, this._opts = {}, this.config = {}, this._delivery = {
                        sendSession: function() {},
                        sendReport: function() {}
                    }, this._logger = {
                        debug: function() {},
                        info: function() {},
                        warn: function() {},
                        error: function() {}
                    }, this._plugins = {}, this._session = null, this.breadcrumbs = [], this.app = {}, this.context = void 0, this.device = void 0, this.metaData = void 0, this.request = void 0, this.user = {}, this.BugsnagClient = e, this.BugsnagReport = ve, this.BugsnagBreadcrumb = J, this.BugsnagSession = Ae;
                    var n = this,
                        r = this.notify;
                    this.notify = function() {
                        return r.apply(n, arguments)
                    }
                }
                var t = e.prototype;
                return t.setOptions = function(e) {
                    this._opts = a({}, this._opts, e)
                }, t.configure = function(e) {
                    void 0 === e && (e = R.schema);
                    var t = R.mergeDefaults(this._opts, e),
                        n = R.validate(t, e);
                    if (!0 == !n.valid) throw new Error(je(n.errors));
                    return "function" == typeof t.beforeSend && (t.beforeSend = [t.beforeSend]), t.appVersion && (this.app.version = t.appVersion), t.appType && (this.app.type = t.appType), t.metaData && (this.metaData = t.metaData), t.user && (this.user = t.user), t.logger && this.logger(t.logger), this.config = a({}, this.config, t), this._configured = !0, this
                }, t.use = function(e) {
                    if (!this._configured) throw new Error("client not configured");
                    e.configSchema && this.configure(e.configSchema);
                    for (var t = arguments.length, n = new Array(t > 1 ? t - 1 : 0), r = 1; r < t; r++) n[r - 1] = arguments[r];
                    var i = e.init.apply(e, [this].concat(n));
                    return e.name && (this._plugins["~" + e.name + "~"] = i), this
                }, t.getPlugin = function(e) {
                    return this._plugins["~" + e + "~"]
                }, t.delivery = function(e) {
                    return this._delivery = e, this
                }, t.logger = function(e, t) {
                    return this._logger = e, this
                }, t.sessionDelegate = function(e) {
                    return this._sessionDelegate = e, this
                }, t.startSession = function() {
                    return this._sessionDelegate ? this._sessionDelegate.startSession(this) : (this._logger.warn("No session implementation is installed"), this)
                }, t.leaveBreadcrumb = function(e, t, n, r) {
                    if (!this._configured) throw new Error("client not configured");
                    if (e = e || void 0, n = "string" == typeof n ? n : void 0, r = "string" == typeof r ? r : void 0, t = "object" == typeof t && null !== t ? t : void 0, "string" == typeof e || t) {
                        var i = new J(e, t, n, r);
                        return this.breadcrumbs.push(i), this.breadcrumbs.length > this.config.maxBreadcrumbs && (this.breadcrumbs = this.breadcrumbs.slice(this.breadcrumbs.length - this.config.maxBreadcrumbs)), this
                    }
                }, t.notify = function(e, t, n) {
                    var r = this;
                    if (void 0 === t && (t = {}), void 0 === n && (n = function() {}), !this._configured) throw new Error("client not configured");
                    var i = te(this),
                        o = Re(e, t, this._logger),
                        s = o.err,
                        l = o.errorFramesToSkip,
                        c = o._opts;
                    c && (t = c), "object" == typeof t && null !== t || (t = {});
                    var u = ve.ensureReport(s, l, 2);
                    if (u.app = a({}, {
                            releaseStage: i
                        }, u.app, this.app), u.context = u.context || t.context || this.context || void 0, u.device = a({}, u.device, this.device, t.device), u.request = a({}, u.request, this.request, t.request), u.user = a({}, u.user, this.user, t.user), u.metaData = a({}, u.metaData, this.metaData, t.metaData), u.breadcrumbs = this.breadcrumbs.slice(0), this._session && (this._session.trackError(u), u.session = this._session), void 0 !== t.severity && (u.severity = t.severity, u._handledState.severityReason = {
                            type: "userSpecifiedSeverity"
                        }), qe(this.config.notifyReleaseStages) && !Fe(this.config.notifyReleaseStages, i)) return this._logger.warn("Report not sent due to releaseStage/notifyReleaseStages configuration"), n(null, u);
                    var p = u.severity,
                        d = [].concat(t.beforeSend).concat(this.config.beforeSend),
                        h = function(e) {
                            r._logger.error("Error occurred in beforeSend callback, continuing anyway…"), r._logger.error(e)
                        };
                    ee(d, ie(u, h), function(e, t) {
                        if (e && h(e), t) return r._logger.debug("Report not sent due to beforeSend callback"), n(null, u);
                        r.config.autoBreadcrumbs && r.leaveBreadcrumb(u.errorClass, {
                            errorClass: u.errorClass,
                            errorMessage: u.errorMessage,
                            severity: u.severity
                        }, "error"), p !== u.severity && (u._handledState.severityReason = {
                            type: "userCallbackSetSeverity"
                        }), r._delivery.sendReport(r._logger, r.config, {
                            apiKey: u.apiKey || r.config.apiKey,
                            notifier: r.notifier,
                            events: [u]
                        }, function(e) {
                            return n(e, u)
                        })
                    })
                }, e
            }(),
            Re = function(e, t, n) {
                var r, i, o = function(e) {
                        var t = Ve(e);
                        return n.warn("Usage error. " + t), new Error("Bugsnag usage error. " + t)
                    },
                    a = 0;
                switch (typeof e) {
                    case "string":
                        "string" == typeof t ? (r = o("string/string"), i = {
                            metaData: {
                                notifier: {
                                    notifyArgs: [e, t]
                                }
                            }
                        }) : (r = new Error(String(e)), a = 3);
                        break;
                    case "number":
                    case "boolean":
                        r = new Error(String(e));
                        break;
                    case "function":
                        r = o("function");
                        break;
                    case "object":
                        null !== e && (re(e) || e.__isBugsnagReport) ? r = e : null !== e && Be(e) ? (r = new Error(e.message || e.errorMessage), r.name = e.name || e.errorClass, a = 3) : r = o(null === e ? "null" : "unsupported object");
                        break;
                    default:
                        r = o("nothing")
                }
                return {
                    err: r,
                    errorFramesToSkip: a,
                    _opts: i
                }
            },
            Be = function(e) {
                return !("string" != typeof e.name && "string" != typeof e.errorClass || "string" != typeof e.message && "string" != typeof e.errorMessage)
            },
            je = function(e) {
                return "Bugsnag configuration error\n" + Oe(e, function(e) {
                    return '"' + e.key + '" ' + e.message + " \n    got " + ze(e.value)
                }).join("\n\n")
            },
            Ve = function(e) {
                return "notify() expected error/opts parameters, got " + e
            },
            ze = function(e) {
                return "object" == typeof e ? JSON.stringify(e) : String(e)
            },
            Ue = Ne,
            Ge = function(e, t, n, r) {
                var i = r && r.filterKeys ? r.filterKeys : [],
                    o = r && r.filterPaths ? r.filterPaths : [];
                return JSON.stringify(f(e, i, o), t, n)
            },
            He = 20,
            Ke = 25e3,
            We = 8,
            Ye = "...",
            Xe = {},
            $e = ["events.[].app", "events.[].metaData", "events.[].user", "events.[].breadcrumbs", "events.[].request", "events.[].device"],
            Qe = ["device", "app", "user"];
        Xe.report = function(e, t) {
            var n = Ge(e, null, null, {
                filterPaths: $e,
                filterKeys: t
            });
            if (n.length > 1e6 && (delete e.events[0].metaData, e.events[0].metaData = {
                    notifier: "WARNING!\nSerialized payload was " + n.length / 1e6 + "MB (limit = 1MB)\nmetaData was removed"
                }, n = Ge(e, null, null, {
                    filterPaths: $e,
                    filterKeys: t
                }), n.length > 1e6)) throw new Error("payload exceeded 1MB limit");
            return n
        }, Xe.session = function(e, t) {
            var n = Ge(e, null, null, {
                filterPaths: Qe,
                filterKeys: t
            });
            if (n.length > 1e6) throw new Error("payload exceeded 1MB limit");
            return n
        };
        var Ze = {},
            Je = q.isoDate;
        Ze = function(e) {
            return void 0 === e && (e = window), {
                sendReport: function(t, n, r, i) {
                    void 0 === i && (i = function() {});
                    var o = et(n, "notify", "4", e),
                        a = new e.XDomainRequest;
                    a.onload = function() {
                        i(null)
                    }, a.open("POST", o), setTimeout(function() {
                        try {
                            a.send(Xe.report(r, n.filters))
                        } catch (e) {
                            t.error(e), i(e)
                        }
                    }, 0)
                },
                sendSession: function(t, n, r, i) {
                    void 0 === i && (i = function() {});
                    var o = et(n, "sessions", "1", e),
                        a = new e.XDomainRequest;
                    a.onload = function() {
                        i(null)
                    }, a.open("POST", o), setTimeout(function() {
                        try {
                            a.send(Xe.session(r, n.filters))
                        } catch (e) {
                            t.error(e), i(e)
                        }
                    }, 0)
                }
            }
        };
        var et = function(e, t, n, r) {
                return tt(e.endpoints[t], r.location.protocol) + "?apiKey=" + encodeURIComponent(e.apiKey) + "&payloadVersion=" + n + "&sentAt=" + encodeURIComponent(Je())
            },
            tt = Ze._matchPageProtocol = function(e, t) {
                return "http:" === t ? e.replace(/^https:/, "http:") : e
            },
            nt = q.isoDate,
            rt = function(e) {
                return void 0 === e && (e = window), {
                    sendReport: function(t, n, r, i) {
                        void 0 === i && (i = function() {});
                        try {
                            var o = n.endpoints.notify,
                                a = new e.XMLHttpRequest;
                            a.onreadystatechange = function() {
                                a.readyState === e.XMLHttpRequest.DONE && i(null)
                            }, a.open("POST", o), a.setRequestHeader("Content-Type", "application/json"), a.setRequestHeader("Bugsnag-Api-Key", r.apiKey || n.apiKey), a.setRequestHeader("Bugsnag-Payload-Version", "4"), a.setRequestHeader("Bugsnag-Sent-At", nt()), a.send(Xe.report(r, n.filters))
                        } catch (e) {
                            t.error(e)
                        }
                    },
                    sendSession: function(t, n, r, i) {
                        void 0 === i && (i = function() {});
                        try {
                            var o = n.endpoints.sessions,
                                a = new e.XMLHttpRequest;
                            a.onreadystatechange = function() {
                                a.readyState === e.XMLHttpRequest.DONE && i(null)
                            }, a.open("POST", o), a.setRequestHeader("Content-Type", "application/json"), a.setRequestHeader("Bugsnag-Api-Key", n.apiKey), a.setRequestHeader("Bugsnag-Payload-Version", "1"), a.setRequestHeader("Bugsnag-Sent-At", nt()), a.send(Xe.session(r, n.filters))
                        } catch (e) {
                            t.error(e)
                        }
                    }
                }
            },
            it = {
                init: function(e, t) {
                    void 0 === t && (t = window), e.config.beforeSend.unshift(function(e) {
                        e.context || (e.context = t.location.pathname)
                    })
                }
            },
            ot = q.isoDate,
            at = {
                init: function(e, t) {
                    void 0 === t && (t = navigator);
                    var n = {
                        locale: t.browserLanguage || t.systemLanguage || t.userLanguage || t.language,
                        userAgent: t.userAgent
                    };
                    e.device = m({}, n, e.device), e.config.beforeSend.unshift(function(e) {
                        e.device = m({}, e.device, {
                            time: ot()
                        })
                    })
                }
            },
            st = {
                init: function(e, t) {
                    void 0 === t && (t = window), e.config.beforeSend.unshift(function(e) {
                        e.request && e.request.url || (e.request = g({}, e.request, {
                            url: t.location.href
                        }))
                    })
                }
            },
            lt = q.isArray,
            ct = q.includes,
            ut = {
                init: function(e) {
                    return e.sessionDelegate(pt)
                }
            },
            pt = {
                startSession: function(e) {
                    var t = e;
                    t._session = new e.BugsnagSession;
                    var n = te(t);
                    return lt(t.config.notifyReleaseStages) && !ct(t.config.notifyReleaseStages, n) ? (t._logger.warn("Session not sent due to releaseStage/notifyReleaseStages configuration"), t) : t.config.endpoints.sessions ? (t._delivery.sendSession(t._logger, t.config, {
                        notifier: t.notifier,
                        device: t.device,
                        app: y({}, {
                            releaseStage: n
                        }, t.app),
                        sessions: [{
                            id: t._session.id,
                            startedAt: t._session.startedAt,
                            user: t.user
                        }]
                    }), t) : (t._logger.warn("Session not sent due to missing endpoints.sessions configuration"), t)
                }
            },
            dt = {
                init: function(e) {
                    e.config.collectUserIp || e.config.beforeSend.push(function(e) {
                        e.user && void 0 === e.user.id && delete e.user.id, e.user = v({
                            id: "[NOT COLLECTED]"
                        }, e.user), e.request = v({
                            clientIp: "[NOT COLLECTED]"
                        }, e.request)
                    })
                },
                configSchema: {
                    collectUserIp: {
                        defaultValue: function() {
                            return !0
                        },
                        message: "should be true|false",
                        validate: function(e) {
                            return !0 === e || !1 === e
                        }
                    }
                }
            },
            ht = {},
            ft = q.map,
            mt = q.reduce,
            gt = q.filter;
        ht.init = function(e) {
            var t = /^dev(elopment)?$/.test(e.config.releaseStage),
                n = !1 === e.config.consoleBreadcrumbsEnabled,
                r = (!1 === e.config.autoBreadcrumbs || t) && !0 !== e.config.consoleBreadcrumbsEnabled;
            n || r || ft(yt, function(t) {
                var n = console[t];
                console[t] = function() {
                    for (var r = arguments.length, i = new Array(r), o = 0; o < r; o++) i[o] = arguments[o];
                    e.leaveBreadcrumb("Console output", mt(i, function(e, t, n) {
                        var r = "[Unknown value]";
                        try {
                            r = String(t)
                        } catch (e) {}
                        if ("[object Object]" === r) try {
                            r = JSON.stringify(t)
                        } catch (e) {}
                        return e["[" + n + "]"] = r, e
                    }, {
                        severity: 0 === t.indexOf("group") ? "log" : t
                    }), "log"), n.apply(console, i)
                }, console[t]._restore = function() {
                    console[t] = n
                }
            })
        }, ht.configSchema = {
            consoleBreadcrumbsEnabled: {
                defaultValue: function() {},
                validate: function(e) {
                    return !0 === e || !1 === e || void 0 === e
                },
                message: "should be true|false"
            }
        };
        var yt = gt(["log", "debug", "info", "warn", "error"], function(e) {
                return "undefined" != typeof console && "function" == typeof console[e]
            }),
            vt = {},
            bt = q.reduce;
        vt = {
            init: function(e, t, n) {
                void 0 === t && (t = document), void 0 === n && (n = window);
                var r = "",
                    i = !1,
                    o = function() {
                        return t.documentElement.outerHTML
                    },
                    a = n.location.href,
                    s = function(e) {
                        var t = e.stacktrace[0];
                        if (!t || !t.file || !t.lineNumber) return t;
                        if (t.file.replace(/#.*$/, "") !== a.replace(/#.*$/, "")) return t;
                        i && r || (r = o());
                        var n = ["\x3c!-- DOC START --\x3e"].concat(r.split("\n")),
                            s = _t(n, t.lineNumber - 1),
                            l = s.script,
                            c = s.start,
                            u = bt(l, function(e, n, r) {
                                return Math.abs(c + r + 1 - t.lineNumber) > 10 ? e : (e["" + (c + r + 1)] = n, e)
                            }, {});
                        t.code = u, e.updateMetaData("script", {
                            content: l.join("\n")
                        })
                    };
                r = o();
                var l = t.onreadystatechange;
                t.onreadystatechange = function() {
                    "interactive" === t.readyState && (r = o(), i = !0), "function" == typeof l && l.apply(this, arguments)
                }, e.config.beforeSend.unshift(s)
            }
        };
        var xt = /^.*<script.*?>/,
            wt = /<\/script>.*$/,
            _t = vt.extractScriptContent = function(e, t) {
                for (var n = t; n < e.length && !wt.test(e[n]);) n++;
                for (var r = n; n > 0 && !xt.test(e[n]);) n--;
                var i = n,
                    o = e.slice(i, r + 1);
                return o[0] = o[0].replace(xt, ""), o[o.length - 1] = o[o.length - 1].replace(wt, ""), {
                    script: o,
                    start: i
                }
            },
            St = {
                init: function(e, t) {
                    if (void 0 === t && (t = window), "addEventListener" in t) {
                        var n = !1 === e.config.interactionBreadcrumbsEnabled,
                            r = !1 === e.config.autoBreadcrumbs && !0 !== e.config.interactionBreadcrumbsEnabled;
                        n || r || t.addEventListener("click", function(n) {
                            var r, i;
                            try {
                                r = Et(n.target), i = b(n.target, t)
                            } catch (t) {
                                r = "[hidden]", i = "[hidden]", e._logger.error("Cross domain error when tracking click event. See docs: https://tinyurl.com/y94fq5zm")
                            }
                            e.leaveBreadcrumb("UI click", {
                                targetText: r,
                                targetSelector: i
                            }, "user")
                        }, !0)
                    }
                },
                configSchema: {
                    interactionBreadcrumbsEnabled: {
                        defaultValue: function() {},
                        validate: function(e) {
                            return !0 === e || !1 === e || void 0 === e
                        },
                        message: "should be true|false"
                    }
                }
            },
            Et = function(e) {
                var t = e.textContent || e.innerText || "";
                return t || "submit" !== e.type && "button" !== e.type || (t = e.value), t = t.replace(/^\s+|\s+$/g, ""), x(t, 140)
            },
            Mt = {};
        Mt.init = function(e, t) {
            if (void 0 === t && (t = window), "addEventListener" in t) {
                var n = !1 === e.config.navigationBreadcrumbsEnabled,
                    r = !1 === e.config.autoBreadcrumbs && !0 !== e.config.navigationBreadcrumbsEnabled;
                if (!n && !r) {
                    var i = function(t) {
                        return function() {
                            return e.leaveBreadcrumb(t, {}, "navigation")
                        }
                    };
                    t.addEventListener("pagehide", i("Page hidden"), !0), t.addEventListener("pageshow", i("Page shown"), !0), t.addEventListener("load", i("Page loaded"), !0), t.document.addEventListener("DOMContentLoaded", i("DOMContentLoaded"), !0), t.addEventListener("load", function() {
                        return t.addEventListener("popstate", i("Navigated back"), !0)
                    }), t.addEventListener("hashchange", function(n) {
                        var r = n.oldURL ? {
                            from: Ct(n.oldURL, t),
                            to: Ct(n.newURL, t),
                            state: Pt(t)
                        } : {
                            to: Ct(t.location.href, t)
                        };
                        e.leaveBreadcrumb("Hash changed", r, "navigation")
                    }, !0), t.history.replaceState && Dt(e, t.history, "replaceState", t), t.history.pushState && Dt(e, t.history, "pushState", t), e.leaveBreadcrumb("Bugsnag loaded", {}, "navigation")
                }
            }
        }, Mt.configSchema = {
            navigationBreadcrumbsEnabled: {
                defaultValue: function() {},
                validate: function(e) {
                    return !0 === e || !1 === e || void 0 === e
                },
                message: "should be true|false"
            }
        };
        var It, Tt, Ct = function(e, t) {
                var n = t.document.createElement("A");
                return n.href = e, "" + n.pathname + n.search + n.hash
            },
            kt = function(e, t, n, r) {
                var i = Ct(e.location.href, e);
                return {
                    title: n,
                    state: t,
                    prevState: Pt(e),
                    to: r || i,
                    from: i
                }
            },
            Dt = function(e, t, n, r) {
                var i = t[n];
                t[n] = function(o, a, s) {
                    e.leaveBreadcrumb("History " + n, kt(r, o, a, s), "navigation"), "function" == typeof e.refresh && e.refresh(), e.config.autoCaptureSessions && e.startSession(), i.apply(t, [o, a].concat(void 0 !== s ? s : []))
                }, t[n]._restore = function() {
                    t[n] = i
                }
            },
            Pt = function(e) {
                try {
                    return e.history.state
                } catch (e) {}
            },
            Lt = {},
            At = "request",
            Ot = "BS~~U",
            Ft = "BS~~M",
            qt = q.includes,
            Nt = function() {
                return [It.config.endpoints.notify, It.config.endpoints.sessions]
            };
        Lt.init = function(e, t) {
            void 0 === t && (t = window);
            var n = !1 === e.config.networkBreadcrumbsEnabled,
                r = !1 === e.config.autoBreadcrumbs && !0 !== e.config.networkBreadcrumbsEnabled;
            n || r || (It = e, Tt = t, Rt(), Bt())
        }, Lt.configSchema = {
            networkBreadcrumbsEnabled: {
                defaultValue: function() {},
                validate: function(e) {
                    return !0 === e || !1 === e || void 0 === e
                },
                message: "should be true|false"
            }
        };
        var Rt = function() {
                if ("addEventListener" in Tt.XMLHttpRequest.prototype) {
                    var e = Tt.XMLHttpRequest.prototype.open;
                    Tt.XMLHttpRequest.prototype.open = function(t, n) {
                        this[Ot] = n, this[Ft] = t, this["BS~~S"] && (this.removeEventListener("load", w), this.removeEventListener("error", _)), this.addEventListener("load", w), this.addEventListener("error", _), this["BS~~S"] = !0, e.apply(this, arguments)
                    }
                }
            },
            Bt = function() {
                if ("fetch" in Tt) {
                    var e = Tt.fetch;
                    Tt.fetch = function() {
                        for (var t = arguments.length, n = new Array(t), r = 0; r < t; r++) n[r] = arguments[r];
                        var i = n[0],
                            o = n[1],
                            a = "GET";
                        return o && o.method && (a = o.method), new Promise(function(t, r) {
                            e.apply(void 0, n).then(function(e) {
                                jt(e, a, i), t(e)
                            }).catch(function(e) {
                                Vt(a, i), r(e)
                            })
                        })
                    }
                }
            },
            jt = function(e, t, n) {
                var r = {
                    status: e.status,
                    request: t + " " + n
                };
                e.status >= 400 ? It.leaveBreadcrumb("fetch() failed", r, At) : It.leaveBreadcrumb("fetch() succeeded", r, At)
            },
            Vt = function(e, t) {
                It.leaveBreadcrumb("fetch() error", {
                    request: e + " " + t
                }, At)
            },
            zt = N.intRange,
            Ut = {
                init: function(e) {
                    var t = 0;
                    e.config.beforeSend.push(function(n) {
                        if (t >= e.config.maxEvents) return n.ignore();
                        t++
                    }), e.refresh = function() {
                        t = 0
                    }
                },
                configSchema: {
                    maxEvents: {
                        defaultValue: function() {
                            return 10
                        },
                        message: "should be a positive integer ≤100",
                        validate: function(e) {
                            return zt(1, 100)(e)
                        }
                    }
                }
            },
            Gt = {},
            Ht = q.map;
        Gt = {
            init: function(e) {
                e.config.beforeSend.push(function(e) {
                    e.stacktrace = Ht(e.stacktrace, function(e) {
                        return S({}, e, {
                            file: Wt(e.file)
                        })
                    })
                })
            }
        };
        var Kt, Wt = Gt._strip = function(e) {
                return "string" == typeof e ? e.replace(/\?.*$/, "").replace(/#.*$/, "") : e
            },
            Yt = {
                init: function(e, t) {
                    function n(t, n, i, o, a) {
                        if (0 === i && /Script error\.?/.test(t)) e._logger.warn("Ignoring cross-domain or eval script error. See docs: https://tinyurl.com/y94fq5zm");
                        else {
                            var s, l = {
                                severity: "error",
                                unhandled: !0,
                                severityReason: {
                                    type: "unhandledException"
                                }
                            };
                            if (a) a.name && a.message ? s = new e.BugsnagReport(a.name, a.message, Xt(e.BugsnagReport.getStacktrace(a), n, i, o), l, a) : (s = new e.BugsnagReport("window.onerror", String(a), Xt(e.BugsnagReport.getStacktrace(a, 1), n, i, o), l, a), s.updateMetaData("window onerror", {
                                error: a
                            }));
                            else if ("object" != typeof t || null === t || n && "string" == typeof n || i || o || a) s = new e.BugsnagReport("window.onerror", String(t), Xt(e.BugsnagReport.getStacktrace(a, 1), n, i, o), l, t), s.updateMetaData("window onerror", {
                                event: t
                            });
                            else {
                                var c = t.type ? "Event: " + t.type : "window.onerror",
                                    u = t.message || t.detail || "";
                                s = new e.BugsnagReport(c, u, e.BugsnagReport.getStacktrace(new Error, 1).slice(1), l, t), s.updateMetaData("window onerror", {
                                    event: t,
                                    extraParameters: n
                                })
                            }
                            e.notify(s)
                        }
                        "function" == typeof r && r.apply(this, arguments)
                    }
                    void 0 === t && (t = window);
                    var r = t.onerror;
                    t.onerror = n
                }
            },
            Xt = function(e, t, n, r) {
                var i = e[0];
                return i ? (i.fileName || "string" != typeof t || i.setFileName(t), !i.lineNumber && $t(n) && i.setLineNumber(n), i.columnNumber || ($t(r) ? i.setColumnNumber(r) : window.event && $t(window.event.errorCharacter) && i.setColumnNumber(window.event.errorCharacter)), e) : e
            },
            $t = function(e) {
                return "number" == typeof e && "NaN" !== String.call(e)
            },
            Qt = {},
            Zt = q.reduce;
        Qt.init = function(e, t) {
            void 0 === t && (t = window);
            var n = function(t) {
                var n = t.reason,
                    r = !1;
                try {
                    t.detail && t.detail.reason && (n = t.detail.reason, r = !0)
                } catch (e) {}
                var i, o = {
                    severity: "error",
                    unhandled: !0,
                    severityReason: {
                        type: "unhandledPromiseRejection"
                    }
                };
                if (n && ce(n)) i = new e.BugsnagReport(n.name, n.message, le.parse(n), o, n), r && (i.stacktrace = Zt(i.stacktrace, en(n), []));
                else {
                    i = new e.BugsnagReport(n && n.name ? n.name : "UnhandledRejection", n && n.message ? n.message : 'Rejection reason was not an Error. See "Promise" tab for more detail.', [], o, n), i.updateMetaData("promise", "rejection reason", Jt(n))
                }
                e.notify(i)
            };
            "addEventListener" in t ? t.addEventListener("unhandledrejection", n) : t.onunhandledrejection = function(e, t) {
                n({
                    detail: {
                        reason: e,
                        promise: t
                    }
                })
            }, Kt = n
        };
        var Jt = function(e) {
                if (null === e || void 0 === e) return "undefined (or null)";
                if (re(e)) {
                    var t;
                    return t = {}, t[Object.prototype.toString.call(e)] = {
                        name: e.name,
                        message: e.message,
                        code: e.code,
                        stack: e.stack
                    }, t
                }
                return e
            },
            en = function(e) {
                return function(t, n) {
                    return n.file === e.toString() ? t : (n.method && (n.method = n.method.replace(/^\s+/, "")), t.concat(n))
                }
            },
            tn = {},
            nn = q.map,
            rn = E({}, R.schema, X);
        return tn = function(e) {
            "string" == typeof e && (e = {
                apiKey: e
            });
            var t = [];
            e.sessionTrackingEnabled && (t.push("deprecated option sessionTrackingEnabled is now called autoCaptureSessions"), e.autoCaptureSessions = e.sessionTrackingEnabled), !e.endpoint && !e.sessionEndpoint || e.endpoints || (t.push("deprecated options endpoint/sessionEndpoint are now configured in the endpoints object"), e.endpoints = {
                notify: e.endpoint,
                sessions: e.sessionEndpoint
            }), e.endpoints && e.endpoints.notify && !e.endpoints.sessions && t.push("notify endpoint is set but sessions endpoint is not. No sessions will be sent.");
            var n = new Ue({
                name: "Bugsnag JavaScript",
                version: "6.1.0",
                url: "https://github.com/bugsnag/bugsnag-js"
            });
            return n.setOptions(e), n.delivery(window.XDomainRequest ? Ze() : rt()), n.configure(rn), nn(t, function(e) {
                return n._logger.warn(e)
            }), n.use(at), n.use(it), n.use(st), n.use(vt), n.use(Ut), n.use(ut), n.use(dt), n.use(Gt), !1 !== n.config.autoNotify && (n.use(Yt), n.use(Qt)), n.use(Mt), n.use(St), n.use(Lt), n.use(ht), n._logger.debug("Loaded!"), n.config.autoCaptureSessions ? n.startSession() : n
        }, tn.Bugsnag = {
            Client: Ue,
            Report: ve,
            Session: Ae,
            Breadcrumb: J
        }, tn.default = tn, tn
    }), define("main/basic-print-button", ["require", "exports", "tslib", "dcgview"], function(e, t, n, r) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var i = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.template = function() {
                return r.createElement("div", {
                    class: r.const("dcg-print-basic-calc hidden-until-load"),
                    "aria-label": r.const("Print"),
                    tabindex: r.const("0"),
                    role: r.const("button"),
                    onTap: this.bindFn(this.print)
                }, r.createElement("i", {
                    class: r.const("dcg-icon-print")
                }))
            }, t.prototype.print = function() {
                window.print()
            }, t
        }(r.Class);
        t.default = i
    }), define("main/calc_basic", ["require", "api/calculator", "config", "bugsnag", "lib/app-bridge", "jquery", "vendor/bugsnag", "dcgview", "./basic-print-button"], function(e) {
        var t = e("api/calculator"),
            n = e("config"),
            r = e("bugsnag"),
            i = e("lib/app-bridge"),
            o = e("jquery"),
            a = e("vendor/bugsnag"),
            s = e("dcgview"),
            l = e("./basic-print-button").default;
        n.get("testing") || r.init(a);
        var c, u = document.getElementById("main"),
            p = n.all();
        n.get("sciKeypad") ? (o("#main").addClass("dcg-scientific-container"), o(".help-link").attr("href", "http://learn.desmos.com/scientific"), c = t.ScientificCalculator(u, p)) : (o("#main").addClass("dcg-four-function-container"), o(".help-link").attr("href", "http://learn.desmos.com/fourfunction"), c = t.FourFunctionCalculator(u, p)), r.setBeforeSendCB(function(e) {
            var t = c.controller.stateStack;
            t && t.serializeForBugsnag && (e.metaData.states = t.serializeForBugsnag())
        });
        var d = o(".print-button-container")[0];
        d && s.mountToNode(l, d), o(document).on("keydown", function(e) {
            0 === o(e.target).closest(".dcg-calc-basic-main-wrapper").length && c.view && c.view.handleRootKeydown(e)
        });
        var h = function() {
            var e = c.controller.getInvertedColors();
            o("body").toggleClass("dcg-inverted-colors", e);
            var t = c.controller.getBackgroundColor();
            o("body").css({
                background: t
            }), o("#main").css("border-color", t)
        };
        return c.settings.observeAndSync("invertedColors", h), c.settings.observeAndSync("backgroundColor", h), c.focusFirstExpression(), i.hideLoadingScreen(), o(".dcg-loading-div-container").hide(), o(".hidden-until-load").fadeIn("fast"), c
    }), define("main/noconflict", ["require", "jquery", "underscore"], function(e) {
        var t = e("jquery"),
            n = e("underscore");
        return "undefined" == typeof Desmos && (Desmos = {}),
            function() {
                Desmos.$ = t, Desmos._ = n, Desmos.$.noConflict(!0), Desmos._.noConflict()
            }
    }), define("toplevel/calculator_basic", ["require", "touchtracking", "main/calc_basic", "main/noconflict"], function(e) {
        e("touchtracking").monitor(document.body);
        var t = e("main/calc_basic");
        return e("main/noconflict")(), t
    });